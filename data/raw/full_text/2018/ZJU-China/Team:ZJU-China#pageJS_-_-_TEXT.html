Team:ZJU-China/pageJS
var times = 6; $(function(){  $(window).scrollTop(0);  var height;  height = $('.cnt_psg').offset().top - $('.demo').height() * 2;  $(window).scroll(function(){   if($(window).scrollTop() >= height) {    $('.cnt').fadeIn(300);   } else {    $('.cnt').fadeOut(300);   }  });
var indices = document.getElementsByClassName('psg_ttl');  var i, temp, allCnt;  allCnt = ; for(i=0; i<indices.length-1; i++) {   temp = indices[i].innerHTML;
allCnt += '
 '+temp+'
';
}  temp = indices[indices.length-1].innerHTML;
allCnt += '
 '+temp+'
';
$('.cnt').html(allCnt);
var tops = new Array();  var contents = new Array();  for(i=0; i<indices.length; i++) {   tops.push(indices[i].offsetTop);   contents.push(indices[i].innerHTML);  }
var cnts = $('.cnt').find('*');  $('.cnt>p').click(function() {   var temp = $(this).html();   temp = temp.slice(6)   var index = contents.indexOf(temp);   if(index >= 0) {    temp = tops[index] -  6 * $('.psg_ttl').height();    $('html,body').animate({scrollTop: temp}, 800);   }  });  $(window).scroll(function() {   var temp = tops.length - 1;   var top = $(window).scrollTop();   var index = getIndex(tops, top);   for(var i=0; i<=temp; i++) {    cnts[i].style.color = 'black';    cnts[i].style.fontWeight = 'normal';   }   cnts[index].style.display = 'block';   cnts[index].style.color = 'steelblue';   cnts[index].style.fontWeight = 'bolder';  }); });
function getIndex(tops, top) {  var times = 6;  var temp = tops.length - 1;  if(top<=tops[0] -  times * $('.psg_ttl').height()) return 0;  else if(top>=tops[temp] -  times * $('.psg_ttl').height()) return tops.length-1;  for(var i=0;i<temp;i++) {   if(top>=tops[i] -  times * $('.psg_ttl').height() && top<tops[i+1] -  6 * $('.psg_ttl').height()) return i;  }  return 0; }
