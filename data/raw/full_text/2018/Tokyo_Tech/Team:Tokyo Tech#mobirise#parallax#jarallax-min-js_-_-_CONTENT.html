<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Tokyo_Tech_mobirise_parallax_jarallax-min-js skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Tokyo Tech/mobirise/parallax/jarallax-min-js</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>/*!
</P><PRE>* Name    : Just Another Parallax [Jarallax]
* Version : 1.7.3
* Author  : _nK <A rel="nofollow" class="external free" href="https://nkdev.info">https://nkdev.info</A>
* GitHub  : <A rel="nofollow" class="external free" href="https://github.com/nk-o/jarallax">https://github.com/nk-o/jarallax</A>
*/
</PRE><P>!function(e){&quot;use strict&quot;;function t(){i=e.innerWidth||document.documentElement.clientWidth,a=e.innerHeight||document.documentElement.clientHeight}function n(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent(&quot;on&quot;+t,function(){n.call(e)})}function o(n){e.requestAnimationFrame(function(){&quot;scroll&quot;!==n.type&amp;&amp;t();for(var e=0,o=g.length;e&lt;o;e++)&quot;scroll&quot;!==n.type&amp;&amp;(g[e].coverImage(),g[e].clipContainer()),g[e].onScroll()})}Date.now||(Date.now=function(){return(new Date).getTime()}),e.requestAnimationFrame||!function(){for(var t=[&quot;webkit&quot;,&quot;moz&quot;],n=0;n&lt;t.length&amp;&amp;!e.requestAnimationFrame;++n){var o=t[n];e.requestAnimationFrame=e[o+&quot;RequestAnimationFrame&quot;],e.cancelAnimationFrame=e[o+&quot;CancelAnimationFrame&quot;]||e[o+&quot;CancelRequestAnimationFrame&quot;]}if(/iP(ad|hone|od).*OS 6/.test(e.navigator.userAgent)||!e.requestAnimationFrame||!e.cancelAnimationFrame){var i=0;e.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(i+16,t);return setTimeout(function(){e(i=n)},n-t)},e.cancelAnimationFrame=clearTimeout}}();var i,a,r=function(){if(!e.getComputedStyle)return!1;var t,n=document.createElement(&quot;p&quot;),o={webkitTransform:&quot;-webkit-transform&quot;,OTransform:&quot;-o-transform&quot;,msTransform:&quot;-ms-transform&quot;,MozTransform:&quot;-moz-transform&quot;,transform:&quot;transform&quot;};(document.body||document.documentElement).insertBefore(n,null);for(var i in o)&quot;undefined&quot;!=typeof n.style[i]&amp;&amp;(n.style[i]=&quot;translate3d(1px,1px,1px)&quot;,t=e.getComputedStyle(n).getPropertyValue(o[i]));return(document.body||document.documentElement).removeChild(n),&quot;undefined&quot;!=typeof t&amp;&amp;t.length&gt;0&amp;&amp;&quot;none&quot;!==t}(),l=navigator.userAgent.toLowerCase().indexOf(&quot;android&quot;)&gt;-1,s=/iPad|iPhone|iPod/.test(navigator.userAgent)&amp;&amp;!e.MSStream,c=!!e.opera,m=/Edge\/\d+/.test(navigator.userAgent),p=/Trident.*rv[ :]*11\./.test(navigator.userAgent),u=!!Function(&quot;/*@cc_on return document.documentMode===10@*/&quot;)(),d=document.all&amp;&amp;!e.atob;t();var g=[],f=function(){function e(e,n){var o,i=this;if(i.$item=e,i.defaults={type:&quot;scroll&quot;,speed:.5,imgSrc:null,imgWidth:null,imgHeight:null,enableTransform:!0,elementInViewport:null,zIndex:-100,noAndroid:!1,noIos:!0,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null},o=JSON.parse(i.$item.getAttribute(&quot;data-jarallax&quot;)||&quot;{}&quot;),i.options=i.extend({},i.defaults,o,n),!(l&amp;&amp;i.options.noAndroid||s&amp;&amp;i.options.noIos)){i.options.speed=Math.min(2,Math.max(-1,parseFloat(i.options.speed)));var a=i.options.elementInViewport;a&amp;&amp;&quot;object&quot;==typeof a&amp;&amp;&quot;undefined&quot;!=typeof a.length&amp;&amp;(a=a[0]),!a instanceof Element&amp;&amp;(a=null),i.options.elementInViewport=a,i.instanceID=t++,i.image={src:i.options.imgSrc||null,$container:null,$item:null,width:i.options.imgWidth||null,height:i.options.imgHeight||null,useImgTag:s||l||c||p||u||m},i.initImg()&amp;&amp;i.init()}}var t=0;return e}();f.prototype.css=function(t,n){if(&quot;string&quot;==typeof n)return e.getComputedStyle?e.getComputedStyle(t).getPropertyValue(n):t.style[n];n.transform&amp;&amp;(n.WebkitTransform=n.MozTransform=n.transform);for(var o in n)t.style[o]=n[o];return t},f.prototype.extend=function(e){e=e||{};for(var t=1;t&lt;arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&amp;&amp;(e[n]=arguments[t][n]);return e},f.prototype.initImg=function(){var e=this;return null===e.image.src&amp;&amp;(e.image.src=e.css(e.$item,&quot;background-image&quot;).replace(/^url\(['&quot;]?/g,&quot;&quot;).replace(/['&quot;]?\)$/g,&quot;&quot;)),!(!e.image.src||&quot;none&quot;===e.image.src)},f.prototype.init=function(){function e(){t.coverImage(),t.clipContainer(),t.onScroll(!0),t.options.onInit&amp;&amp;t.options.onInit.call(t),setTimeout(function(){t.$item&amp;&amp;t.css(t.$item,{&quot;background-image&quot;:&quot;none&quot;,&quot;background-attachment&quot;:&quot;scroll&quot;,&quot;background-size&quot;:&quot;auto&quot;})},0)}var t=this,n={position:&quot;absolute&quot;,top:0,left:0,width:&quot;100%&quot;,height:&quot;100%&quot;,overflow:&quot;hidden&quot;,pointerEvents:&quot;none&quot;},o={position:&quot;fixed&quot;};t.$item.setAttribute(&quot;data-jarallax-original-styles&quot;,t.$item.getAttribute(&quot;style&quot;)),&quot;static&quot;===t.css(t.$item,&quot;position&quot;)&amp;&amp;t.css(t.$item,{position:&quot;relative&quot;}),&quot;auto&quot;===t.css(t.$item,&quot;z-index&quot;)&amp;&amp;t.css(t.$item,{zIndex:0}),t.image.$container=document.createElement(&quot;div&quot;),t.css(t.image.$container,n),t.css(t.image.$container,{visibility:&quot;hidden&quot;,&quot;z-index&quot;:t.options.zIndex}),t.image.$container.setAttribute(&quot;id&quot;,&quot;jarallax-container-&quot;+t.instanceID),t.$item.appendChild(t.image.$container),t.image.useImgTag&amp;&amp;r&amp;&amp;t.options.enableTransform?(t.image.$item=document.createElement(&quot;img&quot;),t.image.$item.setAttribute(&quot;src&quot;,t.image.src),o=t.extend({&quot;max-width&quot;:&quot;none&quot;},n,o)):(t.image.$item=document.createElement(&quot;div&quot;),o=t.extend({&quot;background-position&quot;:&quot;50% 50%&quot;,&quot;background-size&quot;:&quot;100% auto&quot;,&quot;background-repeat&quot;:&quot;no-repeat no-repeat&quot;,&quot;background-image&quot;:'url(&quot;'+t.image.src+'&quot;)'},n,o)),d&amp;&amp;(o.backgroundAttachment=&quot;fixed&quot;),t.parentWithTransform=0;for(var i=t.$item;null!==i&amp;&amp;i!==document&amp;&amp;0===t.parentWithTransform;){var a=t.css(i,&quot;-webkit-transform&quot;)||t.css(i,&quot;-moz-transform&quot;)||t.css(i,&quot;transform&quot;);a&amp;&amp;&quot;none&quot;!==a&amp;&amp;(t.parentWithTransform=1,t.css(t.image.$container,{transform:&quot;translateX(0) translateY(0)&quot;})),i=i.parentNode}t.css(t.image.$item,o),t.image.$container.appendChild(t.image.$item),t.image.width&amp;&amp;t.image.height?e():t.getImageSize(t.image.src,function(n,o){t.image.width=n,t.image.height=o,e()}),g.push(t)},f.prototype.destroy=function(){for(var e=this,t=0,n=g.length;t&lt;n;t++)if(g[t].instanceID===e.instanceID){g.splice(t,1);break}var o=e.$item.getAttribute(&quot;data-jarallax-original-styles&quot;);e.$item.removeAttribute(&quot;data-jarallax-original-styles&quot;),&quot;null&quot;===o?e.$item.removeAttribute(&quot;style&quot;):e.$item.setAttribute(&quot;style&quot;,o),e.$clipStyles&amp;&amp;e.$clipStyles.parentNode.removeChild(e.$clipStyles),e.image.$container.parentNode.removeChild(e.image.$container),e.options.onDestroy&amp;&amp;e.options.onDestroy.call(e),delete e.$item.jarallax;for(var i in e)delete e[i]},f.prototype.getImageSize=function(e,t){if(e&amp;&amp;t){var n=new Image;n.onload=function(){t(n.width,n.height)},n.src=e}},f.prototype.clipContainer=function(){if(!d){var e=this,t=e.image.$container.getBoundingClientRect(),n=t.width,o=t.height;if(!e.$clipStyles){e.$clipStyles=document.createElement(&quot;style&quot;),e.$clipStyles.setAttribute(&quot;type&quot;,&quot;text/css&quot;),e.$clipStyles.setAttribute(&quot;id&quot;,&quot;#jarallax-clip-&quot;+e.instanceID);var i=document.head||document.getElementsByTagName(&quot;head&quot;)[0];i.appendChild(e.$clipStyles)}var a=[&quot;#jarallax-container-&quot;+e.instanceID+&quot; {&quot;,&quot;   clip: rect(0 &quot;+n+&quot;px &quot;+o+&quot;px 0);&quot;,&quot;   clip: rect(0, &quot;+n+&quot;px, &quot;+o+&quot;px, 0);&quot;,&quot;}&quot;].join(&quot;\n&quot;);e.$clipStyles.styleSheet?e.$clipStyles.styleSheet.cssText=a:e.$clipStyles.innerHTML=a}},f.prototype.coverImage=function(){var e=this;if(e.image.width&amp;&amp;e.image.height){var t=e.image.$container.getBoundingClientRect(),n=t.width,o=t.height,i=t.left,l=e.image.width,s=e.image.height,c=e.options.speed,m=&quot;scroll&quot;===e.options.type||&quot;scroll-opacity&quot;===e.options.type,p=0,u=0,d=o,g=0,f=0;m&amp;&amp;(p=c&lt;0?c*Math.max(o,a):c*(o+a),c&gt;1?d=Math.abs(p-a):c&lt;0?d=p/c+Math.abs(p):d+=Math.abs(a-o)*(1-c),p/=2),u=d*l/s,u&lt;n&amp;&amp;(u=n,d=u*s/l),e.bgPosVerticalCenter=0,!(m&amp;&amp;d&lt;a)||r&amp;&amp;e.options.enableTransform||(e.bgPosVerticalCenter=(a-d)/2,d=a),m?(g=i+(n-u)/2,f=(a-d)/2):(g=(n-u)/2,f=(o-d)/2),r&amp;&amp;e.options.enableTransform&amp;&amp;e.parentWithTransform&amp;&amp;(g-=i),e.parallaxScrollDistance=p,e.css(e.image.$item,{width:u+&quot;px&quot;,height:d+&quot;px&quot;,marginLeft:g+&quot;px&quot;,marginTop:f+&quot;px&quot;}),e.options.onCoverImage&amp;&amp;e.options.onCoverImage.call(e)}},f.prototype.isVisible=function(){return this.isElementInViewport||!1},f.prototype.onScroll=function(e){var t=this;if(t.image.width&amp;&amp;t.image.height){var n=t.$item.getBoundingClientRect(),o=n.top,l=n.height,s={position:&quot;absolute&quot;,visibility:&quot;visible&quot;,backgroundPosition:&quot;50% 50%&quot;},c=n;if(t.options.elementInViewport&amp;&amp;(c=t.options.elementInViewport.getBoundingClientRect()),t.isElementInViewport=c.bottom&gt;=0&amp;&amp;c.right&gt;=0&amp;&amp;c.top&lt;=a&amp;&amp;c.left&lt;=i,e||t.isElementInViewport){var m=Math.max(0,o),p=Math.max(0,l+o),u=Math.max(0,-o),g=Math.max(0,o+l-a),f=Math.max(0,l-(o+l-a)),h=Math.max(0,-o+a-l),y=1-2*(a-o)/(a+l),v=1;if(l&lt;a?v=1-(u||g)/l:p&lt;=a?v=p/a:f&lt;=a&amp;&amp;(v=f/a),&quot;opacity&quot;!==t.options.type&amp;&amp;&quot;scale-opacity&quot;!==t.options.type&amp;&amp;&quot;scroll-opacity&quot;!==t.options.type||(s.transform=&quot;translate3d(0, 0, 0)&quot;,s.opacity=v),&quot;scale&quot;===t.options.type||&quot;scale-opacity&quot;===t.options.type){var x=1;t.options.speed&lt;0?x-=t.options.speed*v:x+=t.options.speed*(1-v),s.transform=&quot;scale(&quot;+x+&quot;) translate3d(0, 0, 0)&quot;}if(&quot;scroll&quot;===t.options.type||&quot;scroll-opacity&quot;===t.options.type){var b=t.parallaxScrollDistance*y;r&amp;&amp;t.options.enableTransform?(t.parentWithTransform&amp;&amp;(b-=o),s.transform=&quot;translate3d(0, &quot;+b+&quot;px, 0)&quot;):t.image.useImgTag?s.top=b+&quot;px&quot;:(t.bgPosVerticalCenter&amp;&amp;(b+=t.bgPosVerticalCenter),s.backgroundPosition=&quot;50% &quot;+b+&quot;px&quot;),s.position=d?&quot;absolute&quot;:&quot;fixed&quot;}t.css(t.image.$item,s),t.options.onScroll&amp;&amp;t.options.onScroll.call(t,{section:n,beforeTop:m,beforeTopEnd:p,afterTop:u,beforeBottom:g,beforeBottomEnd:f,afterBottom:h,visiblePercent:v,fromViewportCenter:y})}}},n(e,&quot;scroll&quot;,o),n(e,&quot;resize&quot;,o),n(e,&quot;orientationchange&quot;,o),n(e,&quot;load&quot;,o);var h=function(e){(&quot;object&quot;==typeof HTMLElement?e instanceof HTMLElement:e&amp;&amp;&quot;object&quot;==typeof e&amp;&amp;null!==e&amp;&amp;1===e.nodeType&amp;&amp;&quot;string&quot;==typeof e.nodeName)&amp;&amp;(e=[e]);var t,n=arguments[1],o=Array.prototype.slice.call(arguments,2),i=e.length,a=0;for(a;a&lt;i;a++)if(&quot;object&quot;==typeof n||&quot;undefined&quot;==typeof n?e[a].jarallax||(e[a].jarallax=new f(e[a],n)):e[a].jarallax&amp;&amp;(t=e[a].jarallax[n].apply(e[a].jarallax,o)),&quot;undefined&quot;!=typeof t)return t;return e};h.constructor=f;var y=e.jarallax;if(e.jarallax=h,e.jarallax.noConflict=function(){return e.jarallax=y,this},&quot;undefined&quot;!=typeof jQuery){var v=function(){var t=arguments||[];Array.prototype.unshift.call(t,this);var n=h.apply(e,t);return&quot;object&quot;!=typeof n?n:this};v.constructor=f;var x=jQuery.fn.jarallax;jQuery.fn.jarallax=v,jQuery.fn.jarallax.noConflict=function(){return jQuery.fn.jarallax=x,this}}n(e,&quot;DOMContentLoaded&quot;,function(){h(document.querySelectorAll(&quot;[data-jarallax], [data-jarallax-video]&quot;))})}(window);
</P></DIV></DIV></DIV></DIV></DIV></BODY></HTML>