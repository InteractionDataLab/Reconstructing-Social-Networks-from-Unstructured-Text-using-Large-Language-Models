<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_BIT-China_js_page_home skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:BIT-China/js/page/home</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>$(document).ready(function () {
</P><PRE>   $(function() {
</PRE><PRE>       //平滑滚动
       var preventFlag=false;//滚动时禁止相应变色
       $.scrollTop = function(selector,adjust,time){
           $(document.body).animate({
               scrollTop:($(selector).offset().top+adjust)+&quot;px&quot;
           },time, function () {
               preventFlag=false;
               //setTimeout('preventFlag=false',100);
           });
           $(document.documentElement).animate({
               scrollTop:($(selector).offset().top+adjust)+&quot;px&quot;
           },time, function () {
               preventFlag=false;
               //setTimeout('preventFlag=false',100);
           });
       };
</PRE><PRE>       var collections=$(&quot;[data-sr]&quot;);
       var options = {
           distance: '10px',
           duration: 800,
           delay: 0,
           rotate: {
               x: 0,
               y: 0,
               z: 0
           },
           opacity: 0,
           scale: 0,
           easing: 'ease-in-out',
           mobile: true,
           reset: true,
           useDelay: 'always',
           viewFactor: 0.2,
           viewOffset: {
               top: 0,
               right: 0,
               bottom: 0,
               left: 0
           }
       };
       window.sr= ScrollReveal(options);
</PRE><PRE>       //绑定动画的元素
       sr.reveal(document.querySelectorAll('[data-sr=&quot;left&quot;]'),
           {origin: &quot;left&quot;});
       sr.reveal(document.querySelectorAll('[data-sr=&quot;top&quot;]'),
           {origin: &quot;top&quot;});
       sr.reveal(document.querySelectorAll('[data-sr=&quot;bottom&quot;]'),
           {origin: &quot;bottom&quot;});
       sr.reveal(document.querySelectorAll('[data-sr=&quot;right&quot;]'),
           {origin: &quot;right&quot;});
</PRE><PRE>       //与文件头绑定的元素
       //首先获取文件头对应的内容
       var headerTexts=$(&quot;.nav&gt;li&gt;a&quot;);
       var headerBind=new Array();
       headerTexts.each(function (index, element) {
           var id=$(element).attr(&quot;href&quot;).substr(1).toLowerCase();
           headerBind.push($(&quot;#&quot;+id));
       });
</PRE><PRE>       //点击导航事件
       var navs=$(&quot;.nav&gt;li&gt;a&quot;);
       navs.each(function (index, element) {
</PRE><PRE>           $(element).click(function (e) {
               e.preventDefault();
</PRE><PRE>               if($(document.body).is(&quot;:animated&quot;) &amp;&amp; $(document.documentElement).is(&quot;:animated&quot;)){
                   return;
               }
               var id=$(element).attr(&quot;href&quot;);
               $.scrollTop(id,-200,500);
               SetNavColors(headerTexts,index);
           });
</PRE><PRE>       });
</PRE><PRE>       window.onscroll = function () {
           //下方标签与顶部导航对应
           for (j = 0; j &lt; headerBind.length; j++) {
</PRE><PRE>               if (document.body.scrollTop == 0) {
                   SetNavColors(headerTexts, 0);
               }
               else if(EnteringViewport($(headerBind[j]))){
                   SetNavColors(headerTexts, j);
</PRE><PRE>                   //设置hover
                   if($(headerTexts[j]).attr(&quot;href&quot;)==&quot;#idea&quot;){
                       $(&quot;.tooltip-effect-1&quot;).addClass(&quot;tooltip-effect-active&quot;);
                   }
                   else{
                       $(&quot;.tooltip-effect-1&quot;).removeClass(&quot;tooltip-effect-active&quot;);
                   }
               }
               else{
                   $(&quot;.tooltip-effect-1&quot;).removeClass(&quot;tooltip-effect-active&quot;);
               }
</PRE><PRE>           }
       };
</PRE><PRE>       /**
        //     * 判断元素进入视口
        //     * @param element
        //     * @returns {boolean}
        //     * @constructor
        //     */
       function EnteringViewport(element) {
           if($(element).hasClass($(element).attr('data-sr'))) return false;
           var elementOffset = $(element).offset();
           var elementTop = elementOffset.top + $(element).scrollTop();
           var elementBottom = elementOffset.top + $(element).scrollTop() + $(element).height();
           var viewportBottom = $(window).scrollTop() + $(window).height();
           var viewportTop = $(window).scrollTop();
</PRE><PRE>           return ( elementTop &lt; viewportTop + 400 || elementBottom &lt; viewportBottom) ? true : false;
       }
</PRE><PRE>       /**
         * 设置a标签颜色
         * @param headerTexts
         * @param j
         * @constructor
         */
       function SetNavColors(headerTexts,j){
           for(i=0;i&lt;headerTexts.length;i++){
               if(i==j){
                   $(headerTexts[i]).parent(&quot;li&quot;).addClass(&quot;active&quot;);
                   //.css(&quot;color&quot;,&quot;white&quot;);
               }
               else{
                   $(headerTexts[i]).parent(&quot;li&quot;).removeClass(&quot;active&quot;);
                   //css(&quot;color&quot;, 'rgba(255, 255, 255, 0.5)');
               }
           }
       }
</PRE><PRE>   });
</PRE><P>});
</P></DIV></DIV></DIV></DIV></DIV></BODY></HTML>