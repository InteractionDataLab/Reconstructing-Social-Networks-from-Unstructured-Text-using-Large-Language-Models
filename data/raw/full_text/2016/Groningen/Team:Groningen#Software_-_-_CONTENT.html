<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Groningen_Software skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Groningen/Software</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><DIV id="content_wrapper"><HEADER id="content-header"><SPAN id="logo-container" class="menu-item"><DIV class="menu-title"><A href="/Team:Groningen">CryptoGE®M</A></DIV></SPAN><SPAN class="menu-item"><DIV class="menu-title">Team</DIV><DIV class="sub-menu-wrap"><DIV class="sub-menu"><A href="/Team:Groningen/Team">Members</A><A href="/Team:Groningen/Supervisors">Supervisors</A><A href="/Team:Groningen/Collaborations">Collaborations</A><A href="/Team:Groningen/Achievements">Achievements</A><A href="/Team:Groningen/Contact">Contact</A></DIV></DIV></SPAN><SPAN class="menu-item"><DIV class="menu-title">Project</DIV><DIV class="sub-menu-wrap"><DIV class="sub-menu"><A href="/Team:Groningen/Tour"><STRONG>Tour</STRONG></A><A href="/Team:Groningen/Description">Description</A><A href="/Team:Groningen/Design">Design</A><A href="/Team:Groningen/Results">Results</A><A href="/Team:Groningen/Demonstrate">Demonstrate</A><A href="/Team:Groningen/Applications">Applications</A><A href="/Team:Groningen/FuturePerspectives">Future</A><A href="/Team:Groningen/Notebook">Notebook</A></DIV></DIV></SPAN><SPAN class="menu-item"><DIV class="menu-title">Biology</DIV><DIV class="sub-menu-wrap"><DIV class="sub-menu"><A href="/Team:Groningen/Experiments">Experiments</A><A href="/Team:Groningen/Parts">Parts</A><A href="/Team:Groningen/Safety">Safety</A><A href="/Team:Groningen/Labjournal">Lab journal</A></DIV></DIV></SPAN><SPAN class="menu-item"><DIV class="menu-title">Computing</DIV><DIV class="sub-menu-wrap"><DIV class="sub-menu"><A href="/Team:Groningen/Model">Modelling</A><A href="/Team:Groningen/Software">Software</A><A href="/Team:Groningen/Encoding">Encoding</A><A href="/Team:Groningen/Decoding">Decoding</A></DIV></DIV></SPAN><SPAN class="menu-item"><DIV class="menu-title">Human Practices</DIV><DIV class="sub-menu-wrap"><DIV class="sub-menu"><A href="/Team:Groningen/Human_Practices">Human Practices</A><A href="/Team:Groningen/HP/Gold">Gold</A><A href="/Team:Groningen/HP/Silver">Silver</A></DIV></DIV></SPAN><SPAN class="menu-item"><DIV class="menu-title">Support</DIV><DIV class="sub-menu-wrap"><DIV class="sub-menu"><A href="/Team:Groningen/Sponsors">Sponsors</A><A href="/Team:Groningen/Attributions">Attributions</A></DIV></DIV></SPAN></HEADER><DIV id="groningen-wrapper"><ARTICLE><SECTION><H2>Software</H2><P>This article will explain in detail how the software part of 
			CryptoGErM works. To encrypt the message and translate it to DNA we 
			wrote several Javascripts. They are used in the demonstration of our
			software on the	<A href="/Team:Groningen/Encoding">Encoding</A> and
			<A href="/Team:Groningen/Decoding">Decoding</A> pages.
			The following sections cover the same steps the software takes to
			turn a text into DNA. First encryption, then translation to DNA
			and finally packing it into a complete message sequence. The
			examples will use <CODE>Hello world</CODE> as the message text, and
			<CODE>secret</CODE> for the encryption key.</P><P>The software is divided into several modules, each in their own 
			file. Two of the modules were not written by us, but used under an 
			open source license. The encryption code, provided by the AES 
			module was written by Chris Veness at <A href="http://www.movable-type.co.uk/scripts/aes.html">Movable-Type.co.uk</A>. 
			The CRC implementation for computing checksums was written by 
			Github user <A href="https://gist.github.com/chitchcock">chitchcock</A> and 
			published as Github <A href="https://gist.github.com/chitchcock/5112270">Gist 
			#5112270</A>. All other code was written by us and is licensed 
			under the <A href="https://opensource.org/licenses/MIT">MIT 
			license</A>.</P><P>An offline version of the software can be downloaded: <A href="https://static.igem.org/mediawiki/2016/5/5f/T--Groningen--Software.zip">CryptoGErM.zip</A>.</P></SECTION><SECTION><H3>Encryption &amp; Decryption</H3><P>We use the AES module for encryption and decryption, specifically:
			AES counter mode. This mode allows us to encrypt (and decrypt) messages
			of any length. It does this by splitting the message up into blocks
			and adding a counter to every block. The first block contains an
			initialization vector, which is randomized every time and also the
			number of blocks that follow it. As a result of this every block
			has a different cipher text, even if there are repetitions in the
			original message. In fact, the cipher text for the entire message
			is different, even if the same message is encrypted again.</P><P>Encrypting our example message <CODE>Hello world</CODE> with the
			key <CODE>secret</CODE> is now as easy as calling
			<CODE>Aes.Ctr.encrypt(message, key)</CODE> with (possibly) this result: 
			<CODE id="enc">ÑTyûWáû~zHP�Kúã</CODE>. The
			next step is to turn this cipher text into DNA.</P><P>The AES module is in <A href="/Template:Groningen/aes_js?action=raw&amp;ctype=text/javascript">aes.js</A>
			and the counter mode addition is in 
			<A href="/Template:Groningen/aes-ctr_js?action=raw&amp;ctype=text/javascript">aes-ctr.js</A>.</P></SECTION><SECTION><H3>DNA</H3><P>Before the text can be integrated into a bacterium, it needs to 
			be translated to DNA. Computers store letters, digits and other 
			characters as numbers. The numbers are translated to the symbols 
			you see via an encoding table. The most common encodings are ASCII 
			and Unicode. The cipher text from the example is encoded as 
			follows: <CODE id="utf">138 000 014 209 084 121 251 087 225 251 126 
			128 122 072 080 007 075 250 227</CODE>. We use Unicode Transform 
			Format 8, which means that every character is encoded by 1 up to 6 
			bytes of 8 bits each. In binary, the bytes of the cipher text look 
			like this: <CODE id="bin">10001010 00000000 00001110 11010001 
			01010100 01111001 11111011 01010111 11100001 11111011 01111110 
			10000000 01111010 01001000 01010000 00000111 01001011 11111010 
			11100011</CODE>. Binary has only two digits, 0 and 1, but DNA has 
			four 'digits': ACTG. This means those bytes that need eight bits, 
			need only 4 DNA base-pairs. The translation to DNA is done like 
			this:</P><P>Lets take the letter 'm' as an example.</P><OL><LI>The ASCII/Unicode code is <CODE>109</CODE>.</LI><LI>In binary it is <CODE>01101101</CODE>.</LI><LI>Cut off the right-most, the least significant, 2 bits: <CODE>01</CODE>.</LI><LI>Look up the base: 00 = A, 01 = C, 10 = T, 11 = G: <CODE>C</CODE>.</LI><LI>Append the base to the output: <CODE>C</CODE>.</LI><LI>The input number is now: <CODE>011011</CODE>.</LI><LI>Repeat steps 3 - 6 until there are no more bits left.</LI></OL><P>The result is: <CODE>CGTC</CODE>.</P><P>When we apply the above algorithm to all the characters in the 
			cipher text, we get: <CODE id="dna">TAAG TTAT AAAA TGAA GAAG CACT 
			ACCC CTGC GAAG GTGT GCCC GAAG CATT GAAG GTGT TGGC TAAG AAAT TTGC 
			ATAC AACC GCAA GTAC GAAG TTGT GAAG GATT</CODE>. This, however, is 
			not enough DNA to be able to decode it after extracting it from a 
			bacterium. The next section explains more about the meta-data that 
			goes with the cipher text/DNA.</P><P>Translation to DNA is implemented in
			<A href="/Template:Groningen/eightbit_js?action=raw&amp;ctype=text/javascript">eightbit.js</A> 
			and <A href="/Template:Groningen/dna_js?action=raw&amp;ctype=text/javascript">dna.js</A>.</P></SECTION><SECTION><H3>Message format</H3><P>Translating just the cipher text to DNA is not enough, we need
			some more information in the sequence to be able to decode it after
			extraction. We'll put this information in a header: a block of
			DNA that precedes the cipher text DNA. The decoding machine will
			first read the information in the header and use that to decode the
			rest of the message.</P><H4>Start &amp; end</H4><P>The first problem is that our sequence is inserted into other 
			DNA. When it is sequenced again there is also some DNA in front and
			after the end of the message. We need a way to find out exactly
			where our message starts.</P><P>To solve this, every message block always starts with the same
			sequence: <CODE>GACCAAGCCTGC</CODE>. The decoding machine looks for
			this sequence and then decodes the DNA that follows it. Of course,
			it is possible that this sequence appears as part of non-message
			related DNA, or it may be part of the message. The next pieces of
			message information help with solving this. What the decoder does is
			look for the start sequence and try to decode the rest, if that
			fails it will look for the next occurrence of the start sequence and
			decode that. If it reaches the end of the complete sequence without
			successfully decoding a message it will come to the conclusion that
			there is no intact message in the sequence.</P><H4>Length</H4><P>The next issue is that the decoder needs to know the length of 
			the message sequence. At the end of our sequence, after the 
			message, is a footer: <CODE>GCACCCACCGAC</CODE>. This helps verify 
			the sequence, but it suffers from the same problem as the start of 
			the header: it is possible that it occurs as part of the message 
			sequence. So it is possible that the end is detected too soon. 
			Therefore we also put the length of the message sequence in the 
			header. After the start sequence we reserve 8 base-pairs that 
			encode the length of the message: 8 bases encode 16 bits, which 
			means that the maximum length is \(2^{16} - 1 = 65535\)
			base-pairs.</P><P>The decoder will look for the start sequence, then decode the 
			length and look foor the footer sequence after <EM>length</EM> 
			number of base-pairs. In our example, the length is <CODE id="len">108</CODE> base-pairs, which translates to <CODE id="dnaLen">AGTCAAAA</CODE> in the length field of the header.</P><H4>Checksum</H4><P>Using the length and the footer is enough to verify that no 
			base-pairs have been inserted or deleted, but it cannot be used to
			detect whether base-pairs have changed for whatever reason. To do
			this we also add a checksum to the header.</P><P>A checksum is a kind of digital summary of data. The checksum
			function, in our case CRC16-CCITT, takes data of any length and
			computes a checksum of fixed length. In our case the checksum is 16
			bits, so 8 base-pairs.</P><P>The encoding machine computes the checksum on the original 
			message sequence and places it in the header. The decoder reads the 
			sequenced message, computes the checksum and verifies that it 
			matches the one in the header. If they are, the message is 
			valid.</P><P>Because the message can be of any length (up to 65535 
			base-pairs), but the checksum is always 8 base-pairs, multiple 
			messages will have the same checksum. However, due to the way the 
			checksum is computed, two messages that are very similar but differ 
			in only a few bits will have completely different checksums. So 
			this method is very reliable for detecting small changes in the 
			sequence. Note that the checksum can only be used to detect changes 
			between the extracted message and the original, it cannot be used to
			correct them.</P><P>The checksum of our example message is <CODE id="crc">51063</CODE>, so the encoder puts <CODE id="dnaCrc">GCGCGCAG</CODE> as the checksum in the header. The 
			checksum function can be found in <A href="/Template:Groningen/crc_js?action=raw&amp;ctype=text/javascript">crc.js</A>.</P><H4>Restriction sites</H4><P>All the previous issues regarding length and integrity are 
			fairly common in information exchange. Headers and checksums are 
			also used, for example in computer network protocols. The last 
			problem we face, however is specific to DNA. The full sequence may 
			not contain the five biobrick restriction sites of prefix and 
			suffix, namely:</P><UL><LI>EcoRI: <CODE>GAATTC</CODE></LI><LI>PstI: <CODE>CTGCAG</CODE></LI><LI>XbaI: <CODE>TCTAGA</CODE></LI><LI>SpeI: <CODE>ACTAGT</CODE></LI><LI>NotI: <CODE>GCGGCCGC</CODE></LI></UL><P>To deal with this the encoder looks for occurrences of the 
			restriction site sequences and splices a certain number of 
			A-bases in the middle of each. The number of A-bases is determined 
			by the longest sequence of A-bases that occurs in the full sequence 
			already. This number is also put in the header, using 4 base-pairs, 
			meaning it can have a maximum value of \(2^8 - 1 = 255\). The 
			decoder reads this number and then removes all sequences of that
			many A-bases long before decoding and verifying the message. The
			encoder also puts 4 A-bases between the start sequence and the 
			substitution length, in case their combination would form a
			restriction site.</P><P>In our example the longest sequence of A-bases in the message 
			sequence is <CODE id="subst">4</CODE>, so the substitution sequence 
			needs to be 1 base longer, which is encoded as <CODE id="dnaSubst">CCAA</CODE>. The restriction-substitution code is 
			implemented in <A href="/Template:Groningen/restrict_js?action=raw&amp;ctype=text/javascript">restrict.js</A> 
			and the rest of the message-formatting code is in <A href="/Template:Groningen/message_js?action=raw&amp;ctype=text/javascript">message.js</A>.</P></SECTION><SECTION><H3>Conclusion</H3><P>The encoder follows these steps to create a complete message
			sequence:</P><OL><LI>Encrypt the message with the key.</LI><LI>Convert the message to DNA.</LI><LI>Compute the length and the checksum of the message sequence.</LI><LI>Convert the length and checksum to DNA.</LI><LI>Put the length, checksum, message and footer together as the tail sequence.</LI><LI>Find the longest sequence of A-bases.</LI><LI>Find sequences of restriction enzymes in the tail sequence.</LI><LI>Splice sequences of A-bases, 1 longer than the longest found into the restriction sequences.</LI><LI>Convert the substitution length to DNA.</LI><LI>Put the start sequence, padding and substitution length together in front of the tail.</LI></OL><P>Putting it all together, the full message format looks as follows:</P><OL><LI>The start sequence: <CODE>GACCAAGCCTGC</CODE>.</LI><LI>Padding of 4 base-pairs.</LI><LI>Substitition length: 4 base-pairs.</LI><LI>Length of the message sequence: 8 base-pairs.</LI><LI>Message checksum: 8 base-pairs.</LI><LI>The message sequence itself: <EM>length</EM> times 4 base-pairs.</LI><LI>The footer: <CODE>GCACCCACCGAC</CODE>.</LI></OL><P>Finally, this is our full example message sequence converted to 
			DNA:<CODE id="msg" class="break-word">GACCAAGCCTGCAAAACCAAAGTCAAAAG
			CGCGCAGTAAGTTATAAAATGAAGAAGCACTACCCCTGCGAAGGTGTGCCCGAAGCATTGAAGGTGT
			TGGCTAAGAAATTTGCATACAACCGCAAGTACGAAGTTGTGAAGGATTGCACCCACCGAC</CODE>.
			</P><P>On the other end of the process the decoder takes the following 
			steps to get the message back from extracted DNA:</P><OL><LI>Look for the start sequence.</LI><LI>Skip the next 4 base-pairs (the padding).</LI><LI>Read the 4 base-pairs that follow it as the length of the substitition sequence.</LI><LI>Cut out all sequences of that number A-bases.</LI><LI>Read the next 8 base-pairs as the length of the message sequence.</LI><LI>Then the following 8 base-pairs as the checksum.</LI><LI>Read the message sequence of <EM>length</EM> base-pairs.</LI><LI>Verify that the next 12 base-pairs are equal to the footer sequence.</LI><LI>Compute the checksum of the message sequence and verify it with the checksum read earlier.</LI><LI>Decode the message sequence.</LI><LI>Decrypt the decoded message sequence with the key that the user provides.</LI></OL><P>While this article described the process for translating the 
			encrypted message to a DNA sequence, it is much the same for the 
			key sequence. The only difference is that the encryption and 
			decryption steps are not taken, but the message format is still the 
			same.</P><P>A full implementation of the encoding machine is available at
			<A href="/Team:Groningen/Encoding">Encoding</A> and the decoder can be
			found at <A href="/Team:Groningen/Decoding">Decoding</A>.</P></SECTION></ARTICLE></DIV><DIV id="page-footer" class="page-footer"><SECTION><H6>Team</H6><UL><LI><A href="/Team:Groningen/Team">Members</A></LI><LI><A href="/Team:Groningen/Supervisors">Supervisors</A></LI><LI><A href="/Team:Groningen/Collaborations">Collaborations</A></LI><LI><A href="/Team:Groningen/Achievements">Achievements</A></LI><LI><A href="/Team:Groningen/Contact">Contact</A></LI><LI><A href="/Team:Groningen/Jamboree">Jamboree</A></LI></UL></SECTION><SECTION><H6>Project</H6><UL><LI><A href="/Team:Groningen/Tour">Tour</A></LI><LI><A href="/Team:Groningen/Description">Description</A></LI><LI><A href="/Team:Groningen/Design">Design</A></LI><LI><A href="/Team:Groningen/Demonstrate">Demonstration</A></LI><LI><A href="/Team:Groningen/Summary">Summary</A></LI><LI><A href="/Team:Groningen/Applications">Applications</A></LI><LI><A href="/Team:Groningen/Results">Results</A></LI><LI><A href="/Team:Groningen/FuturePerspectives">Future Perspectives</A></LI></UL></SECTION><SECTION class="double"><H6>Biology</H6><DIV class="split"><UL class="left flone"><LI><A href="/Team:Groningen/Experiments">Experiments</A></LI><LI><A href="/Team:Groningen/Safety">Safety</A></LI><LI><A href="/Team:Groningen/Decoy">Decoy experiment</A></LI><LI><A href="/Team:Groningen/PhotoswitchableAntibiotics">Photoswitchable antibiotics</A></LI><LI><A href="/Team:Groningen/BrickCharacter">BioBrick Characterization</A></LI><LI><A href="/Team:Groningen/KeyDeletion">Key deletion</A></LI></UL><UL class="right flone"><LI><A href="/Team:Groningen/Proof">Proof of concept</A></LI><LI><A href="/Team:Groningen/Labjournal">Lab journal</A></LI><LI><A href="/Team:Groningen/PlasmidConstruction">Plasmid construction</A></LI><LI><A href="/Team:Groningen/Protocols">Protocols</A></LI><LI><A href="/Team:Groningen/Labjournal/PrimerList">Primer list</A></LI><LI><A href="/Team:Groningen/Notebook">Notebook</A></LI></UL></DIV></SECTION><SECTION><H6>Modelling</H6><UL><LI><A href="/Team:Groningen/Model">Modelling</A></LI><LI><A href="/Team:Groningen/MutationRates">Mutation Rates</A></LI><LI><A href="/Team:Groningen/RandomMutation">Random Mutation</A></LI><LI><A href="/Team:Groningen/AIModel">AI Agent model</A></LI><LI><A href="/Team:Groningen/DecodingFidelity">Decoding Fidelity</A></LI><LI><A href="/Team:Groningen/SpiroModel">Optimal Strain</A></LI></UL></SECTION><SECTION><H6>Computing</H6><UL><LI><A href="/Team:Groningen/Software">Software</A></LI><LI><A href="/Team:Groningen/Encoding">Encoder</A></LI><LI><A href="/Team:Groningen/Decoding">Decoder</A></LI><LI><A href="/Team:Groningen/FullCoding">Full Coding</A></LI></UL></SECTION><SECTION class="double"><H6>Human Practices</H6><DIV class="split"><UL class="left flone"><LI><A href="/Team:Groningen/Human_Practices">Human Practices</A></LI><LI><A href="/Team:Groningen/HP/Outreach">Outreach</A></LI><LI><A href="/Team:Groningen/HP/Social">Social</A></LI><LI><A href="/Team:Groningen/HP/Legal">Legal</A></LI><LI><A href="/Team:Groningen/HP/FutureScenarios">Future Scenarios</A></LI></UL><UL class="right flone"><LI><A href="/Team:Groningen/HP/Education">Education</A></LI><LI><A href="/Team:Groningen/Integrated_Practices">Integrated Practices</A></LI><LI><A href="/Team:Groningen/Engagement">Engagement</A></LI><LI><A href="/Team:Groningen/HP/Gold">Gold</A></LI><LI><A href="/Team:Groningen/HP/Silver">Silver</A></LI></UL></DIV></SECTION><SECTION><H6>Support</H6><UL><LI><A href="/Team:Groningen/Sponsors">Sponsors</A></LI><LI><A href="/Team:Groningen/Attributions">Attributions</A></LI></UL></SECTION></DIV></DIV></DIV></DIV></DIV></DIV></DIV></BODY></HTML>