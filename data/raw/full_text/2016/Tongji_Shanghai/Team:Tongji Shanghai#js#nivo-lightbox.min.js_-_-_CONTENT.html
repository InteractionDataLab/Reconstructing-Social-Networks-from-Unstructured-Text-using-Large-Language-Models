<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Tongji_Shanghai_js_nivo-lightbox_min_js skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Tongji Shanghai/js/nivo-lightbox.min.js</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>/*
</P><PRE>* Nivo Lightbox v1.0
* <A rel="nofollow" class="external free" href="http://dev7studios.com/nivo-lightbox">http://dev7studios.com/nivo-lightbox</A>
*
* Copyright 2013, Dev7studios
* Free to use and abuse under the MIT license.
* <A rel="nofollow" class="external free" href="http://www.opensource.org/licenses/mit-license.php">http://www.opensource.org/licenses/mit-license.php</A>
*/
</PRE>
(function(e,t,n,r){function o(t,n){this.el=t;this.$el=e(this.el);this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.init()}var i=&quot;nivoLightbox&quot;,s={effect:&quot;fade&quot;,theme:&quot;default&quot;,keyboardNav:true,onInit:function(){},beforeShowLightbox:function(){},afterShowLightbox:function(e){},beforeHideLightbox:function(){},afterHideLightbox:function(){},onPrev:function(e){},onNext:function(e){},errorMessage:&quot;The requested content cannot be loaded. Please try again later.&quot;};o.prototype={init:function(){var t=this;this.$el.on(&quot;click&quot;,function(e){e.preventDefault();t.showLightbox()});if(this.options.keyboardNav){e(&quot;body&quot;).off(&quot;keyup&quot;).on(&quot;keyup&quot;,function(n){var r=n.keyCode?n.keyCode:n.which;if(r==27)t.destructLightbox();if(r==37)e(&quot;.nivo-lightbox-prev&quot;).trigger(&quot;click&quot;);if(r==39)e(&quot;.nivo-lightbox-next&quot;).trigger(&quot;click&quot;)})}this.options.onInit.call(this)},showLightbox:function(){var t=this;this.options.beforeShowLightbox.call(this);var n=this.constructLightbox();if(!n)return;var r=n.find(&quot;.nivo-lightbox-content&quot;);if(!r)return;var i=this.$el;e(&quot;body&quot;).addClass(&quot;nivo-lightbox-body-effect-&quot;+this.options.effect);this.processContent(r,i);if(this.$el.attr(&quot;data-lightbox-gallery&quot;)){var t=this,s=e('[data-lightbox-gallery=&quot;'+this.$el.attr(&quot;data-lightbox-gallery&quot;)+'&quot;]');e(&quot;.nivo-lightbox-nav&quot;).show();e(&quot;.nivo-lightbox-prev&quot;).off(&quot;click&quot;).on(&quot;click&quot;,function(n){n.preventDefault();var o=s.index(i);i=s.eq(o-1);if(!e(i).length)i=s.last();t.processContent(r,i);t.options.onPrev.call(this,[i])});e(&quot;.nivo-lightbox-next&quot;).off(&quot;click&quot;).on(&quot;click&quot;,function(n){n.preventDefault();var o=s.index(i);i=s.eq(o+1);if(!e(i).length)i=s.first();t.processContent(r,i);t.options.onNext.call(this,[i])})}setTimeout(function(){n.addClass(&quot;nivo-lightbox-open&quot;);t.options.afterShowLightbox.call(this,[n])},1)},processContent:function(n,r){var i=this;var s=r.attr(&quot;href&quot;);n.html(&quot;&quot;).addClass(&quot;nivo-lightbox-loading&quot;);if(this.isHidpi()&amp;&amp;r.attr(&quot;data-lightbox-hidpi&quot;)){s=r.attr(&quot;data-lightbox-hidpi&quot;)}if(s.match(/\.(jpeg|jpg|gif|png)$/)!=null){var o=e(&quot;&lt;img&gt;&quot;,{src:s});o.one(&quot;load&quot;,function(){var r=e('&lt;div class=&quot;nivo-lightbox-image&quot; /&gt;');r.append(o);n.html(r).removeClass(&quot;nivo-lightbox-loading&quot;);r.css({&quot;line-height&quot;:e(&quot;.nivo-lightbox-content&quot;).height()+&quot;px&quot;,height:e(&quot;.nivo-lightbox-content&quot;).height()+&quot;px&quot;});e(t).resize(function(){r.css({&quot;line-height&quot;:e(&quot;.nivo-lightbox-content&quot;).height()+&quot;px&quot;,height:e(&quot;.nivo-lightbox-content&quot;).height()+&quot;px&quot;})})}).each(function(){if(this.complete)e(this).load()});o.error(function(){var t=e('<DIV class="nivo-lightbox-error"><P>'+i.options.errorMessage+&quot;</P></DIV>&quot;);n.html(t).removeClass(&quot;nivo-lightbox-loading&quot;)})}else if(video=s.match(/(youtube|youtu|vimeo)\.(com|be)\/(watch\?v=(\w+)|(\w+))/)){var u=&quot;&quot;,a=&quot;nivo-lightbox-video&quot;;if(video[1]==&quot;youtube&quot;){u=&quot;<A rel="nofollow" class="external free" href="http://www.youtube.com/v/">http://www.youtube.com/v/</A>&quot;+video[4];a=&quot;nivo-lightbox-youtube&quot;}if(video[1]==&quot;youtu&quot;){u=&quot;<A rel="nofollow" class="external free" href="http://www.youtube.com/v/">http://www.youtube.com/v/</A>&quot;+video[3];a=&quot;nivo-lightbox-youtube&quot;}if(video[1]==&quot;vimeo&quot;){u=&quot;<A rel="nofollow" class="external free" href="http://player.vimeo.com/video/">http://player.vimeo.com/video/</A>&quot;+video[3];a=&quot;nivo-lightbox-vimeo&quot;}if(u){var f=e(&quot;&lt;iframe&gt;&quot;,{src:u,&quot;class&quot;:a,frameborder:0,vspace:0,hspace:0,scrolling:&quot;auto&quot;});n.html(f);f.load(function(){n.removeClass(&quot;nivo-lightbox-loading&quot;)})}}else if(r.attr(&quot;data-lightbox-type&quot;)==&quot;ajax&quot;){var i=this;e.ajax({url:s,cache:false,success:function(r){var i=e('&lt;div class=&quot;nivo-lightbox-ajax&quot; /&gt;');i.append(r);n.html(i).removeClass(&quot;nivo-lightbox-loading&quot;);if(i.outerHeight()&lt;n.height()){i.css({position:&quot;relative&quot;,top:&quot;50%&quot;,&quot;margin-top&quot;:-(i.outerHeight()/2)+&quot;px&quot;})}e(t).resize(function(){if(i.outerHeight()&lt;n.height()){i.css({position:&quot;relative&quot;,top:&quot;50%&quot;,&quot;margin-top&quot;:-(i.outerHeight()/2)+&quot;px&quot;})}})},error:function(){var t=e('<DIV class="nivo-lightbox-error"><P>'+i.options.errorMessage+&quot;</P></DIV>&quot;);n.html(t).removeClass(&quot;nivo-lightbox-loading&quot;)}})}else if(s.substring(0,1)==&quot;#&quot;){if(e(s).length){var l=e('&lt;div class=&quot;nivo-lightbox-inline&quot; /&gt;');l.append(e(s).clone().show());n.html(l).removeClass(&quot;nivo-lightbox-loading&quot;);if(l.outerHeight()&lt;n.height()){l.css({position:&quot;relative&quot;,top:&quot;50%&quot;,&quot;margin-top&quot;:-(l.outerHeight()/2)+&quot;px&quot;})}e(t).resize(function(){if(l.outerHeight()&lt;n.height()){l.css({position:&quot;relative&quot;,top:&quot;50%&quot;,&quot;margin-top&quot;:-(l.outerHeight()/2)+&quot;px&quot;})}})}else{var l=e('<DIV class="nivo-lightbox-error"><P>'+i.options.errorMessage+&quot;</P></DIV>&quot;);n.html(l).removeClass(&quot;nivo-lightbox-loading&quot;)}}else{var f=e(&quot;&lt;iframe&gt;&quot;,{src:s,&quot;class&quot;:&quot;nivo-lightbox-item&quot;,frameborder:0,vspace:0,hspace:0,scrolling:&quot;auto&quot;});n.html(f);f.load(function(){n.removeClass(&quot;nivo-lightbox-loading&quot;)})}if(r.attr(&quot;title&quot;)){var c=e(&quot;<SPAN>&quot;,{&quot;class&quot;:&quot;nivo-lightbox-title&quot;});c.text(r.attr(&quot;title&quot;));e(&quot;.nivo-lightbox-title-wrap&quot;).html(c)}else{e(&quot;.nivo-lightbox-title-wrap&quot;).html(&quot;&quot;)}},constructLightbox:function(){if(e(&quot;.nivo-lightbox-overlay&quot;).length)return e(&quot;.nivo-lightbox-overlay&quot;);var t=e(&quot;<DIV>&quot;,{&quot;class&quot;:&quot;nivo-lightbox-overlay nivo-lightbox-theme-&quot;+this.options.theme+&quot; nivo-lightbox-effect-&quot;+this.options.effect});var n=e(&quot;<DIV>&quot;,{&quot;class&quot;:&quot;nivo-lightbox-wrap&quot;});var r=e(&quot;<DIV>&quot;,{&quot;class&quot;:&quot;nivo-lightbox-content&quot;});var i=e('&lt;a href=&quot;#&quot; class=&quot;nivo-lightbox-nav nivo-lightbox-prev&quot;&gt;Previous&lt;/a&gt;&lt;a href=&quot;#&quot; class=&quot;nivo-lightbox-nav nivo-lightbox-next&quot;&gt;Next&lt;/a&gt;');var s=e('&lt;a href=&quot;#&quot; class=&quot;nivo-lightbox-close&quot; title=&quot;Close&quot;&gt;Close&lt;/a&gt;');var o=e(&quot;<DIV>&quot;,{&quot;class&quot;:&quot;nivo-lightbox-title-wrap&quot;});var u=0;if(u)t.addClass(&quot;nivo-lightbox-ie&quot;);n.append(r);n.append(o);t.append(n);t.append(i);t.append(s);e(&quot;body&quot;).append(t);var a=this;t.on(&quot;click&quot;,function(t){if(t.target===this||e(t.target).hasClass(&quot;nivo-lightbox-content&quot;)||e(t.target).hasClass(&quot;nivo-lightbox-image&quot;))a.destructLightbox()});s.on(&quot;click&quot;,function(e){e.preventDefault();a.destructLightbox()});return t},destructLightbox:function(){var t=this;this.options.beforeHideLightbox.call(this);e(&quot;.nivo-lightbox-overlay&quot;).removeClass(&quot;nivo-lightbox-open&quot;);e(&quot;.nivo-lightbox-nav&quot;).hide();e(&quot;body&quot;).removeClass(&quot;nivo-lightbox-body-effect-&quot;+t.options.effect);var n=0;if(n){e(&quot;.nivo-lightbox-overlay iframe&quot;).attr(&quot;src&quot;,&quot; &quot;);e(&quot;.nivo-lightbox-overlay iframe&quot;).remove()}e(&quot;.nivo-lightbox-prev&quot;).off(&quot;click&quot;);e(&quot;.nivo-lightbox-next&quot;).off(&quot;click&quot;);this.options.afterHideLightbox.call(this)},isHidpi:function(){var e=&quot;(-webkit-min-device-pixel-ratio: 1.5),							  (min--moz-device-pixel-ratio: 1.5),							  (-o-min-device-pixel-ratio: 3/2),							  (min-resolution: 1.5dppx)&quot;;if(t.devicePixelRatio&gt;1)return true;if(t.matchMedia&amp;&amp;t.matchMedia(e).matches)return true;return false}};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,i)){e.data(this,i,new o(this,t))}})}})(jQuery,window,document)</DIV></DIV></DIV></DIV></SPAN></DIV></DIV></DIV></DIV></DIV></BODY></HTML>