Team:BIT-China/js/page/home
$(document).ready(function () {
$(function() {
//平滑滚动        var preventFlag=false;//滚动时禁止相应变色        $.scrollTop = function(selector,adjust,time){ $(document.body).animate({                scrollTop:($(selector).offset().top+adjust)+"px"            },time, function () {                preventFlag=false;                //setTimeout('preventFlag=false',100);            });            $(document.documentElement).animate({                scrollTop:($(selector).offset().top+adjust)+"px"            },time, function () {                preventFlag=false;                //setTimeout('preventFlag=false',100);            });        };
var collections=$("[data-sr]");        var options = {            distance: '10px',            duration: 800,            delay: 0,            rotate: {                x: 0,                y: 0,                z: 0            },            opacity: 0,            scale: 0,            easing: 'ease-in-out',            mobile: true,            reset: true,            useDelay: 'always',            viewFactor: 0.2,            viewOffset: {                top: 0,                right: 0,                bottom: 0,                left: 0            }        };        window.sr= ScrollReveal(options);
//绑定动画的元素        sr.reveal(document.querySelectorAll('[data-sr="left"]'),            {origin: "left"});        sr.reveal(document.querySelectorAll('[data-sr="top"]'),            {origin: "top"});        sr.reveal(document.querySelectorAll('[data-sr="bottom"]'),            {origin: "bottom"});        sr.reveal(document.querySelectorAll('[data-sr="right"]'),            {origin: "right"});
//与文件头绑定的元素        //首先获取文件头对应的内容        var headerTexts=$(".nav>li>a");        var headerBind=new Array();        headerTexts.each(function (index, element) {            var id=$(element).attr("href").substr(1).toLowerCase();            headerBind.push($("#"+id));        });
//点击导航事件        var navs=$(".nav>li>a");        navs.each(function (index, element) {
$(element).click(function (e) {                e.preventDefault();
if($(document.body).is(":animated") && $(document.documentElement).is(":animated")){                    return;                }                var id=$(element).attr("href");                $.scrollTop(id,-200,500);                SetNavColors(headerTexts,index);            });
});
window.onscroll = function () {            //下方标签与顶部导航对应            for (j = 0; j < headerBind.length; j++) {
if (document.body.scrollTop == 0) {                    SetNavColors(headerTexts, 0);                }                else if(EnteringViewport($(headerBind[j]))){                    SetNavColors(headerTexts, j);
//设置hover                    if($(headerTexts[j]).attr("href")=="#idea"){                        $(".tooltip-effect-1").addClass("tooltip-effect-active");                    }                    else{                        $(".tooltip-effect-1").removeClass("tooltip-effect-active");                    }                }                else{                    $(".tooltip-effect-1").removeClass("tooltip-effect-active");                }
}        };
/**         //     * 判断元素进入视口         //     * @param element         //     * @returns {boolean}         //     * @constructor         //     */        function EnteringViewport(element) {            if($(element).hasClass($(element).attr('data-sr'))) return false;            var elementOffset = $(element).offset();            var elementTop = elementOffset.top + $(element).scrollTop();            var elementBottom = elementOffset.top + $(element).scrollTop() + $(element).height();            var viewportBottom = $(window).scrollTop() + $(window).height();            var viewportTop = $(window).scrollTop();
return ( elementTop < viewportTop + 400 || elementBottom < viewportBottom) ? true : false;        }
/**          * 设置a标签颜色 * @param headerTexts          * @param j          * @constructor          */        function SetNavColors(headerTexts,j){            for(i=0;i<headerTexts.length;i++){                if(i==j){                    $(headerTexts[i]).parent("li").addClass("active");                    //.css("color","white");                }                else{                    $(headerTexts[i]).parent("li").removeClass("active");                    //css("color", 'rgba(255, 255, 255, 0.5)');                }            }        }
});
});
