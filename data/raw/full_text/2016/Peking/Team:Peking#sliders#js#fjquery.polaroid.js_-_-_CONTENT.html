<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Peking_sliders_js_fjquery_polaroid_js skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Peking/sliders/js/fjquery.polaroid.js</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>/*
</P><PRE>* jQuery Polaroid v1.0 - <A rel="nofollow" class="external free" href="http://karimhossenbux.com/lab/polaroid-slider/">http://karimhossenbux.com/lab/polaroid-slider/</A>
*
* TERMS OF USE :
* 
* Copyright © 2011 Karim Hossenbux
* All rights reserved.
* 
* Polaroid Slider by Karim Hossenbux is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.
* Based on a work at karimhossenbux.com
* Permissions beyond the scope of this license may be available at <A rel="nofollow" class="external free" href="http://www.karimhossenbux.com/contact/">http://www.karimhossenbux.com/contact/</A>
*
* Neither the name of the author nor the names of contributors may be used to endorse 
* or promote products derived from this software without specific prior written permission.
* 
</PRE><UL><LI>/</LI></UL><P>(function($) {
</P><P>	jQuery.fn.polaroid = function(options) {
		var defaults = {
			width: 650,
			pause: 5000,
			animationSpeed: 1500			
		};
</P><P>		var o = $.extend(defaults, options);
</P><P>		return this.each(function() {
</P><P>			var i = 0;
			var spacer = 50;
			var current = false;
			var start = false;
			var nb_thumbs = $('.thumbs').find('.thumb').length;
			var e = $(this);
</P><P>			
			e.find('.thumbs').fadeIn(500);
</P>
			e.prepend('');
			e.append('');
<P>			//$('.slide1, .slide2', e).css('opacity', 0);
</P><P>			
			$(window).resize(function(){
				thumbnails();
			});
			thumbnails();
</P><P>			function thumbnails() {			
				var cWidth = i = space = left = 0;
</P><P>				if( $('body').width() &lt;= 480 ) {
					nSpacer = 0;
				} else {
					nSpacer = spacer;
				}
				e.find('.thumb').each(function(){
					i++;
					var space = o.width / (nb_thumbs + 1);
					var left = (space * i) - spacer; //50 = half image width
					cWidth = left + space;
</P><P>					$(this).attr('id', 't'+i);
					$(this).stop().animate({'left':left+'px'}, 700, function(){
						$(this).unbind('click')
							   .bind('click', showImage)
							   .bind('autoplay', showImage)
							   .unbind('mouseenter')
							   .bind('mouseenter', upThumb)
							   .unbind('mouseleave')
							   .bind('mouseleave', downThumb);
					}).find('img').stop().animate({'rotate': getdeg()}, 300);
</P><P>					$.preLoadImages($(this).find('img').attr('alt'));
				});
</P><P>				var cWidth = cWidth + ( o.width / (nb_thumbs + 1) ) - spacer;
				e.find('.thumbs').css({
					width: cWidth + 'px',
					marginLeft: '-' + (cWidth/2) + 'px'
				}).fadeIn(500);
</P><P>			}
</P><P>			function getdeg() {
				return deg = Math.floor(Math.random()* 41)-20 + 'deg';
			}
</P><P>			function upThumb(){
				$(this).stop().animate({
					'marginTop'	: '-50px'
				}, 400, 'easeOutBack').find('img').stop().animate({'rotate': '0deg'}, 400);
			}
</P><P>			function downThumb(){
				$(this).stop().animate({
					'marginTop' : '0px'
				}, 400, 'easeOutBack').find('img').stop().animate({'rotate': getdeg()}, 400);
			}
</P><P>			function hideThumb(id){
		        if (current != false) $('.thumbs #'+current).stop(true, true).animate({'top': '0px'}, 400, 'easeOutBack');
		        $('.thumbs #'+id).stop(true, true).animate({'top': '120px'}, 400, 'easeInBack');
		    }
</P><P>			function showImage() {
				$('.text-polaroid').html(<I>);</I>
				var img = $(this).find('img').attr('alt');
				var goto = $(this).find('img').attr('title');
				hideThumb($(this).attr('id'));
				current = $(this).attr('id');
				var big = $('.current-slide', e).css('backgroundImage');
				var slide = $('.slide:not(.current)', e).hasClass('slide1') ? '.slide1' : '.slide2';
				var content = $(this).find('.slide-content').length == 0 ? <I> : $(this).find('.slide-content').clone();</I></P><P>				$('.current', e).removeClass('current');
				if ( content == <I> ) {</I>
				    if ( $('.slide-content', slide).length &gt; 0 ) $('.slide-content', slide).remove();
</P><PRE>                   $(e).find(slide).addClass('current').css('backgroundImage', 'url('+img+')'); 
               
               } else {
                   $(e).find(slide).addClass('current').css('backgroundImage', 'none').html( content );
                   $('.text-polaroid').html(<I>).html( $(content).find('.text').html() );  </I>
               }                  
               $('.slide', e).filter('.current').stop().animate({opacity: 1}, o.animationSpeed);
               $('.slide', e).not('.current').stop().animate({opacity: 0}, o.animationSpeed);
</PRE><P>// 				$(e).find('.next-slide').css('opacity', 1);
// 				if ( $(this).find('.slide-content').length == 0 ) {          
//     			    $(e).find('.current-slide .slide-content').remove();
//     				$(e).find('.next-slide').css('backgroundImage', big);
//     				$(e).find('.current-slide').css('backgroundImage', 'url('+img+')');   
//     			
//                 } else {
//                     var content = $(this).find('.slide-content').clone();
//                     $(e).find('.current-slide').css('backgroundImage', 'none').html( content );
//                 }                       
//     			$(e).find('.next-slide').animate({'opacity': 0}, 1500);
</P><PRE>               if (goto == <I>) {</I></PRE><P>					$(e).find('.goto').removeAttr('href');
				} else {
					$(e).find('.goto').attr('href', goto);
				}
</P><P>			}
</P><P>			$(e).find('.thumbs .thumb img').on('click autoplay', function () { //reset timer
				clearInterval(start);
				start = setInterval(function(){autoPlay();}, o.pause);
			});
</P><P>			start = setTimeout(function(){
				autoPlay();
				start = setInterval(function(){autoPlay();}, o.pause);
				return start;
			}, 1000);
</P><P>			function autoPlay() {
				if (current == false)
					var tmp = 't0';
				else 
					var tmp = current;
				tmp = tmp.replace('t', <I>);</I>
				tmp = parseInt(tmp);
				if (tmp == nb_thumbs) {
					tmp = 0;
				}
				tmp++;
				$(e).find('.thumb#t'+tmp).trigger('autoplay');
			}
</P><P>		});
	};
</P><P>	
}) (jQuery)
</P></DIV></DIV></DIV></DIV></DIV></BODY></HTML>