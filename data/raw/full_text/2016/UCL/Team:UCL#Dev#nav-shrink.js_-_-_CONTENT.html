<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_UCL_Dev_nav-shrink_js skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:UCL/Dev/nav-shrink.js</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>var navShrinkParams = {};
var navShrinkHeader = $('header');
</P><P>// Two listeners, due to jQuery issues.
$(document).on('scroll', function() {
</P><PRE>   toggleNavShrink();
</PRE><P>});
$(window).scroll(function() {
</P><PRE>   toggleNavShrink();
</PRE><P>});
</P><P>$(window).load(function() {
</P><PRE>   navShrinkSetVars();
</PRE><P>});
</P><P>$(window).resize(function() {
</P><PRE>   navShrinkSetVars();
</PRE><P>});
</P><P>navShrinkHeader.mouseenter(function() {
</P><PRE>   headerUnShrink();
</PRE><P>});
</P><P>navShrinkHeader.click(function() {
</P><PRE>   headerUnShrink();
</PRE><P>});
</P><P>navShrinkHeader.mouseleave(function() {
</P><PRE>   if (!($('.cd-overlay').hasClass('is-visible'))) { // Nav menu not open
       headerShrink();
   }
</PRE><P>});
</P><P>$('.cd-overlay').click(function() {
</P><PRE>   if ($('.cd-overlay').hasClass('is-visible')) { // Nav menu open
       headerShrink();
   }
</PRE><P>});
</P><P>// Define variables.
(function() {
</P><PRE>   // Adaptation to varied logo sizes
</PRE><PRE>   var $logo_height_int = 45; // change this to actual logo height
   var $original_height_int = 23;
   var $addition_factor = ( $logo_height_int -  $original_height_int)/2;
   var $subtraction_factor = -1* $addition_factor/2;
</PRE><PRE>   navShrinkParams.header_height_S = 60 +  $addition_factor;
   navShrinkParams.header_height_L = 80 +  $addition_factor;
</PRE><P>})();
</P><P>// Helpers:
</P><P>function toggleNavShrink() {
</P><PRE>   if (!($('.cd-overlay').hasClass('is-visible'))) { // Only act if nav menu is not open.
       var header = $('header');
       if ($(document).scrollTop() &gt; navShrinkParams.currentHeaderHeight) {
           if (!header.hasClass('shrink')) header.addClass('shrink');
       } else {
           if (header.hasClass('shrink')) header.removeClass('shrink');
       }
   }
</PRE><P>}
</P><P>function navShrinkSetVars() {
</P><PRE>   // Case: big nav
   if ($(&quot;header&quot;).has(&quot;.cd-nav&quot;).length) {
       navShrinkParams.currentHeaderHeight = navShrinkParams.header_height_L;
   }
   // Case: small nav
   else {
       navShrinkParams.currentHeaderHeight = navShrinkParams.header_height_S;
   }
</PRE><P>}
</P><P>function headerShrink() {
</P><PRE>   var header =$('header');
   if (!header.hasClass('shrink') &amp;&amp; $(document).scrollTop() &gt; navShrinkParams.currentHeaderHeight) {
       header.addClass('shrink');
   }
</PRE><P>}
</P><P>function headerUnShrink() {
</P><PRE>   var header =$('header');
   if (header.hasClass('shrink')) {
       header.removeClass('shrink');
   }
</PRE><P>}
</P></DIV></DIV></DIV></DIV></DIV></BODY></HTML>