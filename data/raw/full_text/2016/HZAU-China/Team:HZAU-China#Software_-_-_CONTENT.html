<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_HZAU-China_Software skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:HZAU-China/Software</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><DIV class="menu_wrapper"><NAV><UL id="accordion" class="accordion"><LI><A href="https://2016.igem.org/Team:HZAU-China/Members">Members</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Attributions">Attributions</A></LI></UL><LI><A href="https://2016.igem.org/Team:HZAU-China/Collaborations">Collaborations</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/HP/Silver">Silver</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/HP/Gold">Gold</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Integrated_Practices">Integrated Practices</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Engagement">Engagement</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Basic_Part">Basic Parts</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Composite_Part">Composite Parts</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Safty">Safety</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Model">Model</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Software">Software</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Hardware">Hardware</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Measurement">Measurement</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Experiments-chassis_integration">Chassis</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Experiments-Light_control">Light control</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Experiments-Motility">Motility</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Experiments-Riboswitch">Riboswitch</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Interlab">Interlab</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Description">Description</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Design">Design</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Proof">Proof</A></LI><LI><A href="https://2016.igem.org/Team:HZAU-China/Demonstrate">Demonstrate</A></LI></NAV></DIV><TITLE>body</TITLE><DIV class="content_wrapper"><DIV class="content_part" id="masterdiv"><A href="#A1">Colony radius calculation</A><A href="#A2">Motility dynamic model</A><A href="#A3">Colony motion simulation</A><A href="#A4">Device demo</A><A href="#A5">The core BioPaFiAR</A></DIV><DIV class="main_part"><DIV class="article"><H2>Software</H2><DIV class=""><P>This year, we wrote a series of software for our project including colony radius calculation software, mathematical modelling software, device demo software and the core BioPaFiAR software (driver for the BioPaFiAR hardware device). Now we will introduce them one by one.</P><DIV><DIV class="calculate"><H4>1. Colony radius calculation software</H4><P>In this project, the specific pattern of bacteria is formed by controlling the motility of bacteria. So the first step of this project is validating the difference of motility. In experiment, the motility can be represented by the size of bacteria colony. So we write a sequential photography program, and it can be used to take a photo every 15 minutes combined with Raspberry Pi computer. After getting these pictures, we need to measure the diameter of colony. If measured manually, it will be a huge amount of workload. So we write a Python program to help us.</P><P>It is semi-automatic software and can be used in sequential photography. When this program is running, you can see the GUI like Figure 1A; the Python shell window is also useful for you to see the measure result (Figure 1B). You need two pictures as the input to this program. The first picture is the starting point in the picture sequences and the second picture is one you want to measure.</P><P>Warning: camera and the target object cannot be moved after shooting begins and the ambient light must be Invariant.</P><P style="text-align:center">Figure 1. Colony radius calculation software.</P><H5>Procedures:</H5><P>1. After running this program, click the min track bar and move the mouse. You can see that the following window will change. The white parts are colonies. Move the track bar until the colony you want to measure looks the best (clearest).</P><P>2. After the adjustment, click the left mouse button and move mouse to choose the colony you want. The selection box is a green box.</P><P>3. After choosing a colony, the area will be shown in the litter window. If there is no other colony in the window, you can press “Enter” to calculate the diameter of the colony. The result will be shown in the Python shell window. See Figure 1B.</P><P> 4. Press “Esc” to quit this program.</P><P> You can click <A href="https://static.igem.org/mediawiki/2016/5/52/T--HZAU-China--Colony_radius_calculating_soft.zip">here</A> to download this software.</P></DIV><DIV class="dynamic"><H4>2. Motility dynamic model software</H4><P>Based on the dynamic model, we package the modeling program into a software with a GUI. The program is coded using Python 2.7 and the GUI is created using traits/traitsUI. The image processing is performed using OpenCV-python interface and the result is displayed by Mayavi. Figure 2 shows the GUI of this software.</P><P style="text-align:center">Figure 2. Motility dynamic model software.</P><H5>Procedures:</H5><P>1. Run this software.</P><P>2. Click the yellow folder shape icon in the back of “Choose File” to select a target image.</P><P>3. Adjust the parameter values including k, r, ps and time.</P><P>4. Choose a display mode (2D or 3D).</P><P>5. Click “ok” button to solve PDE. The result will be shown in the bottom window.
If you are interested in this program, you can download it by clicking <A href="https://static.igem.org/mediawiki/2016/b/be/T--HZAU-China--Motility_dynamic_model.zip">here</A>.</P></DIV><DIV class="devce"><DIV class="motion"><H4>3. Colony motion simulation software</H4><P>We used cellular automaton model to simulate the bacteria colony pattern formation to guide experiment design in our project. The software for cellular automaton modelling was developed based on the platform of Matlab 2014a. The GUI of this software is shown in Figure 3 and its usage is as the following steps.</P><P style="text-align:center">Figure 3. The GUI for the colony motion simulation software.</P><P>The steps for using this software:</P><P>1. Open the program.</P><P>2. Click the &quot;load&quot; button in the interface and import your target image.</P><P>3. Select a point in the area of the target image as the initial location of the bacteria.</P><P>4. Click the &quot;run&quot; button to start the program.</P><P>5. Click the &quot;stop&quot; button to suspend the program and view the current running status.</P><P>6. You can also select another position to inoculate during running, so that the shape of the colony can grow into the target image faster.</P><P>7. Click the &quot;quit&quot; button to exit the program.</P></DIV><H4>4. Device demo software</H4><P>Putting the bacteria in our AR environment, a system is needed to ensure the light signals from a computer is accessible to our cells. So we have designed a device to guide the formation of bacteria colony pattern. You can see our hardware part for more details. For people to better understand our device, we build a device demo software. </P><P>This software was developed in Blender which is is a professional free and open-source 3D computer graphics software used for creating animated films, visual effects, art design, 3D printing models, interactive 3D applications and video games. The device demo software was output by a Blender add-on “Save As Game Engine Runtime” as an executable file. This software can only be run in the Microsoft Windows system. You can click <A href="https://static.igem.org/mediawiki/2016/a/ae/T--HZAU-China--hardware_source.zip">here</A> to download this software or click <A href="https://static.igem.org/mediawiki/2016/8/8c/T--HZAU-China--hardware_ninary.zip">here</A> to download the source files.</P><P style="text-align:center;">Movie 1. Hardware device demo.</P><P>If you want to use it, the operation steps are as follows:</P><P>Double-click “hardware.exe” to run this software. Press “A” to rotate the scene to the left and press “D” to rotate it to the right. Click mouse left button to open the door and click again to close it.  Roll up the mouse wheel to get closer to the scene or roll down to get away from the scene. Press “Esc” to quit the program.</P></DIV><DIV class="BioPaFiAR"><H4>5. The core BioPaFiAR software (Driver for the BioPaFiAR hardware device)</H4><P>In this project, light signals from the projector will be used to change the motion state of bacteria. And the light signals are generated by a computer which also collects the bacteria colony image by a camera. So, we need a program to coordinate the work between  projector and camera.
At first, the program can read the image from the camera. We use OpenCV-python to control camera and process the image. After reading image from the camera, we need to separate the colony from background. Because the huge amount of reflected light from the dish wall will interfere the separation process, we need to find a new way to do it.</P><P>Guiding bacteria to form a specific pattern needs to culture bacteria continually. Meanwhile, besides the colony area, the illumination condition of the rest area is invariable. So, we can get the image of colony area by subtracting the previous picture from the subsequent picture. Based on this idea, we save a picture into computer memory before the colony appears; when the colony appears, we can get a image from the camera; convert them to gray mode and separate them by proper threshold; subtract the former from the latter; then we can get the colony. Usually, we need to remove some noises induced by the camera during insufficient lighting.</P><P>After the above treatment, we can get a black and white image. We can use canny algorithm to detect edge and use dilation operator to expand edge. But how to combine with the target image? Bitwise &quot;and&quot; operation can be used in the dilated image and the target image. Then, we convert the 255 values (white part in the image) to green color and 0 values (black part in the image) to red color, and save it as an RGB image. The resultant image is displayed in the full screen mode, and the projector will copy and shed it onto the bacteria colony in he culture medium.</P><P style="text-align:center">Figure 4. Illustration for the working process of the BioPaFiAR software.</P></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></BODY></HTML>