<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_HUST-China_js_picbox_js skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:HUST-China/js/picbox.js</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>/*!
	Picbox v2.2
	(c) 2010 Ben Kay &lt;<A rel="nofollow" class="external free" href="http://bunnyfire.co.uk">http://bunnyfire.co.uk</A>&gt;</P><P>	Based on code from Slimbox v1.7 - The ultimate lightweight Lightbox clone
	(c) 2007-2009 Christophe Beyls &lt;<A rel="nofollow" class="external free" href="http://www.digitalia.be">http://www.digitalia.be</A>&gt;</P><P>	Uses jQuery-mousewheel Version: 3.0.2
	(c) 2009 Brandon Aaron &lt;<A rel="nofollow" class="external free" href="http://brandonaaron.net">http://brandonaaron.net</A>&gt;</P><P>	MIT-style license.
</P><UL><LI>/</LI></UL><P>(function(b){function ca(){var a={x:k.scrollLeft(),y:k.scrollTop()};r=k.width()/2;s=k.height()/2;if(N){r+=a.x;s+=a.y;b(l).css({left:a.x,top:a.y,width:k.width(),height:k.height()})}b(h).css({top:s,left:r,width:&quot;1px&quot;,height:&quot;1px&quot;})}function O(a){e.hideFlash&amp;&amp;b.each([&quot;object&quot;,&quot;embed&quot;],function(d,f){b(f).each(function(){if(a)this._picbox=this.style.visibility;this.style.visibility=a?&quot;hidden&quot;:this._picbox})});l.style.display=&quot;&quot;;var c=a?&quot;bind&quot;:&quot;unbind&quot;;b(document)[c](&quot;keydown&quot;,da);b(document)[c](&quot;mousewheel&quot;, ea);b(document)[c](&quot;mousemove&quot;,G);b(n)[c](&quot;mouseover&quot;,function(){P(1)});b(n)[c](&quot;mouseout&quot;,P)}function da(a){a=a.keyCode;return b.inArray(a,e.closeKeys)&gt;=0?Q():b.inArray(a,e.nextKeys)&gt;=0?R():b.inArray(a,e.previousKeys)&gt;=0?S():false}function G(){T([n,w,zoomBtn,x])}function T(a,c){clearTimeout(H);b(a).fadeIn();a=c?b.merge(a,c):a;H=setTimeout(function(){b(a).fadeOut()},e.controlsFadeDelay)}function P(a){a=1==a?&quot;unbind&quot;:&quot;bind&quot;;b(document)[a](&quot;mousemove&quot;,G);clearTimeout(H)}function S(){return I(y,true)} function R(){return I(z,true)}function I(a,c){if(a&gt;=0){o=a;D=i[a][0];y=(o||(e.loop?i.length:0))-1;z=(o+1)%i.length||(e.loop?0:-1);U();l.className=&quot;pbLoading&quot;;b(h).css(&quot;display&quot;,&quot;none&quot;);i[o][1]?b(J).html(i[o][1]).show():b(J).html(&quot;&quot;).hide();b(V).html((i.length&gt;1&amp;&amp;e.counterText||&quot;&quot;).replace(/{x}/,o+1).replace(/{y}/,i.length));if(y&gt;=0){W.src=i[y][0];b(w).removeClass(A)}if(z&gt;=0){X.src=i[z][0];b(x).removeClass(A)}j=new Image;j.onload=function(){fa(c)};j.src=D}return false}function fa(a){Y();var c=k.width()- e.margins,d=k.height()-e.margins,f=1;if(j.width&gt;c||j.height&gt;d){f=Math.min(c/j.width,d/j.height);b(zoomBtn).removeClass(A);K=false}else{b(zoomBtn).addClass(A);K=true}t=L=f;B(f,a);b(h).attr(&quot;src&quot;,D);b(h).css(&quot;display&quot;,&quot;&quot;);l.className=&quot;&quot;;T([n],[w,zoomBtn,x])}function B(a,c){var d=a/t;u=r-(r-u)*d;v=s-(s-v)*d;t=a;d=j.width*a;var f=j.height*a,g=u-d/2&gt;&gt;0,p=v-f/2&gt;&gt;0;c=c?0:e.resizeDuration;a=0==a?function(){b(h).hide()}:function(){};b(h).animate({width:d,height:f,top:p,left:g},{queue:false,duration:c,easing:e.resizeEasing, complete:a});return false}function Y(){u=r;v=s}function ea(a,c){b(zoomBtn).addClass(C);return B(t+c*t/10)}function Z(){if(t==L&amp;&amp;u==r&amp;&amp;v==s&amp;&amp;!K){b(zoomBtn).addClass(C);return B(1)}else{b(zoomBtn).removeClass(C);Y();return B(L)}}function U(){j.onload=function(){};j.src=W.src=X.src=D;b(h).stop();b([w,x]).addClass(A);b(zoomBtn).removeClass(C)}function Q(){if(o&gt;=0){U();o=y=z=-1;B(0);O();b(n).stop().hide();b(l).stop().fadeOut()}return false}function M(a){var c=[].slice.call(arguments,1),d=0;a=b.event.fix(a|| window.event);a.type=&quot;mousewheel&quot;;if(a.wheelDelta)d=a.wheelDelta/120;if(a.detail)d=-a.detail/3;c.unshift(a,d);return b.event.handle.apply(this,c)}var k=b(window),e,i,o=-1,D,y,z,ga=window.XMLHttpRequest==undefined&amp;&amp;ActiveXObject!=undefined,N,r,s,u,v,t,L,H,K,j={},W=new Image,X=new Image,l,$,h,w,x,n,J,V,C=&quot;pbzoomed&quot;,A=&quot;pbgreyed&quot;;b(document).ready(function(){b(document.body).append(b([l=b('&lt;div id=&quot;pbOverlay&quot; /&gt;').click(Q).append($=b('&lt;div id=&quot;pbCloseBtn&quot; /&gt;')[0])[0],h=b('&lt;img id=&quot;pbImage&quot; /&gt;').dblclick(Z)[0], n=b('&lt;div id=&quot;pbBottom&quot; /&gt;').append([J=b('&lt;div id=&quot;pbCaption&quot; /&gt;')[0],b('&lt;div id=&quot;pbNav&quot; /&gt;').append([w=b('&lt;a id=&quot;pbPrevBtn&quot; href=&quot;#&quot; /&gt;').click(S)[0],zoomBtn=b('&lt;a id=&quot;pbZoomBtn&quot; href=&quot;#&quot; /&gt;').click(Z)[0],x=b('&lt;a id=&quot;pbNextBtn&quot; href=&quot;#&quot; /&gt;').click(R)[0]])[0],V=b('&lt;div id=&quot;pbNumber&quot; /&gt;')[0]])[0]]).css(&quot;display&quot;,&quot;none&quot;));(N=ga||l.currentStyle&amp;&amp;l.currentStyle.position!=&quot;fixed&quot;)&amp;&amp;b([l,$,h,n]).css(&quot;position&quot;,&quot;absolute&quot;);b(h).tinyDrag(function(){var a=b(h),c=a.position();u=c.left-k.scrollLeft()+a.width()/ 2;v=c.top-k.scrollTop()+a.height()/2;b(zoomBtn).addClass(C)})});b.picbox=function(a,c,d){e=b.extend({loop:false,overlayOpacity:0.8,overlayFadeDuration:200,resizeDuration:300,resizeEasing:&quot;swing&quot;,controlsFadeDelay:3E3,counterText:false,hideFlash:true,closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],margins:0},d||{});if(typeof a==&quot;string&quot;){a=<A href="/wiki/index.php?title=A,c&amp;action=edit&amp;redlink=1" class="new" title="A,c (page does not exist)">a,c</A>;c=0}b(l).css(&quot;opacity&quot;,0).fadeTo(e.overlayFadeDuration,e.overlayOpacity);b(n).css(&quot;display&quot;,&quot;&quot;);G();ca();O(1);i=a;e.loop=e.loop&amp;&amp;i.length&gt;1;return I(c)}; b.fn.picbox=function(a,c,d){c=c||function(g){return[g.href,g.title]};d=d||function(){return true};var f=this;b(f).unbind(&quot;click&quot;).click(function(){var g=this,p=[];filteredLinks=b.grep(f,function(E){return d.call(g,E)});for(var m=0;m&lt;filteredLinks.length;m++)p[m]=c(filteredLinks[m]);return b.picbox(p,b.inArray(this,filteredLinks),a)});return f};b.fn.tinyDrag=function(a){return b.tinyDrag(this,a)};b.tinyDrag=function(a,c){function d(q){var aa=q.pageX;q=q.pageY;if(m)a.css({left:p.x+(aa-g.x),top:p.y+ (q-g.y)});else if(ba(aa-g.x)&gt;1||ba(q-g.y)&gt;1)m=true;return false}function f(){E.unbind(&quot;mousemove&quot;,d).unbind(&quot;mouseup&quot;);m&amp;&amp;c&amp;&amp;c()}var g,p,m,E=b(document),ba=Math.abs;a.mousedown(function(q){m=false;g={x:q.pageX,y:q.pageY};p={x:parseInt(a.css(&quot;left&quot;)),y:parseInt(a.css(&quot;top&quot;))};E.mousemove(d).mouseup(f);return false});return a};var F=[&quot;DOMMouseScroll&quot;,&quot;mousewheel&quot;];b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=F.length;a;)this.addEventListener(F[--a],M,false);else this.onmousewheel= M},teardown:function(){if(this.removeEventListener)for(var a=F.length;a;)this.removeEventListener(F[--a],M,false);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?this.bind(&quot;mousewheel&quot;,a):this.trigger(&quot;mousewheel&quot;)},unmousewheel:function(a){return this.unbind(&quot;mousewheel&quot;,a)}})})(jQuery);
</P><P>if (!/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)) {
	jQuery(function($) {
		$(&quot;a[rel^='lightbox']&quot;).picbox({/* Put custom options here */}, null, function(el) {
			return (this == el) || ((this.rel.length &gt; 8) &amp;&amp; (this.rel == el.rel));
		});
	});
}
</P></DIV></DIV></DIV></DIV></DIV></BODY></HTML>