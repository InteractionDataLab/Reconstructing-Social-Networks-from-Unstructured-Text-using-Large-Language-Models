<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_York_Software skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:York/Software</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><DIV class="cam-container"><DIV class="navbar navbar-inverse navbar-fixed-top navbar-pad"><DIV class="container"><DIV class="navbar-header"><A class="navbar-brand" href="//2017.igem.org/Team:York">YORK</A></DIV><DIV class="navbar-collapse collapse"><UL class="nav navbar-nav navbar-right"><LI><A href="//2017.igem.org/Team:York">HOME</A></LI><LI><A href="////2017.igem.org/Team:York/Description">PROJECT</A></LI><LI><A href="//2017.igem.org/Team:York/Description">DESCRIPTION</A></LI><LI><A href="//2017.igem.org/Team:York/Design">DESIGN</A></LI><LI><A href="//2017.igem.org/Team:York/Applied_Design">APPLIED DESIGN</A></LI><LI><A href="//2017.igem.org/Team:York/Results">RESULTS</A></LI><LI><A href="//2017.igem.org/Team:York/Background">BACKGROUND</A></LI><LI><A href="//2017.igem.org/Team:York/Downloads">DOWNLOADS</A></LI><LI><A href="//2017.igem.org/Team:York/Contribution">CONTRIBUTION</A></LI></UL></DIV><LI><A href="https://2017.igem.org/Team:York/Hardware">DIHM</A></LI><LI><A href="https://2017.igem.org/Team:York/Hardware">HARDWARE</A></LI><LI><A href="https://2017.igem.org/Team:York/Software">SOFTWARE</A></LI><LI><A href="https://2017.igem.org/Team:York/Measurement">MEASUREMENT</A></LI></DIV><LI><A href="https://2017.igem.org/Team:York/Human_Practices">COMMUNITY</A></LI><LI><A href="https://2017.igem.org/Team:York/Human_Practices">HUMAN PRACTICES</A></LI><LI><A href="https://2017.igem.org/Team:York/HP/Silver">HP SILVER</A></LI><LI><A href="https://2017.igem.org/Team:York/HP/Gold_Integrated">HP GOLD INTEGRATED</A></LI><LI><A href="https://2017.igem.org/Team:York/Collaborations">COLLABORATIONS</A></LI></DIV><LI><A href="https://2017.igem.org/Team:York/Achievements">OUR LAB</A></LI><LI><A href="https://2017.igem.org/Team:York/Notebook">NOTEBOOK</A></LI><LI><A href="https://2017.igem.org/Team:York/Experiments">PROTOCOLS</A></LI><LI><A href="https://2017.igem.org/Team:York/Safety">SAFETY</A></LI><LI><A href="https://2017.igem.org/Team:York/Demonstrate">DEMONSTRATE</A></LI><LI><A href="https://2017.igem.org/Team:York/Achievements">ACHIEVEMENTS</A></LI></DIV><LI><A href="https://2017.igem.org/Team:York/Team">ABOUT US</A></LI><LI><A href="https://2017.igem.org/Team:York/Team">MEET THE TEAM</A></LI><LI><A href="https://2017.igem.org/Team:York/Attributions">ATTRIBUTION</A></LI><LI><A href="https://2017.igem.org/Team:York/Sponsors">SPONSORS</A></LI></DIV></DIV></DIV></DIV></DIV><DIV><HEADER class="intro-header" style="background: url(//2017.igem.org/wiki/images/2/27/TeamYork-TemporaryBackground.png); background-size: 100% 100%; background-position:0px 20px;"><DIV class="container"><DIV class="intro-message text-center container" style="margin: 0px 0px;"><H1 style="-webkit-text-stroke: 2px black; color:#fff;">Software</H1><H1 style="-webkit-text-stroke: 2px black; color:#fff;">Creating and Analysing Holograms</H1></DIV></DIV></HEADER></DIV><DIV class="cam-container" style="background-color: #ddd; color: #000;"><SECTION style="padding-top: 10px; padding-bottom: 20px; margin-top: 0px;"><DIV class="container" style="background-color: rgb(250,250,250); color: #000000; border-style: solid; border-color: #000000; border-radius: 25px;"><DIV class="text-center"><H1>Digital Inline Holographic Microscopy</H1></DIV><DIV class="text-left" style="margin: 0px;"><P style="font-size: 18px;">We were allowed, by Dr. Laurence Wilson, of the Department of Physics at the University of York, to use his existing hologram construction software as the basis for our own. It can be found at York's <A style="color: #0000ff;" href="//sites.google.com/a/york.ac.uk/bis_lab/downloads">Biophysical Imaging and Spectroscopy Lab</A> website. Its functionality follows these steps:
        <OL><LI>Input foreground and background images.</LI><LI>Input details of microscopy setup.
            </LI><LI><EM>Bandpass filter: Yes/No, maximum pixels, minimum pixels.</EM></LI><LI>Number of steps to be in hologram.</LI><LI>Wavelength of light used.</LI><LI>Median refractive index of sample.</LI><LI>Pixels per micron (how many pixels a one micron object would cover in an image taken with this setup).</LI><LI>Step size (spatial interval between frames of the hologram).</LI><LI>Offset distance (option to shift the initial focus of the hologram).</LI><LI>Find data for POV-Ray: Yes/No.</LI><LI>Refocus foreground image through the number of steps, applying the bandpass filter if selected.</LI><LI>Stitch the steps into a hologram.</LI><LI>Calculate the gradient of each frame.</LI><LI>Stitch the gradient frames into a &quot;gradient hologram&quot;.</LI><LI>Output the hologram and gradient hologram as videos.</LI><LI>If selected, find co-ordinates of the most visible features in the hologram.</LI><LI>Output the co-ordinates in a format suitable for use in POV-Ray.</LI></OL></P><P style="font-size: 18px;">POV-Ray is free software that can be used to render visualisations of 3D space. This was not necessary for our purposes, so, in writing our own software, this option to find co-ordinates was omitted. We initially omitted the bandpass filter too, but later (after some feedback, see: <A style="color: #0000ff;" href="//2017.igem.org/Team:York/HP/Gold_Integrated">Integrated Human Practices</A>) wrote it in to improve the quality of the holograms we generated.</P><P style="font-size: 18px;">We also designed our software such that the individual frames of both the hologram and the gradient hologram can be exported as image files (PNG). This was useful for our analysis, as it meant that we could manually select focal frames more easily.</P><CENTER style="width: 98%;"><DIV class="row"><DIV class="col-md-6"><UL style="list-style: none;"><LI style="color: #000;"><STRONG>Figure 1:</STRONG> Hologram created using Dr. Wilson's software.</LI></UL></DIV><DIV class="col-md-6"><UL style="list-style: none;"><LI style="color: #000;"><STRONG>Figure 2:</STRONG> Hologram created using our software.</LI></UL></DIV></DIV></CENTER><P style="font-size: 18px;">The above videos show that the end result of our hologram software is the same as the end result of Dr. Wilson's. There is some lightening/darkening of frames, due to the differences between Python and LabVIEW in terms of data handling, though the organisms (a chain of <EM>Streptococcus aureus</EM> [1] in this case) are still refocused correctly. All of our software is available on the <A style="color: #0000ff;" href="//2017.igem.org/Downloads">Downloads</A> page.</P></DIV></DIV></SECTION></DIV><DIV class="cam-container" style="background-color: #ddd; color: #000;"><SECTION id="Blob-Detection" style="padding-top: 10px; padding-bottom: 20px; margin-top: 0px;"><DIV class="container" style="background-color: rgba(224,245,222,0.9); color: rgb(11,33,10); border-style: solid; border-color: rgb(11,33,10); border-radius: 25px;"><DIV class="text-center"><H1>Blob Detection</H1></DIV><DIV class="text-left" style="margin: 0px;"><P style="font-size: 18px;">In order to count the cells in a sample, we wrote a simple blob detection program. Its function is outlined in the below flowchart.</P><CENTER><DIV class="row"><DIV class="col-md-8"><UL style="list-style: none;"><LI><STRONG>Figure 3:</STRONG> The dotted line indicates that using the gradient image is optional.</LI></UL></DIV></DIV></CENTER><P style="font-size: 18px;">As can be seen on the <A style="color: #0000ff;" href="//2017.igem.org/Team:York/Results#Cell-Counts">Results</A> page, the blob detection software was very useful for calculating the number of cells in a given sample.</P></DIV></DIV></SECTION></DIV><DIV class="cam-container" style="background-color: #ddd; color: #000;"><SECTION style="padding-top: 10px; padding-bottom: 20px; margin-top: 0px;"><DIV class="container" style="background-color: rgba(223,230,239,0.9); color: #162844; border-style: solid; border-color: #162844; border-radius: 25px;"><DIV class="text-center"><H1>User Interface</H1></DIV><DIV class="text-left" style="margin: 0px;"><P style="font-size: 18px;">We designed a control application in order to send commands to the Raspberry Pi (to take pictures of our samples) and to process the images all in one place. Unfortunately, we have come to the end of the project and did not manage to work out all the bugs. Regardless, we have made all the related files and scripts available on the Downloads page. We invite anyone to try to improve them. The main problem we experienced was that the software would only run on the desktop PC on which it was developed. When we transferred it to a computer we could take into the lab, it would not function.</P><CENTER><DIV class="row"><DIV class="col-md-12"><UL style="list-style: none;"><LI><STRONG>Figure 4:</STRONG> The Microscope Control Application.</LI></UL></DIV></DIV></CENTER><P style="font-size: 18px;">Once we encountered the aforementioned problem, we did not finish editing the application, so, as it stands, we have provided all the right pieces... not <EM>necessarily</EM> in the right places. In lieu of a functioning control application, we instead used a combination of an image capturing program and an image averaging program. Both are outlined below.</P></DIV></DIV></SECTION></DIV><DIV class="cam-container" style="background-color: #ddd; color: #000;"><SECTION style="padding-top: 10px; padding-bottom: 20px; margin-top: 0px;"><DIV class="container" style="background-color: rgb(250,250,250); color: #000000; border-style: solid; border-color: #000000; border-radius: 25px;"><DIV class="text-center"><H1>Before the Hologram</H1></DIV><DIV class="text-left" style="margin: 0px;"><P style="font-size: 18px;">Our Control Application was a non-starter for accumulating data. Fortunately, it is possible to operate a Raspberry Pi with mouse, keyboard and monitor. We took advantage of this and used a kernel of code to take 50 images at a time. (It is somewhat self-explanatory that it is called &quot;Take 50 Images&quot; on the Downloads page.)</P><CENTER><DIV class="row"><DIV class="col-md-6"><UL style="list-style: none;"><LI><STRONG>Figure 5:</STRONG> Some of the pictures that were taken using the Raspberry Pi in one instance of the Take 50 Images code.</LI></UL></DIV><DIV class="col-md-6"><UL style="list-style: none;"><LI><STRONG>Figure 6:</STRONG> An example of a background picture for a hologram, created by averaging the pixel values of the images in figure 5.</LI></UL></DIV></DIV></CENTER><P style="font-size: 18px;">We also wrote another kernel, which we have called &quot;Create Background Image&quot; on the Downloads page. This takes a pixel by pixel average of a number of images. We used it to create the background images to use when making our holograms. Its effect is shown in figure 6, which is an average of 50 images, some of which are shown in figure 5. The black outline in figure 5 shows where the edge of each image is. The averaged image has no diffraction patterns on it, which means, if it is removed from the foreground image, only the diffraction patterns remain. This allows the holography code to work.</P></DIV></DIV></SECTION></DIV><DIV class="cam-container" style="background-color: #ddd; color: #000;"><SECTION style="padding-top: 10px; padding-bottom: 20px; margin-top: 0px;"><DIV class="container" style="background-color: rgba(223,230,239,0.9); color: #162844; border-style: solid; border-color: #162844; border-radius: 25px;"><DIV class="text-center"><H1>References</H1></DIV><DIV class="text-left" style="margin: 0px;"><UL style="list-style: none; font-size: 18px;"><LI>[1]: L. Wilson, Biophysical Imaging and Spectrometry, as available on 31st October 2017 at <A style="color: #0000ff;" href="//sites.google.com/a/york.ac.uk/bis_lab/downloads">sites.google.com/a/york.ac.uk/bis_lab/downloads</A></LI></UL></DIV></DIV></SECTION></DIV><SECTION id="#footer-sec"><FOOTER><DIV class="cam-container" style="background-color: #000; padding-top: 5px; margin: 0px 0px -10px 0px;"><DIV class="container"><DIV class="footer row text-center"><DIV class="col-md-4"><UL><LI><A href="#">ABOUT US</A></LI><SPAN class="text-muted"><LI>We are an overgraduate team representing the University of York.</LI><LI>Our Quicker Way to Analyse Co-Cultures (<A href="#" style="color:#999;">QWACC</A>) is our entry into the Hardware track for iGEM 2017.</LI></SPAN></UL></DIV><DIV class="col-md-4"><UL><LI><A href="#">LOCATION</A></LI><SPAN class="text-muted"><LI>Department of Biology</LI><LI><A href="//www.york.ac.uk" style="color:#999;">University of York</A></LI><LI>Heslington</LI><LI>North Yorkshire</LI><LI>YO10 5DD</LI></SPAN></UL></DIV><DIV class="col-md-4"><UL><LI><A href="#">CONTACT US</A></LI><SPAN class="text-muted"><LI>Email: <A href="mailto:igemyork@gmail.com" style="color:#999;">igemyork@gmail.com</A></LI><LI>You can also reach us through our social media via the links below.</LI></SPAN></UL></DIV></DIV></DIV></DIV></FOOTER></SECTION></BODY></HTML>