<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Edinburgh_OG_JS_slider skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Edinburgh OG/JS:slider</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>jQuery(document).ready(function($) {
</P><PRE> //set animation timing
 var animationDelay = 2500,
   //loading bar effect
   barAnimationDelay = 3800,
   barWaiting = barAnimationDelay - 3000, //3000 is the duration of the transition on the loading bar - set in the scss/css file
   //letters effect
   lettersDelay = 50,
   //type effect
   typeLettersDelay = 150,
   selectionDuration = 500,
   typeAnimationDelay = selectionDuration + 800,
   //clip effect 
   revealDuration = 600,
   revealAnimationDelay = 1500;
</PRE><PRE> initHeadline();
</PRE><PRE> function initHeadline() {
   //insert <I> element for each letter of a changing word
   singleLetters($('.cd-headline.letters').find('b'));
   //initialise headline animation
   animateHeadline($('.cd-headline'));
 }
</I></PRE><PRE> function singleLetters($words) {
   $words.each(function() {
     var word = $(this),
       letters = word.text().split(<I>),</I>
       selected = word.hasClass('is-visible');
     for (i in letters) {
       if (word.parents('.rotate-2').length &gt; 0) letters[i] = '<EM>' + letters[i] + '</EM>';
       letters[i] = (selected) ? '&lt;i class=&quot;in&quot;&gt;' + letters[i] + '' : '<I>' + letters[i] + '</I>';
     }
     var newLetters = letters.join(<I>);</I>
     word.html(newLetters).css('opacity', 1);
   });
 }
</PRE><PRE> function animateHeadline($headlines) {
   var duration = animationDelay;
   $headlines.each(function() {
     var headline = $(this);
</PRE><PRE>     if (headline.hasClass('loading-bar')) {
       duration = barAnimationDelay;
       setTimeout(function() {
         headline.find('.cd-words-wrapper').addClass('is-loading')
       }, barWaiting);
     } else if (headline.hasClass('clip')) {
       var spanWrapper = headline.find('.cd-words-wrapper'),
         newWidth = spanWrapper.width() + 10
       spanWrapper.css('width', newWidth);
     } else if (!headline.hasClass('type')) {
       //assign to .cd-words-wrapper the width of its longest word
       var words = headline.find('.cd-words-wrapper b'),
         width = 0;
       words.each(function() {
         var wordWidth = $(this).width();
         if (wordWidth &gt; width) width = wordWidth;
       });
       headline.find('.cd-words-wrapper').css('width', width);
     };
</PRE><PRE>     //trigger animation
     setTimeout(function() {
       hideWord(headline.find('.is-visible').eq(0))
     }, duration);
   });
 }
</PRE><PRE> function hideWord($word) {
   var nextWord = takeNext($word);
</PRE><PRE>   if ($word.parents('.cd-headline').hasClass('type')) {
     var parentSpan = $word.parent('.cd-words-wrapper');
     parentSpan.addClass('selected').removeClass('waiting');
     setTimeout(function() {
       parentSpan.removeClass('selected');
       $word.removeClass('is-visible').addClass('is-hidden').children('i').removeClass('in').addClass('out');
     }, selectionDuration);
     setTimeout(function() {
       showWord(nextWord, typeLettersDelay)
     }, typeAnimationDelay);
</PRE><PRE>   } else if ($word.parents('.cd-headline').hasClass('letters')) {
     var bool = ($word.children('i').length &gt;= nextWord.children('i').length) ? true : false;
     hideLetter($word.find('i').eq(0), $word, bool, lettersDelay);
     showLetter(nextWord.find('i').eq(0), nextWord, bool, lettersDelay);
</PRE><PRE>   } else if ($word.parents('.cd-headline').hasClass('clip')) {
     $word.parents('.cd-words-wrapper').animate({
       width: '2px'
     }, revealDuration, function() {
       switchWord($word, nextWord);
       showWord(nextWord);
     });
</PRE><PRE>   } else if ($word.parents('.cd-headline').hasClass('loading-bar')) {
     $word.parents('.cd-words-wrapper').removeClass('is-loading');
     switchWord($word, nextWord);
     setTimeout(function() {
       hideWord(nextWord)
     }, barAnimationDelay);
     setTimeout(function() {
       $word.parents('.cd-words-wrapper').addClass('is-loading')
     }, barWaiting);
</PRE><PRE>   } else {
     switchWord($word, nextWord);
     setTimeout(function() {
       hideWord(nextWord)
     }, animationDelay);
   }
 }
</PRE><PRE> function showWord($word, $duration) {
   if ($word.parents('.cd-headline').hasClass('type')) {
     showLetter($word.find('i').eq(0), $word, false, $duration);
     $word.addClass('is-visible').removeClass('is-hidden');
</PRE><PRE>   } else if ($word.parents('.cd-headline').hasClass('clip')) {
     $word.parents('.cd-words-wrapper').animate({
       'width': $word.width() + 10
     }, revealDuration, function() {
       setTimeout(function() {
         hideWord($word)
       }, revealAnimationDelay);
     });
   }
 }
</PRE><PRE> function hideLetter($letter, $word, $bool, $duration) {
   $letter.removeClass('in').addClass('out');
</PRE><PRE>   if (!$letter.is(':last-child')) {
     setTimeout(function() {
       hideLetter($letter.next(), $word, $bool, $duration);
     }, $duration);
   } else if ($bool) {
     setTimeout(function() {
       hideWord(takeNext($word))
     }, animationDelay);
   }
</PRE><PRE>   if ($letter.is(':last-child') &amp;&amp; $('html').hasClass('no-csstransitions')) {
     var nextWord = takeNext($word);
     switchWord($word, nextWord);
   }
 }
</PRE><PRE> function showLetter($letter, $word, $bool, $duration) {
   $letter.addClass('in').removeClass('out');
</PRE><PRE>   if (!$letter.is(':last-child')) {
     setTimeout(function() {
       showLetter($letter.next(), $word, $bool, $duration);
     }, $duration);
   } else {
     if ($word.parents('.cd-headline').hasClass('type')) {
       setTimeout(function() {
         $word.parents('.cd-words-wrapper').addClass('waiting');
       }, 200);
     }
     if (!$bool) {
       setTimeout(function() {
         hideWord($word)
       }, animationDelay)
     }
   }
 }
</PRE><PRE> function takeNext($word) {
   return (!$word.is(':last-child')) ? $word.next() : $word.parent().children().eq(0);
 }
</PRE><PRE> function takePrev($word) {
   return (!$word.is(':first-child')) ? $word.prev() : $word.parent().children().last();
 }
</PRE><PRE> function switchWord($oldWord, $newWord) {
   $oldWord.removeClass('is-visible').addClass('is-hidden');
   $newWord.removeClass('is-hidden').addClass('is-visible');
 }
</PRE><P>});
</P></DIV></DIV></DIV></DIV></DIV></BODY></HTML>