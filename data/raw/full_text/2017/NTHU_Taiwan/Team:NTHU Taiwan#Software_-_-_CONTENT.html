<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_NTHU_Taiwan_Software skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:NTHU Taiwan/Software</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><DIV class="igem_2017_menu_wrapper"><DIV class="menu_button" id="display_menu_control">
		MENU  
	</DIV><DIV id="menu_content"><A href="https://2017.igem.org/Team:NTHU_Taiwan"><DIV class="menu_button menu_right_margin">
				HOME
			</DIV></A><DIV class="submenu_wrapper"><BUTTON class="menu_button">TEAM</BUTTON><DIV class="submenu_button"><A href="https://2017.igem.org/Team:NTHU_Taiwan/Team"><DIV id="Team_page">
						Team 
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Attributions"><DIV id="Attributions_page">
						Attributions
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Collaborations"><DIV id="Collaborations_page">
						Collaborations
					</DIV></A></DIV></DIV><DIV class="submenu_wrapper"><BUTTON class="menu_button">PROJECT</BUTTON><DIV class="submenu_button"><A href="https://2017.igem.org/Team:NTHU_Taiwan/Description"><DIV id="Description_page">
						Description 
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Design"><DIV id="Design_page">
						Design
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Contribution"><DIV id="Contribution_page">
						Contribution
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Model"><DIV id="Model_page">
						Model
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Results"><DIV id="Results_page">
						Results
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Demonstrate"><DIV id="Demonstrate_page">
						Demonstrate
					</DIV></A></DIV></DIV><DIV class="submenu_wrapper"><BUTTON class="menu_button">WET LAB</BUTTON><DIV class="submenu_button"><A href="https://2017.igem.org/Team:NTHU_Taiwan/Experiments"><DIV id="Experiments_page">
						Experiments
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Protocol"><DIV id="Protocol_page">
						Protocol
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Notebook"><DIV id="Notebook_page">
						Notebook
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/InterLab"><DIV id="InterLab_page">
						InterLab
					</DIV></A></DIV></DIV><DIV class="submenu_wrapper"><BUTTON class="menu_button">PARTS</BUTTON><DIV class="submenu_button"><A href="https://2017.igem.org/Team:NTHU_Taiwan/Basic_Part"><DIV id="Basic_Part_page">
						Basic Parts
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Composite_Part"><DIV id="Composite_Part_page">
						Composite Parts
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Part_Collection"><DIV id="Part_Collection_page">
						Part Collection
					</DIV></A></DIV></DIV><A href="https://2017.igem.org/Team:NTHU_Taiwan/Safety"><DIV class="menu_button">
				SAFETY
			</DIV></A><DIV class="submenu_wrapper"><BUTTON class="menu_button">HUMAN PRACTICES</BUTTON><DIV class="submenu_button"><A href="https://2017.igem.org/Team:NTHU_Taiwan/HP/Silver"><DIV id="Silver_page">
						Silver HP
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/HP/Gold_Integrated"><DIV id="Gold_Integrated_page">
						Integrated and Gold
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Engagement"><DIV id="Engagement_page">
						Public Engagement 
					</DIV></A></DIV></DIV><DIV class="submenu_wrapper"><BUTTON class="menu_button">AWARDS</BUTTON><DIV class="submenu_button"><A href="https://2017.igem.org/Team:NTHU_Taiwan/Applied_Design"><DIV id="Applied_Design_page">
						Applied Design
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/HP/Gold_Integrated"><DIV id="Entrepreneurship_page">
						Integrated Human Practices
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Hardware"><DIV id="Hardware_page">
						Hardware
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Model"><DIV id="Model_page">
						Model
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Software"><DIV id="Software_page">
						Software
					</DIV></A><A href="https://2017.igem.org/Team:NTHU_Taiwan/Criteria"><DIV id="Criteria_page">
						Criteria
					</DIV></A></DIV></DIV><A href="https://igem.org/2017_Judging_Form?team=NTHU_Taiwan"><DIV class="menu_button">
				JUDGING FORM
			</DIV></A></DIV></DIV><DIV class="igem_2017_content_wrapper"><DIV style="text-align: center"><H1 style="color:#DF6A6A">Software
		
		</H1></DIV><DIV class="content"><CENTER><H1 style="color: #6c5070">Software Design: IoT System and App</H1></CENTER><P>
	With the implementation of our device, we now can provide farmers a water protection system. Furthermore, we have developed an app and IoT system. The app will allow the user to know the condition of the farmland water, and the IoT system is set to save all the data and collaborate with other nearby protection systems to build up a “safe web.” When our devices are widely spread around a region, we would not only be able to help the farmers keep their farmland’ water source safe, but even identify when and where the pollution came from.</P><H2>
	The IoT System
	</H2><H2>
	Why IoT?
	</H2><P>
	In order to fulfill the purpose of data monitoring in periodically, we have to implement IoT system to our device. The implementation can be simply classified in the following steps:
	</P><P>
	1. Sensors (temperature, PH detector) collect data to our controller.
	</P><P>
	2. Controller upload data to cloud through wifi.
	</P><H2>
	What have been used?
	</H2><H2>
	Cloud Platform : MediaTek Cloud Sandbox
	</H2><P>
	We created an account on MediaTek Cloud Sandbox, therefore, our data will be going there.
	</P><P>
	After establishing an MCS account, we start to create our virtual device and data channel. When data channel is being created, they will have their own Device ID and Device Key. So, when writing our Arduino code and assign them with specific Device ID and Device Key, our data will be able to send to that data channel.
	</P><H2>
	Controller and Sensors
	</H2><P>
	The controller is the heart of our device, where it is responsible for receiving, processing, uploading data to the cloud, and also control our motor. 
	</P><P>
	The reason why we choose MediaTek LinkIt™ ONE as our controller mainly because it has its own cloud platform MediaTek Cloud Sandbox, which enable us to implement IoT system to our device much easier. As for the sensors, right now we have used a thermometer and pH meter. Fluorescence detector will be added to the system once biochip has been successfully manufactured.
	</P><H2>
	How we do this?
	</H2><H2>
	Step 1:  Sensors collect data to our controller
	</H2><P>
	This part is relatively simple, based on the sensors we use, we search for the corresponding code on the Internet, and copy them into our Arduino code (Figure 1). Once we have the code and correct PIN connected to our sensors, then we are good to go.
	</P><P><CENTER><FONT size="2">
	Figure 1
	</FONT></CENTER></P><H2>
	Step 2: Controller upload data to cloud through wifi
	</H2><P>
	Remember the Device ID and Device Key that we mentioned before? In this part, we are going to use it. The function of them works like the address, when we assign specific Device ID and Device Key inside our code (Figure 2), our data can be correctly sent to the corresponding data channel.
	</P><P><CENTER><FONT size="2">
	Figure 2
	</FONT></CENTER></P><VIDEO style="display:block; margin: 0 auto;" width="90%" controls=""><P><CENTER><FONT size="2">
	IoT Demo Video
	</FONT></CENTER></P><H2>
	The App Design
	</H2><H2>
	Why we built this APP?
	</H2><P>
	The purpose of building this APP is that we hope to monitor values from our detection point in periodically.Furthermore, if we have multiple detection points in the future, we can label all data with different colors of markers according to their concentrations, and show them on the google map. Therefore, we can get regional concentrations at once, which enable us to identify sources of pollution with ease.
	</P><H2>
	How do we build our APP?
	</H2><P>
	The software we use is Android Studio. And we manage to represent our detection data in the following ways: 
	</P><P>
	Tab1: Periodically detection value from a single detection point.
	</P><P>
	Tab2: Historical monitoring data from a single detection point.
	</P><P>
	Tab3: The distribution of all detection points and their visualized EDC concentrations.
	</P><P>
	Since our detection system has implemented Internet of Things (IoT), therefore, all data being detected will be stored to our cloud in JSON format (For details, please refer to DEVICE / Software – IoT page). So if we want to retrieve those data from our cloud, what we have to do can be simplified as followings: 
	</P><P>1. Get JSON file from server.
	</P><P>
	2. Parse JSON to retrieve specific data.
	</P><P>
	3. Display.
	</P><P>
	Now we will go through those steps one by one : 
	</P><P>
	1. Get JSON file from server
	</P><P>
	Data is uploaded to our cloud were stored in JSON format (Figure 1), and data being uploaded by different sensors have their own unique URL. So, in our code, by searching the specific URL (Figure 2), we can get the information we need.
	</P><P>
	(Notice: Since our EDC sensor has not been made yet, so here we use the value detected by ultrasound for replacement. However, our detector’s mechanical design proposal and the software parts are ready.)
	</P><P><CENTER><FONT size="2">
	Figure 1
	</FONT></CENTER></P><P><CENTER><FONT size="2">
	Figure 2
	</FONT></CENTER></P><P>
	2. Parse JSON to retrieve specific data
	</P><P>
	The JSON file we get from the server contains lots of information, such as API Version、Message、Device ID、Recorded time and Value, etc, therefore, in order to get a specific data in JSON file, we have to use a technique called parsing, to parse JSON Objects and JSON Arrays.(Figure 3)
	</P><P>
	(Notice: Since our EDC sensor has not been made yet, so here we use the value detected by ultrasound for replacement. However, our detector’s mechanical design proposal and the software parts are ready.)
	</P><P><CENTER><FONT size="2">
	Figure 3
	</FONT></CENTER></P><P>
	3. Display
	</P><P>
	And finally, here is how we represent our data.
	</P><P>
	For Tab1 (Periodically detection value from a single detection point), we simply layout some TextView boxes, and let the text be changed to the value we got from JSON file. 
	</P><P>
	For Tab2 (Historical monitoring data from a single detection point), we use GRAPH VIEW (http://www.android-graphview.org/showcase/ ) to display two of our data, which are temperature and concentration of EDC, with y-axis their values and x-axis the recorded time.
	</P><P>
	(Notice: Since our EDC sensor has not been made yet, so here we use the value detected by ultrasound for replacement. However, our detector’s mechanical design proposal and the software parts are ready.)
	</P><P>
	As for Tab3 (The distribution of all detection points and their visualized EDC concentrations), in order to use google map in our application, we need to register to Google Developer Console for permission.
	</P><VIDEO style="display:block; margin: 0 auto;" width="90%" controls=""><P><CENTER><FONT size="2">
	App Demo Video
	</FONT></CENTER></P></VIDEO></VIDEO></DIV></DIV></DIV></DIV></DIV></DIV></DIV></BODY></HTML>