<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_NJU-China_Javascript_jquery-jumpto skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:NJU-China/Javascript:jquery-jumpto</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>/* ===========================================================
</P><PRE>* jquery-jumpto.js v1
* ===========================================================
* Copyright 2013 Pete Rojwongsuriya.
* <A rel="nofollow" class="external free" href="http://www.thepetedesign.com">http://www.thepetedesign.com</A>
*
* Create a smooth jump to sub navigational sidebar
* with one js call
*
* <A rel="nofollow" class="external free" href="https://github.com/peachananr/jumpto">https://github.com/peachananr/jumpto</A>
*
* ========================================================== */
</PRE><P>!function($){
</P><PRE> var defaults = {
   firstLevel: &quot;&gt; h2&quot;,
   secondLevel: false,
   innerWrapper: &quot;.jumpto-block&quot;,
   offset: 400,
   animate: 1000,
   navContainer: false,
   anchorTopPadding: 20,
   showTitle: &quot;Jump To&quot;,
   closeButton: true
</PRE><P>	};
</P><P>	function isScrolledIntoView(elem)
</P><PRE> {
     var docViewTop = $(window).scrollTop();
     var docViewBottom = docViewTop + ($(window).height() /4);
     
     var elemTop = $(elem).offset().top;
     var elemBottom = elemTop + $(elem).height();
</PRE><PRE>     return ((elemBottom &lt;= docViewBottom) &amp;&amp; (elemTop &gt;= docViewTop));
 }
</PRE><PRE> $.fn.jumpto = function(options){
   var settings = $.extend({}, defaults, options),
       el = $(this),
       html = &quot;&quot;,
       block = $(settings.innerWrapper),
       selectors = &quot;&quot;,
       title = &quot;&quot;,
       close =&quot;&quot;;
       
   el.addClass(&quot;jumpto-cotainer&quot;);
   
   redrawMenu = function(){
     $(selectors.slice(0,-2)).each(function( index ) {
       if (isScrolledIntoView($(this))) {
         $(&quot;.jumpto-subnav a&quot;).removeClass(&quot;active&quot;).parent().find(&quot; a[href='#&quot;+$(this).attr(&quot;id&quot;)+&quot;']&quot;).addClass(&quot;active&quot;)
         
         if($(&quot;a[href='#&quot;+$(this).attr(&quot;id&quot;)+&quot;']&quot;).parent().parent().hasClass(&quot;jumpto-second&quot;)) {
           $(&quot;a[href='#&quot;+$(this).attr(&quot;id&quot;)+&quot;']&quot;).closest(&quot;.jumpto-second&quot;).show()
         }
         if($(&quot;a[href='#&quot;+$(this).attr(&quot;id&quot;)+&quot;']&quot;).parent().parent().hasClass(&quot;jumpto-first&quot;)) {
           $(&quot;a[href='#&quot;+$(this).attr(&quot;id&quot;)+&quot;']&quot;).closest(&quot;.jumpto-first&quot;).find(&quot;.jumpto-second&quot;).hide()
         }
         if($(&quot;a[href='#&quot;+$(this).attr(&quot;id&quot;)+&quot;']&quot;).parent().find(&quot;.jumpto-second&quot;)) {
           $(&quot;a[href='#&quot;+$(this).attr(&quot;id&quot;)+&quot;']&quot;).parent().find(&quot;.jumpto-second&quot;).show()
         }
       }
     });
     if($(document).scrollTop() &gt; settings.offset) {
       $(&quot;.jumpto-subnav&quot;).removeClass(&quot;bottom&quot;).addClass(&quot;fixed&quot;);
     } else {
       $(&quot;.jumpto-subnav&quot;).removeClass(&quot;bottom fixed&quot;);
     }
     if($(document).scrollTop() &gt; el.outerHeight(true)) {
       $(&quot;.jumpto-subnav&quot;).addClass(&quot;bottom fixed&quot;);
     }
   }
   
   block.find(settings.firstLevel).each(function( index ) {
     var b = $(this),
         i = index,
         inner_html = &quot;&quot;;
     if ( b.parent().find(settings.secondLevel).length &gt; 0) {
</PRE>
        inner_html += &quot;<UL class="jumpto-second">&quot;
        b.parent().find(settings.secondLevel).each(function( index ) {
          var id = &quot;jumpto_&quot; + i + &quot;_&quot; + index;
          $(this).attr(&quot;id&quot;, id);
          link_to = &quot;&lt;a href='#&quot; + id + &quot;'&gt;&quot; + $(this).text() + &quot;&lt;/a&gt;&quot;
          inner_html += &quot;<LI>&quot; + link_to + &quot;</LI>&quot;
<PRE>         selectors += &quot;#&quot;+id + &quot;, &quot;;
       });
</PRE>
        inner_html += &quot;</UL>&quot;
<PRE>       var id = &quot;jumpto_&quot; + i;
       b.attr(&quot;id&quot;, id);
       link_to = &quot;&lt;a href='#&quot; + id + &quot;'&gt;&quot; + b.text() + &quot;&lt;/a&gt;&quot;
       selectors += &quot;#&quot;+id + &quot;, &quot;;
</PRE>
        html += &quot;<LI>&quot; + link_to + inner_html + &quot;</LI>&quot;
<PRE>     } else {
       var id = &quot;jumpto_&quot; + i;
       link_to = &quot;&lt;a href='#&quot; + id + &quot;'&gt;&quot; + b.text() + &quot;&lt;/a&gt;&quot;
       b.attr(&quot;id&quot;, id);
       selectors += &quot;#&quot;+id + &quot;, &quot;;
</PRE>
        html += &quot;<LI>&quot; + link_to + &quot;</LI>&quot;
<PRE>     }
   });
   if (settings.showTitle != false) {
</PRE>
      var title = &quot;<DIV class="jumpto-title">&quot;+settings.showTitle+&quot;</DIV>&quot;
<PRE>   }
   
   if (settings.closeButton != false) {
</PRE>
      var close = &quot;<DIV class="jumpto-close">&lt;a href='#' id='jumpto-close'&gt;Close&lt;/a&gt;</DIV>&quot;
<PRE>   }
   if(settings.navContainer == false) {
</PRE>
      $(this).append(&quot;&lt;nav class='jumpto-subnav'&gt;&quot;+ title +&quot;<UL class="jumpto-first">&quot; + html + &quot;</UL>&quot;+ close +&quot;&lt;/nav&gt;&quot;)
<PRE>   }else{
</PRE>    $(settings.navContainer).addClass(&quot;jumpto-subnav&quot;).html(title +&quot;<UL class="jumpto-first">&quot; + html + &quot;</UL>&quot;+ close)
<PRE>   }
   
   
   $('.jumpto-subnav a[href*=#]:not([href=#])').click(function() {
     if (location.pathname.replace(/^\//,<I>) == this.pathname.replace(/^\//,</I>) 
         || location.hostname == this.hostname) {
   
       var target = $(this.hash);
       target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
       if (target.length) {
         $('html,body').animate({
           scrollTop: target.offset().top - settings.anchorTopPadding
         }, settings.animate, 'swing');
         return false;
       }
     }
   });
   
   $(window).scroll(function() {
     redrawMenu()
   });
   
   $(&quot;.jumpto-subnav #jumpto-close&quot;).click(function() {
     var btn = $(this)
     btn.parent().parent().find(&quot;&gt; .jumpto-first&quot;).slideToggle( &quot;slow&quot;, function() {
         if ($(this).is(&quot;:visible&quot;)) {
           btn.html(&quot;Close&quot;);
         } else {
           btn.html(&quot;Open&quot;);
         }
       });
       return false;
   });
   
   setInterval(function() {
     var track = [];
     $(selectors.slice(0,-2)).each(function( index ) {
       track.push(isScrolledIntoView($(this)))
     });
     if($.inArray(true, track) == -1) {
       $(&quot;.jumpto-subnav a&quot;).removeClass(&quot;active&quot;)
       $(&quot;.jumpto-subnav .jumpto-second&quot;).hide()
     }
   }, 500);
 }
</PRE><P>}(window.jQuery);
</P></DIV></DIV></DIV></DIV></DIV></BODY></HTML>