<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Valencia_UPV_Hardware skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Valencia UPV/Hardware</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><DIV id="header" class="navbar-toggleable-md sticky clearfix"><HEADER id="topNav"><DIV class="container"><DIV class="navbar-collapse collapse float-right nav-main-collapse submenu-color"><NAV class="nav-main"><UL id="topMain" class="nav nav-pills nav-main nav-hover-animate nav-animate-fadeIn"><LI class="dropdown"><A class="dropdown-toggle" href="#">
                           TEAM
                           </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Team">
                                 Team
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Attributions">
                                 Attributions
                                 </A></LI></UL><LI class="dropdown"><A class="dropdown-toggle" href="#">
                           PROJECT
                           </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Description">
                                 Description
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Results">
                                 Results
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Applied_Design">
                                 Applied Design
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Collaborations">
                                 Collaborations
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Achievement">
                                 Achievements
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Safety">
                                 Safety
                                 </A></LI><LI class="dropdown"><A class="dropdown-toggle" href="#">
                           WET LAB
                           </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Design">
                                 Biological Design
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Experiments">
                                 Experiments
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Protocols">
                                 Protocols
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Notebook">
                                 Notebook
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Contribution">
                                 Contribution
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Plant">
                                 PlantSynBio
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Parts">
                                 Parts
                                 </A></LI><LI class="dropdown"><A class="dropdown-toggle" href="#">
                           DRY LAB
                           </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Model">
                                 Modeling
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Software">
                                 Software
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/Hardware">
                                 Hardware
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/GraphicDesign">
                                 Graphic Design
                                 </A></LI><LI class="dropdown"><A class="dropdown-toggle" href="#">
                           HUMAN PRACTICES
                           </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/HP/Silver">
                                 Outreach
                                 </A></LI><LI><A href="https://2017.igem.org/Team:Valencia_UPV/HP/Gold_Integrated">               Integrated and gold
                                 </A></LI></NAV></DIV></DIV></HEADER></DIV><SECTION class="section-xs" style="border-bottom: none;"><DIV class="container"><DIV class="text-center"><P class="font-lato fw-300 lead mt-0" style="padding-top: 20px !important;margin-bottom: 20px !important;text-align: left !important;">Home • Dry Lab •</P><DIV class="col-md-12"><H3 class="jopetitles">HARDWARE</H3><DIV><BUTTON type="button" class="btn btn-primary" style="margin: 5px 5px 25px 5px !important; background-color: rgba(0,0,0,0.3) !important; border: none !important;"><A href="https://static.igem.org/mediawiki/2017/f/fc/Hardware_wiki_final_jopegar.pdf" class="btn-dwnl" target="_blank"><SPAN style="margin-right: 2px;">PDF</SPAN></A></BUTTON></DIV></DIV></DIV></DIV></SECTION><SECTION class="section-xs"><DIV class="container"><DIV class="row"><DIV class="col-md-3"><DIV id="index" class="side-nav"><DIV class="side-nav-head"><H4 style="color: #005368; padding-left: 20px !important;">INDEX</H4></DIV><UL class="list-group list-unstyled"><LI class="list-group-item"><A href="#section1">Introduction</A></LI><LI class="list-group-item"><A href="#section2">Production Plant</A></LI><LI class="list-group-item"><A href="#section3">Design Considerations</A></LI><LI class="list-group-item"><A class="dropdown-toggle" href="#section4">Chatterbox</A></LI><LI><A href="#section5">Structure</A></LI><LI><A href="#section8">Main Control Board</A></LI><LI><A href="#section9">Software</A></LI><LI><A href="#section10">Climatic Control</A></LI><LI><A href="#section15">Plant-Human Communication Interface</A></LI></UL><LI class="list-group-item"><A href="#section100">Future Lines</A></LI><LI class="list-group-item"><A href="#section101">Bibliography</A></LI></DIV></DIV><DIV class="col-md-9"><DIV id="section1" class="container"><DIV class="heading-color"><H2><SPAN>INTRODUCTION</SPAN></H2></DIV><P class="jopesangria">Starting with the prototype of a Personal Food Computer from the Open Agriculture initiative and with our goal of stretching this concept to the SynBio community, Valencia UPV iGEM came to the idea of ChatterBox, a modular, open-source and scalable device.</P><P class="jopesangria">Control over climatic and growing conditions is the first part of this hardware. The growing chamber is able to regulate temperature, humidity and illumination. Adding to this, a NFT hydroponic system is used to manage irrigation, oxygenation and crop nutrition. Secondly human interaction is achieved thanks to our “Optogenetic” lamps, equipped with two wavelengths. On the other hand, plant’s phenotypic expression is detected with the camera and a recognition software. Thus bidirectional communication is allowed. Through ChatterApp and the coupling of an Arduino and a Raspberry, we are able to control the systems mentioned above.</P><P class="jopesangria">All and all, our device provides ChatterPlant with a solution to improve agriculture sustainability by implementing SynBio technology.</P></DIV><DIV id="section2" class="container"><DIV class="heading-color"><H2><SPAN>PRODUCTION PLANT</SPAN></H2></DIV><P class="jopesangria">The ChatterBox is a device with many parts that are non-commercial, therefore our hardware team had to design many items and repurpose others.</P><P class="jopesangria">During the construction of this prototype different tools were used. For the main structure a circular saw, electric drill and table saw were used to process the aluminum profiles and insulation sheets. In the case of electronics, a multimeter and a soldering iron were mandatory.</P><P class="jopesangria">Most of the large items were manufactured in the Fine arts workshop and it could not have been done without the help of the design team.</P></DIV><DIV id="section3" class="container"><DIV class="heading-color"><H2><SPAN>DESIGN CONSIDERATIONS</SPAN></H2></DIV><P class="jopesangria">The ChatterBox’s layout was under many constraints during its design, such as the fact that it had to be delivered from Valencia to Spain. These facts make up the reason for which the hardware was restricted to size it has, perhaps a larger size could have been more useful and real.</P><P class="jopesangria">An important fact about this project is that Valencia UPV iGEM is a team based in Spain (Europe) were we use 50 Hz, AC 220 V power, so some specific components may not work in your country. Moreover, all the measurements that follow this text have been done using the Metric System and European codes.</P><P class="jopesangria">The Chatterbox is a high humidity ambient with liquid water flowing, this represents a challenge in terms of security. Our goal was to keep the system as watertight and secure as possible, to achieve this we used different approaches.</P><UL class="jopeli"><LI>The led illumination was chosen with an IP65 protection level, meaning that it can withstand direct water flow</LI><LI>In the case of the electrical connections heat shrinking tubes were used.</LI><LI>The most sensitive equipment was the optogenetic lamps which were protected with epoxy resin and a box.</LI><LI>Cable width was picked taking into account the maximum current and specific regulations.</LI></UL></DIV><DIV id="section4" class="container"><DIV class="heading-color"><H2><SPAN>CHATTER BOX</SPAN></H2></DIV><P class="jopesangria">A necessity in the SynBio world was found at the beginning of ChatterPlant, a Phytotron capable of exploiting Optogenetic systems and biologic sensors did not exist. Therefore, we came to the idea of the ChatterBox and autonomous systems with ability of controlling plant’s growth with cutting edge technologies in the agro alimentary and engineering field. Different systems have been combined but all of them help to deliver a more sustainable way of growing food.</P></DIV><DIV id="section5" class="container"><DIV class="jopesubapartado"><H4><SPAN>STRUCTURE</SPAN></H4></DIV></DIV><DIV id="section6" class="container"><DIV class="heading-color"><H4><SPAN>Framework</SPAN></H4></DIV><P class="jopesangria">First step is cutting the profiles, a metal saw was used to have the lengths needed and a metal file was necessary to obtain a better finish. An important tip is to drill the holes before mounting the structure to avoid problems later. Assembly of this part is a piece of cake, just introduce the protruding part of the polyamide connectors inside the aluminum profiles.</P><P><U><A href="https://static.igem.org/mediawiki/2017/f/f3/Aluminum_structure.pdf" target="_blank">Aluminum structure.pdf</A></U></P><P><U><A href="https://static.igem.org/mediawiki/2017/9/9f/Aluminum_structure_ChatterBox.zip" download="Aluminum_information.zip">Aluminum_information.zip</A></U></P></DIV><DIV id="section7" class="container"><DIV class="heading-color"><H4><SPAN>External parts</SPAN></H4></DIV><P class="jopesangria">For the Growing space we used 3 mm sheets of rigid polystyrene maintaining the internal growing conditions. The electrical space was covered with 3 mm methacrylate sheets to protect the internal parts from external dangers. Finally, PVC sheets made up the base and the separation between the electrical space and the growing chamber.</P></DIV><DIV id="section8" class="container"><DIV class="jopesubapartado"><H4><SPAN>MAIN CONTROL BOARD</SPAN></H4></DIV><P class="jopesangria">The ChatterBox requires a PCB board to connect all the sensors and control systems (mosfets and relays). Having this in mind Valencia UPV designed a board as compact as possible were every component could fit.</P><P class="jopesangria">First step is to solder all the parts to the Prototyping board (Mosfets and resistors). Then drill holes on the board to fix all the other non-soldered items and put the bolts and nuts.</P><P class="jopesangria">In the ChatterBox humidity was increased with a Nebulizer that worked with 24 DC volts, so a boost converter (6) was needed. The first step is to solder the input connections from the power source. Then with a multimeter measure the output voltage. After that, rotate the potentiometer to increase or decrease the voltage. Everything will be set when the output is 24. Finally, solder the output signals to the Mosfet for humidity control.</P></DIV><DIV id="section11" class="container"><DIV class="jopesubapartado"><H4><SPAN>SOFTWARE</SPAN></H4></DIV><P class="jopesangria">In order to connect the ChatterBox to the user, a human - machine interface was developed, this opens the communication between both agents. Having this is possible to monitorize the inner environment of the device and control it to obtain the desired conditions.</P><P class="jopesangria">Firstly the Arduino Mega 2560 works as a controller, the firmware connects in low level to all the electronics systems that are built-in in the ChatterBox. The Arduino is in charge of performing the temperature control, humidity, illumination, pH, water pump and works as an interface for the camera.</P><P class="jopesangria">Secondly the Raspberry Pi 3, a single board computer connected to the Arduino via an usb cable. A web service based on the REST architecture (Representational State Transfer) was deployed, with this a wireless communication is open, to use this channel two requirements: an internet connection and pair formed by an id and a password that are provided on the ChatterBox. Also the image processing for the detection system is performed on the Raspberry, this way it is detached from the Arduino so it doesn’t interrupt the control and monitoring routine and we don't overload the end system receiving it. During the image processing it is identified whether if there is a significant change on the leaf color or not. The training was performed by analyzing multiples images from our collection of experiments. The image processing could be trained following the same methodology to identify any other color scheme. The output of this routine is a constructed image highlighting the points of interest from the original one. As well if any of the parameters monitored on the ChatterBox is outside the functional margin, an automated warning message is sent to the owner. As this is a key piece and opens a gate to the world has been strongly secured to avoid any possible undesired interaction</P><P class="jopesangria">Last for the purpose of consuming the web service for the early adopters a mobile app is the next step to be taken, with it the owner of the ChatterBox could have complete control over it, activating the genetic c by just downloading it and entering the service id and password. A mockup is presented on how the app and workflow should be.</P><P class="jopesangria">The different tools and environment were carefully selected, the arduino works best when dealing with low level interactions of machinery and routine control. The raspberry has the potential of managing many ChatterBoxes Arduino’s for a industrial level. Furthermore the mobile app is planned for the early stages for an industrial environment a desktop control panel is more adecuated.</P></DIV><DIV id="section12" class="container"><DIV class="jopesubapartado"><H4><SPAN>CLIMATIC CONTROL</SPAN></H4></DIV><P class="jopesangria">Being able to keep the system as controlled as possible is key to increase the plant’s performance. Here we define all the parts that were design and how to use them.</P></DIV><DIV id="section13" class="container"><DIV class="heading-color"><H4><SPAN>Power source and electric connections.</SPAN></H4></DIV><P class="jopesangria">For our project we used to separate 12 Volt power sources. The main reason for this was the relatively high power consumption of the refrigeration system. Also with this setup, in case of failure of one power source, we would have the ability to switch on main emergency components.</P><P class="jopesangria">In the case of the power source a cable with type F plug and monophasic with ground cable was used. Since we are working with high AC voltage this is the most dangerous part of the hardware. Be sure to perform the connections without the power cords connected to the socket and never forget the grounding connections. Furthermore for the 12 Volt connections a cable with 1.5 mm2 was chosen.</P></DIV><DIV id="section14" class="container"><DIV class="heading-color"><H4><SPAN>Humidity and temperature.</SPAN></H4></DIV><P class="jopesangria">The sensor chosen to have information about Humidity and Temperature was the XSOURCE DHT22 Temperature and Humidity Sensor Module for Arduino. This sensor from the Adafruit company has an Arduino library which we used in our Arduino control code.</P><P class="jopesangria">nnections to the Arduino MEGA 2560 are: </P><P class="jopesangria">In order to keep a proper temperature in the ChatterBox we used a Purswave 12 V, 120 W
                  refrigeration unit controlled with a Relay.
               </P><P class="jopesangria">This unit has all the components necessary for a refrigeration system. It includes: Compressor,
                  evaporator, expansion valve and condenser. Also, it includes fans to direct air and promote higher
                  transmission of heat.
               </P><P class="jopesangria">A test was performed to study the response of the refrigeration system with the Arduino code and a set
                  temperature of 20 ºC (68º F). We decided to build a polystyrene box with a similar volume to our growing chamber and install
                  the refrigeration unit next to it.
               </P><P>The test conditions were:</P><UL class="jopeli"><LI>External temperature: 27 ºC.</LI><LI>Sensing time: 2s.</LI><LI>Reference T: 20 ºC</LI><LI>Test time: 14 min.</LI></UL><P class="jopesangria"> The other part of this segment involves the humidifier. It was designed to work with 24V Nebulizer and a 12 V blower. </P></DIV><DIV id="section15" class="container"><DIV class="heading-color"><H4><SPAN>Hydroponics.</SPAN></H4></DIV><P class="jopesangria">In order to obtain high production and quality in the crop and to obtain control over the plant
                  growth, Chatterbox uses a hydroponic system with a Nutrient Film Technique (NFT) where the basic
                  principle is the continuous or intermittent circulation of a thin layer of nutrient solution through the roots,
                  which passes through a series of PVC channels.
               </P><P class="jopesangria">The solution is collected and accumulated in a tank through a pump that allows the circulation of
                  the nutrient solution into the crop channels. This recirculation keeps the roots in permanent contact with
                  the nutrient solution, favoring the oxygenation of the roots and a correct supply of mineral nutrients for
                  the development of the plants.
               </P><UL class="jopeli"><LI> The water pump will be submerged inside the tank from where it will carry the water to the channels through a network of primary and secondary pipes. The characteristics of the water pump are: Max. flow: 240 l/h; Max. head: 3 m; Power: 4,5 W</LI><LI> The NFT System consists of a tank and two PVC channels of 3 pots each, in which we introduce
                     the substrate for the growth and development o
                  </LI><LI> The chosen substrate is perlite, a material that stands out for a high porosity, low cationexchange
                     capacity, high durability and no microbial activity.
                  </LI><LI> To maintain an adequate amount of oxygen in the tank, the prototype is equipped with an
                     oxygen pump (aquarium pump). Although the design of the NFT system facilitates the reoxygenation of the water, it is necessary to place it to avoid stagnant water and to prevent nutrient accumulation in the bottom of the tank. The characteristics of the oxygen pump are: Voltage: 220-240V; Adequate water depth: 50 cm / 19.68 &quot;; Power: 2.5 W / 3W (Optional). Air outlet: 1 (2.5 W); 2 (3W); Out of oxygen: 1.8 l / min (2.5 W); 2l / min (3W)
                  </LI></UL></DIV><DIV id="section16" class="container"><DIV class="heading-color"><H4><SPAN>Illumination.</SPAN></H4></DIV><P class="jopesangria">Illumination inside the ChatterBox was obtained with a 720 lumen white LED strip. We prepared 8
                  strips of 60 cm each. They were soldered to each other and attached to a 5 mm PVC sheet which was
                  mounted to the structure via two methacrylate angles.
               </P></DIV><DIV id="section17" class="container"><DIV class="heading-color"><H4><SPAN>PLANT-HUMAN COMMUNICATION INFTERFACE</SPAN></H4></DIV></DIV><DIV id="section18" class="container"><DIV class="jopesubapartado"><H4><SPAN>Camera</SPAN></H4></DIV><P class="jopesangria">In order to detect the color change in the leaves we used an Arducam mini camera OV5642 connected to our Arduino 2560. The connexions to the Arduino 2560 are: CS (pin 7), MOSI (pin 51), MISO (pin 50), SCK (pin 52), GND, VCC, SDA, SCL.</P><P class="jopesangria">We used 1 m length Arduino male-female jumpers to connect the camera.</P><P class="jopesangria">As we can see in the image below the recognition software con detect the color change in the leaves. Giving us, in this case, a positive for probable infection.</P></DIV><DIV id="section19" class="container"><DIV class="jopesubapartado"><H4><SPAN>Optogenetic lamps.</SPAN></H4></DIV><P class="jopesangria">In order to activate and deactivate the genetic circuit special lamps were built. Our team was able to
                  condense the prototype into one single design that through a Mosfet and a relay was capable of controlling the plant’s floration..
               </P><P class="jopesangria">To activate the Optogenetic circuit we used 660 nm LEDs with 27 mA and a forward voltage of 1,7 V
                  controlled through a Mosfet. To turn it off, high power 740 nm far red LEDs connected to a constant current source have been used. They have a maximum forward voltage of 2.75 V and work with an intensity of 350 mA.
               </P><P class="jopesangria"><STRONG class="jopenegrita">3D Printed supports</STRONG></P><P><U><A href="https://static.igem.org/mediawiki/2017/e/e6/Montaje_completo.zip" download="Aluminum_information.zip">3d_support.zip</A></U></P></DIV><DIV id="section100" class="container"><DIV class="heading-color"><H2><SPAN>FUTURE LINES</SPAN></H2></DIV><P class="jopesangria"> We have reached the end part of this Hardware wiki and here we will explain the objectives that
                  our device should aim to in the future.
               </P><UL class="jopeli"><LI>Moving camera. While building the ChatterBox we realized that this feature could be key in reducing costs per controlled plant. Research was done and using a technology similar to 3D printers the camera could have autonomous movement enabling higher analyzed surface per device.</LI><LI>Ethanol spray. The color detection part in the ChatterBox has an AND gate installed. It is meant to work with hormones and as a team we realized that this system was not viable outside of a laboratory. Having this mind, we propose that this circuit could be implemented with an ethanol spray. This alcohol can be used as an activator for that circuit.</LI></UL></DIV><DIV id="section101" class="container"><DIV class="heading-color"><H2><SPAN>BIBLIOGRAPHY</SPAN></H2></DIV><UL class="jopeli"><LI>E. Castelló Ferrer, J. Rye, G. Brander, T. Savas, D. Chambers, H. England, and C. Harper. Personal Food Computer: A new device for controlled-environment agriculture. Preprint <A target="_blank" href="https://arxiv.org/abs/1706.05104">https://arxiv.org/abs/1706.05104 </A></LI></UL></DIV></DIV></DIV></DIV></SECTION><FOOTER id="footer"><DIV class="container" style="padding: 0px !important; margin: 0px !important; width: 100%;"><DIV class="row" style="margin: 10px;"><DIV class="col-md-8 jopefooter"><P style="margin: 0px !important; text-align: center !important;"><STRONG class="jopenegrita">Valencia UPV iGEM</STRONG> Team</P></DIV></DIV></DIV></FOOTER></DIV></DIV></DIV></DIV></DIV></BODY></HTML>