<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Cadets2Vets_js_xprs_helper_js skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Cadets2Vets/js/xprs helper.js</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>/******************************************************************************************************
</P><PRE>*                                             XPRS HELPER - SHARED FUNCTIONS 
******************************************************************************************************/
</PRE><P>var XPRSHelper = {};
XPRSHelper.currentUser = {};
</P><P>
XPRSHelper.LOCAL_SERVER_PATH = &quot;<A rel="nofollow" class="external free" href="http://localhost:7000">http://localhost:7000</A>&quot;;
XPRSHelper.PRODUCTION_SERVER_PATH = &quot;/&quot;;
XPRSHelper.RELATIVE_SERVER_PATH = &quot;&quot;;
//XPRSHelper.devMode = &quot;LOCAL&quot;;
XPRSHelper.devMode = &quot;PRODUCTION&quot;;
XPRSHelper.saveQueue = {&quot;PENDING&quot;:{},&quot;ERRED&quot;:{},&quot;COMPLETED&quot;:{},&quot;FUTURE&quot;:{}};
XPRSHelper.presetTypes = {
		&quot;APPS&quot;:{&quot;TYPE&quot;:&quot;PROMO&quot;,&quot;NAME&quot;:&quot;Widgets&quot;,&quot;GROUP&quot;:&quot;SLIDESHOWS&quot;,&quot;PAGE&quot;:1},
		&quot;FEATURES&quot;:{&quot;TYPE&quot;:&quot;FEATURES&quot;,&quot;NAME&quot;:&quot;Features&quot;,&quot;GROUP&quot;:&quot;FEATURES&quot;,&quot;PAGE&quot;:1},
		&quot;TEAM&quot;:{&quot;TYPE&quot;:&quot;TEAM&quot;,&quot;NAME&quot;:&quot;Team&quot;,&quot;GROUP&quot;:&quot;FEATURES&quot;,&quot;PAGE&quot;:1},
		&quot;LOGOS&quot;:{&quot;TYPE&quot;:&quot;LOGOS&quot;,&quot;NAME&quot;:&quot;Logos&quot;,&quot;GROUP&quot;:&quot;FEATURES&quot;,&quot;PAGE&quot;:1},
		&quot;TESTIMONIALS&quot;:{&quot;TYPE&quot;:&quot;TESTIMONIALS&quot;,&quot;NAME&quot;:&quot;Testimonials&quot;,&quot;GROUP&quot;:&quot;SLIDESHOWS&quot;,&quot;PAGE&quot;:1},
		&quot;PROJECTS&quot;:{&quot;TYPE&quot;:&quot;PROJECTS&quot;,&quot;NAME&quot;:&quot;Projects&quot;,&quot;GROUP&quot;:&quot;FEATURES&quot;,&quot;PAGE&quot;:1},
		&quot;GALLERIES&quot;:{&quot;TYPE&quot;:&quot;GALLERIES&quot;,&quot;NAME&quot;:&quot;Gallery&quot;,&quot;GROUP&quot;:&quot;GALLERIES&quot;,&quot;PAGE&quot;:1},
		&quot;BLOG&quot;:{&quot;TYPE&quot;:&quot;BLOG&quot;,&quot;NAME&quot;:&quot;Blog&quot;,&quot;GROUP&quot;:&quot;GALLERIES&quot;,&quot;PAGE&quot;:1},
		&quot;STORE&quot;:{&quot;TYPE&quot;:&quot;STORE&quot;,&quot;NAME&quot;:&quot;Store&quot;,&quot;GROUP&quot;:&quot;GALLERIES&quot;,&quot;PAGE&quot;:1},
		&quot;TEXT_BLOCK&quot;:{&quot;TYPE&quot;:&quot;TEXT_BLOCK&quot;,&quot;NAME&quot;:&quot;Text Block&quot;,&quot;GROUP&quot;:&quot;ITEMS&quot;,&quot;PAGE&quot;:1},
		&quot;ARTICLE&quot;:{&quot;TYPE&quot;:&quot;ARTICLE&quot;,&quot;NAME&quot;:&quot;Article&quot;,&quot;GROUP&quot;:&quot;ITEMS&quot;,&quot;PAGE&quot;:1},
		&quot;HEADER&quot;:{&quot;TYPE&quot;:&quot;HEADER&quot;,&quot;NAME&quot;:&quot;Header&quot;,&quot;GROUP&quot;:&quot;ITEMS&quot;,&quot;PAGE&quot;:1},
		&quot;CALL_TO_ACTION&quot;:{&quot;TYPE&quot;:&quot;CALL_TO_ACTION&quot;,&quot;NAME&quot;:&quot;Call to action&quot;,&quot;GROUP&quot;:&quot;ITEMS&quot;,&quot;PAGE&quot;:1},
		&quot;ITEMS&quot;:{&quot;TYPE&quot;:&quot;ITEMS&quot;,&quot;NAME&quot;:&quot;Item&quot;,&quot;GROUP&quot;:&quot;ITEMS&quot;,&quot;PAGE&quot;:1},
		&quot;PROMO&quot;:{&quot;TYPE&quot;:&quot;PROMO&quot;,&quot;NAME&quot;:&quot;Header&quot;,&quot;GROUP&quot;:&quot;SLIDESHOWS&quot;,&quot;PAGE&quot;:1},
		&quot;FORM&quot;:{&quot;TYPE&quot;:&quot;FORM&quot;,&quot;NAME&quot;:&quot;Forms&quot;,&quot;GROUP&quot;:&quot;ITEMS&quot;,&quot;PAGE&quot;:1},
		&quot;SLIDESHOWS&quot;:{&quot;TYPE&quot;:&quot;SLIDESHOWS&quot;,&quot;NAME&quot;:&quot;Slideshow&quot;,&quot;GROUP&quot;:&quot;SLIDESHOWS&quot;,&quot;PAGE&quot;:1},
		&quot;FOOD_MENU&quot;:{&quot;TYPE&quot;:&quot;FOOD_MENU&quot;,&quot;NAME&quot;:&quot;Food Menu&quot;,&quot;GROUP&quot;:&quot;FEATURES&quot;,&quot;PAGE&quot;:1},
		&quot;MAPS&quot;:{&quot;TYPE&quot;:&quot;MAPS&quot;,&quot;NAME&quot;:&quot;Maps&quot;,&quot;GROUP&quot;:&quot;SLIDESHOWS&quot;,&quot;PAGE&quot;:1},
		&quot;VIDEOS&quot;:{&quot;TYPE&quot;:&quot;VIDEOS&quot;,&quot;NAME&quot;:&quot;Videos&quot;,&quot;GROUP&quot;:&quot;SLIDESHOWS&quot;,&quot;PAGE&quot;:1},
		&quot;RESERVATION&quot;:{&quot;TYPE&quot;:&quot;RESERVATION&quot;,&quot;NAME&quot;:&quot;Reservations&quot;,&quot;GROUP&quot;:&quot;ITEMS&quot;,&quot;PAGE&quot;:1},
		&quot;STORIES&quot;:{&quot;TYPE&quot;:&quot;STORIES&quot;,&quot;NAME&quot;:&quot;Stories&quot;,&quot;GROUP&quot;:&quot;FEATURES&quot;,&quot;PAGE&quot;:1},
		&quot;PRICING&quot;:{&quot;TYPE&quot;:&quot;PRICING&quot;,&quot;NAME&quot;:&quot;Pricing&quot;,&quot;GROUP&quot;:&quot;FEATURES&quot;,&quot;PAGE&quot;:1},
		&quot;SERVICES&quot;:{&quot;TYPE&quot;:&quot;SERVICES&quot;,&quot;NAME&quot;:&quot;Services&quot;,&quot;GROUP&quot;:&quot;FEATURES&quot;,&quot;PAGE&quot;:1},
		&quot;SOCIAL_ICONS&quot;:{&quot;TYPE&quot;:&quot;SOCIAL_ICONS&quot;,&quot;NAME&quot;:&quot;Social&quot;,&quot;GROUP&quot;:&quot;FEATURES&quot;,&quot;PAGE&quot;:1},
		&quot;BIO_CV&quot;:{&quot;TYPE&quot;:&quot;BIO_CV&quot;,&quot;NAME&quot;:&quot;Bio / Cv&quot;,&quot;GROUP&quot;:&quot;ITEMS&quot;,&quot;PAGE&quot;:1},
		&quot;TABLES&quot;:{&quot;TYPE&quot;:&quot;TABLES&quot;,&quot;NAME&quot;:&quot;Tables&quot;,&quot;GROUP&quot;:&quot;FEATURES&quot;,&quot;PAGE&quot;:1},
		&quot;MENUS&quot;:{&quot;TYPE&quot;:&quot;MENUS&quot;,&quot;NAME&quot;:&quot;Menu&quot;,&quot;GROUP&quot;:&quot;MENUS&quot;,&quot;COLOR&quot;:&quot;#6666FF&quot;},
		&quot;FOOTERS&quot;:{&quot;TYPE&quot;:&quot;FOOTERS&quot;,&quot;NAME&quot;:&quot;Footer&quot;,&quot;GROUP&quot;:&quot;FOOTERS&quot;,&quot;PAGE&quot;:1},
		&quot;SELF&quot;:{&quot;TYPE&quot;:&quot;SELF&quot;,&quot;NAME&quot;:&quot;Self&quot;,&quot;GROUP&quot;:&quot;WIDGETS&quot;,&quot;PAGE&quot;:1,&quot;COLOR&quot;:&quot;#5D99C2&quot;},
		//ELEMENT
		&quot;TITLE&quot;:{&quot;TYPE&quot;:&quot;TITLE&quot;,&quot;NAME&quot;:&quot;Title&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#0f95ee&quot;,&quot;PAGE&quot;:2},
		&quot;PIC&quot;:{&quot;TYPE&quot;:&quot;PIC&quot;,&quot;NAME&quot;:&quot;Pic&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#00cc99&quot;,&quot;PAGE&quot;:2},
		&quot;DRAGGABLE_PIC&quot;:{&quot;TYPE&quot;:&quot;DRAGGABLE_PIC&quot;,&quot;NAME&quot;:&quot;Draggable image&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#00cc99&quot;,&quot;PAGE&quot;:2},
		&quot;SUBTITLE&quot;:{&quot;TYPE&quot;:&quot;SUBTITLE&quot;,&quot;NAME&quot;:&quot;Subtitle&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#336667&quot;,&quot;PAGE&quot;:2},
		&quot;VIDEO&quot;:{&quot;TYPE&quot;:&quot;VIDEO&quot;,&quot;NAME&quot;:&quot;Video&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#6766cc&quot;,&quot;PAGE&quot;:2},
		&quot;BODY&quot;:{&quot;TYPE&quot;:&quot;BODY&quot;,&quot;NAME&quot;:&quot;Body&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#ff679a&quot;,&quot;PAGE&quot;:2},
		&quot;QUOTE&quot;:{&quot;TYPE&quot;:&quot;QUOTE&quot;,&quot;NAME&quot;:&quot;Quote&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#FF9933&quot;,&quot;PAGE&quot;:2},
		&quot;LINK&quot;:{&quot;TYPE&quot;:&quot;LINK&quot;,&quot;NAME&quot;:&quot;Link&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#663398&quot;,&quot;PAGE&quot;:2},
		&quot;ICON&quot;:{&quot;TYPE&quot;:&quot;ICON&quot;,&quot;NAME&quot;:&quot;Icon&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#996533&quot;,&quot;PAGE&quot;:2},
		&quot;MAP&quot;:{&quot;TYPE&quot;:&quot;MAP&quot;,&quot;NAME&quot;:&quot;Map&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#0099cb&quot;,&quot;PAGE&quot;:2},
		&quot;HTML&quot;:{&quot;TYPE&quot;:&quot;HTML&quot;,&quot;NAME&quot;:&quot;HTML&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;#999999&quot;,&quot;PAGE&quot;:0},
		&quot;DIVIDER&quot;:{&quot;TYPE&quot;:&quot;DIVIDER&quot;,&quot;NAME&quot;:&quot;Divider&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;#BDB76B&quot;,&quot;PAGE&quot;:0},
		&quot;RAW&quot;:{&quot;TYPE&quot;:&quot;RAW&quot;,&quot;NAME&quot;:&quot;Raw&quot;,&quot;GROUP&quot;:&quot;ELEMENTS&quot;,&quot;COLOR&quot;:&quot;#5a5a5a&quot;,&quot;PAGE&quot;:2},
		//UNRESOLVED
		&quot;UNRESOLVED&quot;:{&quot;TYPE&quot;:&quot;UNRESOLVED&quot;,&quot;NAME&quot;:&quot;&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;&quot;,&quot;PAGE&quot;:0},
		&quot;SOCIAL&quot;:{&quot;TYPE&quot;:&quot;SOCIAL&quot;,&quot;NAME&quot;:&quot;&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;#333&quot;,&quot;PAGE&quot;:0},
		&quot;IMAGE&quot;:{&quot;TYPE&quot;:&quot;IMAGE&quot;,&quot;NAME&quot;:&quot;Pic&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;#00cc99&quot;,&quot;PAGE&quot;:0},
		&quot;LABEL&quot;:{&quot;TYPE&quot;:&quot;LABEL&quot;,&quot;NAME&quot;:&quot;Label&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;#663398&quot;,&quot;PAGE&quot;:0},
		&quot;FIELD&quot;:{&quot;TYPE&quot;:&quot;FIELD&quot;,&quot;NAME&quot;:&quot;Field&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;#663398&quot;,&quot;PAGE&quot;:0},
		&quot;PRICE&quot;:{&quot;TYPE&quot;:&quot;PRICE&quot;,&quot;NAME&quot;:&quot;PRICE&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;#339966&quot;,&quot;PAGE&quot;:0}, // ECOMMERCE
		&quot;CART&quot;:{&quot;TYPE&quot;:&quot;CART&quot;,&quot;NAME&quot;:&quot;Cart&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;#00CC99&quot;,&quot;PAGE&quot;:0}, // ECOMMERCE
		&quot;QUOTE_AUTHOR&quot;:{&quot;TYPE&quot;:&quot;QUOTE_AUTHOR&quot;,&quot;NAME&quot;:&quot;Quote Author&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;#FF9933&quot;,&quot;PAGE&quot;:0},
		&quot;INLINE_PIC&quot;:{&quot;TYPE&quot;:&quot;INLINE_PIC&quot;,&quot;NAME&quot;:&quot;Image&quot;,&quot;GROUP&quot;:&quot;UNRESOLVED&quot;,&quot;COLOR&quot;:&quot;#00CC99&quot;,&quot;PAGE&quot;:0}
};
</P><P>XPRSHelper.inPresetGroup = function(presetId,presetGroup){
	if (presetId in XPRSHelper.presetTypes){
		return  (XPRSHelper.presetTypes[presetId][&quot;GROUP&quot;] == presetGroup);
	}
	return false;
};
</P><P>XPRSHelper.isManagable = function(presetId){
	if (presetId in XPRSHelper.presetTypes){
		return  (XPRSHelper.presetTypes[presetId][&quot;GROUP&quot;] in {&quot;FEATURES&quot;:true,&quot;SLIDESHOWS&quot;:true,&quot;GALLERIES&quot;:true});
	}
	return false;
};
</P><P>XPRSHelper.getServerPath = function(){
	if ($(&quot;body&quot;).attr(&quot;data-server&quot;)){
		return $(&quot;body&quot;).attr(&quot;data-server&quot;);
	}else{
		return XPRSHelper.RELATIVE_SERVER_PATH;	
	}
</P><P>	
//	if (XPRSHelper.devMode==&quot;LOCAL&quot;){
//		return XPRSHelper.LOCAL_SERVER_PATH;
//	}else{
//		return XPRSHelper.PRODUCTION_SERVER_PATH
//	}
};
</P><P>
XPRSHelper.getStaticServerPath = function(){
	return $(&quot;body&quot;).attr(&quot;data-static-server&quot;);
};
</P><P>
XPRSHelper.getXprsCookie = function(cookieName){
	cookieName = cookieName.replace(&quot;xprs&quot;,&quot;imxprs&quot;);
	try {
		return $.cookie(cookieName);
	} catch(err) {
		var name = cookieName + &quot;=&quot;;
	    var ca = document.cookie.split(';');
	    for(var i = 0; i &lt;ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0)==' ') {
	            c = c.substring(1);
	        }
	        if (c.indexOf(name) == 0) {
	            return c.substring(name.length,c.length);
	        }
	    }
	}
</P><P>};
</P><P>XPRSHelper.setXprsCookie = function(cookieName,cookieValue){
	cookieName = cookieName.replace(&quot;xprs&quot;,&quot;imxprs&quot;);
	if (window.location.href.indexOf(&quot;imcreator.com&quot;) == -1){
		$.cookie(cookieName,cookieValue, { path: '/' });
	}else{
		document.cookie = cookieName + '=' + cookieValue + '; expires=Fri, 27 Jul 2019 02:47:11 UTC; domain=.imcreator.com; path=/';
	}
};
</P><P>XPRSHelper.removeXprsCookie = function(cookieName){
	cookieName = cookieName.replace(&quot;xprs&quot;,&quot;imxprs&quot;);
	if (window.location.href.indexOf(&quot;imcreator.com&quot;) == -1){
		$.removeCookie(cookieName, { path: '/' });
	}else{
		document.cookie = cookieName + '=invalid; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=.imcreator.com; path=/';
	}
};
</P><P>XPRSHelper.getShoprocketUrl = function(){
	var dashboardUrl = $(&quot;body&quot;).attr(&quot;data-ecommerce-dashboard&quot;);
	if (dashboardUrl){
		return dashboardUrl;
	}else{
		return &quot;<A rel="nofollow" class="external free" href="https://dashboard.shoprocket.co">https://dashboard.shoprocket.co</A>&quot;;
	}
};
</P><P>XPRSHelper.getUrlParameterByName = function(name) {
</P><PRE>   name = name.replace(/[\[]/, &quot;\\[&quot;).replace(/[\]]/, &quot;\\]&quot;);
   var regex = new RegExp(&quot;[\\?&amp;]&quot; + name + &quot;=([^&amp;#]*)&quot;),
       results = regex.exec(location.search);
   return results == null ? &quot;&quot; : decodeURIComponent(results[1].replace(/\+/g, &quot; &quot;));
</PRE><P>};
</P><P>XPRSHelper.updateParent = function(msg) {
	XPRSHelper.getParentWindow().postMessage(msg, '*');
};
</P><P>
XPRSHelper.GET = function(getPath, params, callbackFunc,responseType){
	if (getPath == &quot;SKIP&quot;){
		if (typeof callbackFunc != &quot;undefined&quot;){
			callbackFunc({});
		}
		return;
	}
	if (typeof EditorHelper != &quot;undefined&quot;){
		params[&quot;root_id&quot;] = EditorHelper.getRootId();
	}else if (typeof SpimeDualView != &quot;undefined&quot;){
		params[&quot;root_id&quot;] = SpimeDualView.getRootId();
	}
	$.get(XPRSHelper.getServerPath() + getPath, params, function(data) {
		if (typeof callbackFunc != &quot;undefined&quot;){
			callbackFunc(data);
		}
	},responseType).fail(function(xhr, textStatus, errorThrown) {
		try{
			XPRSHelper.reportError(&quot;something went wrong... &quot; + textStatus  + &quot; &quot; + errorThrown,{&quot;ajax_url&quot;:getPath,&quot;ajax_params&quot;:JSON.stringify(params)});
		    window.console.error(text);
		}catch (ex) {}
	 });
};
</P><P>XPRSHelper.GETCORS = function(postPath, params, callbackFunc,responseType){
	$.ajax({
		  type: &quot;GET&quot;,
		  url: XPRSHelper.getServerPath() + postPath,
		  data: params,
		  xhrFields: {
	           withCredentials: true
	      },
	      crossDomain: true,
		  success: function(data) {
				if (typeof callbackFunc != &quot;undefined&quot;){
					callbackFunc(data);
				}
		  },
		  dataType: responseType
		}).fail(function(xhr, textStatus, errorThrown) {
			try{
				XPRSHelper.reportError(&quot;something went wrong... &quot; + textStatus  + &quot; &quot; + errorThrown,{&quot;ajax_url&quot;:getPath,&quot;ajax_params&quot;:JSON.stringify(params)});
			    window.console.error(text);
			}catch (ex) {}
		 });
};
</P><P>
XPRSHelper.POST = function(postPath, params, callbackFunc,responseType,callbackOnly){
	if (callbackOnly){
		if (typeof callbackFunc != &quot;undefined&quot;){
			callbackFunc();
		} 
		return;
	}
	if (typeof EditorHelper != &quot;undefined&quot;){
		params[&quot;root_id&quot;] = EditorHelper.getRootId();
	}else if (typeof SpimeDualView != &quot;undefined&quot;){
		params[&quot;root_id&quot;] = SpimeDualView.getRootId();
	}
	$.ajax({
		  type: &quot;POST&quot;,
		  url: XPRSHelper.getServerPath() + postPath,
		  data: params,
		  success: function(data) {
				if (typeof callbackFunc != &quot;undefined&quot;){
					callbackFunc(data);
				}
		  },
		  dataType: responseType
		}).fail(function(xhr, textStatus, errorThrown) {
			try{
				XPRSHelper.reportError(&quot;something went wrong... &quot; + textStatus  + &quot; &quot; + errorThrown,{&quot;ajax_url&quot;:getPath,&quot;ajax_params&quot;:JSON.stringify(params)});
			    window.console.error(text);
			}catch (ex) {}
		 });
};
</P><P>XPRSHelper.POSTCORS = function(postPath, params, callbackFunc,responseType){
	$.ajax({
		  type: &quot;POST&quot;,
		  xhrFields: {
	           withCredentials: true
	      },
	      crossDomain: true,
		  url: XPRSHelper.getServerPath() + postPath,
		  data: params,
		  success: function(data) {
				if (typeof callbackFunc != &quot;undefined&quot;){
					callbackFunc(data);
				}
		  },
		  dataType: responseType
		}).fail(function(xhr, textStatus, errorThrown) {
			try{
				XPRSHelper.reportError(&quot;something went wrong... &quot; + textStatus  + &quot; &quot; + errorThrown,{&quot;ajax_url&quot;:getPath,&quot;ajax_params&quot;:JSON.stringify(params)});
			    window.console.error(text);
			}catch (ex) {}
		 });
};
</P><P>
XPRSHelper.SAFEPOST = function(url,params,saveKey,saveName,callbackFunc,callbackOnly){
	if (callbackOnly){
		if (typeof callbackFunc != &quot;undefined&quot;){
			callbackFunc();
		} 
		return;
	}
	if (XPRSHelper.pendingActionExists(saveKey) || XPRSHelper.futureQueueSize(saveKey) &gt; 0){
		if (XPRSHelper.pendingActionExists(saveKey)){
		}else if (XPRSHelper.futureQueueSize(saveKey) &gt; 0){
		}
		XPRSHelper.addToFutureQueue(saveKey,url,saveName,params,callbackFunc);
		return;
	}else{
		XPRSHelper.markAsPending(saveKey);
	}
	if (typeof EditorHelper != &quot;undefined&quot;){
		params[&quot;root_id&quot;] = EditorHelper.getRootId();
	}else if (typeof SpimeDualView != &quot;undefined&quot;){
		params[&quot;root_id&quot;] = SpimeDualView.getRootId();
	}
	$.ajax({
		  type: &quot;POST&quot;,
		  url: XPRSHelper.getServerPath() + url,
		  data: params,
		  success: function(result) {
			  if (result.response == &quot;SUCCESS&quot;){
				  XPRSHelper.updateSaveQueue(saveKey,&quot;PENDING&quot;,&quot;COMPLETED&quot;,result);
				  XPRSHelper.updateParent({&quot;deliver_to&quot;:&quot;parent&quot;,&quot;action&quot;:&quot;saved&quot;});
				  if (typeof callbackFunc != &quot;undefined&quot;){
						callbackFunc(result);
				  }
				  if (typeof XPRSUndo != &quot;undefined&quot;){
					  XPRSUndo.pushHistoryEntry({&quot;key&quot;:saveKey,&quot;url&quot;:url,&quot;name&quot;:saveName,&quot;params&quot;:params});
				  }
			  }else{
				  //handle error!!
				  console.log(&quot;got error for key &quot; + saveKey + &quot; with result &quot; + JSON.stringify(result));
				  XPRSHelper.updateSaveQueue(saveKey,&quot;PENDING&quot;,&quot;ERRED&quot;,result);
			  }
		  },
		  dataType: &quot;json&quot;
		}).fail(function(xhr, textStatus, errorThrown) {
			try{
				XPRSHelper.reportError(&quot;something went wrong... &quot; + textStatus  + &quot; &quot; + errorThrown,{&quot;ajax_url&quot;:url,&quot;ajax_params&quot;:JSON.stringify(params)});
			    window.console.error(text);
			}catch (ex) {}
		 }).always(function(){
			 if (XPRSHelper.futureQueueSize(saveKey) &gt; 0){
				var nextAction = XPRSHelper.getNextSaveAction(saveKey);
				if (nextAction != null){
					console.log(&quot;found a new action, for key &quot;  + saveKey + &quot; calling future action&quot;)
					setTimeout(function(){
						XPRSHelper.SAFEPOST(nextAction.url,nextAction.params,nextAction.saveKey,nextAction.saveName,nextAction.callback);	
					},1000)
</P><P>				}
			}
		 });
</P><P>};
</P><P>
XPRSHelper.pendingActionExists = function(saveKey){
	return (saveKey in XPRSHelper.saveQueue[&quot;PENDING&quot;]);
};
</P><P>XPRSHelper.markAsPending = function(saveKey){
	XPRSHelper.saveQueue[&quot;PENDING&quot;][saveKey] = true;
};
</P><P>XPRSHelper.addToFutureQueue = function(saveKey,url,saveName,params,callback){
	var action = {};
	action.url = url;
	action.params = params;
	action.saveKey = saveKey;
	action.saveName = saveName;
	action.callback = callback;
	if (!(saveKey in XPRSHelper.saveQueue[&quot;FUTURE&quot;])){
		XPRSHelper.saveQueue[&quot;FUTURE&quot;][saveKey] = [];
	}
	XPRSHelper.saveQueue[&quot;FUTURE&quot;][saveKey].push(action);
};
</P><P>XPRSHelper.futureQueueSize = function(saveKey){
	var size = 0;
	if (saveKey in XPRSHelper.saveQueue[&quot;FUTURE&quot;]){
		size = XPRSHelper.saveQueue[&quot;FUTURE&quot;][saveKey].length
	}
	return size;
};
</P><P>XPRSHelper.updateSaveQueue = function(saveKey,fromState,toState,result){
	XPRSHelper.saveQueue[toState][saveKey] = true;
	delete XPRSHelper.saveQueue[fromState][saveKey];
};
</P><P>XPRSHelper.getNextSaveAction = function(saveKey){
	var nextAction = null;
	if (saveKey in XPRSHelper.saveQueue[&quot;FUTURE&quot;]){
		var nextAction = XPRSHelper.saveQueue[&quot;FUTURE&quot;][saveKey].pop();
		if (XPRSHelper.saveQueue[&quot;FUTURE&quot;][saveKey].length == 0){
			delete XPRSHelper.saveQueue[&quot;FUTURE&quot;][saveKey];
		}
	}
	return nextAction;
};
</P><P>XPRSHelper.localServer = function(){
	try{
		return (XPRSHelper.getParentWindow().location.href.indexOf(&quot;localhost&quot;) != -1);
	}catch(err){};
};
</P><P>
XPRSHelper.clonePrefix = function() {
	return 'xxxxx'.replace(/[xy]/g, function(c) {
		var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r &amp; 0x3 | 0x8);
		return v.toString(16);
	});
};
</P><P>XPRSHelper.onCssTransitionFinish = function(obj,callbackFunc){
	//obj.one('transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd',function(event) {
		//event.stopPropagation();
		//$(this).unbind('transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd');
		if (typeof callbackFunc != &quot;undefined&quot;){
			callbackFunc();
		}
	//});
};
</P><P>XPRSHelper.signout = function(){
	XPRSHelper.removeXprsCookie(&quot;xprs_user&quot;);
	XPRSHelper.removeXprsCookie(&quot;xprs_root&quot;);
	XPRSHelper.removeXprsCookie(&quot;xprs_session&quot;);
	XPRSHelper.removeXprsCookie(&quot;xprs_email&quot;);
//	$.removeCookie('xprs_user', { path: '/' });
//	$.removeCookie('xprs_root', { path: '/' });
//	$.removeCookie('xprs_session', { path: '/' });
//	document.cookie = &quot;xprs_user=;expires=Thu, 01 Jan 1970 00:00:00 GMT&quot;;
//	document.cookie = &quot;xprs_root=;expires=Thu, 01 Jan 1970 00:00:00 GMT&quot;;
//	document.cookie = &quot;xprs_session=;expires=Thu, 01 Jan 1970 00:00:00 GMT&quot;;
//	document.cookie = &quot;xprs_user=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=.imcreator.com; path=/&quot;;
//	document.cookie = &quot;xprs_root=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=.imcreator.com; path=/&quot;;
//	document.cookie = &quot;xprs_session=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=.imcreator.com; path=/&quot;;
	XPRSHelper.getParentWindow().location.href = &quot;/&quot;;
};
</P><P>
XPRSHelper.getCurrentUser = function(callbackFunc){
	XPRSHelper.GET(&quot;/get_loggedin_user&quot;,{},function(userObj){
		XPRSHelper.currentUser = userObj;
		if (typeof callbackFunc != &quot;undefined&quot;){
			callbackFunc();
		}
	},&quot;json&quot;);
//	
//	var userFromCookie = decodeURIComponent(XPRSHelper.getXprsCookie(&quot;xprs_user&quot;));
//	var sessionFromCookie = XPRSHelper.getXprsCookie(&quot;xprs_session&quot;);
//	if (typeof userFromCookie == &quot;undefined&quot; || typeof sessionFromCookie == &quot;undefined&quot;){
//		return &quot;guest&quot;;
//	}else{
//		if (sessionFromCookie != &quot;invalid&quot;){
//			return userFromCookie;
//		}
//	}
//	return &quot;guest&quot;;
};
</P><P>XPRSHelper.getCurrentDate = function() {
	return dateFormat(new Date(), 'UTC:dd-mm-yyyy HH:MM:ss');
};
</P><P>XPRSHelper.trackEvent = function(eventName,category,label,skipBi){
	if (typeof analytics != &quot;undefined&quot;){
		analytics.track(eventName,{label:label});
		analytics.page(eventName,{title:eventName, url:&quot;/&quot; + eventName, path: &quot;/&quot; + eventName});
</P><P>		if (typeof ga != &quot;undefined&quot;){
			if (typeof ANALYTICS_CODES != &quot;undefined&quot;){
				for (i in ANALYTICS_CODES){
			  		var analyticsName = ANALYTICS_CODES[i][&quot;name&quot;];
			  		ga(analyticsName + '.send', {
						  'hitType': 'event',          // Required.
						  'eventCategory': category,   // Required.
						  'eventAction': eventName,      // Required.
						  'eventLabel': label
					});
					ga(analyticsName + '.send', 'pageview', {
						  'page': eventName,
						  'title':eventName
					});
				}
			}
</P><P>		}
		try{
			if (typeof IMOS != &quot;undefined&quot;){
				var ourGoals = {&quot;Registration&quot;:true,&quot;Premium&quot;:true,&quot;Whitelabel Premium&quot;:true};
				if (eventName in ourGoals){
					//will be tracked from the goal function
					//IMOS.trackGoal(eventName);
				}else{
					IMOS.trackEvent(eventName);	
				}
			}
		} catch (err){
			console.log(&quot;failed to track imos&quot;);
		}
	}else{
		XPRSHelper.updateParent({&quot;deliver_to&quot;:&quot;parent&quot;,&quot;action&quot;:&quot;track-event&quot;,&quot;event_name&quot;:eventName,&quot;category&quot;:category,&quot;label&quot;:label});
		return;
	}
	if (!skipBi){
		XPRSHelper.POST(&quot;/track_user_action&quot;, {&quot;event_name&quot;:eventName,&quot;url&quot;:window.location.href,&quot;extra_data&quot;:label});
	}
};
</P><P>XPRSHelper.identifyTemplate = function(templateName){
	if (typeof analytics != &quot;undefined&quot;){
		analytics.identify({templates: templateName});
	}
};
</P><P>XPRSHelper.getParentWindow = function(){
	if (typeof SpimeDualView != &quot;undefined&quot;){
		return window.self
	}
	try { 
		if (window.parent.location.href){
			return window.parent;
		}
	}catch (err){
		return window.self;
	}
};
</P><P>
XPRSHelper.changeHash = function(newHash){
	XPRSHelper.getParentWindow().location.hash = newHash;
};
</P><P>XPRSHelper.getHash = function(){
	return XPRSHelper.getParentWindow().location.hash;
};
</P><P>
XPRSHelper.imagePreloader = function(arrayOfImages,containingFolder,suffix) {
</P><PRE>   $(arrayOfImages).each(function(){
       $('&lt;img/&gt;')[0].src = containingFolder + &quot;/&quot; + this + &quot;.&quot; + suffix;
   });
</PRE><P>};
</P><P>XPRSHelper.renderTip = function(tipIndex){
	tooltTips = [
		     		{
			     		&quot;category&quot;:&quot;Adding Sections&quot;,
			     		&quot;title&quot;:&quot;Add a new section to your page&quot;,
			     		&quot;content&quot;:&quot;Click to add  text, pictures, gallery, slideshow, contact form and more.&quot;,
			     		&quot;direction&quot;:&quot;bottom-left&quot;,
			     		&quot;selector&quot;:&quot;#add-stripe&quot;,
			     		&quot;container_selector&quot;:&quot;.master.item-box:visible:not(.force-transparency):not(.element-box):not(.header-box) + .control-handle:eq(0) .add-stripe-holder&quot;,
			     		&quot;frame&quot;:&quot;viewer&quot;,
			     		&quot;circle_offset_left&quot;:38,
			     		&quot;circle_offset_top&quot;:40//,
			     		//&quot;generate_click&quot;:true
</P><P>			     	},
		     		{
			     		&quot;category&quot;:&quot;Editing Content&quot;,
			     		&quot;title&quot;:&quot;Click &amp; edit any element&quot;,
			     		&quot;content&quot;:&quot;Click any element and insert your own content: text, pictures and more.&quot;,
			     		&quot;direction&quot;:&quot;bottom-right&quot;,
			     		&quot;selector&quot;:&quot;.text-element&quot;,
			     		&quot;container_selector&quot;:&quot;.master.item-box:not(.header-box)&quot;,
			     		&quot;frame&quot;:&quot;viewer&quot;,
			     		&quot;circle_offset_left&quot;:0,
			     		&quot;circle_offset_top&quot;:37
			     	},
		     		{
			     		&quot;category&quot;:&quot;Adding Pages&quot;,
			     		&quot;title&quot;:&quot;Add a new page to your site&quot;,
			     		&quot;content&quot;:&quot;Click to add a new page: about, blog, gallery, contact and more&quot;,
			     		&quot;direction&quot;:&quot;top-right&quot;,
			     		&quot;selector&quot;:&quot;#pages-menu-btn&quot;,
			     		&quot;container_selector&quot;:&quot;#control-panel-left&quot;,
			     		&quot;frame&quot;:&quot;dual&quot;,
			     		&quot;circle_offset_left&quot;:15,
			     		&quot;circle_offset_top&quot;:29
		     		},
		     		{
			     		&quot;category&quot;:&quot;Responsive&quot;,
			     		&quot;title&quot;:&quot;Preview on all devices&quot;,
			     		&quot;content&quot;:&quot;See how your website looks on tablets and mobile phones&quot;,
			     		&quot;direction&quot;:&quot;top-right&quot;,
			     		&quot;selector&quot;:&quot;#preview-menu-btn&quot;,
			     		&quot;container_selector&quot;:&quot;#control-panel-right&quot;,
			     		&quot;frame&quot;:&quot;dual&quot;,
			     		&quot;circle_offset_left&quot;:8,
			     		&quot;circle_offset_top&quot;:27
			     	},
		     		{
			     		&quot;category&quot;:&quot;Publish&quot;,
			     		&quot;title&quot;:&quot;Publish your site&quot;,
			     		&quot;content&quot;:&quot;When you finish editing your site, click Publish to connect to a domain and share your site with the world.&quot;,
			     		&quot;direction&quot;:&quot;top-right&quot;,
			     		&quot;selector&quot;:&quot;#publish-btn&quot;,
			     		&quot;container_selector&quot;:&quot;body&quot;,
			     		&quot;frame&quot;:&quot;dual&quot;,
			     		&quot;circle_offset_left&quot;:-19,
			     		&quot;circle_offset_top&quot;:28
			     	}
		     	];
	tipObj = tooltTips[tipIndex];
	if (tipObj.frame == &quot;dual&quot;){
		if (typeof SpimeDualView == &quot;undefined&quot;){
			XPRSHelper.updateParent({&quot;deliver_to&quot;:&quot;parent&quot;,&quot;action&quot;:&quot;show-tooltip&quot;,&quot;tip&quot;:tipIndex});
			return;
		}
	}
	if (tipObj.frame == &quot;viewer&quot;){
		if (typeof EditorHelper == &quot;undefined&quot;){
			XPRSHelper.updateParent({&quot;deliver_to&quot;:&quot;viewer&quot;,&quot;action&quot;:&quot;show-tooltip&quot;,&quot;tip&quot;:tipIndex});
			return;
		}
	}
	var tooltipWrapper = $(&quot;&lt;div class='tooltip-wrapper tooltip-ui tooltip-ui&quot;+ tipIndex +&quot;'  /&gt;&quot;);
	var tooltipHolder = $(&quot;&lt;div class='tooltip-holder' /&gt;&quot;);
	var availableContainers = $(tipObj.container_selector);
	var tooltipRefrenceContainer = availableContainers.first();
</P><P>	var tooltipRefrenceElement = tooltipRefrenceContainer.find(tipObj.selector).first();
	if (tooltipRefrenceElement.length == 0){
		if (availableContainers.length &gt; 1){
			tooltipRefrenceContainer = availableContainers.eq(1);
			tooltipRefrenceElement = tooltipRefrenceContainer.find(tipObj.selector);
		}
	}
	var lastTip = false;
	var nextTipIndex = tipIndex + 1;
	if (nextTipIndex == tooltTips.length){
		lastTip = true;
	}
	//console.log(tooltipRefrenceContainer.attr(&quot;class&quot;) + &quot; ---- &quot; + tooltipRefrenceElement.attr(&quot;class&quot;))
	//No such reference element, skip
	if (tooltipRefrenceElement.length == 0){
		XPRSHelper.renderTip(nextTipIndex);
		console.log(&quot;didn't find&quot;)
		return;
	}
</P><P>	
	var tooltipcategory = $(&quot;&lt;div class='tooltip-category t-t' /&gt;&quot;).text(tipObj.category);
	var tooltipTitle = $(&quot;&lt;div class='tooltip-title t-t' /&gt;&quot;).text(tipObj.title);
	var tooltipContent = $(&quot;&lt;div class='tooltip-content t-t' /&gt;&quot;).html(tipObj.content);
</P><P>	nextBtnText = (lastTip) ? &quot;got it&quot; : &quot;next&quot;;
</P><P>	var tooltipNextTip = $(&quot;&lt;div class='tooltip-next tooltip-btn t-t' /&gt;&quot;).text(nextBtnText);
	var tooltipHideTip = $(&quot;&lt;div class='tooltip-hide tooltip-btn t-t' /&gt;&quot;).text(&quot;hide&quot;);
</P><P>	tooltipNextTip.unbind(&quot;click&quot;).bind(&quot;click&quot;,function(e){
		e.stopPropagation();
		$(&quot;.tooltip-ui&quot; + tipIndex).remove();
		if (tipObj.generate_click){
			tooltipRefrenceElement.trigger(&quot;click&quot;);
		}
		XPRSHelper.updateParent({&quot;deliver_to&quot;:&quot;viewer&quot;,&quot;action&quot;:&quot;remove-tooltips&quot;, &quot;tooltip_index&quot;:tipIndex});
		if ( !lastTip ){
			XPRSHelper.renderTip(nextTipIndex);
		}else{
			XPRSHelper.updateParent({&quot;deliver_to&quot;:&quot;parent&quot;,&quot;action&quot;:&quot;remove-tooltips&quot;, &quot;tooltip_index&quot;:tipIndex});
		}
	});
</P><P>	var tooltipCircle = $(&quot;&lt;div class='tooltip-circle tooltip-ui tooltip-ui&quot;+ tipIndex +&quot;<I> /&gt;&quot;);</I></P><P>	tooltipCircle.unbind(&quot;click&quot;).bind(&quot;click&quot;,function(event) {
		event.stopPropagation();
		XPRSHelper.updateParent({&quot;deliver_to&quot;:&quot;parent&quot;,&quot;action&quot;:&quot;remove-tooltips&quot;});
		tooltipRefrenceElement.click();
	});
</P><P>	if (tipObj.generate_click){
		setTimeout(function(){
			tooltipRefrenceElement.trigger(&quot;click&quot;);
		},1500)
	}
</P><P>	tooltipHideTip.unbind(&quot;click&quot;).bind(&quot;click&quot;,function(e){
		e.stopPropagation();
		XPRSHelper.updateParent({&quot;deliver_to&quot;:&quot;viewer&quot;,&quot;action&quot;:&quot;remove-tooltips&quot;, &quot;tooltip_index&quot;:tipIndex});
		XPRSHelper.updateParent({&quot;deliver_to&quot;:&quot;parent&quot;,&quot;action&quot;:&quot;remove-tooltips&quot;, &quot;tooltip_index&quot;:tipIndex});
	});
</P><P>	tooltipHolder.append(tooltipcategory).append(tooltipTitle).append(tooltipContent).append(tooltipHideTip).append(tooltipNextTip);
	tooltipWrapper.append(tooltipHolder);
</P><P>	tooltipRefrenceContainer.append(tooltipCircle);
	tooltipRefrenceContainer.append(tooltipWrapper);
</P><P>	
	var scrollOffset = 0;
	if (tipObj.frame == &quot;viewer&quot;){
		scrollOffset = $('.main-page').scrollTop();
	}
</P><P>	//console.log(&quot;positioning circle... reference element left is &quot; + tooltipRefrenceElement.offset().left + &quot; container left &quot; + tooltipRefrenceContainer.offset().left)
	//console.log(&quot;positioning circle... reference element offset top is &quot; + tooltipRefrenceElement.offset().top  + &quot; reference element position top is &quot; + tooltipRefrenceElement.position().top  +&quot; container offset top &quot; + tooltipRefrenceContainer.offset().top + &quot; container position &quot; + tooltipRefrenceContainer.position().top + &quot; scrollOffset is &quot; + scrollOffset)
</P><P>	//tooltipCircle.css(&quot;left&quot;,tooltipRefrenceElement.offset().left - tooltipRefrenceContainer.offset().left - tipObj.circle_offset_left);
	//tooltipCircle.css(&quot;top&quot;,parseInt(tooltipRefrenceElement.offset().top) - tooltipRefrenceContainer.offset().top - tipObj.circle_offset_top + scrollOffset);
</P><P>	tooltipCircle.offset({ top: tooltipRefrenceElement.offset().top - tipObj.circle_offset_top, left: tooltipRefrenceElement.offset().left - tipObj.circle_offset_left});
</P><P>	
	//testing if bottom or top
	//trying to place the tip in the bottom
	//var calculatedTop = tooltipCircle.position().top - tooltipWrapper.innerHeight() + 40;
	//if (calculatedTop &lt; documentTop){
</P><P>	var preferredDirection = tipObj.direction;
	var calculatedLeft = 0;
	var calculatedTop = 0;
	if (preferredDirection.indexOf(&quot;bottom&quot;) != -1){
		calculatedTop = tooltipCircle.position().top - tooltipWrapper.innerHeight() + 40;
	//	console.log(&quot;we prefer bottom &quot; + calculatedTop)
	}else{
		calculatedTop = tooltipCircle.position().top + tooltipCircle.innerHeight() - 40;
	}
</P><P>	if (preferredDirection.indexOf(&quot;left&quot;) != -1){
		calculatedLeft = tooltipCircle.position().left + tooltipCircle.innerWidth() - 40;
	}else{
		calculatedLeft = tooltipCircle.position().left - tooltipWrapper.innerHeight();
	}
</P><P>	if (calculatedTop &lt; 0 &amp;&amp; preferredDirection.indexOf(&quot;bottom&quot;) != -1 &amp;&amp; tipObj.selector != &quot;#add-stripe&quot;){
		//console.log(&quot;we prefer bottom but there is no place &quot; + calculatedTop + &quot; &lt; 0 &quot; )
		preferredDirection = preferredDirection.replace(&quot;bottom&quot;,&quot;top&quot;);
		calculatedTop = tooltipCircle.position().top + tooltipCircle.innerHeight() - 40;
	}
</P><P>	if (calculatedLeft &lt; 0 &amp;&amp; preferredDirection.indexOf(&quot;right&quot;) != -1 ){
		preferredDirection = preferredDirection.replace(&quot;right&quot;,&quot;left&quot;);
		calculatedLeft = tooltipCircle.position().left + tooltipCircle.innerWidth() - 40;
	}else if(calculatedLeft +  tooltipWrapper.width() &gt; parseInt($(&quot;document&quot;).width()) &amp;&amp; preferredDirection.indexOf(&quot;left&quot;) != -1){
		preferredDirection = preferredDirection.replace(&quot;right&quot;,&quot;left&quot;);
		calculatedLeft = tooltipCircle.position().left - tooltipWrapper.innerHeight();
	}
</P><P>	tooltipWrapper.css(&quot;left&quot;,calculatedLeft);
	tooltipWrapper.css(&quot;top&quot;,calculatedTop );
	tooltipWrapper.addClass(preferredDirection);
</P><P>	
	if (tipObj.frame == &quot;viewer&quot;){
		var topmostComponent = Math.min(tooltipCircle.offset().top,tooltipWrapper.offset().top);
		var scrollto = topmostComponent - $('.main-page').offset().top + $('.main-page').scrollTop();
</P><P>	    var offset = tooltipCircle.offset().top;
	    var visibleAreaStart = $(window).scrollTop();
	    var visibleAreaEnd = visibleAreaStart + window.innerHeight;
	    if(offset &lt; visibleAreaStart || offset &gt; visibleAreaEnd){
	         // Not in view so scroll to it
	    	$('body,html').animate({scrollTop:scrollto},2000,'easeOutQuart');
	    }
	}
</P><P>	XPRSTranslator.translateDom(tooltipWrapper);
</P><P>	setTimeout(function(){
		tooltipRefrenceContainer.addClass(&quot;tip-highlight&quot;);
	},500);
</P><P>};
</P><P>
XPRSHelper.xprsAlert = function(msg,params){
	if (typeof swal == &quot;undefined&quot;){
		console.error(&quot;XPRS Error: &quot; + msg + &quot; &quot; + JSON.stringify(params));
		return;
	}
</P><P>	if (typeof params == &quot;undefined&quot;){
		params = {};
		params[&quot;title&quot;] = &quot;_&quot;;
	}
	params[&quot;confirmButtonColor&quot;]=&quot;#0099CC&quot;;
	params[&quot;customClass&quot;] = &quot;xprs-alert&quot;;
	if (params &amp;&amp; !params[&quot;do_not_translate&quot;]){
		msg = XPRSTranslator.translateText(msg);
	}
	params[&quot;title&quot;] = XPRSTranslator.translateText(params[&quot;title&quot;]);
	params[&quot;confirmButtonText&quot;] = XPRSTranslator.translateText(params[&quot;confirmButtonText&quot;]);
	params[&quot;cancelButtonText&quot;] = XPRSTranslator.translateText(params[&quot;cancelButtonText&quot;]);
	params[&quot;text&quot;] = msg;
</P><P>	var existingAlert = ($(&quot;.sweet-alert.visible&quot;).length == 1);
</P><P>	if (existingAlert){
		//params[&quot;closeOnConfirm&quot;] = false;
		//params[&quot;closeOnCancel&quot;] = false;
</P><P>	}
</P><P>	swal(params,params[&quot;callbackfunc&quot;]);
	if (typeof params.report_error != &quot;undefined&quot;){
		XPRSHelper.reportError(msg,params);
	}
</P><P>	$(&quot;.sweet-overlay&quot;).unbind(&quot;click&quot;).bind(&quot;click&quot;,function(e){
		e.stopPropagation();
		swal.close();
	});
};
</P><P>
XPRSHelper.reportError = function(errorMsg,params){
	try{
		$.ajax({
			  type: &quot;POST&quot;,
			  url: XPRSHelper.getServerPath() + &quot;/log&quot;,
			  data: {&quot;log_info&quot;:errorMsg,&quot;stack_trace&quot;:Error().stack,&quot;url&quot;:window.location.href,&quot;ajax_url&quot;:params[&quot;ajax_url&quot;],&quot;ajax_params&quot;:params[&quot;ajax_params&quot;]}
		});
	}catch (ex) {}
};
</P><P>
XPRSHelper.invokeLogin = function(callbackFunc,form,cancelCallback){
	//var currentUser = XPRSHelper.getCurrentUser();
	XPRSHelper.getCurrentUser(function(){
		var nextUrl = XPRSHelper.getUrlParameterByName(&quot;requested_url&quot;);
		var forceDialog = false;
		if (form &amp;&amp; form.indexOf(&quot;force-&quot;) != -1){
			form = form.replace(&quot;force-&quot;,&quot;&quot;);
			forceDialog = true;
		}
		if (XPRSHelper.currentUser[&quot;type&quot;] == &quot;GUEST&quot; || nextUrl != &quot;&quot; || forceDialog){
			if (typeof YSBApp != &quot;undefined&quot;){
				YSBApp.send({&quot;action&quot;: &quot;session-expired&quot;, &quot;appid&quot;: &quot;ywebsite&quot;});
				return;
			}
			if (typeof ExternalLogin != &quot;undefined&quot;){
				if (typeof SpimeDualView != &quot;undefined&quot;){
					SpimeDualView.handleNavigationConfirmation = false;
				}
				if (form == &quot;login&quot;){
					window.location.href = ExternalLogin.loginUrl;
				}else{
					window.location.href = ExternalLogin.registerUrl;
				}
				return
			}
			if (typeof LoginModule == &quot;undefined&quot;){
			 var login_css = $(&quot;&lt;link&gt;&quot;);
			 login_css.attr({ 
			      rel:  &quot;stylesheet&quot;,
			      type: &quot;text/css&quot;,
			      href: XPRSHelper.getServerPath() + &quot;/css/login.css?v=141&quot;
			    });
			 $(&quot;head&quot;).append(login_css);
</P><P>			 
			 $.ajax({
				  url: XPRSHelper.getServerPath() + &quot;/js/login.js?v=141&quot;,
				  dataType: 'script',
				  success: function(){
					  setTimeout(function(){
						  LoginModule.popLogin(callbackFunc,form,cancelCallback);
					  },250); 
				  },
				  cache: true
				  //async: false
				});
		}else{
				LoginModule.popLogin(callbackFunc,form,cancelCallback);
			}
		}else{
			if (typeof callbackFunc != &quot;undefined&quot;){
				callbackFunc();
			}
		}
	});
};
</P><P>XPRSHelper.md5 = function(str){
		  //  discuss at: <A rel="nofollow" class="external free" href="http://phpjs.org/functions/md5/">http://phpjs.org/functions/md5/</A>
		  // original by: Webtoolkit.info (<A rel="nofollow" class="external free" href="http://www.webtoolkit.info/">http://www.webtoolkit.info/</A>)
		  // improved by: Michael White (<A rel="nofollow" class="external free" href="http://getsprink.com">http://getsprink.com</A>)
		  // improved by: Jack
		  // improved by: Kevin van Zonneveld (<A rel="nofollow" class="external free" href="http://kevin.vanzonneveld.net">http://kevin.vanzonneveld.net</A>)
		  //    input by: Brett Zamir (<A rel="nofollow" class="external free" href="http://brett-zamir.me">http://brett-zamir.me</A>)
		  // bugfixed by: Kevin van Zonneveld (<A rel="nofollow" class="external free" href="http://kevin.vanzonneveld.net">http://kevin.vanzonneveld.net</A>)
		  //  depends on: utf8_encode
		  //   example 1: md5('Kevin van Zonneveld');
		  //   returns 1: '6e658d4bfcb59cc13f96c14450ac40b9'
</P><P>		  var xl;
</P><P>		  var rotateLeft = function(lValue, iShiftBits) {
		    return (lValue &lt;&lt; iShiftBits) | (lValue &gt;&gt;&gt; (32 - iShiftBits));
		  };
</P><P>		  var addUnsigned = function(lX, lY) {
		    var lX4, lY4, lX8, lY8, lResult;
		    lX8 = (lX &amp; 0x80000000);
		    lY8 = (lY &amp; 0x80000000);
		    lX4 = (lX &amp; 0x40000000);
		    lY4 = (lY &amp; 0x40000000);
		    lResult = (lX &amp; 0x3FFFFFFF) + (lY &amp; 0x3FFFFFFF);
		    if (lX4 &amp; lY4) {
		      return (lResult ^ 0x80000000 ^ lX8 ^ lY8);
		    }
		    if (lX4 | lY4) {
		      if (lResult &amp; 0x40000000) {
		        return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);
		      } else {
		        return (lResult ^ 0x40000000 ^ lX8 ^ lY8);
		      }
		    } else {
		      return (lResult ^ lX8 ^ lY8);
		    }
		  };
</P><P>		  var _F = function(x, y, z) {
		    return (x &amp; y) | ((~x) &amp; z);
		  };
		  var _G = function(x, y, z) {
		    return (x &amp; z) | (y &amp; (~z));
		  };
		  var _H = function(x, y, z) {
		    return (x ^ y ^ z);
		  };
		  var _I = function(x, y, z) {
		    return (y ^ (x | (~z)));
		  };
</P><P>		  var _FF = function(a, b, c, d, x, s, ac) {
		    a = addUnsigned(a, addUnsigned(addUnsigned(_F(b, c, d), x), ac));
		    return addUnsigned(rotateLeft(a, s), b);
		  };
</P><P>		  var _GG = function(a, b, c, d, x, s, ac) {
		    a = addUnsigned(a, addUnsigned(addUnsigned(_G(b, c, d), x), ac));
		    return addUnsigned(rotateLeft(a, s), b);
		  };
</P><P>		  var _HH = function(a, b, c, d, x, s, ac) {
		    a = addUnsigned(a, addUnsigned(addUnsigned(_H(b, c, d), x), ac));
		    return addUnsigned(rotateLeft(a, s), b);
		  };
</P><P>		  var _II = function(a, b, c, d, x, s, ac) {
		    a = addUnsigned(a, addUnsigned(addUnsigned(_I(b, c, d), x), ac));
		    return addUnsigned(rotateLeft(a, s), b);
		  };
</P><P>		  var convertToWordArray = function(str) {
		    var lWordCount;
		    var lMessageLength = str.length;
		    var lNumberOfWords_temp1 = lMessageLength + 8;
		    var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - (lNumberOfWords_temp1 % 64)) / 64;
		    var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;
		    var lWordArray = new Array(lNumberOfWords - 1);
		    var lBytePosition = 0;
		    var lByteCount = 0;
		    while (lByteCount &lt; lMessageLength) {
		      lWordCount = (lByteCount - (lByteCount % 4)) / 4;
		      lBytePosition = (lByteCount % 4) * 8;
		      lWordArray[lWordCount] = (lWordArray[lWordCount] | (str.charCodeAt(lByteCount) &lt;&lt; lBytePosition));
		      lByteCount++;
		    }
		    lWordCount = (lByteCount - (lByteCount % 4)) / 4;
		    lBytePosition = (lByteCount % 4) * 8;
		    lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80 &lt;&lt; lBytePosition);
		    lWordArray[lNumberOfWords - 2] = lMessageLength &lt;&lt; 3;
		    lWordArray[lNumberOfWords - 1] = lMessageLength &gt;&gt;&gt; 29;
		    return lWordArray;
		  };
</P><P>		  var wordToHex = function(lValue) {
		    var wordToHexValue = <I>,</I>
		      wordToHexValue_temp = <I>,</I>
		      lByte, lCount;
		    for (lCount = 0; lCount &lt;= 3; lCount++) {
		      lByte = (lValue &gt;&gt;&gt; (lCount * 8)) &amp; 255;
		      wordToHexValue_temp = '0' + lByte.toString(16);
		      wordToHexValue = wordToHexValue + wordToHexValue_temp.substr(wordToHexValue_temp.length - 2, 2);
		    }
		    return wordToHexValue;
		  };
</P><P>		  var x = [],
		    k, AA, BB, CC, DD, a, b, c, d, S11 = 7,
		    S12 = 12,
		    S13 = 17,
		    S14 = 22,
		    S21 = 5,
		    S22 = 9,
		    S23 = 14,
		    S24 = 20,
		    S31 = 4,
		    S32 = 11,
		    S33 = 16,
		    S34 = 23,
		    S41 = 6,
		    S42 = 10,
		    S43 = 15,
		    S44 = 21;
</P><P>		  str = XPRSHelper.utf8_encode(str);
		  x = convertToWordArray(str);
		  a = 0x67452301;
		  b = 0xEFCDAB89;
		  c = 0x98BADCFE;
		  d = 0x10325476;
</P><P>		  xl = x.length;
		  for (k = 0; k &lt; xl; k += 16) {
		    AA = a;
		    BB = b;
		    CC = c;
		    DD = d;
		    a = _FF(a, b, c, d, x[k + 0], S11, 0xD76AA478);
		    d = _FF(d, a, b, c, x[k + 1], S12, 0xE8C7B756);
		    c = _FF(c, d, a, b, x[k + 2], S13, 0x242070DB);
		    b = _FF(b, c, d, a, x[k + 3], S14, 0xC1BDCEEE);
		    a = _FF(a, b, c, d, x[k + 4], S11, 0xF57C0FAF);
		    d = _FF(d, a, b, c, x[k + 5], S12, 0x4787C62A);
		    c = _FF(c, d, a, b, x[k + 6], S13, 0xA8304613);
		    b = _FF(b, c, d, a, x[k + 7], S14, 0xFD469501);
		    a = _FF(a, b, c, d, x[k + 8], S11, 0x698098D8);
		    d = _FF(d, a, b, c, x[k + 9], S12, 0x8B44F7AF);
		    c = _FF(c, d, a, b, x[k + 10], S13, 0xFFFF5BB1);
		    b = _FF(b, c, d, a, x[k + 11], S14, 0x895CD7BE);
		    a = _FF(a, b, c, d, x[k + 12], S11, 0x6B901122);
		    d = _FF(d, a, b, c, x[k + 13], S12, 0xFD987193);
		    c = _FF(c, d, a, b, x[k + 14], S13, 0xA679438E);
		    b = _FF(b, c, d, a, x[k + 15], S14, 0x49B40821);
		    a = _GG(a, b, c, d, x[k + 1], S21, 0xF61E2562);
		    d = _GG(d, a, b, c, x[k + 6], S22, 0xC040B340);
		    c = _GG(c, d, a, b, x[k + 11], S23, 0x265E5A51);
		    b = _GG(b, c, d, a, x[k + 0], S24, 0xE9B6C7AA);
		    a = _GG(a, b, c, d, x[k + 5], S21, 0xD62F105D);
		    d = _GG(d, a, b, c, x[k + 10], S22, 0x2441453);
		    c = _GG(c, d, a, b, x[k + 15], S23, 0xD8A1E681);
		    b = _GG(b, c, d, a, x[k + 4], S24, 0xE7D3FBC8);
		    a = _GG(a, b, c, d, x[k + 9], S21, 0x21E1CDE6);
		    d = _GG(d, a, b, c, x[k + 14], S22, 0xC33707D6);
		    c = _GG(c, d, a, b, x[k + 3], S23, 0xF4D50D87);
		    b = _GG(b, c, d, a, x[k + 8], S24, 0x455A14ED);
		    a = _GG(a, b, c, d, x[k + 13], S21, 0xA9E3E905);
		    d = _GG(d, a, b, c, x[k + 2], S22, 0xFCEFA3F8);
		    c = _GG(c, d, a, b, x[k + 7], S23, 0x676F02D9);
		    b = _GG(b, c, d, a, x[k + 12], S24, 0x8D2A4C8A);
		    a = _HH(a, b, c, d, x[k + 5], S31, 0xFFFA3942);
		    d = _HH(d, a, b, c, x[k + 8], S32, 0x8771F681);
		    c = _HH(c, d, a, b, x[k + 11], S33, 0x6D9D6122);
		    b = _HH(b, c, d, a, x[k + 14], S34, 0xFDE5380C);
		    a = _HH(a, b, c, d, x[k + 1], S31, 0xA4BEEA44);
		    d = _HH(d, a, b, c, x[k + 4], S32, 0x4BDECFA9);
		    c = _HH(c, d, a, b, x[k + 7], S33, 0xF6BB4B60);
		    b = _HH(b, c, d, a, x[k + 10], S34, 0xBEBFBC70);
		    a = _HH(a, b, c, d, x[k + 13], S31, 0x289B7EC6);
		    d = _HH(d, a, b, c, x[k + 0], S32, 0xEAA127FA);
		    c = _HH(c, d, a, b, x[k + 3], S33, 0xD4EF3085);
		    b = _HH(b, c, d, a, x[k + 6], S34, 0x4881D05);
		    a = _HH(a, b, c, d, x[k + 9], S31, 0xD9D4D039);
		    d = _HH(d, a, b, c, x[k + 12], S32, 0xE6DB99E5);
		    c = _HH(c, d, a, b, x[k + 15], S33, 0x1FA27CF8);
		    b = _HH(b, c, d, a, x[k + 2], S34, 0xC4AC5665);
		    a = _II(a, b, c, d, x[k + 0], S41, 0xF4292244);
		    d = _II(d, a, b, c, x[k + 7], S42, 0x432AFF97);
		    c = _II(c, d, a, b, x[k + 14], S43, 0xAB9423A7);
		    b = _II(b, c, d, a, x[k + 5], S44, 0xFC93A039);
		    a = _II(a, b, c, d, x[k + 12], S41, 0x655B59C3);
		    d = _II(d, a, b, c, x[k + 3], S42, 0x8F0CCC92);
		    c = _II(c, d, a, b, x[k + 10], S43, 0xFFEFF47D);
		    b = _II(b, c, d, a, x[k + 1], S44, 0x85845DD1);
		    a = _II(a, b, c, d, x[k + 8], S41, 0x6FA87E4F);
		    d = _II(d, a, b, c, x[k + 15], S42, 0xFE2CE6E0);
		    c = _II(c, d, a, b, x[k + 6], S43, 0xA3014314);
		    b = _II(b, c, d, a, x[k + 13], S44, 0x4E0811A1);
		    a = _II(a, b, c, d, x[k + 4], S41, 0xF7537E82);
		    d = _II(d, a, b, c, x[k + 11], S42, 0xBD3AF235);
		    c = _II(c, d, a, b, x[k + 2], S43, 0x2AD7D2BB);
		    b = _II(b, c, d, a, x[k + 9], S44, 0xEB86D391);
		    a = addUnsigned(a, AA);
		    b = addUnsigned(b, BB);
		    c = addUnsigned(c, CC);
		    d = addUnsigned(d, DD);
		  }
</P><P>		  var temp = wordToHex(a) + wordToHex(b) + wordToHex(c) + wordToHex(d);
</P><P>		  return temp.toLowerCase();
</P><P>};
</P><P>XPRSHelper.isTransparentColor = function(color){
	if (color === undefined){
		return false;
	}
	var isTransparent = color == &quot;rgba(0, 0, 0, 0)&quot; || color == &quot;transparent&quot;;
	if (color.indexOf(&quot;rgba&quot;) != -1 &amp;&amp; color.indexOf(&quot;, 0)&quot;) != -1){
		isTransparent = true;
	}
	return isTransparent
};
</P><P>XPRSHelper.checkBrowserSupport = function(){
	var currentBrowser = XPRSHelper.getBrowser();
	if (currentBrowser.toLowerCase().indexOf(&quot;chrome&quot;) == -1){
		//We does not support your browser for the time being please download chrome
	}
};
</P><P>XPRSHelper.getBrowser = function(){
	var ua= navigator.userAgent, tem, 
	M= ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
	if(/trident/i.test(M[1])){
	    tem=  /\brv[ :]+(\d+)/g.exec(ua) || [];
	    return 'IE '+(tem[1] || <I>);</I>
	}
	if(M[1]=== 'Chrome'){
	    tem= ua.match(/\bOPR\/(\d+)/);
	    if(tem!= null) return 'Opera '+tem[1];
	}
	M= M[2]? [M[1], M[2]]: [navigator.appName, navigator.appVersion, '-?'];
	if((tem= ua.match(/version\/(\d+)/i))!= null) M.splice(1, 1, tem[1]);
	return M.join(' ');
};
</P><P>//
//XPRSHelper.MD5 = function(s){
//	    function L(k, d) {
//	        return (k &lt;&lt; d) | (k &gt;&gt;&gt; (32 - d))
//	    }
//
//	    function K(G, k) {
//	        var I, d, F, H, x;
//	        F = (G &amp; 2147483648);
//	        H = (k &amp; 2147483648);
//	        I = (G &amp; 1073741824);
//	        d = (k &amp; 1073741824);
//	        x = (G &amp; 1073741823) + (k &amp; 1073741823);
//	        if (I &amp; d) {
//	            return (x ^ 2147483648 ^ F ^ H)
//	        }
//	        if (I | d) {
//	            if (x &amp; 1073741824) {
//	                return (x ^ 3221225472 ^ F ^ H)
//	            } else {
//	                return (x ^ 1073741824 ^ F ^ H)
//	            }
//	        } else {
//	            return (x ^ F ^ H)
//	        }
//	    }
//
//	    function r(d, F, k) {
//	        return (d &amp; F) | ((~d) &amp; k)
//	    }
//
//	    function q(d, F, k) {
//	        return (d &amp; k) | (F &amp; (~k))
//	    }
//
//	    function p(d, F, k) {
//	        return (d ^ F ^ k)
//	    }
//
//	    function n(d, F, k) {
//	        return (F ^ (d | (~k)))
//	    }
//
//	    function u(G, F, aa, Z, k, H, I) {
//	        G = K(G, K(K(r(F, aa, Z), k), I));
//	        return K(L(G, H), F)
//	    }
//
//	    function f(G, F, aa, Z, k, H, I) {
//	        G = K(G, K(K(q(F, aa, Z), k), I));
//	        return K(L(G, H), F)
//	    }
//
//	    function D(G, F, aa, Z, k, H, I) {
//	        G = K(G, K(K(p(F, aa, Z), k), I));
//	        return K(L(G, H), F)
//	    }
//
//	    function t(G, F, aa, Z, k, H, I) {
//	        G = K(G, K(K(n(F, aa, Z), k), I));
//	        return K(L(G, H), F)
//	    }
//
//	    function e(G) {
//	        var Z;
//	        var F = G.length;
//	        var x = F + 8;
//	        var k = (x - (x % 64)) / 64;
//	        var I = (k + 1) * 16;
//	        var aa = Array(I - 1);
//	        var d = 0;
//	        var H = 0;
//	        while (H &lt; F) {
//	            Z = (H - (H % 4)) / 4;
//	            d = (H % 4) * 8;
//	            aa[Z] = (aa[Z] | (G.charCodeAt(H) &lt;&lt; d));
//	            H++
//	        }
//	        Z = (H - (H % 4)) / 4;
//	        d = (H % 4) * 8;
//	        aa[Z] = aa[Z] | (128 &lt;&lt; d);
//	        aa[I - 2] = F &lt;&lt; 3;
//	        aa[I - 1] = F &gt;&gt;&gt; 29;
//	        return aa
//	    }
//
//	    function B(x) {
//	        var k = &quot;&quot;,
//	            F = &quot;&quot;,
//	            G, d;
//	        for (d = 0; d &lt;= 3; d++) {
//	            G = (x &gt;&gt;&gt; (d * 8)) &amp; 255;
//	            F = &quot;0&quot; + G.toString(16);
//	            k = k + F.substr(F.length - 2, 2)
//	        }
//	        return k
//	    }
//
//	    function J(k) {
//	        k = k.replace(/rn/g, &quot;n&quot;);
//	        var d = &quot;&quot;;
//	        for (var F = 0; F &lt; k.length; F++) {
//	            var x = k.charCodeAt(F);
//	            if (x &lt; 128) {
//	                d += String.fromCharCode(x)
//	            } else {
//	                if ((x &gt; 127) &amp;&amp; (x &lt; 2048)) {
//	                    d += String.fromCharCode((x &gt;&gt; 6) | 192);
//	                    d += String.fromCharCode((x &amp; 63) | 128)
//	                } else {
//	                    d += String.fromCharCode((x &gt;&gt; 12) | 224);
//	                    d += String.fromCharCode(((x &gt;&gt; 6) &amp; 63) | 128);
//	                    d += String.fromCharCode((x &amp; 63) | 128)
//	                }
//	            }
//	        }
//	        return d
//	    }
//	    var C = Array();
//	    var P, h, E, v, g, Y, X, W, V;
//	    var S = 7,
//	        Q = 12,
//	        N = 17,
//	        M = 22;
//	    var A = 5,
//	        z = 9,
//	        y = 14,
//	        w = 20;
//	    var o = 4,
//	        m = 11,
//	        l = 16,
//	        j = 23;
//	    var U = 6,
//	        T = 10,
//	        R = 15,
//	        O = 21;
//	    s = J(s);
//	    C = e(s);
//	    Y = 1732584193;
//	    X = 4023233417;
//	    W = 2562383102;
//	    V = 271733878;
//	    for (P = 0; P &lt; C.length; P += 16) {
//	        h = Y;
//	        E = X;
//	        v = W;
//	        g = V;
//	        Y = u(Y, X, W, V, C[P + 0], S, 3614090360);
//	        V = u(V, Y, X, W, C[P + 1], Q, 3905402710);
//	        W = u(W, V, Y, X, C[P + 2], N, 606105819);
//	        X = u(X, W, V, Y, C[P + 3], M, 3250441966);
//	        Y = u(Y, X, W, V, C[P + 4], S, 4118548399);
//	        V = u(V, Y, X, W, C[P + 5], Q, 1200080426);
//	        W = u(W, V, Y, X, C[P + 6], N, 2821735955);
//	        X = u(X, W, V, Y, C[P + 7], M, 4249261313);
//	        Y = u(Y, X, W, V, C[P + 8], S, 1770035416);
//	        V = u(V, Y, X, W, C[P + 9], Q, 2336552879);
//	        W = u(W, V, Y, X, C[P + 10], N, 4294925233);
//	        X = u(X, W, V, Y, C[P + 11], M, 2304563134);
//	        Y = u(Y, X, W, V, C[P + 12], S, 1804603682);
//	        V = u(V, Y, X, W, C[P + 13], Q, 4254626195);
//	        W = u(W, V, Y, X, C[P + 14], N, 2792965006);
//	        X = u(X, W, V, Y, C[P + 15], M, 1236535329);
//	        Y = f(Y, X, W, V, C[P + 1], A, 4129170786);
//	        V = f(V, Y, X, W, C[P + 6], z, 3225465664);
//	        W = f(W, V, Y, X, C[P + 11], y, 643717713);
//	        X = f(X, W, V, Y, C[P + 0], w, 3921069994);
//	        Y = f(Y, X, W, V, C[P + 5], A, 3593408605);
//	        V = f(V, Y, X, W, C[P + 10], z, 38016083);
//	        W = f(W, V, Y, X, C[P + 15], y, 3634488961);
//	        X = f(X, W, V, Y, C[P + 4], w, 3889429448);
//	        Y = f(Y, X, W, V, C[P + 9], A, 568446438);
//	        V = f(V, Y, X, W, C[P + 14], z, 3275163606);
//	        W = f(W, V, Y, X, C[P + 3], y, 4107603335);
//	        X = f(X, W, V, Y, C[P + 8], w, 1163531501);
//	        Y = f(Y, X, W, V, C[P + 13], A, 2850285829);
//	        V = f(V, Y, X, W, C[P + 2], z, 4243563512);
//	        W = f(W, V, Y, X, C[P + 7], y, 1735328473);
//	        X = f(X, W, V, Y, C[P + 12], w, 2368359562);
//	        Y = D(Y, X, W, V, C[P + 5], o, 4294588738);
//	        V = D(V, Y, X, W, C[P + 8], m, 2272392833);
//	        W = D(W, V, Y, X, C[P + 11], l, 1839030562);
//	        X = D(X, W, V, Y, C[P + 14], j, 4259657740);
//	        Y = D(Y, X, W, V, C[P + 1], o, 2763975236);
//	        V = D(V, Y, X, W, C[P + 4], m, 1272893353);
//	        W = D(W, V, Y, X, C[P + 7], l, 4139469664);
//	        X = D(X, W, V, Y, C[P + 10], j, 3200236656);
//	        Y = D(Y, X, W, V, C[P + 13], o, 681279174);
//	        V = D(V, Y, X, W, C[P + 0], m, 3936430074);
//	        W = D(W, V, Y, X, C[P + 3], l, 3572445317);
//	        X = D(X, W, V, Y, C[P + 6], j, 76029189);
//	        Y = D(Y, X, W, V, C[P + 9], o, 3654602809);
//	        V = D(V, Y, X, W, C[P + 12], m, 3873151461);
//	        W = D(W, V, Y, X, C[P + 15], l, 530742520);
//	        X = D(X, W, V, Y, C[P + 2], j, 3299628645);
//	        Y = t(Y, X, W, V, C[P + 0], U, 4096336452);
//	        V = t(V, Y, X, W, C[P + 7], T, 1126891415);
//	        W = t(W, V, Y, X, C[P + 14], R, 2878612391);
//	        X = t(X, W, V, Y, C[P + 5], O, 4237533241);
//	        Y = t(Y, X, W, V, C[P + 12], U, 1700485571);
//	        V = t(V, Y, X, W, C[P + 3], T, 2399980690);
//	        W = t(W, V, Y, X, C[P + 10], R, 4293915773);
//	        X = t(X, W, V, Y, C[P + 1], O, 2240044497);
//	        Y = t(Y, X, W, V, C[P + 8], U, 1873313359);
//	        V = t(V, Y, X, W, C[P + 15], T, 4264355552);
//	        W = t(W, V, Y, X, C[P + 6], R, 2734768916);
//	        X = t(X, W, V, Y, C[P + 13], O, 1309151649);
//	        Y = t(Y, X, W, V, C[P + 4], U, 4149444226);
//	        V = t(V, Y, X, W, C[P + 11], T, 3174756917);
//	        W = t(W, V, Y, X, C[P + 2], R, 718787259);
//	        X = t(X, W, V, Y, C[P + 9], O, 3951481745);
//	        Y = K(Y, h);
//	        X = K(X, E);
//	        W = K(W, v);
//	        V = K(V, g)
//	    }
//	    var i = B(Y) + B(X) + B(W) + B(V);
//	    return i.toLowerCase()
//};
</P><P>XPRSHelper.slugify = function(text){
</P><PRE> return text.toString().toLowerCase()
   .replace(/\s+/g, '-')           // Replace spaces with -
   .replace(/[^\w\-]+/g, <I>)       // Remove all non-word chars</I>
   .replace(/\-\-+/g, '-')         // Replace multiple - with single -
   .replace(/^-+/, <I>)             // Trim - from start of text</I>
   .replace(/-+$/, <I>);            // Trim - from end of text</I></PRE><P>}
</P><P>XPRSHelper.isChrome = function(){
	var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') &gt;= 0;
</P><PRE>   // Opera 8.0+ (UA detection to detect Blink/v8-powered Opera)
</PRE><P>	//var isFirefox = typeof InstallTrigger !== 'undefined';   // Firefox 1.0+
	//var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') &gt; 0;
	    // At least Safari 3+: &quot;[object HTMLElementConstructor]&quot;
	var isChrome = !!window.chrome &amp;&amp; !isOpera;     // Chrome 1+ 
	return isChrome;
	//var isIE = /*@cc_on!@*/false || !!document.documentMode; // At least IE6
}
</P><P>XPRSHelper.utf8_encode = function (argString) {
	  //  discuss at: <A rel="nofollow" class="external free" href="http://phpjs.org/functions/utf8_encode/">http://phpjs.org/functions/utf8_encode/</A>
	  // original by: Webtoolkit.info (<A rel="nofollow" class="external free" href="http://www.webtoolkit.info/">http://www.webtoolkit.info/</A>)
	  // improved by: Kevin van Zonneveld (<A rel="nofollow" class="external free" href="http://kevin.vanzonneveld.net">http://kevin.vanzonneveld.net</A>)
	  // improved by: sowberry
	  // improved by: Jack
	  // improved by: Yves Sucaet
	  // improved by: kirilloid
	  // bugfixed by: Onno Marsman
	  // bugfixed by: Onno Marsman
	  // bugfixed by: Ulrich
	  // bugfixed by: Rafal Kukawski
	  // bugfixed by: kirilloid
	  //   example 1: utf8_encode('Kevin van Zonneveld');
	  //   returns 1: 'Kevin van Zonneveld'
</P><P>	  if (argString === null || typeof argString === 'undefined') {
	    return <I>;</I>
	  }
</P><P>	  var string = (argString + <I>); // .replace(/\r\n/g, &quot;\n&quot;).replace(/\r/g, &quot;\n&quot;);</I>
	  var utftext = <I>,</I>
	    start, end, stringl = 0;
</P><P>	  start = end = 0;
	  stringl = string.length;
	  for (var n = 0; n &lt; stringl; n++) {
	    var c1 = string.charCodeAt(n);
	    var enc = null;
</P><P>	    if (c1 &lt; 128) {
	      end++;
	    } else if (c1 &gt; 127 &amp;&amp; c1 &lt; 2048) {
	      enc = String.fromCharCode(
	        (c1 &gt;&gt; 6) | 192, (c1 &amp; 63) | 128
	      );
	    } else if (c1 &amp; 0xF800 != 0xD800) {
	      enc = String.fromCharCode(
	        (c1 &gt;&gt; 12) | 224, ((c1 &gt;&gt; 6) &amp; 63) | 128, (c1 &amp; 63) | 128
	      );
	    } else { // surrogate pairs
	      if (c1 &amp; 0xFC00 != 0xD800) {
	        throw new RangeError('Unmatched trail surrogate at ' + n);
	      }
	      var c2 = string.charCodeAt(++n);
	      if (c2 &amp; 0xFC00 != 0xDC00) {
	        throw new RangeError('Unmatched lead surrogate at ' + (n - 1));
	      }
	      c1 = ((c1 &amp; 0x3FF) &lt;&lt; 10) + (c2 &amp; 0x3FF) + 0x10000;
	      enc = String.fromCharCode(
	        (c1 &gt;&gt; 18) | 240, ((c1 &gt;&gt; 12) &amp; 63) | 128, ((c1 &gt;&gt; 6) &amp; 63) | 128, (c1 &amp; 63) | 128
	      );
	    }
	    if (enc !== null) {
	      if (end &gt; start) {
	        utftext += string.slice(start, end);
	      }
	      utftext += enc;
	      start = end = n + 1;
	    }
	  }
</P><P>	  if (end &gt; start) {
	    utftext += string.slice(start, stringl);
	  }
</P><P>	  return utftext;
	};
</P><P>	/*
	 * Date Format 1.2.3
	 * (c) 2007-2009 Steven Levithan &lt;stevenlevithan.com&gt;
	 * MIT license
	 *
	 * Includes enhancements by Scott Trenda &lt;scott.trenda.net&gt;
	 * and Kris Kowal &lt;cixar.com/~kris.kowal/&gt;
	 *
	 * Accepts a date, a mask, or a date and a mask.
	 * Returns a formatted version of the given date.
	 * The date defaults to the current date/time.
	 * The mask defaults to dateFormat.masks.default.
	 */
</P><P>	var dateFormat = function () {
		var	token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|&quot;[^&quot;]*&quot;|'[^']*'/g,
			timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
			timezoneClip = /[^-+\dA-Z]/g,
			pad = function (val, len) {
				val = String(val);
				len = len || 2;
				while (val.length &lt; len) val = &quot;0&quot; + val;
				return val;
			};
</P><P>		// Regexes and supporting functions are cached through closure
		return function (date, mask, utc) {
			var dF = dateFormat;
</P><P>			// You can't provide utc if you skip other args (use the &quot;UTC:&quot; mask prefix)
			if (arguments.length == 1 &amp;&amp; Object.prototype.toString.call(date) == &quot;[object String]&quot; &amp;&amp; !/\d/.test(date)) {
				mask = date;
				date = undefined;
			}
</P><P>			// Passing date through Date applies Date.parse, if necessary
			date = date ? new Date(date) : new Date;
			if (isNaN(date)) throw SyntaxError(&quot;invalid date&quot;);
</P><P>			mask = String(dF.masks[mask] || mask || dF.masks[&quot;default&quot;]);
</P><P>			// Allow setting the utc argument via the mask
			if (mask.slice(0, 4) == &quot;UTC:&quot;) {
				mask = mask.slice(4);
				utc = true;
			}
</P><P>			var	_ = utc ? &quot;getUTC&quot; : &quot;get&quot;,
				d = date[_ + &quot;Date&quot;](),
				D = date[_ + &quot;Day&quot;](),
				m = date[_ + &quot;Month&quot;](),
				y = date[_ + &quot;FullYear&quot;](),
				H = date[_ + &quot;Hours&quot;](),
				M = date[_ + &quot;Minutes&quot;](),
				s = date[_ + &quot;Seconds&quot;](),
				L = date[_ + &quot;Milliseconds&quot;](),
				o = utc ? 0 : date.getTimezoneOffset(),
				flags = {
					d:    d,
					dd:   pad(d),
					ddd:  dF.i18n.dayNames[D],
					dddd: dF.i18n.dayNames[D + 7],
					m:    m + 1,
					mm:   pad(m + 1),
					mmm:  dF.i18n.monthNames[m],
					mmmm: dF.i18n.monthNames[m + 12],
					yy:   String(y).slice(2),
					yyyy: y,
					h:    H % 12 || 12,
					hh:   pad(H % 12 || 12),
					H:    H,
					HH:   pad(H),
					M:    M,
					MM:   pad(M),
					s:    s,
					ss:   pad(s),
					l:    pad(L, 3),
					L:    pad(L &gt; 99 ? Math.round(L / 10) : L),
					t:    H &lt; 12 ? &quot;a&quot;  : &quot;p&quot;,
					tt:   H &lt; 12 ? &quot;am&quot; : &quot;pm&quot;,
					T:    H &lt; 12 ? &quot;A&quot;  : &quot;P&quot;,
					TT:   H &lt; 12 ? &quot;AM&quot; : &quot;PM&quot;,
					Z:    utc ? &quot;UTC&quot; : (String(date).match(timezone) || [&quot;&quot;]).pop().replace(timezoneClip, &quot;&quot;),
					o:    (o &gt; 0 ? &quot;-&quot; : &quot;+&quot;) + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),
					S:    [&quot;th&quot;, &quot;st&quot;, &quot;nd&quot;, &quot;rd&quot;][d % 10 &gt; 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]
				};
</P><P>			return mask.replace(token, function ($0) {
				return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);
			});
		};
	}();
</P><P>	// Some common format strings
	dateFormat.masks = {
		&quot;default&quot;:      &quot;ddd mmm dd yyyy HH:MM:ss&quot;,
		shortDate:      &quot;m/d/yy&quot;,
		mediumDate:     &quot;mmm d, yyyy&quot;,
		longDate:       &quot;mmmm d, yyyy&quot;,
		fullDate:       &quot;dddd, mmmm d, yyyy&quot;,
		shortTime:      &quot;h:MM TT&quot;,
		mediumTime:     &quot;h:MM:ss TT&quot;,
		longTime:       &quot;h:MM:ss TT Z&quot;,
		isoDate:        &quot;yyyy-mm-dd&quot;,
		isoTime:        &quot;HH:MM:ss&quot;,
		isoDateTime:    &quot;yyyy-mm-dd'T'HH:MM:ss&quot;,
		isoUtcDateTime: &quot;UTC:yyyy-mm-dd'T'HH:MM:ss'Z'&quot;
	};
</P><P>	// Internationalization strings
	dateFormat.i18n = {
		dayNames: [
			&quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;,
			&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;
		],
		monthNames: [
			&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;,
			&quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;
		]
	};
</P><P>	// For convenience...
	Date.prototype.format = function (mask, utc) {
		return dateFormat(this, mask, utc);
	};
</P><P>
	XPRSHelper.shortUuid = function(prefix) {
		if (typeof prefix == &quot;undefined&quot;){
			prefix = &quot;element&quot;;
		}
		return prefix + '-xxxxxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
			var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r &amp; 0x3 | 0x8);
			return v.toString(16);
		});
	};
</P></DIV></DIV></DIV></DIV></DIV></BODY></HTML>