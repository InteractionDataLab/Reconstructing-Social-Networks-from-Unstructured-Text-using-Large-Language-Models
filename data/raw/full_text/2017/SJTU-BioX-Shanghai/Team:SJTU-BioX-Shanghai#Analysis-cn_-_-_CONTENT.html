<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_SJTU-BioX-Shanghai_Analysis-cn skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:SJTU-BioX-Shanghai/Analysis-cn</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><DIV class="fluid-bg full-bg-body"><DIV class="full-bg mainbox depth-1-half full-bg-0"><NAV class="navbar navbar1 navbar-expand-lg navbar-dark"><DIV class="container"><DIV class="collapse navbar-collapse" id="navbarNav1"><UL class="navbar-nav mr-auto"><LI class="nav-item"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Description-cn" class="nav-link">项目</A></LI><LI class="nav-item"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Notebook-cn" class="nav-link">生物实验</A></LI><LI class="nav-item active"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Loader-cn" class="nav-link">设备</A></LI><LI class="nav-item"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Model-cn" class="nav-link">建模</A></LI><LI class="nav-item"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/HP-cn" class="nav-link">社会实践</A></LI><LI class="nav-item"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Team-cn" class="nav-link">团队</A></LI></UL><UL class="navbar-nav ml-auto"><LI class="nav-item"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Analysis" class="nav-link jtzw">English</A></LI></UL></DIV></DIV></NAV><DIV class="navbox"><NAV class="navbar navbar3 navbar-dark"><DIV class="container"><A class="navbar-brand" href="#">设备</A></DIV></NAV><NAV class="navbar navbar2 navbar-expand-lg navbar-dark"><DIV class="container"><DIV class="nav2-brand hide-nav2-brand"><A class="navbar-brand" href="#">设备</A></DIV><DIV class="collapse navbar-collapse " id="navbarNav2"><UL class="navbar-nav mr-auto"><LI class="nav-item"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Loader-cn" class="nav-link">细菌载体</A></LI><LI class="nav-item"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Detector-cn" class="nav-link">检测装置</A></LI><LI class="nav-item active"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Analysis-cn" class="nav-link">分析装置</A></LI><LI class="nav-item"><A href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Instruction-cn" class="nav-link">说明书</A></LI></UL></DIV></DIV></NAV></DIV></DIV><DIV class="big-head h1-my-responsive">分析装置</DIV><DIV class="container maink"><DIV class="container maintext"><DIV class="row"><DIV class="scrcol col-lg-3"><DIV class="scroll-box grey lighten-5"><NAV class="list-unstyled" id="navbar-left" role="navigation"><LI class="nav-item"><A class="nav-link" href="#section1">简介</A></LI><LI class="nav-item"><A class="nav-link" href="#section2">操作描述</A></LI><LI class="nav-item"><A class="nav-link" href="#section3">开发过程</A></LI><LI class="nav-item"><A class="nav-link" href="#section4">代码工作</A></LI><LI class="nav-item"><A class="nav-link" href="#section5">意义</A></LI></NAV></DIV></DIV><DIV class="col-12 col-lg-9"><DIV class="my-title h5-my-responsive" id="section1">简介</DIV><P>考虑到当代社会手机普及率之高，我们希望通过手机APP来实现生物学实验成果的大众化。这一过程中，手机APP充当了检测器和分析器的角色。基于前期实验室的工作，多种类型重金属离子可以用来表达不同颜色的色素蛋白，并且颜色深浅与离子浓度有关。APP可以对色素蛋白所显示颜色进行分析，得出反应离子的浓度，并实时展示给使用者，以在最短的时间，以最方便的形式，使用生物学的反应准确检测出相应离子浓度。</P><DIV class="my-title h5-my-responsive" id="section2">操作描述</DIV><P>APP的功能决定了它的操作流程。显然，我们开发的APP具备的功能是检测器和分析器，因此它的操作也只有两步：</P><P>1. 拍照或者选取照片；2. 返回相应离子浓度。</P><DIV class="my-title h5-my-responsive" id="section3">开发过程</DIV><P><STRONG>阶段一：灰度化探索</STRONG></P><P>为了对色素蛋白所表达颜色量化分析，我们需要将颜色种类及深浅转化为相应数学值。无疑，颜色空间是最适宜进行量化颜色的方式。</P><P>由于RGB是通用的面向硬件的颜色空间，因此我们从HSV、HIS、CMY、RGB等多种颜色空间中选择了RGB。然而初期尝试之后，我们发现RGB量化颜色时会将颜色分割为三个变量，这无法进行浓度-颜色二维关系的分析。于是，我们利用RGB值转化得到的灰度值作为新的量化变量。</P><P>在这一基础上，我们完成了第一个版本的APP，能够为使用者提供一张图片的平均灰度值。在我们将之应用于实验室的样品分析时发现了新的问题，反应区域只存在于所摄照片的一部分，这样得到的反应区域平均灰度值实际掺杂了多余区域的影响。为了消除这些多余区域对结果的影响，我们加入新的阈值控制的功能。</P><P>阈值控制的原理如下：多余区域的色彩背景为白色，灰度值相对于反应区域来说较高。在经过多次实验之后，在相似实验环境中，多余区域的灰度值可以大致确定范围，将之下限设定为阈值。对照片进行分析时，大于阈值的点将会被抛弃。由此，我们可以筛选出反应区域，得到较为准确的平均灰度值。至此，我们的第一版APP开发完成。</P><P><STRONG>阶段二：单蛋白反应体系</STRONG></P><P>当我们能够灰度化色素蛋白所表达颜色之后，我们开始尝试分析计算单蛋白反应体系中的离子浓度。</P><P>为了确定离子浓度与灰度值的二维函数关系，我们进行了实验室相关数据的采集。但是由于时间关系，我们并没有得到较多的数据样本。根据已得到的数据，我们推断他们的函数关系近似线性（如果能够采集更多数据，可对这一结果进行修正）。</P><DIV class="figure-intro"><TABLE class="table table-res table-res2 table-hover" align="center"><THEAD><TR><TD>Concentration ratio</TD><TD>1</TD><TD>1/2</TD><TD>1/4</TD><TD>1/8</TD><TD>1/16</TD><TD>1/32</TD></TR></THEAD><TBODY><TR><TD>Statistics from app analysis</TD><TD>76</TD><TD>82</TD><TD>102</TD><TD>123</TD><TD>125</TD><TD>Unable to distinguish</TD></TR></TBODY></TABLE></DIV><P>于是，我们产生了如下的设计思路。</P><P>1. 在相同实验环境下，离子浓度已知的标准对照组和未知的样品组同时进行显色反应。2. 使用APP进行拍照，并求出所有反应区域的灰度值。3. 利用拟合的方法求出标准对照组灰度值与离子浓度之间的函数关系式。4. 将样品组得到的灰度值代入上述关系式，求出样品组离子浓度。将所求得的离子浓度展示给使用者。</P><P>基于这一思路，我们完成了第二个版本的APP，能够在稳定实验环境下为使用者提供单蛋白反应体系的离子浓度。同时，由于这一计算过程对于稳定实验环境的要求，以及RGB颜色空间本身对光照环境的敏感性，我们衍生出了制作反应盒的思路 （详情参阅<A target="_blank" href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Detector-cn">检测装置</A>部分）. 在盒子的思路上进一步思考，由于对于盒子中反应的多个区域来说，环境总灰度大小近似，面积相同，因此对于反应区域平均灰度值的计算不存在影响。于是，我们将阶段一中所采取的阈值控制以筛选反应区域的操作放弃了。第二版的APP至此得以完善。</P><P><STRONG>阶段三：双蛋白反应体系</STRONG></P><P>在单蛋白反应体系设计思路的基础上，我们进行了双蛋白反应体系的探索。</P><P>由于离子种类的增加，变量由一个增加为两个，相应浓度-颜色函数关系也有二维增加为三维。类似于单蛋白反应体系函数关系的确定，我们需要大量数据来构建三维函数模型。但是，由于没能获取足够的实验室数据，我们只好放弃这一想法。但是，这并不能代表利用APP来计算离子浓度这一思路是错误的，在对于双蛋白反应体系的改进设想中有详细说明。由于在APP中分析数据的种种局限性，我们转而使用PC端的Matlab来进行双蛋白反应体系数据的处理和分析（详情参阅<A target="_blank" href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Color_Chart">色彩图表</A>部分）。
</P><DIV class="my-title h5-my-responsive" id="section4">代码工作</DIV><P>这一部分是实现上述思路的具体代码，请参考<A target="_blank" href="https://github.com/Z-NAVY/SJTU-BioX-ShangHai-2017">GitHub</A>上的源码。下面五点是代码部分的主要组成：</P><P>1. 拍照及自由选取照片；2. 求取RGB值及灰度值计算；3. 阈值控制筛选反应区域；4. 基于反应区域的图像分割；5. 单蛋白标准函数求取。</P><DIV class="my-title h5-my-responsive" id="section5">意义</DIV><P>这一颜色分析流程并不仅适用于我们团队的工作，它可以被今后的队伍广泛地借鉴和参考。比起实验室中的生物实验，APP与便携式反应容器能让非专业人士以最快最准的方式感受到生物实验的魅力，这对生物工作者具有重要意义。而类似这样的设计思路，会加快个性化医疗时代的来临。</P></DIV></DIV></DIV></DIV><DIV class="footer"><DIV class="container"><DIV class="row"><DIV class="footer-L"><A class="footer-text" href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Detector-cn"><SPAN class="direction">设备</SPAN><DIV class="title">
                                检测装置
                            </DIV></A></DIV><DIV class="footer-R"><A class="footer-text" href="https://2017.igem.org/Team:SJTU-BioX-Shanghai/Instruction-cn"><SPAN class="direction">设备</SPAN><DIV>
                                说明书
                            </DIV></A></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></BODY></HTML>