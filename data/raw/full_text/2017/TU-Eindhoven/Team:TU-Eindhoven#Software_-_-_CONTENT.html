<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_TU-Eindhoven_Software skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><DIV id="top_title"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:TU-Eindhoven/Software</SPAN></H1></DIV><DIV id="HQ_page"><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P><TITLE>Menu</TITLE><UL class="menu"><LI><A href="https://2017.igem.org/Team:TU-Eindhoven">Home</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Project">Project</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Project/Background" class="description">Background</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Project/Design" class="description">Design &amp; Parts</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Demonstrate" class="proof of concept">Proof of 
                   Concept</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/InterLab" class="interlab study">Interlab 
                   study</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Project/Protocols" class="protocols">Protocols</A></LI></UL><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Model">Model</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Model/2D_Simulation" class="2D simulation">2D Simulation</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Model/Rule_based_model" class="rule based model">Rule based 
                   model</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Software" class="software tool">Software Tool</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Results">Results</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Results/DNA" class="dry lab">DNA Results</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Results/Model" class="dry lab">Model Results</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Results/Medal_criteria" class="medial criteria">Medal Criteria</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Human_Practices">Human Practices</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Applied_Design" class="human practices">Application Scenario</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Collaborations" class="collaborations">Collaborations</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Engagement" class="outreach">Outreach</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Human_Practices/Safe_by_Design" class="safe by design">Safe by Design</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Human_Practices/Stakeholders" class="stakeholders">Stakeholders</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Safety">Safety</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Team">Team</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Team/Members" class="members">Members</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Team/Advisors" class="advisors">Advisors</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Attributions" class="attributions">Attributions</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Team/Sponsors" class="sponsors">Sponsors</A></LI><LI><A href="https://2017.igem.org/Team:TU-Eindhoven/Team/Notebook" class="notebook">Notebook</A></LI><TITLE>Menu</TITLE><UL class="topbar"><LI><A href="#">Software tool</A></LI></UL></P><H1>NFsim manual for dummies</H1><H6>NFsim is useful if you want to simulate a system with many interacting molecules in different states and/or molecules with many interacting sites where a bond can be formed. For an in depth explanation about how NFsim works, we refer to the first chapter of the NFsim manual provided by Yale University, which can be found here: 
<A href="http://emonet.biology.yale.edu/sites/default/files/files/NFsim_manual_v1_11.pdf" target="_blank">NFsim_manual_v1_11.pdf</A>
If you prefer to read a pdf booklet, you can donwload it <A href="https://static.igem.org/mediawiki/2017/b/ba/T--TU-Eindhoven--Software_pdf_book.pdf" target="_blank">here.</A></H6><H6>The second chapter &quot;Getting Started&quot; shows different steps which will guide you to install the required software. It is, however, more focused on Mac and Linux, we will therefore provide additional information for windows users.Furthermore, there are also some links in the manuals that are expired, so we will also be providing working links in this tool.
</H6><H6>The first step is to download the NFsim zip file, which can be found on <A href="http://michaelsneddon.net/nfsim/download/ " target="_blank">this</A> page (instead of the provided site in the manual). 
In most cases, the zip file will be saved on the folder &quot;Downloads, which is undesired. We recommend that you place the file to another location, which can easily be found and reached. For example, we created a new folder on our D-drive (mostly used for data), and named it NFsim. We placed the zip file into this folder and there we unpacked / unzipped the file. NFsim is now located in D:NFsim\NFsim_v1/11. It is recommended to use names without spaces, or choose an underscore _ instead. 
In addition to downloading NFsim, it is required to install a Perl interpreter for Windows user. We downloaded Active Perl (name: ActivePerl-5.24.1.2402-MSWin32-x64-401627.exe) from <A href="https://www.activestate.com/activeperl/downloads" target="_blank">here.</A>
The last download we also recommend is that of an text editor, namely Notepad ++, which can be found <A href="https://notepad-plus-plus.org/download/v7.5.1.html" target="_blank">here.</A>
This was additional information for step 1 of chapter 2.


The next step in the manual explains how you can open a terminal / command prompt.  Windows uses the name CMD. This Command Prompt can be find by going to &quot;start&quot; and then by typing &quot;cmd. After opening cmd, you should check if perl is installed correctly by typing: &quot;perl -v&quot;. The results are shown in Figure 1.
<DIV class="Figure_1"><FIGCAPTION>Figure 1: Command Prompt</FIGCAPTION></DIV>

The next step is to check whether NFsim is also installed correctly. This is done by first changing the directory of the command prompt to the directory were NFsim is installed / unzipped. We already mentioned that we installed it on our D-drive, so the first step is to change the drive. The easiest way to do this is by typing: &quot;D:&quot;, which lets you go the D-drive after you use the &quot;enter&quot; key on your keyboard. Next, change the directory to the NFsim directory. This can be done with: &quot;cd D:\NFsim\NFsim_v1.11&quot; where cd stands for Change Directory and after a space you type the folders where NFsim is installed. This path can be found easily by using the windows explorer, going to the correct folder and then clicking on it. The path then changes from the one in Figure 2 to a selectable name, like &quot;D:\NFsim\NFsim_v1.11&quot;, which can be copied and then placed in the command prompt. The shortcut &quot;ctrl + v&quot; does not work in the command prompt, so you will need the right mouse button and paste the text. 
<DIV class="Figure_2"><FIGCAPTION>Figure 2: Select Path with Windows Explorer</FIGCAPTION></DIV>
The next step is to verify that the installation of NFsim was successful, which can be done by typing: &quot;perl BNG2.pl -v&quot;. If the installation is correct, the command prompt will look like the command prompt in Figure 3, after pressing the &quot;enter&quot; key.
<DIV class="Figure_3"><FIGCAPTION>Figure 3: Change directory of the command prompt</FIGCAPTION></DIV>
Together with the installation of NFsim, you installed also some example models, which can be found in the folder &quot;models&quot;. The simple_system.bngl file is very nice as a start to see how output can be generated. We recommend that you open the bngl files with Notepad ++, as this is a very easy way to not only look at the files, but also to edit them if desired. 
Next to the simple_system.bngl file, we wrote a general file of our own with nice descriptions of each step and called this file: &quot;system_example.bngl&quot;. The description about how a bngl file is build up, can be found on our wiki page in the rule-based-model section and can be found <A href="https://2017.igem.org/Team:TU-Eindhoven/Model/Rule_based_model" target="_blank">here.</A><A href="https://static.igem.org/mediawiki/2017/4/4f/T--TU-Eindhoven--Software_system_example.txt" target="_blank">Link to download the bngl file.</A>
(You need to save this file in the &quot;models&quot; folder of &quot;NFsim_v1.11&quot; and change .txt to .bngl)


After you wrote your own bngl file, it is time to execute the file and get some results. The easiest way is to have a bngl file which has a line that states: &quot;writeXML();&quot; so that an XML file will be created during the first time we run the model and we can use the xml-file to run the same model again, but with different time steps.


The xml-file is created by typing the following line in the command prompt, as shown in Figure 4:
&quot;perl BNG2.pl -xml models/system_example.bngl&quot;
<DIV class="Figure_4"><FIGCAPTION>Figure 4: Command Prompt when running example via perl</FIGCAPTION></DIV>

After generating an xml-file, you can run the model in another way, namely via a windows executable. The advantage is that you then can give additional commands, like the command &quot;dump&quot;. NFsim calls this a flag and they made a whole table that describes the command line arguments and their function. The table can be found on pages 38-40 of the manual. 
For the dump flag, we first need to make an empty folder. This can be done easily with the command &quot;mkdir&quot; followed by the name of the folder you want to create, for example &quot;dumpDir_example_dump&quot;. Furthermore, with -Steps you can redefine the number of steps, with -sim you can define the end time of the simulation and with -o, you can specify the output file of your simulation. The command line can for example look like below and in Figure 5:
.\bin\NFsim_MSWin32.exe -xml system_example.xml -dump &quot;[0:0.1:1]-&gt;dumpDir_example_dump/&quot; -oSteps 10 -sim 1 -o &quot;system_example_nf.gdat&quot;
<DIV class="Figure_5"><FIGCAPTION>Figure 5: Command Prompt when running example via windows executor</FIGCAPTION></DIV></H6><H2>Codes for visualization</H2><H6>It is easy to visualize the results generated with Matlab. NFsim also provides some tools that you can use in the folder NFtools, but we will explain how you need to prepare Matlab and how you can use them. We ourselves already had Matlab 2016b installed, so the visualization may differ a bit, depending on your matlab version. There are also some functions that have changed over the time that Matlab exists, so it is possible that you will get a warning if you use another version. In most cases it is not a problem.
<A href="https://static.igem.org/mediawiki/2017/f/f3/T--TU-Eindhoven--Software_system_example_matlab.txt" target="_blank">Here you can find the matlab code we used for the visualization.</A> (Don't forget to change .txt to .m)




After opening Matlab you will end up in the home tab, shown in Figure 6. In this tab you can find an icon with the description: &quot;Set Path&quot;, like in Figure 7.
<DIV class="Figure_6"><FIGCAPTION>Figure 6: Home Tab of Matlab </FIGCAPTION></DIV><DIV class="Figure_7"><FIGCAPTION>Figure 7: Matlab Set Path icon</FIGCAPTION></DIV>

The window &quot;Set Path&quot; then opens and by clicking on &quot;Add with Subfoldersâ€¦&quot; you can select the NFtools folder. This is done by first going to the driver (D-drive), followed by the NFsim folder, then NFsim_v1.11 and there you will see the folder NFtools, as in Figure 8. Select the NFtools folder, press Save and then Matlab will add the folders and their subfolders.
<DIV class="Figure_8"><FIGCAPTION>Figure 8: Select the folder NFtools in Matlab</FIGCAPTION></DIV>
Then you need to go to the right directory for the Matlab editor. In Figure 9 you need to search for the icon visualized in Figure 10, which stands for &quot;Browse for folder&quot;. Then select the right path, which in this case, again is to &quot;NFsim_v1.11&quot;. The matlab code you can download below, can be saved in the general NFsim folder, which you can see in the editor window as depicted in Figure 9.
<DIV class="Figure_9"><FIGCAPTION>Figure 9: Editor Tab Matlab</FIGCAPTION></DIV><DIV class="Figure_10"><FIGCAPTION>Figure 10: Matlab Change Directory icon</FIGCAPTION></DIV>
By clicking on the green arrow which says &quot;run&quot;, Matlab will execute the program and give output in the command window, see Figure 11, but also four figures with graphs. The first figure contains three different graphs, which are also displayed separately in the other three figures. We also gave Matlab the command to save the last three figures, so that you can easily access them again and place them on your wiki page for example. The figures generated with Matlab for the system_example file (with an end time of 10 seconds with 100 steps) are depicted in Figures 12-14.
<DIV class="Figure_11"><FIGCAPTION>Figure 11: Matlab Command Window</FIGCAPTION></DIV><DIV class="Figure_12"><FIGCAPTION>Figure 12: Figure a, showing the amount of molecules over time</FIGCAPTION></DIV><DIV class="Figure_13"><FIGCAPTION>Figure 13: Figure b, showing the total amount of complexes over time</FIGCAPTION></DIV><DIV class="Figure_14"><FIGCAPTION>Figure 14: Figure c, showing the average complex size time</FIGCAPTION></DIV>

If you look at the legends, you see that we used different methods to generate the graphs in the figures. Which method is most useful depends on the system that is implemented in the model. Therefore, it is useful to look at the data in the workspace (Figure 15) of Matlab to see which method works the best for generating your output. In our example, the results of method 1 and method 2 are the same for the total amount of complexes and for the total amount of molecules, so therefore we choose to only depict the results of method 1 and 3 in our graphs.
<DIV class="Figure_15"><FIGCAPTION>Figure 15: Matlab Workspace Window</FIGCAPTION></DIV><TITLE>Footer</TITLE></H6></DIV></DIV></DIV></DIV></DIV></BODY></HTML>