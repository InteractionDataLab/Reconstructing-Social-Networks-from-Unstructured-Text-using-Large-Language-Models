<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_Slovenia_PROJECT_oscillator_details"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:Slovenia/PROJECT/oscillator/details">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:Slovenia/PROJECT/oscillator/details&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:Slovenia/PROJECT/oscillator/details&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:Slovenia/PROJECT/oscillator/details&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:Slovenia/PROJECT/oscillator/details" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:Slovenia/PROJECT/oscillator/details</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2010.igem.org</H3><DIV id="glavno"><DIV id="levo"><DIV id="meni"><DIV id="chuck"><P id="chuck_nas">Chuck Norris facts:</P></DIV></DIV></DIV></DIV><DIV style="font-smooth:always;" id="vsebina"><DIV id="vsebina_mid"><DIV id="vsebina_mid_center"><DIV id="overhead"><DIV id="naslov">oscillator - details</DIV></DIV><DIV id="besedilo"><TABLE id="toc" class="toc"><TBODY><TR><TD><DIV id="toctitle"><H2>Contents</H2></DIV><UL><LI class="toclevel-1"><A href="#MATLAB_script_and_how_it_works"><SPAN class="tocnumber">1</SPAN><SPAN class="toctext">MATLAB script and how it works</SPAN></A></LI><LI class="toclevel-2"><A href="#Main_variables_used_in_our_MATLAB_script_are_as_follows:"><SPAN class="tocnumber">1.1</SPAN><SPAN class="toctext">Main variables used in our MATLAB script are as follows:</SPAN></A></LI></UL><LI class="toclevel-1"><A href="#MATLAB_Simbiology_tool_and_how_it_works"><SPAN class="tocnumber">2</SPAN><SPAN class="toctext">MATLAB Simbiology tool and how it works</SPAN></A></LI><LI class="toclevel-1"><A href="#SGN_Sim_and_how_to_create_the_input_file"><SPAN class="tocnumber">3</SPAN><SPAN class="toctext">SGN Sim and how to create the input file</SPAN></A></LI></TD></TR></TBODY></TABLE><H2><SPAN class="mw-headline" id="MATLAB_script_and_how_it_works">MATLAB script and how it works</SPAN></H2><P>In order to perform the stochastic simulations stochastic simulation algorithm (SSA) is commonly used . Our MATLAB script file is an implementation of the SSA algorithm for MATLAB environment. The basic algorithm we used is as follows:</P><UL><LI>1. Initialization: Initialize the number and initial concentrations of species in the system, reactions used, reactions constants and kinetics.</LI><LI>2. Execution step: Generate random numbers to determine the next reaction to occur. The probability of a given reaction to be chosen is proportional to the concentration of reagents (some of the algorithms also determine the time step, time step we used was constant but small, to make the execution step efficient - but at the cost of simulation taking longer to complete).</LI><LI>3. Update: Update the species concentrations based on the reaction chosen in step 2.</LI><LI>4. Iterate: Go back to Step 2 unless the simulation time has been exceeded.</LI></UL><P>
Note that using constant volume concentration can also mean number of molecules.
</P><H3><SPAN class="mw-headline" id="Main_variables_used_in_our_MATLAB_script_are_as_follows:">Main variables used in our MATLAB script are as follows:</SPAN></H3><UL><LI>S is the number of species</LI><LI>R is the number of reactions</LI><LI>v(S,R) is a matrix, called stoichiometric matrix; each row represents one reaction, while the columns are the species; the numbers in the row tell us what species is used and which one produced (and how much of it) in one reaction</LI><LI>k is a matrix of kinetic rates; rows are different genes (ie gene for NICTAL/RNA polymerase/GFP), while the columns are kinetic rates used in different reactions</LI><LI>x is a vector of concentration (or molecule count) of each species</LI><LI>t vector of change - calculated in every step for every reaction</LI></UL><P>
Each step of the simulation (for i =1:N loop) first evaluates the probabilities of all reactions (propensity function ajx), again proportional to the concentration (or molecule count) of the species and kinetic rates.

Change of the system state is calculated. This is where the randomness occurs. For every reaction (for j = 1:R loop) we calculate t as t = v(:,j)'*poissrnd(a(j)*tau), where v(:,j) presents the stoichiometric vector for reaction j, a(j) presents the result of the propensity function for this reaction and poissrnd(x) a random number somewhere close to x according to Poisson distribution.</P><P>The validation of calculated change needs to be examined. If it causes negative values of concentrations (x), we do not take it as valid. In other case we simply add vector t to the vector change from previous reaction. Once we finish the calculation for all reactions, we add the change vector to the species vector x, updating the values to reflect reaction execution.</P><P>If we want to know how the concentration (or molecule count) was changing throughout the simulation, we need to save the x value in every step. The code under %% Plotting results simply turns the saved values of the simulations into a graph comprehensible by the person sitting behind the computer.
</P><H2><SPAN class="mw-headline" id="MATLAB_Simbiology_tool_and_how_it_works">MATLAB Simbiology tool and how it works</SPAN></H2><P>To import a simple example of our model in sbml format we could follow these simple steps:
</P><UL><LI>open the simbiology tool by writting &quot;simbiology&quot; in the Matlab console</LI><LI>create a new project from menu File ( File -&gt; New Project )</LI><LI>in the new project wizard window in the left panel menu select  &quot;Add model&quot;</LI><LI>in the right panel &quot;Add model&quot;, using scrolled bar, select item &quot;Load model from file&quot;</LI><LI>select the source folder where the sbml file is located</LI><LI>click &quot;Finish&quot; to build selected model</LI></UL><P>
Several variable changes of the existing default configuration parameters of simbiology are required to set-up configuration for simulations. The following settings should be used:</P><UL><LI>in the &quot;Project explorer&quot;, expand the &quot;Model session&quot; tree</LI><LI>click on &quot;Configuration Settings&quot;</LI><LI>set the simulation time to 30.000 (recommended) or more</LI><LI>set the solver type to &quot;ode15s&quot;</LI><LI>click on the &quot;Data logging&quot; tab</LI><LI>deselect all species logs you do not want in your result figure</LI><LI>select the species you want in your result figure</LI></UL><H2><SPAN class="mw-headline" id="SGN_Sim_and_how_to_create_the_input_file">SGN Sim and how to create the input file</SPAN></H2><P>SGN Sim is easy to use and versatile program that offers a great deal of tools for stochastic simulation. Its base is SSA algorithm described in the 'MATLAB script' section, but with certain additions. For example, we can delay the production of translation with a simple fix in the input file. Two great guides come along with the program explaining how to create an input file, what it should contain and how to use certain tricks. You can find the guides <A href="http://www.cs.tut.fi/~sanchesr/SGN/SGNSim.html">here</A>. The program then parses your input file and runs the simulation. Here is a quick recap of what we used in our input file:
</P><UL><LI>&quot;time&quot; and &quot;stop _time&quot; parameters determine when the simulation starts and ends, the &quot;read_out interval&quot; tells the program the saving frequency of calculation results and &quot;output_file&quot; tells the program what output file to use (it can save the results directly as an Excel file, a txt file, etc.).</LI><LI>Segment:

lua !{
...
}

tells the program what are the constants used in our simulation.</LI><LI>Segment:
population {
...
}
determines starting concentrations (or molecule counts) for all species.</LI><LI>Segment:
reaction {
...
}

is the part where the reactions are determined.</LI></UL><P>To describe a reaction we simply use the notation from population { } segment and follow the syntax provided by the two guides:
A + B --[k]--&gt; C;
</P><P>where A, B and C are the reagents and k is the kinetic constant used for this reaction. If we use a letter for the rate, we must declare it in the lua !{ } section, however the parser allows using a number as well (A + B --[0.02]--&gt; C). Degradation is simply noted as:
</P><P>A --[k_deg]--&gt; ;
</P><P>The most important part is the time delay we can add to products of the reactions. If I use the example from our input file, where we had to delay the production of translation:
</P><P>A --[transcription_rate]--&gt; B(translation_delay);
</P><P>We can again replace translation_delay by a number, the parser even allows mathematical expressions (such as 700/200 - 700 divided by 200). A great feature of this program is also that you can use a probability distribution inside the delay. We used exponential distribution for the translation delay:
</P><P>A--[transcription_rate]--&gt;B(exp:(1/translation_delay));
</P><P>Simple, yet very effective and useful.</P><P>As we can see setting up a biological model and running a stochastic simulation is easy and very accurate with this program. We were also surprised how fast it calculates the result of simulation, compared to our MATLAB script.
<A href="https://2010.igem.org/Team:Slovenia/PROJECT/oscillator">Back to Oscillator.</A></P></DIV></DIV></DIV></DIV></DIV><DIV class="printfooter">
Retrieved from &quot;<A href="http://2010.igem.org/Team:Slovenia/PROJECT/oscillator/details">http://2010.igem.org/Team:Slovenia/PROJECT/oscillator/details</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:Slovenia/PROJECT/oscillator/details" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:Slovenia/PROJECT/oscillator/details" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:Slovenia/PROJECT/oscillator/details&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:Slovenia/PROJECT/oscillator/details&amp;oldid=194968" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2010.igem.org:Privacy_policy" title="2010.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2010.igem.org:General_disclaimer" title="2010.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></BODY></HTML>