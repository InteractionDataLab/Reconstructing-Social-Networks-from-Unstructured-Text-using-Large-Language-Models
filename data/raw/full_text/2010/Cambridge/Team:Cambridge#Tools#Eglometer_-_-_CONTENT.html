<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_Cambridge_Tools_Eglometer"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:Cambridge/Tools/Eglometer">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:Cambridge/Tools/Eglometer&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:Cambridge/Tools/Eglometer&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:Cambridge/Tools/Eglometer&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:Cambridge/Tools/Eglometer" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:Cambridge/Tools/Eglometer</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2010.igem.org</H3><DIV id="wrap"><DIV id="left"><UL id="accmenu"><LI><A class="head" href="#"> Introduction</A></LI><LI><A href="/Team:Cambridge">Home</A></LI><LI><A href="/Team:Cambridge/TheTeam">Meet the Team</A></LI><LI><A href="/Team:Cambridge/Photos">Photo Gallery</A></LI><LI><A href="/Team:Cambridge/Videos">Videos</A></LI><LI><A href="/Team:Cambridge/BioBricks">Parts submitted</A></LI></UL><LI><A class="head" href="#">Project Firefly</A></LI><LI><A href="/Team:Cambridge/Bioluminescence">Introduction</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/Background_Firefly">Background</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/Colour">Coloured outputs</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/Luciferin_Regeneration">Luciferin recovery</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/Firefly_Modelling">Modelling</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/Firefly_Characterisation">Characterisation</A></LI><LI><A class="head" href="#">Project Vibrio</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/Bacterial_Luciferases">Introduction</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/Background">Background</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/G28">The LuxBrick</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/Bacterial_Codon_optimisation">Codon optimisation</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/Vibrio_Modelling">Modelling</A></LI><LI><A href="/Team:Cambridge/Bioluminescence/Vibrio_Characterisation">Characterisation</A></LI><LI><A class="head" href="#">Tools</A></LI><LI><A href="/Team:Cambridge/Tools/Gibson">Gibthon</A></LI><LI><A href="/Team:Cambridge/Tools/GenBank">BioBrick → GenBank</A></LI><LI><A href="/Team:Cambridge/Tools/Ligate">Ligation Calculator</A></LI><LI><A href="/Team:Cambridge/Tools/Eglometer">The E.glometer</A></LI><LI><A class="head" href="#">Gibson Assembly</A></LI><LI><A href="/Team:Cambridge/Gibson/Introduction">Introduction</A></LI><LI><A href="/Team:Cambridge/Gibson/Mechanism">How it works</A></LI><LI><A href="/Team:Cambridge/Gibson/Protocol">Protocol</A></LI><LI><A href="/Team:Cambridge/Gibson/RFC">RFC</A></LI><LI><A class="head" href="#">Considerations</A></LI><LI><A href="/Team:Cambridge/Human_Practices">Human Practices</A></LI><LI><A href="/Team:Cambridge/Safety">Safety</A></LI><LI><A class="head" href="#">Future applications</A></LI><LI><A href="/Team:Cambridge/Tools/microMeasure">Biosensors</A></LI><LI><A href="/Team:Cambridge/Tools/Lighting">Lighting</A></LI><LI><A class="head" href="/Team:Cambridge/Notebook/Week1">Notebook</A></LI><LI><A href="/Team:Cambridge/Notebook/Summary">Summary</A></LI><LI><A href="/Team:Cambridge/Notebook/Week1">Week 1</A></LI><LI><A href="/Team:Cambridge/Notebook/Week2">Week 2</A></LI><LI><A href="/Team:Cambridge/Notebook/Week3">Week 3</A></LI><LI><A href="/Team:Cambridge/Notebook/Week4">Week 4</A></LI><LI><A href="/Team:Cambridge/Notebook/Week5">Week 5</A></LI><LI><A href="/Team:Cambridge/Notebook/Week6">Week 6</A></LI><LI><A href="/Team:Cambridge/Notebook/Week7">Week 7</A></LI><LI><A href="/Team:Cambridge/Notebook/Week8">Week 8</A></LI><LI><A href="/Team:Cambridge/Notebook/Week9">Week 9</A></LI><LI><A href="/Team:Cambridge/Notebook/Week10">Week 10</A></LI><LI><A href="/Team:Cambridge/Notebook/Week11">Week 11</A></LI><LI><A href="/Team:Cambridge/Notebook/Week12">Week 12</A></LI><LI><A href="/Team:Cambridge/Notebook/FurtherWork">Beyond Week 12</A></LI><LI><A href="/Team:Cambridge/Protocols">Protocols</A></LI><LI><A href="/Team:Cambridge/Partners" class="head">Our Partners</A></LI><LI><A href="/Team:Cambridge/Partners">Sponsors</A></LI><LI><A href="/Team:Cambridge/iGEM_Teams">iGEM Teams</A></LI><LI><A href="/Team:Cambridge/Departments">University</A></LI><LI><A href="/Team:Cambridge/Publicity">Publicity</A></LI></DIV><DIV id="right"><DIV style="width:730px; background-color:#fb5c2b;" class="secheader">Hardware tool: the E.glometer</DIV><DIV class="contwrap"><P>
We designed and built a low cost electronic system for measuring light output, this is useful for reporter assays.
</P><H2><SPAN class="mw-headline" id="Use_of_the_E.glometer">Use of the E.glometer</SPAN></H2><OL><LI> The user places a culture, or a buffered suspension of cells, in a cuvette
</LI><LI> The cuvette is placed against the TAOS chip
</LI><LI> The device is turned on, it prompts the user for an exposure time.  The user enters the time in seconds using the numeric keypad and presses &quot;*&quot; when finished
</LI><LI> The device waits during a 20 second &quot;priming&quot; phase, this is to allow the user to place it in a dark box or cover it well to prevent background light leakage.
</LI><LI> The device counts photons for the period entered, when the time has elapsed it announces this with two beeps.
</LI><LI> The number of light units counted is shown on the LCD screen.
</LI></OL><H1><SPAN class="mw-headline" id="Making_your_own_E.glometer">Making your own E.glometer</SPAN></H1><H2 style="border-top:0">Shopping list</H2>
There are three core components to make the light detecting device:
<UL><LI> TAOS light to frequency converter - TSL230RP-LF = $6 (<B>or</B> for higher sensitivity TSL237)
</LI><LI> Arduino - $25
</LI><LI> 10 uF capacitor - $0.25
</LI><LI><B>Total - $31.25</B></LI></UL><DIV style="float:right; padding-left:30px; width:300px; padding-bottom:50px;"><DIV style="margin-top:5px; font-size:12px; color:#6e6e6e; line-height:15px; text-align:center">E.glometer tested on <A href="http://partsregistry.org/Part:BBa_K325239" class="external text" rel="nofollow">K325239</A> induced with 100um arabinose</DIV></DIV><P>Together these three (and some jump leads) will let you count photons for a well timed period.  However you will have to connect a laptop both to report the data collected and to change the exposure time.
</P><P>
We wanted to make a self contained device so we added:
</P><UL><LI> A numeric keypad - $4.78
</LI><LI> An 8x2 LCD module  - $6.62
</LI><LI> A buzzer - to announce completion - $0.80
</LI><LI> A breadboard to allow easy assembly of these components: $10
</LI><LI><B>Total - $22.20</B> extra
</LI></UL><H2><SPAN class="mw-headline" id="Wiring">Wiring</SPAN></H2><P>The diagram above shows the connections that should be made on the breadboard.  Some LCD screens and keypads may have different pin arrangements. As long as the output pins are updated in the Arduino code a number of permutations are possible.
</P><H2><SPAN class="mw-headline" id="Arduino_code">Arduino code</SPAN></H2><P>The code below is designed to run the Arduino in standalone mode.  The user enters exposure time, and the Arduino counts photons for this period.
</P><P>Required libraries <A href="http://www.arduino.cc/playground/Code/Keypad" class="external text" rel="nofollow">Keypad.h</A>, <A href="http://arduino.cc/en/Reference/LiquidCrystal?from=Tutorial.LCDLibrary" class="external text" rel="nofollow">LiquidCrystal.h</A></P><PRE>
//These define the pin connections of the Arduino.  
//They can be changed but only use digital in 2 or 3 for the Freq pin
#define TSL_FREQ_PIN 2 // output use digital pin2 for interrupt
#define TSL_S0	     5
#define TSL_S1	     6
#define TSL_S2	     7
#define TSL_S3  8

#include &lt;Keypad.h&gt;  //This is a library which must be downloaded

#include &lt;LiquidCrystal.h&gt; //This is a library which must be downloaded
const byte ROWS = 4; // Four rows
const byte COLS = 3; // Three columns
// Define the Keymap
//This defines the shape of the keypad
char keys[ROWS][COLS] = {
  {'1','2','3'},
  {'4','5','6'},
  {'7','8','9'},
  {'*','0','#'}
};
// Connect keypad ROW0, ROW1, ROW2 and ROW3 to these Arduino pins.
byte rowPins[ROWS] = { 17, 18, 19, 4};
// Connect keypad COL0, COL1 and COL2 to these Arduino pins.
byte colPins[COLS] = { 14, 15, 16 }; 

// Create the Keypad
Keypad kpd = Keypad( makeKeymap(keys), rowPins, colPins, ROWS, COLS );


// initialize the library with the numbers of the interface pins
LiquidCrystal lcd(11, 12, 0, 1, 9, 10);

unsigned long pulse_cnt = 0;

int getInt(String text)
{
  char temp[20];
  text.toCharArray(temp, 19);
  int x = atoi(temp);
  if (x == 0 &amp;&amp; text != &quot;0&quot;)
  {
    x = -1;
  }
  return x;
}  

void setup() {
  
  lcd.begin(8, 2);
  lcd.print(&quot;test&quot;);
  //  Serial.begin(9600);

  // attach interrupt to pin2, send output pin of TSL230R to arduino 2
  // call handler on each rising pulse

  attachInterrupt(0, add_pulse, RISING);

  pinMode(TSL_FREQ_PIN, INPUT);
  pinMode(TSL_S0, OUTPUT);
  pinMode(TSL_S1, OUTPUT);
  pinMode(TSL_S2, OUTPUT);
  pinMode(TSL_S3, OUTPUT);

  digitalWrite(TSL_S0, HIGH);
  digitalWrite(TSL_S1, HIGH);
  digitalWrite(TSL_S2, HIGH);
  digitalWrite(TSL_S3, HIGH);
}

void loop() {
  lcd.setCursor(0, 0);
  lcd.print(&quot;Exp.time?&quot;);  //Prompt user for exposure time on top line

String displayer=&quot;&quot;;
boolean moreinput=true;
while(moreinput){
 char key = kpd.getKey();
  if(key)  // same as if(key != NO_KEY)
  {
    switch (key)
    {
      case '*':
      
        lcd.setCursor(0, 0);
        lcd.print(&quot;*&quot;); //submit on &quot;*&quot;
        moreinput=false;
        break;
      case '#':
        lcd.setCursor(0, 0);
        lcd.print(&quot;#&quot;);
        break;
      default:
      displayer=displayer+key;
        lcd.setCursor(0, 1);
        lcd.print(displayer);
    }
  }
  }
int  timing=getInt(displayer);
 lcd.setCursor(0, 0);
 lcd.print(&quot;priming   &quot;);
 
  for (int i=20; i&gt;0 ; i--){
    lcd.setCursor(0, 1);
    lcd.print(i);
    lcd.print(&quot;&quot;);
    delay(1000);
  } 
  
   lcd.setCursor(0, 0);
 lcd.print(&quot;timing   &quot;);
 pulse_cnt=0;
 
  for (int i=timing; i&gt;0 ; i--){
    lcd.setCursor(0, 1);
    lcd.print(i);
    lcd.print(&quot;&quot;);
    delay(1000);
  } 
   lcd.setCursor(0, 0);
 lcd.print(&quot;done!&quot;);
  int finalcnt=pulse_cnt;
  lcd.setCursor(0, 1);
  lcd.print(finalcnt);
  digitalWrite(13,HIGH);
  delay(500);
  digitalWrite(13,LOW);
  delay(1000);
  digitalWrite(13,HIGH);
  delay(1000);
  digitalWrite(13,LOW);
  delay(1000000);
}

void add_pulse() {

  // increase pulse count
  pulse_cnt++;
  //Serial.println(pulse_cnt);
  return;
}



</PRE><UL><LI> The code above incorporates code from <A href="http://roamingdrone.wordpress.com/2008/11/28/arduino-and-the-tsl230r-photographic-conversions/" class="external text" rel="nofollow">C. Church</A> licensed under a Creative Commons license.
</LI><LI> It can be extended to allow data logging to a laptop via serial port, or to display further calculations based on the raw data.
</LI></UL></DIV></DIV></DIV><DIV class="printfooter">
Retrieved from &quot;<A href="http://2010.igem.org/Team:Cambridge/Tools/Eglometer">http://2010.igem.org/Team:Cambridge/Tools/Eglometer</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:Cambridge/Tools/Eglometer" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:Cambridge/Tools/Eglometer" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:Cambridge/Tools/Eglometer&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:Cambridge/Tools/Eglometer&amp;oldid=197274" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2010.igem.org:Privacy_policy" title="2010.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2010.igem.org:General_disclaimer" title="2010.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>