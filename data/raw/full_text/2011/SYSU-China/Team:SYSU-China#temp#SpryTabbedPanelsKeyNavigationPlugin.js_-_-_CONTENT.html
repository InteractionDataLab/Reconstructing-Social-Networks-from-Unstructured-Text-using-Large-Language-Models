<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_SYSU-China_temp_SpryTabbedPanelsKeyNavigationPlugin_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2011.igem.org</H3><P>// SpryTabbedPanelsKeyNavigationPlugin.js - version 0.1 - Spry Pre-Release 1.7
//
// Copyright (c) 2010. Adobe Systems Incorporated.
// All rights reserved.
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are met:
//
//   * Redistributions of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//   * Redistributions in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//   * Neither the name of Adobe Systems Incorporated nor the names of its
//     contributors may be used to endorse or promote products derived from this
//     software without specific prior written permission.
//
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;
// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
// POSSIBILITY OF SUCH DAMAGE.
</P><P>(function() { // BeginSpryComponent
</P><P>if (typeof Spry == &quot;undefined&quot; || !Spry.Widget || !Spry.Widget.TabbedPanels2)
{
	alert(&quot;SpryTabbedPanelsKeyNavigationPlugin.js requires SpryTabbedPanels2.js!&quot;);
	return;
}
</P><P>var KNP = Spry.Widget.TabbedPanels2.KeyNavigationPlugin = {
	initialize: function(tb)
	{
		tb.addObserver(this);
	},
</P><P>	KEY_UP:    38,
	KEY_DOWN:  40,
	KEY_LEFT:  37,
	KEY_RIGHT: 39,
	KEY_ENTER: 13,
	KEY_SPACE: 32,
</P><P>	handleOnButtonKeyDown: function(e, tb, btn)
	{
		var currentIndex = tb.panelSelector.elementToIndex(btn);
</P><P>		if (currentIndex != -1 )
		{
			var key = e.keyCode;
			var nextIndex = -1;
			switch(key)
			{
				case KNP.KEY_LEFT:
				case KNP.KEY_UP:
					if (currentIndex &gt; 0)
						nextIndex = currentIndex - 1;
					else
						nextIndex = tb.panelSelector.getButtonCount() - 1;
					break;
				case KNP.KEY_RIGHT:
				case KNP.KEY_DOWN:
					if (currentIndex &lt; tb.panelSelector.getButtonCount() - 1)
						nextIndex = currentIndex + 1;
					else
						nextIndex = 0;
					break;
				case KNP.KEY_SPACE:
				case KNP.KEY_ENTER:
					nextIndex = currentIndex;
					break;
			}
</P><P>			if (nextIndex != -1)
			{
				tb.panelSelector.handleActivate(nextIndex);
				tb.panelSelector.focusButton(nextIndex);
				return Spry.Utils.cancelEvent(e);
			}
		}
	},
	onPostAttachTabBehaviors: function(tb, evt)
	{
		if (tb.enableKeyboardNavigation &amp;&amp; tb.panelSelector) {
			for (var i=0; i&lt;tb.panelSelector.buttons.length; i++) {
				tb.panelSelector.buttons[i].psButton.addObserver({
				 	onButtonKeyDown: function(btn, e) {
				 		KNP.handleOnButtonKeyDown(e.event, tb, e.element);
				 	}
				 });
			}
		}
	}
};
</P><P>// We want to add our plugin to the default configuration for TabbedPanels2 if it is included!
</P><P>Spry.Widget.TabbedPanels2.config.plugIns.push(Spry.Widget.TabbedPanels2.KeyNavigationPlugin);
</P><P>})(); // EndSpryComponent
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2011.igem.org/Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js">http://2011.igem.org/Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:SYSU-China/temp/SpryTabbedPanelsKeyNavigationPlugin.js&amp;oldid=231682" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2011.igem.org:Privacy_policy" title="2011.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2011.igem.org:General_disclaimer" title="2011.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>