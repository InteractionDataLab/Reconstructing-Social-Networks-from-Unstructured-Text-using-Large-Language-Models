<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_SYSU-China_temp_SpryPanelSelector_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:SYSU-China/temp/SpryPanelSelector.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:SYSU-China/temp/SpryPanelSelector.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:SYSU-China/temp/SpryPanelSelector.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:SYSU-China/temp/SpryPanelSelector.js&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:SYSU-China/temp/SpryPanelSelector.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:SYSU-China/temp/SpryPanelSelector.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2011.igem.org</H3><P>// SpryPanelSelector.js - version 0.6 - Spry Pre-Release 1.7
//
// Copyright (c) 2009. Adobe Systems Incorporated.
// All rights reserved.
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are met:
//
//   * Redistributions of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//   * Redistributions in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//   * Neither the name of Adobe Systems Incorporated nor the names of its
//     contributors may be used to endorse or promote products derived from this
//     software without specific prior written permission.
//
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;
// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
// POSSIBILITY OF SUCH DAMAGE.
</P><P>(function() { // BeginSpryComponent
</P><P>if (typeof Spry == &quot;undefined&quot; || !Spry.Widget || !Spry.Widget.Base)
{
	alert(&quot;SpryPanelSelector.js requires SpryWidget.js!&quot;);
	return;
}
</P><P>Spry.Widget.PanelSelector = function(elements, panel, opts)
{
	Spry.Widget.Base.call(this);
</P><P>	this.buttons = Spry.$$(elements);
	this.panel = panel;
	this.disablePanelCallbacks = 0;
	this.currentButton = null;
</P><P>	// Initialize the accordion object with the global defaults.
</P><P>	this.setOptions(this, Spry.Widget.PanelSelector.config);
</P><P>	// Override the defaults with any options passed into the constructor.
</P><P>	this.setOptions(this, opts);
</P><P>	if (typeof (this.defaultButton) == &quot;number&quot;)
	{
		if (this.defaultButton &lt; 0)
			this.defaultButton = 0;
		else
		{
			var count = this.getButtonCount();
			if (this.defaultButton &gt;= count)
				this.defaultButton = (count &gt; 1) ? (count - 1) : 0;
		}
</P><P>	}
	this.attachBehaviors();
};
</P><P>Spry.Widget.PanelSelector.config = {
	event:                    &quot;click&quot;,
	defaultButton:            0,
	selectionStopsSlideShow:  true,
	useHrefs:                 false,
	selectedClass:            &quot;PanelSelectorButtonSelected&quot;,
	unselectedClass:          &quot;PanelSelectorButtonUnselected&quot;,
	downClass:                &quot;PanelSelectorButtonDown&quot;,
	disabledClass:            &quot;PanelSelectorButtonDisabled&quot;,
	hoverClass:               &quot;PanelSelectorButtonHover&quot;,
	focusedClass:             &quot;PanelSelectorButtonFocused&quot;
};
</P><P>Spry.Widget.PanelSelector.prototype = new Spry.Widget.Base();
Spry.Widget.PanelSelector.prototype.constructor = Spry.Widget.PanelSelector;
</P><P>Spry.Widget.PanelSelector.prototype.getPanelIDFromHREF = function(ele)
{
	if (ele)
	{
		var href = ele.getAttribute(&quot;href&quot;);
		if (href != undefined &amp;&amp; href.search(/^#\w/) != -1)
			return href.replace(/.*#/, &quot;#&quot;);
	}
	return null;
};
</P><P>Spry.Widget.PanelSelector.prototype.getButtonCount = function()
{
	return this.buttons.length;
};
</P><P>
Spry.Widget.PanelSelector.prototype.getCurrentButton = function()
{
	return this.currentButton;
};
</P><P>Spry.Widget.PanelSelector.prototype.getCurrentButtonIndex = function()
{
	return this.elementToIndex(this.getCurrentButton());
};
</P><P>
Spry.Widget.PanelSelector.prototype.elementToIndex = function(ele)
{
	var ea = this.buttons;
	var n = ea.length;
	for (var i = 0; i &lt; n; i++)
		if (ea[i] == ele) return i;
	return -1;
};
</P><P>Spry.Widget.PanelSelector.prototype.indexToElement = function(eleOrIndex)
{
	return (typeof eleOrIndex == &quot;number&quot;) ? this.buttons[eleOrIndex] : eleOrIndex;
};
</P><P>
Spry.Widget.PanelSelector.prototype.enableButton = function(eleOrIndex)
{
	var ele = this.indexToElement(eleOrIndex);
	if (ele &amp;&amp; ele.psButton)
		ele.psButton.enable();
};
</P><P>
Spry.Widget.PanelSelector.prototype.disableButton = function(eleOrIndex)
{
	var ele = this.indexToElement(eleOrIndex);
	if (ele &amp;&amp; ele.psButton)
		ele.psButton.disable();
};
</P><P>Spry.Widget.PanelSelector.prototype.focusButton = function(eleOrIndex)
{
	var ele = this.indexToElement(eleOrIndex);
	if (ele &amp;&amp; ele.psButton)
		ele.psButton.focus();
};
</P><P>Spry.Widget.PanelSelector.prototype.selectButton = function(eleOrIndex, suppressPanelSync)
{
	++this.disablePanelCallbacks;
</P><P>	var buttons = this.buttons;
	var ele = this.indexToElement(eleOrIndex);
</P><P>	for (var i = 0; i &lt; buttons.length; i++)
	{
		var e = buttons[i];
		this.removeClassName(e, (e == ele) ? this.unselectedClass : this.selectedClass);
		this.addClassName(e, (e == ele) ? this.selectedClass : this.unselectedClass);
	}
</P><P>	this.currentButton = ele;
</P><P>	if (!suppressPanelSync &amp;&amp; this.panel)
	{
		var href = this.useHrefs ? this.getPanelIDFromHREF(ele) : null;
		this.panel.showPanel(href ? href : this.elementToIndex(ele));
	}
</P><P>	--this.disablePanelCallbacks;
};
</P><P>Spry.Widget.PanelSelector.prototype.selectPreviousButton = function()
{
	var evt = new Spry.Widget.Event(this);
	this.notifyObservers(&quot;onPrePanelSelectorSelectPreviousButton&quot;, evt);
	if (!evt.performDefaultAction)
		return;
</P><P>	var curIndex = this.getCurrentButtonIndex();
	this.handleActivate(((curIndex &lt; 1) ? this.getButtonCount() : curIndex) - 1);
</P><P>	this.notifyObservers(&quot;onPostPanelSelectorSelectPreviousButton&quot;, evt);
};
</P><P>Spry.Widget.PanelSelector.prototype.selectNextButton = function()
{
	var evt = new Spry.Widget.Event(this);
	this.notifyObservers(&quot;onPrePanelSelectorSelectNextButton&quot;, evt);
	if (!evt.performDefaultAction)
		return;
</P><P>	this.handleActivate((this.getCurrentButtonIndex()+1) % this.getButtonCount());
</P><P>	this.notifyObservers(&quot;onPostPanelSelectorSelectNextButton&quot;, evt);
};
</P><P>Spry.Widget.PanelSelector.prototype.selectFirstButton = function()
{
	var evt = new Spry.Widget.Event(this);
	this.notifyObservers(&quot;onPrePanelSelectorSelectFirstButton&quot;, evt);
	if (!evt.performDefaultAction)
		return;
</P><P>	this.handleActivate(0);
</P><P>	this.notifyObservers(&quot;onPostPanelSelectorSelectFirstButton&quot;, evt);
};
</P><P>Spry.Widget.PanelSelector.prototype.selectLastButton = function()
{
	var evt = new Spry.Widget.Event(this);
	this.notifyObservers(&quot;onPrePanelSelectorSelectLastButton&quot;, evt);
	if (!evt.performDefaultAction)
		return;
</P><P>	var count = this.getButtonCount();
	this.handleActivate(count &gt; 0 ? count - 1 : 0);
</P><P>	this.notifyObservers(&quot;onPostPanelSelectorSelectLastButton&quot;, evt);
};
</P><P>Spry.Widget.PanelSelector.prototype.handleActivate = function(ele)
{
	if (typeof ele == &quot;string&quot;)
		ele = document.getElementById(ele);
</P><P>	var evt = new Spry.Widget.Event(this, { target: ele, targetIndex: this.elementToIndex(ele) });
	this.notifyObservers(&quot;onPrePanelSelectorClick&quot;, evt);
	if (!evt.performDefaultAction)
		return;
</P><P>	if (this.selectionStopsSlideShow &amp;&amp; this.panel)
		this.panel.stop();
</P><P>	this.selectButton(ele);
</P><P>	this.notifyObservers(&quot;onPostPanelSelectorClick&quot;, evt);
};
</P><P>Spry.Widget.PanelSelector.prototype.handlePanelChange = function(data)
{
	if (this.disablePanelCallbacks)
		return;
</P><P>	var panelEle = data.target;
	var panelIndex = data.targetIndex;
</P><P>	if (!this.panel)
		return;
</P><P>	var panelID = panelEle.id;
	var btns = this.buttons;
	var btn = btns[panelIndex];
</P><P>	if (panelID)
	{
		// Search for the button to activate based on
		// the panel's id.
</P><P>		for (var i = 0; !btn &amp;&amp; i &lt; btns.length; i++)
		{
			var b = btns[i];
			var id = this.getPanelIDFromHREF(b);
			if (id == panelID)
			{
				btn = b;
				break;
			}
		}
	}
</P><P>	if (btn)
		this.selectButton(btn, true);
};
</P><P>Spry.Widget.PanelSelector.prototype.attachButtonBehaviors = function(ele)
{
	var self = this;
</P><P>	var activateFunc = function(e) { self.handleActivate(ele); return false; };
</P><P>	ele.psButton = new Spry.Widget.Button(ele, {
		onclick:       activateFunc,
		downClass:     this.downClass,
		hoverClass:    this.hoverClass,
		disabledClass: this.disabledClass,
		focusedClass:  this.focusedClass
	});
</P><P>	if (this.event != &quot;click&quot;)
		this.addEventListener(ele, this.event, activateFunc, false);
};
</P><P>Spry.Widget.PanelSelector.prototype.attachBehaviors = function()
{
	var self = this;
	var buttons = this.buttons;
</P><P>	for (var i = 0; i &lt; buttons.length; i++)
		this.attachButtonBehaviors(buttons[i]);
</P><P>	if (this.panel)
		this.panel.addObserver({ onPostShowPanel: function(n, data){ self.handlePanelChange(data); }});
</P><P>	this.selectButton(this.defaultButton);
};
</P><P>})(); // EndSpryComponent
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2011.igem.org/Team:SYSU-China/temp/SpryPanelSelector.js">http://2011.igem.org/Team:SYSU-China/temp/SpryPanelSelector.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:SYSU-China/temp/SpryPanelSelector.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:SYSU-China/temp/SpryPanelSelector.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:SYSU-China/temp/SpryPanelSelector.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:SYSU-China/temp/SpryPanelSelector.js&amp;oldid=231614" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2011.igem.org:Privacy_policy" title="2011.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2011.igem.org:General_disclaimer" title="2011.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>