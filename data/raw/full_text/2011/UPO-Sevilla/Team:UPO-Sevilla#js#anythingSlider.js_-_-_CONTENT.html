<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_UPO-Sevilla_js_anythingSlider_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:UPO-Sevilla/js/anythingSlider.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:UPO-Sevilla/js/anythingSlider.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:UPO-Sevilla/js/anythingSlider.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:UPO-Sevilla/js/anythingSlider.js&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:UPO-Sevilla/js/anythingSlider.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:UPO-Sevilla/js/anythingSlider.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2011.igem.org</H3><P>/*
	AnythingSlider v1.7.12
	Original by Chris Coyier: <A href="http://css-tricks.com" class="external free" rel="nofollow">http://css-tricks.com</A>
	Get the latest version: <A href="https://github.com/ProLoser/AnythingSlider" class="external free" rel="nofollow">https://github.com/ProLoser/AnythingSlider</A></P><P>	To use the navigationFormatter function, you must have a function that
	accepts two paramaters, and returns a string of HTML text.
</P><P>	index = integer index (1 based);
	panel = jQuery wrapped LI item this tab references
	@return = Must return a string of HTML/Text
</P><P>	navigationFormatter: function(index, panel){
		return &quot;Panel #&quot; + index; // This would have each tab with the text 'Panel #X' where X = index
	}
</P><UL><LI>/
</LI></UL><P>(function($) {
</P><P>	$.anythingSlider = function(el, options) {
</P><P>		var base = this, o;
</P><P>		// Wraps the ul in the necessary divs and then gives Access to jQuery element
		base.el = el;
</P>
		base.$el = $(el).addClass('anythingBase').wrap('<DIV class="anythingSlider">&lt;div class=&quot;anythingWindow&quot; /&gt;</DIV>');
<P>		// Add a reverse reference to the DOM object
		base.$el.data(&quot;AnythingSlider&quot;, base);
</P><P>		base.init = function(){
</P><P>			// Added &quot;o&quot; to be used in the code instead of &quot;base.options&quot; which doesn't get modifed by the compiler - reduces size by ~1k
			base.options = o = $.extend({}, $.anythingSlider.defaults, options);
</P><P>			base.initialized = false;
			if ($.isFunction(o.onBeforeInitialize)) { base.$el.bind('before_initialize', o.onBeforeInitialize); }
			base.$el.trigger('before_initialize', base);
</P><P>			// Cache existing DOM elements for later
			// base.$el = original ul
			// for wrap - get parent() then closest in case the ul has &quot;anythingSlider&quot; class
			base.$wrapper = base.$el.parent().closest('div.anythingSlider').addClass('anythingSlider-' + o.theme);
			base.$window = base.$el.closest('div.anythingWindow');
			base.win = window;
			base.$win = $(base.win);
</P>
			base.$controls = $('').appendTo( (o.appendControlsTo !== null &amp;&amp; $(o.appendControlsTo).length) ? $(o.appendControlsTo) : base.$wrapper);
<P>			base.$startStop = $('&lt;a href=&quot;#&quot; class=&quot;start-stop&quot;&gt;&lt;/a&gt;');
			if (o.buildStartStop) {
				base.$startStop.appendTo( (o.appendStartStopTo !== null &amp;&amp; $(o.appendStartStopTo).length) ? $(o.appendStartStopTo) : base.$controls );
			}
			base.$nav = $('&lt;ul class=&quot;thumbNav&quot; /&gt;').appendTo( (o.appendNavigationTo !== null &amp;&amp; $(o.appendNavigationTo).length) ? $(o.appendNavigationTo) : base.$controls );
</P><P>			// Set up a few defaults &amp; get details
			base.flag    = false; // event flag to prevent multiple calls (used in control click/focusin)
			base.playing = o.autoPlay; // slideshow state; removed &quot;startStopped&quot; option
			base.slideshow = false; // slideshow flag needed to correctly trigger slideshow events
			base.hovered = false; // actively hovering over the slider
			base.panelSize = [];  // will contain dimensions and left position of each panel
			base.currentPage = o.startPanel = parseInt(o.startPanel,10) || 1; // make sure this isn't a string
			o.changeBy = parseInt(o.changeBy,10) || 1;
			base.adj = (o.infiniteSlides) ? 0 : 1; // adjust page limits for infinite or limited modes
			base.width = base.$el.width();
			base.height = base.$el.height();
			base.outerPad = [ base.$wrapper.innerWidth() - base.$wrapper.width(), base.$wrapper.innerHeight() - base.$wrapper.height() ];
			if (o.playRtl) { base.$wrapper.addClass('rtl'); }
</P><P>			// Expand slider to fit parent
			if (o.expand) {
				base.$outer = base.$wrapper.parent();
				base.$window.css({ width: '100%', height: '100%' }); // needed for Opera
				base.checkResize();
			}
</P><P>			// Build start/stop button
			if (o.buildStartStop) { base.buildAutoPlay(); }
</P><P>			// Build forwards/backwards buttons
			if (o.buildArrows) { base.buildNextBackButtons(); }
</P><P>			// can't lock autoplay it if it's not enabled
			if (!o.autoPlay) { o.autoPlayLocked = false; }
</P><P>			base.updateSlider();
</P><P>			base.$lastPage = base.$currentPage;
</P><P>			// Get index (run time) of this slider on the page
			base.runTimes = $('div.anythingSlider').index(base.$wrapper) + 1;
			base.regex = new RegExp('panel' + base.runTimes + '-(\\d+)', 'i'); // hash tag regex
			if (base.runTimes === 1) { base.makeActive(); } // make the first slider on the page active
</P><P>			// Make sure easing function exists.
			if (!$.isFunction($.easing[o.easing])) { o.easing = &quot;swing&quot;; }
</P><P>			// If pauseOnHover then add hover effects
			if (o.pauseOnHover) {
				base.$wrapper.hover(function() {
					if (base.playing) {
						base.$el.trigger('slideshow_paused', base);
						base.clearTimer(true);
					}
				}, function() {
					if (base.playing) {
						base.$el.trigger('slideshow_unpaused', base);
						base.startStop(base.playing, true);
					}
				});
			}
</P><P>			// If a hash can not be used to trigger the plugin, then go to start panel
			base.setCurrentPage(base.gotoHash() || o.startPage, false);
</P><P>			// Hide/Show navigation &amp; play/stop controls
			base.slideControls(false);
			base.$wrapper.bind('mouseenter mouseleave', function(e){
				base.hovered = (e.type === &quot;mouseenter&quot;) ? true : false;
				base.slideControls( base.hovered, false );
			});
</P><P>			// Add keyboard navigation
			$(document).keyup(function(e){
				// Stop arrow keys from working when focused on form items
				if (o.enableKeyboard &amp;&amp; base.$wrapper.is('.activeSlider') &amp;&amp; !e.target.tagName.match('TEXTAREA|INPUT|SELECT')) {
					if (!o.vertical &amp;&amp; (e.which === 38 || e.which === 40)) { return; }
					switch (e.which) {
						case 39: case 40: // right &amp; down arrow
							base.goForward();
							break;
						case 37: case 38: // left &amp; up arrow
							base.goBack();
							break;
					}
				}
			});
</P><P>			// Fix tabbing through the page, but don't change the view if the link is in view (showMultiple = true)
			base.$items.delegate('a', 'focus.AnythingSlider', function(e){
				var panel = $(this).closest('.panel'),
				 indx = base.$items.index(panel) + base.adj;
				base.$items.find('.focusedLink').removeClass('focusedLink');
				$(this).addClass('focusedLink');
				base.$window.scrollLeft(0);
				if ( (indx &gt;= base.currentPage + o.showMultiple || indx &lt; base.currentPage)) {
					base.gotoPage(indx);
					e.preventDefault();
				}
			});
</P><P>			// Binds events
			var triggers = &quot;slideshow_paused slideshow_unpaused slide_init slide_begin slideshow_stop slideshow_start initialized swf_completed&quot;.split(&quot; &quot;);
			$.each(&quot;onShowPause onShowUnpause onSlideInit onSlideBegin onShowStop onShowStart onInitialized onSWFComplete&quot;.split(&quot; &quot;), function(i,f){
				if ($.isFunction(o[f])){
					base.$el.bind(triggers[i], o[f]);
				}
			});
			if ($.isFunction(o.onSlideComplete)){
				// Added setTimeout (zero time) to ensure animation is complete... see this bug report: <A href="http://bugs.jquery.com/ticket/7157" class="external free" rel="nofollow">http://bugs.jquery.com/ticket/7157</A>
				base.$el.bind('slide_complete', function(){
					setTimeout(function(){ o.onSlideComplete(base); }, 0);
				});
			}
			base.initialized = true;
			base.$el.trigger('initialized', base);
</P><P>			// trigger the slideshow
			base.startStop(base.playing);
</P><P>		};
</P><P>		// called during initialization &amp; to update the slider if a panel is added or deleted
		base.updateSlider = function(){
			// needed for updating the slider
			base.$el.children('.cloned').remove();
			base.$nav.empty();
			// set currentPage to 1 in case it was zero - occurs when adding slides after removing them all
			base.currentPage = base.currentPage || 1;
</P><P>			base.$items = base.$el.children();
			base.pages = base.$items.length;
			base.dir = (o.vertical) ? 'top' : 'left';
			o.showMultiple = (o.vertical) ? 1 : parseInt(o.showMultiple,10) || 1; // only integers allowed
</P><P>			if (o.showMultiple &gt; 1) {
				if (o.showMultiple &gt; base.pages) { o.showMultiple = base.pages; }
				base.adjustMultiple = (o.infiniteSlides &amp;&amp; base.pages &gt; 1) ? 0 : o.showMultiple - 1;
				base.pages = base.$items.length - base.adjustMultiple;
			}
</P><P>			// Hide navigation &amp; player if there is only one page
			base.$controls
				.add(base.$nav)
				.add(base.$startStop)
				.add(base.$forward)
				.add(base.$back)[(base.pages &lt;= 1) ? 'hide' : 'show']();
			if (base.pages &gt; 1) {
				// Build/update navigation tabs
				base.buildNavigation();
			}
</P><P>			// Top and tail the list with 'visible' number of items, top has the last section, and tail has the first
			// This supports the &quot;infinite&quot; scrolling, also ensures any cloned elements don't duplicate an ID
			// Moved removeAttr before addClass otherwise IE7 ignores the addClass: <A href="http://bugs.jquery.com/ticket/9871" class="external free" rel="nofollow">http://bugs.jquery.com/ticket/9871</A>
			if (o.infiniteSlides &amp;&amp; base.pages &gt; 1) {
				base.$el.prepend( base.$items.filter(':last').clone().removeAttr('id').addClass('cloned') );
				// Add support for multiple sliders shown at the same time
				if (o.showMultiple &gt; 1) {
					base.$el.append( base.$items.filter(':lt(' + o.showMultiple + ')').clone().removeAttr('id').addClass('cloned').addClass('multiple') );
				} else {
					base.$el.append( base.$items.filter(':first').clone().removeAttr('id').addClass('cloned') );
				}
				base.$el.find('.cloned').each(function(){
					// disable all focusable elements in cloned panels to prevent shifting the panels by tabbing
					$(this).find('a,input,textarea,select,button,area').attr('disabled', 'disabled');
					$(this).find('[id]').removeAttr('id');
				});
			}
</P><P>			// We just added two items, time to re-cache the list, then get the dimensions of each panel
			base.$items = base.$el.children().addClass('panel' + (o.vertical ? ' vertical' : <I>));</I>
			base.setDimensions();
</P><P>			// Set the dimensions of each panel
			if (o.resizeContents) {
				base.$items.css('width', base.width);
				base.$wrapper.css('width', base.getDim(base.currentPage)[0]);
				base.$wrapper.add(base.$items).css('height', base.height);
			} else {
				base.$win.load(function(){ base.setDimensions(); }); // set dimensions after all images load
			}
</P><P>			if (base.currentPage &gt; base.pages) {
				base.currentPage = base.pages;
			}
			base.setCurrentPage(base.currentPage, false);
			base.$nav.find('a').eq(base.currentPage - 1).addClass('cur'); // update current selection
</P><P>		};
</P><P>		// Creates the numbered navigation links
		base.buildNavigation = function() {
			if (o.buildNavigation &amp;&amp; (base.pages &gt; 1)) {
				var t, $a;
				base.$items.filter(':not(.cloned)').each(function(i) {
					var index = i + 1;
					t = ((index === 1) ? 'first' : <I>) + ((index === base.pages) ? 'last' : </I>);
</P>
					$a = $('&lt;a href=&quot;#&quot;&gt;&lt;/a&gt;').addClass('panel' + index).wrap('<LI class="' + t + '">');
					base.$nav.append($a.parent()); // use $a.parent() so it will add </LI><LI> instead of only the &lt;a&gt; to the <UL>

					// If a formatter function is present, use it
					if ($.isFunction(o.navigationFormatter)) {
						t = o.navigationFormatter(index, $(this));
						$a.html('<SPAN>' + t + '</SPAN>');
						// Add formatting to title attribute if text is hidden
						if (parseInt($a.find('span').css('text-indent'),10) &lt; 0) { $a.addClass(o.tooltipClass).attr('title', t); }
					} else {
						$a.html('<SPAN>' + index + '</SPAN>');
					}

					$a.bind(o.clickControls, function(e) {
						if (!base.flag &amp;&amp; o.enableNavigation) {
							// prevent running functions twice (once for click, second time for focusin)
							base.flag = true; setTimeout(function(){ base.flag = false; }, 100);
							base.gotoPage(index);
							if (o.hashTags) { base.setHash(index); }
						}
						e.preventDefault();
					});
				});

				// Add navigation tab scrolling
				if (o.navigationSize !== false &amp;&amp; parseInt(o.navigationSize,10) &lt; base.pages) {
					if (!base.$controls.find('.anythingNavWindow').length){
						base.$nav
							.before('</UL></LI><LI class="prev">&lt;a href=&quot;#&quot;&gt;<SPAN>' + o.backText + '</SPAN>&lt;/a&gt;</LI>')
							.after('<UL><LI class="next">&lt;a href=&quot;#&quot;&gt;<SPAN>' + o.forwardText + '</SPAN>&lt;/a&gt;</LI></UL>')
							.wrap('');
<P>					}
					// include half of the left position to include extra width from themes like tabs-light and tabs-dark (still not perfect)
					base.navWidths = base.$nav.find('li').map(function(){
						return $(this).innerWidth() + Math.ceil(parseInt($(this).find('span').css('left'),10)/2 || 0);
					}).get();
					base.navLeft = 1;
					// add 5 pixels to make sure the tabs don't wrap to the next line
					base.$nav.width( base.navWidth( 1, base.pages + 1 ) + 5 );
					base.$controls.find('.anythingNavWindow')
						.width( base.navWidth( 1, o.navigationSize + 1 ) ).end()
						.find('.prev,.next').bind(o.clickControls, function(e) {
							if (!base.flag) {
								base.flag = true; setTimeout(function(){ base.flag = false; }, 200);
								base.navWindow( base.navLeft + o.navigationSize * ( $(this).is('.prev') ? -1 : 1 ) );
							}
							e.preventDefault();
						});
				}
</P><P>			}
		};
</P><P>		base.navWidth = function(x,y){
			var s = Math.min(x,y),
				e = Math.max(x,y),
				w = 0;
			for (; s &lt; e; s++) {
				w += base.navWidths[s-1] || 0;
			}
			return w;
		};
</P><P>		base.navWindow = function(n){
			var p = base.pages - o.navigationSize + 1;
			n = (n &lt;= 1) ? 1 : (n &gt; 1 &amp;&amp; n &lt; p) ? n : p;
			if (n !== base.navLeft) {
				base.$controls.find('.anythingNavWindow').animate(
					{ scrollLeft: base.navWidth(1, n), width: base.navWidth(n, n + o.navigationSize) },
					{ queue: false, duration: o.animationTime });
				base.navLeft = n;
			}
		};
</P><P>		// Creates the Forward/Backward buttons
		base.buildNextBackButtons = function() {
			base.$forward = $('<SPAN class="arrow forward">&lt;a href=&quot;#&quot;&gt;<SPAN>' + o.forwardText + '</SPAN>&lt;/a&gt;</SPAN>');
			base.$back = $('<SPAN class="arrow back">&lt;a href=&quot;#&quot;&gt;<SPAN>' + o.backText + '</SPAN>&lt;/a&gt;</SPAN>');
</P><P>			// Bind to the forward and back buttons
			base.$back.bind(o.clickBackArrow, function(e) {
				// prevent running functions twice (once for click, second time for swipe)
				if (o.enableArrows &amp;&amp; !base.flag) {
					base.flag = true; setTimeout(function(){ base.flag = false; }, 100);
					base.goBack();
				}
				e.preventDefault();
			});
			base.$forward.bind(o.clickForwardArrow, function(e) {
				// prevent running functions twice (once for click, second time for swipe)
				if (o.enableArrows &amp;&amp; !base.flag) {
					base.flag = true; setTimeout(function(){ base.flag = false; }, 100);
					base.goForward();
				}
				e.preventDefault();
			});
			// using tab to get to arrow links will show they have focus (outline is disabled in css)
			base.$back.add(base.$forward).find('a').bind('focusin focusout',function(){
			 $(this).toggleClass('hover');
			});
</P><P>			// Append elements to page
			base.$back.appendTo( (o.appendBackTo !== null &amp;&amp; $(o.appendBackTo).length) ? $(o.appendBackTo) : base.$wrapper );
			base.$forward.appendTo( (o.appendForwardTo !== null &amp;&amp; $(o.appendForwardTo).length) ? $(o.appendForwardTo) : base.$wrapper );
</P><P>			base.$arrowWidth = base.$forward.width(); // assuming the left &amp; right arrows are the same width - used for toggle
		};
</P><P>		// Creates the Start/Stop button
		base.buildAutoPlay = function(){
			base.$startStop
				.html('<SPAN>' + (base.playing ? o.stopText : o.startText) + '</SPAN>')
				.bind(o.clickSlideshow, function(e) {
					if (o.enableStartStop) {
						base.startStop(!base.playing);
						base.makeActive();
						if (base.playing &amp;&amp; !o.autoPlayDelayed) {
							base.goForward(true);
						}
					}
					e.preventDefault();
				})
				// show button has focus while tabbing
				.bind('focusin focusout',function(){
					$(this).toggleClass('hover');
				});
		};
</P><P>		// Adjust slider dimensions on parent element resize
		base.checkResize = function(stopTimer){
			clearTimeout(base.resizeTimer);
			base.resizeTimer = setTimeout(function(){
				var w = base.$outer.width() - base.outerPad[0],
					h = (base.$outer[0].tagName === &quot;BODY&quot; ? base.$win.height() : base.$outer.height()) - base.outerPad[1];
				// base.width = width of one panel, so multiply by # of panels; outerPad is padding added for arrows.
				if (base.width * o.showMultiple !== w || base.height !== h) {
					base.setDimensions(); // adjust panel sizes
					// make sure page is lined up (use -1 animation time, so we can differeniate it from when animationTime = 0)
					base.gotoPage(base.currentPage, base.playing, null, -1);
				}
				if (typeof(stopTimer) === 'undefined'){ base.checkResize(); }
			}, 500);
		};
</P><P>		// Set panel dimensions to either resize content or adjust panel to content
		base.setDimensions = function(){
			var w, h, c, edge = 0,
				// determine panel width
				pw = (o.showMultiple &gt; 1) ? base.width || base.$window.width()/o.showMultiple : base.$window.width(),
				winw = base.$win.width();
			if (o.expand){
				w = base.$outer.width() - base.outerPad[0];
				base.height = h = base.$outer.height() - base.outerPad[1];
				base.$wrapper.add(base.$window).add(base.$items).css({ width: w, height: h });
				base.width = pw = (o.showMultiple &gt; 1) ? w/o.showMultiple : w;
			}
			base.$items.each(function(i){
				c = $(this).children();
				if (o.resizeContents){
					// resize panel
					w = base.width;
					h = base.height;
					$(this).css({ width: w, height: h });
					if (c.length &amp;&amp; c[0].tagName === &quot;EMBED&quot;) { c.attr({ width: '100%', height: '100%' }); } // needed for IE7; also c.length &gt; 1 in IE7
					// resize panel contents, if solitary (wrapped content or solitary image)
					if (c.length === 1){
						c.css({ width: '100%', height: '100%' });
					}
				} else {
					// get panel width &amp; height and save it
					w = $(this).width(); // if not defined, it will return the width of the ul parent
					if (c.length === 1 &amp;&amp; w &gt;= winw){
						w = (c.width() &gt;= winw) ? pw : c.width(); // get width of solitary child
						c.css('max-width', w);   // set max width for all children
					}
					$(this).css('width', w); // set width of panel
					h = (c.length === 1) ? c.outerHeight(true) : $(this).height(); // get height after setting width
					$(this).css('height', h);
				}
				base.panelSize[i] = [w,h,edge];
				edge += (o.vertical) ? h : w;
			});
			// Set total width of slider, Note that this is limited to 32766 by Opera - option removed
			base.$el.css((o.vertical ? 'height' : 'width'), edge);
		};
</P><P>		// get dimension of multiple panels, as needed
		base.getDim = function(page){
			if (base.pages &lt; 1 || isNaN(page)) { return [ base.width, base.height ]; } // prevent errors when base.panelSize is empty
			page = (o.infiniteSlides &amp;&amp; base.pages &gt; 1) ? page : page - 1;
			var i,
				w = base.panelSize[page][0],
				h = base.panelSize[page][1];
			if (o.showMultiple &gt; 1) {
				for (i=1; i &lt; o.showMultiple; i++) {
					w += base.panelSize[(page + i)%o.showMultiple][0];
					h = Math.max(h, base.panelSize[page + i][1]);
				}
			}
			return [w,h];
		};
</P><P>		base.goForward = function(autoplay) {
			base.gotoPage(base.currentPage + o.changeBy * (o.playRtl ? -1 : 1), autoplay);
		};
</P><P>		base.goBack = function(autoplay) {
			base.gotoPage(base.currentPage + o.changeBy * (o.playRtl ? 1 : -1), autoplay);
		};
</P><P>		base.gotoPage = function(page, autoplay, callback, time) {
			if (autoplay !== true) {
				autoplay = false;
				base.startStop(false);
				base.makeActive();
			}
			// check if page is an id or class name
			if (/^[#|.]/.test(page) &amp;&amp; $(page).length) {
				page = $(page).closest('.panel').index() + base.adj;
			}
			// rewind effect occurs here when changeBy &gt; 1 
			if (o.changeBy !== 1){
				if (page &lt; 0) { page += base.pages; }
				if (page &gt; base.pages) { page -= base.pages; }
			}
			if (base.pages &lt;= 1) { return; } // prevents animation
			base.$lastPage = base.$currentPage;
			if (typeof(page) !== &quot;number&quot;) {
				page = o.startPanel;
				base.setCurrentPage(page);
			}
</P><P>			// pause YouTube videos before scrolling or prevent change if playing
			if (autoplay &amp;&amp; o.isVideoPlaying(base)) { return; }
</P><P>			if (page &gt; base.pages + 1 - base.adj) { page = (!o.infiniteSlides &amp;&amp; !o.stopAtEnd) ? 1 : base.pages; }
			if (page &lt; base.adj ) { page = (!o.infiniteSlides &amp;&amp; !o.stopAtEnd) ? base.pages : 1; }
			base.currentPage = ( page &gt; base.pages ) ? base.pages : ( page &lt; 1 ) ? 1 : base.currentPage;
			base.$currentPage = base.$items.eq(base.currentPage - base.adj);
			base.exactPage = page;
			base.$targetPage = base.$items.eq( (page === 0) ? base.pages - base.adj : (page &gt; base.pages) ? 1 - base.adj : page - base.adj );
			time = time || o.animationTime;
			// don't trigger events when time = 1 - to prevent FX from firing multiple times on page resize
			if (time &gt;= 0) { base.$el.trigger('slide_init', base); }
</P><P>			base.slideControls(true, false);
</P><P>			// When autoplay isn't passed, we stop the timer
			if (autoplay !== true) { autoplay = false; }
			// Stop the slider when we reach the last page, if the option stopAtEnd is set to true
			if (!autoplay || (o.stopAtEnd &amp;&amp; page === base.pages)) { base.startStop(false); }
</P><P>			if (time &gt;= 0) { base.$el.trigger('slide_begin', base); }
</P><P>			// delay starting slide animation
			setTimeout(function(d){
				// resize slider if content size varies
				if (!o.resizeContents) {
					// animating the wrapper resize before the window prevents flickering in Firefox
					d = base.getDim(page);
					base.$wrapper.filter(':not(:animated)').animate(
						// prevent animating a dimension to zero
						{ width: d[0] || base.width, height: d[1] || base.height },
						{ queue: false, duration: (time &lt; 0 ? 0 : time), easing: o.easing }
					);
				}
				d = {};
				d[base.dir] = -base.panelSize[(o.infiniteSlides &amp;&amp; base.pages &gt; 1) ? page : page - 1][2];
				// Animate Slider
				base.$el.filter(':not(:animated)').animate(
					d, { queue: false, duration: time, easing: o.easing, complete: function(){ base.endAnimation(page, callback, time); } }
				);
			}, parseInt(o.delayBeforeAnimate, 10) || 0);
		};
</P><P>		base.endAnimation = function(page, callback, time){
			if (page === 0) {
				base.$el.css( base.dir, -base.panelSize[base.pages][2]);
				page = base.pages;
			} else if (page &gt; base.pages) {
				// reset back to start position
				base.$el.css( base.dir, -base.panelSize[1][2]);
				page = 1;
			}
			base.exactPage = page;
			base.setCurrentPage(page, false);
			// Add active panel class
			base.$items.removeClass('activePage').eq(page - base.adj).addClass('activePage');
</P><P>			if (!base.hovered) { base.slideControls(false); }
</P><P>			if (time &gt;= 0) { base.$el.trigger('slide_complete', base); }
			// callback from external slide control: $('#slider').anythingSlider(4, function(slider){ })
			if (typeof callback === 'function') { callback(base); }
</P><P>			// Continue slideshow after a delay
			if (o.autoPlayLocked &amp;&amp; !base.playing) {
				setTimeout(function(){
					base.startStop(true);
				// subtract out slide delay as the slideshow waits that additional time.
				}, o.resumeDelay - (o.autoPlayDelayed ? o.delay : 0));
			}
		};
</P><P>		base.setCurrentPage = function(page, move) {
			page = parseInt(page, 10);
			if (base.pages &lt; 1 || page === 0 || isNaN(page)) { return; }
			if (page &gt; base.pages + 1 - base.adj) { page = base.pages - base.adj; }
			if (page &lt; base.adj ) { page = 1; }
</P><P>			// Set visual
			if (o.buildNavigation){
				base.$nav
					.find('.cur').removeClass('cur').end()
					.find('a').eq(page - 1).addClass('cur');
			}
</P><P>			// hide/show arrows based on infinite scroll mode
			if (!o.infiniteSlides &amp;&amp; o.stopAtEnd){
				base.$wrapper
					.find('span.forward')[ page === base.pages ? 'addClass' : 'removeClass']('disabled').end()
					.find('span.back')[ page === 1 ? 'addClass' : 'removeClass']('disabled');
				if (page === base.pages &amp;&amp; base.playing) { base.startStop(); }
			}
</P><P>			// Only change left if move does not equal false
			if (!move) {
				var d = base.getDim(page);
				base.$wrapper
					.css({ width: d[0], height: d[1] })
					.add(base.$window).scrollLeft(0); // reset in case tabbing changed this scrollLeft - probably overly redundant
				base.$el.css( base.dir, -base.panelSize[(o.infiniteSlides &amp;&amp; base.pages &gt; 1) ? page : page - 1][2] );
			}
			// Update local variable
			base.currentPage = page;
			base.$currentPage = base.$items.removeClass('activePage').eq(page - base.adj).addClass('activePage');
</P><P>		};
</P><P>		base.makeActive = function(){
			// Set current slider as active so keyboard navigation works properly
			if (!base.$wrapper.is('.activeSlider')){
				$('.activeSlider').removeClass('activeSlider');
				base.$wrapper.addClass('activeSlider');
			}
		};
</P><P>		// This method tries to find a hash that matches an ID and panel-X
		// If either found, it tries to find a matching item
		// If that is found as well, then it returns the page number
		base.gotoHash = function(){
			var h = base.win.location.hash,
				i = h.indexOf('&amp;'),
				n = h.match(base.regex);
			if (n === null &amp;&amp; !/^#&amp;/.test(h)) {
				// #quote2&amp;panel1-3&amp;panel3-3
				h = h.substring(0, (i &gt;= 0 ? i : h.length));
				// ensure the element is in the same slider
				n = ($(h).closest('.anythingBase')[0] === base.el) ? $(h).closest('.panel').index() : null;
			} else if (n !== null) {
				// #&amp;panel1-3&amp;panel3-3
				n = (o.hashTags) ? parseInt(n[1],10) : null;
			}
			return n;
		};
</P><P>		base.setHash = function(n){
			var s = 'panel' + base.runTimes + '-',
				h = base.win.location.hash;
			if ( typeof h !== 'undefined' ) {
				base.win.location.hash = (h.indexOf(s) &gt; 0) ? h.replace(base.regex, s + n) : h + &quot;&amp;&quot; + s + n;
			}
		};
</P><P>		// Slide controls (nav and play/stop button up or down)
		base.slideControls = function(toggle){
			var dir = (toggle) ? 'slideDown' : 'slideUp',
				t1 = (toggle) ? 0 : o.animationTime,
				t2 = (toggle) ? o.animationTime: 0,
				op = (toggle) ? 1 : 0,
				sign = (toggle) ? 0 : 1; // 0 = visible, 1 = hidden
			if (o.toggleControls) {
				base.$controls.stop(true,true).delay(t1)[dir](o.animationTime/2).delay(t2);
			}
			if (o.buildArrows &amp;&amp; o.toggleArrows) {
				if (!base.hovered &amp;&amp; base.playing) { sign = 1; op = 0; } // don't animate arrows during slideshow
				base.$forward.stop(true,true).delay(t1).animate({ right: sign * base.$arrowWidth, opacity: op }, o.animationTime/2);
				base.$back.stop(true,true).delay(t1).animate({ left: sign * base.$arrowWidth, opacity: op }, o.animationTime/2);
			}
		};
</P><P>		base.clearTimer = function(paused){
			// Clear the timer only if it is set
			if (base.timer) {
				base.win.clearInterval(base.timer);
				if (!paused &amp;&amp; base.slideshow) {
					base.$el.trigger('slideshow_stop', base);
					base.slideshow = false;
				}
			}
		};
</P><P>		// Pass startStop(false) to stop and startStop(true) to play
		base.startStop = function(playing, paused) {
			if (playing !== true) { playing = false; }  // Default if not supplied is false
			base.playing = playing;
</P><P>			if (playing &amp;&amp; !paused) {
				base.$el.trigger('slideshow_start', base);
				base.slideshow = true;
			}
</P><P>			// Toggle playing and text
			if (o.buildStartStop) {
				base.$startStop.toggleClass('playing', playing).find('span').html( playing ? o.stopText : o.startText );
				// add button text to title attribute if it is hidden by text-indent
				if (parseInt(base.$startStop.find('span').css('text-indent'),10) &lt; 0) {
					base.$startStop.addClass(o.tooltipClass).attr( 'title', playing ? o.stopText : o.startText );
				}
			}
</P><P>			// Pause slideshow while video is playing
			if (playing){
				base.clearTimer(true); // Just in case this was triggered twice in a row
				base.timer = base.win.setInterval(function() {
					// prevent autoplay if video is playing
					if ( !o.isVideoPlaying(base) ) {
						base.goForward(true);
					// stop slideshow if resume if false
					} else if (!o.resumeOnVideoEnd) {
						base.startStop();
					}
				}, o.delay);
			} else {
				base.clearTimer();
			}
		};
</P><P>		// Trigger the initialization
		base.init();
	};
</P><P>	$.anythingSlider.defaults = {
		// Appearance
		theme               : &quot;default&quot;, // Theme name, add the css stylesheet manually
		expand              : false,     // If true, the entire slider will expand to fit the parent element
		resizeContents      : true,      // If true, solitary images/objects in the panel will expand to fit the viewport
		vertical            : false,     // If true, all panels will slide vertically; they slide horizontally otherwise
		showMultiple        : false,     // Set this value to a number and it will show that many slides at once
		easing              : &quot;swing&quot;,   // Anything other than &quot;linear&quot; or &quot;swing&quot; requires the easing plugin or jQuery UI
</P><P>		buildArrows         : true,      // If true, builds the forwards and backwards buttons
		buildNavigation     : true,      // If true, builds a list of anchor links to link to each panel
		buildStartStop      : true,      // ** If true, builds the start/stop button
</P><P>		appendForwardTo     : null,      // Append forward arrow to a HTML element (jQuery Object, selector or HTMLNode), if not null
		appendBackTo        : null,      // Append back arrow to a HTML element (jQuery Object, selector or HTMLNode), if not null
		appendControlsTo    : null,      // Append controls (navigation + start-stop) to a HTML element (jQuery Object, selector or HTMLNode), if not null
		appendNavigationTo  : null,      // Append navigation buttons to a HTML element (jQuery Object, selector or HTMLNode), if not null
		appendStartStopTo   : null,      // Append start-stop button to a HTML element (jQuery Object, selector or HTMLNode), if not null
</P><P>		toggleArrows        : false,     // If true, side navigation arrows will slide out on hovering &amp; hide @ other times
		toggleControls      : false,     // if true, slide in controls (navigation + play/stop button) on hover and slide change, hide @ other times
</P><P>		startText           : &quot;Start&quot;,   // Start button text
		stopText            : &quot;Stop&quot;,    // Stop button text
		forwardText         : &quot;»&quot;, // Link text used to move the slider forward (hidden by CSS, replaced with arrow image)
		backText            : &quot;«&quot;, // Link text used to move the slider back (hidden by CSS, replace with arrow image)
		tooltipClass        : &quot;tooltip&quot;, // Class added to navigation &amp; start/stop button (text copied to title if it is hidden by a negative text indent)
</P><P>		// Function
		enableArrows        : true,      // if false, arrows will be visible, but not clickable.
		enableNavigation    : true,      // if false, navigation links will still be visible, but not clickable.
		enableStartStop     : true,      // if false, the play/stop button will still be visible, but not clickable. Previously &quot;enablePlay&quot;
		enableKeyboard      : true,      // if false, keyboard arrow keys will not work for this slider.
</P><P>		// Navigation
		startPanel          : 1,         // This sets the initial panel
		changeBy            : 1,         // Amount to go forward or back when changing panels.
		hashTags            : true,      // Should links change the hashtag in the URL?
		infiniteSlides      : true,      // if false, the slider will not wrap &amp; not clone any panels
		navigationFormatter : null,      // Details at the top of the file on this use (advanced use)
		navigationSize      : false,     // Set this to the maximum number of visible navigation tabs; false to disable
</P><P>		// Slideshow options
		autoPlay            : false,     // If true, the slideshow will start running; replaces &quot;startStopped&quot; option
		autoPlayLocked      : false,     // If true, user changing slides will not stop the slideshow
		autoPlayDelayed     : false,     // If true, starting a slideshow will delay advancing slides; if false, the slider will immediately advance to the next slide when slideshow starts
		pauseOnHover        : true,      // If true &amp; the slideshow is active, the slideshow will pause on hover
		stopAtEnd           : false,     // If true &amp; the slideshow is active, the slideshow will stop on the last page. This also stops the rewind effect when infiniteSlides is false.
		playRtl             : false,     // If true, the slideshow will move right-to-left
</P><P>		// Times
		delay               : 3000,      // How long between slideshow transitions in AutoPlay mode (in milliseconds)
		resumeDelay         : 15000,     // Resume slideshow after user interaction, only if autoplayLocked is true (in milliseconds).
		animationTime       : 600,       // How long the slideshow transition takes (in milliseconds)
		delayBeforeAnimate  : 0,         // How long to pause slide animation before going to the desired slide (used if you want your &quot;out&quot; FX to show).
</P><P>		// Callbacks - removed from options to reduce size - they still work
</P><P>		// Interactivity
		clickForwardArrow   : &quot;click&quot;,         // Event used to activate forward arrow functionality (e.g. add jQuery mobile's &quot;swiperight&quot;)
		clickBackArrow      : &quot;click&quot;,         // Event used to activate back arrow functionality (e.g. add jQuery mobile's &quot;swipeleft&quot;)
		clickControls       : &quot;click focusin&quot;, // Events used to activate navigation control functionality
		clickSlideshow      : &quot;click&quot;,         // Event used to activate slideshow play/stop button
</P><P>		// Video
		resumeOnVideoEnd    : true,      // If true &amp; the slideshow is active &amp; a supported video is playing, it will pause the autoplay until the video is complete
		addWmodeToObject    : &quot;opaque&quot;,  // If your slider has an embedded object, the script will automatically add a wmode parameter with this setting
		isVideoPlaying      : function(base){ return false; } // return true if video is playing or false if not - used by video extension
</P><P>	};
</P><P>	$.fn.anythingSlider = function(options, callback) {
</P><P>		return this.each(function(){
			var page, anySlide = $(this).data('AnythingSlider');
</P><P>			// initialize the slider but prevent multiple initializations
			if ((typeof(options)).match('object|undefined')){
				if (!anySlide) {
					(new $.anythingSlider(this, options));
				} else {
					anySlide.updateSlider();
				}
			// If options is a number, process as an external link to page #: $(element).anythingSlider(#)
			} else if (/\d/.test(options) &amp;&amp; !isNaN(options) &amp;&amp; anySlide) {
				page = (typeof(options) === &quot;number&quot;) ? options : parseInt($.trim(options),10); // accepts &quot;  2  &quot;
				// ignore out of bound pages
				if ( page &gt;= 1 &amp;&amp; page &lt;= anySlide.pages ) {
					anySlide.gotoPage(page, false, callback); // page #, autoplay, one time callback
				}
			// Accept id or class name
			} else if (/^[#|.]/.test(options) &amp;&amp; $(options).length) {
				anySlide.gotoPage(options, false, callback);
			}
		});
	};
</P>
})(jQuery);<DIV class="printfooter">
Retrieved from &quot;<A href="http://2011.igem.org/Team:UPO-Sevilla/js/anythingSlider.js">http://2011.igem.org/Team:UPO-Sevilla/js/anythingSlider.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:UPO-Sevilla/js/anythingSlider.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:UPO-Sevilla/js/anythingSlider.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:UPO-Sevilla/js/anythingSlider.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:UPO-Sevilla/js/anythingSlider.js&amp;oldid=144707" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2011.igem.org:Privacy_policy" title="2011.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2011.igem.org:General_disclaimer" title="2011.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>