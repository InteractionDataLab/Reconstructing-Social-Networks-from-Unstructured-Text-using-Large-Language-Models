<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_Johns_Hopkins_fancyboxjs"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:Johns_Hopkins/fancyboxjs">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:Johns_Hopkins/fancyboxjs&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:Johns_Hopkins/fancyboxjs&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:Johns_Hopkins/fancyboxjs&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:Johns_Hopkins/fancyboxjs" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:Johns Hopkins/fancyboxjs</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2011.igem.org</H3><P>/*
</P><PRE>* FancyBox - simple jQuery plugin for fancy image zooming
* Examples and documentation at: <A href="http://fancy.klade.lv/" class="external free" rel="nofollow">http://fancy.klade.lv/</A>
* Version: 1.0.0 (29/04/2008)
* Copyright (c) 2008 Janis Skarnelis
* Licensed under the MIT License: <A href="http://www.opensource.org/licenses/mit-license.php" class="external free" rel="nofollow">http://www.opensource.org/licenses/mit-license.php</A>
* Requires: jQuery v1.2.1 or later
</PRE><UL><LI>/
</LI></UL><P>(function($) {
</P><PRE>   var opts = {},
</PRE><P>		imgPreloader = new Image, imgTypes = ['png', 'jpg', 'jpeg', 'gif'],
		loadingTimer, loadingFrame = 1;
</P><PRE>   $.fn.fancybox = function(settings) {
       opts.settings = $.extend({}, $.fn.fancybox.defaults, settings);
</PRE><PRE>       $.fn.fancybox.init();
</PRE><PRE>       return this.each(function() {
           var $this = $(this);
           var o = $.metadata ? $.extend({}, opts.settings, $this.metadata()) : opts.settings;
</PRE><PRE>           $this.unbind('click').click(function() {
               $.fn.fancybox.start(this, o); return false;
           });
       });
   };
</PRE><PRE>   $.fn.fancybox.start = function(el, o) {
       if (opts.animating) return false;
</PRE><PRE>       if (o.overlayShow) {
</PRE>
            $(&quot;#fancy_wrap&quot;).prepend('');
<PRE>           $(&quot;#fancy_overlay&quot;).css({ 'width': $(window).width(), 'height': $(document).height(), 'opacity': o.overlayOpacity });
</PRE><PRE>           if ($.browser.msie) {
               $(&quot;#fancy_wrap&quot;).prepend('&lt;iframe id=&quot;fancy_bigIframe&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;');
               $(&quot;#fancy_bigIframe&quot;).css({ 'width': $(window).width(), 'height': $(document).height(), 'opacity': 0 });
           }
</PRE><PRE>           $(&quot;#fancy_overlay&quot;).click($.fn.fancybox.close);
       }
</PRE><PRE>       opts.itemArray = [];
       opts.itemNum = 0;
</PRE><PRE>       if (jQuery.isFunction(o.itemLoadCallback)) {
           o.itemLoadCallback.apply(this, [opts]);
</PRE><PRE>           var c = $(el).children(&quot;img:first&quot;).length ? $(el).children(&quot;img:first&quot;) : $(el);
           var tmp = { 'width': c.width(), 'height': c.height(), 'pos': $.fn.fancybox.getPosition(c) }
</PRE><PRE>           for (var i = 0; i &lt; opts.itemArray.length; i++) {
               opts.itemArray[i].o = $.extend({}, o, opts.itemArray[i].o);
</PRE><PRE>               if (o.zoomSpeedIn &gt; 0 || o.zoomSpeedOut &gt; 0) {
                   opts.itemArray[i].orig = tmp;
               }
           }
</PRE><PRE>       } else {
           if (!el.rel || el.rel == <I>) {</I>
               var item = { url: el.href, title: el.title, o: o };
</PRE><PRE>               if (o.zoomSpeedIn &gt; 0 || o.zoomSpeedOut &gt; 0) {
                   var c = $(el).children(&quot;img:first&quot;).length ? $(el).children(&quot;img:first&quot;) : $(el);
                   item.orig = { 'width': c.width(), 'height': c.height(), 'pos': $.fn.fancybox.getPosition(c) }
               }
</PRE><PRE>               opts.itemArray.push(item);
</PRE><PRE>           } else {
               var arr = $(&quot;a[@rel=&quot; + el.rel + &quot;]&quot;).get();
</PRE><PRE>               for (var i = 0; i &lt; arr.length; i++) {
                   var tmp = $.metadata ? $.extend({}, o, $(arr[i]).metadata()) : o;
                   var item = { url: arr[i].href, title: arr[i].title, o: tmp };
</PRE><PRE>                   if (o.zoomSpeedIn &gt; 0 || o.zoomSpeedOut &gt; 0) {
                       var c = $(arr[i]).children(&quot;img:first&quot;).length ? $(arr[i]).children(&quot;img:first&quot;) : $(el);
</PRE><PRE>                       item.orig = { 'width': c.width(), 'height': c.height(), 'pos': $.fn.fancybox.getPosition(c) }
                   }
</PRE><PRE>                   if (arr[i].href == el.href) opts.itemNum = i;
</PRE><PRE>                   opts.itemArray.push(item);
               }
           }
       }
</PRE><PRE>       $.fn.fancybox.changeItem(opts.itemNum);
   };
</PRE><PRE>   $.fn.fancybox.changeItem = function(n) {
       $.fn.fancybox.showLoading();
</PRE><PRE>       opts.itemNum = n;
</PRE><PRE>       $(&quot;#fancy_nav&quot;).empty();
       $(&quot;#fancy_outer&quot;).stop();
       $(&quot;#fancy_title&quot;).hide();
       $(document).unbind(&quot;keydown&quot;);
</PRE><PRE>       imgRegExp = imgTypes.join('|');
       imgRegExp = new RegExp('\.' + imgRegExp + '$', 'i');
</PRE><PRE>       var url = opts.itemArray[n].url;
</PRE><PRE>       if (url.match(/#/)) {
           var target = window.location.href.split('#')[0]; target = url.replace(target, <I>);</I></PRE>
            $.fn.fancybox.showItem('<DIV id="fancy_div">' + $(target).html() + '</DIV>');
<PRE>           $(&quot;#fancy_loading&quot;).hide();
</PRE><PRE>       } else if (url.match(imgRegExp)) {
           $(imgPreloader).unbind('load').bind('load', function() {
               $(&quot;#fancy_loading&quot;).hide();
</PRE><PRE>               opts.itemArray[n].o.frameWidth = imgPreloader.width;
               opts.itemArray[n].o.frameHeight = imgPreloader.height;
</PRE><PRE>               $.fn.fancybox.showItem('&lt;img id=&quot;fancy_img&quot; src=&quot;' + imgPreloader.src + '&quot; /&gt;');
</PRE><PRE>           }).attr('src', url + '?rand=' + Math.floor(Math.random() * 999999999));
</PRE><PRE>       } else if (url.match(/youtube\.com\/watch/i)) {
           var vidId = url.split('v=')[1].split('&amp;')[0];
           var vidSrc = &quot;<A href="http://www.youtube.com/v/" class="external free" rel="nofollow">http://www.youtube.com/v/</A>&quot; + vidId + &quot;&amp;hl=en&amp;fs=1&amp;autoplay=1&amp;rel=0&quot;;
           var flashvars = {};
           var params = {};
           params.wmode = &quot;transparent&quot;;
           params.allowFullScreen = &quot;true&quot;;
           params.allowscriptaccess = &quot;always&quot;;
           var attributes = {};
</PRE>
            $.fn.fancybox.showItem('<DIV id="fancy_video">No video available</DIV>');
<PRE>           swfobject.embedSWF(vidSrc, &quot;fancy_video&quot;, opts.itemArray[n].o.frameWidth, opts.itemArray[n].o.frameHeight, &quot;9.0.0&quot;, false, flashvars, params, attributes);
           $(&quot;#fancy_loading&quot;).hide();
</PRE><PRE>       } else {
           $.fn.fancybox.showItem('&lt;iframe id=&quot;fancy_frame&quot; onload=&quot;$.fn.fancybox.showIframe()&quot; name=&quot;fancy_iframe' + Math.round(Math.random() * 1000) + '&quot; frameborder=&quot;0&quot; hspace=&quot;0&quot; src=&quot;' + url + '&quot;&gt;&lt;/iframe&gt;');
       }
   };
</PRE><PRE>   $.fn.fancybox.showIframe = function() {
       $(&quot;#fancy_loading&quot;).hide();
       $(&quot;#fancy_frame&quot;).show();
   };
</PRE><PRE>   $.fn.fancybox.showItem = function(val) {
       $.fn.fancybox.preloadNeighborImages();
</PRE><PRE>       var viewportPos = $.fn.fancybox.getViewport();
       var itemSize = $.fn.fancybox.getMaxSize(viewportPos[0] - 50, viewportPos[1] - 100, opts.itemArray[opts.itemNum].o.frameWidth, opts.itemArray[opts.itemNum].o.frameHeight);
</PRE><PRE>       var itemLeft = viewportPos[2] + Math.round((viewportPos[0] - itemSize[0]) / 2) - 20;
       var itemTop = viewportPos[3] + Math.round((viewportPos[1] - itemSize[1]) / 2) - 40;
</PRE><PRE>       var itemOpts = {
           'left': itemLeft,
           'top': itemTop,
           'width': itemSize[0] + 'px',
           'height': itemSize[1] + 'px'
       }
</PRE><PRE>       if (opts.active) {
           $('#fancy_content').fadeOut(&quot;normal&quot;, function() {
               $(&quot;#fancy_content&quot;).empty();
</PRE><PRE>               $(&quot;#fancy_outer&quot;).animate(itemOpts, &quot;normal&quot;, function() {
                   $(&quot;#fancy_content&quot;).append($(val)).fadeIn(&quot;normal&quot;);
                   $.fn.fancybox.updateDetails();
               });
           });
</PRE><PRE>       } else {
           opts.active = true;
</PRE><PRE>           $(&quot;#fancy_content&quot;).empty();
</PRE><PRE>           if ($(&quot;#fancy_content&quot;).is(&quot;:animated&quot;)) {
               console.info('animated!');
           }
</PRE><PRE>           if (opts.itemArray[opts.itemNum].o.zoomSpeedIn &gt; 0) {
               opts.animating = true;
               itemOpts.opacity = &quot;show&quot;;
</PRE><PRE>               $(&quot;#fancy_outer&quot;).css({
                   'top': opts.itemArray[opts.itemNum].orig.pos.top - 18,
                   'left': opts.itemArray[opts.itemNum].orig.pos.left - 18,
                   'height': opts.itemArray[opts.itemNum].orig.height,
                   'width': opts.itemArray[opts.itemNum].orig.width
               });
</PRE><PRE>               $(&quot;#fancy_content&quot;).append($(val)).show();
</PRE><PRE>               $(&quot;#fancy_outer&quot;).animate(itemOpts, opts.itemArray[opts.itemNum].o.zoomSpeedIn, function() {
                   opts.animating = false;
                   $.fn.fancybox.updateDetails();
               });
</PRE><PRE>           } else {
               $(&quot;#fancy_content&quot;).append($(val)).show();
               $(&quot;#fancy_outer&quot;).css(itemOpts).show();
               $.fn.fancybox.updateDetails();
           }
       }
   };
</PRE><PRE>   $.fn.fancybox.updateDetails = function() {
       $(&quot;#fancy_bg,#fancy_close&quot;).show();
</PRE><PRE>       if (opts.itemArray[opts.itemNum].title !== undefined &amp;&amp; opts.itemArray[opts.itemNum].title !== <I>) {</I>
           $('#fancy_title div').html(opts.itemArray[opts.itemNum].title);
           $('#fancy_title').show();
       }
</PRE><PRE>       if (opts.itemArray[opts.itemNum].o.hideOnContentClick) {
           $(&quot;#fancy_content&quot;).click($.fn.fancybox.close);
       } else {
           $(&quot;#fancy_content&quot;).unbind('click');
       }
</PRE><PRE>       if (opts.itemNum != 0) {
           $(&quot;#fancy_nav&quot;).append('&lt;a id=&quot;fancy_left&quot; href=&quot;javascript:;&quot;&gt;&lt;/a&gt;');
</PRE><PRE>           $('#fancy_left').click(function() {
               $.fn.fancybox.changeItem(opts.itemNum - 1); return false;
           });
       }
</PRE><PRE>       if (opts.itemNum != (opts.itemArray.length - 1)) {
           $(&quot;#fancy_nav&quot;).append('&lt;a id=&quot;fancy_right&quot; href=&quot;javascript:;&quot;&gt;&lt;/a&gt;');
</PRE><PRE>           $('#fancy_right').click(function() {
               $.fn.fancybox.changeItem(opts.itemNum + 1); return false;
           });
       }
</PRE><PRE>       $(document).keydown(function(event) {
           if (event.keyCode == 27) {
               $.fn.fancybox.close();
</PRE><PRE>           } else if (event.keyCode == 37 &amp;&amp; opts.itemNum != 0) {
               $.fn.fancybox.changeItem(opts.itemNum - 1);
</PRE><PRE>           } else if (event.keyCode == 39 &amp;&amp; opts.itemNum != (opts.itemArray.length - 1)) {
               $.fn.fancybox.changeItem(opts.itemNum + 1);
           }
       });
   };
</PRE><PRE>   $.fn.fancybox.preloadNeighborImages = function() {
       if ((opts.itemArray.length - 1) &gt; opts.itemNum) {
           preloadNextImage = new Image();
           preloadNextImage.src = opts.itemArray[opts.itemNum + 1].url;
       }
</PRE><PRE>       if (opts.itemNum &gt; 0) {
           preloadPrevImage = new Image();
           preloadPrevImage.src = opts.itemArray[opts.itemNum - 1].url;
       }
   };
</PRE><PRE>   $.fn.fancybox.close = function() {
       if (opts.animating) return false;
</PRE><PRE>       $(imgPreloader).unbind('load');
       $(document).unbind(&quot;keydown&quot;);
</PRE><PRE>       $(&quot;#fancy_loading,#fancy_title,#fancy_close,#fancy_bg&quot;).hide();
</PRE><PRE>       $(&quot;#fancy_nav&quot;).empty();
</PRE><PRE>       opts.active = false;
</PRE><PRE>       if (opts.itemArray[opts.itemNum].o.zoomSpeedOut &gt; 0) {
           var itemOpts = {
               'top': opts.itemArray[opts.itemNum].orig.pos.top - 18,
               'left': opts.itemArray[opts.itemNum].orig.pos.left - 18,
               'height': opts.itemArray[opts.itemNum].orig.height,
               'width': opts.itemArray[opts.itemNum].orig.width,
               'opacity': 'hide'
           };
</PRE><PRE>           opts.animating = true;
</PRE><PRE>           $(&quot;#fancy_outer&quot;).animate(itemOpts, opts.itemArray[opts.itemNum].o.zoomSpeedOut, function() {
               $(&quot;#fancy_content&quot;).hide().empty();
               $(&quot;#fancy_overlay,#fancy_bigIframe&quot;).remove();
               opts.animating = false;
           });
</PRE><PRE>       } else {
           $(&quot;#fancy_outer&quot;).hide();
           $(&quot;#fancy_content&quot;).hide().empty();
           $(&quot;#fancy_overlay,#fancy_bigIframe&quot;).fadeOut(&quot;fast&quot;).remove();
       }
   };
</PRE><PRE>   $.fn.fancybox.showLoading = function() {
       clearInterval(loadingTimer);
</PRE><PRE>       var pos = $.fn.fancybox.getViewport();
</PRE><PRE>       $(&quot;#fancy_loading&quot;).css({ 'left': ((pos[0] - 40) / 2 + pos[2]), 'top': ((pos[1] - 40) / 2 + pos[3]) }).show();
       $(&quot;#fancy_loading&quot;).bind('click', $.fn.fancybox.close);
</PRE><PRE>       loadingTimer = setInterval($.fn.fancybox.animateLoading, 66);
   };
</PRE><PRE>   $.fn.fancybox.animateLoading = function(el, o) {
       if (!$(&quot;#fancy_loading&quot;).is(':visible')) {
           clearInterval(loadingTimer);
           return;
       }
</PRE><PRE>       $(&quot;#fancy_loading &gt; div&quot;).css('top', (loadingFrame * -40) + 'px');
</PRE><PRE>       loadingFrame = (loadingFrame + 1) % 12;
   };
</PRE><PRE>   $.fn.fancybox.init = function() {
       if (!$('#fancy_wrap').length) {
</PRE>
            $('').appendTo(&quot;body&quot;);
            $('').prependTo(&quot;#fancy_inner&quot;);
            $('').appendTo('#fancy_title');
<PRE>       }
</PRE><PRE>       if ($.browser.msie) {
           $(&quot;#fancy_inner&quot;).prepend('&lt;iframe id=&quot;fancy_freeIframe&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;');
       }
</PRE><PRE>       if (jQuery.fn.pngFix) $(document).pngFix();
</PRE><PRE>       $(&quot;#fancy_close&quot;).click($.fn.fancybox.close);
   };
</PRE><PRE>   $.fn.fancybox.getPosition = function(el) {
       var pos = el.offset();
</PRE><PRE>       pos.top += $.fn.fancybox.num(el, 'paddingTop');
       pos.top += $.fn.fancybox.num(el, 'borderTopWidth');
</PRE><PRE>       pos.left += $.fn.fancybox.num(el, 'paddingLeft');
       pos.left += $.fn.fancybox.num(el, 'borderLeftWidth');
</PRE><PRE>       return pos;
   };
</PRE><PRE>   $.fn.fancybox.num = function(el, prop) {
       return parseInt($.curCSS(el.jquery ? el[0] : el, prop, true)) || 0;
   };
</PRE><PRE>   $.fn.fancybox.getPageScroll = function() {
       var xScroll, yScroll;
</PRE><PRE>       if (self.pageYOffset) {
           yScroll = self.pageYOffset;
           xScroll = self.pageXOffset;
       } else if (document.documentElement &amp;&amp; document.documentElement.scrollTop) {
           yScroll = document.documentElement.scrollTop;
           xScroll = document.documentElement.scrollLeft;
       } else if (document.body) {
           yScroll = document.body.scrollTop;
           xScroll = document.body.scrollLeft;
       }
</PRE><PRE>       return [xScroll, yScroll];
   };
</PRE><PRE>   $.fn.fancybox.getViewport = function() {
       var scroll = $.fn.fancybox.getPageScroll();
</PRE><PRE>       return [$(window).width(), $(window).height(), scroll[0], scroll[1]];
   };
</PRE><PRE>   $.fn.fancybox.getMaxSize = function(maxWidth, maxHeight, imageWidth, imageHeight) {
       var r = Math.min(Math.min(maxWidth, imageWidth) / imageWidth, Math.min(maxHeight, imageHeight) / imageHeight);
</PRE><PRE>       return [Math.round(r * imageWidth), Math.round(r * imageHeight)];
   };
</PRE><PRE>   $.fn.fancybox.defaults = {
       hideOnContentClick: false,
       zoomSpeedIn: 500,
       zoomSpeedOut: 500,
       frameWidth: 600,
       frameHeight: 400,
       overlayShow: false,
       overlayOpacity: 0.4,
       itemLoadCallback: null
   };
</PRE><P>})(jQuery);
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2011.igem.org/Team:Johns_Hopkins/fancyboxjs">http://2011.igem.org/Team:Johns_Hopkins/fancyboxjs</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:Johns_Hopkins/fancyboxjs" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:Johns_Hopkins/fancyboxjs" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:Johns_Hopkins/fancyboxjs&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:Johns_Hopkins/fancyboxjs&amp;oldid=250174" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2011.igem.org:Privacy_policy" title="2011.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2011.igem.org:General_disclaimer" title="2011.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>