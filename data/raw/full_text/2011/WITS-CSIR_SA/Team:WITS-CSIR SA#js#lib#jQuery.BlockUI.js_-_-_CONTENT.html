<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_WITS-CSIR_SA_js_lib_jQuery_BlockUI_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:WITS-CSIR SA/js/lib/jQuery.BlockUI.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2011.igem.org</H3><P>/*!
</P><PRE>* jQuery blockUI plugin
* Version 2.38 (29-MAR-2011)
* @requires jQuery v1.2.3 or later
*
* Examples at: <A href="http://malsup.com/jquery/block/" class="external free" rel="nofollow">http://malsup.com/jquery/block/</A>
* Copyright (c) 2007-2010 M. Alsup
* Dual licensed under the MIT and GPL licenses:
* <A href="http://www.opensource.org/licenses/mit-license.php" class="external free" rel="nofollow">http://www.opensource.org/licenses/mit-license.php</A>
* <A href="http://www.gnu.org/licenses/gpl.html" class="external free" rel="nofollow">http://www.gnu.org/licenses/gpl.html</A>
*
* Thanks to Amir-Hossein Sobhi for some excellent contributions!
*/
</PRE><DL><DT>(function($) {
</DT></DL><P>if (/1\.(0|1|2)\.(0|1|2)/.test($.fn.jquery) || /^1.1/.test($.fn.jquery)) {
	alert('blockUI requires jQuery v1.2.3 or later!  You are using v' + $.fn.jquery);
	return;
}
</P><P>$.fn._fadeIn = $.fn.fadeIn;
</P><P>var noOp = function() {};
</P><P>// this bit is to ensure we don't call setExpression when we shouldn't (with extra muscle to handle
// retarded userAgent strings on Vista)
var mode = document.documentMode || 0;
var setExpr = $.browser.msie &amp;&amp; (($.browser.version &lt; 8 &amp;&amp; !mode) || mode &lt; 8);
var ie6 = $.browser.msie &amp;&amp; /MSIE 6.0/.test(navigator.userAgent) &amp;&amp; !mode;
</P><P>// global $ methods for blocking/unblocking the entire page
$.blockUI   = function(opts) { install(window, opts); };
$.unblockUI = function(opts) { remove(window, opts); };
</P><P>// convenience method for quick growl-like notifications  (<A href="http://www.google.com/search?q=growl" class="external free" rel="nofollow">http://www.google.com/search?q=growl</A>)
$.growlUI = function(title, message, timeout, onClose) {
</P>
	var $m = $('');
	if (title) $m.append('<H1><SPAN class="mw-headline" id=".27.2Btitle.2B.27">'+title+'</SPAN></H1>');
	if (message) $m.append('<H2><SPAN class="mw-headline" id=".27.2Bmessage.2B.27">'+message+'</SPAN></H2>');
<P>	if (timeout == undefined) timeout = 3000;
	$.blockUI({
		message: $m, fadeIn: 700, fadeOut: 1000, centerY: false,
		timeout: timeout, showOverlay: false,
		onUnblock: onClose, 
		css: $.blockUI.defaults.growlCSS
	});
};
</P><P>// plugin method for blocking element content
$.fn.block = function(opts) {
	return this.unblock({ fadeOut: 0 }).each(function() {
		if ($.css(this,'position') == 'static')
			this.style.position = 'relative';
		if ($.browser.msie)
			this.style.zoom = 1; // force 'hasLayout'
		install(this, opts);
	});
};
</P><P>// plugin method for unblocking element content
$.fn.unblock = function(opts) {
	return this.each(function() {
		remove(this, opts);
	});
};
</P><P>$.blockUI.version = 2.38; // 2nd generation blocking at no extra cost!
</P><P>// override these in your code to change the default behavior and style
$.blockUI.defaults = {
	// message displayed when blocking (use null for no message)
</P>
	message:  '<H1><SPAN class="mw-headline" id="Please_wait...">Please wait...</SPAN></H1>',
<P>	title: null,	  // title string; only used when theme == true
	draggable: true,  // only used when theme == true (requires jquery-ui.js to be loaded)
</P><P>	theme: false, // set to true to use with jQuery UI themes
</P><P>	// styles for the message when blocking; if you wish to disable
	// these and use an external stylesheet then do this in your code:
	// $.blockUI.defaults.css = {};
	css: {
		padding:	0,
		margin:		0,
		width:		'30%',
		top:		'40%',
		left:		'35%',
		textAlign:	'center',
		color:		'#000',
		border:		'3px solid #aaa',
		backgroundColor:'#fff',
		cursor:		'wait'
	},
</P><P>	// minimal style set used when themes are used
	themedCSS: {
		width:	'30%',
		top:	'40%',
		left:	'35%'
	},
</P><P>	// styles for the overlay
	overlayCSS:  {
		backgroundColor: '#000',
		opacity:	  	 0.6,
		cursor:		  	 'wait'
	},
</P><P>	// styles applied when using $.growlUI
	growlCSS: {
		width:  	'350px',
		top:		'10px',
		left:   	<I>,</I>
		right:  	'10px',
		border: 	'none',
		padding:	'5px',
		opacity:	0.6,
		cursor: 	'default',
		color:		'#fff',
		backgroundColor: '#000',
		'-webkit-border-radius': '10px',
		'-moz-border-radius':	 '10px',
		'border-radius': 		 '10px'
	},
</P><P>	// IE issues: 'about:blank' fails on HTTPS and javascript:false is s-l-o-w
	// (hat tip to Jorge H. N. de Vasconcelos)
	iframeSrc: /^https/i.test(window.location.href || <I>) ? 'javascript:false' : 'about:blank',</I></P><P>	// force usage of iframe in non-IE browsers (handy for blocking applets)
	forceIframe: false,
</P><P>	// z-index for the blocking overlay
	baseZ: 1000,
</P><P>	// set these to true to have the message automatically centered
	centerX: true, // &lt;-- only effects element blocking (page block controlled via css above)
	centerY: true,
</P><P>	// allow body element to be stetched in ie6; this makes blocking look better
	// on &quot;short&quot; pages.  disable if you wish to prevent changes to the body height
	allowBodyStretch: true,
</P><P>	// enable if you want key and mouse events to be disabled for content that is blocked
	bindEvents: true,
</P><P>	// be default blockUI will supress tab navigation from leaving blocking content
	// (if bindEvents is true)
	constrainTabKey: true,
</P><P>	// fadeIn time in millis; set to 0 to disable fadeIn on block
	fadeIn:  200,
</P><P>	// fadeOut time in millis; set to 0 to disable fadeOut on unblock
	fadeOut:  400,
</P><P>	// time in millis to wait before auto-unblocking; set to 0 to disable auto-unblock
	timeout: 0,
</P><P>	// disable if you don't want to show the overlay
	showOverlay: true,
</P><P>	// if true, focus will be placed in the first available input field when
	// page blocking
	focusInput: true,
</P><P>	// suppresses the use of overlay styles on FF/Linux (due to performance issues with opacity)
	applyPlatformOpacityRules: true,
</P><P>	// callback method invoked when fadeIn has completed and blocking message is visible
	onBlock: null,
</P><P>	// callback method invoked when unblocking has completed; the callback is
	// passed the element that has been unblocked (which is the window object for page
	// blocks) and the options that were passed to the unblock call:
	//	 onUnblock(element, options)
	onUnblock: null,
</P><P>	// don't ask; if you really must know: <A href="http://groups.google.com/group/jquery-en/browse_thread/thread/36640a8730503595/2f6a79a77a78e493#2f6a79a77a78e493" class="external free" rel="nofollow">http://groups.google.com/group/jquery-en/browse_thread/thread/36640a8730503595/2f6a79a77a78e493#2f6a79a77a78e493</A>
	quirksmodeOffsetHack: 4,
</P><P>	// class name of the message block
	blockMsgClass: 'blockMsg'
};
</P><P>// private data and functions follow...
</P><P>var pageBlock = null;
var pageBlockEls = [];
</P><P>function install(el, opts) {
	var full = (el == window);
	var msg = opts &amp;&amp; opts.message !== undefined ? opts.message : undefined;
	opts = $.extend({}, $.blockUI.defaults, opts || {});
	opts.overlayCSS = $.extend({}, $.blockUI.defaults.overlayCSS, opts.overlayCSS || {});
	var css = $.extend({}, $.blockUI.defaults.css, opts.css || {});
	var themedCSS = $.extend({}, $.blockUI.defaults.themedCSS, opts.themedCSS || {});
	msg = msg === undefined ? opts.message : msg;
</P><P>	// remove the current block (if there is one)
	if (full &amp;&amp; pageBlock)
		remove(window, {fadeOut:0});
</P><P>	// if an existing element is being used as the blocking content then we capture
	// its current place in the DOM (and current display style) so we can restore
	// it when we unblock
	if (msg &amp;&amp; typeof msg != 'string' &amp;&amp; (msg.parentNode || msg.jquery)) {
		var node = msg.jquery ? msg[0] : msg;
		var data = {};
		$(el).data('blockUI.history', data);
		data.el = node;
		data.parent = node.parentNode;
		data.display = node.style.display;
		data.position = node.style.position;
		if (data.parent)
			data.parent.removeChild(node);
	}
</P><P>	var z = opts.baseZ;
</P><P>	// blockUI uses 3 layers for blocking, for simplicity they are all used on every platform;
	// layer1 is the iframe layer which is used to supress bleed through of underlying content
	// layer2 is the overlay layer which has opacity and a wait cursor (by default)
	// layer3 is the message content that is displayed while blocking
</P><P>	var lyr1 = ($.browser.msie || opts.forceIframe) 
		? $('&lt;iframe class=&quot;blockUI&quot; style=&quot;z-index:'+ (z++) +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0&quot; src=&quot;'+opts.iframeSrc+'&quot;&gt;&lt;/iframe&gt;')
</P>
		: $('');
<P>	var lyr2 = opts.theme 
</P>
	 	? $('')
	 	: $('');
<P>	var lyr3, s;
	if (opts.theme &amp;&amp; full) {
</P>
		s = '<DIV class="blockUI ' + opts.blockMsgClass + ' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+z+';display:none;position:fixed">' +
				'<DIV class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title || ' ')+'</DIV>' +
				'' +
			'</DIV>';
<P>	}
	else if (opts.theme) {
</P>
		s = '<DIV class="blockUI ' + opts.blockMsgClass + ' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+z+';display:none;position:absolute">' +
				'<DIV class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title || ' ')+'</DIV>' +
				'' +
			'</DIV>';
<P>	}
	else if (full) {
</P>
		s = '';
<P>	}			
	else {
</P>
		s = '';
<P>	}
	lyr3 = $(s);
</P><P>	// if we have a message, style it
	if (msg) {
		if (opts.theme) {
			lyr3.css(themedCSS);
			lyr3.addClass('ui-widget-content');
		}
		else 
			lyr3.css(css);
	}
</P><P>	// style the overlay
	if (!opts.theme &amp;&amp; (!opts.applyPlatformOpacityRules || !($.browser.mozilla &amp;&amp; /Linux/.test(navigator.platform))))
		lyr2.css(opts.overlayCSS);
	lyr2.css('position', full ? 'fixed' : 'absolute');
</P><P>	// make iframe layer transparent in IE
	if ($.browser.msie || opts.forceIframe)
		lyr1.css('opacity',0.0);
</P><P>	//$([lyr1[0],lyr2[0],lyr3[0]]).appendTo(full ? 'body' : el);
	var layers = [lyr1,lyr2,lyr3], $par = full ? $('body') : $(el);
	$.each(layers, function() {
		this.appendTo($par);
	});
</P><P>	if (opts.theme &amp;&amp; opts.draggable &amp;&amp; $.fn.draggable) {
		lyr3.draggable({
			handle: '.ui-dialog-titlebar',
			cancel: 'li'
		});
	}
</P><P>	// ie7 must use absolute positioning in quirks mode and to account for activex issues (when scrolling)
	var expr = setExpr &amp;&amp; (!$.boxModel || $('object,embed', full ? null : el).length &gt; 0);
	if (ie6 || expr) {
		// give body 100% height
		if (full &amp;&amp; opts.allowBodyStretch &amp;&amp; $.boxModel)
			$('html,body').css('height','100%');
</P><P>		// fix ie6 issue when blocked element has a border width
		if ((ie6 || !$.boxModel) &amp;&amp; !full) {
			var t = sz(el,'borderTopWidth'), l = sz(el,'borderLeftWidth');
			var fixT = t ? '(0 - '+t+')' : 0;
			var fixL = l ? '(0 - '+l+')' : 0;
		}
</P><P>		// simulate fixed position
		$.each([lyr1,lyr2,lyr3], function(i,o) {
			var s = o[0].style;
			s.position = 'absolute';
			if (i &lt; 2) {
				full ? s.setExpression('height','Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:'+opts.quirksmodeOffsetHack+') + &quot;px&quot;')
					 : s.setExpression('height','this.parentNode.offsetHeight + &quot;px&quot;');
				full ? s.setExpression('width','jQuery.boxModel &amp;&amp; document.documentElement.clientWidth || document.body.clientWidth + &quot;px&quot;')
					 : s.setExpression('width','this.parentNode.offsetWidth + &quot;px&quot;');
				if (fixL) s.setExpression('left', fixL);
				if (fixT) s.setExpression('top', fixT);
			}
			else if (opts.centerY) {
				if (full) s.setExpression('top','(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + &quot;px&quot;');
				s.marginTop = 0;
			}
			else if (!opts.centerY &amp;&amp; full) {
				var top = (opts.css &amp;&amp; opts.css.top) ? parseInt(opts.css.top) : 0;
				var expression = '((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + '+top+') + &quot;px&quot;';
				s.setExpression('top',expression);
			}
		});
	}
</P><P>	// show the message
	if (msg) {
		if (opts.theme)
			lyr3.find('.ui-widget-content').append(msg);
		else
			lyr3.append(msg);
		if (msg.jquery || msg.nodeType)
			$(msg).show();
	}
</P><P>	if (($.browser.msie || opts.forceIframe) &amp;&amp; opts.showOverlay)
		lyr1.show(); // opacity is zero
	if (opts.fadeIn) {
		var cb = opts.onBlock ? opts.onBlock : noOp;
		var cb1 = (opts.showOverlay &amp;&amp; !msg) ? cb : noOp;
		var cb2 = msg ? cb : noOp;
		if (opts.showOverlay)
			lyr2._fadeIn(opts.fadeIn, cb1);
		if (msg)
			lyr3._fadeIn(opts.fadeIn, cb2);
	}
	else {
		if (opts.showOverlay)
			lyr2.show();
		if (msg)
			lyr3.show();
		if (opts.onBlock)
			opts.onBlock();
	}
</P><P>	// bind key and mouse events
	bind(1, el, opts);
</P><P>	if (full) {
		pageBlock = lyr3[0];
		pageBlockEls = $(':input:enabled:visible',pageBlock);
		if (opts.focusInput)
			setTimeout(focus, 20);
	}
	else
		center(lyr3[0], opts.centerX, opts.centerY);
</P><P>	if (opts.timeout) {
		// auto-unblock
		var to = setTimeout(function() {
			full ? $.unblockUI(opts) : $(el).unblock(opts);
		}, opts.timeout);
		$(el).data('blockUI.timeout', to);
	}
};
</P><P>// remove the block
function remove(el, opts) {
	var full = (el == window);
	var $el = $(el);
	var data = $el.data('blockUI.history');
	var to = $el.data('blockUI.timeout');
	if (to) {
		clearTimeout(to);
		$el.removeData('blockUI.timeout');
	}
	opts = $.extend({}, $.blockUI.defaults, opts || {});
	bind(0, el, opts); // unbind events
</P><P>	var els;
	if (full) // crazy selector to handle odd field errors in ie6/7
		els = $('body').children().filter('.blockUI').add('body &gt; .blockUI');
	else
		els = $('.blockUI', el);
</P><P>	if (full)
		pageBlock = pageBlockEls = null;
</P><P>	if (opts.fadeOut) {
		els.fadeOut(opts.fadeOut);
		setTimeout(function() { reset(els,data,opts,el); }, opts.fadeOut);
	}
	else
		reset(els, data, opts, el);
};
</P><P>// move blocking element back into the DOM where it started
function reset(els,data,opts,el) {
	els.each(function(i,o) {
		// remove via DOM calls so we don't lose event handlers
		if (this.parentNode)
			this.parentNode.removeChild(this);
	});
</P><P>	if (data &amp;&amp; data.el) {
		data.el.style.display = data.display;
		data.el.style.position = data.position;
		if (data.parent)
			data.parent.appendChild(data.el);
		$(el).removeData('blockUI.history');
	}
</P><P>	if (typeof opts.onUnblock == 'function')
		opts.onUnblock(el,opts);
};
</P><P>// bind/unbind the handler
function bind(b, el, opts) {
	var full = el == window, $el = $(el);
</P><P>	// don't bother unbinding if there is nothing to unbind
	if (!b &amp;&amp; (full &amp;&amp; !pageBlock || !full &amp;&amp; !$el.data('blockUI.isBlocked')))
		return;
	if (!full)
		$el.data('blockUI.isBlocked', b);
</P><P>	// don't bind events when overlay is not in use or if bindEvents is false
	if (!opts.bindEvents || (b &amp;&amp; !opts.showOverlay)) 
		return;
</P><P>	// bind anchors and inputs for mouse and key events
	var events = 'mousedown mouseup keydown keypress';
	b ? $(document).bind(events, opts, handler) : $(document).unbind(events, handler);
</P><P>// former impl...
//	   var $e = $('a,:input');
//	   b ? $e.bind(events, opts, handler) : $e.unbind(events, handler);
};
</P><P>// event handler to suppress keyboard/mouse events when blocking
function handler(e) {
	// allow tab navigation (conditionally)
	if (e.keyCode &amp;&amp; e.keyCode == 9) {
		if (pageBlock &amp;&amp; e.data.constrainTabKey) {
			var els = pageBlockEls;
			var fwd = !e.shiftKey &amp;&amp; e.target === els[els.length-1];
			var back = e.shiftKey &amp;&amp; e.target === els[0];
			if (fwd || back) {
				setTimeout(function(){focus(back)},10);
				return false;
			}
		}
	}
	var opts = e.data;
	// allow events within the message content
	if ($(e.target).parents('div.' + opts.blockMsgClass).length &gt; 0)
		return true;
</P><P>	// allow events for content that is not being blocked
	return $(e.target).parents().children().filter('div.blockUI').length == 0;
};
</P><P>function focus(back) {
	if (!pageBlockEls)
		return;
	var e = pageBlockEls[back===true ? pageBlockEls.length-1 : 0];
	if (e)
		e.focus();
};
</P><P>function center(el, x, y) {
	var p = el.parentNode, s = el.style;
	var l = ((p.offsetWidth - el.offsetWidth)/2) - sz(p,'borderLeftWidth');
	var t = ((p.offsetHeight - el.offsetHeight)/2) - sz(p,'borderTopWidth');
	if (x) s.left = l &gt; 0 ? (l+'px') : '0';
	if (y) s.top  = t &gt; 0 ? (t+'px') : '0';
};
</P><P>function sz(el, p) {
	return parseInt($.css(el,p))||0;
};
</P><P>})(jQuery);
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2011.igem.org/Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js">http://2011.igem.org/Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:WITS-CSIR_SA/js/lib/jQuery.BlockUI.js&amp;oldid=99577" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2011.igem.org:Privacy_policy" title="2011.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2011.igem.org:General_disclaimer" title="2011.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>