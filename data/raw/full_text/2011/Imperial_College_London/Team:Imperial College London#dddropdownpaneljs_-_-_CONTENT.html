<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_Imperial_College_London_dddropdownpaneljs"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:Imperial_College_London/dddropdownpaneljs">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:Imperial_College_London/dddropdownpaneljs&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:Imperial_College_London/dddropdownpaneljs&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:Imperial_College_London/dddropdownpaneljs&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:Imperial_College_London/dddropdownpaneljs" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:Imperial College London/dddropdownpaneljs</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2011.igem.org</H3><P>//** DD Drop Down Panel- (c) Dynamic Drive DHTML code library: <A href="http://www.dynamicdrive.com" class="external free" rel="nofollow">http://www.dynamicdrive.com</A>
//** Oct 21st, 08'- Script created
//** March 23rd, 09' v1.01- Arrow images now preloaded
</P><P>function ddpanel(setting){
	setting.dir=&quot;up&quot; //initial state of panel (up=&quot;contracted&quot;)
	if (setting.stateconfig.persiststate &amp;&amp; ddpanel.getCookie(setting.ids[0])==&quot;down&quot;){
		setting.dir=&quot;down&quot;
	}
	if (setting.dir==&quot;up&quot;){ //if &quot;up&quot;, output CSS to hide panel contents
		document.write('&lt;style type=&quot;text/css&quot;&gt;\n')
		document.write('#'+setting.ids[1]+'{height:' + parseInt(setting.stateconfig.initial) + 'px; overflow:hidden}\n')
		document.write('&lt;/style&gt;\n')
	}
	setting.stateconfig.initial=parseInt(setting.stateconfig.initial)
	this.setting=setting
	if (setting.pointerimage.enabled){ //preload images
		var img1=new Image(), img2=new Image()
		img1.src=setting.pointerimage.src[0]
		img2.src=setting.pointerimage.src[1]
	}
	var thispanel=this
	if (window.addEventListener) //if non IE browsers, initialize panel window.onload
		ddpanel.addEvent(window, function(e){thispanel.initpanel(setting)}, &quot;load&quot;)
	else //else if IE, add 100 millisec after window.onload before initializing
		ddpanel.addEvent(window, function(e){setTimeout(function(){thispanel.initpanel(setting)}, 100)}, &quot;load&quot;)
	ddpanel.addEvent(window, function(e){thispanel.uninit(setting)}, &quot;unload&quot;)
}
</P><P>ddpanel.events_array=[] //object array to contain events created by script
</P><P>ddpanel.addEvent=function(target, functionref, tasktype){
	var evtmodel=target.addEventListener? &quot;w3c&quot; : &quot;ie&quot;
	var evtaction=evtmodel==&quot;w3c&quot;? &quot;addEventListener&quot; : &quot;attachEvent&quot;
	var i=this.events_array.push({ //store event info in ddpanel.events_array[] and return current event's index within array
		target: target,
		tasktype: (evtmodel==&quot;ie&quot;? &quot;on&quot; : &quot;&quot;)+tasktype,
		listener: evtmodel==&quot;ie&quot;? function(){return functionref.call(target, window.event)} : functionref
	})-1
	target[evtaction](this.events_array[i].tasktype, this.events_array[i].listener, evtmodel==&quot;w3c&quot;? false : null)
}
</P><P>ddpanel.removeEvent=function(target, functionref, tasktype){
	var evtmodel=target.removeEventListener? &quot;w3c&quot; : &quot;ie&quot;
	var evtaction=evtmodel==&quot;w3c&quot;? &quot;removeEventListener&quot; : &quot;detachEvent&quot;
	target[evtaction](tasktype, functionref, evtmodel==&quot;w3c&quot;? false : null)
}
</P><P>ddpanel.getCookie=function(Name){ 
	var re=new RegExp(Name+&quot;=[^;]+&quot;, &quot;i&quot;); //construct RE to search for target name/value pair
	if (document.cookie.match(re)) //if cookie found
		return document.cookie.match(re)[0].split(&quot;=&quot;)[1] //return its value
	return null
}
</P><P>ddpanel.setCookie=function(name, value){
	document.cookie = name+&quot;=&quot; + value + &quot;;path=/&quot;
}
</P><P>ddpanel.addpointer=function(target, className, imagesrc){
	var pointer=document.createElement(&quot;img&quot;)
	pointer.src=imagesrc
	pointer.className=className
	pointer.style.borderWidth=0
	target.appendChild(pointer)
	return pointer
}
</P><P>ddpanel.prototype={
</P><P>togglepanel:function(dir){ //public function that toggles the panel's state. Optional dir parameter (&quot;up&quot; or &quot;down&quot;) to explicitly set state.
	var setting=this.setting
	setting.dir=dir || ((setting.dir==&quot;up&quot;)? &quot;down&quot; : &quot;up&quot;)
	var pcontent=setting.pcontent, dir=setting.dir
	pcontent._currentheight=(dir==&quot;down&quot;)? pcontent._actualheight : setting.stateconfig.initial
	pcontent.style.height=pcontent._currentheight+&quot;px&quot;
	if (setting.pointerimage.enabled){
		setting.arrow.src=setting.pointerimage.src[(setting.dir==&quot;down&quot;)? 1 : 0]
		setting.arrow.style.visibility=&quot;visible&quot;
	}
	ddpanel.setCookie(setting.ids[0], setting.dir)
},
</P><P>togglepanelplus:function(dir){ //public function that toggles the panel's state w/ animation. Optional dir parameter (&quot;up&quot; or &quot;down&quot;) to explicitly set state.
	var setting=this.setting
	setting.dir=dir || ((setting.dir==&quot;up&quot;)? &quot;down&quot; : &quot;up&quot;)
	if (setting.pointerimage.enabled)
		setting.arrow.style.visibility=&quot;hidden&quot;
	clearTimeout(setting.revealtimer)
	this.revealcontent()
},
</P><P>revealcontent:function(){
	var setting=this.setting
	var pcontent=setting.pcontent, curH=pcontent._currentheight, maxH=pcontent._actualheight, minH=setting.stateconfig.initial, steps=setting.animate.steps, dir=setting.dir
	if (dir==&quot;down&quot; &amp;&amp; curH&lt;maxH || dir==&quot;up&quot; &amp;&amp; curH&gt;minH){
		var newH = curH + (Math.round((maxH-curH)/steps)+1) * (dir==&quot;up&quot;? -1 : 1)
		newH=(dir==&quot;down&quot;)? Math.min(maxH, newH) : Math.max(minH, newH)
		pcontent.style.height=newH+&quot;px&quot;
		pcontent._currentheight=newH
	}
	else{
		if (setting.pointerimage.enabled){
			setting.arrow.src=setting.pointerimage.src[(setting.dir==&quot;down&quot;)? 1 : 0]
			setting.arrow.style.visibility=&quot;visible&quot;
		}
		return
	}
	var thispanel=this
	setting.revealtimer=setTimeout(function(){thispanel.revealcontent()}, 10)
},
</P><P>initpanel:function(){
	var setting=this.setting
	var pcontainer=setting.pcontainer=document.getElementById(setting.ids[0])
	var pcontent=setting.pcontent=document.getElementById(setting.ids[1])
	var tdiv=setting.tdiv=document.getElementById(setting.ids[2])
	pcontent.style.overflow=&quot;scroll&quot;
	pcontent._actualheight=pcontent.scrollHeight
	setTimeout(function(){pcontent._actualheight=pcontent.scrollHeight}, 100)
	pcontent.style.overflow=&quot;hidden&quot;
	pcontent._currentheight=(setting.dir==&quot;down&quot;)? pcontent._actualheight : setting.stateconfig.initial
	var thispanel=this
	ddpanel.addEvent(tdiv, function(e){ //assign click behavior when toggle DIV tab is clicked on
		if (setting.animate.enabled)
			thispanel.togglepanelplus()
		else
			thispanel.togglepanel()
		if (e.preventDefault) e.preventDefault()
		return false
	}, &quot;click&quot;)
	if (setting.pointerimage.enabled){
		var pointer1=new Image(), pointer2=new Image()
		pointer1.src=setting.pointerimage.src[0]
		pointer2.src=setting.pointerimage.src[1]
		setting.arrow=ddpanel.addpointer(tdiv.getElementsByTagName(&quot;span&quot;)[0], &quot;pointerimage&quot;, setting.pointerimage.src[setting.dir==&quot;down&quot;? 1:0])
	}
	if (setting.closepanelonclick.enabled){ //assign click behavior when panel content is clicked on (links within panel or elements with class &quot;closepanel&quot;
			ddpanel.addEvent(pcontent, function(e){
				var target=e.srcElement || e.target
				if (/(^|\s+)closepanel($|\s+)/.test(target.className) || target.tagName==&quot;A&quot; || (target.parentNode &amp;&amp; target.parentNode.tagName==&quot;A&quot;)){
					thispanel.togglepanel(&quot;up&quot;)
				}
			}, &quot;click&quot;)
	}
},
</P><P>uninit:function(){
	var setting=this.setting
	if (setting.stateconfig.persiststate){
		ddpanel.setCookie(setting.ids[0], setting.dir)
	}
	for (prop in setting){
		setting[prop]=null
	}
}
</P><P>} //end of ddpanel object
</P><P>
//initialize instance of DD Drop Down Panel:
</P><P>var defaultpanel=new ddpanel({
	ids: [&quot;mypanel&quot;, &quot;mypanelcontent&quot;, &quot;mypaneltab&quot;], // id of main panel DIV, content DIV, and tab DIV
	stateconfig: {initial: &quot;0px&quot;, persiststate: true}, // initial: initial reveal amount in pixels (ie: 5px)
	animate: {enabled: true, steps: 5}, //steps: number of animation steps. Int between 1-20. Smaller=faster.
	pointerimage: {enabled: true, src: [&quot;&quot;, &quot;&quot;]},
	closepanelonclick: {enabled: true} // close panel when links or elements with CSS class=&quot;closepanel&quot; within container is clicked on?
})
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2011.igem.org/Team:Imperial_College_London/dddropdownpaneljs">http://2011.igem.org/Team:Imperial_College_London/dddropdownpaneljs</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:Imperial_College_London/dddropdownpaneljs" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:Imperial_College_London/dddropdownpaneljs" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:Imperial_College_London/dddropdownpaneljs&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:Imperial_College_London/dddropdownpaneljs&amp;oldid=241660" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2011.igem.org:Privacy_policy" title="2011.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2011.igem.org:General_disclaimer" title="2011.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>