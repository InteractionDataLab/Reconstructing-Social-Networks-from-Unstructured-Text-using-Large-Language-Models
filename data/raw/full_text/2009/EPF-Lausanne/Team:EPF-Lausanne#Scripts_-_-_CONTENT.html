<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_EPF-Lausanne_Scripts"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu"><UL><LI class="selected"><A href="/Team:EPF-Lausanne/Scripts">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:EPF-Lausanne/Scripts&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:EPF-Lausanne/Scripts&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:EPF-Lausanne/Scripts&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:EPF-Lausanne/Scripts" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:EPF-Lausanne/Scripts</H1><DIV id="bodyContent"><H3 id="siteSub">From 2009.igem.org</H3><DIV style="position: relative; left: 190px; top: -134px; padding: 0px; margin: 0px; border: 0px solid white;z-index:1;"><DIV class="wrapper1"><DIV class="wrapper" style="width:650px;"><DIV class="nav-wrapper"><DIV class="nav"><UL id="navigation" style="width:600px"><LI class="#"><A href="https://2009.igem.org/Team:EPF-Lausanne" target="_self"><SPAN class="menu-mid">Home</SPAN></A></LI><LI class="#"><A href="https://2009.igem.org/Team:EPF-Lausanne/Team" target="_self"><SPAN class="menu-mid">Team</SPAN></A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Team" target="_self">Presentation</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Team#Where_we_are_from" target="_self">School</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Team_Management" target="_self">Team Management</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Brainstorming" target="_self">Brainstorming</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Sponsors" target="_self">Sponsors</A></LI></UL></DIV><LI class="#"><A href="https://2009.igem.org/Team:EPF-Lausanne/Project_Abstract" target="_self"><SPAN class="menu-mid">Project</SPAN></A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Project_Abstract" target="_self">Abstract</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/LOVTAP" target="_self">Theory</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Strategy" target="_self">Strategy</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Experimental_Setup" target="_self">Experimental Setup</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/LOVTAP_Results" target="_self">Results</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Parts" target="_self">Parts submitted to the Registry</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Future_directions" target="_self">Future directions</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/References" target="_self">References</A></LI></DIV><LI class="#"><A href="https://2009.igem.org/Team:EPF-Lausanne/Modeling_overview" target="_self"><SPAN class="menu-mid">Modeling</SPAN></A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Modeling_overview" target="_self">Modeling overview</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Analysis methods" target="_self">Analysis Methods</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Results" target="_self">Results</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Information_&amp;_references" target="_self">References</A></LI></DIV><LI class="#"><A href="https://2009.igem.org/Team:EPF-Lausanne/Social_overview" target="_self"><SPAN class="menu-mid">Human practices</SPAN></A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Social_overview" target="_self">Overview</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Talks" target="_self">Talks</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Survey" target="_self">Survey</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Media" target="_self">Media</A></LI></DIV><LI class="#"><A href="https://2009.igem.org/Team:EPF-Lausanne/Safety" target="_self"><SPAN class="menu-mid">Safety</SPAN></A></LI><LI class="#"><A href="https://2009.igem.org/Team:EPF-Lausanne/Notebook" target="_self"><SPAN class="menu-mid">Lab</SPAN></A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Last_News" target="_self">Last News</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Notebook" target="_self">Notebook</A></LI><LI><A href="https://2009.igem.org/Team:EPF-Lausanne/Protocols" target="_self">Protocols used</A></LI></DIV></DIV></DIV></DIV><DIV class="epfltrick"><TABLE id="toc" class="toc"><TBODY><TR><TD><DIV id="toctitle"><H2>Contents</H2></DIV><UL><LI class="toclevel-1 tocsection-1"><A href="#Extract_data_from_namd_log_file"><SPAN class="tocnumber">1</SPAN><SPAN class="toctext">Extract data from namd log file</SPAN></A></LI><LI class="toclevel-1 tocsection-2"><A href="#Sum_of_RMSD_for_each_residue"><SPAN class="tocnumber">2</SPAN><SPAN class="toctext">Sum of RMSD for each residue</SPAN></A></LI><LI class="toclevel-1 tocsection-3"><A href="#Mean_RMSD_along_time"><SPAN class="tocnumber">3</SPAN><SPAN class="toctext">Mean RMSD along time</SPAN></A></LI><LI class="toclevel-1 tocsection-4"><A href="#RMSF_from_namd_.dcd"><SPAN class="tocnumber">4</SPAN><SPAN class="toctext">RMSF from namd .dcd</SPAN></A></LI></UL></TD></TR></TBODY></TABLE></DIV><DIV class="epfl09"><P><CENTER><FONT size="6" color="#007CBC"><I>Scripts used</I></FONT></CENTER></P><P>A few scripts were needed to analyze the trajectory file (.dcd) and log files from namd. We'll list here what we made and how they can be used. All scripts are in TCL but don't show an elevated syntax.
</P><H2><SPAN class="mw-headline" id="Extract_data_from_namd_log_file">Extract data from namd log file</SPAN></H2><P>Some informations about the simulation are stored in the log file. A script is really useful to extract them before plotting.
We updated the file available on namd website. Here is our version of <A href="/wiki/images/6/67/Namdstats_igem09.txt" class="internal" title="Namdstats igem09.txt">namdstats.tcl</A>. Please rename to namdstats<B>.tcl</B> after download.
</P><P>Here are the steps to use this script:
</P><DL><DD><I>source <A href="/wiki/images/6/67/Namdstats_igem09.txt" class="internal" title="Namdstats igem09.txt">namdstats.tcl</A></I></DD><DD><I>data_time DATA_NAME LOG_FILE</I></DD></DL><P>It will extract data from LOG_FILE, creating a DATA_NAME.dat in the working directory (type pwd to see where you are) containing values and time informations.
</P><P>Available DATA_NAME are: BOND, ANGLE, DIHED, IMPRP, ELECT, VDW, BOUNDARY, MISC, KINETIC, TOTAL, TEMP, TOTAL2, TOTAL3, TEMPAVG, PRESSURE, GPRESSURE, VOLUME, PRESSAVG, GPRESSAVG.
</P><P>So, to extract pressure from our first simulation, the command is:
</P><DL><DD><I>data_time PRESSURE namd_log</I></DD></DL><H2><SPAN class="mw-headline" id="Sum_of_RMSD_for_each_residue">Sum of RMSD for each residue</SPAN></H2><UL><LI>Basically, this <A href="/wiki/images/1/1f/Residue_rmsd_v2.txt" class="internal" title="Residue rmsd v2.txt"> script</A> will calculate the RMSD at each frame. The ouptut is residue number and the sum of its RMSD at each specified frame.
</LI><LI>You have to provide a list or residue ID in the $sel_resid. There is no check for duplicated ID, so choose carefully your selection ;). (The .dcd and .pdb must be loaded before). You probably want to select each residue composing the protein only once, that's why we use &quot;protein and alpha&quot;, there is only one CA per residu. This selection is only to define which residues are taken in consideration, it has no impact on wich atoms are selected.
</LI><LI>If you want to change which atoms are taken in consideration for RMSD, you'll have to update the selection within the script.
</LI><LI>The RMSD will calculate the RMSD for each non-hydrogen atom of the residue at each step and sum all these results. That's why the process is really heavy: #Residues * #AtomsPerResidue * #Frames * #CostOfRMSD
</LI><LI>Output is residue_rmsd.dat
</LI></UL><P>In the TkCon window type:
</P><DL><DD><I>source <A href="/wiki/images/1/1f/Residue_rmsd_v2.txt" class="internal" title="Residue rmsd v2.txt">residue_rmsd_v2.tcl</A></I></DD><DD><I>set sel_resid [[atomselect top &quot;protein and alpha&quot;] get resid]</I></DD><DD><I>rmsd_residue_over_time top $sel resid</I></DD></DL><P><B>Remark</B>: we updated <A href="/wiki/images/1/1f/Residue_rmsd_v2.txt" class="internal" title="Residue rmsd v2.txt">the script residue_rmsd.tcl</A> that was originaly available from namd website to be able to specify on which frames the rsmd has to be computed. Please have a look on this wiki for a more up-to-date version of the file... Command is:
</P><DL><DD> rmsd_residue_over_time top $sel resid FIRST_FRAME LAST_FRAME
</DD></DL><H2><SPAN class="mw-headline" id="Mean_RMSD_along_time">Mean RMSD along time</SPAN></H2><P>We used this particular representation of RMSD to visualize if our simulation is reaching an equilibrium. It also helps a lot to see if the parameters are correctly set.
</P><P>As we wrote the script, take a special care at the selections you make ;)
</P><UL><LI>The script will go through the frames and sum RMSD of each selected residues (in fact it will sum RMSD of every atom composing the residue)
</LI><LI>The sum of RMSD for each frame is then divided by the number of residues, to &quot;normalize&quot; the value
</LI><LI>As before, you have to provide the list of residues.
</LI><LI>Output is data_rmsd.dat
</LI></UL><P>In the TkCon window type:
</P><DL><DD><I>source <A href="/wiki/images/a/ad/Residue_rmsd_igem09.txt" class="internal" title="Residue rmsd igem09.txt">residue_rmsd_igem09.tcl</A></I></DD><DD><I>set sel_resid [[atomselect top &quot;protein and alpha&quot;] get resid]</I></DD><DD><I>rmsd_residue_over_time_igem top $sel_resid 0 0</I></DD></DL><P><B>The script was updated to be able to define reference frame and first frame were RMSD will be calculated.</B> We usually don't need to compute RMSD during heating, for instance. RMSD takes a lot of time. In our first run 1 frame = 100 timesteps * 2 fs*timesteps^-1 = 200 fs
</P><P>complete form for run is:
</P><DL><DD><I>rmsd_residue_over_time top $sel_resid FIRST_FRAME REFERENCE_FRAME</I></DD></DL><H2><SPAN class="mw-headline" id="RMSF_from_namd_.dcd">RMSF from namd .dcd</SPAN></H2><P>Root mean square fluctuation can be compared to the beta factor observed during chrystallography. The beta factor has to be loaded from the .pdb. This can be achieved with a few bash commands:
</P><DL><DD><I>cat 2v0u.pdb | grep CA &gt; 2v0u_prot_CA.pdb</I></DD></DL><P>We then wrote a script to get RMSF.
</P><UL><LI>RMSF is calculated on a selected window of frames (between FIRST_FRAME and LAST_FRAME).
</LI><LI>There is no reference frame, the function return the fluctuation around the average in the window.
</LI><LI>It returns one value per alpha carbon.
</LI><LI>Output is data_rmsf_igem.dat
</LI></UL><P>In the TkCon window type:
</P><DL><DD><I>source <A href="/wiki/images/6/64/Rmsf_igem09.txt" class="internal" title="Rmsf igem09.txt">rmsf_igem09.tcl</A></I></DD><DD><I>set sel_resid [[atomselect top &quot;protein and alpha&quot;] get resid]</I></DD><DD><I>rmsf_CA top $sel_resid FIRST_FRAME LAST_FRAME</I></DD></DL></DIV><DIV class="printfooter">
Retrieved from &quot;<A href="http://2009.igem.org/Team:EPF-Lausanne/Scripts">http://2009.igem.org/Team:EPF-Lausanne/Scripts</A>&quot;</DIV><DIV id="footer-box"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:EPF-Lausanne/Scripts" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:EPF-Lausanne/Scripts" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:EPF-Lausanne/Scripts&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:EPF-Lausanne/Scripts&amp;oldid=118678" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2009.igem.org:Privacy_policy" title="2009.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2009.igem.org:General_disclaimer" title="2009.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></BODY></HTML>