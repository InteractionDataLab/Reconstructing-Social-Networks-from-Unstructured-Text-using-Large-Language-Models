<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_UCL_Template_plumb_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:UCL/Template:plumb.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:UCL/Template:plumb.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:UCL/Template:plumb.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:UCL/Template:plumb.js&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:UCL/Template:plumb.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform">Â </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:UCL/Template:plumb.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2014.igem.org</H3><P>!function(){&quot;undefined&quot;==typeof Math.sgn&amp;&amp;(Math.sgn=function(a){return 0==a?0:a&gt;0?1:-1});var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=64,c=Math.pow(2,-b-1),d=function(b,c){for(var d=[],e=f(b,c),h=c.length-1,i=2*h-1,j=g(e,i,d,0),k=a.subtract(b,c[0]),m=a.square(k),n=0,o=0;j&gt;o;o++){k=a.subtract(b,l(c,h,d[o],null,null));var p=a.square(k);m&gt;p&amp;&amp;(m=p,n=d[o])}return k=a.subtract(b,c[h]),p=a.square(k),m&gt;p&amp;&amp;(m=p,n=1),{location:n,distance:m}},e=function(a,b){var c=d(a,b);return{point:l(b,b.length-1,c.location,null,null),location:c.location}},f=function(b,c){for(var d=c.length-1,e=2*d-1,f=[],g=[],h=[],i=[],k=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],l=0;d&gt;=l;l++)f[l]=a.subtract(c[l],b);for(var l=0;d-1&gt;=l;l++)g[l]=a.subtract(c[l+1],c[l]),g[l]=a.scale(g[l],3);for(var m=0;d-1&gt;=m;m++)for(var n=0;d&gt;=n;n++)h[m]||(h[m]=[]),h[m][n]=a.dotProduct(g[m],f[n]);for(l=0;e&gt;=l;l++)i[l]||(i[l]=[]),i[l].y=0,i[l].x=parseFloat(l)/e;for(var o=d,p=d-1,q=0;o+p&gt;=q;q++){var r=Math.max(0,q-p),s=Math.min(q,o);for(l=r;s&gt;=l;l++)j=q-l,i[l+j].y+=h[j][l]*k[j][l]}return i},g=function(a,c,d,e){var f,j,m=[],n=[],o=[],p=[];switch(h(a,c)){case 0:return 0;case 1:if(e&gt;=b)return d[0]=(a[0].x+a[c].x)/2,1;if(i(a,c))return d[0]=k(a,c),1}l(a,c,.5,m,n),f=g(m,c,o,e+1),j=g(n,c,p,e+1);for(var q=0;f&gt;q;q++)d[q]=o[q];for(var q=0;j&gt;q;q++)d[q+f]=p[q];return f+j},h=function(a,b){var c,d,e=0;c=d=Math.sgn(a[0].y);for(var f=1;b&gt;=f;f++)c=Math.sgn(a[f].y),c!=d&amp;&amp;e++,d=c;return e},i=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;i=a[0].y-a[b].y,j=a[b].x-a[0].x,k=a[0].x*a[b].y-a[b].x*a[0].y;for(var t=max_distance_below=0,u=1;b&gt;u;u++){var v=i*a[u].x+j*a[u].y+k;v&gt;t?t=v:max_distance_below&gt;v&amp;&amp;(max_distance_below=v)}return n=0,o=1,p=0,q=i,r=j,s=k-t,l=n*r-q*o,m=1/l,e=(o*s-r*p)*m,q=i,r=j,s=k-max_distance_below,l=n*r-q*o,m=1/l,f=(o*s-r*p)*m,g=Math.min(e,f),h=Math.max(e,f),d=h-g,c&gt;d?1:0},k=function(a,b){var c=1,d=0,e=a[b].x-a[0].x,f=a[b].y-a[0].y,g=a[0].x-0,h=a[0].y-0,i=e*d-f*c,j=1/i,k=(e*h-f*g)*j;return 0+c*k},l=function(a,b,c,d,e){for(var f=[[]],g=0;b&gt;=g;g++)f[0][g]=a[g];for(var h=1;b&gt;=h;h++)for(var g=0;b-h&gt;=g;g++)f[h]||(f[h]=[]),f[h][g]||(f[h][g]={}),f[h][g].x=(1-c)*f[h-1][g].x+c*f[h-1][g+1].x,f[h][g].y=(1-c)*f[h-1][g].y+c*f[h-1][g+1].y;if(null!=d)for(g=0;b&gt;=g;g++)d[g]=f[g][0];if(null!=e)for(g=0;b&gt;=g;g++)e[g]=f[b-g][g];return f[b][0]},m={},n=function(a){var b=m[a];if(!b){b=[];var c=function(){return function(b){return Math.pow(b,a)}},d=function(){return function(b){return Math.pow(1-b,a)}},e=function(a){return function(){return a}},f=function(){return function(a){return a}},g=function(){return function(a){return 1-a}},h=function(a){return function(b){for(var c=1,d=0;d&lt;a.length;d++)c*=a[d](b);return c}};b.push(new c);for(var i=1;a&gt;i;i++){for(var j=[new e(a)],k=0;a-i&gt;k;k++)j.push(new f);for(var k=0;i&gt;k;k++)j.push(new g);b.push(new h(j))}b.push(new d),m[a]=b}return b},o=function(a,b){for(var c=n(a.length-1),d=0,e=0,f=0;f&lt;a.length;f++)d+=a[f].x*c[f](b),e+=a[f].y*c[f](b);return{x:d,y:e}},p=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},q=function(a){return a[0].x==a[1].x&amp;&amp;a[0].y==a[1].y},r=function(a,b,c){if(q(a))return{point:a[0],location:b};for(var d=o(a,b),e=0,f=b,g=c&gt;0?1:-1,h=null;e&lt;Math.abs(c);)f+=.005*g,h=o(a,f),e+=p(h,d),d=h;return{point:h,location:f}},s=function(a){if(q(a))return 0;for(var b=o(a,0),c=0,d=0,e=1,f=null;1&gt;d;)d+=.005*e,f=o(a,d),c+=p(f,b),b=f;return c},t=function(a,b,c){return r(a,b,c).point},u=function(a,b,c){return r(a,b,c).location},v=function(a,b){var c=o(a,b),d=o(a.slice(0,a.length-1),b),e=d.y-c.y,f=d.x-c.x;return 0==e?1/0:Math.atan(e/f)},w=function(a,b,c){var d=r(a,b,c);return d.location&gt;1&amp;&amp;(d.location=1),d.location&lt;0&amp;&amp;(d.location=0),v(a,d.location)},x=function(a,b,c,d){d=null==d?0:d;var e=r(a,b,d),f=v(a,e.location),g=Math.atan(-1/f),h=c/2*Math.sin(g),i=c/2*Math.cos(g);return[{x:e.point.x+i,y:e.point.y+h},{x:e.point.x-i,y:e.point.y-h}]};window.jsBezier={distanceFromCurve:d,gradientAtPoint:v,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:e,pointOnCurve:o,pointAlongCurveFrom:t,perpendicularToCurveAt:x,locationAlongCurveFrom:u,getLength:s}}(),function(){&quot;use strict&quot;;var a=this.Biltong={},b=function(a){return&quot;[object Array]&quot;===Object.prototype.toString.call(a)},c=function(a,c,d){return a=b(a)?a:[a.x,a.y],c=b(c)?c:[c.x,c.y],d(a,c)},d=a.gradient=function(a,b){return c(a,b,function(a,b){return b[0]==a[0]?b[1]&gt;a[1]?1/0:-1/0:b[1]==a[1]?b[0]&gt;a[0]?0:-0:(b[1]-a[1])/(b[0]-a[0])})},e=(a.normal=function(a,b){return-1/d(a,b)},a.lineLength=function(a,b){return c(a,b,function(a,b){return Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))})},a.quadrant=function(a,b){return c(a,b,function(a,b){return b[0]&gt;a[0]?b[1]&gt;a[1]?2:1:b[0]==a[0]?b[1]&gt;a[1]?2:1:b[1]&gt;a[1]?3:4})}),f=(a.theta=function(a,b){return c(a,b,function(a,b){var c=d(a,b),f=Math.atan(c),g=e(a,b);return(4==g||3==g)&amp;&amp;(f+=Math.PI),0&gt;f&amp;&amp;(f+=2*Math.PI),f})},a.intersects=function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,i=b.y,j=b.y+b.h;return g&gt;=c&amp;&amp;d&gt;=g&amp;&amp;i&gt;=e&amp;&amp;f&gt;=i||h&gt;=c&amp;&amp;d&gt;=h&amp;&amp;i&gt;=e&amp;&amp;f&gt;=i||g&gt;=c&amp;&amp;d&gt;=g&amp;&amp;j&gt;=e&amp;&amp;f&gt;=j||h&gt;=c&amp;&amp;d&gt;=g&amp;&amp;j&gt;=e&amp;&amp;f&gt;=j||c&gt;=g&amp;&amp;h&gt;=c&amp;&amp;e&gt;=i&amp;&amp;j&gt;=e||d&gt;=g&amp;&amp;h&gt;=d&amp;&amp;e&gt;=i&amp;&amp;j&gt;=e||c&gt;=g&amp;&amp;h&gt;=c&amp;&amp;f&gt;=i&amp;&amp;j&gt;=f||d&gt;=g&amp;&amp;h&gt;=c&amp;&amp;f&gt;=i&amp;&amp;j&gt;=f},a.encloses=function(a,b,c){var d=a.x,e=a.x+a.w,f=a.y,g=a.y+a.h,h=b.x,i=b.x+b.w,j=b.y,k=b.y+b.h,l=function(a,b,d,e){return c?b&gt;=a&amp;&amp;d&gt;=e:b&gt;a&amp;&amp;d&gt;e};return l(d,h,e,i)&amp;&amp;l(f,j,g,k)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),g=[null,[-1,-1],[-1,1],[1,1],[1,-1]];a.pointOnLine=function(a,b,c){var h=d(a,b),i=e(a,b),j=c&gt;0?f[i]:g[i],k=Math.atan(h),l=Math.abs(c*Math.sin(k))*j[1],m=Math.abs(c*Math.cos(k))*j[0];return{x:a.x+m,y:a.y+l}},a.perpendicularLineTo=function(a,b,c){var e=d(a,b),f=Math.atan(-1/e),g=c/2*Math.sin(f),h=c/2*Math.cos(f);return[{x:b.x+h,y:b.y+g},{x:b.x-h,y:b.y-g}]}}.call(this),function(){&quot;use strict&quot;;var a={android:navigator.userAgent.toLowerCase().indexOf(&quot;android&quot;)&gt;-1},b=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e&lt;d.length;e++)if(d[e]===a)return!0;return!1},c=function(a){return&quot;string&quot;==typeof a?document.getElementById(a):a},d=function(a){return a.srcElement||a.target},e=function(a,b){for(var c=0,d=a.length;d&gt;c&amp;&amp;a[c]!=b;c++);c&lt;a.length&amp;&amp;a.splice(c,1)},f=1,g=function(a,b,c){var d=f++;return a.__ta=a.__ta||{},a.__ta[b]=a.__ta[b]||{},a.__ta[b][d]=c,c.__tauid=d,d},h=function(a,b,c){if(a.__ta&amp;&amp;a.__ta[b]&amp;&amp;delete a.__ta[b][c.__tauid],c.__taExtra){for(var d=0;d&lt;c.__taExtra.length;d++)D(a,c.__taExtra[d][0],c.__taExtra[d][1]);c.__taExtra.length=0}c.__taUnstore&amp;&amp;c.__taUnstore()},i=function(a,c,e,f){if(null==a)return e;var g=a.split(&quot;,&quot;),h=function(a){h.__tauid=e.__tauid;for(var f=d(a),i=0;i&lt;g.length;i++)b(f,g[i],c)&amp;&amp;e.apply(f,arguments)};return j(e,f,h),h},j=function(a,b,c){a.__taExtra=a.__taExtra||[],a.__taExtra.push([b,c])},k=function(a,b,c,d){q&amp;&amp;s[b]?C(a,s[b],i(d,a,c,s[b]),c):C(a,b,i(d,a,c,b),c)},l=function(a,b,c,f){if(null==a.__taSmartClicks){var g=function(b){a.__tad=w(b)},h=function(b){a.__tau=w(b)},i=function(b){if(a.__tad&amp;&amp;a.__tau&amp;&amp;a.__tad[0]===a.__tau[0]&amp;&amp;a.__tad[1]===a.__tau[1])for(var c=0;c&lt;a.__taSmartClicks.length;c++)a.__taSmartClicks[c].apply(d(b),[b])};k(a,&quot;mousedown&quot;,g,f),k(a,&quot;mouseup&quot;,h,f),k(a,&quot;click&quot;,i,f),a.__taSmartClicks=[]}a.__taSmartClicks.push(c),c.__taUnstore=function(){e(a.__taSmartClicks,c)}},m={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},n=function(a,b){return function(c,f,g,h){if(&quot;contextmenu&quot;==f&amp;&amp;r)k(c,f,g,h);else{if(null==c.__taTapHandler){var i=c.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0},j=function(){i.down=!0,setTimeout(n,a),setTimeout(o,b)},l=function(a){if(i.down){i.taps++;var b=B(a);for(var c in m){var e=m[c];if(e.touches===b&amp;&amp;(1===e.taps||e.taps===i.taps))for(var f=0;f&lt;i[c].length;f++)i[c][f].apply(d(a),[a])}}},n=function(){i.down=!1},o=function(){i.taps=0};k(c,&quot;mousedown&quot;,j,h),k(c,&quot;mouseup&quot;,l,h)}c.__taTapHandler[f].push(g),g.__taUnstore=function(){e(c.__taTapHandler[f],g)}}}},o=function(a,b,c,d){for(var e in c.__tamee[a])c.__tamee[a][e].apply(d,[b])},p=function(){var a=[];return function(c,e,f,h){if(!c.__tamee){c.__tamee={over:!1,mouseenter:[],mouseexit:[]};var j=function(e){var f=d(e);(null==h&amp;&amp;f==c&amp;&amp;!c.__tamee.over||b(f,h,c)&amp;&amp;(null==f.__tamee||!f.__tamee.over))&amp;&amp;(o(&quot;mouseenter&quot;,e,c,f),f.__tamee=f.__tamee||{},f.__tamee.over=!0,a.push(f))},k=function(e){for(var f=d(e),g=0;g&lt;a.length;g++)f!=a[g]||b(e.relatedTarget||e.toElement,&quot;*&quot;,f)||(f.__tamee.over=!1,a.splice(g,1),o(&quot;mouseexit&quot;,e,c,f))};C(c,&quot;mouseover&quot;,i(h,c,j,&quot;mouseover&quot;),j),C(c,&quot;mouseout&quot;,i(h,c,k,&quot;mouseout&quot;),k)}f.__taUnstore=function(){delete c.__tamee[e][f.__tauid]},g(c,e,f),c.__tamee[e][f.__tauid]=f}},q=&quot;ontouchstart&quot;in document.documentElement,r=&quot;onmousedown&quot;in document.documentElement,s={mousedown:&quot;touchstart&quot;,mouseup:&quot;touchend&quot;,mousemove:&quot;touchmove&quot;},t=function(){var a=-1;if(&quot;Microsoft Internet Explorer&quot;==navigator.appName){var b=navigator.userAgent,c=new RegExp(&quot;MSIE ([0-9]{1,}[.0-9]{0,})&quot;);null!=c.exec(b)&amp;&amp;(a=parseFloat(RegExp.$1))}return a}(),u=t&gt;-1&amp;&amp;9&gt;t,v=function(a,b){if(null==a)return[0,0];var c=A(a),d=z(c,0);return[d[b+&quot;X&quot;],d[b+&quot;Y&quot;]]},w=function(a){return null==a?[0,0]:u?[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop]:v(a,&quot;page&quot;)},x=function(a){return v(a,&quot;screen&quot;)},y=function(a){return v(a,&quot;client&quot;)},z=function(a,b){return a.item?a.item(b):a[b]},A=function(a){return a.touches&amp;&amp;a.touches.length&gt;0?a.touches:a.changedTouches&amp;&amp;a.changedTouches.length&gt;0?a.changedTouches:a.targetTouches&amp;&amp;a.targetTouches.length&gt;0?a.targetTouches:[a]},B=function(a){return A(a).length},C=function(a,b,c,d){if(g(a,b,c),d.__tauid=c.__tauid,a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent){var e=b+c.__tauid;a[&quot;e&quot;+e]=c,a[e]=function(){a[&quot;e&quot;+e]&amp;&amp;a[&quot;e&quot;+e](window.event)},a.attachEvent(&quot;on&quot;+b,a[e])}},D=function(a,b,d){null!=d&amp;&amp;E(a,function(){var a=c(this);if(h(a,b,d),null!=d.__tauid)if(a.removeEventListener)a.removeEventListener(b,d,!1);else if(this.detachEvent){var e=b+d.__tauid;a[e]&amp;&amp;a.detachEvent(&quot;on&quot;+b,a[e]),a[e]=null,a[&quot;e&quot;+e]=null}})},E=function(a,b){if(null!=a){a=&quot;string&quot;!=typeof a&amp;&amp;null==a.tagName&amp;&amp;null!=a.length?a:&quot;string&quot;==typeof a?document.querySelectorAll(a):[a];for(var c=0;c&lt;a.length;c++)b.apply(a[c])}};this.Mottle=function(b){b=b||{};var d=b.clickThreshold||150,e=b.dblClickThreshold||350,f=new p,g=new n(d,e),h=b.smartClicks,i=function(a,b,d,e){null!=d&amp;&amp;E(a,function(){var a=c(this);h&amp;&amp;&quot;click&quot;===b?l(a,b,d,e):&quot;tap&quot;===b||&quot;dbltap&quot;===b||&quot;contextmenu&quot;===b?g(a,b,d,e):&quot;mouseenter&quot;===b||&quot;mouseexit&quot;==b?f(a,b,d,e):k(a,b,d,e)})};this.remove=function(a){return E(a,function(){var a=c(this);if(a.__ta)for(var b in a.__ta)for(var d in a.__ta[b])D(a,b,a.__ta[b][d]);a.parentNode&amp;&amp;a.parentNode.removeChild(a)}),this},this.on=function(){var a=arguments[0],b=4==arguments.length?arguments[2]:null,c=arguments[1],d=arguments[arguments.length-1];return i(a,c,d,b),this},this.off=function(a,b,c){return D(a,b,c),this},this.trigger=function(b,d,e,f){var g=q&amp;&amp;s[d]?s[d]:d,h=w(e),i=x(e),j=y(e);return E(b,function(){var b,k=c(this);e=e||{screenX:i[0],screenY:i[1],clientX:j[0],clientY:j[1]};var l=function(a){f&amp;&amp;(a.payload=f)},m={TouchEvent:function(a){var b=document.createTouch(window,k,0,h[0],h[1],i[0],i[1],j[0],j[1],0,0,0,0);a.initTouchEvent(g,!0,!0,window,0,i[0],i[1],j[0],j[1],!1,!1,!1,!1,document.createTouchList(b))},MouseEvents:function(b){if(b.initMouseEvent(g,!0,!0,window,0,i[0],i[1],j[0],j[1],!1,!1,!1,!1,1,k),a.android){var c=document.createTouch(window,k,0,h[0],h[1],i[0],i[1],j[0],j[1],0,0,0,0);b.touches=b.targetTouches=b.changedTouches=document.createTouchList(c)}}};if(document.createEvent){var n=q&amp;&amp;s[d]&amp;&amp;!a.android,o=n?&quot;TouchEvent&quot;:&quot;MouseEvents&quot;;b=document.createEvent(o),m[o](b),l(b),k.dispatchEvent(b)}else document.createEventObject&amp;&amp;(b=document.createEventObject(),b.eventType=b.eventName=g,b.screenX=i[0],b.screenY=i[1],b.clientX=j[0],b.clientY=j[1],l(b),k.fireEvent(&quot;on&quot;+g,b))}),this}},Mottle.consume=function(a,b){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!b&amp;&amp;a.preventDefault&amp;&amp;a.preventDefault()},Mottle.pageLocation=w}.call(this),function(){&quot;use strict&quot;;var a=function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}},b=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e&lt;d.length;e++)if(d[e]===a)return!0;return!1},c=function(){var a=-1;if(&quot;Microsoft Internet Explorer&quot;==navigator.appName){var b=navigator.userAgent,c=new RegExp(&quot;MSIE ([0-9]{1,}[.0-9]{0,})&quot;);null!=c.exec(b)&amp;&amp;(a=parseFloat(RegExp.$1))}return a}(),d=c&gt;-1&amp;&amp;9&gt;c,e=function(a){if(d)return[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop];var b=g(a),c=f(b,0);return[c.pageX,c.pageY]},f=function(a,b){return a.item?a.item(b):a[b]},g=function(a){return a.touches&amp;&amp;a.touches.length&gt;0?a.touches:a.changedTouches&amp;&amp;a.changedTouches.length&gt;0?a.changedTouches:a.targetTouches&amp;&amp;a.targetTouches.length&gt;0?a.targetTouches:[a]},h={draggable:&quot;katavorio-draggable&quot;,droppable:&quot;katavorio-droppable&quot;,drag:&quot;katavorio-drag&quot;,selected:&quot;katavorio-drag-selected&quot;,active:&quot;katavorio-drag-active&quot;,hover:&quot;katavorio-drag-hover&quot;,noSelect:&quot;katavorio-drag-no-select&quot;},i=&quot;katavorio-drag-scope&quot;,j=[&quot;stop&quot;,&quot;start&quot;,&quot;drag&quot;,&quot;drop&quot;,&quot;over&quot;,&quot;out&quot;],k=function(){},l=function(){return!0},m=function(a,b,c){for(var d=0;d&lt;a.length;d++)a[d]!=c&amp;&amp;b(a[d])},n=function(a,b,c,d){m(a,function(a){a.setActive(b),b&amp;&amp;a.updatePosition(),c&amp;&amp;a.setHover(d,b)})},o=function(a,b){if(null!=a){a=&quot;string&quot;!=typeof a&amp;&amp;null==a.tagName&amp;&amp;null!=a.length?a:[a];for(var c=0;c&lt;a.length;c++)b.apply(a[c])}},p=function(a){a.stopPropagation?(a.stopPropagation(),a.preventDefault()):a.returnValue=!1},q=&quot;input,textarea,select,button&quot;,r=function(a,c,d){var e=a.srcElement||a.target;return!b(e,d.getInputFilterSelector(),c)},s=function(a,b,c,d){b.addClass(a,this._class),this.el=a;var e=!0;return this.setEnabled=function(a){e=a},this.isEnabled=function(){return e},this.toggleEnabled=function(){e=!e},this.setScope=function(a){this.scopes=a?a.split(/\s+/):[d]},this.setScope(b.scope),this.k=b.katavorio,b.katavorio},t=function(c,d,f){this._class=f.draggable;var g,h=s.apply(this,arguments),i=[0,0],j=null,k=!1,m=d.consumeStartEvent!==!1,o=c,q=d.clone,t=function(a){return null==d.grid?a:[d.grid[0]*Math.floor(a[0]/d.grid[0]),d.grid[1]*Math.floor(a[1]/d.grid[1])]},u=d.constrain||d.containment?function(a){return{x:a[0],y:a[1],w:this.size[0],h:this.size[1]},[Math.max(0,Math.min(g.w-this.size[0],a[0])),Math.max(0,Math.min(g.h-this.size[1],a[1]))]}.bind(this):function(a){return a},v=l,w=this.setFilter=function(a){a&amp;&amp;(v=function(d){var e=d.srcElement||d.target;return!b(e,a,c)})},x=d.canDrag||l,y=[],z=[],A=function(b){var g=d.rightButtonCanDrag||3!==b.which&amp;&amp;2!==b.button;if(g&amp;&amp;this.isEnabled()&amp;&amp;x()){var k=v(b)&amp;&amp;r(b,c,this.k);if(k){if(q){o=c.cloneNode(!0),o.setAttribute(&quot;id&quot;,null),o.style.position=&quot;absolute&quot;;var l=a(c);o.style.left=l.left+&quot;px&quot;,o.style.top=l.top+&quot;px&quot;,document.body.appendChild(o)}else o=c;m&amp;&amp;p(b),i=e(b),d.events.start({el:c,pos:j,e:b,drag:this}),d.bind(document,&quot;mousemove&quot;,B),d.bind(document,&quot;mouseup&quot;,C),h.markSelection(this),d.addClass(document.body,f.noSelect)}else d.consumeFilteredEvents&amp;&amp;p(b)}}.bind(this),B=function(a){if(i){k||(this.mark(),k=!0),z.length=0;var b=e(a),c=b[0]-i[0],f=b[1]-i[1],g=d.ignoreZoom?1:h.getZoom();c/=g,f/=g,this.moveBy(c,f,a),h.updateSelection(c,f,this)}}.bind(this),C=function(a){i=null,k=!1,d.unbind(document,&quot;mousemove&quot;,B),d.unbind(document,&quot;mouseup&quot;,C),d.removeClass(document.body,f.noSelect),this.unmark(a),h.unmarkSelection(this,a),this.stop(a),h.notifySelectionDragStop(this,a),q&amp;&amp;(o&amp;&amp;o.parentNode&amp;&amp;o.parentNode.removeChild(o),o=null)}.bind(this);this.abort=function(){null!=i&amp;&amp;C()},this.getDragElement=function(){return o||c},this.stop=function(a){d.events.stop({el:o,pos:d.getPosition(o),e:a,drag:this})},this.mark=function(){if(j=d.getPosition(o),this.size=d.getSize(o),y=h.getMatchingDroppables(this),n(y,!0,!1,this),d.addClass(o,d.dragClass||f.drag),d.constrain||d.containment){var a=d.getSize(o.parentNode);g={w:a[0],h:a[1]}}},this.unmark=function(a){n(y,!1,!0,this),y.length=0;for(var b=0;b&lt;z.length;b++)z[b].drop(this,a);d.removeClass(o,d.dragClass||f.drag)},this.moveBy=function(a,b,e){z.length=0;var f=u(t([j[0]+a,j[1]+b])),g={x:f[0],y:f[1],w:this.size[0],h:this.size[1]};d.setPosition(o,f);for(var h=0;h&lt;y.length;h++){var i={x:y[h].position[0],y:y[h].position[1],w:y[h].size[0],h:y[h].size[1]};d.intersects(g,i)&amp;&amp;y[h].canDrop(this)?(z.push(y[h]),y[h].setHover(this,!0,e)):y[h].el._katavorioDragHover&amp;&amp;y[h].setHover(this,!1,e)}d.events.drag({el:c,pos:f,e:e,drag:this})},this.destroy=function(){d.unbind(c,&quot;mousedown&quot;,A)},d.bind(c,&quot;mousedown&quot;,A),w(d.filter)},u=function(a,b,c){this._class=c.droppable,this._activeClass=b.activeClass||c.active,this._hoverClass=b.hoverClass||c.hover;var d=(s.apply(this,arguments),!1);this.setActive=function(c){b[c?&quot;addClass&quot;:&quot;removeClass&quot;](a,this._activeClass)},this.updatePosition=function(){this.position=b.getPosition(a),this.size=b.getSize(a)},this.canDrop=b.canDrop||function(){return!0},this.setHover=function(c,e,f){(e||null==a._katavorioDragHover||a._katavorioDragHover==c.el._katavorio)&amp;&amp;(b[e?&quot;addClass&quot;:&quot;removeClass&quot;](a,this._hoverClass),a._katavorioDragHover=e?c.el._katavorio:null,d!==e&amp;&amp;b.events[e?&quot;over&quot;:&quot;out&quot;]({el:a,e:f,drag:c,drop:this}),d=e)},this.drop=function(a,c){b.events.drop({drag:a,e:c,drop:this})},this.destroy=function(){}},v=function(){return&quot;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&quot;.replace(/[xy]/g,function(a){var b=0|16*Math.random(),c=&quot;x&quot;==a?b:8|3&amp;b;return c.toString(16)})},w=function(a){return null==a?null:(a=&quot;string&quot;==typeof a?document.getElementById(a):a,null==a?null:(a._katavorio=a._katavorio||v(),a))};this.Katavorio=function(a){var b=[],c={},d={},e={},f=1,g=function(a,b){for(var c=0;c&lt;a.scopes.length;c++)b[a.scopes[c]]=b[a.scopes[c]]||[],b[a.scopes[c]].push(a)},l=function(b,c){for(var d=0;d&lt;b.scopes.length;d++)if(c[b.scopes[d]]){var e=a.indexOf(c[b.scopes[d]],b);-1!=e&amp;&amp;c[b.scopes[d]].splice(e,1)}},n=(this.getMatchingDroppables=function(a){for(var b=[],c={},d=0;d&lt;a.scopes.length;d++){var f=e[a.scopes[d]];if(f)for(var g=0;g&lt;f.length;g++)f[g].canDrop(a)&amp;&amp;!c[f[g].el._katavorio]&amp;&amp;f[g].el!==a.el&amp;&amp;(c[f[g].el._katavorio]=!0,b.push(f[g]))}return b},function(b){b=b||{};var c={events:{}};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];for(var d=0;d&lt;j.length;d++)c.events[j[d]]=b[j[d]]||k;return c.katavorio=this,c}.bind(this)),p={},r=a.css||{},s=a.scope||i;for(var v in h)p[v]=h[v];for(var v in r)p[v]=r[v];var x=a.inputFilterSelector||q;this.getInputFilterSelector=function(){return x},this.setInputFilterSelector=function(a){return x=a,this},this.draggable=function(a,b){var c=[];return o(a,function(){var a=w(this);if(null!=a){var e=n(b);a._katavorioDrag=new t(a,e,p,s),g(a._katavorioDrag,d),c.push(a._katavorioDrag)}}),c},this.droppable=function(a,b){var c=[];return o(a,function(){var a=w(this);null!=a&amp;&amp;(a._katavorioDrop=new u(a,n(b),p,s),g(a._katavorioDrop,e),c.push(a._katavorioDrop))}),c},this.select=function(d){return o(d,function(){var d=w(this);d&amp;&amp;d._katavorioDrag&amp;&amp;(c[d._katavorio]||(b.push(d._katavorioDrag),c[d._katavorio]=[d,b.length-1],a.addClass(d,p.selected)))}),this},this.deselect=function(d){return o(d,function(){var d=w(this);if(d&amp;&amp;d._katavorio){var e=c[d._katavorio];if(e){for(var f=[],g=0;g&lt;b.length;g++)b[g].el!==d&amp;&amp;f.push(b[g]);b=f,delete c[d._katavorio],a.removeClass(d,p.selected)}}}),this},this.deselectAll=function(){for(var d in c){var e=c[d];a.removeClass(e[0],p.selected)}b.length=0,c={}},this.markSelection=function(a){m(b,function(a){a.mark()},a)},this.unmarkSelection=function(a,c){m(b,function(a){a.unmark(c)},a)},this.getSelection=function(){return b.slice(0)},this.updateSelection=function(a,c,d){m(b,function(b){b.moveBy(a,c)},d)},this.notifySelectionDragStop=function(a,c){m(b,function(a){a.stop(c)},a)},this.setZoom=function(a){f=a},this.getZoom=function(){return f};var y=function(a,b,c){null!=a&amp;&amp;(l(a,c),a.setScope(b),g(a,c))};this.setScope=function(a,b){y(a._katavorioDrag,b,d),y(a._katavorioDrop,b,e)},this.setDragScope=function(a,b){y(a._katavorioDrag,b,d)},this.setDropScope=function(a,b){y(a._katavorioDrop,b,e)},this.getDragsForScope=function(a){return d[a]},this.getDropsForScope=function(a){return e[a]};var z=function(a,b,c){a=w(a),a[b]&amp;&amp;(a[b].destroy(),l(a[b],c),a[b]=null)};this.elementRemoved=function(a){this.destroyDraggable(a),this.destroyDroppable(a)},this.destroyDraggable=function(a){z(a,&quot;_katavorioDrag&quot;,d)},this.destroyDroppable=function(a){z(a,&quot;_katavorioDrop&quot;,e)}}}.call(this),function(){var a=function(a){return&quot;[object Array]&quot;===Object.prototype.toString.call(a)},b=function(a){return&quot;[object Number]&quot;===Object.prototype.toString.call(a)},c=function(a){return&quot;string&quot;==typeof a},d=function(a){return&quot;boolean&quot;==typeof a},e=function(a){return null==a},f=function(a){return null==a?!1:&quot;[object Object]&quot;===Object.prototype.toString.call(a)},g=function(a){return&quot;[object Date]&quot;===Object.prototype.toString.call(a)},h=function(a){return&quot;[object Function]&quot;===Object.prototype.toString.call(a)},i=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},j=this,k=j.jsPlumbUtil={isArray:a,isString:c,isBoolean:d,isNull:e,isObject:f,isDate:g,isFunction:h,isEmpty:i,isNumber:b,clone:function(b){if(c(b))return&quot;&quot;+b;if(d(b))return!!b;if(g(b))return new Date(b.getTime());if(h(b))return b;if(a(b)){for(var e=[],i=0;i&lt;b.length;i++)e.push(this.clone(b[i]));return e}if(f(b)){var j={};for(var k in b)j[k]=this.clone(b[k]);return j}return b},merge:function(b,e,g){var h,i,j={};for(g=g||[],i=0;i&lt;g.length;i++)j[g[i]]=!0;var k=this.clone(b);for(i in e)if(null==k[i])k[i]=e[i];else if(c(e[i])||d(e[i]))j[i]?(h=[],h.push.apply(h,a(k[i])?k[i]:[k[i]]),h.push.apply(h,a(e[i])?e[i]:[e[i]]),k[i]=h):k[i]=e[i];else if(a(e[i]))h=[],a(k[i])&amp;&amp;h.push.apply(h,k[i]),h.push.apply(h,e[i]),k[i]=h;else if(f(e[i])){f(k[i])||(k[i]={});for(var l in e[i])k[i][l]=e[i][l]}return k},replace:function(a,b,c){var d=a,e=d;return b.replace(/([^\.])+/g,function(a,b,d,f){var g=a.match(/([^\[0-9]+){1}(\[)([0-9+])/),h=d+a.length&gt;=f.length,i=function(){return e[g[1]]||function(){return e[g[1]]=[],e[g[1]]}()};if(h)g?i()[g[3]]=c:e[a]=c;else if(g){var j=i();e=j[g[3]]||function(){return j[g[3]]={},j[g[3]]}()}else e=e[a]||function(){return e[a]={},e[a]}()}),a},functionChain:function(a,b,c){for(var d=0;d&lt;c.length;d++){var e=c[d][0][c[d][1]].apply(c[d][0],c[d][2]);if(e===b)return e}return a},populate:function(b,d){var e=function(a){var b=a.match(/(\${.*?})/g);if(null!=b)for(var c=0;c&lt;b.length;c++){var e=d[b[c].substring(2,b[c].length-1)]||&quot;&quot;;null!=e&amp;&amp;(a=a.replace(b[c],e))}return a},g=function(b){if(null!=b){if(c(b))return e(b);if(a(b)){for(var d=[],h=0;h&lt;b.length;h++)d.push(g(b[h]));return d}if(f(b)){var i={};for(var j in b)i[j]=g(b[j]);return i}return b}};return g(b)},convertStyle:function(a,b){if(&quot;transparent&quot;===a)return a;var c=a,d=function(a){return 1==a.length?&quot;0&quot;+a:a},e=function(a){return d(Number(a).toString(16))},f=/(rgb[a]?\()(.*)(\))/;if(a.match(f)){var g=a.match(f)[2].split(&quot;,&quot;);c=&quot;#&quot;+e(g[0])+e(g[1])+e(g[2]),b||4!=g.length||(c+=e(g[3]))}return c},findWithFunction:function(a,b){if(a)for(var c=0;c&lt;a.length;c++)if(b(a[c]))return c;return-1},indexOf:function(a,b){return a.indexOf?a.indexOf(b):k.findWithFunction(a,function(a){return a==b})},removeWithFunction:function(a,b){var c=k.findWithFunction(a,b);return c&gt;-1&amp;&amp;a.splice(c,1),-1!=c},remove:function(a,b){var c=k.indexOf(a,b);return c&gt;-1&amp;&amp;a.splice(c,1),-1!=c},addWithFunction:function(a,b,c){-1==k.findWithFunction(a,c)&amp;&amp;a.push(b)},addToList:function(a,b,c,d){var e=a[b];return null==e&amp;&amp;(e=[],a[b]=e),e[d?&quot;unshift&quot;:&quot;push&quot;](c),e},extend:function(b,c){var d;for(c=a(c)?c:[c],d=0;d&lt;c.length;d++)for(var e in c[d].prototype)c[d].prototype.hasOwnProperty(e)&amp;&amp;(b.prototype[e]=c[d].prototype[e]);var f=function(a,b){return function(){for(d=0;d&lt;c.length;d++)c[d].prototype[a]&amp;&amp;c[d].prototype[a].apply(this,arguments);return b.apply(this,arguments)}},g=function(a){for(var c in a)b.prototype[c]=f(c,a[c])};if(arguments.length&gt;2)for(d=2;d&lt;arguments.length;d++)g(arguments[d]);return b},uuid:function(){return&quot;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&quot;.replace(/[xy]/g,function(a){var b=0|16*Math.random(),c=&quot;x&quot;==a?b:8|3&amp;b;return c.toString(16)})},logEnabled:!0,log:function(){if(k.logEnabled&amp;&amp;&quot;undefined&quot;!=typeof console)try{var a=arguments[arguments.length-1];console.log(a)}catch(b){}},wrap:function(a,b,c){return a=a||function(){},b=b||function(){},function(){var d=null;try{d=b.apply(this,arguments)}catch(e){k.log(&quot;jsPlumb function failedÂ : &quot;+e)}if(null==c||d!==c)try{d=a.apply(this,arguments)}catch(e){k.log(&quot;wrapped function failedÂ : &quot;+e)}return d}}};k.EventGenerator=function(){var a={},b=!1,c={ready:!0};this.bind=function(b,c,d){return k.addToList(a,b,c,d),this},this.fire=function(d,e,f){if(!b&amp;&amp;a[d]){var g=a[d].length,h=0,i=!1,j=null;if(!this.shouldFireEvent||this.shouldFireEvent(d,e,f))for(;!i&amp;&amp;g&gt;h&amp;&amp;j!==!1;){if(c[d])a[d][h].apply(this,[e,f]);else try{j=a[d][h].apply(this,[e,f])}catch(l){k.log(&quot;jsPlumb: fire failed for event &quot;+d+&quot;Â : &quot;+l)}h++,(null==a||null==a[d])&amp;&amp;(i=!0)}}return this},this.unbind=function(b){return b?delete a[b]:a={},this},this.getListener=function(b){return a[b]},this.setSuspendEvents=function(a){b=a},this.isSuspendEvents=function(){return b},this.cleanupListeners=function(){for(var b in a)a[b]=null}},k.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}},Function.prototype.bind||(Function.prototype.bind=function(a){if(&quot;function&quot;!=typeof this)throw new TypeError(&quot;Function.prototype.bind - what is trying to be bound is not callable&quot;);var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&amp;&amp;a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}.call(this),function(){&quot;use strict&quot;;var a=this,b=a.jsPlumbUtil;b.ieVersion=/MSIE\s([\d.]+)/.test(navigator.userAgent)?new Number(RegExp.$1):-1,b.oldIE=b.ieVersion&gt;-1&amp;&amp;b.ieVersion&lt;9,b.matchesSelector=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e&lt;d.length;e++)if(d[e]===a)return!0;return!1},b.consume=function(a,b){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!b&amp;&amp;a.preventDefault&amp;&amp;a.preventDefault()},b.sizeElement=function(a,b,c,d,e){a&amp;&amp;(a.style.height=e+&quot;px&quot;,a.height=e,a.style.width=d+&quot;px&quot;,a.width=d,a.style.left=b+&quot;px&quot;,a.style.top=c+&quot;px&quot;)}}.call(this),function(){var a=this,b=!!window.SVGAngle||document.implementation.hasFeature(&quot;<A href="http://www.w3.org/TR/SVG11/feature#BasicStructure" class="external free" rel="nofollow">http://www.w3.org/TR/SVG11/feature#BasicStructure</A>&quot;,&quot;1.1&quot;),c=function(){if(void 0===c.vml){var a=document.body.appendChild(document.createElement(&quot;div&quot;));a.innerHTML='&lt;v:shape id=&quot;vml_flag1&quot; adj=&quot;1&quot; /&gt;';var b=a.firstChild;null!=b&amp;&amp;null!=b.style?(b.style.behavior=&quot;url(#default#VML)&quot;,c.vml=b?&quot;object&quot;==typeof b.adj:!0):c.vml=!1,a.parentNode.removeChild(a)}return c.vml},d=function(){var a=-1;if(&quot;Microsoft Internet Explorer&quot;==navigator.appName){var b=navigator.userAgent,c=new RegExp(&quot;MSIE ([0-9]{1,}[.0-9]{0,})&quot;);null!=c.exec(b)&amp;&amp;(a=parseFloat(RegExp.$1))}return a}(),e=d&gt;-1&amp;&amp;9&gt;d,f=function(a,b){if(null==a)return[0,0];var c=k(a),d=j(c,0);return[d[b+&quot;X&quot;],d[b+&quot;Y&quot;]]},g=function(a){return null==a?[0,0]:e?[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop]:f(a,&quot;page&quot;)},h=function(a){return f(a,&quot;screen&quot;)},i=function(a){return f(a,&quot;client&quot;)},j=function(a,b){return a.item?a.item(b):a[b]},k=function(a){return a.touches&amp;&amp;a.touches.length&gt;0?a.touches:a.changedTouches&amp;&amp;a.changedTouches.length&gt;0?a.changedTouches:a.targetTouches&amp;&amp;a.targetTouches.length&gt;0?a.targetTouches:[a]},l=function(a){var b={},c=[],d={},e={},f={};this.register=function(g){var h=a.getId(g),i=jsPlumbAdapter.getOffset(g,a);b[h]||(b[h]=g,c.push(g),d[h]={});var j=function(b){if(b)for(var c=0;c<B>0){var l=jsPlumbAdapter.getOffset(g,a);d[h][k]={id:k,offset:{left:l.left-i.left,top:l.top-i.top}},f[k]=h}j(b.childNodes[c])}};j(g)},this.updateOffsets=function(b){if(null!=b){var c=jsPlumb.getDOMElement(b),e=a.getId(c),g=d[e],h=jsPlumbAdapter.getOffset(c,a);if(g)for(var i in g){var j=jsPlumb.getElementObject(i),k=jsPlumbAdapter.getOffset(j,a);d[e][i]={id:i,offset:{left:k.left-h.left,top:k.top-h.top}},f[i]=e}}},this.endpointAdded=function(c){var g=document.body,h=a.getId(c),i=jsPlumbAdapter.getOffset(c,a),j=c.parentNode;for(e[h]=e[h]?e[h]+1:1;null!=j&amp;&amp;j!=g;){var k=a.getId(j,null,!0);if(k&amp;&amp;b[k]){var l=jsPlumbAdapter.getOffset(j,a);null==d[k][h]&amp;&amp;(d[k][h]={id:h,offset:{left:i.left-l.left,top:i.top-l.top}},f[h]=k);break}j=j.parentNode}},this.endpointDeleted=function(a){if(e[a.elementId]&amp;&amp;(e[a.elementId]--,e[a.elementId]&lt;=0))for(var b in d)d[b]&amp;&amp;(delete d[b][a.elementId],delete f[a.elementId])},this.changeId=function(a,b){d[b]=d[a],d[a]={},f[b]=f[a],f[a]=null},this.getElementsForDraggable=function(a){return d[a]},this.elementRemoved=function(a){var b=f[a];b&amp;&amp;(delete d[b][a],delete f[a])},this.reset=function(){b={},c=[],d={},e={}},this.dragEnded=function(b){var c=a.getId(b),d=f[c];d&amp;&amp;this.updateOffsets(d)},this.setParent=function(b,c,e,g){var h=f[c];if(h){d[g]||(d[g]={}),d[g][c]=d[h][c],delete d[h][c];var i=jsPlumbAdapter.getOffset(e,a),j=jsPlumbAdapter.getOffset(b,a);d[g][c].offset={left:j.left-i.left,top:j.top-i.top},f[c]=g}},this.getDragAncestor=function(b){var c=jsPlumb.getDOMElement(b),d=a.getId(c),e=f[d];return e?jsPlumb.getDOMElement(e):null}};window.console||(window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}});var m=function(a){return null==a?null:a.replace(/^\s\s*/,&quot;&quot;).replace(/\s\s*$/,&quot;&quot;)},n=function(a,b){b=m(b),&quot;undefined&quot;!=typeof a.className.baseVal?a.className.baseVal=b:a.className=b},o=function(a){return&quot;undefined&quot;==typeof a.className.baseVal?a.className:a.className.baseVal},p=function(a,b,c){for(var d=jsPlumbUtil.isArray(c)?c:c.split(/\s+/),e=o(a),f=e.split(/\s+/),g=0;g&lt;d.length;g++)if(b)-1==jsPlumbUtil.indexOf(f,d[g])&amp;&amp;f.push(d[g]);else{var h=jsPlumbUtil.indexOf(f,d[g]);-1!=h&amp;&amp;f.splice(h,1)}n(a,f.join(&quot; &quot;))},q=function(a,b){if(null!=a)if(&quot;string&quot;==typeof a)b(jsPlumb.getDOMElement(a));else if(null!=a.length)for(var c=0;c&lt;a.length;c++)b(jsPlumb.getDOMElement(a[c]));else b(a)};window.jsPlumbAdapter={headless:!1,pageLocation:g,screenLocation:h,clientLocation:i,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},appendToRoot:function(a){document.body.appendChild(a)},getRenderModes:function(){return[&quot;svg&quot;,&quot;vml&quot;]},isRenderModeAvailable:function(a){return{svg:b,vml:c()}[a]},getDragManager:function(a){return new l(a)},setRenderMode:function(a){var b;if(a){a=a.toLowerCase();var c=this.isRenderModeAvailable(&quot;svg&quot;),d=this.isRenderModeAvailable(&quot;vml&quot;);&quot;svg&quot;===a?c?b=&quot;svg&quot;:d&amp;&amp;(b=&quot;vml&quot;):d&amp;&amp;(b=&quot;vml&quot;)}return b},addClass:function(a,b){q(a,function(a){p(a,!0,b)})},hasClass:function(a,b){return a=jsPlumb.getDOMElement(a),a.classList?a.classList.contains(b):-1!=o(a).indexOf(b)},removeClass:function(a,b){q(a,function(a){p(a,!1,b)})},setClass:function(a,b){q(a,function(a){n(a,b)})},setPosition:function(a,b){a.style.left=b.left+&quot;px&quot;,a.style.top=b.top+&quot;px&quot;},getPosition:function(a){var b=function(b){var c=a.style[b];return c?c.substring(0,c.length-2):0};return{left:b(&quot;left&quot;),top:b(&quot;top&quot;)}},getOffset:function(a,b,c){a=jsPlumb.getDOMElement(a);for(var d=b.getContainer(),e=a.offsetLeft,f=a.offsetTop,g=c||null!=d&amp;&amp;a.offsetParent!=d?a.offsetParent:null;null!=g;)e+=g.offsetLeft,f+=g.offsetTop,g=c?g.offsetParent:g.offsetParent==d?null:g.offsetParent;return{left:e,top:f}
},getPositionOnElement:function(a,b,c){var d=&quot;undefined&quot;!=typeof b.getBoundingClientRect?b.getBoundingClientRect():{left:0,top:0,width:0,height:0},e=document.body,f=document.documentElement,g=(b.offsetParent,window.pageYOffset||f.scrollTop||e.scrollTop),h=window.pageXOffset||f.scrollLeft||e.scrollLeft,i=f.clientTop||e.clientTop||0,j=f.clientLeft||e.clientLeft||0,k=0,l=0,m=d.top+g-i+k*c,n=d.left+h-j+l*c,o=jsPlumbAdapter.pageLocation(a),p=d.width||b.offsetWidth*c,q=d.height||b.offsetHeight*c,r=(o[0]-n)/p,s=(o[1]-m)/q;return[r,s]},getAbsolutePosition:function(a){var b=function(b){var c=a.style[b];return c?parseFloat(c.substring(0,c.length-2)):void 0};return[b(&quot;left&quot;),b(&quot;top&quot;)]},setAbsolutePosition:function(b,c,d,e){d?a.jsPlumb.animate(b,{left:&quot;+=&quot;+(c[0]-d[0]),top:&quot;+=&quot;+(c[1]-d[1])},e):(b.style.left=c[0]+&quot;px&quot;,b.style.top=c[1]+&quot;px&quot;)}}}.call(this),function(){&quot;use strict&quot;;var a=jsPlumbUtil,b=function(a,b,c){return jsPlumbAdapter.getOffset(a,b,c)},c=function(){return&quot;&quot;+(new Date).getTime()},d=function(a){if(a._jsPlumb.paintStyle&amp;&amp;a._jsPlumb.hoverPaintStyle){var b={};u.extend(b,a._jsPlumb.paintStyle),u.extend(b,a._jsPlumb.hoverPaintStyle),delete a._jsPlumb.hoverPaintStyle,b.gradient&amp;&amp;a._jsPlumb.paintStyle.fillStyle&amp;&amp;delete b.gradient,a._jsPlumb.hoverPaintStyle=b}},e=[&quot;click&quot;,&quot;dblclick&quot;,&quot;mouseenter&quot;,&quot;mouseout&quot;,&quot;mousemove&quot;,&quot;mousedown&quot;,&quot;mouseup&quot;,&quot;contextmenu&quot;],f={mouseout:&quot;mouseleave&quot;,mouseexit:&quot;mouseleave&quot;},g=function(a,b,c,d){var e=a.getAttachedElements();if(e)for(var f=0,g=e.length;g&gt;f;f++)d&amp;&amp;d==e[f]||e[f].setHover(b,!0,c)},h=function(a){return null==a?null:a.split(&quot; &quot;)},i=function(b,c,d){if(b.getDefaultType){for(var e=b.getTypeDescriptor(),f=a.merge({},b.getDefaultType()),g=0,h=b._jsPlumb.types.length;h&gt;g;g++)f=a.merge(f,b._jsPlumb.instance.getType(b._jsPlumb.types[g],e),[&quot;cssClass&quot;]);c&amp;&amp;(f=a.populate(f,c)),b.applyType(f,d),d||b.repaint()}},j=window.jsPlumbUIComponent=function(b){jsPlumbUtil.EventGenerator.apply(this,arguments);var c=this,d=arguments,g=c.idPrefix,h=g+(new Date).getTime();if(this._jsPlumb={instance:b._jsPlumb,parameters:b.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:b.beforeDetach,beforeDrop:b.beforeDrop,overlayPlacements:[],hoverClass:b.hoverClass||b._jsPlumb.Defaults.HoverClass,types:[]},this.getId=function(){return h},b.events)for(var i in b.events)c.bind(i,b.events[i]);this.clone=function(){var a={};return this.constructor.apply(a,d),a}.bind(this),this.isDetachAllowed=function(b){var c=!0;if(this._jsPlumb.beforeDetach)try{c=this._jsPlumb.beforeDetach(b)}catch(d){a.log(&quot;jsPlumb: beforeDetach callback failed&quot;,d)}return c},this.isDropAllowed=function(b,c,d,e,f,g,h){var i=this._jsPlumb.instance.checkCondition(&quot;beforeDrop&quot;,{sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f,source:g,target:h});if(this._jsPlumb.beforeDrop)try{i=this._jsPlumb.beforeDrop({sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f,source:g,target:h})}catch(j){a.log(&quot;jsPlumb: beforeDrop callback failed&quot;,j)}return i};var j=[],k=function(a,b,c){j.push([a,b,c]),a.bind(b,c)},l=[],m=function(a,b,c,d){var e=f[c]||c,g=function(a){d&amp;&amp;d(a)===!1||b.fire(e,b,a)};l.push([a,c,g,b]),b._jsPlumb.instance.on(a,c,g)},n=function(a,b,c,d){f[b]||b,d._jsPlumb.instance.off(a,b,c)};this.setListenerComponent=function(a){for(var b=0;b&lt;l.length;b++)l[b][3]=a},this.bindListeners=function(a,b,c){k(a,&quot;click&quot;,function(a,c){b.fire(&quot;click&quot;,b,c)}),k(a,&quot;dblclick&quot;,function(a,c){b.fire(&quot;dblclick&quot;,b,c)}),k(a,&quot;contextmenu&quot;,function(a,c){b.fire(&quot;contextmenu&quot;,b,c)}),k(a,&quot;mouseleave&quot;,function(a,d){b.isHover()&amp;&amp;(c(!1),b.fire(&quot;mouseleave&quot;,b,d))}),k(a,&quot;mouseenter&quot;,function(a,d){b.isHover()||(c(!0),b.fire(&quot;mouseenter&quot;,b,d))}),k(a,&quot;mousedown&quot;,function(a,c){b.fire(&quot;mousedown&quot;,b,c)}),k(a,&quot;mouseup&quot;,function(a,c){b.fire(&quot;mouseup&quot;,b,c)})},this.unbindListeners=function(){for(var a=0;a&lt;j.length;a++){var b=j[a];b[0].unbind(b[1],b[2])}j=null},this.attachListeners=function(a,b,c){c=c||{};for(var d=0,f=e.length;f&gt;d;d++)m(a,b,e[d],c[e[d]])},this.detachListeners=function(){for(var a=0;a&lt;l.length;a++)n(l[a][0],l[a][1],l[a][2],l[a][3]);l=null},this.reattachListenersForElement=function(a){if(arguments.length&gt;1){for(var b=0,c=e.length;c&gt;b;b++)n(a,e[b]);for(b=1,c=arguments.length;c&gt;b;b++)this.attachListeners(a,arguments[b])}}},k=function(a,b){var c=a._jsPlumb.types[b],d=a._jsPlumb.instance.getType(c,a.getTypeDescriptor());null!=d&amp;&amp;d.cssClass&amp;&amp;a.canvas&amp;&amp;a._jsPlumb.instance.removeClass(a.canvas,d.cssClass)};jsPlumbUtil.extend(j,jsPlumbUtil.EventGenerator,{getParameter:function(a){return this._jsPlumb.parameters[a]},setParameter:function(a,b){this._jsPlumb.parameters[a]=b},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(a){this._jsPlumb.parameters=a},addClass:function(a){jsPlumbAdapter.addClass(this.canvas,a)},removeClass:function(a){jsPlumbAdapter.removeClass(this.canvas,a)},setType:function(a,b,c){this.clearTypes(),this._jsPlumb.types=h(a)||[],i(this,b,c)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(a,b){i(this,a,b)},hasType:function(a){return-1!=jsPlumbUtil.indexOf(this._jsPlumb.types,a)},addType:function(a,b,c){var d=h(a),e=!1;if(null!=d){for(var f=0,g=d.length;g&gt;f;f++)this.hasType(d[f])||(this._jsPlumb.types.push(d[f]),e=!0);e&amp;&amp;i(this,b,c)}},removeType:function(b,c){var d=h(b),e=!1,f=function(b){var c=a.indexOf(this._jsPlumb.types,b);return-1!=c?(k(this,c),this._jsPlumb.types.splice(c,1),!0):!1}.bind(this);if(null!=d){for(var g=0,j=d.length;j&gt;g;g++)e=f(d[g])||e;e&amp;&amp;i(this,null,c)}},clearTypes:function(a){for(var b=this._jsPlumb.types.length,c=0;b&gt;c;c++)k(this,0),this._jsPlumb.types.splice(0,1);i(this,{},a)},toggleType:function(a,b,c){var d=h(a);if(null!=d){for(var e=0,f=d.length;f&gt;e;e++){var g=jsPlumbUtil.indexOf(this._jsPlumb.types,d[e]);-1!=g?(k(this,g),this._jsPlumb.types.splice(g,1)):this._jsPlumb.types.push(d[e])}i(this,b,c)}},applyType:function(a,b){if(this.setPaintStyle(a.paintStyle,b),this.setHoverPaintStyle(a.hoverPaintStyle,b),a.parameters)for(var c in a.parameters)this.setParameter(c,a.parameters[c])},setPaintStyle:function(a,b){this._jsPlumb.paintStyle=a,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,d(this),b||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(a,b){this._jsPlumb.hoverPaintStyle=a,d(this),b||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},cleanup:function(){this.unbindListeners(),this.detachListeners()},destroy:function(){this.cleanupListeners(),this.clone=null,this._jsPlumb=null},isHover:function(){return this._jsPlumb.hover},setHover:function(a,b,d){if(this._jsPlumb&amp;&amp;!this._jsPlumb.instance.currentlyDragging&amp;&amp;!this._jsPlumb.instance.isHoverSuspended()){if(this._jsPlumb.hover=a,null!=this.canvas){if(null!=this._jsPlumb.instance.hoverClass){var e=a?&quot;addClass&quot;:&quot;removeClass&quot;;this._jsPlumb.instance[e](this.canvas,this._jsPlumb.instance.hoverClass)}null!=this._jsPlumb.hoverClass&amp;&amp;this._jsPlumb.instance[e](this.canvas,this._jsPlumb.hoverClass)}null!=this._jsPlumb.hoverPaintStyle&amp;&amp;(this._jsPlumb.paintStyleInUse=a?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(d=d||c(),this.repaint({timestamp:d,recalc:!1}))),this.getAttachedElements&amp;&amp;!b&amp;&amp;g(this,a,c(),this)}}});var l=&quot;__label&quot;,m=function(a,b){for(var c=-1,d=0,e=a._jsPlumb.overlays.length;e&gt;d;d++)if(b===a._jsPlumb.overlays[d].id){c=d;break}return c},n=function(a,b){var c={cssClass:b.cssClass,labelStyle:a.labelStyle,id:l,component:a,_jsPlumb:a._jsPlumb.instance},d=u.extend(c,b);return new(u.Overlays[a._jsPlumb.instance.getRenderMode()].Label)(d)},o=function(b,c){var d=null;if(a.isArray(c)){var e=c[0],f=u.extend({component:b,_jsPlumb:b._jsPlumb.instance},c[1]);3==c.length&amp;&amp;u.extend(f,c[2]),d=new(u.Overlays[b._jsPlumb.instance.getRenderMode()][e])(f)}else d=c.constructor==String?new(u.Overlays[b._jsPlumb.instance.getRenderMode()][c])({component:b,_jsPlumb:b._jsPlumb.instance}):c;b._jsPlumb.overlays.push(d)},p=function(a,b){var c=a.defaultOverlayKeys||[],d=b.overlays,e=function(b){return a._jsPlumb.instance.Defaults[b]||u.Defaults[b]||[]};d||(d=[]);for(var f=0,g=c.length;g&gt;f;f++)d.unshift.apply(d,e(c[f]));return d},q=window.OverlayCapableJsPlumbUIComponent=function(a){j.apply(this,arguments),this._jsPlumb.overlays=[];var b=p(this,a);if(b)for(var c=0,d=b.length;d&gt;c;c++)o(this,b[c]);if(a.label){var e=a.labelLocation||this.defaultLabelLocation||.5,f=a.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle;this._jsPlumb.overlays.push(n(this,{label:a.label,location:e,labelStyle:f}))}this.setListenerComponent=function(a){if(this._jsPlumb)for(var b=0;b&lt;this._jsPlumb.overlays.length;b++)this._jsPlumb.overlays[b].setListenerComponent(a)}};jsPlumbUtil.extend(q,j,{applyType:function(a,b){if(this.removeAllOverlays(b),a.overlays)for(var c=0,d=a.overlays.length;d&gt;c;c++)this.addOverlay(a.overlays[c],!0)},setHover:function(a){if(this._jsPlumb&amp;&amp;!this._jsPlumb.instance.isConnectionBeingDragged())for(var b=0,c=this._jsPlumb.overlays.length;c&gt;b;b++)this._jsPlumb.overlays[b][a?&quot;addClass&quot;:&quot;removeClass&quot;](this._jsPlumb.instance.hoverClass)},addOverlay:function(a,b){o(this,a),b||this.repaint()},getOverlay:function(a){var b=m(this,a);return b&gt;=0?this._jsPlumb.overlays[b]:null},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(a){var b=this.getOverlay(a);b&amp;&amp;b.hide()},hideOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b&gt;a;a++)this._jsPlumb.overlays[a].hide()},showOverlay:function(a){var b=this.getOverlay(a);b&amp;&amp;b.show()},showOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b&gt;a;a++)this._jsPlumb.overlays[a].show()},removeAllOverlays:function(a){for(var b=0,c=this._jsPlumb.overlays.length;c&gt;b;b++)this._jsPlumb.overlays[b].cleanup&amp;&amp;this._jsPlumb.overlays[b].cleanup();this._jsPlumb.overlays.splice(0,this._jsPlumb.overlays.length),this._jsPlumb.overlayPositions=null,a||this.repaint()},removeOverlay:function(a){var b=m(this,a);if(-1!=b){var c=this._jsPlumb.overlays[b];c.cleanup&amp;&amp;c.cleanup(),this._jsPlumb.overlays.splice(b,1),this._jsPlumb.overlayPositions&amp;&amp;delete this._jsPlumb.overlayPositions[a]}},removeOverlays:function(){for(var a=0,b=arguments.length;b&gt;a;a++)this.removeOverlay(arguments[a])},moveParent:function(a){this.bgCanvas&amp;&amp;(this.bgCanvas.parentNode.removeChild(this.bgCanvas),a.appendChild(this.bgCanvas)),this.canvas.parentNode.removeChild(this.canvas),a.appendChild(this.canvas);for(var b=0;b&lt;this._jsPlumb.overlays.length;b++)this._jsPlumb.overlays[b].isAppendedAtTopLevel&amp;&amp;(this._jsPlumb.overlays[b].canvas.parentNode.removeChild(this._jsPlumb.overlays[b].canvas),a.appendChild(this._jsPlumb.overlays[b].canvas))},getLabel:function(){var a=this.getOverlay(l);return null!=a?a.getLabel():null},getLabelOverlay:function(){return this.getOverlay(l)},setLabel:function(a){var b=this.getOverlay(l);if(b)a.constructor==String||a.constructor==Function?b.setLabel(a):(a.label&amp;&amp;b.setLabel(a.label),a.location&amp;&amp;b.setLocation(a.location));else{var c=a.constructor==String||a.constructor==Function?{label:a}:a;b=n(this,c),this._jsPlumb.overlays.push(b)}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(){for(var a=0;a&lt;this._jsPlumb.overlays.length;a++)this._jsPlumb.overlays[a].cleanup(),this._jsPlumb.overlays[a].destroy();this._jsPlumb.overlays.splice(0),this._jsPlumb.overlayPositions=null},setVisible:function(a){this[a?&quot;showOverlays&quot;:&quot;hideOverlays&quot;]()},setAbsoluteOverlayPosition:function(a,b){this._jsPlumb.overlayPositions=this._jsPlumb.overlayPositions||{},this._jsPlumb.overlayPositions[a.id]=b},getAbsoluteOverlayPosition:function(a){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[a.id]:null}});var r=0,s=function(){var a=r+1;return r++,a},t=window.jsPlumbInstance=function(d){this.Defaults={Anchor:&quot;BottomCenter&quot;,Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:&quot;Bezier&quot;,Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:&quot;Dot&quot;,EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:&quot;#456&quot;},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:&quot;black&quot;},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:8,strokeStyle:&quot;#456&quot;},ReattachConnections:!1,RenderMode:&quot;svg&quot;,Scope:&quot;jsPlumb_DefaultScope&quot;},d&amp;&amp;u.extend(this.Defaults,d),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},jsPlumbUtil.EventGenerator.apply(this);var e=this,f=s(),g=e.bind,h={},i=1,k=function(a){var b=e.getDOMElement(a);return{el:b,id:jsPlumbUtil.isString(a)&amp;&amp;null==b?a:Y(b)}};this.getInstanceIndex=function(){return f},this.setZoom=function(a,b){return jsPlumbUtil.oldIE||(i=a,e.fire(&quot;zoom&quot;,i),b&amp;&amp;e.repaintEverything()),!jsPlumbUtil.oldIE},this.getZoom=function(){return i};for(var l in this.Defaults)h[l]=this.Defaults[l];var m;this.setContainer=function(a){a=this.getDOMElement(a),this.select().each(function(b){b.moveParent(a)}),this.selectEndpoints().each(function(b){b.moveParent(a)}),m=a},this.getContainer=function(){return m},this.bind=function(a,b){&quot;ready&quot;===a&amp;&amp;o?b():g.apply(e,[a,b])},e.importDefaults=function(a){for(var b in a)e.Defaults[b]=a[b];return a.Container&amp;&amp;this.setContainer(a.Container),e},e.restoreDefaults=function(){return e.Defaults=u.extend({},h),e};var n=null,o=!1,p=[],q={},r={},t={},v={},w={},x={},y=!1,z=[],A=!1,B=null,C=this.Defaults.Scope,D=null,E=1,F=function(){return&quot;&quot;+E++},G=function(a,b){m?m.appendChild(a):b?u.getDOMElement(b).appendChild(a):e.appendToRoot(a)},H=function(a){return a._nodes?a._nodes:a},I=function(a,b,d,f){if(!jsPlumbAdapter.headless&amp;&amp;!A){var g=Y(a),h=e.dragManager.getElementsForDraggable(g);null==d&amp;&amp;(d=c());var i=W({elId:g,offset:b,recalc:!1,timestamp:d});if(h)for(var j in h)W({elId:h[j].id,offset:{left:i.o.left+h[j].offset.left,top:i.o.top+h[j].offset.top},recalc:!1,timestamp:d});if(e.anchorManager.redraw(g,b,d,null,f),h)for(var k in h)e.anchorManager.redraw(h[k].id,b,d,h[k].offset,f,!0)}},J=function(b,c){var d,f,g,h=null;if(a.isArray(b)){h=[];for(var i=0,j=b.length;j&gt;i;i++)d=e.getElementObject(b[i]),g=e.getDOMElement(d),f=e.getAttribute(g,&quot;id&quot;),h.push(c.apply(e,[g,f]))}else d=e.getDOMElement(b),f=e.getId(d),h=c.apply(e,[d,f]);return h},K=function(a){return r[a]},L=function(b,c,d){if(!jsPlumbAdapter.headless){var f=null==c?!1:c;if(f&amp;&amp;u.isDragSupported(b,e)&amp;&amp;!u.isAlreadyDraggable(b,e)){var g=d||e.Defaults.DragOptions;g=u.extend({},g);var h=u.dragEvents.drag,i=u.dragEvents.stop,j=u.dragEvents.start,k=e.getDOMElement(b),l=e.dragManager.getDragAncestor(k),m={left:0,top:0},n=m,o=!1;g[j]=a.wrap(g[j],function(){return n=null!=l?jsPlumbAdapter.getOffset(l,e):m,e.setHoverSuspended(!0),e.select({source:b}).addClass(e.elementDraggingClass+&quot; &quot;+e.sourceElementDraggingClass,!0),e.select({target:b}).addClass(e.elementDraggingClass+&quot; &quot;+e.targetElementDraggingClass,!0),e.setConnectionBeingDragged(!0),g.canDrag?d.canDrag():void 0},!1),g[h]=a.wrap(g[h],function(){var a=e.getUIPosition(arguments,e.getZoom());a.left+=n.left,a.top+=n.top,I(b,a,null,!0),o&amp;&amp;e.addClass(b,&quot;jsPlumb_dragged&quot;),o=!0}),g[i]=a.wrap(g[i],function(){var a=e.getUIPosition(arguments,e.getZoom(),!0);I(b,a),o=!1,e.removeClass(b,&quot;jsPlumb_dragged&quot;),e.setHoverSuspended(!1),e.select({source:b}).removeClass(e.elementDraggingClass+&quot; &quot;+e.sourceElementDraggingClass,!0),e.select({target:b}).removeClass(e.elementDraggingClass+&quot; &quot;+e.targetElementDraggingClass,!0),e.setConnectionBeingDragged(!1),e.dragManager.dragEnded(b)});var p=Y(b);x[p]=!0;var q=x[p];g.disabled=null==q?!1:!q,e.initDraggable(b,g,!1),e.dragManager.register(b)}}},M=function(b,c){var d=u.extend({},b);if(c&amp;&amp;u.extend(d,c),d.source&amp;&amp;(d.source.endpoint?d.sourceEndpoint=d.source:d.source=e.getDOMElement(d.source)),d.target&amp;&amp;(d.target.endpoint?d.targetEndpoint=d.target:d.target=e.getDOMElement(d.target)),b.uuids&amp;&amp;(d.sourceEndpoint=K(b.uuids[0]),d.targetEndpoint=K(b.uuids[1])),d.sourceEndpoint&amp;&amp;d.sourceEndpoint.isFull())return a.log(e,&quot;could not add connection; source endpoint is full&quot;),void 0;if(d.targetEndpoint&amp;&amp;d.targetEndpoint.isFull())return a.log(e,&quot;could not add connection; target endpoint is full&quot;),void 0;if(!d.type&amp;&amp;d.sourceEndpoint&amp;&amp;(d.type=d.sourceEndpoint.connectionType),d.sourceEndpoint&amp;&amp;d.sourceEndpoint.connectorOverlays){d.overlays=d.overlays||[];for(var f=0,g=d.sourceEndpoint.connectorOverlays.length;g&gt;f;f++)d.overlays.push(d.sourceEndpoint.connectorOverlays[f])}!d[&quot;pointer-events&quot;]&amp;&amp;d.sourceEndpoint&amp;&amp;d.sourceEndpoint.connectorPointerEvents&amp;&amp;(d[&quot;pointer-events&quot;]=d.sourceEndpoint.connectorPointerEvents);var h,i,j,k=function(a,b){var c=u.extend({},a);for(var d in b)b[d]&amp;&amp;(c[d]=b[d]);return c},l=function(a,b,c){return e.addEndpoint(a,k(i.def,{anchor:d.anchors?d.anchors[c]:d.anchor,endpoint:d.endpoints?d.endpoints[c]:d.endpoint,paintStyle:d.endpointStyles?d.endpointStyles[c]:d.endpointStyle,hoverPaintStyle:d.endpointHoverStyles?d.endpointHoverStyles[c]:d.endpointHoverStyle}))};if(d.target&amp;&amp;!d.target.endpoint&amp;&amp;!d.targetEndpoint&amp;&amp;!d.newConnection&amp;&amp;(h=Y(d.target),i=this.targetEndpointDefinitions[h])){if(!i.enabled)return;i.isTarget=!0,j=null!=i.endpoint&amp;&amp;i.endpoint._jsPlumb?i.endpoint:l(d.target,i.def,1),i.uniqueEndpoint&amp;&amp;(i.endpoint=j),d.targetEndpoint=j,j._doNotDeleteOnDetach=!1,j._deleteOnDetach=!0}if(d.source&amp;&amp;!d.source.endpoint&amp;&amp;!d.sourceEndpoint&amp;&amp;!d.newConnection&amp;&amp;(h=Y(d.source),i=this.sourceEndpointDefinitions[h])){if(!i.enabled)return;j=null!=i.endpoint&amp;&amp;i.endpoint._jsPlumb?i.endpoint:l(d.source,i.def,0),i.uniqueEndpoint&amp;&amp;(i.endpoint=j),d.sourceEndpoint=j,j._doNotDeleteOnDetach=!1,j._deleteOnDetach=!0}return d}.bind(e),N=function(a){var b=e.Defaults.ConnectionType||e.getDefaultConnectionType();e.Defaults.EndpointType||u.Endpoint,a._jsPlumb=e,a.newConnection=N,a.newEndpoint=Q,a.endpointsByUUID=r,a.endpointsByElement=q,a.finaliseConnection=O;var c=new b(a);return c.id=&quot;con_&quot;+F(),P(&quot;click&quot;,&quot;click&quot;,c),P(&quot;dblclick&quot;,&quot;dblclick&quot;,c),P(&quot;contextmenu&quot;,&quot;contextmenu&quot;,c),c.isDetachable()&amp;&amp;(c.endpoints[0].initDraggable(),c.endpoints[1].initDraggable()),c},O=function(a,b,c,d){if(b=b||{},a.suspendedEndpoint||p.push(a),a.endpoints[0].isTemporarySource=!1,(null==a.suspendedEndpoint||d)&amp;&amp;e.anchorManager.newConnection(a),I(a.source),!b.doNotFireConnectionEvent&amp;&amp;b.fireEvent!==!1){var f={connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]};e.fire(&quot;connection&quot;,f,c)}},P=function(a,b,c){c.bind(a,function(a,d){e.fire(b,c,d)})},Q=function(a){var b=e.Defaults.EndpointType||u.Endpoint,c=u.extend({},a);c._jsPlumb=e,c.newConnection=N,c.newEndpoint=Q,c.endpointsByUUID=r,c.endpointsByElement=q,c.finaliseConnection=O,c.fireDetachEvent=_,c.fireMoveEvent=ab,c.floatingConnections=w,c.elementId=Y(c.source);var d=new b(c);return d.id=&quot;ep_&quot;+F(),P(&quot;click&quot;,&quot;endpointClick&quot;,d),P(&quot;dblclick&quot;,&quot;endpointDblClick&quot;,d),P(&quot;contextmenu&quot;,&quot;contextmenu&quot;,d),jsPlumbAdapter.headless||e.dragManager.endpointAdded(c.source),d},R=function(a,b,c){var d=q[a];if(d&amp;&amp;d.length)for(var e=0,f=d.length;f&gt;e;e++){for(var g=0,h=d[e].connections.length;h&gt;g;g++){var i=b(d[e].connections[g]);if(i)return}c&amp;&amp;c(d[e])}},S=function(a,b){return J(a,function(a,c){x[c]=b,this.isDragSupported(a)&amp;&amp;this.setElementDraggable(a,b)})},T=function(a,b,c){b=&quot;block&quot;===b;var d=null;c&amp;&amp;(d=b?function(a){a.setVisible(!0,!0,!0)}:function(a){a.setVisible(!1,!0,!0)});var e=k(a);R(e.id,function(a){if(b&amp;&amp;c){var d=a.sourceId===e.id?1:0;a.endpoints[d].isVisible()&amp;&amp;a.setVisible(!0)}else a.setVisible(b)},d)},U=function(a){return J(a,function(a,b){var c=null==x[b]?!1:x[b];return c=!c,x[b]=c,this.setDraggable(a,c),c})},V=function(a,b){var c=null;b&amp;&amp;(c=function(a){var b=a.isVisible();a.setVisible(!b)}),R(a,function(a){var b=a.isVisible();a.setVisible(!b)},c)},W=this.updateOffset=function(a){var c,d=a.timestamp,f=a.recalc,g=a.offset,h=a.elId;return A&amp;&amp;!d&amp;&amp;(d=B),!f&amp;&amp;d&amp;&amp;d===v[h]?{o:a.offset||t[h],s:z[h]}:(f||!g?(c=document.getElementById(h),null!=c&amp;&amp;(z[h]=e.getSize(c),t[h]=b(c,e),v[h]=d)):(t[h]=g,null==z[h]&amp;&amp;(c=document.getElementById(h),null!=c&amp;&amp;(z[h]=e.getSize(c))),v[h]=d),t[h]&amp;&amp;!t[h].right&amp;&amp;(t[h].right=t[h].left+z[h][0],t[h].bottom=t[h].top+z[h][1],t[h].width=z[h][0],t[h].height=z[h][1],t[h].centerx=t[h].left+t[h].width/2,t[h].centery=t[h].top+t[h].height/2),{o:t[h],s:z[h]})},X=function(a){var b=t[a];return b?{o:b,s:z[a]}:W({elId:a})},Y=function(a,b,c){if(jsPlumbUtil.isString(a))return a;if(null==a)return null;var d=e.getAttribute(a,&quot;id&quot;);return d&amp;&amp;&quot;undefined&quot;!==d||(2==arguments.length&amp;&amp;void 0!==arguments[1]?d=b:(1==arguments.length||3==arguments.length&amp;&amp;!arguments[2])&amp;&amp;(d=&quot;jsPlumb_&quot;+f+&quot;_&quot;+F()),c||e.setAttribute(a,&quot;id&quot;,d)),d};this.setConnectionBeingDragged=function(a){y=a},this.isConnectionBeingDragged=function(){return y},this.connectorClass=&quot;_jsPlumb_connector&quot;,this.hoverClass=&quot;_jsPlumb_hover&quot;,this.endpointClass=&quot;_jsPlumb_endpoint&quot;,this.endpointConnectedClass=&quot;_jsPlumb_endpoint_connected&quot;,this.endpointFullClass=&quot;_jsPlumb_endpoint_full&quot;,this.endpointDropAllowedClass=&quot;_jsPlumb_endpoint_drop_allowed&quot;,this.endpointDropForbiddenClass=&quot;_jsPlumb_endpoint_drop_forbidden&quot;,this.overlayClass=&quot;_jsPlumb_overlay&quot;,this.draggingClass=&quot;_jsPlumb_dragging&quot;,this.elementDraggingClass=&quot;_jsPlumb_element_dragging&quot;,this.sourceElementDraggingClass=&quot;_jsPlumb_source_element_dragging&quot;,this.targetElementDraggingClass=&quot;_jsPlumb_target_element_dragging&quot;,this.endpointAnchorClassPrefix=&quot;_jsPlumb_endpoint_anchor&quot;,this.hoverSourceClass=&quot;_jsPlumb_source_hover&quot;,this.hoverTargetClass=&quot;_jsPlumb_target_hover&quot;,this.dragSelectClass=&quot;_jsPlumb_drag_select&quot;,this.Anchors={},this.Connectors={svg:{},vml:{}},this.Endpoints={svg:{},vml:{}},this.Overlays={svg:{},vml:{}},this.ConnectorRenderers={},this.SVG=&quot;svg&quot;,this.VML=&quot;vml&quot;,this.addEndpoint=function(b,c,d){d=d||{};var f=u.extend({},d);u.extend(f,c),f.endpoint=f.endpoint||e.Defaults.Endpoint,f.paintStyle=f.paintStyle||e.Defaults.EndpointStyle,b=H(b);for(var g=[],h=a.isArray(b)||null!=b.length&amp;&amp;!a.isString(b)?b:[b],i=0,j=h.length;j&gt;i;i++){var k=e.getDOMElement(h[i]),l=Y(k);f.source=k,qb(f.source),W({elId:l,timestamp:B});var m=Q(f);f.parentAnchor&amp;&amp;(m.parentAnchor=f.parentAnchor),a.addToList(q,l,m);var n=t[l],o=z[l],p=m.anchor.compute({xy:[n.left,n.top],wh:o,element:m,timestamp:B}),r={anchorLoc:p,timestamp:B};A&amp;&amp;(r.recalc=!1),A||m.paint(r),g.push(m),m._doNotDeleteOnDetach=!0}return 1==g.length?g[0]:g},this.addEndpoints=function(b,c,d){for(var f=[],g=0,h=c.length;h&gt;g;g++){var i=e.addEndpoint(b,c[g],d);a.isArray(i)?Array.prototype.push.apply(f,i):f.push(i)}return f},this.animate=function(b,c,d){d=d||{};var f=this.getElementObject(b),g=this.getDOMElement(b),h=Y(g),i=u.animEvents.step,j=u.animEvents.complete;d[i]=a.wrap(d[i],function(){e.repaint(h)}),d[j]=a.wrap(d[j],function(){e.repaint(h)}),e.doAnimate(f,c,d)},this.checkCondition=function(b,c){var d=e.getListener(b),f=!0;if(d&amp;&amp;d.length&gt;0)try{for(var g=0,h=d.length;h&gt;g;g++)f=f&amp;&amp;d[g](c)}catch(i){a.log(e,&quot;cannot check condition [&quot;+b+&quot;]&quot;+i)}return f},this.checkASyncCondition=function(b,c,d,f){var g=e.getListener(b);if(g&amp;&amp;g.length&gt;0)try{g[0](c,d,f)}catch(h){a.log(e,&quot;cannot asynchronously check condition [&quot;+b+&quot;]&quot;+h)}},this.connect=function(a,b){var c,d=M(a,b);return d&amp;&amp;(qb(d.source),c=N(d),O(c,d)),c};var Z=[{el:&quot;source&quot;,elId:&quot;sourceId&quot;,epDefs:&quot;sourceEndpointDefinitions&quot;},{el:&quot;target&quot;,elId:&quot;targetId&quot;,epDefs:&quot;targetEndpointDefinitions&quot;}],$=function(a,b,c,d){var e,f,g,h=Z[c],i=a[h.elId],j=(a[h.el],a.endpoints[c]),k={index:c,originalSourceId:0===c?i:a.sourceId,newSourceId:a.sourceId,originalTargetId:1==c?i:a.targetId,newTargetId:a.targetId,connection:a};if(b.constructor==u.Endpoint)e=b,e.addConnection(a);else if(f=Y(b),g=this[h.epDefs][f],f===a[h.elId])e=null;else if(g){if(!g.enabled)return;e=null!=g.endpoint&amp;&amp;g.endpoint._jsPlumb?g.endpoint:this.addEndpoint(b,g.def),g.uniqueEndpoint&amp;&amp;(g.endpoint=e),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0,e.addConnection(a)}else e=a.makeEndpoint(0===c,b,f),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0;return null!=e&amp;&amp;(j.detachFromConnection(a),a.endpoints[c]=e,a[h.el]=e.element,a[h.elId]=e.elementId,k[0===c?&quot;newSourceId&quot;:&quot;newTargetId&quot;]=e.elementId,ab(k),d||a.repaint()),k}.bind(this);this.setSource=function(a,b,c){var d=$(a,b,0,c);this.anchorManager.sourceChanged(d.originalSourceId,d.newSourceId,a)},this.setTarget=function(a,b,c){var d=$(a,b,1,c);this.anchorManager.updateOtherEndpoint(d.originalSourceId,d.originalTargetId,d.newTargetId,a)},this.deleteEndpoint=function(a,b){var c=e.setSuspendDrawing(!0),d=&quot;string&quot;==typeof a?r[a]:a;return d&amp;&amp;e.deleteObject({endpoint:d}),c||e.setSuspendDrawing(!1,b),e},this.deleteEveryEndpoint=function(){var a=e.setSuspendDrawing(!0);for(var b in q){var c=q[b];if(c&amp;&amp;c.length)for(var d=0,f=c.length;f&gt;d;d++)e.deleteEndpoint(c[d],!0)}return q={},r={},e.anchorManager.reset(),e.dragManager.reset(),a||e.setSuspendDrawing(!1),e};var _=function(a,b,c){var d=e.Defaults.ConnectionType||e.getDefaultConnectionType(),f=a.constructor==d,g=f?{connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]}:a;b&amp;&amp;e.fire(&quot;connectionDetached&quot;,g,c),e.anchorManager.connectionDetached(g)},ab=function(a,b){e.fire(&quot;connectionMoved&quot;,a,b)};this.unregisterEndpoint=function(a){a._jsPlumb.uuid&amp;&amp;(r[a._jsPlumb.uuid]=null),e.anchorManager.deleteEndpoint(a);for(var b in q){var c=q[b];if(c){for(var d=[],f=0,g=c.length;g&gt;f;f++)c[f]!=a&amp;&amp;d.push(c[f]);q[b]=d}q[b].length&lt;1&amp;&amp;delete q[b]}},this.detach=function(){if(0!==arguments.length){var a=e.Defaults.ConnectionType||e.getDefaultConnectionType(),b=arguments[0].constructor==a,c=2==arguments.length?b?arguments[1]||{}:arguments[0]:arguments[0],d=c.fireEvent!==!1,f=c.forceDetach,g=b?arguments[0]:c.connection;if(g)(f||jsPlumbUtil.functionChain(!0,!1,[[g.endpoints[0],&quot;isDetachAllowed&quot;,[g]],[g.endpoints[1],&quot;isDetachAllowed&quot;,[g]],[g,&quot;isDetachAllowed&quot;,[g]],[e,&quot;checkCondition&quot;,[&quot;beforeDetach&quot;,g]]]))&amp;&amp;g.endpoints[0].detach(g,!1,!0,d);else{var h=u.extend({},c);if(h.uuids)K(h.uuids[0]).detachFrom(K(h.uuids[1]),d);else if(h.sourceEndpoint&amp;&amp;h.targetEndpoint)h.sourceEndpoint.detachFrom(h.targetEndpoint);else{var i=Y(e.getDOMElement(h.source)),j=Y(e.getDOMElement(h.target));R(i,function(a){(a.sourceId==i&amp;&amp;a.targetId==j||a.targetId==i&amp;&amp;a.sourceId==j)&amp;&amp;e.checkCondition(&quot;beforeDetach&quot;,a)&amp;&amp;a.endpoints[0].detach(a,!1,!0,d)})}}}},this.detachAllConnections=function(a,b){b=b||{},a=e.getDOMElement(a);var c=Y(a),d=q[c];if(d&amp;&amp;d.length)for(var f=0,g=d.length;g&gt;f;f++)d[f].detachAll(b.fireEvent!==!1);return e},this.detachEveryConnection=function(a){return a=a||{},e.doWhileSuspended(function(){for(var b in q){var c=q[b];if(c&amp;&amp;c.length)for(var d=0,e=c.length;e&gt;d;d++)c[d].detachAll(a.fireEvent!==!1)}p.splice(0)}),e},this.deleteObject=function(a){var b={endpoints:{},connections:{},endpointCount:0,connectionCount:0},c=a.fireEvent!==!1,d=a.deleteAttachedObjects!==!1,f=function(a){if(null!=a&amp;&amp;null==b.connections[a.id]&amp;&amp;(null!=a._jsPlumb&amp;&amp;a.setHover(!1),b.connections[a.id]=a,b.connectionCount++,d))for(var c=0;c&lt;a.endpoints.length;c++)a.endpoints[c]._deleteOnDetach&amp;&amp;g(a.endpoints[c])},g=function(a){if(null!=a&amp;&amp;null==b.endpoints[a.id]&amp;&amp;(null!=a._jsPlumb&amp;&amp;a.setHover(!1),b.endpoints[a.id]=a,b.endpointCount++,d))for(var c=0;c&lt;a.connections.length;c++){var e=a.connections[c];f(e)}};a.connection?f(a.connection):g(a.endpoint);for(var h in b.connections){var i=b.connections[h];i._jsPlumb&amp;&amp;(jsPlumbUtil.removeWithFunction(p,function(a){return i.id==a.id}),_(i,c,a.originalEvent),i.endpoints[0].detachFromConnection(i),i.endpoints[1].detachFromConnection(i),i.cleanup(),i.destroy())}for(var j in b.endpoints){var k=b.endpoints[j];k._jsPlumb&amp;&amp;(e.unregisterEndpoint(k),k.cleanup(),k.destroy())}return b},this.draggable=function(a,b){var c,d,f;if(&quot;object&quot;==typeof a&amp;&amp;a.length)for(c=0,d=a.length;d&gt;c;c++)f=e.getDOMElement(a[c]),f&amp;&amp;L(f,!0,b);else if(a._nodes)for(c=0,d=a._nodes.length;d&gt;c;c++)f=e.getDOMElement(a._nodes[c]),f&amp;&amp;L(f,!0,b);else f=e.getDOMElement(a),f&amp;&amp;L(f,!0,b);return e};var bb=function(a,b,c,d){for(var e=0,f=a.length;f&gt;e;e++)a[e][b].apply(a[e],c);return d(a)},cb=function(a,b,c){for(var d=[],e=0,f=a.length;f&gt;e;e++)d.push([a[e][b].apply(a[e],c),a[e]]);return d},db=function(a,b,c){return function(){return bb(a,b,arguments,c)}},eb=function(a,b){return function(){return cb(a,b,arguments)}},fb=function(a,b){var c=[];if(a)if(&quot;string&quot;==typeof a){if(&quot;*&quot;===a)return a;c.push(a)}else if(b)c=a;else if(a.length)for(var d=0,e=a.length;e&gt;d;d++)c.push(k(a[d]).id);else c.push(k(a).id);return c},gb=function(a,b,c){return&quot;*&quot;===a?!0:a.length&gt;0?-1!=jsPlumbUtil.indexOf(a,b):!c};this.getConnections=function(a,b){a?a.constructor==String&amp;&amp;(a={scope:a}):a={};for(var c=a.scope||e.getDefaultScope(),d=fb(c,!0),f=fb(a.source),g=fb(a.target),h=!b&amp;&amp;d.length&gt;1?{}:[],i=function(a,c){if(!b&amp;&amp;d.length&gt;1){var e=h[a];null==e&amp;&amp;(e=h[a]=[]),e.push(c)}else h.push(c)},j=0,k=p.length;k&gt;j;j++){var l=p[j];gb(d,l.scope)&amp;&amp;gb(f,l.sourceId)&amp;&amp;gb(g,l.targetId)&amp;&amp;i(l.scope,l)}return h};var hb=function(a,b){return function(c){for(var d=0,e=a.length;e&gt;d;d++)c(a[d]);return b(a)}},ib=function(a){return function(b){return a[b]}},jb=function(a,b){var c,d,e={length:a.length,each:hb(a,b),get:ib(a)},f=[&quot;setHover&quot;,&quot;removeAllOverlays&quot;,&quot;setLabel&quot;,&quot;addClass&quot;,&quot;addOverlay&quot;,&quot;removeOverlay&quot;,&quot;removeOverlays&quot;,&quot;showOverlay&quot;,&quot;hideOverlay&quot;,&quot;showOverlays&quot;,&quot;hideOverlays&quot;,&quot;setPaintStyle&quot;,&quot;setHoverPaintStyle&quot;,&quot;setSuspendEvents&quot;,&quot;setParameter&quot;,&quot;setParameters&quot;,&quot;setVisible&quot;,&quot;repaint&quot;,&quot;addType&quot;,&quot;toggleType&quot;,&quot;removeType&quot;,&quot;removeClass&quot;,&quot;setType&quot;,&quot;bind&quot;,&quot;unbind&quot;],g=[&quot;getLabel&quot;,&quot;getOverlay&quot;,&quot;isHover&quot;,&quot;getParameter&quot;,&quot;getParameters&quot;,&quot;getPaintStyle&quot;,&quot;getHoverPaintStyle&quot;,&quot;isVisible&quot;,&quot;hasType&quot;,&quot;getType&quot;,&quot;isSuspendEvents&quot;];for(c=0,d=f.length;d&gt;c;c++)e[f[c]]=db(a,f[c],b);for(c=0,d=g.length;d&gt;c;c++)e[g[c]]=eb(a,g[c]);return e},kb=function(a){var b=jb(a,kb);return u.extend(b,{setDetachable:db(a,&quot;setDetachable&quot;,kb),setReattach:db(a,&quot;setReattach&quot;,kb),setConnector:db(a,&quot;setConnector&quot;,kb),detach:function(){for(var b=0,c=a.length;c&gt;b;b++)e.detach(a[b])},isDetachable:eb(a,&quot;isDetachable&quot;),isReattach:eb(a,&quot;isReattach&quot;)})},lb=function(a){var b=jb(a,lb);return u.extend(b,{setEnabled:db(a,&quot;setEnabled&quot;,lb),setAnchor:db(a,&quot;setAnchor&quot;,lb),isEnabled:eb(a,&quot;isEnabled&quot;),detachAll:function(){for(var b=0,c=a.length;c&gt;b;b++)a[b].detachAll()},remove:function(){for(var b=0,c=a.length;c&gt;b;b++)e.deleteObject({endpoint:a[b]})}})};this.select=function(a){return a=a||{},a.scope=a.scope||&quot;*&quot;,kb(a.connections||e.getConnections(a,!0))},this.selectEndpoints=function(a){a=a||{},a.scope=a.scope||&quot;*&quot;;var b=!a.element&amp;&amp;!a.source&amp;&amp;!a.target,c=b?&quot;*&quot;:fb(a.element),d=b?&quot;*&quot;:fb(a.source),e=b?&quot;*&quot;:fb(a.target),f=fb(a.scope,!0),g=[];for(var h in q){var i=gb(c,h,!0),j=gb(d,h,!0),k=&quot;*&quot;!=d,l=gb(e,h,!0),m=&quot;*&quot;!=e;if(i||j||l)a:for(var n=0,o=q[h].length;o&gt;n;n++){var p=q[h][n];if(gb(f,p.scope,!0)){var r=k&amp;&amp;d.length&gt;0&amp;&amp;!p.isSource,s=m&amp;&amp;e.length&gt;0&amp;&amp;!p.isTarget;if(r||s)continue a;g.push(p)}}}return lb(g)},this.getAllConnections=function(){return p},this.getDefaultScope=function(){return C},this.getEndpoint=K,this.getEndpoints=function(a){return q[k(a).id]},this.getDefaultEndpointType=function(){return u.Endpoint},this.getDefaultConnectionType=function(){return u.Connection},this.getId=Y,this.getOffset=function(a){return t[a],W({elId:a})},this.appendElement=G;var mb=!1;this.isHoverSuspended=function(){return mb},this.setHoverSuspended=function(a){mb=a};var nb=function(a){return function(){return jsPlumbAdapter.isRenderModeAvailable(a)}};this.isSVGAvailable=nb(&quot;svg&quot;),this.isVMLAvailable=nb(&quot;vml&quot;),this.hide=function(a,b){return T(a,&quot;none&quot;,b),e},this.idstamp=F,this.connectorsInitialized=!1;var ob=[],pb=[&quot;svg&quot;,&quot;vml&quot;];this.registerConnectorType=function(a,b){ob.push([a,b])};var qb=function(a){if(!m&amp;&amp;a){var b=e.getDOMElement(a);b.offsetParent&amp;&amp;(m=b.offsetParent)}},rb=function(){e.Defaults.Container&amp;&amp;(m=e.getDOMElement(e.Defaults.Container))};this.init=function(){var a=function(a,b,c){u.Connectors[a][b]=function(){c.apply(this,arguments),u.ConnectorRenderers[a].apply(this,arguments)
},jsPlumbUtil.extend(u.Connectors[a][b],[c,u.ConnectorRenderers[a]])};if(!u.connectorsInitialized){for(var b=0;b&lt;ob.length;b++)for(var c=0;c&lt;pb.length;c++)a(pb[c],ob[b][1],ob[b][0]);u.connectorsInitialized=!0}o||(rb(),e.anchorManager=new u.AnchorManager({jsPlumbInstance:e}),e.setRenderMode(e.Defaults.RenderMode),o=!0,e.fire(&quot;ready&quot;,e))}.bind(this),this.log=n,this.jsPlumbUIComponent=j,this.makeAnchor=function(){var b,c=function(a,b){if(u.Anchors[a])return new u.Anchors[a](b);if(!e.Defaults.DoNotThrowErrors)throw{msg:&quot;jsPlumb: unknown anchor type '&quot;+a+&quot;'&quot;}};if(0===arguments.length)return null;var d=arguments[0],f=arguments[1],g=arguments[2],h=null;if(d.compute&amp;&amp;d.getOrientation)return d;if(&quot;string&quot;==typeof d)h=c(arguments[0],{elementId:f,jsPlumbInstance:e});else if(a.isArray(d))if(a.isArray(d[0])||a.isString(d[0]))2==d.length&amp;&amp;a.isObject(d[1])?a.isString(d[0])?(b=u.extend({elementId:f,jsPlumbInstance:e},d[1]),h=c(d[0],b)):(b=u.extend({elementId:f,jsPlumbInstance:e,anchors:d[0]},d[1]),h=new u.DynamicAnchor(b)):h=new u.DynamicAnchor({anchors:d,selector:null,elementId:f,jsPlumbInstance:g});else{var i={x:d[0],y:d[1],orientation:d.length&gt;=4?[d[2],d[3]]:[0,0],offsets:d.length&gt;=6?[d[4],d[5]]:[0,0],elementId:f,jsPlumbInstance:g,cssClass:7==d.length?d[6]:null};h=new u.Anchor(i),h.clone=function(){return new u.Anchor(i)}}return h.id||(h.id=&quot;anchor_&quot;+F()),h},this.makeAnchors=function(b,c,d){for(var f=[],g=0,h=b.length;h&gt;g;g++)&quot;string&quot;==typeof b[g]?f.push(u.Anchors[b[g]]({elementId:c,jsPlumbInstance:d})):a.isArray(b[g])&amp;&amp;f.push(e.makeAnchor(b[g],c,d));return f},this.makeDynamicAnchor=function(a,b){return new u.DynamicAnchor({anchors:a,selector:b,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={};var sb=function(a,b,c){a.paintStyle=a.paintStyle||c.Defaults.EndpointStyles[b]||c.Defaults.EndpointStyle,a.hoverPaintStyle=a.hoverPaintStyle||c.Defaults.EndpointHoverStyles[b]||c.Defaults.EndpointHoverStyle,a.anchor=a.anchor||c.Defaults.Anchors[b]||c.Defaults.Anchor,a.endpoint=a.endpoint||c.Defaults.Endpoints[b]||c.Defaults.Endpoint};this.sourceEndpointDefinitions={};var tb=function(a,b,c,d,e){for(var f=a.target||a.srcElement,g=!1,h=d.getSelector(b,c),i=0;i&lt;h.length;i++)if(h[i]==f){g=!0;break}return e?!g:g};this.makeTarget=function(c,d,f){var g=u.extend({_jsPlumb:this},f);u.extend(g,d),sb(g,1,this);var h=g.scope||e.Defaults.Scope,i=!(g.deleteEndpointsOnDetach===!1),l=g.maxConnections||-1,m=g.onMaxConnections,n=function(c){var d=k(c),e=d.id,f=new j(g),n=u.extend({},g.dropOptions||{});qb(e),this.targetEndpointDefinitions[e]={def:g,uniqueEndpoint:g.uniqueEndpoint,maxConnections:l,enabled:!0};var o=function(){this.currentlyDragging=!1;var a=this.getDropEvent(arguments),c=this.select({target:e}).length,h=this.getDOMElement(this.getDragObject(arguments)),j=this.getAttribute(h,&quot;dragId&quot;),k=this.getAttribute(h,&quot;originalScope&quot;),l=w[j];if(null!=l){var n=l.endpoints[0].isFloating()?0:1,o=l.endpoints[0],p=(g.endpoint?u.extend({},g.endpoint):{},this.targetEndpointDefinitions[e]);if(!p.enabled||p.maxConnections&gt;0&amp;&amp;c&gt;=p.maxConnections)return m&amp;&amp;m({element:d.el,connection:l},a),!1;if(o.anchor.locked=!1,k&amp;&amp;this.setDragScope(h,k),null==l.suspendedEndpoint&amp;&amp;!l.pending)return!1;var q=f.isDropAllowed(0===n?e:l.sourceId,0===n?l.targetId:e,l.scope,l,null,0===n?d.el:l.source,0===n?l.target:d.el);if(l.suspendedEndpoint){l[n?&quot;targetId&quot;:&quot;sourceId&quot;]=l.suspendedEndpoint.elementId,l[n?&quot;target&quot;:&quot;source&quot;]=l.suspendedEndpoint.element,l.endpoints[n]=l.suspendedEndpoint;var r=(l.suspendedEndpoint.getElement(),l.suspendedEndpoint.elementId);ab({index:n,originalSourceId:0===n?r:l.sourceId,newSourceId:0===n?e:l.sourceId,originalTargetId:1==n?r:l.targetId,newTargetId:1==n?e:l.targetId,connection:l},a)}if(q){var s=this.getElementObject(d.el),t=p.endpoint;if((null==t||null==t._jsPlumb)&amp;&amp;(t=this.addEndpoint(s,g)),g.uniqueEndpoint&amp;&amp;(p.endpoint=t),t._doNotDeleteOnDetach=!1,t._deleteOnDetach=!0,l.isDetachable()&amp;&amp;t.initDraggable(),null!=t.anchor.positionFinder){var v=this.getUIPosition(arguments,this.getZoom()),x=b(s,this),y=this.getSize(s),z=t.anchor.positionFinder(v,x,y,t.anchor.constructorParams);t.anchor.x=z[0],t.anchor.y=z[1]}l[n?&quot;target&quot;:&quot;source&quot;]=t.element,l[n?&quot;targetId&quot;:&quot;sourceId&quot;]=t.elementId,l.endpoints[n].detachFromConnection(l),l.endpoints[n]._deleteOnDetach&amp;&amp;(l.endpoints[n].deleteAfterDragStop=!0),t.addConnection(l),l.endpoints[n]=t,l.deleteEndpointsOnDetach=i,1==n?this.anchorManager.updateOtherEndpoint(l.sourceId,l.suspendedElementId,l.targetId,l):this.anchorManager.sourceChanged(l.suspendedEndpoint.elementId,l.sourceId,l),O(l,null,a),l.pending=!1}else l.suspendedEndpoint&amp;&amp;(l.isReattach()?(l.setHover(!1),l.floatingAnchorIndex=null,l.suspendedEndpoint.addConnection(l),this.repaint(o.elementId)):l.deleteConnectionNow=!0)}}.bind(this),p=u.dragEvents.drop;n.scope=n.scope||h,n[p]=a.wrap(n[p],o),g.allowLoopback===!1&amp;&amp;(n.canDrop=function(a){var b=a.getDragElement()._jsPlumbRelatedElement;return b!=d.el}),this.initDroppable(this.getElementObject(d.el),n,!0)}.bind(this);c=H(c);for(var o=c.length&amp;&amp;c.constructor!=String?c:[c],p=0,q=o.length;q&gt;p;p++)n(o[p]);return this},this.unmakeTarget=function(a,b){var c=k(a);return u.destroyDroppable(c.el),b||delete this.targetEndpointDefinitions[c.id],this},this.makeSource=function(c,d,f){var g=u.extend({},f);u.extend(g,d),sb(g,0,this);var h=g.maxConnections||1,j=g.onMaxConnections,l=function(c){var d=c.id,f=this.getElementObject(c.el),k=this.getDOMElement(f),l=function(){return null==g.parent?null:&quot;parent&quot;===g.parent?c.el.parentNode:e.getDOMElement(g.parent)},n=null!=g.parent?this.getId(l()):d;qb(n),this.sourceEndpointDefinitions[n]={def:g,uniqueEndpoint:g.uniqueEndpoint,maxConnections:h,enabled:!0};var o=u.dragEvents.stop,p=u.dragEvents.drag,q=u.extend({},g.dragOptions||{}),r=q.drag,s=q.stop,t=null,v=!1;q.scope=q.scope||g.scope,q[p]=a.wrap(q[p],function(){r&amp;&amp;r.apply(this,arguments),v=!1}),q[o]=a.wrap(q[o],function(){if(s&amp;&amp;s.apply(this,arguments),this.currentlyDragging=!1,null!=t._jsPlumb){var a=g.anchor||this.Defaults.Anchor,c=t.anchor,e=t.connections[0],f=this.makeAnchor(a,d,this),h=t.element;if(null!=f.positionFinder){var i=b(h,this),j=this.getSize(h),k={left:i.left+c.x*j[0],top:i.top+c.y*j[1]},n=f.positionFinder(k,i,j,f.constructorParams);f.x=n[0],f.y=n[1]}if(t.setAnchor(f,!0),g.parent){var o=l();if(o){var p=g.container||m;t.setElement(o,p)}}t.repaint(),this.repaint(t.elementId),this.repaint(e.targetId)}}.bind(this));var w=function(a){var b=this.getOriginalEvent(a),c=this.sourceEndpointDefinitions[n];if(d=this.getId(this.getDOMElement(f)),c.enabled){if(g.filter){var m=jsPlumbUtil.isString(g.filter)?tb(b,f,g.filter,this,g.filterExclude):g.filter(b,f);if(m===!1)return}var o=this.select({source:n}).length;if(c.maxConnections&gt;=0&amp;&amp;c.uniqueEndpoint&amp;&amp;o&gt;=c.maxConnections)return j&amp;&amp;j({element:f,maxConnections:h},a),!1;var p=jsPlumbAdapter.getPositionOnElement(b,k,i),r=p;g.parent&amp;&amp;(r=jsPlumbAdapter.getPositionOnElement(b,l(),i));var s={};u.extend(s,g),s.isTemporarySource=!0,s.anchor=[p[0],p[1],0,0],s.parentAnchor=[r[0],r[1],0,0],s.dragOptions=q,t=this.addEndpoint(d,s),v=!0,t.endpointWillMoveTo=g.parent?l():null,t._doNotDeleteOnDetach=!1,t._deleteOnDetach=!0;var w=function(){v&amp;&amp;(v=!1,e.deleteEndpoint(t))};e.registerListener(t.canvas,&quot;mouseup&quot;,w),e.registerListener(f,&quot;mouseup&quot;,w),e.trigger(t.canvas,&quot;mousedown&quot;,a),jsPlumbUtil.consume(a)}}.bind(this);this.registerListener(f,&quot;mousedown&quot;,w),this.sourceEndpointDefinitions[n].trigger=w,g.filter&amp;&amp;jsPlumbUtil.isString(g.filter)&amp;&amp;e.setDragFilter(f,g.filter)}.bind(this);c=H(c);for(var n=c.length&amp;&amp;c.constructor!=String?c:[c],o=0,p=n.length;p&gt;o;o++)l(k(n[o]));return this},this.unmakeSource=function(a,b){var c=k(a),d=this.sourceEndpointDefinitions[c.id].trigger;return d&amp;&amp;e.unregisterListener(c.el,&quot;mousedown&quot;,d),b||delete this.sourceEndpointDefinitions[c.id],this},this.unmakeEverySource=function(){for(var a in this.sourceEndpointDefinitions)e.unmakeSource(a,!0);return this.sourceEndpointDefinitions={},this},this.unmakeEveryTarget=function(){for(var a in this.targetEndpointDefinitions)e.unmakeTarget(a,!0);return this.targetEndpointDefinitions={},this};var ub=function(b,c,d,e){var f=&quot;source&quot;==b?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(c=H(c),a.isString(c))f[c].enabled=e?!f[c].enabled:d;else if(c.length)for(var g=0,h=c.length;h&gt;g;g++){var i=k(c[g]);f[i.id]&amp;&amp;(f[i.id].enabled=e?!f[i.id].enabled:d)}else{var j=k(c).id;f[j].enabled=e?!f[j].enabled:d}return this}.bind(this),vb=function(b,c){return b=H(b),a.isString(b)||!b.length?c.apply(this,[b]):b.length?c.apply(this,[b[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(a){return ub(&quot;source&quot;,a,null,!0),this.isSourceEnabled(a)},this.setSourceEnabled=function(a,b){return ub(&quot;source&quot;,a,b)},this.isSource=function(a){return vb(a,function(a){return null!=this.sourceEndpointDefinitions[k(a).id]})},this.isSourceEnabled=function(a){return vb(a,function(a){var b=this.sourceEndpointDefinitions[k(a).id];return b&amp;&amp;b.enabled===!0})},this.toggleTargetEnabled=function(a){return ub(&quot;target&quot;,a,null,!0),this.isTargetEnabled(a)},this.isTarget=function(a){return vb(a,function(a){return null!=this.targetEndpointDefinitions[k(a).id]})},this.isTargetEnabled=function(a){return vb(a,function(a){var b=this.targetEndpointDefinitions[k(a).id];return b&amp;&amp;b.enabled===!0})},this.setTargetEnabled=function(a,b){return ub(&quot;target&quot;,a,b)},this.ready=function(a){e.bind(&quot;ready&quot;,a)},this.repaint=function(a,b,c){if(&quot;object&quot;==typeof a&amp;&amp;a.length)for(var d=0,f=a.length;f&gt;d;d++)I(a[d],b,c);else I(a,b,c);return e},this.repaintEverything=function(a){var b=c();for(var d in q)I(d,null,b,a);return this},this.removeAllEndpoints=function(a,b){var c=function(a){var d,f,g=k(a),h=q[g.id];if(h)for(d=0,f=h.length;f&gt;d;d++)e.deleteEndpoint(h[d]);if(delete q[g.id],b&amp;&amp;g.el&amp;&amp;3!=g.el.nodeType&amp;&amp;8!=g.el.nodeType)for(d=0,f=g.el.childNodes.length;f&gt;d;d++)c(g.el.childNodes[d])};return c(a),this},this.remove=function(a,b){var c=k(a);return e.doWhileSuspended(function(){e.removeAllEndpoints(c.id,!0),e.dragManager.elementRemoved(c.id),delete w[c.id],e.anchorManager.clearFor(c.id),e.anchorManager.removeFloatingConnection(c.id)},b===!1),c.el&amp;&amp;e.removeElement(c.el),e};var wb={},xb=function(){for(var a in wb)for(var b=0,c=wb[a].length;c&gt;b;b++){var d=wb[a][b];e.off(d.el,d.event,d.listener)}wb={}};this.registerListener=function(a,b,c){e.on(a,b,c),jsPlumbUtil.addToList(wb,b,{el:a,event:b,listener:c})},this.unregisterListener=function(a,b,c){e.off(a,b,c),jsPlumbUtil.removeWithFunction(wb,function(a){return a.type==b&amp;&amp;a.listener==c})},this.reset=function(){e.deleteEveryEndpoint(),e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},p.splice(0),xb(),e.anchorManager.reset(),jsPlumbAdapter.headless||e.dragManager.reset()},this.setDefaultScope=function(a){return C=a,e},this.setDraggable=S,this.setId=function(a,b,c){var d;jsPlumbUtil.isString(a)?d=a:(a=this.getDOMElement(a),d=this.getId(a));var e=this.getConnections({source:d,scope:&quot;*&quot;},!0),f=this.getConnections({target:d,scope:&quot;*&quot;},!0);b=&quot;&quot;+b,c?a=this.getDOMElement(b):(a=this.getDOMElement(d),this.setAttribute(a,&quot;id&quot;,b)),q[b]=q[d]||[];for(var g=0,h=q[b].length;h&gt;g;g++)q[b][g].setElementId(b),q[b][g].setReferenceElement(a);delete q[d],this.anchorManager.changeId(d,b),this.dragManager&amp;&amp;this.dragManager.changeId(d,b);var i=function(c,d,e){for(var f=0,g=c.length;g&gt;f;f++)c[f].endpoints[d].setElementId(b),c[f].endpoints[d].setReferenceElement(a),c[f][e+&quot;Id&quot;]=b,c[f][e]=a};i(e,0,&quot;source&quot;),i(f,1,&quot;target&quot;),this.repaint(b)},this.setDebugLog=function(a){n=a},this.setSuspendDrawing=function(a,b){var c=A;return A=a,B=a?(new Date).getTime():null,b&amp;&amp;this.repaintEverything(),c},this.isSuspendDrawing=function(){return A},this.getSuspendedAt=function(){return B},this.doWhileSuspended=function(b,c){var d=this.isSuspendDrawing();d||this.setSuspendDrawing(!0);try{b()}catch(e){a.log(&quot;Function run while suspended failed&quot;,e)}d||this.setSuspendDrawing(!1,!c)},this.getOffset=function(a){return t[a]},this.getCachedData=X,this.timestamp=c,this.setRenderMode=function(a){if(a!==u.SVG&amp;&amp;a!==u.VML)throw new TypeError(&quot;Render mode [&quot;+a+&quot;] not supported&quot;);return D=jsPlumbAdapter.setRenderMode(a)},this.getRenderMode=function(){return D},this.show=function(a,b){return T(a,&quot;block&quot;,b),e},this.toggleVisible=V,this.toggleDraggable=U,this.addListener=this.bind,jsPlumbAdapter.headless||(e.dragManager=jsPlumbAdapter.getDragManager(e),e.recalculateOffsets=e.dragManager.updateOffsets)};jsPlumbUtil.extend(t,jsPlumbUtil.EventGenerator,{setAttribute:function(a,b,c){this.setAttribute(a,b,c)},getAttribute:function(a,b){return this.getAttribute(u.getDOMElement(a),b)},registerConnectionType:function(a,b){this._connectionTypes[a]=u.extend({},b)},registerConnectionTypes:function(a){for(var b in a)this._connectionTypes[b]=u.extend({},a[b])},registerEndpointType:function(a,b){this._endpointTypes[a]=u.extend({},b)},registerEndpointTypes:function(a){for(var b in a)this._endpointTypes[b]=u.extend({},a[b])},getType:function(a,b){return&quot;connection&quot;===b?this._connectionTypes[a]:this._endpointTypes[a]},setIdChanged:function(a,b){this.setId(a,b,!0)},setParent:function(a,b){var c=this.getElementObject(a),d=this.getDOMElement(c),e=this.getId(d),f=this.getElementObject(b),g=this.getDOMElement(f),h=this.getId(g);d.parentNode.removeChild(d),g.appendChild(d),this.dragManager.setParent(c,e,f,h)},getSize:function(a){return[a.offsetWidth,a.offsetHeight]},getWidth:function(a){return a.offsetWidth},getHeight:function(a){return a.offsetHeight},extend:function(a,b,c){var d;if(c)for(d=0;d&lt;c.length;d++)a[c[d]]=b[c[d]];else for(d in b)a[d]=b[d];return a}},jsPlumbAdapter);var u=new t;&quot;undefined&quot;!=typeof window&amp;&amp;(window.jsPlumb=u),u.getInstance=function(a){var b=new t(a);return b.init(),b},&quot;function&quot;==typeof define&amp;&amp;(define(&quot;jsplumb&quot;,[],function(){return u}),define(&quot;jsplumbinstance&quot;,[],function(){return u.getInstance()})),&quot;undefined&quot;!=typeof exports&amp;&amp;(exports.jsPlumb=u)}(),function(){&quot;use strict&quot;;var a=function(a,b){var c=!1;return{drag:function(){if(c)return c=!1,!0;var d=jsPlumb.getUIPosition(arguments,b.getZoom());a.element&amp;&amp;(jsPlumbAdapter.setPosition(a.element,d),b.repaint(a.element,d))},stopDrag:function(){c=!0}}},b=function(a,b){var c=document.createElement(&quot;div&quot;);c.style.position=&quot;absolute&quot;;var d=b.getContainer()||document.body;d.appendChild(c);var e=b.getId(c);b.updateOffset({elId:e}),a.id=e,a.element=c},c=function(a,b,c,d,e,f,g){var h=new jsPlumb.FloatingAnchor({reference:b,referenceCanvas:d,jsPlumbInstance:f});return g({paintStyle:a,endpoint:c,anchor:h,source:e,scope:&quot;__floating&quot;})},d=[&quot;connectorStyle&quot;,&quot;connectorHoverStyle&quot;,&quot;connectorOverlays&quot;,&quot;connector&quot;,&quot;connectionType&quot;,&quot;connectorClass&quot;,&quot;connectorHoverClass&quot;],e=function(a,b){var c=0;if(null!=b)for(var d=0;d&lt;a.connections.length;d++)if(a.connections[d].sourceId==b||a.connections[d].targetId==b){c=d;break}return a.connections[c]},f=function(a,b){return jsPlumbUtil.findWithFunction(b.connections,function(b){return b.id==a.id})};jsPlumb.Endpoint=function(g){var h=g._jsPlumb,i=(jsPlumbAdapter.getAttribute,jsPlumb.getElementObject),j=jsPlumbUtil,k=g.newConnection,l=g.newEndpoint,m=g.finaliseConnection,n=(g.fireDetachEvent,g.fireMoveEvent),o=g.floatingConnections;this.idPrefix=&quot;_jsplumb_e_&quot;,this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=[&quot;Overlays&quot;,&quot;EndpointOverlays&quot;],OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:this._jsPlumb.instance.Defaults.MaxConnections,paintStyle:this._jsPlumb.instance.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,endpoint:this._jsPlumb.instance.Defaults.Endpoint||jsPlumb.Defaults.Endpoint,hoverPaintStyle:this._jsPlumb.instance.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,overlays:this._jsPlumb.instance.Defaults.EndpointOverlays||jsPlumb.Defaults.EndpointOverlays,connectorStyle:g.connectorStyle,connectorHoverStyle:g.connectorHoverStyle,connectorClass:g.connectorClass,connectorHoverClass:g.connectorHoverClass,connectorOverlays:g.connectorOverlays,connector:g.connector,connectorTooltip:g.connectorTooltip}},this._jsPlumb.enabled=!(g.enabled===!1),this._jsPlumb.visible=!0,this.element=jsPlumb.getDOMElement(g.source),this._jsPlumb.uuid=g.uuid,this._jsPlumb.floatingEndpoint=null;var p=null;this._jsPlumb.uuid&amp;&amp;(g.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=g.elementId,this._jsPlumb.connectionCost=g.connectionCost,this._jsPlumb.connectionsDirected=g.connectionsDirected,this._jsPlumb.currentAnchorClass=&quot;&quot;,this._jsPlumb.events={};var q=function(){jsPlumbAdapter.removeClass(this.element,h.endpointAnchorClassPrefix+&quot;_&quot;+this._jsPlumb.currentAnchorClass),this.removeClass(h.endpointAnchorClassPrefix+&quot;_&quot;+this._jsPlumb.currentAnchorClass),this._jsPlumb.currentAnchorClass=this.anchor.getCssClass(),this.addClass(h.endpointAnchorClassPrefix+&quot;_&quot;+this._jsPlumb.currentAnchorClass),jsPlumbAdapter.addClass(this.element,h.endpointAnchorClassPrefix+&quot;_&quot;+this._jsPlumb.currentAnchorClass)}.bind(this);this.setAnchor=function(a,b){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=this._jsPlumb.instance.makeAnchor(a,this.elementId,h),q(),this.anchor.bind(&quot;anchorChanged&quot;,function(a){this.fire(&quot;anchorChanged&quot;,{endpoint:this,anchor:a}),q()}.bind(this)),b||this._jsPlumb.instance.repaint(this.elementId),this};var r=g.anchor?g.anchor:g.anchors?g.anchors:h.Defaults.Anchor||&quot;Top&quot;;this.setAnchor(r,!0);var s=function(a){this.connections.length&gt;0?this.connections[0].setHover(a,!1):this.setHover(a)}.bind(this);g._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.setEndpoint=function(a){null!=this.endpoint&amp;&amp;(this.endpoint.cleanup(),this.endpoint.destroy());var b=function(a,b){var c=h.getRenderMode();if(jsPlumb.Endpoints[c][a])return new jsPlumb.Endpoints[c][a](b);if(!h.Defaults.DoNotThrowErrors)throw{msg:&quot;jsPlumb: unknown endpoint type '&quot;+a+&quot;'&quot;}},c={_jsPlumb:this._jsPlumb.instance,cssClass:g.cssClass,container:g.container,tooltip:g.tooltip,connectorTooltip:g.connectorTooltip,endpoint:this};j.isString(a)?this.endpoint=b(a,c):j.isArray(a)?(c=j.merge(a[1],c),this.endpoint=b(a[0],c)):this.endpoint=a.clone(),jsPlumb.extend({},c),this.endpoint.clone=function(){return j.isString(a)?b(a,c):j.isArray(a)?(c=j.merge(a[1],c),b(a[0],c)):void 0}.bind(this),this.type=this.endpoint.type,this.bindListeners(this.endpoint,this,s)},this.setEndpoint(g.endpoint||h.Defaults.Endpoint||jsPlumb.Defaults.Endpoint||&quot;Dot&quot;),this.setPaintStyle(g.paintStyle||g.style||h.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,!0),this.setHoverPaintStyle(g.hoverPaintStyle||h.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle(),jsPlumb.extend(this,g,d),this.isSource=g.isSource||!1,this.isTemporarySource=g.isTemporarySource||!1,this.isTarget=g.isTarget||!1,this._jsPlumb.maxConnections=g.maxConnections||h.Defaults.MaxConnections,this.canvas=this.endpoint.canvas,this.addClass(h.endpointAnchorClassPrefix+&quot;_&quot;+this._jsPlumb.currentAnchorClass),jsPlumbAdapter.addClass(this.element,h.endpointAnchorClassPrefix+&quot;_&quot;+this._jsPlumb.currentAnchorClass),this.connections=g.connections||[],this.connectorPointerEvents=g[&quot;connector-pointer-events&quot;],this.scope=g.scope||h.getDefaultScope(),this.timestamp=null,this.reattachConnections=g.reattach||h.Defaults.ReattachConnections,this.connectionsDetachable=h.Defaults.ConnectionsDetachable,(g.connectionsDetachable===!1||g.detachable===!1)&amp;&amp;(this.connectionsDetachable=!1),this.dragAllowedWhenFull=g.dragAllowedWhenFull!==!1,g.onMaxConnections&amp;&amp;this.bind(&quot;maxConnections&quot;,g.onMaxConnections),this.addConnection=function(a){this.connections.push(a),this[(this.connections.length&gt;0?&quot;add&quot;:&quot;remove&quot;)+&quot;Class&quot;](h.endpointConnectedClass),this[(this.isFull()?&quot;add&quot;:&quot;remove&quot;)+&quot;Class&quot;](h.endpointFullClass)},this.detachFromConnection=function(a,b,c){b=null==b?f(a,this):b,b&gt;=0&amp;&amp;(this.connections.splice(b,1),this[(this.connections.length&gt;0?&quot;add&quot;:&quot;remove&quot;)+&quot;Class&quot;](h.endpointConnectedClass),this[(this.isFull()?&quot;add&quot;:&quot;remove&quot;)+&quot;Class&quot;](h.endpointFullClass)),!c&amp;&amp;this._deleteOnDetach&amp;&amp;0===this.connections.length&amp;&amp;h.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!1})},this.detach=function(a,b,c,d,e,g,i){var j=null==i?f(a,this):i,k=!1;return d=d!==!1,j&gt;=0&amp;&amp;(c||a._forceDetach||a.isDetachable()&amp;&amp;a.isDetachAllowed(a)&amp;&amp;this.isDetachAllowed(a)&amp;&amp;h.checkCondition(&quot;beforeDetach&quot;,a))&amp;&amp;(h.deleteObject({connection:a,fireEvent:!b&amp;&amp;d,originalEvent:e,deleteAttachedObjects:!1}),k=!0),k},this.detachAll=function(a,b){for(;this.connections.length&gt;0;)this.detach(this.connections[0],!1,!0,a!==!1,b,this,0);return this},this.detachFrom=function(a,b,c){for(var d=[],e=0;e&lt;this.connections.length;e++)(this.connections[e].endpoints[1]==a||this.connections[e].endpoints[0]==a)&amp;&amp;d.push(this.connections[e]);for(var f=0;f&lt;d.length;f++)this.detach(d[f],!1,!0,b,c);return this},this.getElement=function(){return this.element},this.setElement=function(a){var b=this._jsPlumb.instance.getId(a),c=this.elementId;return j.removeWithFunction(g.endpointsByElement[this.elementId],function(a){return a.id==this.id}.bind(this)),this.element=jsPlumb.getDOMElement(a),this.elementId=h.getId(this.element),h.anchorManager.rehomeEndpoint(this,c,this.element),h.dragManager.endpointAdded(this.element),j.addToList(g.endpointsByElement,b,this),this},this.makeInPlaceCopy=function(){var a=this.anchor.getCurrentLocation({element:this}),b=this.anchor.getOrientation(this),c=this.anchor.getCssClass(),d={bind:function(){},compute:function(){return[a[0],a[1]]},getCurrentLocation:function(){return[a[0],a[1]]},getOrientation:function(){return b},getCssClass:function(){return c}};return l({dropOptions:g.dropOptions,anchor:d,source:this.element,paintStyle:this.getPaintStyle(),endpoint:g.hideOnDrag?&quot;Blank&quot;:this.endpoint,_transient:!0,scope:this.scope})},this.connectorSelector=function(){var a=this.connections[0];return this.isTarget&amp;&amp;a?a:this.connections.length&lt;this._jsPlumb.maxConnections||-1==this._jsPlumb.maxConnections?null:a},this.setStyle=this.setPaintStyle,this.paint=function(a){a=a||{};var b=a.timestamp,c=!(a.recalc===!1);if(!b||this.timestamp!==b){var d=h.updateOffset({elId:this.elementId,timestamp:b}),f=a.offset?a.offset.o:d.o;if(null!=f){var g=a.anchorPoint,i=a.connectorPaintStyle;if(null==g){var j=a.dimensions||d.s,k={xy:[f.left,f.top],wh:j,element:this,timestamp:b};if(c&amp;&amp;this.anchor.isDynamic&amp;&amp;this.connections.length&gt;0){var l=e(this,a.elementWithPrecedence),m=l.endpoints[0]==this?1:0,n=0===m?l.sourceId:l.targetId,o=h.getCachedData(n),p=o.o,q=o.s;k.txy=[p.left,p.top],k.twh=q,k.tElement=l.endpoints[m]}g=this.anchor.compute(k)}this.endpoint.compute(g,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,i||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=b;for(var r=0;r&lt;this._jsPlumb.overlays.length;r++){var s=this._jsPlumb.overlays[r];s.isVisible()&amp;&amp;(this._jsPlumb.overlayPlacements[r]=s.draw(this.endpoint,this._jsPlumb.paintStyleInUse),s.paint(this._jsPlumb.overlayPlacements[r]))}}}},this.repaint=this.paint;var t=!1;this.initDraggable=function(){if(!t&amp;&amp;jsPlumb.isDragSupported(this.element)){var d={id:null,element:null},e=null,f=!1,m=null,n=a(d,h),q=function(){e=this.connectorSelector();var a=!0;if(this.isEnabled()||(a=!1),null!=e||this.isSource||this.isTemporarySource||(a=!1),this.isSource&amp;&amp;this.isFull()&amp;&amp;!this.dragAllowedWhenFull&amp;&amp;(a=!1),null==e||e.isDetachable()||(a=!1),a===!1)return h.stopDrag&amp;&amp;h.stopDrag(this.canvas),n.stopDrag(),!1;for(var q=0;q&lt;this.connections.length;q++)this.connections[q].setHover(!1);this.addClass(&quot;endpointDrag&quot;),h.setConnectionBeingDragged(!0),e&amp;&amp;!this.isFull()&amp;&amp;this.isSource&amp;&amp;(e=null),h.updateOffset({elId:this.elementId}),p=this.makeInPlaceCopy(),p.referenceEndpoint=this,p.paint(),b(d,h);var r=i(p.canvas),s=jsPlumbAdapter.getOffset(r,this._jsPlumb.instance),t=i(this.canvas);if(jsPlumbAdapter.setPosition(d.element,s),this.parentAnchor&amp;&amp;(this.anchor=h.makeAnchor(this.parentAnchor,this.elementId,h)),h.setAttribute(this.canvas,&quot;dragId&quot;,d.id),h.setAttribute(this.canvas,&quot;elId&quot;,this.elementId),this._jsPlumb.floatingEndpoint=c(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,d.element,h,l),this.canvas.style.visibility=&quot;hidden&quot;,null==e)this.anchor.locked=!0,this.setHover(!1,!1),e=k({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:d.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:g.connectorStyle,hoverPaintStyle:g.connectorHoverStyle,connector:g.connector,overlays:g.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass}),e.pending=!0,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass),h.fire(&quot;connectionDrag&quot;,e);else{f=!0,e.setHover(!1);var u=e.endpoints[0].id==this.id?0:1;e.floatingAnchorIndex=u,this.detachFromConnection(e,null,!0);var v=h.getDragScope(t);h.setAttribute(this.canvas,&quot;originalScope&quot;,v);var w=h.getDropScope(t);h.setDragScope(t,w),h.fire(&quot;connectionDrag&quot;,e),0===u?(m=[e.source,e.sourceId,t,v],e.source=d.element,e.sourceId=d.id):(m=[e.target,e.targetId,t,v],e.target=d.element,e.targetId=d.id),e.endpoints[0===u?1:0].anchor.locked=!0,e.suspendedEndpoint=e.endpoints[u],e.suspendedElement=e.endpoints[u].getElement(),e.suspendedElementId=e.endpoints[u].elementId,e.suspendedElementType=0===u?&quot;source&quot;:&quot;target&quot;,e.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=e.suspendedEndpoint,e.endpoints[u]=this._jsPlumb.floatingEndpoint,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass)}o[d.id]=e,h.anchorManager.addFloatingConnection(d.id,e),j.addToList(g.endpointsByElement,d.id,this._jsPlumb.floatingEndpoint),h.currentlyDragging=!0}.bind(this),r=g.dragOptions||{},s={},u=jsPlumb.dragEvents.start,v=jsPlumb.dragEvents.stop,w=jsPlumb.dragEvents.drag;r=jsPlumb.extend(s,r),r.scope=r.scope||this.scope,r[u]=j.wrap(r[u],q,!1),r[w]=j.wrap(r[w],n.drag),r[v]=j.wrap(r[v],function(){if(h.setConnectionBeingDragged(!1),e&amp;&amp;null!=e.endpoints){var a=h.getDropEvent(arguments),b=null==e.floatingAnchorIndex?1:e.floatingAnchorIndex;if(e.endpoints[0===b?1:0].anchor.locked=!1,e.removeClass(h.draggingClass),this._jsPlumb&amp;&amp;(e.deleteConnectionNow||e.endpoints[b]==this._jsPlumb.floatingEndpoint)&amp;&amp;f&amp;&amp;e.suspendedEndpoint){0===b?(e.source=m[0],e.sourceId=m[1]):(e.target=m[0],e.targetId=m[1]);var c=this._jsPlumb.floatingEndpoint;h.setDragScope(m[2],m[3]),e.endpoints[b]=e.suspendedEndpoint,e.isReattach()||e._forceReattach||e._forceDetach||!e.endpoints[0===b?1:0].detach(e,!1,!1,!0,a)?(e.setHover(!1),e.floatingAnchorIndex=null,e._forceDetach=null,e._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(e),e.suspendedEndpoint.addConnection(e),h.repaint(m[1])):h.deleteObject({endpoint:c})}h.remove(d.element,!1),h.deleteObject({endpoint:p}),this.deleteAfterDragStop?h.deleteObject({endpoint:this}):this._jsPlumb&amp;&amp;(this._jsPlumb.floatingEndpoint=null,this.canvas.style.visibility=&quot;visible&quot;,this.anchor.locked=!1,this.paint({recalc:!1})),h.fire(&quot;connectionDragStop&quot;,e,a),h.currentlyDragging=!1,e=null}}.bind(this));var x=i(this.canvas);h.initDraggable(x,r,!0),this.canvas._jsPlumbRelatedElement=this.element,t=!0}},(this.isSource||this.isTarget||this.isTemporarySource)&amp;&amp;this.initDraggable();var u=function(a,b,c,d){if((this.isTarget||b)&amp;&amp;jsPlumb.isDropSupported(this.element)){var e=g.dropOptions||h.Defaults.DropOptions||jsPlumb.Defaults.DropOptions;e=jsPlumb.extend({},e),e.scope=e.scope||this.scope;var f=jsPlumb.dragEvents.drop,i=jsPlumb.dragEvents.over,k=jsPlumb.dragEvents.out,l=function(){this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass);var a=h.getDropEvent(arguments),b=h.getDOMElement(h.getDragObject(arguments)),c=h.getAttribute(b,&quot;dragId&quot;),e=(h.getAttribute(b,&quot;elId&quot;),h.getAttribute(b,&quot;originalScope&quot;)),f=o[c];if(null!=f){var g=f.suspendedEndpoint&amp;&amp;(f.suspendedEndpoint.id==this.id||this.referenceEndpoint&amp;&amp;f.suspendedEndpoint.id==this.referenceEndpoint.id);if(g)return f._forceReattach=!0,void 0;var i=null==f.floatingAnchorIndex?1:f.floatingAnchorIndex;e&amp;&amp;h.setDragScope(b,e);var j=null!=d?d.isEnabled():!0;if(this.isFull()&amp;&amp;this.fire(&quot;maxConnections&quot;,{endpoint:this,connection:f,maxConnections:this._jsPlumb.maxConnections},a),!this.isFull()&amp;&amp;(0!==i||this.isSource)&amp;&amp;(1!=i||this.isTarget)&amp;&amp;j){var k=!0;f.suspendedEndpoint&amp;&amp;f.suspendedEndpoint.id!=this.id&amp;&amp;(0===i?(f.source=f.suspendedEndpoint.element,f.sourceId=f.suspendedEndpoint.elementId):(f.target=f.suspendedEndpoint.element,f.targetId=f.suspendedEndpoint.elementId),f.isDetachAllowed(f)&amp;&amp;f.endpoints[i].isDetachAllowed(f)&amp;&amp;f.suspendedEndpoint.isDetachAllowed(f)&amp;&amp;h.checkCondition(&quot;beforeDetach&quot;,f)||(k=!1)),0===i?(f.source=this.element,f.sourceId=this.elementId):(f.target=this.element,f.targetId=this.elementId);var l=function(){f.floatingAnchorIndex=null},p=function(){f.pending=!1,f.endpoints[i].detachFromConnection(f),f.suspendedEndpoint&amp;&amp;f.suspendedEndpoint.detachFromConnection(f),f.endpoints[i]=this,this.addConnection(f);var b=this.getParameters();for(var c in b)f.setParameter(c,b[c]);if(f.suspendedEndpoint){var d=(f.suspendedEndpoint.getElement(),f.suspendedEndpoint.elementId);n({index:i,originalSourceId:0===i?d:f.sourceId,newSourceId:0===i?this.elementId:f.sourceId,originalTargetId:1==i?d:f.targetId,newTargetId:1==i?this.elementId:f.targetId,originalSourceEndpoint:0===i?f.suspendedEndpoint:f.endpoints[0],newSourceEndpoint:0===i?this:f.endpoints[0],originalTargetEndpoint:1==i?f.suspendedEndpoint:f.endpoints[1],newTargetEndpoint:1==i?this:f.endpoints[1],connection:f},a)}else b.draggable&amp;&amp;jsPlumb.initDraggable(this.element,dragOptions,!0,h);1==i?h.anchorManager.updateOtherEndpoint(f.sourceId,f.suspendedElementId,f.targetId,f):h.anchorManager.sourceChanged(f.suspendedEndpoint.elementId,f.sourceId,f),m(f,null,a),l()}.bind(this),q=function(){f.suspendedEndpoint&amp;&amp;(f.endpoints[i]=f.suspendedEndpoint,f.setHover(!1),f._forceDetach=!0,0===i?(f.source=f.suspendedEndpoint.element,f.sourceId=f.suspendedEndpoint.elementId):(f.target=f.suspendedEndpoint.element,f.targetId=f.suspendedEndpoint.elementId),f.suspendedEndpoint.addConnection(f),f.endpoints[0].repaint(),f.repaint(),h.repaint(f.sourceId),f._forceDetach=!1),l()};k=k&amp;&amp;this.isDropAllowed(f.sourceId,f.targetId,f.scope,f,this),k?p():q()}h.currentlyDragging=!1}}.bind(this);e[f]=j.wrap(e[f],l),e[i]=j.wrap(e[i],function(){var a=jsPlumb.getDragObject(arguments),b=h.getAttribute(jsPlumb.getDOMElement(a),&quot;dragId&quot;),c=o[b];if(null!=c){var d=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,e=this.isTarget&amp;&amp;0!==c.floatingAnchorIndex||c.suspendedEndpoint&amp;&amp;this.referenceEndpoint&amp;&amp;this.referenceEndpoint.id==c.suspendedEndpoint.id;if(e){var f=h.checkCondition(&quot;checkDropAllowed&quot;,{sourceEndpoint:c.endpoints[d],targetEndpoint:this,connection:c});this[(f?&quot;add&quot;:&quot;remove&quot;)+&quot;Class&quot;](h.endpointDropAllowedClass),this[(f?&quot;remove&quot;:&quot;add&quot;)+&quot;Class&quot;](h.endpointDropForbiddenClass),c.endpoints[d].anchor.over(this.anchor,this)}}}.bind(this)),e[k]=j.wrap(e[k],function(){var a=jsPlumb.getDragObject(arguments),b=null==a?null:h.getAttribute(jsPlumb.getDOMElement(a),&quot;dragId&quot;),c=b?o[b]:null;if(null!=c){var d=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,e=this.isTarget&amp;&amp;0!==c.floatingAnchorIndex||c.suspendedEndpoint&amp;&amp;this.referenceEndpoint&amp;&amp;this.referenceEndpoint.id==c.suspendedEndpoint.id;e&amp;&amp;(this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass),c.endpoints[d].anchor.out())}}.bind(this)),h.initDroppable(a,e,!0,c)}}.bind(this);return this.anchor.isFloating||u(i(this.canvas),!0,!(g._transient||this.anchor.isFloating),this),g.type&amp;&amp;this.addType(g.type,g.data,h.isSuspendDrawing()),this},jsPlumbUtil.extend(jsPlumb.Endpoint,OverlayCapableJsPlumbUIComponent,{getTypeDescriptor:function(){return&quot;endpoint&quot;},isVisible:function(){return this._jsPlumb.visible
},setVisible:function(a,b,c){if(this._jsPlumb.visible=a,this.canvas&amp;&amp;(this.canvas.style.display=a?&quot;block&quot;:&quot;none&quot;),this[a?&quot;showOverlays&quot;:&quot;hideOverlays&quot;](),!b)for(var d=0;d&lt;this.connections.length;d++)if(this.connections[d].setVisible(a),!c){var e=this===this.connections[d].endpoints[0]?1:0;1==this.connections[d].endpoints[e].connections.length&amp;&amp;this.connections[d].endpoints[e].setVisible(a,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(a){null!=a.maxConnections&amp;&amp;(this._jsPlumb.maxConnections=a.maxConnections),a.scope&amp;&amp;(this.scope=a.scope),jsPlumb.extend(this,a,d),a.anchor&amp;&amp;(this.anchor=this._jsPlumb.instance.makeAnchor(a.anchor)),null!=a.cssClass&amp;&amp;this.canvas&amp;&amp;this._jsPlumb.instance.addClass(this.canvas,a.cssClass)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(a){this._jsPlumb.enabled=a},cleanup:function(){jsPlumbAdapter.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+&quot;_&quot;+this._jsPlumb.currentAnchorClass),this.anchor=null,this.endpoint.cleanup(),this.endpoint.destroy(),this.endpoint=null;var a=jsPlumb.getElementObject(this.canvas);this._jsPlumb.instance.destroyDraggable(a),this._jsPlumb.instance.destroyDroppable(a)},setHover:function(a){this.endpoint&amp;&amp;this._jsPlumb&amp;&amp;!this._jsPlumb.instance.isConnectionBeingDragged()&amp;&amp;this.endpoint.setHover(a)},isFull:function(){return!(this.isFloating()||this._jsPlumb.maxConnections&lt;1||this.connections.length&lt;this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&amp;&amp;this.anchor.isFloating},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(a){this._jsPlumb.connectionCost=a},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(a){this._jsPlumb.connectionsDirected=a},setElementId:function(a){this.elementId=a,this.anchor.elementId=a},setReferenceElement:function(a){this.element=jsPlumb.getDOMElement(a)},setDragAllowedWhenFull:function(a){this.dragAllowedWhenFull=a},equals:function(a){return this.anchor.equals(a.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(a){return this.anchor.compute(a)}})}(),function(){&quot;use strict&quot;;var a=function(a,b,c,d){if(!a.Defaults.DoNotThrowErrors&amp;&amp;null==jsPlumb.Connectors[b][c])throw{msg:&quot;jsPlumb: unknown connector type '&quot;+c+&quot;'&quot;};return new jsPlumb.Connectors[b][c](d)},b=function(a,b,c){return a?c.makeAnchor(a,b,c):null};jsPlumb.Connection=function(a){var b=(a.newConnection,a.newEndpoint),c=(jsPlumb.getElementObject,jsPlumbUtil);this.connector=null,this.idPrefix=&quot;_jsplumb_c_&quot;,this.defaultLabelLocation=.5,this.defaultOverlayKeys=[&quot;Overlays&quot;,&quot;ConnectionOverlays&quot;],this.previousConnection=a.previousConnection,this.source=jsPlumb.getDOMElement(a.source),this.target=jsPlumb.getDOMElement(a.target),a.sourceEndpoint&amp;&amp;(this.source=a.sourceEndpoint.endpointWillMoveTo||a.sourceEndpoint.getElement()),a.targetEndpoint&amp;&amp;(this.target=a.targetEndpoint.getElement()),OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=a.scope,this.endpoints=[],this.endpointStyles=[];var d=this._jsPlumb.instance;this._jsPlumb.visible=!0,this._jsPlumb.editable=a.editable===!0,this._jsPlumb.params={cssClass:a.cssClass,container:a.container,&quot;pointer-events&quot;:a[&quot;pointer-events&quot;],editorParams:a.editorParams},this._jsPlumb.lastPaintedAt=null,this.getDefaultType=function(){return{parameters:{},scope:null,detachable:this._jsPlumb.instance.Defaults.ConnectionsDetachable,rettach:this._jsPlumb.instance.Defaults.ReattachConnections,paintStyle:this._jsPlumb.instance.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,connector:this._jsPlumb.instance.Defaults.Connector||jsPlumb.Defaults.Connector,hoverPaintStyle:this._jsPlumb.instance.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,overlays:this._jsPlumb.instance.Defaults.ConnectorOverlays||jsPlumb.Defaults.ConnectorOverlays}},this.makeEndpoint=function(c,e,f,g){return f=f||this._jsPlumb.instance.getId(e),this.prepareEndpoint(d,b,this,g,c?0:1,a,e,f)};var e=this.makeEndpoint(!0,this.source,this.sourceId,a.sourceEndpoint),f=this.makeEndpoint(!1,this.target,this.targetId,a.targetEndpoint);e&amp;&amp;c.addToList(a.endpointsByElement,this.sourceId,e),f&amp;&amp;c.addToList(a.endpointsByElement,this.targetId,f),this.scope||(this.scope=this.endpoints[0].scope),null!=a.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=a.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=a.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0)),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||a.connector||d.Defaults.Connector||jsPlumb.Defaults.Connector,!0,!0),a.path&amp;&amp;this.connector.setPath(a.path),this.setPaintStyle(this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||a.paintStyle||d.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,!0),this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||a.hoverPaintStyle||d.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle();var g=d.getSuspendedAt();if(d.updateOffset({elId:this.sourceId,timestamp:g}),d.updateOffset({elId:this.targetId,timestamp:g}),!d.isSuspendDrawing()){var h=d.getCachedData(this.sourceId),i=h.o,j=h.s,k=d.getCachedData(this.targetId),l=k.o,m=k.s,n=g||d.timestamp(),o=this.endpoints[0].anchor.compute({xy:[i.left,i.top],wh:j,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[l.left,l.top],twh:m,tElement:this.endpoints[1],timestamp:n});this.endpoints[0].paint({anchorLoc:o,timestamp:n}),o=this.endpoints[1].anchor.compute({xy:[l.left,l.top],wh:m,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[i.left,i.top],twh:j,tElement:this.endpoints[0],timestamp:n}),this.endpoints[1].paint({anchorLoc:o,timestamp:n})}this._jsPlumb.detachable=d.Defaults.ConnectionsDetachable,a.detachable===!1&amp;&amp;(this._jsPlumb.detachable=!1),this.endpoints[0].connectionsDetachable===!1&amp;&amp;(this._jsPlumb.detachable=!1),this.endpoints[1].connectionsDetachable===!1&amp;&amp;(this._jsPlumb.detachable=!1),this._jsPlumb.reattach=a.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||d.Defaults.ReattachConnections,this._jsPlumb.cost=a.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=a.directed,null==a.directed&amp;&amp;(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var p=jsPlumb.extend({},this.endpoints[1].getParameters());jsPlumb.extend(p,this.endpoints[0].getParameters()),jsPlumb.extend(p,this.getParameters()),this.setParameters(p);var q=[a.type,this.endpoints[0].connectionType,this.endpoints[1].connectionType].join(&quot; &quot;);/[^\s]/.test(q)&amp;&amp;this.addType(q,a.data,!0)},jsPlumbUtil.extend(jsPlumb.Connection,OverlayCapableJsPlumbUIComponent,{applyType:function(a,b){null!=a.detachable&amp;&amp;this.setDetachable(a.detachable),null!=a.reattach&amp;&amp;this.setReattach(a.reattach),a.scope&amp;&amp;(this.scope=a.scope),this.setConnector(a.connector,b),null!=a.cssClass&amp;&amp;this.canvas&amp;&amp;this._jsPlumb.instance.addClass(this.canvas,a.cssClass),a.anchor?(this.endpoints[0].anchor=this._jsPlumb.instance.makeAnchor(a.anchor),this.endpoints[1].anchor=this._jsPlumb.instance.makeAnchor(a.anchor)):a.anchors&amp;&amp;(this.endpoints[0].anchor=this._jsPlumb.instance.makeAnchor(a.anchors[0]),this.endpoints[1].anchor=this._jsPlumb.instance.makeAnchor(a.anchors[1]))},getTypeDescriptor:function(){return&quot;connection&quot;},getAttachedElements:function(){return this.endpoints},addClass:function(a,b){b&amp;&amp;(this.endpoints[0].addClass(a),this.endpoints[1].addClass(a),this.suspendedEndpoint&amp;&amp;this.suspendedEndpoint.addClass(a)),this.connector&amp;&amp;this.connector.addClass(a)},removeClass:function(a,b){b&amp;&amp;(this.endpoints[0].removeClass(a),this.endpoints[1].removeClass(a),this.suspendedEndpoint&amp;&amp;this.suspendedEndpoint.removeClass(a)),this.connector&amp;&amp;this.connector.removeClass(a)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a){this._jsPlumb.visible=a,this.connector&amp;&amp;this.connector.setVisible(a),this.repaint()},cleanup:function(){this.endpoints=null,this.source=null,this.target=null,null!=this.connector&amp;&amp;(this.connector.cleanup(),this.connector.destroy()),this.connector=null},isDetachable:function(){return this._jsPlumb.detachable===!0},setDetachable:function(a){this._jsPlumb.detachable=a===!0},isReattach:function(){return this._jsPlumb.reattach===!0},setReattach:function(a){this._jsPlumb.reattach=a===!0},setHover:function(a){this.connector&amp;&amp;this._jsPlumb&amp;&amp;!this._jsPlumb.instance.isConnectionBeingDragged()&amp;&amp;(this.connector.setHover(a),jsPlumbAdapter[a?&quot;addClass&quot;:&quot;removeClass&quot;](this.source,this._jsPlumb.instance.hoverSourceClass),jsPlumbAdapter[a?&quot;addClass&quot;:&quot;removeClass&quot;](this.target,this._jsPlumb.instance.hoverTargetClass))},getCost:function(){return this._jsPlumb.cost},setCost:function(a){this._jsPlumb.cost=a},isDirected:function(){return this._jsPlumb.directed===!0},getConnector:function(){return this.connector},setConnector:function(b,c,d){var e=jsPlumbUtil;null!=this.connector&amp;&amp;(this.connector.cleanup(),this.connector.destroy());var f={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,&quot;pointer-events&quot;:this._jsPlumb.params[&quot;pointer-events&quot;]},g=this._jsPlumb.instance.getRenderMode();e.isString(b)?this.connector=a(this._jsPlumb.instance,g,b,f):e.isArray(b)&amp;&amp;(this.connector=1==b.length?a(this._jsPlumb.instance,g,b[0],f):a(this._jsPlumb.instance,g,b[0],e.merge(b[1],f))),this.bindListeners(this.connector,this,function(a){this.setHover(a,!1)}.bind(this)),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,d||this.setListenerComponent(this.connector),this._jsPlumb.editable&amp;&amp;null!=jsPlumb.ConnectorEditors&amp;&amp;jsPlumb.ConnectorEditors[this.connector.type]&amp;&amp;this.connector.isEditable()?new jsPlumb.ConnectorEditors[this.connector.type]({connector:this.connector,connection:this,params:this._jsPlumb.params.editorParams||{}}):this._jsPlumb.editable=!1,c||this.repaint()},paint:function(a){if(!this._jsPlumb.instance.isSuspendDrawing()&amp;&amp;this._jsPlumb.visible){a=a||{};var b=(a.elId,a.ui),c=a.recalc,d=a.timestamp,e=!1,f=e?this.sourceId:this.targetId,g=e?this.targetId:this.sourceId,h=e?0:1,i=e?1:0;if(null==d||d!=this._jsPlumb.lastPaintedAt){var j=this._jsPlumb.instance.updateOffset({elId:g,offset:b,recalc:c,timestamp:d}).o,k=this._jsPlumb.instance.updateOffset({elId:f,timestamp:d}).o,l=this.endpoints[i],m=this.endpoints[h];a.clearEdits&amp;&amp;(this._jsPlumb.overlayPositions=null,l.anchor.clearUserDefinedLocation(),m.anchor.clearUserDefinedLocation(),this.connector.setEdited(!1));var n=l.anchor.getCurrentLocation({xy:[j.left,j.top],wh:[j.width,j.height],element:l,timestamp:d}),o=m.anchor.getCurrentLocation({xy:[k.left,k.top],wh:[k.width,k.height],element:m,timestamp:d});this.connector.resetBounds(),this.connector.compute({sourcePos:n,targetPos:o,sourceEndpoint:this.endpoints[i],targetEndpoint:this.endpoints[h],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:j,targetInfo:k,clearEdits:a.clearEdits===!0});for(var p={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},q=0;q&lt;this._jsPlumb.overlays.length;q++){var r=this._jsPlumb.overlays[q];r.isVisible()&amp;&amp;(this._jsPlumb.overlayPlacements[q]=r.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(r)),p.minX=Math.min(p.minX,this._jsPlumb.overlayPlacements[q].minX),p.maxX=Math.max(p.maxX,this._jsPlumb.overlayPlacements[q].maxX),p.minY=Math.min(p.minY,this._jsPlumb.overlayPlacements[q].minY),p.maxY=Math.max(p.maxY,this._jsPlumb.overlayPlacements[q].maxY))}var s=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,t=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),u={xmin:Math.min(this.connector.bounds.minX-(s+t),p.minX),ymin:Math.min(this.connector.bounds.minY-(s+t),p.minY),xmax:Math.max(this.connector.bounds.maxX+(s+t),p.maxX),ymax:Math.max(this.connector.bounds.maxY+(s+t),p.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,u);for(var v=0;v&lt;this._jsPlumb.overlays.length;v++){var w=this._jsPlumb.overlays[v];w.isVisible()&amp;&amp;w.paint(this._jsPlumb.overlayPlacements[v],u)}}this._jsPlumb.lastPaintedAt=d}},repaint:function(a){a=a||{},this.paint({elId:this.sourceId,recalc:!(a.recalc===!1),timestamp:a.timestamp,clearEdits:a.clearEdits})},prepareEndpoint:function(a,c,d,e,f,g,h,i){var j;if(e)d.endpoints[f]=e,e.addConnection(d);else{g.endpoints||(g.endpoints=[null,null]);var k=g.endpoints[f]||g.endpoint||a.Defaults.Endpoints[f]||jsPlumb.Defaults.Endpoints[f]||a.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;g.endpointStyles||(g.endpointStyles=[null,null]),g.endpointHoverStyles||(g.endpointHoverStyles=[null,null]);var l=g.endpointStyles[f]||g.endpointStyle||a.Defaults.EndpointStyles[f]||jsPlumb.Defaults.EndpointStyles[f]||a.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==l.fillStyle&amp;&amp;null!=g.paintStyle&amp;&amp;(l.fillStyle=g.paintStyle.strokeStyle),null==l.outlineColor&amp;&amp;null!=g.paintStyle&amp;&amp;(l.outlineColor=g.paintStyle.outlineColor),null==l.outlineWidth&amp;&amp;null!=g.paintStyle&amp;&amp;(l.outlineWidth=g.paintStyle.outlineWidth);var m=g.endpointHoverStyles[f]||g.endpointHoverStyle||a.Defaults.EndpointHoverStyles[f]||jsPlumb.Defaults.EndpointHoverStyles[f]||a.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=g.hoverPaintStyle&amp;&amp;(null==m&amp;&amp;(m={}),null==m.fillStyle&amp;&amp;(m.fillStyle=g.hoverPaintStyle.strokeStyle));var n=g.anchors?g.anchors[f]:g.anchor?g.anchor:b(a.Defaults.Anchors[f],i,a)||b(jsPlumb.Defaults.Anchors[f],i,a)||b(a.Defaults.Anchor,i,a)||b(jsPlumb.Defaults.Anchor,i,a),o=g.uuids?g.uuids[f]:null;j=c({paintStyle:l,hoverPaintStyle:m,endpoint:k,connections:[d],uuid:o,anchor:n,source:h,scope:g.scope,reattach:g.reattach||a.Defaults.ReattachConnections,detachable:g.detachable||a.Defaults.ConnectionsDetachable}),d.endpoints[f]=j,g.drawEndpoints===!1&amp;&amp;j.setVisible(!1,!0,!0)}return j}})}(),function(){&quot;use strict&quot;;jsPlumb.AnchorManager=function(a){var b={},c={},d={},e={},f={},g={HORIZONTAL:&quot;horizontal&quot;,VERTICAL:&quot;vertical&quot;,DIAGONAL:&quot;diagonal&quot;,IDENTITY:&quot;identity&quot;},h=[&quot;left&quot;,&quot;top&quot;,&quot;right&quot;,&quot;bottom&quot;],i={},j=this,k={},l=a.jsPlumbInstance,m={},n=function(a,b,c,d,e,f){if(a===b)return{orientation:g.IDENTITY,a:[&quot;top&quot;,&quot;top&quot;]};var i=Math.atan2(d.centery-c.centery,d.centerx-c.centerx),j=Math.atan2(c.centery-d.centery,c.centerx-d.centerx),k=[],l={};!function(a,b){for(var c=0;c&lt;a.length;c++)l[a[c]]={left:[b[c].left,b[c].centery],right:[b[c].right,b[c].centery],top:[b[c].centerx,b[c].top],bottom:[b[c].centerx,b[c].bottom]}}([&quot;source&quot;,&quot;target&quot;],[c,d]);for(var m=0;m&lt;h.length;m++)for(var n=0;n&lt;h.length;n++)m!=n&amp;&amp;k.push({source:h[m],target:h[n],dist:Biltong.lineLength(l.source[h[m]],l.target[h[n]])});k.sort(function(a,b){return a.dist&lt;b.dist?-1:a.dist&gt;b.dist?1:0});for(var o=k[0].source,p=k[0].target,q=0;q&lt;k.length&amp;&amp;(o=!e.isContinuous||e.isEdgeSupported(k[q].source)?k[q].source:null,p=!f.isContinuous||f.isEdgeSupported(k[q].target)?k[q].target:null,null==o||null==p);q++);return{a:[o,p],theta:i,theta2:j}},o=function(a,b,c,d,e,f,g){for(var h=[],i=b[e?0:1]/(d.length+1),j=0;j&lt;d.length;j++){var k=(j+1)*i,l=f*b[e?1:0];g&amp;&amp;(k=b[e?0:1]-k);var m=e?k:l,n=c[0]+m,o=m/b[0],p=e?l:k,q=c[1]+p,r=p/b[1];h.push([n,q,o,r,d[j][1],d[j][2]])}return h},p=function(a){return function(b,c){var d=!0;return d=a?b[0][0]&lt;c[0][0]:b[0][0]&gt;c[0][0],d===!1?-1:1}},q=function(a,b){var c=a[0][0]&lt;0?-Math.PI-a[0][0]:Math.PI-a[0][0],d=b[0][0]&lt;0?-Math.PI-b[0][0]:Math.PI-b[0][0];return c&gt;d?1:a[0][1]&gt;b[0][1]?1:-1},r={top:function(a,b){return a[0]&gt;b[0]?1:-1},right:p(!0),bottom:p(!0),left:q},s=function(a,b){return a.sort(b)},t=function(a,b){var c=l.getCachedData(a),e=c.s,g=c.o,h=function(b,c,e,g,h,i,j){if(g.length&gt;0)for(var k=s(g,r[b]),l=&quot;right&quot;===b||&quot;top&quot;===b,m=o(b,c,e,k,h,i,l),n=function(a,b){d[a.id]=[b[0],b[1],b[2],b[3]],f[a.id]=j},p=0;p&lt;m.length;p++){var q=m[p][4],t=q.endpoints[0].elementId===a,u=q.endpoints[1].elementId===a;t?n(q.endpoints[0],m[p]):u&amp;&amp;n(q.endpoints[1],m[p])}};h(&quot;bottom&quot;,e,[g.left,g.top],b.bottom,!0,1,[0,1]),h(&quot;top&quot;,e,[g.left,g.top],b.top,!0,0,[0,-1]),h(&quot;left&quot;,e,[g.left,g.top],b.left,!1,0,[-1,0]),h(&quot;right&quot;,e,[g.left,g.top],b.right,!1,1,[1,0])};this.reset=function(){b={},i={},k={}},this.addFloatingConnection=function(a,b){m[a]=b},this.removeFloatingConnection=function(a){delete m[a]},this.newConnection=function(a){var b=a.sourceId,c=a.targetId,d=a.endpoints,e=!0,f=function(f,g,h,j,k){b==c&amp;&amp;h.isContinuous&amp;&amp;(a._jsPlumb.instance.removeElement(d[1].canvas),e=!1),jsPlumbUtil.addToList(i,j,[k,g,h.constructor==jsPlumb.DynamicAnchor])};f(0,d[0],d[0].anchor,c,a),e&amp;&amp;f(1,d[1],d[1].anchor,b,a)};var u=function(a){!function(a,b){if(a){var c=function(a){return a[4]==b};jsPlumbUtil.removeWithFunction(a.top,c),jsPlumbUtil.removeWithFunction(a.left,c),jsPlumbUtil.removeWithFunction(a.bottom,c),jsPlumbUtil.removeWithFunction(a.right,c)}}(k[a.elementId],a.id)};this.connectionDetached=function(a){var b=a.connection||a,c=a.sourceId,d=a.targetId,e=b.endpoints,f=function(a,b,c,d,e){null!=c&amp;&amp;c.constructor==jsPlumb.FloatingAnchor||jsPlumbUtil.removeWithFunction(i[d],function(a){return a[0].id==e.id})};f(1,e[1],e[1].anchor,c,b),f(0,e[0],e[0].anchor,d,b),u(b.endpoints[0]),u(b.endpoints[1]),j.redraw(b.sourceId),j.redraw(b.targetId)},this.add=function(a,c){jsPlumbUtil.addToList(b,c,a)},this.changeId=function(a,c){i[c]=i[a],b[c]=b[a],delete i[a],delete b[a]},this.getConnectionsFor=function(a){return i[a]||[]},this.getEndpointsFor=function(a){return b[a]||[]},this.deleteEndpoint=function(a){jsPlumbUtil.removeWithFunction(b[a.elementId],function(b){return b.id==a.id}),u(a)},this.clearFor=function(a){delete b[a],b[a]=[]};var v=function(b,c,d,e,f,g,h,i,j,k,l,m){var n=-1,o=-1,p=e.endpoints[h],q=p.id,r=[1,0][h],s=[[c,d],e,f,g,q],t=b[j],u=p._continuousAnchorEdge?b[p._continuousAnchorEdge]:null;if(u){var v=jsPlumbUtil.findWithFunction(u,function(a){return a[4]==q});if(-1!=v){u.splice(v,1);for(var w=0;w&lt;u.length;w++)jsPlumbUtil.addWithFunction(l,u[w][1],function(a){return a.id==u[w][1].id}),jsPlumbUtil.addWithFunction(m,u[w][1].endpoints[h],function(a){return a.id==u[w][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,u[w][1].endpoints[r],function(a){return a.id==u[w][1].endpoints[r].id})}}for(w=0;w&lt;t.length;w++)1==a.idx&amp;&amp;t[w][3]===g&amp;&amp;-1==o&amp;&amp;(o=w),jsPlumbUtil.addWithFunction(l,t[w][1],function(a){return a.id==t[w][1].id}),jsPlumbUtil.addWithFunction(m,t[w][1].endpoints[h],function(a){return a.id==t[w][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,t[w][1].endpoints[r],function(a){return a.id==t[w][1].endpoints[r].id});if(-1!=n)t[n]=s;else{var x=i?-1!=o?o:0:t.length;t.splice(x,0,s)}p._continuousAnchorEdge=j};this.updateOtherEndpoint=function(a,b,c,d){var e=jsPlumbUtil.findWithFunction(i[a],function(a){return a[0].id===d.id}),f=jsPlumbUtil.findWithFunction(i[b],function(a){return a[0].id===d.id});-1!=e&amp;&amp;(i[a][e][0]=d,i[a][e][1]=d.endpoints[1],i[a][e][2]=d.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor),f&gt;-1&amp;&amp;(i[b].splice(f,1),jsPlumbUtil.addToList(i,c,[d,d.endpoints[0],d.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor]))},this.sourceChanged=function(a,b,c){if(a!==b){jsPlumbUtil.removeWithFunction(i[a],function(a){return a[0].id===c.id});var d=jsPlumbUtil.findWithFunction(i[c.targetId],function(a){return a[0].id===c.id});d&gt;-1&amp;&amp;(i[c.targetId][d][0]=c,i[c.targetId][d][1]=c.endpoints[0],i[c.targetId][d][2]=c.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor),jsPlumbUtil.addToList(i,b,[c,c.endpoints[1],c.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor])}},this.rehomeEndpoint=function(a,c,d){var e=b[c]||[],f=l.getId(d);if(f!==c){var g=jsPlumbUtil.indexOf(e,a);if(g&gt;-1){var h=e.splice(g,1)[0];j.add(h,f)}}for(var i=0;i&lt;a.connections.length;i++)a.connections[i].sourceId==c?(a.connections[i].sourceId=a.elementId,a.connections[i].source=a.element,j.sourceChanged(c,a.elementId,a.connections[i])):a.connections[i].targetId==c&amp;&amp;(a.connections[i].targetId=a.elementId,a.connections[i].target=a.element,j.updateOtherEndpoint(a.connections[i].sourceId,c,a.elementId,a.connections[i]))},this.redraw=function(a,c,d,e,f,g){if(!l.isSuspendDrawing()){var h=b[a]||[],j=i[a]||[],o=[],p=[],q=[];d=d||l.timestamp(),e=e||{left:0,top:0},c&amp;&amp;(c={left:c.left+e.left,top:c.top+e.top});for(var r=l.updateOffset({elId:a,offset:c,recalc:!1,timestamp:d}),s={},u=0;u&lt;j.length;u++){var w=j[u][0],x=w.sourceId,y=w.targetId,z=w.endpoints[0].anchor.isContinuous,A=w.endpoints[1].anchor.isContinuous;if(z||A){var B=x+&quot;_&quot;+y,C=s[B],D=w.sourceId==a?1:0;z&amp;&amp;!k[x]&amp;&amp;(k[x]={top:[],right:[],bottom:[],left:[]}),A&amp;&amp;!k[y]&amp;&amp;(k[y]={top:[],right:[],bottom:[],left:[]}),a!=y&amp;&amp;l.updateOffset({elId:y,timestamp:d}),a!=x&amp;&amp;l.updateOffset({elId:x,timestamp:d});var E=l.getCachedData(y),F=l.getCachedData(x);y==x&amp;&amp;(z||A)?v(k[x],-Math.PI/2,0,w,!1,y,0,!1,&quot;top&quot;,x,o,p):(C||(C=n(x,y,F.o,E.o,w.endpoints[0].anchor,w.endpoints[1].anchor),s[B]=C),z&amp;&amp;v(k[x],C.theta,0,w,!1,y,0,!1,C.a[0],x,o,p),A&amp;&amp;v(k[y],C.theta2,-1,w,!0,x,1,!0,C.a[1],y,o,p)),z&amp;&amp;jsPlumbUtil.addWithFunction(q,x,function(a){return a===x}),A&amp;&amp;jsPlumbUtil.addWithFunction(q,y,function(a){return a===y}),jsPlumbUtil.addWithFunction(o,w,function(a){return a.id==w.id}),(z&amp;&amp;0===D||A&amp;&amp;1===D)&amp;&amp;jsPlumbUtil.addWithFunction(p,w.endpoints[D],function(a){return a.id==w.endpoints[D].id})}}for(u=0;u&lt;h.length;u++)0===h[u].connections.length&amp;&amp;h[u].anchor.isContinuous&amp;&amp;(k[a]||(k[a]={top:[],right:[],bottom:[],left:[]}),v(k[a],-Math.PI/2,0,{endpoints:[h[u],h[u]],paint:function(){}},!1,a,0,!1,&quot;top&quot;,a,o,p),jsPlumbUtil.addWithFunction(q,a,function(b){return b===a}));for(u=0;u&lt;q.length;u++)t(q[u],k[q[u]]);for(u=0;u&lt;h.length;u++)h[u].paint({timestamp:d,offset:r,dimensions:r.s,recalc:g!==!0});for(u=0;u&lt;p.length;u++){var G=l.getCachedData(p[u].elementId);p[u].paint({timestamp:d,offset:G,dimensions:G.s})}for(u=0;u&lt;j.length;u++){var H=j[u][1];if(H.anchor.constructor==jsPlumb.DynamicAnchor){H.paint({elementWithPrecedence:a,timestamp:d}),jsPlumbUtil.addWithFunction(o,j[u][0],function(a){return a.id==j[u][0].id});for(var I=0;I&lt;H.connections.length;I++)H.connections[I]!==j[u][0]&amp;&amp;jsPlumbUtil.addWithFunction(o,H.connections[I],function(a){return a.id==H.connections[I].id})}else H.anchor.constructor==jsPlumb.Anchor&amp;&amp;jsPlumbUtil.addWithFunction(o,j[u][0],function(a){return a.id==j[u][0].id})}var J=m[a];for(J&amp;&amp;J.paint({timestamp:d,recalc:!1,elId:a}),u=0;u&lt;o.length;u++){var K=d;o[u].paint({elId:a,timestamp:K,recalc:!1,clearEdits:f})}}};var w=function(a){jsPlumbUtil.EventGenerator.apply(this),this.type=&quot;Continuous&quot;,this.isDynamic=!0,this.isContinuous=!0;for(var b=a.faces||[&quot;top&quot;,&quot;right&quot;,&quot;bottom&quot;,&quot;left&quot;],c=!(a.clockwise===!1),g={},h={top:&quot;bottom&quot;,right:&quot;left&quot;,left:&quot;right&quot;,bottom:&quot;top&quot;},i={top:&quot;right&quot;,right:&quot;bottom&quot;,left:&quot;top&quot;,bottom:&quot;left&quot;},j={top:&quot;left&quot;,right:&quot;top&quot;,left:&quot;bottom&quot;,bottom:&quot;right&quot;},k=c?i:j,l=c?j:i,m=a.cssClass||&quot;&quot;,n=0;n&lt;b.length;n++)g[b[n]]=!0;this.verifyEdge=function(a){return g[a]?a:g[h[a]]?h[a]:g[k[a]]?k[a]:g[l[a]]?l[a]:a},this.isEdgeSupported=function(a){return g[a]===!0},this.compute=function(a){return e[a.element.id]||d[a.element.id]||[0,0]},this.getCurrentLocation=function(a){return e[a.element.id]||d[a.element.id]||[0,0]},this.getOrientation=function(a){return f[a.id]||[0,0]},this.clearUserDefinedLocation=function(){delete e[a.elementId]},this.setUserDefinedLocation=function(b){e[a.elementId]=b},this.getCssClass=function(){return m},this.setCssClass=function(a){m=a}};l.continuousAnchorFactory={get:function(a){var b=c[a.elementId];return b||(b=new w(a),c[a.elementId]=b),b},clear:function(a){delete c[a]}}},jsPlumb.Anchor=function(a){this.x=a.x||0,this.y=a.y||0,this.elementId=a.elementId,this.cssClass=a.cssClass||&quot;&quot;,this.userDefinedLocation=null,this.orientation=a.orientation||[0,0],jsPlumbUtil.EventGenerator.apply(this),a.jsPlumbInstance,this.lastReturnValue=null,this.offsets=a.offsets||[0,0],this.timestamp=null,this.compute=function(a){var b=a.xy,c=a.wh,d=(a.element,a.timestamp);return a.clearUserDefinedLocation&amp;&amp;(this.userDefinedLocation=null),d&amp;&amp;d===self.timestamp?this.lastReturnValue:(this.lastReturnValue=null!=this.userDefinedLocation?this.userDefinedLocation:[b[0]+this.x*c[0]+this.offsets[0],b[1]+this.y*c[1]+this.offsets[1]],this.timestamp=d,this.lastReturnValue)},this.getCurrentLocation=function(a){return null==this.lastReturnValue||null!=a.timestamp&amp;&amp;this.timestamp!=a.timestamp?this.compute(a):this.lastReturnValue}},jsPlumbUtil.extend(jsPlumb.Anchor,jsPlumbUtil.EventGenerator,{equals:function(a){if(!a)return!1;var b=a.getOrientation(),c=this.getOrientation();return this.x==a.x&amp;&amp;this.y==a.y&amp;&amp;this.offsets[0]==a.offsets[0]&amp;&amp;this.offsets[1]==a.offsets[1]&amp;&amp;c[0]==b[0]&amp;&amp;c[1]==b[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(a){this.userDefinedLocation=a},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),jsPlumb.FloatingAnchor=function(a){jsPlumb.Anchor.apply(this,arguments);var b=a.reference,c=(a.jsPlumbInstance,a.referenceCanvas),d=jsPlumb.getSize(c),e=0,f=0,g=null,h=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(a){var b=a.xy,c=(a.element,[b[0]+d[0]/2,b[1]+d[1]/2]);return h=c,c},this.getOrientation=function(a){if(g)return g;var c=b.getOrientation(a);return[-1*Math.abs(c[0])*e,-1*Math.abs(c[1])*f]},this.over=function(a,b){g=a.getOrientation(b)},this.out=function(){g=null},this.getCurrentLocation=function(a){return null==h?this.compute(a):h}},jsPlumbUtil.extend(jsPlumb.FloatingAnchor,jsPlumb.Anchor);var a=function(a,b,c){return a.constructor==jsPlumb.Anchor?a:b.makeAnchor(a,c,b)};jsPlumb.DynamicAnchor=function(b){jsPlumb.Anchor.apply(this,arguments),this.isSelective=!0,this.isDynamic=!0,this.anchors=[],this.elementId=b.elementId,this.jsPlumbInstance=b.jsPlumbInstance;for(var c=0;c&lt;b.anchors.length;c++)this.anchors[c]=a(b.anchors[c],this.jsPlumbInstance,this.elementId);this.addAnchor=function(b){this.anchors.push(a(b,this.jsPlumbInstance,this.elementId))},this.getAnchors=function(){return this.anchors},this.locked=!1;var d=this.anchors.length&gt;0?this.anchors[0]:null,e=(this.anchors.length&gt;0?0:-1,d),f=this,g=function(a,b,c,d,e){var f=d[0]+a.x*e[0],g=d[1]+a.y*e[1],h=d[0]+e[0]/2,i=d[1]+e[1]/2;return Math.sqrt(Math.pow(b-f,2)+Math.pow(c-g,2))+Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2))},h=b.selector||function(a,b,c,d,e){for(var f=c[0]+d[0]/2,h=c[1]+d[1]/2,i=-1,j=1/0,k=0;k&lt;e.length;k++){var l=g(e[k],f,h,a,b);j&gt;l&amp;&amp;(i=k+0,j=l)}return e[i]};this.compute=function(a){var b=a.xy,c=a.wh,g=a.timestamp,i=a.txy,j=a.twh;a.clearUserDefinedLocation&amp;&amp;(userDefinedLocation=null),this.timestamp=g;var k=f.getUserDefinedLocation();return null!=k?k:this.locked||null==i||null==j?d.compute(a):(a.timestamp=null,d=h(b,c,i,j,this.anchors),this.x=d.x,this.y=d.y,d!=e&amp;&amp;this.fire(&quot;anchorChanged&quot;,d),e=d,d.compute(a))},this.getCurrentLocation=function(a){return this.getUserDefinedLocation()||(null!=d?d.getCurrentLocation(a):null)},this.getOrientation=function(a){return null!=d?d.getOrientation(a):[0,0]},this.over=function(a,b){null!=d&amp;&amp;d.over(a,b)},this.out=function(){null!=d&amp;&amp;d.out()},this.getCssClass=function(){return d&amp;&amp;d.getCssClass()||&quot;&quot;}},jsPlumbUtil.extend(jsPlumb.DynamicAnchor,jsPlumb.Anchor);var b=function(a,b,c,d,e,f){jsPlumb.Anchors[e]=function(g){var h=g.jsPlumbInstance.makeAnchor([a,b,c,d,0,0],g.elementId,g.jsPlumbInstance);return h.type=e,f&amp;&amp;f(h,g),h}};b(.5,0,0,-1,&quot;TopCenter&quot;),b(.5,1,0,1,&quot;BottomCenter&quot;),b(0,.5,-1,0,&quot;LeftMiddle&quot;),b(1,.5,1,0,&quot;RightMiddle&quot;),b(.5,0,0,-1,&quot;Top&quot;),b(.5,1,0,1,&quot;Bottom&quot;),b(0,.5,-1,0,&quot;Left&quot;),b(1,.5,1,0,&quot;Right&quot;),b(.5,.5,0,0,&quot;Center&quot;),b(1,0,0,-1,&quot;TopRight&quot;),b(1,1,0,1,&quot;BottomRight&quot;),b(0,0,0,-1,&quot;TopLeft&quot;),b(0,1,0,1,&quot;BottomLeft&quot;),jsPlumb.Defaults.DynamicAnchors=function(a){return a.jsPlumbInstance.makeAnchors([&quot;TopCenter&quot;,&quot;RightMiddle&quot;,&quot;BottomCenter&quot;,&quot;LeftMiddle&quot;],a.elementId,a.jsPlumbInstance)},jsPlumb.Anchors.AutoDefault=function(a){var b=a.jsPlumbInstance.makeDynamicAnchor(jsPlumb.Defaults.DynamicAnchors(a));return b.type=&quot;AutoDefault&quot;,b};var c=function(a,b){jsPlumb.Anchors[a]=function(c){var d=c.jsPlumbInstance.makeAnchor([&quot;Continuous&quot;,{faces:b}],c.elementId,c.jsPlumbInstance);return d.type=a,d}};jsPlumb.Anchors.Continuous=function(a){return a.jsPlumbInstance.continuousAnchorFactory.get(a)},c(&quot;ContinuousLeft&quot;,[&quot;left&quot;]),c(&quot;ContinuousTop&quot;,[&quot;top&quot;]),c(&quot;ContinuousBottom&quot;,[&quot;bottom&quot;]),c(&quot;ContinuousRight&quot;,[&quot;right&quot;]),b(0,0,0,0,&quot;Assign&quot;,function(a,b){var c=b.position||&quot;Fixed&quot;;a.positionFinder=c.constructor==String?b.jsPlumbInstance.AnchorPositionFinders[c]:c,a.constructorParams=b}),jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(a,b,c){return[(a.left-b.left)/c[0],(a.top-b.top)/c[1]]},Grid:function(a,b,c,d){var e=a.left-b.left,f=a.top-b.top,g=c[0]/d.grid[0],h=c[1]/d.grid[1],i=Math.floor(e/g),j=Math.floor(f/h);return[(i*g+g/2)/c[0],(j*h+h/2)/c[1]]}},jsPlumb.Anchors.Perimeter=function(a){a=a||{};var b=a.anchorCount||60,c=a.shape;if(!c)throw new Error(&quot;no shape supplied to Perimeter Anchor type&quot;);var d=function(){for(var a=.5,c=2*Math.PI/b,d=0,e=[],f=0;b&gt;f;f++){var g=a+a*Math.sin(d),h=a+a*Math.cos(d);e.push([g,h,0,0]),d+=c}return e},e=function(a){for(var c=b/a.length,d=[],e=function(a,e,f,g,h){c=b*h;for(var i=(f-a)/c,j=(g-e)/c,k=0;c&gt;k;k++)d.push([a+i*k,e+j*k,0,0])},f=0;f&lt;a.length;f++)e.apply(null,a[f]);return d},f=function(a){for(var b=[],c=0;c&lt;a.length;c++)b.push([a[c][0],a[c][1],a[c][2],a[c][3],1/a.length]);return e(b)},g=function(){return f([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},h={Circle:d,Ellipse:d,Diamond:function(){return f([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:g,Square:g,Triangle:function(){return f([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(a){for(var b=a.points,c=[],d=0,f=0;f&lt;b.length-1;f++){var g=Math.sqrt(Math.pow(b[f][2]-b[f][0])+Math.pow(b[f][3]-b[f][1]));d+=g,c.push([b[f][0],b[f][1],b[f+1][0],b[f+1][1],g])}for(var h=0;h&lt;c.length;h++)c[h][4]=c[h][4]/d;return e(c)}},i=function(a,b){for(var c=[],d=b/180*Math.PI,e=0;e&lt;a.length;e++){var f=a[e][0]-.5,g=a[e][1]-.5;c.push([.5+(f*Math.cos(d)-g*Math.sin(d)),.5+(f*Math.sin(d)+g*Math.cos(d)),a[e][2],a[e][3]])}return c};if(!h[c])throw new Error(&quot;Shape [&quot;+c+&quot;] is unknown by Perimeter Anchor type&quot;);var j=h[c](a);a.rotation&amp;&amp;(j=i(j,a.rotation));var k=a.jsPlumbInstance.makeDynamicAnchor(j);return k.type=&quot;Perimeter&quot;,k}}(),function(){&quot;use strict&quot;;jsPlumb.DOMElementComponent=jsPlumbUtil.extend(jsPlumb.jsPlumbUIComponent,function(){this.mousemove=this.dblclick=this.click=this.mousedown=this.mouseup=function(){}}),jsPlumb.Segments={AbstractSegment:function(a){this.params=a,this.findClosestPointOnPath=function(){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(a.x1,a.x2),minY:Math.min(a.y1,a.y2),maxX:Math.max(a.x1,a.x2),maxY:Math.max(a.y1,a.y2)}}},Straight:function(a){var b,c,d,e,f,g,h,i=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(){b=Math.sqrt(Math.pow(f-e,2)+Math.pow(h-g,2)),c=Biltong.gradient({x:e,y:g},{x:f,y:h}),d=-1/c});this.type=&quot;Straight&quot;,this.getLength=function(){return b},this.getGradient=function(){return c},this.getCoordinates=function(){return{x1:e,y1:g,x2:f,y2:h}},this.setCoordinates=function(a){e=a.x1,g=a.y1,f=a.x2,h=a.y2,i()},this.setCoordinates({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}),this.getBounds=function(){return{minX:Math.min(e,f),minY:Math.min(g,h),maxX:Math.max(e,f),maxY:Math.max(g,h)}},this.pointOnPath=function(a,c){if(0!==a||c){if(1!=a||c){var d=c?a&gt;0?a:b+a:a*b;return Biltong.pointOnLine({x:e,y:g},{x:f,y:h},d)}return{x:f,y:h}}return{x:e,y:g}},this.gradientAtPoint=function(){return c},this.pointAlongPathFrom=function(a,b,c){var d=this.pointOnPath(a,c),i=0&gt;=b?{x:e,y:g}:{x:f,y:h};return 0&gt;=b&amp;&amp;Math.abs(b)&gt;1&amp;&amp;(b*=-1),Biltong.pointOnLine(d,i,b)};var j=function(a,b,c){return c&gt;=Math.min(a,b)&amp;&amp;c&lt;=Math.max(a,b)
},k=function(a,b,c){return Math.abs(c-a)&lt;Math.abs(c-b)?a:b};this.findClosestPointOnPath=function(a,i){var l={d:1/0,x:null,y:null,l:null,x1:e,x2:f,y1:g,y2:h};if(0===c)l.y=g,l.x=j(e,f,a)?a:k(e,f,a);else if(1/0==c||c==-1/0)l.x=e,l.y=j(g,h,i)?i:k(g,h,i);else{var m=g-c*e,n=i-d*a,o=(n-m)/(c-d),p=c*o+m;l.x=j(e,f,o)?o:k(e,f,o),l.y=j(g,h,p)?p:k(g,h,p)}var q=Biltong.lineLength([l.x,l.y],[e,g]);return l.d=Biltong.lineLength([a,i],[l.x,l.y]),l.l=q/b,l}},Arc:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(b,c){return Biltong.theta([a.cx,a.cy],[b,c])}),c=function(a,b){if(a.anticlockwise){var c=a.startAngle&lt;a.endAngle?a.startAngle+d:a.startAngle,e=Math.abs(c-a.endAngle);return c-e*b}var f=a.endAngle&lt;a.startAngle?a.endAngle+d:a.endAngle,g=Math.abs(f-a.startAngle);return a.startAngle+g*b},d=2*Math.PI;this.radius=a.r,this.anticlockwise=a.ac,this.type=&quot;Arc&quot;,a.startAngle&amp;&amp;a.endAngle?(this.startAngle=a.startAngle,this.endAngle=a.endAngle,this.x1=a.cx+this.radius*Math.cos(a.startAngle),this.y1=a.cy+this.radius*Math.sin(a.startAngle),this.x2=a.cx+this.radius*Math.cos(a.endAngle),this.y2=a.cy+this.radius*Math.sin(a.endAngle)):(this.startAngle=b(a.x1,a.y1),this.endAngle=b(a.x2,a.y2),this.x1=a.x1,this.y1=a.y1,this.x2=a.x2,this.y2=a.y2),this.endAngle&lt;0&amp;&amp;(this.endAngle+=d),this.startAngle&lt;0&amp;&amp;(this.startAngle+=d),this.segment=Biltong.quadrant([this.x1,this.y1],[this.x2,this.y2]);var e=this.endAngle&lt;this.startAngle?this.endAngle+d:this.endAngle;this.sweep=Math.abs(e-this.startAngle),this.anticlockwise&amp;&amp;(this.sweep=d-this.sweep);var f=2*Math.PI*this.radius,g=this.sweep/d,h=f*g;this.getLength=function(){return h},this.getBounds=function(){return{minX:a.cx-a.r,maxX:a.cx+a.r,minY:a.cy-a.r,maxY:a.cy+a.r}};var i=1e-10,j=function(a){var b=Math.floor(a),c=Math.ceil(a);return i&gt;a-b?b:i&gt;c-a?c:a};this.pointOnPath=function(b,d){if(0===b)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==b)return{x:this.x2,y:this.y2,theta:this.endAngle};d&amp;&amp;(b/=h);var e=c(this,b),f=a.cx+a.r*Math.cos(e),g=a.cy+a.r*Math.sin(e);return{x:j(f),y:j(g),theta:e}},this.gradientAtPoint=function(b,c){var d=this.pointOnPath(b,c),e=Biltong.normal([a.cx,a.cy],[d.x,d.y]);return this.anticlockwise||1/0!=e&amp;&amp;e!=-1/0||(e*=-1),e},this.pointAlongPathFrom=function(b,c,d){var e=this.pointOnPath(b,d),g=2*(c/f)*Math.PI,h=this.anticlockwise?-1:1,i=e.theta+h*g,j=a.cx+this.radius*Math.cos(i),k=a.cy+this.radius*Math.sin(i);return{x:j,y:k}}},Bezier:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),[{x:a.x1,y:a.y1},{x:a.cp1x,y:a.cp1y},{x:a.cp2x,y:a.cp2y},{x:a.x2,y:a.y2}]),c={minX:Math.min(a.x1,a.x2,a.cp1x,a.cp2x),minY:Math.min(a.y1,a.y2,a.cp1y,a.cp2y),maxX:Math.max(a.x1,a.x2,a.cp1x,a.cp2x),maxY:Math.max(a.y1,a.y2,a.cp1y,a.cp2y)};this.type=&quot;Bezier&quot;;var d=function(a,b,c){return c&amp;&amp;(b=jsBezier.locationAlongCurveFrom(a,b&gt;0?0:1,b)),b};this.pointOnPath=function(a,c){return a=d(b,a,c),jsBezier.pointOnCurve(b,a)},this.gradientAtPoint=function(a,c){return a=d(b,a,c),jsBezier.gradientAtPoint(b,a)},this.pointAlongPathFrom=function(a,c,e){return a=d(b,a,e),jsBezier.pointAlongCurveFrom(b,a,c)},this.getLength=function(){return jsBezier.getLength(b)},this.getBounds=function(){return c}}};var a=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};jsPlumb.Connectors.AbstractConnector=function(b){a.apply(this,arguments);var c=[],d=0,e=[],f=[],g=b.stub||0,h=jsPlumbUtil.isArray(g)?g[0]:g,i=jsPlumbUtil.isArray(g)?g[1]:g,j=b.gap||0,k=jsPlumbUtil.isArray(j)?j[0]:j,l=jsPlumbUtil.isArray(j)?j[1]:j,m=null,n=!1,o=null;this.isEditable=function(){return!1},this.setEdited=function(a){n=a},this.getPath=function(){},this.setPath=function(){},this.findSegmentForPoint=function(a,b){for(var d={d:1/0,s:null,x:null,y:null,l:null},e=0;e&lt;c.length;e++){var f=c[e].findClosestPointOnPath(a,b);f.d&lt;d.d&amp;&amp;(d.d=f.d,d.l=f.l,d.x=f.x,d.y=f.y,d.s=c[e],d.x1=f.x1,d.x2=f.x2,d.y1=f.y1,d.y2=f.y2,d.index=e)}return d};var p=function(){for(var a=0,b=0;b&lt;c.length;b++){var g=c[b].getLength();f[b]=g/d,e[b]=[a,a+=g/d]}},q=function(a,b){b&amp;&amp;(a=a&gt;0?a/d:(d+a)/d);for(var g=e.length-1,h=1,i=0;i&lt;e.length;i++)if(e[i][1]&gt;=a){g=i,h=1==a?1:0===a?0:(a-e[i][0])/f[i];break}return{segment:c[g],proportion:h,index:g}},r=function(a,b,e){if(e.x1!=e.x2||e.y1!=e.y2){var f=new jsPlumb.Segments[b](e);c.push(f),d+=f.getLength(),a.updateBounds(f)}},s=function(){d=c.length=e.length=f.length=0};this.setSegments=function(a){m=[],d=0;for(var b=0;b&lt;a.length;b++)m.push(a[b]),d+=a[b].getLength()};var t=function(a){this.lineWidth=a.lineWidth;var b=Biltong.quadrant(a.sourcePos,a.targetPos),c=a.targetPos[0]&lt;a.sourcePos[0],d=a.targetPos[1]&lt;a.sourcePos[1],e=a.lineWidth||1,f=a.sourceEndpoint.anchor.getOrientation(a.sourceEndpoint),g=a.targetEndpoint.anchor.getOrientation(a.targetEndpoint),j=c?a.targetPos[0]:a.sourcePos[0],m=d?a.targetPos[1]:a.sourcePos[1],n=Math.abs(a.targetPos[0]-a.sourcePos[0]),o=Math.abs(a.targetPos[1]-a.sourcePos[1]);if(0===f[0]&amp;&amp;0===f[1]||0===g[0]&amp;&amp;0===g[1]){var p=n&gt;o?0:1,q=[1,0][p];f=[],g=[],f[p]=a.sourcePos[p]&gt;a.targetPos[p]?-1:1,g[p]=a.sourcePos[p]&gt;a.targetPos[p]?1:-1,f[q]=0,g[q]=0}var r=c?n+k*f[0]:k*f[0],s=d?o+k*f[1]:k*f[1],t=c?l*g[0]:n+l*g[0],u=d?l*g[1]:o+l*g[1],v=f[0]*g[0]+f[1]*g[1],w={sx:r,sy:s,tx:t,ty:u,lw:e,xSpan:Math.abs(t-r),ySpan:Math.abs(u-s),mx:(r+t)/2,my:(s+u)/2,so:f,to:g,x:j,y:m,w:n,h:o,segment:b,startStubX:r+f[0]*h,startStubY:s+f[1]*h,endStubX:t+g[0]*i,endStubY:u+g[1]*i,isXGreaterThanStubTimes2:Math.abs(r-t)&gt;h+i,isYGreaterThanStubTimes2:Math.abs(s-u)&gt;h+i,opposite:-1==v,perpendicular:0===v,orthogonal:1==v,sourceAxis:0===f[0]?&quot;y&quot;:&quot;x&quot;,points:[j,m,n,o,r,s,t,u]};return w.anchorOrientation=w.opposite?&quot;opposite&quot;:w.orthogonal?&quot;orthogonal&quot;:&quot;perpendicular&quot;,w};return this.getSegments=function(){return c},this.updateBounds=function(a){var b=a.getBounds();this.bounds.minX=Math.min(this.bounds.minX,b.minX),this.bounds.maxX=Math.max(this.bounds.maxX,b.maxX),this.bounds.minY=Math.min(this.bounds.minY,b.minY),this.bounds.maxY=Math.max(this.bounds.maxY,b.maxY)},this.pointOnPath=function(a,b){var c=q(a,b);return c.segment&amp;&amp;c.segment.pointOnPath(c.proportion,!1)||[0,0]},this.gradientAtPoint=function(a,b){var c=q(a,b);return c.segment&amp;&amp;c.segment.gradientAtPoint(c.proportion,!1)||0},this.pointAlongPathFrom=function(a,b,c){var d=q(a,c);return d.segment&amp;&amp;d.segment.pointAlongPathFrom(d.proportion,b,!1)||[0,0]},this.compute=function(a){n||(o=t.call(this,a)),s(),this._compute(o,a),this.x=o.points[0],this.y=o.points[1],this.w=o.points[2],this.h=o.points[3],this.segment=o.segment,p()},{addSegment:r,prepareCompute:t,sourceStub:h,targetStub:i,maxStub:Math.max(h,i),sourceGap:k,targetGap:l,maxGap:Math.max(k,l)}},jsPlumbUtil.extend(jsPlumb.Connectors.AbstractConnector,a);var b=jsPlumb.Connectors.Straight=function(){this.type=&quot;Straight&quot;;var a=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(b){a.addSegment(this,&quot;Straight&quot;,{x1:b.sx,y1:b.sy,x2:b.startStubX,y2:b.startStubY}),a.addSegment(this,&quot;Straight&quot;,{x1:b.startStubX,y1:b.startStubY,x2:b.endStubX,y2:b.endStubY}),a.addSegment(this,&quot;Straight&quot;,{x1:b.endStubX,y1:b.endStubY,x2:b.tx,y2:b.ty})}};jsPlumbUtil.extend(jsPlumb.Connectors.Straight,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(b,&quot;Straight&quot;),jsPlumb.Endpoints.AbstractEndpoint=function(b){a.apply(this,arguments);var c=this.compute=function(){var a=this._compute.apply(this,arguments);return this.x=a[0],this.y=a[1],this.w=a[2],this.h=a[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,a};return{compute:c,cssClass:b.cssClass}},jsPlumbUtil.extend(jsPlumb.Endpoints.AbstractEndpoint,a),jsPlumb.Endpoints.Dot=function(a){this.type=&quot;Dot&quot;,jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.radius=a.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(a,b,c){this.radius=c.radius||this.radius;var d=a[0]-this.radius,e=a[1]-this.radius,f=2*this.radius,g=2*this.radius;if(c.strokeStyle){var h=c.lineWidth||1;d-=h,e-=h,f+=2*h,g+=2*h}return[d,e,f,g,this.radius]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Dot,jsPlumb.Endpoints.AbstractEndpoint),jsPlumb.Endpoints.Rectangle=function(a){this.type=&quot;Rectangle&quot;,jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.width=a.width||20,this.height=a.height||20,this._compute=function(a,b,c){var d=c.width||this.width,e=c.height||this.height,f=a[0]-d/2,g=a[1]-e/2;return[f,g,d,e]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Rectangle,jsPlumb.Endpoints.AbstractEndpoint);var c=function(){jsPlumb.DOMElementComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};jsPlumbUtil.extend(c,jsPlumb.DOMElementComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(a){this._jsPlumb.displayElements.push(a)}}),jsPlumb.Endpoints.Image=function(a){this.type=&quot;Image&quot;,c.apply(this,arguments),jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);var b=a.onload,d=a.src||a.url,e=a.cssClass?&quot; &quot;+a.cssClass:&quot;&quot;;this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=a.width,this._jsPlumb.heightToUse=a.height,this._jsPlumb.endpoint=a.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&amp;&amp;(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,b&amp;&amp;b(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(a,c){var d=a.constructor==String?a:a.src;b=c,this._jsPlumb.img.src=d,null!=this.canvas&amp;&amp;this.canvas.setAttribute(&quot;src&quot;,this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(d,b),this._compute=function(a){return this.anchorPoint=a,this._jsPlumb.ready?[a[0]-this._jsPlumb.widthToUse/2,a[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=document.createElement(&quot;img&quot;),this.canvas.style.margin=0,this.canvas.style.padding=0,this.canvas.style.outline=0,this.canvas.style.position=&quot;absolute&quot;,this.canvas.className=this._jsPlumb.instance.endpointClass+e,this._jsPlumb.widthToUse&amp;&amp;this.canvas.setAttribute(&quot;width&quot;,this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&amp;&amp;this.canvas.setAttribute(&quot;height&quot;,this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.attachListeners(this.canvas,this),this.actuallyPaint=function(){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute(&quot;src&quot;,this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var a=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,b=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;jsPlumbUtil.sizeElement(this.canvas,a,b,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(a,b){null!=this._jsPlumb&amp;&amp;(this._jsPlumb.ready?this.actuallyPaint(a,b):window.setTimeout(function(){this.paint(a,b)}.bind(this),200))}},jsPlumbUtil.extend(jsPlumb.Endpoints.Image,[c,jsPlumb.Endpoints.AbstractEndpoint],{cleanup:function(){this._jsPlumb.deleted=!0,this.canvas&amp;&amp;this.canvas.parentNode.removeChild(this.canvas),this.canvas=null}}),jsPlumb.Endpoints.Blank=function(){jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),this.type=&quot;Blank&quot;,c.apply(this,arguments),this._compute=function(a){return[a[0],a[1],10,0]},this.canvas=document.createElement(&quot;div&quot;),this.canvas.style.display=&quot;block&quot;,this.canvas.style.width=&quot;1px&quot;,this.canvas.style.height=&quot;1px&quot;,this.canvas.style.background=&quot;transparent&quot;,this.canvas.style.position=&quot;absolute&quot;,this.canvas.className=this._jsPlumb.endpointClass,jsPlumb.appendElement(this.canvas),this.paint=function(){jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},jsPlumbUtil.extend(jsPlumb.Endpoints.Blank,[jsPlumb.Endpoints.AbstractEndpoint,c],{cleanup:function(){this.canvas&amp;&amp;this.canvas.parentNode&amp;&amp;this.canvas.parentNode.removeChild(this.canvas)}}),jsPlumb.Endpoints.Triangle=function(a){this.type=&quot;Triangle&quot;,jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},a.width=a.width||55,a.height=a.height||55,this.width=a.width,this.height=a.height,this._compute=function(a,b,c){var d=c.width||self.width,e=c.height||self.height,f=a[0]-d/2,g=a[1]-e/2;return[f,g,d,e]}};var d=jsPlumb.Overlays.AbstractOverlay=function(a){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=a.component,this.loc=null==a.location?.5:a.location,this.endpointLoc=null==a.endpointLocation?[.5,.5]:a.endpointLocation};d.prototype={cleanup:function(){this.component=null,this.canvas=null,this.endpointLoc=null},setVisible:function(a){this.visible=a,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(a){this.loc+=a,this.component.repaint()},setLocation:function(a){this.loc=a,this.component.repaint()},getLocation:function(){return this.loc}},jsPlumb.Overlays.Arrow=function(a){this.type=&quot;Arrow&quot;,d.apply(this,arguments),this.isAppendedAtTopLevel=!1,a=a||{};var b=jsPlumbUtil,c=Biltong;this.length=a.length||20,this.width=a.width||20,this.id=a.id;var e=(a.direction||1)&lt;0?-1:1,f=a.paintStyle||{lineWidth:1},g=a.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.draw=function(a,d){var h,i,j,k,l;if(a.pointAlongPathFrom){if(b.isString(this.loc)||this.loc&gt;1||this.loc&lt;0){var m=parseInt(this.loc,10),n=this.loc&lt;0?1:0;h=a.pointAlongPathFrom(n,m,!1),i=a.pointAlongPathFrom(n,m-e*this.length/2,!1),j=c.pointOnLine(h,i,this.length)}else if(1==this.loc){if(h=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,-this.length),j=c.pointOnLine(h,i,this.length),-1==e){var o=j;j=h,h=o}}else if(0===this.loc){if(j=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,this.length),h=c.pointOnLine(j,i,this.length),-1==e){var p=j;j=h,h=p}}else h=a.pointAlongPathFrom(this.loc,e*this.length/2),i=a.pointOnPath(this.loc),j=c.pointOnLine(h,i,this.length);k=c.perpendicularLineTo(h,j,this.width),l=c.pointOnLine(h,j,g*this.length);var q={hxy:h,tail:k,cxy:l},r=f.strokeStyle||d.strokeStyle,s=f.fillStyle||d.strokeStyle,t=f.lineWidth||d.lineWidth,u={component:a,d:q,lineWidth:t,strokeStyle:r,fillStyle:s,minX:Math.min(h.x,k[0].x,k[1].x),maxX:Math.max(h.x,k[0].x,k[1].x),minY:Math.min(h.y,k[0].y,k[1].y),maxY:Math.max(h.y,k[0].y,k[1].y)};return u}return{component:a,minX:0,maxX:0,minY:0,maxY:0}}},jsPlumbUtil.extend(jsPlumb.Overlays.Arrow,d),jsPlumb.Overlays.PlainArrow=function(a){a=a||{};var b=jsPlumb.extend(a,{foldback:1});jsPlumb.Overlays.Arrow.call(this,b),this.type=&quot;PlainArrow&quot;},jsPlumbUtil.extend(jsPlumb.Overlays.PlainArrow,jsPlumb.Overlays.Arrow),jsPlumb.Overlays.Diamond=function(a){a=a||{};var b=a.length||40,c=jsPlumb.extend(a,{length:b/2,foldback:2});jsPlumb.Overlays.Arrow.call(this,c),this.type=&quot;Diamond&quot;},jsPlumbUtil.extend(jsPlumb.Overlays.Diamond,jsPlumb.Overlays.Arrow);var e=function(a,b){return(null==a._jsPlumb.cachedDimensions||b)&amp;&amp;(a._jsPlumb.cachedDimensions=a.getDimensions()),a._jsPlumb.cachedDimensions},f=function(a){jsPlumb.DOMElementComponent.apply(this,arguments),d.apply(this,arguments),this.id=a.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=a.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=a.create,this._jsPlumb.initiallyInvisible=a.visible===!1,this.getElement=function(){if(null==this._jsPlumb.div){var b=this._jsPlumb.div=jsPlumb.getDOMElement(this._jsPlumb.create(this._jsPlumb.component));b.style.position=&quot;absolute&quot;;var c=this._jsPlumb.instance.overlayClass+&quot; &quot;+(this.cssClass?this.cssClass:a.cssClass?a.cssClass:&quot;&quot;);b.className=c,this._jsPlumb.instance.appendElement(b),this._jsPlumb.instance.getId(b),this.attachListeners(b,this),this.canvas=b,a.visible===!1&amp;&amp;(b.style.display=&quot;none&quot;)}return this._jsPlumb.div},this.draw=function(a,b,c){var d=e(this);if(null!=d&amp;&amp;2==d.length){var f={x:0,y:0};if(c)f={x:c[0],y:c[1]};else if(a.pointOnPath){var g=this.loc,h=!1;(jsPlumbUtil.isString(this.loc)||this.loc&lt;0||this.loc&gt;1)&amp;&amp;(g=parseInt(this.loc,10),h=!0),f=a.pointOnPath(g,h)}else{var i=this.loc.constructor==Array?this.loc:this.endpointLoc;f={x:i[0]*a.w,y:i[1]*a.h}}var j=f.x-d[0]/2,k=f.y-d[1]/2;return{component:a,d:{minx:j,miny:k,td:d,cxy:f},minX:j,maxX:j+d[0],minY:k,maxY:k+d[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};jsPlumbUtil.extend(f,[jsPlumb.DOMElementComponent,d],{getDimensions:function(){return jsPlumb.getSize(this.getElement())},setVisible:function(a){this._jsPlumb.div.style.display=a?&quot;block&quot;:&quot;none&quot;,a&amp;&amp;this._jsPlumb.initiallyInvisible&amp;&amp;(e(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1)},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(){null!=this._jsPlumb.div&amp;&amp;this._jsPlumb.instance.removeElement(this._jsPlumb.div)},computeMaxSize:function(){var a=e(this);return Math.max(a[0],a[1])},reattachListeners:function(a){this._jsPlumb.div&amp;&amp;this.reattachListenersForElement(this._jsPlumb.div,this,a)},paint:function(a){this._jsPlumb.initialised||(this.getElement(),a.component.appendDisplayElement(this._jsPlumb.div),this.attachListeners(this._jsPlumb.div,a.component),this._jsPlumb.initialised=!0),this._jsPlumb.div.style.left=a.component.x+a.d.minx+&quot;px&quot;,this._jsPlumb.div.style.top=a.component.y+a.d.miny+&quot;px&quot;}}),jsPlumb.Overlays.Custom=function(){this.type=&quot;Custom&quot;,f.apply(this,arguments)},jsPlumbUtil.extend(jsPlumb.Overlays.Custom,f),jsPlumb.Overlays.GuideLines=function(){var a=this;a.length=50,a.lineWidth=5,this.type=&quot;GuideLines&quot;,d.apply(this,arguments),jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.draw=function(b){var c=b.pointAlongPathFrom(a.loc,a.length/2),d=b.pointOnPath(a.loc),e=Biltong.pointOnLine(c,d,a.length),f=Biltong.perpendicularLineTo(c,e,40),g=Biltong.perpendicularLineTo(e,c,20);return{connector:b,head:c,tail:e,headLine:g,tailLine:f,minX:Math.min(c.x,e.x,g[0].x,g[1].x),minY:Math.min(c.y,e.y,g[0].y,g[1].y),maxX:Math.max(c.x,e.x,g[0].x,g[1].x),maxY:Math.max(c.y,e.y,g[0].y,g[1].y)}}},jsPlumb.Overlays.Label=function(a){this.labelStyle=a.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var b=jsPlumb.extend({create:function(){return document.createElement(&quot;div&quot;)}},a);if(jsPlumb.Overlays.Custom.call(this,b),this.type=&quot;Label&quot;,this.label=a.label||&quot;&quot;,this.labelText=null,this.labelStyle){var c=this.getElement();if(this.labelStyle.font=this.labelStyle.font||&quot;12px sans-serif&quot;,c.style.font=this.labelStyle.font,c.style.color=this.labelStyle.color||&quot;black&quot;,this.labelStyle.fillStyle&amp;&amp;(c.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth&gt;0){var d=this.labelStyle.borderStyle?this.labelStyle.borderStyle:&quot;black&quot;;c.style.border=this.labelStyle.borderWidth+&quot;px solid &quot;+d}this.labelStyle.padding&amp;&amp;(c.style.padding=this.labelStyle.padding)}},jsPlumbUtil.extend(jsPlumb.Overlays.Label,jsPlumb.Overlays.Custom,{cleanup:function(){this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null},getLabel:function(){return this.label},setLabel:function(a){this.label=a,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),f.prototype.getDimensions.apply(this,arguments)},update:function(){if(&quot;function&quot;==typeof this.label){var a=this.label(this);this.getElement().innerHTML=a.replace(/\r\n/g,&quot;&quot;)}else null==this.labelText&amp;&amp;(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,&quot;&quot;))}})}(),function(){&quot;use strict&quot;;var a=function(a){this.type=&quot;Flowchart&quot;,a=a||{},a.stub=null==a.stub?30:a.stub;var b,c=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),d=null==a.midpoint?.5:a.midpoint,e=[],f=(a.grid,a.alwaysRespectStubs),g=null,h=null,i=null,j=null!=a.cornerRadius?a.cornerRadius:0,k=function(a){return 0&gt;a?-1:0===a?0:1},l=function(a,b,c,d){if(h!=b||i!=c){var e=null==h?d.sx:h,f=null==i?d.sy:i,g=e==b?&quot;v&quot;:&quot;h&quot;,j=k(b-e),l=k(c-f);h=b,i=c,a.push([e,f,b,c,g,j,l])}},m=function(a){return Math.sqrt(Math.pow(a[0]-a[2],2)+Math.pow(a[1]-a[3],2))},n=function(a){var b=[];return b.push.apply(b,a),b},o=function(a,b,d){for(var e,f,g=0;g&lt;b.length-1;g++){if(e=e||n(b[g]),f=n(b[g+1]),j&gt;0&amp;&amp;e[4]!=f[4]){var h=Math.min(j,m(e),m(f));e[2]-=e[5]*h,e[3]-=e[6]*h,f[0]+=f[5]*h,f[1]+=f[6]*h;var i=e[6]==f[5]&amp;&amp;1==f[5]||e[6]==f[5]&amp;&amp;0===f[5]&amp;&amp;e[5]!=f[6]||e[6]==f[5]&amp;&amp;-1==f[5],k=f[1]&gt;e[3]?1:-1,l=f[0]&gt;e[2]?1:-1,o=k==l,p=o&amp;&amp;i||!o&amp;&amp;!i?f[0]:e[2],q=o&amp;&amp;i||!o&amp;&amp;!i?e[3]:f[1];c.addSegment(a,&quot;Straight&quot;,{x1:e[0],y1:e[1],x2:e[2],y2:e[3]}),c.addSegment(a,&quot;Arc&quot;,{r:h,x1:e[2],y1:e[3],x2:f[0],y2:f[1],cx:p,cy:q,ac:i})}else{var r=e[2]==e[0]?0:e[2]&gt;e[0]?d.lw/2:-(d.lw/2),s=e[3]==e[1]?0:e[3]&gt;e[1]?d.lw/2:-(d.lw/2);c.addSegment(a,&quot;Straight&quot;,{x1:e[0]-r,y1:e[1]-s,x2:e[2]+r,y2:e[3]+s})}e=f}null!=f&amp;&amp;c.addSegment(a,&quot;Straight&quot;,{x1:f[0],y1:f[1],x2:f[2],y2:f[3]})};this.setSegments=function(a){g=a},this.isEditable=function(){return!0},this.getOriginalSegments=function(){return g||e},this._compute=function(a,j){if(j.clearEdits&amp;&amp;(g=null),null!=g)return o(this,g,a),void 0;e=[],h=null,i=null,b=null;var k=a.startStubX+(a.endStubX-a.startStubX)*d,m=a.startStubY+(a.endStubY-a.startStubY)*d,n={x:[0,1],y:[1,0]},p=function(){return[a.startStubX,a.startStubY,a.endStubX,a.endStubY]},q={perpendicular:p,orthogonal:p,opposite:function(b){var c=a,d=&quot;x&quot;==b?0:1,e={x:function(){return 1==c.so[d]&amp;&amp;(c.startStubX&gt;c.endStubX&amp;&amp;c.tx&gt;c.startStubX||c.sx&gt;c.endStubX&amp;&amp;c.tx&gt;c.sx)||-1==c.so[d]&amp;&amp;(c.startStubX&lt;c.endStubX&amp;&amp;c.tx&lt;c.startStubX||c.sx&lt;c.endStubX&amp;&amp;c.tx&lt;c.sx)},y:function(){return 1==c.so[d]&amp;&amp;(c.startStubY&gt;c.endStubY&amp;&amp;c.ty&gt;c.startStubY||c.sy&gt;c.endStubY&amp;&amp;c.ty&gt;c.sy)||-1==c.so[d]&amp;&amp;(c.startStubY&lt;c.endStubY&amp;&amp;c.ty&lt;c.startStubY||c.sy&lt;c.endStubY&amp;&amp;c.ty&lt;c.sy)}};return!f&amp;&amp;e[b]()?{x:[(a.sx+a.tx)/2,a.startStubY,(a.sx+a.tx)/2,a.endStubY],y:[a.startStubX,(a.sy+a.ty)/2,a.endStubX,(a.sy+a.ty)/2]}[b]:[a.startStubX,a.startStubY,a.endStubX,a.endStubY]}},r={perpendicular:function(b){var c=a,d={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},e={x:[[c.startStubX,c.endStubX],null,[c.endStubX,c.startStubX]],y:[[c.startStubY,c.endStubY],null,[c.endStubY,c.startStubY]]},f={x:[[k,c.startStubY],[k,c.endStubY]],y:[[c.startStubX,m],[c.endStubX,m]]},g={x:<A href="/wiki/index.php?title=C.endStubX,c.startStubY&amp;action=edit&amp;redlink=1" class="new" title="C.endStubX,c.startStubY (page does not exist)">c.endStubX,c.startStubY</A>,y:<A href="/wiki/index.php?title=C.startStubX,c.endStubY&amp;action=edit&amp;redlink=1" class="new" title="C.startStubX,c.endStubY (page does not exist)">c.startStubX,c.endStubY</A>},h={x:[[c.startStubX,c.endStubY],[c.endStubX,c.endStubY]],y:[[c.endStubX,c.startStubY],[c.endStubX,c.endStubY]]},i={x:[[c.startStubX,m],[c.endStubX,m],[c.endStubX,c.endStubY]],y:[[k,c.startStubY],[k,c.endStubY],[c.endStubX,c.endStubY]]},j={x:[c.startStubY,c.endStubY],y:[c.startStubX,c.endStubX]},l=n[b][0],o=n[b][1],p=c.so[l]+1,q=c.to[o]+1,r=-1==c.to[o]&amp;&amp;j[b][1]&lt;j[b][0]||1==c.to[o]&amp;&amp;j[b][1]&gt;j[b][0],s=e[b][p][0],t=e[b][p][1],u=d[b][p][q];return c.segment==u[3]||c.segment==u[2]&amp;&amp;r?f[b]:c.segment==u[2]&amp;&amp;s&gt;t?g[b]:c.segment==u[2]&amp;&amp;t&gt;=s||c.segment==u[1]&amp;&amp;!r?i[b]:c.segment==u[0]||c.segment==u[1]&amp;&amp;r?h[b]:void 0},orthogonal:function(b,c,d,e,f){var g=a,h={x:-1==g.so[0]?Math.min(c,e):Math.max(c,e),y:-1==g.so[1]?Math.min(c,e):Math.max(c,e)}[b];return{x:[[h,d],[h,f],[e,f]],y:[[d,h],[f,h],[f,e]]}[b]},opposite:function(b,d,e,f){var g=a,h={x:&quot;y&quot;,y:&quot;x&quot;}[b],i={x:&quot;height&quot;,y:&quot;width&quot;}[b],l=g[&quot;is&quot;+b.toUpperCase()+&quot;GreaterThanStubTimes2&quot;];if(j.sourceEndpoint.elementId==j.targetEndpoint.elementId){var n=e+(1-j.sourceEndpoint.anchor[h])*j.sourceInfo[i]+c.maxStub;return{x:[[d,n],[f,n]],y:[[n,d],[n,f]]}[b]}return!l||1==g.so[t]&amp;&amp;d&gt;f||-1==g.so[t]&amp;&amp;f&gt;d?{x:[[d,m],[f,m]],y:[[k,d],[k,f]]}[b]:1==g.so[t]&amp;&amp;f&gt;d||-1==g.so[t]&amp;&amp;d&gt;f?{x:[[k,g.sy],[k,g.ty]],y:[[g.sx,m],[g.tx,m]]}[b]:void 0}},s=q[a.anchorOrientation](a.sourceAxis),t=&quot;x&quot;==a.sourceAxis?0:1,u=&quot;x&quot;==a.sourceAxis?1:0,v=s[t],w=s[u],x=s[t+2],y=s[u+2];l(e,s[0],s[1],a);var z=r[a.anchorOrientation](a.sourceAxis,v,w,x,y);if(z)for(var A=0;A&lt;z.length;A++)l(e,z[A][0],z[A][1],a);l(e,s[2],s[3],a),l(e,a.tx,a.ty,a),o(this,e,a)},this.getPath=function(){for(var a=null,b=null,c=[],d=g||e,f=0;f&lt;d.length;f++){var h=d[f],i=h[4],j=&quot;v&quot;==i?3:2;null!=a&amp;&amp;b===i?a[j]=h[j]:(h[0]!=h[2]||h[1]!=h[3])&amp;&amp;(c.push({start:[h[0],h[1]],end:[h[2],h[3]]}),a=h,b=h[4])}return c},this.setPath=function(a){g=[];for(var b=0;b&lt;a.length;b++){var c=a[b].start[0],d=a[b].start[1],e=a[b].end[0],f=a[b].end[1],h=c==e?&quot;v&quot;:&quot;h&quot;,i=k(e-c),j=k(f-d);g.push([c,d,e,f,h,i,j])}}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(a,&quot;Flowchart&quot;)}(),function(){&quot;use strict&quot;;var a=function(a,b,c,d){return c&gt;=a&amp;&amp;b&gt;=d?1:c&gt;=a&amp;&amp;d&gt;=b?2:a&gt;=c&amp;&amp;d&gt;=b?3:4},b=function(a,b,c,d,e,f,g,h,i){return i&gt;=h?[a,b]:1===c?d[3]&lt;=0&amp;&amp;e[3]&gt;=1?[a+(d[2]&lt;.5?-1*f:f),b]:d[2]&gt;=1&amp;&amp;e[2]&lt;=0?[a,b+(d[3]&lt;.5?-1*g:g)]:[a+-1*f,b+-1*g]:2===c?d[3]&gt;=1&amp;&amp;e[3]&lt;=0?[a+(d[2]&lt;.5?-1*f:f),b]:d[2]&gt;=1&amp;&amp;e[2]&lt;=0?[a,b+(d[3]&lt;.5?-1*g:g)]:[a+1*f,b+-1*g]:3===c?d[3]&gt;=1&amp;&amp;e[3]&lt;=0?[a+(d[2]&lt;.5?-1*f:f),b]:d[2]&lt;=0&amp;&amp;e[2]&gt;=1?[a,b+(d[3]&lt;.5?-1*g:g)]:[a+-1*f,b+-1*g]:4===c?d[3]&lt;=0&amp;&amp;e[3]&gt;=1?[a+(d[2]&lt;.5?-1*f:f),b]:d[2]&lt;=0&amp;&amp;e[2]&gt;=1?[a,b+(d[3]&lt;.5?-1*g:g)]:[a+1*f,b+-1*g]:void 0},c=function(c){c=c||{},this.type=&quot;StateMachine&quot;;var d=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),e=c.curviness||10,f=c.margin||5,g=c.proximityLimit||80,h=c.orientation&amp;&amp;&quot;clockwise&quot;===c.orientation,i=c.loopbackRadius||25,j=c.showLoopback!==!1;this._compute=function(c,k){var l=Math.abs(k.sourcePos[0]-k.targetPos[0]),m=Math.abs(k.sourcePos[1]-k.targetPos[1]);if(Math.min(k.sourcePos[0],k.targetPos[0]),Math.min(k.sourcePos[1],k.targetPos[1]),j&amp;&amp;k.sourceEndpoint.elementId===k.targetEndpoint.elementId){var n=k.sourcePos[0],o=(k.sourcePos[0],k.sourcePos[1]-f),p=(k.sourcePos[1]-f,n),q=o-i,r=2*i,s=2*i,t=p-i,u=q-i;c.points[0]=t,c.points[1]=u,c.points[2]=r,c.points[3]=s,d.addSegment(this,&quot;Arc&quot;,{loopback:!0,x1:n-t+4,y1:o-u,startAngle:0,endAngle:2*Math.PI,r:i,ac:!h,x2:n-t-4,y2:o-u,cx:p-t,cy:q-u})}else{var v=k.sourcePos[0]&lt;k.targetPos[0]?0:l,w=k.sourcePos[1]&lt;k.targetPos[1]?0:m,x=k.sourcePos[0]&lt;k.targetPos[0]?l:0,y=k.sourcePos[1]&lt;k.targetPos[1]?m:0;0===k.sourcePos[2]&amp;&amp;(v-=f),1===k.sourcePos[2]&amp;&amp;(v+=f),0===k.sourcePos[3]&amp;&amp;(w-=f),1===k.sourcePos[3]&amp;&amp;(w+=f),0===k.targetPos[2]&amp;&amp;(x-=f),1===k.targetPos[2]&amp;&amp;(x+=f),0===k.targetPos[3]&amp;&amp;(y-=f),1===k.targetPos[3]&amp;&amp;(y+=f);var z=(v+x)/2,A=(w+y)/2,B=-1*z/A,C=Math.atan(B),D=(1/0==B||B==-1/0?0:Math.abs(e/2*Math.sin(C)),1/0==B||B==-1/0?0:Math.abs(e/2*Math.cos(C)),a(v,w,x,y)),E=Math.sqrt(Math.pow(x-v,2)+Math.pow(y-w,2)),F=b(z,A,D,k.sourcePos,k.targetPos,e,e,E,g);d.addSegment(this,&quot;Bezier&quot;,{x1:x,y1:y,x2:v,y2:w,cp1x:F[0],cp1y:F[1],cp2x:F[0],cp2y:F[1]})}}};jsPlumb.registerConnectorType(c,&quot;StateMachine&quot;)}(),function(){var a=function(a){a=a||{};var b=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),c=(a.stub||50,a.curviness||150),d=10;this.type=&quot;Bezier&quot;,this.getCurviness=function(){return c},this._findControlPoint=function(a,b,e,f,g){var h=f.anchor.getOrientation(f),i=g.anchor.getOrientation(g),j=h[0]!=i[0]||h[1]==i[1],k=[];return j?(0===i[0]?k.push(e[0]&lt;b[0]?a[0]+d:a[0]-d):k.push(a[0]+c*i[0]),0===i[1]?k.push(e[1]&lt;b[1]?a[1]+d:a[1]-d):k.push(a[1]+c*h[1])):(0===h[0]?k.push(b[0]&lt;e[0]?a[0]+d:a[0]-d):k.push(a[0]-c*h[0]),0===h[1]?k.push(b[1]&lt;e[1]?a[1]+d:a[1]-d):k.push(a[1]+c*i[1])),k},this._compute=function(a,c){var d=c.sourcePos,e=c.targetPos,f=Math.abs(d[0]-e[0]),g=Math.abs(d[1]-e[1]),h=d[0]&lt;e[0]?f:0,i=d[1]&lt;e[1]?g:0,j=d[0]&lt;e[0]?0:f,k=d[1]&lt;e[1]?0:g,l=this._findControlPoint([h,i],d,e,c.sourceEndpoint,c.targetEndpoint),m=this._findControlPoint([j,k],e,d,c.targetEndpoint,c.sourceEndpoint);b.addSegment(this,&quot;Bezier&quot;,{x1:h,y1:i,x2:j,y2:k,cp1x:l[0],cp1y:l[1],cp2x:m[0],cp2y:m[1]})}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(a,&quot;Bezier&quot;)}(),function(){&quot;use strict&quot;;var a={joinstyle:&quot;stroke-linejoin&quot;,&quot;stroke-linejoin&quot;:&quot;stroke-linejoin&quot;,&quot;stroke-dashoffset&quot;:&quot;stroke-dashoffset&quot;,&quot;stroke-linecap&quot;:&quot;stroke-linecap&quot;},b=&quot;stroke-dasharray&quot;,c=&quot;dashstyle&quot;,d=&quot;linearGradient&quot;,e=&quot;radialGradient&quot;,f=&quot;defs&quot;,g=&quot;fill&quot;,h=&quot;stop&quot;,i=&quot;stroke&quot;,j=&quot;stroke-width&quot;,k=&quot;style&quot;,l=&quot;none&quot;,m=&quot;jsplumb_gradient_&quot;,n=&quot;lineWidth&quot;,o={svg:&quot;<A href="http://www.w3.org/2000/svg" class="external free" rel="nofollow">http://www.w3.org/2000/svg</A>&quot;,xhtml:&quot;<A href="http://www.w3.org/1999/xhtml" class="external free" rel="nofollow">http://www.w3.org/1999/xhtml</A>&quot;},p=function(a,b){for(var c in b)a.setAttribute(c,&quot;&quot;+b[c])},q=function(a,b){var c=document.createElementNS(o.svg,a);return b=b||{},b.version=&quot;1.1&quot;,b.xmlns=o.xhtml,p(c,b),c},r=function(a){return&quot;position:absolute;left:&quot;+a[0]+&quot;px;top:&quot;+a[1]+&quot;px&quot;},s=function(a){for(var b=0;b&lt;a.childNodes.length;b++)(a.childNodes[b].tagName==f||a.childNodes[b].tagName==d||a.childNodes[b].tagName==e)&amp;&amp;a.removeChild(a.childNodes[b])},t=function(a,b,c,j,k){var l=m+k._jsPlumb.instance.idstamp();s(a);var n;n=c.gradient.offset?q(e,{id:l}):q(d,{id:l,gradientUnits:&quot;userSpaceOnUse&quot;});var o=q(f);a.appendChild(o),o.appendChild(n);for(var p=0;p&lt;c.gradient.stops.length;p++){var r=1==k.segment||2==k.segment?p:c.gradient.stops.length-1-p,t=jsPlumbUtil.convertStyle(c.gradient.stops[r][1],!0),u=q(h,{offset:Math.floor(100*c.gradient.stops[p][0])+&quot;%&quot;,&quot;stop-color&quot;:t});n.appendChild(u)}var v=c.strokeStyle?i:g;b.setAttribute(v,&quot;url(#&quot;+l+&quot;)&quot;)},u=function(d,e,f,h,m){if(e.setAttribute(g,f.fillStyle?jsPlumbUtil.convertStyle(f.fillStyle,!0):l),e.setAttribute(i,f.strokeStyle?jsPlumbUtil.convertStyle(f.strokeStyle,!0):l),f.gradient?t(d,e,f,h,m):(s(d),e.setAttribute(k,&quot;&quot;)),f.lineWidth&amp;&amp;e.setAttribute(j,f.lineWidth),f[c]&amp;&amp;f[n]&amp;&amp;!f[b]){var o=-1==f[c].indexOf(&quot;,&quot;)?&quot; &quot;:&quot;,&quot;,p=f[c].split(o),q=&quot;&quot;;p.forEach(function(a){q+=Math.floor(a*f.lineWidth)+o}),e.setAttribute(b,q)}else f[b]&amp;&amp;e.setAttribute(b,f[b]);for(var r in a)f[r]&amp;&amp;e.setAttribute(a[r],f[r])},v=function(a,b,c){a.childNodes.length&gt;c?a.insertBefore(b,a.childNodes[c]):a.appendChild(b)};jsPlumbUtil.svg={node:q,attr:p,pos:r};var w=function(a){var b=a.pointerEventsSpec||&quot;all&quot;,c={};jsPlumb.jsPlumbUIComponent.apply(this,a.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var d=a.cssClass+&quot; &quot;+(a.originalArgs[0].cssClass||&quot;&quot;),e={style:&quot;&quot;,width:0,height:0,&quot;pointer-events&quot;:b,position:&quot;absolute&quot;};this.svg=q(&quot;svg&quot;,e),a.useDivWrapper?(this.canvas=document.createElement(&quot;div&quot;),this.canvas.style.position=&quot;absolute&quot;,jsPlumbUtil.sizeElement(this.canvas,0,0,1,1),this.canvas.className=d):(p(this.svg,{&quot;class&quot;:d}),this.canvas=this.svg),a._jsPlumb.appendElement(this.canvas,a.originalArgs[0].parent),a.useDivWrapper&amp;&amp;this.canvas.appendChild(this.svg);var f=[this.canvas];return this.getDisplayElements=function(){return f},this.appendDisplayElement=function(a){f.push(a)},this.paint=function(b,d,e){if(null!=b){var f,g=[this.x,this.y],h=[this.w,this.h];null!=e&amp;&amp;(e.xmin&lt;0&amp;&amp;(g[0]+=e.xmin),e.ymin&lt;0&amp;&amp;(g[1]+=e.ymin),h[0]=e.xmax+(e.xmin&lt;0?-e.xmin:0),h[1]=e.ymax+(e.ymin&lt;0?-e.ymin:0)),a.useDivWrapper?(jsPlumbUtil.sizeElement(this.canvas,g[0],g[1],h[0],h[1]),g[0]=0,g[1]=0,f=r([0,0])):f=r([g[0],g[1]]),c.paint.apply(this,arguments),p(this.svg,{style:f,width:h[0],height:h[1]})}},{renderer:c}};jsPlumbUtil.extend(w,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.canvas&amp;&amp;this.canvas.parentNode&amp;&amp;this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.bgCanvas=null,this.path=null,this.group=null},setVisible:function(a){this.canvas&amp;&amp;(this.canvas.style.display=a?&quot;block&quot;:&quot;none&quot;),this.bgCanvas&amp;&amp;(this.bgCanvas.style.display=a?&quot;block&quot;:&quot;none&quot;)}}),jsPlumb.ConnectorRenderers.svg=function(a){var b=this,c=w.apply(this,[{cssClass:a._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:&quot;none&quot;,_jsPlumb:a._jsPlumb}]);c.renderer.paint=function(c,d,e){var f=b.getSegments(),g=&quot;&quot;,h=[0,0];if(e.xmin&lt;0&amp;&amp;(h[0]=-e.xmin),e.ymin&lt;0&amp;&amp;(h[1]=-e.ymin),f.length&gt;0){for(var i=0;i&lt;f.length;i++)g+=jsPlumb.Segments.svg.SegmentRenderer.getPath(f[i]),g+=&quot; &quot;;var j={d:g,transform:&quot;translate(&quot;+h[0]+&quot;,&quot;+h[1]+&quot;)&quot;,&quot;pointer-events&quot;:a[&quot;pointer-events&quot;]||&quot;visibleStroke&quot;},k=null,l=[b.x,b.y,b.w,b.h],m={mouseenter:function(a){var c=a.relatedTarget;return null==c||c!=b.path&amp;&amp;c!=b.bgPath},mouseout:function(a){var c=a.relatedTarget;return null==c||c!=b.path&amp;&amp;c!=b.bgPath}};if(c.outlineColor){var n=c.outlineWidth||1,o=c.lineWidth+2*n;k=jsPlumb.extend({},c),k.strokeStyle=jsPlumbUtil.convertStyle(c.outlineColor),k.lineWidth=o,null==b.bgPath?(b.bgPath=q(&quot;path&quot;,j),v(b.svg,b.bgPath,0),b.attachListeners(b.bgPath,b,m)):p(b.bgPath,j),u(b.svg,b.bgPath,k,l,b)
}null==b.path?(b.path=q(&quot;path&quot;,j),v(b.svg,b.path,c.outlineColor?1:0),b.attachListeners(b.path,b,m)):p(b.path,j),u(b.svg,b.path,c,l,b)}},this.reattachListeners=function(){this.bgPath&amp;&amp;this.reattachListenersForElement(this.bgPath,this),this.path&amp;&amp;this.reattachListenersForElement(this.path,this)}},jsPlumbUtil.extend(jsPlumb.ConnectorRenderers.svg,w),jsPlumb.Segments.svg={SegmentRenderer:{getPath:function(a){return{Straight:function(){var b=a.getCoordinates();return&quot;M &quot;+b.x1+&quot; &quot;+b.y1+&quot; L &quot;+b.x2+&quot; &quot;+b.y2},Bezier:function(){var b=a.params;return&quot;M &quot;+b.x1+&quot; &quot;+b.y1+&quot; C &quot;+b.cp1x+&quot; &quot;+b.cp1y+&quot; &quot;+b.cp2x+&quot; &quot;+b.cp2y+&quot; &quot;+b.x2+&quot; &quot;+b.y2},Arc:function(){var b=a.params,c=a.sweep&gt;Math.PI?1:0,d=a.anticlockwise?0:1;return&quot;M&quot;+a.x1+&quot; &quot;+a.y1+&quot; A &quot;+a.radius+&quot; &quot;+b.r+&quot; 0 &quot;+c+&quot;,&quot;+d+&quot; &quot;+a.x2+&quot; &quot;+a.y2}}[a.type]()}}};var x=window.SvgEndpoint=function(a){var b=w.apply(this,[{cssClass:a._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:&quot;all&quot;,useDivWrapper:!0,_jsPlumb:a._jsPlumb}]);b.renderer.paint=function(a){var b=jsPlumb.extend({},a);b.outlineColor&amp;&amp;(b.strokeWidth=b.outlineWidth,b.strokeStyle=jsPlumbUtil.convertStyle(b.outlineColor,!0)),null==this.node?(this.node=this.makeNode(b),this.svg.appendChild(this.node),this.attachListeners(this.node,this)):null!=this.updateNode&amp;&amp;this.updateNode(this.node),u(this.svg,this.node,b,[this.x,this.y,this.w,this.h],this),r(this.node,[this.x,this.y])}.bind(this)};jsPlumbUtil.extend(x,w,{reattachListeners:function(){this.node&amp;&amp;this.reattachListenersForElement(this.node,this)}}),jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(){return q(&quot;circle&quot;,{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(a){p(a,{cx:this.w/2,cy:this.h/2,r:this.radius})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Dot,[jsPlumb.Endpoints.Dot,x]),jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(){return q(&quot;rect&quot;,{width:this.w,height:this.h})},this.updateNode=function(a){p(a,{width:this.w,height:this.h})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Rectangle,[jsPlumb.Endpoints.Rectangle,x]),jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom;var y=function(a,b){a.apply(this,b),jsPlumb.jsPlumbUIComponent.apply(this,b),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(a,d){if(a.component.svg&amp;&amp;d){null==this.path&amp;&amp;(this.path=q(&quot;path&quot;,{&quot;pointer-events&quot;:&quot;all&quot;}),a.component.svg.appendChild(this.path),this.canvas=a.component.svg,this.attachListeners(this.path,a.component),this.attachListeners(this.path,this));var e=b&amp;&amp;1==b.length?b[0].cssClass||&quot;&quot;:&quot;&quot;,f=[0,0];d.xmin&lt;0&amp;&amp;(f[0]=-d.xmin),d.ymin&lt;0&amp;&amp;(f[1]=-d.ymin),p(this.path,{d:c(a.d),&quot;class&quot;:e,stroke:a.strokeStyle?a.strokeStyle:null,fill:a.fillStyle?a.fillStyle:null,transform:&quot;translate(&quot;+f[0]+&quot;,&quot;+f[1]+&quot;)&quot;})}};var c=function(a){return&quot;M&quot;+a.hxy.x+&quot;,&quot;+a.hxy.y+&quot; L&quot;+a.tail[0].x+&quot;,&quot;+a.tail[0].y+&quot; L&quot;+a.cxy.x+&quot;,&quot;+a.cxy.y+&quot; L&quot;+a.tail[1].x+&quot;,&quot;+a.tail[1].y+&quot; L&quot;+a.hxy.x+&quot;,&quot;+a.hxy.y};this.reattachListeners=function(){this.path&amp;&amp;this.reattachListenersForElement(this.path,this)}};jsPlumbUtil.extend(y,[jsPlumb.jsPlumbUIComponent,jsPlumb.Overlays.AbstractOverlay],{cleanup:function(){null!=this.path&amp;&amp;this._jsPlumb.instance.removeElement(this.path)},setVisible:function(a){null!=this.path&amp;&amp;(this.path.style.display=a?&quot;block&quot;:&quot;none&quot;)}}),jsPlumb.Overlays.svg.Arrow=function(){y.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Arrow,[jsPlumb.Overlays.Arrow,y]),jsPlumb.Overlays.svg.PlainArrow=function(){y.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.PlainArrow,[jsPlumb.Overlays.PlainArrow,y]),jsPlumb.Overlays.svg.Diamond=function(){y.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Diamond,[jsPlumb.Overlays.Diamond,y]),jsPlumb.Overlays.svg.GuideLines=function(){var a,b,c=null,d=this;jsPlumb.Overlays.GuideLines.apply(this,arguments),this.paint=function(f,g){null==c&amp;&amp;(c=q(&quot;path&quot;),f.connector.svg.appendChild(c),d.attachListeners(c,f.connector),d.attachListeners(c,d),a=q(&quot;path&quot;),f.connector.svg.appendChild(a),d.attachListeners(a,f.connector),d.attachListeners(a,d),b=q(&quot;path&quot;),f.connector.svg.appendChild(b),d.attachListeners(b,f.connector),d.attachListeners(b,d));var h=[0,0];g.xmin&lt;0&amp;&amp;(h[0]=-g.xmin),g.ymin&lt;0&amp;&amp;(h[1]=-g.ymin),p(c,{d:e(f.head,f.tail),stroke:&quot;red&quot;,fill:null,transform:&quot;translate(&quot;+h[0]+&quot;,&quot;+h[1]+&quot;)&quot;}),p(a,{d:e(f.tailLine[0],f.tailLine[1]),stroke:&quot;blue&quot;,fill:null,transform:&quot;translate(&quot;+h[0]+&quot;,&quot;+h[1]+&quot;)&quot;}),p(b,{d:e(f.headLine[0],f.headLine[1]),stroke:&quot;green&quot;,fill:null,transform:&quot;translate(&quot;+h[0]+&quot;,&quot;+h[1]+&quot;)&quot;})};var e=function(a,b){return&quot;M &quot;+a.x+&quot;,&quot;+a.y+&quot; L&quot;+b.x+&quot;,&quot;+b.y}},jsPlumbUtil.extend(jsPlumb.Overlays.svg.GuideLines,jsPlumb.Overlays.GuideLines)}(),function(){&quot;use strict&quot;;var a={&quot;stroke-linejoin&quot;:&quot;joinstyle&quot;,joinstyle:&quot;joinstyle&quot;,endcap:&quot;endcap&quot;,miterlimit:&quot;miterlimit&quot;},b=null;if(document.createStyleSheet&amp;&amp;document.namespaces){var c=[&quot;.jsplumb_vml&quot;,&quot;jsplumb\\:textbox&quot;,&quot;jsplumb\\:oval&quot;,&quot;jsplumb\\:rect&quot;,&quot;jsplumb\\:stroke&quot;,&quot;jsplumb\\:shape&quot;,&quot;jsplumb\\:group&quot;],d=&quot;behavior:url(#default#VML);position:absolute;&quot;;b=document.createStyleSheet();for(var e=0;e&lt;c.length;e++)b.addRule(c[e],d);document.namespaces.add(&quot;jsplumb&quot;,&quot;urn:schemas-microsoft-com:vml&quot;)}jsPlumb.vml={};var f=1e3,g=function(a,b){for(var c in b)a[c]=b[c]},h=function(a,b,c,d,e,f){c=c||{};var h=document.createElement(&quot;jsplumb:&quot;+a);return f?e.appendElement(h,d):d.appendChild(h),h.className=(c[&quot;class&quot;]?c[&quot;class&quot;]+&quot; &quot;:&quot;&quot;)+&quot;jsplumb_vml&quot;,i(h,b),g(h,c),h},i=function(a,b,c){a.style.left=b[0]+&quot;px&quot;,a.style.top=b[1]+&quot;px&quot;,a.style.width=b[2]+&quot;px&quot;,a.style.height=b[3]+&quot;px&quot;,a.style.position=&quot;absolute&quot;,c&amp;&amp;(a.style.zIndex=c)},j=jsPlumb.vml.convertValue=function(a){return Math.floor(a*f)},k=function(a,b,c,d){&quot;transparent&quot;===b?d.setOpacity(c,&quot;0.0&quot;):d.setOpacity(c,&quot;1.0&quot;)},l=function(a,b,c,d){var e={};if(b.strokeStyle){e.stroked=&quot;true&quot;;var f=jsPlumbUtil.convertStyle(b.strokeStyle,!0);e.strokecolor=f,k(e,f,&quot;stroke&quot;,c),e.strokeweight=b.lineWidth+&quot;px&quot;}else e.stroked=&quot;false&quot;;if(b.fillStyle){e.filled=&quot;true&quot;;var i=jsPlumbUtil.convertStyle(b.fillStyle,!0);e.fillcolor=i,k(e,i,&quot;fill&quot;,c)}else e.filled=&quot;false&quot;;if(b.dashstyle)null==c.strokeNode?c.strokeNode=h(&quot;stroke&quot;,[0,0,0,0],{dashstyle:b.dashstyle},a,d):c.strokeNode.dashstyle=b.dashstyle;else if(b[&quot;stroke-dasharray&quot;]&amp;&amp;b.lineWidth){for(var j=-1==b[&quot;stroke-dasharray&quot;].indexOf(&quot;,&quot;)?&quot; &quot;:&quot;,&quot;,l=b[&quot;stroke-dasharray&quot;].split(j),m=&quot;&quot;,n=0;n&lt;l.length;n++)m+=Math.floor(l[n]/b.lineWidth)+j;null==c.strokeNode?c.strokeNode=h(&quot;stroke&quot;,[0,0,0,0],{dashstyle:m},a,d):c.strokeNode.dashstyle=m}g(a,e)},m=function(){var a=this;jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.opacityNodes={stroke:null,fill:null},this.initOpacityNodes=function(b){a.opacityNodes.stroke=h(&quot;stroke&quot;,[0,0,1,1],{opacity:&quot;0.0&quot;},b,a._jsPlumb.instance),a.opacityNodes.fill=h(&quot;fill&quot;,[0,0,1,1],{opacity:&quot;0.0&quot;},b,a._jsPlumb.instance)},this.setOpacity=function(b,c){var d=a.opacityNodes[b];d&amp;&amp;(d.opacity=&quot;&quot;+c)};var b=[];this.getDisplayElements=function(){return b},this.appendDisplayElement=function(c,d){d||a.canvas.parentNode.appendChild(c),b.push(c)}};jsPlumbUtil.extend(m,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.bgCanvas&amp;&amp;this.bgCanvas.parentNode.removeChild(this.bgCanvas),this.canvas&amp;&amp;this.canvas.parentNode.removeChild(this.canvas)}});var n=jsPlumb.ConnectorRenderers.vml=function(b){this.strokeNode=null,this.canvas=null,m.apply(this,arguments);var c=this._jsPlumb.instance.connectorClass+(b.cssClass?&quot; &quot;+b.cssClass:&quot;&quot;);this.paint=function(d){if(null!==d){this.w=Math.max(this.w,1),this.h=Math.max(this.h,1);for(var e=this.getSegments(),j={path:&quot;&quot;},k=[this.x,this.y,this.w,this.h],m=0;m&lt;e.length;m++)j.path+=jsPlumb.Segments.vml.SegmentRenderer.getPath(e[m]),j.path+=&quot; &quot;;if(d.outlineColor){var n=d.outlineWidth||1,o=d.lineWidth+2*n,p={strokeStyle:jsPlumbUtil.convertStyle(d.outlineColor),lineWidth:o};for(var q in a)p[q]=d[q];null==this.bgCanvas?(j[&quot;class&quot;]=c,j.coordsize=k[2]*f+&quot;,&quot;+k[3]*f,this.bgCanvas=h(&quot;shape&quot;,k,j,b.parent,this._jsPlumb.instance,!0),i(this.bgCanvas,k),this.appendDisplayElement(this.bgCanvas,!0),this.attachListeners(this.bgCanvas,this),this.initOpacityNodes(this.bgCanvas,[&quot;stroke&quot;])):(j.coordsize=k[2]*f+&quot;,&quot;+k[3]*f,i(this.bgCanvas,k),g(this.bgCanvas,j)),l(this.bgCanvas,p,this)}null==this.canvas?(j[&quot;class&quot;]=c,j.coordsize=k[2]*f+&quot;,&quot;+k[3]*f,this.canvas=h(&quot;shape&quot;,k,j,b.parent,this._jsPlumb.instance,!0),this.appendDisplayElement(this.canvas,!0),this.attachListeners(this.canvas,this),this.initOpacityNodes(this.canvas,[&quot;stroke&quot;])):(j.coordsize=k[2]*f+&quot;,&quot;+k[3]*f,i(this.canvas,k),g(this.canvas,j)),l(this.canvas,d,this,this._jsPlumb.instance)}}};jsPlumbUtil.extend(n,m,{reattachListeners:function(){this.canvas&amp;&amp;this.reattachListenersForElement(this.canvas,this)},setVisible:function(a){this.canvas&amp;&amp;(this.canvas.style.display=a?&quot;block&quot;:&quot;none&quot;),this.bgCanvas&amp;&amp;(this.bgCanvas.style.display=a?&quot;block&quot;:&quot;none&quot;)}});var o=window.VmlEndpoint=function(a){m.apply(this,arguments),this._jsPlumb.vml=null,this.canvas=document.createElement(&quot;div&quot;),this.canvas.style.position=&quot;absolute&quot;,this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(a.cssClass?&quot; &quot;+a.cssClass:&quot;&quot;),a._jsPlumb.appendElement(this.canvas,a.parent),this.paint=function(a,b){var c={},d=this._jsPlumb.vml;jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h),null==this._jsPlumb.vml?(c[&quot;class&quot;]=this._jsPlumb.clazz,d=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],c,b,this.canvas,this._jsPlumb.instance),this.attachListeners(d,this),this.appendDisplayElement(d,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(d,[&quot;fill&quot;])):(i(d,[0,0,this.w,this.h]),g(d,c)),l(d,a,this)}};jsPlumbUtil.extend(o,m,{reattachListeners:function(){this._jsPlumb.vml&amp;&amp;this.reattachListenersForElement(this._jsPlumb.vml,this)}}),jsPlumb.Segments.vml={SegmentRenderer:{getPath:function(a){return{Straight:function(a){var b=a.params;return&quot;m&quot;+j(b.x1)+&quot;,&quot;+j(b.y1)+&quot; l&quot;+j(b.x2)+&quot;,&quot;+j(b.y2)+&quot; e&quot;},Bezier:function(a){var b=a.params;return&quot;m&quot;+j(b.x1)+&quot;,&quot;+j(b.y1)+&quot; c&quot;+j(b.cp1x)+&quot;,&quot;+j(b.cp1y)+&quot;,&quot;+j(b.cp2x)+&quot;,&quot;+j(b.cp2y)+&quot;,&quot;+j(b.x2)+&quot;,&quot;+j(b.y2)+&quot; e&quot;},Arc:function(a){var b=a.params,c=Math.min(b.x1,b.x2),d=(Math.max(b.x1,b.x2),Math.min(b.y1,b.y2)),e=(Math.max(b.y1,b.y2),a.anticlockwise?1:0),f=a.anticlockwise?&quot;at &quot;:&quot;wa &quot;,g=function(){if(b.loopback)return&quot;0,0,&quot;+j(2*b.r)+&quot;,&quot;+j(2*b.r);var f=[null,[function(){return[c,d]},function(){return[c-b.r,d-b.r]}],[function(){return[c-b.r,d]},function(){return[c,d-b.r]}],[function(){return[c-b.r,d-b.r]},function(){return[c,d]}],[function(){return[c,d-b.r]},function(){return[c-b.r,d]}]][a.segment][e]();return j(f[0])+&quot;,&quot;+j(f[1])+&quot;,&quot;+j(f[0]+2*b.r)+&quot;,&quot;+j(f[1]+2*b.r)};return f+&quot; &quot;+g()+&quot;,&quot;+j(b.x1)+&quot;,&quot;+j(b.y1)+&quot;,&quot;+j(b.x2)+&quot;,&quot;+j(b.y2)+&quot; e&quot;}}[a.type](a)}}},jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h(&quot;oval&quot;,a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Dot,o),jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h(&quot;rect&quot;,a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Rectangle,o),jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom;var p=function(a,b){a.apply(this,b),m.apply(this,b);var c=this;this.canvas=null,this.isAppendedAtTopLevel=!0;var d=function(a){return&quot;m &quot;+j(a.hxy.x)+&quot;,&quot;+j(a.hxy.y)+&quot; l &quot;+j(a.tail[0].x)+&quot;,&quot;+j(a.tail[0].y)+&quot; &quot;+j(a.cxy.x)+&quot;,&quot;+j(a.cxy.y)+&quot; &quot;+j(a.tail[1].x)+&quot;,&quot;+j(a.tail[1].y)+&quot; x e&quot;};this.paint=function(a,e){if(a.component.canvas&amp;&amp;e){var j={},k=a.d,l=a.component;a.strokeStyle&amp;&amp;(j.stroked=&quot;true&quot;,j.strokecolor=jsPlumbUtil.convertStyle(a.strokeStyle,!0)),a.lineWidth&amp;&amp;(j.strokeweight=a.lineWidth+&quot;px&quot;),a.fillStyle&amp;&amp;(j.filled=&quot;true&quot;,j.fillcolor=a.fillStyle);var m=Math.min(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),n=Math.min(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),o=Math.max(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),p=Math.max(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),q=Math.abs(o-m),r=Math.abs(p-n),s=[m,n,q,r];if(j.path=d(k),j.coordsize=l.w*f+&quot;,&quot;+l.h*f,s[0]=l.x,s[1]=l.y,s[2]=l.w,s[3]=l.h,null==c.canvas){var t=l._jsPlumb.overlayClass||&quot;&quot;,u=b&amp;&amp;1==b.length?b[0].cssClass||&quot;&quot;:&quot;&quot;;j[&quot;class&quot;]=u+&quot; &quot;+t,c.canvas=h(&quot;shape&quot;,s,j,l.canvas.parentNode,l._jsPlumb.instance,!0),l.appendDisplayElement(c.canvas,!0),c.attachListeners(c.canvas,l),c.attachListeners(c.canvas,c)}else i(c.canvas,s),g(c.canvas,j)}},this.reattachListeners=function(){this.canvas&amp;&amp;this.reattachListenersForElement(c.canvas,this)},this.cleanup=function(){null!=this.canvas&amp;&amp;this._jsPlumb.instance.removeElement(this.canvas)}};jsPlumbUtil.extend(p,[m,jsPlumb.Overlays.AbstractOverlay],{setVisible:function(a){this.canvas.style.display=a?&quot;block&quot;:&quot;none&quot;}}),jsPlumb.Overlays.vml.Arrow=function(){p.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Arrow,[jsPlumb.Overlays.Arrow,p]),jsPlumb.Overlays.vml.PlainArrow=function(){p.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.PlainArrow,[jsPlumb.Overlays.PlainArrow,p]),jsPlumb.Overlays.vml.Diamond=function(){p.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Diamond,[jsPlumb.Overlays.Diamond,p])}(),function(){&quot;use strict&quot;;var a=function(a,c){var d=a[c?&quot;_internalKatavorio&quot;:&quot;_katavorio&quot;],e=b(a);return d||(d=new Katavorio({bind:e.on,unbind:e.off,getSize:jsPlumb.getSize,getPosition:function(b){var c=jsPlumbAdapter.getOffset(b,a);return[c.left,c.top]},setPosition:function(a,b){a.style.left=b[0]+&quot;px&quot;,a.style.top=b[1]+&quot;px&quot;},addClass:jsPlumbAdapter.addClass,removeClass:jsPlumbAdapter.removeClass,intersects:Biltong.intersects,indexOf:jsPlumbUtil.indexOf,css:{noSelect:a.dragSelectClass,droppable:&quot;jsplumb-droppable&quot;,draggable:&quot;jsplumb-draggable&quot;,drag:&quot;jsplumb-drag&quot;,selected:&quot;jsplumb-drag-selected&quot;,active:&quot;jsplumb-drag-active&quot;,hover:&quot;jsplumb-drag-hover&quot;}}),a[c?&quot;_internalKatavorio&quot;:&quot;_katavorio&quot;]=d,a.bind(&quot;zoom&quot;,d.setZoom)),d},b=function(a){var b=a._mottle;return b||(b=a._mottle=new Mottle),b},c=function(a,b){var c=function(c){if(b[c]){if(jsPlumbUtil.isString(b[c])){var d=b[c].match(/-=/)?-1:1,e=b[c].substring(2);return a[c]+d*e}return b[c]}return a[c]};return[c(&quot;left&quot;),c(&quot;top&quot;)]};jsPlumb.extend(jsPlumbInstance.prototype,{getDOMElement:function(a){return null==a?null:(a=&quot;string&quot;==typeof a?a:null!=a.length?a[0]:a,&quot;string&quot;==typeof a?document.getElementById(a):a)},getElementObject:function(a){return a},removeElement:function(c){a(this).elementRemoved(c),b(this).remove(c)},doAnimate:function(a,b,d){d=d||{};var e=jsPlumbAdapter.getOffset(a,this),f=c(e,b),g=f[0]-e.left,h=f[1]-e.top,i=d.duration||250,j=15,k=i/j,l=j/i*g,m=j/i*h,n=0,o=setInterval(function(){jsPlumbAdapter.setPosition(a,{left:e.left+l*(n+1),top:e.top+m*(n+1)}),null!=d.step&amp;&amp;d.step(),n++,n&gt;=k&amp;&amp;(window.clearInterval(o),null!=d.complete&amp;&amp;d.complete())},j)},getSelector:function(a,b){var c=null;return c=1==arguments.length?null!=a.nodeType?a:document.querySelectorAll(a):a.querySelectorAll(b)},destroyDraggable:function(b){a(this).destroyDraggable(b)},destroyDroppable:function(b){a(this).destroyDroppable(b)},initDraggable:function(b,c,d){a(this,d).draggable(b,c)},initDroppable:function(b,c,d){a(this,d).droppable(b,c)},isAlreadyDraggable:function(a){return null!=a._katavorioDrag},isDragSupported:function(){return!0},isDropSupported:function(){return!0},getDragObject:function(a){return a[0].drag.getDragElement()},getDragScope:function(a){return a._katavorioDrag&amp;&amp;a._katavorioDrag.scopes.join(&quot; &quot;)||&quot;&quot;},getDropEvent:function(a){return a[0].e},getDropScope:function(a){return a._katavorioDrop&amp;&amp;a._katavorioDrop.scopes.join(&quot; &quot;)||&quot;&quot;},getUIPosition:function(a){return{left:a[0].pos[0],top:a[0].pos[1]}},isDragFilterSupported:function(){return!0},setDragFilter:function(a,b){a._katavorioDrag&amp;&amp;a._katavorioDrag.setFilter(b)},setElementDraggable:function(a,b){a=jsPlumb.getDOMElement(a),a._katavorioDrag&amp;&amp;a._katavorioDrag.setEnabled(b)},setDragScope:function(a,b){a._katavorioDrag&amp;&amp;a._katavorioDrag.k.setDragScope(a,b)},dragEvents:{start:&quot;start&quot;,stop:&quot;stop&quot;,drag:&quot;drag&quot;,step:&quot;step&quot;,over:&quot;over&quot;,out:&quot;out&quot;,drop:&quot;drop&quot;,complete:&quot;complete&quot;},animEvents:{step:&quot;step&quot;,complete:&quot;complete&quot;},stopDrag:function(a){a._katavorioDrag&amp;&amp;a._katavorioDrag.abort()},addToDragSelection:function(b){a(this).select(b)},removeFromDragSelection:function(b){a(this).deselect(b)},clearDragSelection:function(){a(this).deselectAll()},trigger:function(a,c,d){b(this).trigger(a,c,d)},getOriginalEvent:function(a){return a},on:function(){b(this).on.apply(this,arguments)},off:function(){b(this).off.apply(this,arguments)}});var d=function(a){var b=function(){/complete|loaded|interactive/.test(document.readyState)&amp;&amp;&quot;1.6.4&quot;!=typeof document.body&amp;&amp;null!=document.body?a():setTimeout(b,9)};b()};d(jsPlumb.init)}.call(this);</B></P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2014.igem.org/Team:UCL/Template:plumb.js">http://2014.igem.org/Team:UCL/Template:plumb.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:UCL/Template:plumb.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:UCL/Template:plumb.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:UCL/Template:plumb.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:UCL/Template:plumb.js&amp;oldid=113815" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2014.igem.org:Privacy_policy" title="2014.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2014.igem.org:General_disclaimer" title="2014.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>