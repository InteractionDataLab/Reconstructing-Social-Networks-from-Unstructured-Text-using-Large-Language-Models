<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_Cornell_script_lightbox"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:Cornell/script/lightbox">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:Cornell/script/lightbox&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:Cornell/script/lightbox&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:Cornell/script/lightbox&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:Cornell/script/lightbox" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:Cornell/script/lightbox</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2014.igem.org</H3><P>/*
Lightbox for Bootstrap 3 by @ashleydw
<A href="https://github.com/ashleydw/lightbox" class="external free" rel="nofollow">https://github.com/ashleydw/lightbox</A></P><P>License: <A href="https://github.com/ashleydw/lightbox/blob/master/LICENSE" class="external free" rel="nofollow">https://github.com/ashleydw/lightbox/blob/master/LICENSE</A></P><UL><LI>/
</LI></UL><P>
(function() {
</P><PRE> &quot;use strict&quot;;
 var $, EkkoLightbox;
</PRE><PRE> $ = jQuery;
</PRE><PRE> EkkoLightbox = function(element, options) {
   var content, footer, header,
     _this = this;
   this.options = $.extend({
     title: null,
     footer: null,
     remote: null
   }, $.fn.ekkoLightbox.defaults, options || {});
   this.$element = $(element);
   content = <I>;</I>
   this.modal_id = this.options.modal_id ? this.options.modal_id : 'ekkoLightbox-' + Math.floor((Math.random() * 1000) + 1);
</PRE>
    header = '<DIV>&lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-hidden=&quot;true&quot;&gt;×&lt;/button&gt;</DIV>';
    footer = '<DIV>' + this.options.footer + '</DIV>';
    $(document.body).append('<DIV id=".27_.2B_this.modal_id_.2B_.27" class="ekko-lightbox modal fade"><DIV class="modal-dialog"><DIV class="modal-content">' + header + '' + footer + '</DIV></DIV></DIV>');
<PRE>   this.modal = $('#' + this.modal_id);
   this.modal_dialog = this.modal.find('.modal-dialog').first();
   this.modal_content = this.modal.find('.modal-content').first();
   this.modal_body = this.modal.find('.modal-body').first();
   this.lightbox_container = this.modal_body.find('.ekko-lightbox-container').first();
   this.lightbox_body = this.lightbox_container.find('&gt; div:first-child').first();
   this.showLoading();
   this.modal_arrows = null;
   this.border = {
     top: parseFloat(this.modal_dialog.css('border-top-width')) + parseFloat(this.modal_content.css('border-top-width')) + parseFloat(this.modal_body.css('border-top-width')),
     right: parseFloat(this.modal_dialog.css('border-right-width')) + parseFloat(this.modal_content.css('border-right-width')) + parseFloat(this.modal_body.css('border-right-width')),
     bottom: parseFloat(this.modal_dialog.css('border-bottom-width')) + parseFloat(this.modal_content.css('border-bottom-width')) + parseFloat(this.modal_body.css('border-bottom-width')),
     left: parseFloat(this.modal_dialog.css('border-left-width')) + parseFloat(this.modal_content.css('border-left-width')) + parseFloat(this.modal_body.css('border-left-width'))
   };
   this.padding = {
     top: parseFloat(this.modal_dialog.css('padding-top')) + parseFloat(this.modal_content.css('padding-top')) + parseFloat(this.modal_body.css('padding-top')),
     right: parseFloat(this.modal_dialog.css('padding-right')) + parseFloat(this.modal_content.css('padding-right')) + parseFloat(this.modal_body.css('padding-right')),
     bottom: parseFloat(this.modal_dialog.css('padding-bottom')) + parseFloat(this.modal_content.css('padding-bottom')) + parseFloat(this.modal_body.css('padding-bottom')),
     left: parseFloat(this.modal_dialog.css('padding-left')) + parseFloat(this.modal_content.css('padding-left')) + parseFloat(this.modal_body.css('padding-left'))
   };
   this.modal.on('show.bs.modal', this.options.onShow.bind(this)).on('shown.bs.modal', function() {
     _this.modal_shown();
     return _this.options.onShown.call(_this);
   }).on('hide.bs.modal', this.options.onHide.bind(this)).on('hidden.bs.modal', function() {
     if (_this.gallery) {
       $(document).off('keydown.ekkoLightbox');
     }
     _this.modal.remove();
     return _this.options.onHidden.call(_this);
   }).modal('show', options);
   return this.modal;
 };
</PRE><PRE> EkkoLightbox.prototype = {
   modal_shown: function() {
     var video_id,
       _this = this;
     if (!this.options.remote) {
       return this.error('No remote target given');
     } else {
       this.gallery = this.$element.data('gallery');
       if (this.gallery) {
         if (this.options.gallery_parent_selector === 'document.body' || this.options.gallery_parent_selector === <I>) {</I>
           this.gallery_items = $(document.body).find('*[data-toggle=&quot;lightbox&quot;][data-gallery=&quot;' + this.gallery + '&quot;]');
         } else {
           this.gallery_items = this.$element.parents(this.options.gallery_parent_selector).first().find('*[data-toggle=&quot;lightbox&quot;][data-gallery=&quot;' + this.gallery + '&quot;]');
         }
         this.gallery_index = this.gallery_items.index(this.$element);
         $(document).on('keydown.ekkoLightbox', this.navigate.bind(this));
         if (this.options.directional_arrows &amp;&amp; this.gallery_items.length &gt; 1) {
</PRE>
            this.lightbox_container.prepend('<DIV class="ekko-lightbox-nav-overlay">&lt;a href=&quot;#&quot; class=&quot;' + this.strip_stops(this.options.left_arrow_class) + '&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#&quot; class=&quot;' + this.strip_stops(this.options.right_arrow_class) + '&quot;&gt;&lt;/a&gt;</DIV>');
<PRE>        this.modal_arrows = this.lightbox_container.find('div.ekko-lightbox-nav-overlay').first();
           this.lightbox_container.find('a' + this.strip_spaces(this.options.left_arrow_class)).on('click', function(event) {
             event.preventDefault();
             return _this.navigate_left();
           });
           this.lightbox_container.find('a' + this.strip_spaces(this.options.right_arrow_class)).on('click', function(event) {
             event.preventDefault();
             return _this.navigate_right();
           });
         }
       }
       if (this.options.type) {
         if (this.options.type === 'image') {
           return this.preloadImage(this.options.remote, true);
         } else if (this.options.type === 'youtube' &amp;&amp; (video_id = this.getYoutubeId(this.options.remote))) {
           return this.showYoutubeVideo(video_id);
         } else if (this.options.type === 'vimeo') {
           return this.showVimeoVideo(this.options.remote);
         } else if (this.options.type === 'instagram') {
           return this.showInstagramVideo(this.options.remote);
         } else {
           return this.error(&quot;Could not detect remote target type. Force the type using data-type=\&quot;image|youtube|vimeo\&quot;&quot;);
         }
       } else {
         return this.detectRemoteType(this.options.remote);
       }
     }
   },
   strip_stops: function(str) {
     return str.replace(/\./g, <I>);</I>
   },
   strip_spaces: function(str) {
     return str.replace(/\s/g, <I>);</I>
   },
   isImage: function(str) {
     return str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i);
   },
   isSwf: function(str) {
     return str.match(/\.(swf)((\?|#).*)?$/i);
   },
   getYoutubeId: function(str) {
     var match;
     match = str.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&amp;v=)([^#\&amp;\?]*).*/);
     if (match &amp;&amp; match[2].length === 11) {
       return match[2];
     } else {
       return false;
     }
   },
   getVimeoId: function(str) {
     if (str.indexOf('vimeo') &gt; 0) {
       return str;
     } else {
       return false;
     }
   },
   getInstagramId: function(str) {
     if (str.indexOf('instagram') &gt; 0) {
       return str;
     } else {
       return false;
     }
   },
   navigate: function(event) {
     event = event || window.event;
     if (event.keyCode === 39 || event.keyCode === 37) {
       if (event.keyCode === 39) {
         return this.navigate_right();
       } else if (event.keyCode === 37) {
         return this.navigate_left();
       }
     }
   },
   navigate_left: function() {
     var src;
     if (this.gallery_items.length === 1) {
       return;
     }
     this.showLoading();
     if (this.gallery_index === 0) {
       this.gallery_index = this.gallery_items.length - 1;
     } else {
       this.gallery_index--;
     }
     this.options.onNavigate('left', this.gallery_index);
     this.$element = $(this.gallery_items.get(this.gallery_index));
     this.updateTitleAndFooter();
     src = this.$element.attr('data-remote') || this.$element.attr('href');
     return this.detectRemoteType(src, this.$element.attr('data-type'));
   },
   navigate_right: function() {
     var next, src;
     if (this.gallery_items.length === 1) {
       return;
     }
     this.showLoading();
     if (this.gallery_index === this.gallery_items.length - 1) {
       this.gallery_index = 0;
     } else {
       this.gallery_index++;
     }
     this.options.onNavigate('right', this.gallery_index);
     this.$element = $(this.gallery_items.get(this.gallery_index));
     src = this.$element.attr('data-remote') || this.$element.attr('href');
     this.updateTitleAndFooter();
     this.detectRemoteType(src, this.$element.attr('data-type'));
     if (this.gallery_index + 1 &lt; this.gallery_items.length) {
       next = $(this.gallery_items.get(this.gallery_index + 1), false);
       src = next.attr('data-remote') || next.attr('href');
       if (next.attr('data-type') === 'image' || this.isImage(src)) {
         return this.preloadImage(src, false);
       }
     }
   },
   detectRemoteType: function(src, type) {
     var video_id;
     if (type === 'image' || this.isImage(src)) {
       this.options.type = 'image';
       return this.preloadImage(src, true);
     } else if (type === 'youtube' || (video_id = this.getYoutubeId(src))) {
       this.options.type = 'youtube';
       return this.showYoutubeVideo(video_id);
     } else if (type === 'vimeo' || (video_id = this.getVimeoId(src))) {
       this.options.type = 'vimeo';
       return this.showVimeoVideo(video_id);
     } else if (type === 'instagram' || (video_id = this.getInstagramId(src))) {
       this.options.type = 'instagram';
       return this.showInstagramVideo(video_id);
     } else {
       return this.error(&quot;Could not detect remote target type. Force the type using data-type=\&quot;image|youtube|vimeo\&quot;&quot;);
     }
   },
   updateTitleAndFooter: function() {
     var caption, footer, header, title;
     header = this.modal_content.find('.modal-header');
     footer = this.modal_content.find('.modal-footer');
     title = this.$element.data('title') || &quot;&quot;;
     caption = this.$element.data('footer') || &quot;&quot;;
     if (title || this.options.always_show_close) {
       header.css('display', <I>).find('.modal-title').html(title || &quot; &quot;);</I>
     } else {
       header.css('display', 'none');
     }
     if (caption) {
       footer.css('display', <I>).html(caption);</I>
     } else {
       footer.css('display', 'none');
     }
     return this;
   },
   showLoading: function() {
</PRE>
      this.lightbox_body.html('<DIV class="modal-loading">Loading..</DIV>');
<PRE>     return this;
   },
   showYoutubeVideo: function(id) {
     var aspectRatio, height, width;
     aspectRatio = 560 / 315;
     width = this.$element.data('width') || 560;
     width = this.checkDimensions(width);
     height = width / aspectRatio;
     this.resize(width);
     this.lightbox_body.html('&lt;iframe width=&quot;' + width + '&quot; height=&quot;' + height + '&quot; src=&quot;//www.youtube.com/embed/' + id + '?badge=0&amp;autoplay=1&amp;html5=1&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;');
     if (this.modal_arrows) {
       return this.modal_arrows.css('display', 'none');
     }
   },
   showVimeoVideo: function(id) {
     var aspectRatio, height, width;
     aspectRatio = 500 / 281;
     width = this.$element.data('width') || 560;
     width = this.checkDimensions(width);
     height = width / aspectRatio;
     this.resize(width);
     this.lightbox_body.html('&lt;iframe width=&quot;' + width + '&quot; height=&quot;' + height + '&quot; src=&quot;' + id + '?autoplay=1&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;');
     if (this.modal_arrows) {
       return this.modal_arrows.css('display', 'none');
     }
   },
   showInstagramVideo: function(id) {
     var height, width;
     width = this.$element.data('width') || 612;
     width = this.checkDimensions(width);
     height = width;
     this.resize(width);
     this.lightbox_body.html('&lt;iframe width=&quot;' + width + '&quot; height=&quot;' + height + '&quot; src=&quot;' + this.addTrailingSlash(id) + 'embed/&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;');
     if (this.modal_arrows) {
       return this.modal_arrows.css('display', 'none');
     }
   },
   error: function(message) {
     this.lightbox_body.html(message);
     return this;
   },
   preloadImage: function(src, onLoadShowImage) {
     var img,
       _this = this;
     img = new Image();
     if ((onLoadShowImage == null) || onLoadShowImage === true) {
       img.onload = function() {
         var image;
         image = $('&lt;img /&gt;');
         image.attr('src', img.src);
         image.addClass('img-responsive');
         _this.lightbox_body.html(image);
         if (_this.modal_arrows) {
           _this.modal_arrows.css('display', 'block');
         }
         return _this.resize(img.width);
       };
       img.onerror = function() {
         return _this.error('Failed to load image: ' + src);
       };
     }
     img.src = src;
     return img;
   },
   resize: function(width) {
     var width_total;
     width_total = width + this.border.left + this.padding.left + this.padding.right + this.border.right;
     this.modal_dialog.css('width', 'auto').css('max-width', width_total);
     this.lightbox_container.find('a').css('padding-top', function() {
       return $(this).parent().height() / 2;
     });
     return this;
   },
   checkDimensions: function(width) {
     var body_width, width_total;
     width_total = width + this.border.left + this.padding.left + this.padding.right + this.border.right;
     body_width = document.body.clientWidth;
     if (width_total &gt; body_width) {
       width = this.modal_body.width();
     }
     return width;
   },
   close: function() {
     return this.modal.modal('hide');
   },
   addTrailingSlash: function(url) {
     if (url.substr(-1) !== '/') {
       url += '/';
     }
     return url;
   }
 };
</PRE><PRE> $.fn.ekkoLightbox = function(options) {
   return this.each(function() {
     var $this;
     $this = $(this);
     options = $.extend({
       remote: $this.attr('data-remote') || $this.attr('href'),
       gallery_parent_selector: $this.attr('data-parent'),
       type: $this.attr('data-type')
     }, options, $this.data());
     new EkkoLightbox(this, options);
     return this;
   });
 };
</PRE><PRE> $.fn.ekkoLightbox.defaults = {
   gallery_parent_selector: '*:not(.row)',
   left_arrow_class: '.glyphicon .glyphicon-chevron-left',
   right_arrow_class: '.glyphicon .glyphicon-chevron-right',
   directional_arrows: true,
   type: null,
   always_show_close: true,
   onShow: function() {},
   onShown: function() {},
   onHide: function() {},
   onHidden: function() {},
   onNavigate: function() {}
 };
</PRE><P>}).call(this);
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2014.igem.org/Team:Cornell/script/lightbox">http://2014.igem.org/Team:Cornell/script/lightbox</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:Cornell/script/lightbox" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:Cornell/script/lightbox" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:Cornell/script/lightbox&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:Cornell/script/lightbox&amp;oldid=189031" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2014.igem.org:Privacy_policy" title="2014.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2014.igem.org:General_disclaimer" title="2014.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>