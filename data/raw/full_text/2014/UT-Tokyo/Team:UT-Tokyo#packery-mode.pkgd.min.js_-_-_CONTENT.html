<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_UT-Tokyo_packery-mode_pkgd_min_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:UT-Tokyo/packery-mode.pkgd.min.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:UT-Tokyo/packery-mode.pkgd.min.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:UT-Tokyo/packery-mode.pkgd.min.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:UT-Tokyo/packery-mode.pkgd.min.js&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:UT-Tokyo/packery-mode.pkgd.min.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform">Â </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:UT-Tokyo/packery-mode.pkgd.min.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2014.igem.org</H3><P>/*!
</P><PRE>* Packery layout mode PACKAGED v0.1.0
* sub-classes Packery
* <A href="http://packery.metafizzy.co" class="external free" rel="nofollow">http://packery.metafizzy.co</A>
*/
</PRE><P>!function(a){function b(a){return new RegExp(&quot;(^|\\s+)&quot;+a+&quot;(\\s+|$)&quot;)}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;&quot;classList&quot;in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+&quot; &quot;+b)},f=function(a,c){a.className=a.className.replace(b(c),&quot; &quot;)});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};&quot;function&quot;==typeof define&amp;&amp;define.amd?define(&quot;classie/classie&quot;,g):&quot;object&quot;==typeof exports?module.exports=g:a.classie=g}(window),function(a){function b(){function a(b){for(var c in a.defaults)this[c]=a.defaults[c];for(c in b)this[c]=b[c]}return c.Rect=a,a.defaults={x:0,y:0,width:0,height:0},a.prototype.contains=function(a){var b=a.width||0,c=a.height||0;return this.x&lt;=a.x&amp;&amp;this.y&lt;=a.y&amp;&amp;this.x+this.width&gt;=a.x+b&amp;&amp;this.y+this.height&gt;=a.y+c},a.prototype.overlaps=function(a){var b=this.x+this.width,c=this.y+this.height,d=a.x+a.width,e=a.y+a.height;return this.x&lt;d&amp;&amp;b&gt;a.x&amp;&amp;this.y&lt;e&amp;&amp;c&gt;a.y},a.prototype.getMaximalFreeRects=function(b){if(!this.overlaps(b))return!1;var c,d=[],e=this.x+this.width,f=this.y+this.height,g=b.x+b.width,h=b.y+b.height;return this.y<B>g&amp;&amp;(c=new a({x:g,y:this.y,width:e-g,height:this.height}),d.push(c)),f&gt;h&amp;&amp;(c=new a({x:this.x,y:h,width:this.width,height:f-h}),d.push(c)),this.x&lt;b.x&amp;&amp;(c=new a({x:this.x,y:this.y,width:b.x-this.x,height:this.height}),d.push(c)),d},a.prototype.canFit=function(a){return this.width&gt;=a.width&amp;&amp;this.height&gt;=a.height},a}var c=a.Packery=function(){};&quot;function&quot;==typeof define&amp;&amp;define.amd?define(&quot;packery/js/rect&quot;,b):(a.Packery=a.Packery||{},a.Packery.Rect=b())}(window),function(a){function b(a){function b(a,b,c){this.width=a||0,this.height=b||0,this.sortDirection=c||&quot;downwardLeftToRight&quot;,this.reset()}b.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var b=new a({x:0,y:0,width:this.width,height:this.height});this.spaces.push(b),this.sorter=c[this.sortDirection]||c.downwardLeftToRight},b.prototype.pack=function(a){for(var b=0,c=this.spaces.length;c&gt;b;b++){var d=this.spaces[b];if(d.canFit(a)){this.placeInSpace(a,d);break}}},b.prototype.placeInSpace=function(a,b){a.x=b.x,a.y=b.y,this.placed(a)},b.prototype.placed=function(a){for(var c=[],d=0,e=this.spaces.length;e&gt;d;d++){var f=this.spaces[d],g=f.getMaximalFreeRects(a);g?c.push.apply(c,g):c.push(f)}this.spaces=c,b.mergeRects(this.spaces),this.spaces.sort(this.sorter)},b.mergeRects=function(a){for(var b=0,c=a.length;c&gt;b;b++){var d=a[b];if(d){var e=a.slice(0);e.splice(b,1);for(var f=0,g=0,h=e.length;h&gt;g;g++){var i=e[g],j=b&gt;g?0:1;d.contains(i)&amp;&amp;(a.splice(g+j-f,1),f++)}}}return a};var c={downwardLeftToRight:function(a,b){return a.y-b.y||a.x-b.x},rightwardTopToBottom:function(a,b){return a.x-b.x||a.y-b.y}};return b}if(&quot;function&quot;==typeof define&amp;&amp;define.amd)define(&quot;packery/js/packer&quot;,[&quot;./rect&quot;],b);else{var c=a.Packery=a.Packery||{};c.Packer=b(c.Rect)}}(window),function(a){function b(a,b,c){var d=a(&quot;transform&quot;),e=function(){b.Item.apply(this,arguments)};e.prototype=new b.Item;var f=e.prototype._create;return e.prototype._create=function(){f.call(this),this.rect=new c,this.placeRect=new c},e.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&amp;&amp;d&amp;&amp;(this.element.style[d]=&quot;none&quot;),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},e.prototype.dragMove=function(a,b){this.didDrag=!0;var c=this.layout.size;a-=c.paddingLeft,b-=c.paddingTop,this.positionPlaceRect(a,b)},e.prototype.dragStop=function(){this.getPosition();var a=this.position.x!==this.placeRect.x,b=this.position.y!==this.placeRect.y;this.needsPositioning=a||b,this.didDrag=!1},e.prototype.positionPlaceRect=function(a,b,c){this.placeRect.x=this.getPlaceRectCoord(a,!0),this.placeRect.y=this.getPlaceRectCoord(b,!1,c)},e.prototype.getPlaceRectCoord=function(a,b,c){var d=b?&quot;Width&quot;:&quot;Height&quot;,e=this.size[&quot;outer&quot;+d],f=this.layout[b?&quot;columnWidth&quot;:&quot;rowHeight&quot;],g=this.layout.size[&quot;inner&quot;+d];b||(g=Math.max(g,this.layout.maxY),this.layout.rowHeight||(g-=this.layout.gutter));var h;if(f){f+=this.layout.gutter,g+=b?this.layout.gutter:0,a=Math.round(a/f);var i;i=this.layout.options.isHorizontal?b?&quot;ceil&quot;:&quot;floor&quot;:b?&quot;floor&quot;:&quot;ceil&quot;;var j=Math[i](g/f);j-=Math.ceil(e/f),h=j}else h=g-e;return a=c?a:Math.min(a,h),a*=f||1,Math.max(0,a)},e.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},e}&quot;function&quot;==typeof define&amp;&amp;define.amd?define(&quot;packery/js/item&quot;,[&quot;get-style-property/get-style-property&quot;,&quot;outlayer/outlayer&quot;,&quot;./rect&quot;],b):a.Packery.Item=b(a.getStyleProperty,a.Outlayer,a.Packery.Rect)}(window),function(a){function b(a,b,c,d,e,f){function g(a,b){return a.position.y-b.position.y||a.position.x-b.position.x}function h(a,b){return a.position.x-b.position.x||a.position.y-b.position.y}var i=c.create(&quot;packery&quot;);return i.Item=f,i.prototype._create=function(){c.prototype._create.call(this),this.packer=new e,this.stamp(this.options.stamped);var a=this;this.handleDraggabilly={dragStart:function(b){a.itemDragStart(b.element)},dragMove:function(b){a.itemDragMove(b.element,b.position.x,b.position.y)},dragEnd:function(b){a.itemDragEnd(b.element)}},this.handleUIDraggable={start:function(b){a.itemDragStart(b.currentTarget)},drag:function(b,c){a.itemDragMove(b.currentTarget,c.position.left,c.position.top)},stop:function(b){a.itemDragEnd(b.currentTarget)}}},i.prototype._resetLayout=function(){this.getSize(),this._getMeasurements();var a=this.packer;this.options.isHorizontal?(a.width=Number.POSITIVE_INFINITY,a.height=this.size.innerHeight+this.gutter,a.sortDirection=&quot;rightwardTopToBottom&quot;):(a.width=this.size.innerWidth+this.gutter,a.height=Number.POSITIVE_INFINITY,a.sortDirection=&quot;downwardLeftToRight&quot;),a.reset(),this.maxY=0,this.maxX=0},i.prototype._getMeasurements=function(){this._getMeasurement(&quot;columnWidth&quot;,&quot;width&quot;),this._getMeasurement(&quot;rowHeight&quot;,&quot;height&quot;),this._getMeasurement(&quot;gutter&quot;,&quot;width&quot;)},i.prototype._getItemLayoutPosition=function(a){return this._packItem(a),a.rect},i.prototype._packItem=function(a){this._setRectSize(a.element,a.rect),this.packer.pack(a.rect),this._setMaxXY(a.rect)},i.prototype._setMaxXY=function(a){this.maxX=Math.max(a.x+a.width,this.maxX),this.maxY=Math.max(a.y+a.height,this.maxY)},i.prototype._setRectSize=function(a,c){var d=b(a),e=d.outerWidth,f=d.outerHeight,g=this.columnWidth+this.gutter,h=this.rowHeight+this.gutter;e=this.columnWidth?Math.ceil(e/g)*g:e+this.gutter,f=this.rowHeight?Math.ceil(f/h)*h:f+this.gutter,c.width=Math.min(e,this.packer.width),c.height=Math.min(f,this.packer.height)},i.prototype._getContainerSize=function(){return this.options.isHorizontal?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},i.prototype._manageStamp=function(a){var b,c=this.getItem(a);if(c&amp;&amp;c.isPlacing)b=c.placeRect;else{var e=this._getElementOffset(a);b=new d({x:this.options.isOriginLeft?e.left:e.right,y:this.options.isOriginTop?e.top:e.bottom})}this._setRectSize(a,b),this.packer.placed(b),this._setMaxXY(b)},i.prototype.sortItemsByPosition=function(){var a=this.options.isHorizontal?h:g;this.items.sort(a)},i.prototype.fit=function(a,b,c){var d=this.getItem(a);d&amp;&amp;(this._getMeasurements(),this.stamp(d.element),d.getSize(),d.isPlacing=!0,b=void 0===b?d.rect.x:b,c=void 0===c?d.rect.y:c,d.positionPlaceRect(b,c,!0),this._bindFitEvents(d),d.moveTo(d.placeRect.x,d.placeRect.y),this.layout(),this.unstamp(d.element),this.sortItemsByPosition(),d.isPlacing=!1,d.copyPlaceRectPosition())},i.prototype._bindFitEvents=function(a){function b(){d++,2===d&amp;&amp;c.emitEvent(&quot;fitComplete&quot;,[c,a])}var c=this,d=0;a.on(&quot;layout&quot;,function(){return b(),!0}),this.on(&quot;layoutComplete&quot;,function(){return b(),!0})},i.prototype.resize=function(){var a=b(this.element),c=this.size&amp;&amp;a,d=this.options.isHorizontal?&quot;innerHeight&quot;:&quot;innerWidth&quot;;c&amp;&amp;a[d]===this.size[d]||this.layout()},i.prototype.itemDragStart=function(a){this.stamp(a);var b=this.getItem(a);b&amp;&amp;b.dragStart()},i.prototype.itemDragMove=function(a,b,c){function d(){f.layout(),delete f.dragTimeout}var e=this.getItem(a);e&amp;&amp;e.dragMove(b,c);var f=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(d,40)},i.prototype.clearDragTimeout=function(){this.dragTimeout&amp;&amp;clearTimeout(this.dragTimeout)},i.prototype.itemDragEnd=function(b){var c,d=this.getItem(b);if(d&amp;&amp;(c=d.didDrag,d.dragStop()),!d||!c&amp;&amp;!d.needsPositioning)return void this.unstamp(b);a.add(d.element,&quot;is-positioning-post-drag&quot;);var e=this._getDragEndLayoutComplete(b,d);d.needsPositioning?(d.on(&quot;layout&quot;,e),d.moveTo(d.placeRect.x,d.placeRect.y)):d&amp;&amp;d.copyPlaceRectPosition(),this.clearDragTimeout(),this.on(&quot;layoutComplete&quot;,e),this.layout()},i.prototype._getDragEndLayoutComplete=function(b,c){var d=c&amp;&amp;c.needsPositioning,e=0,f=d?2:1,g=this;return function(){return e++,e!==f?!0:(c&amp;&amp;(a.remove(c.element,&quot;is-positioning-post-drag&quot;),c.isPlacing=!1,c.copyPlaceRectPosition()),g.unstamp(b),g.sortItemsByPosition(),d&amp;&amp;g.emitEvent(&quot;dragItemPositioned&quot;,[g,c]),!0)}},i.prototype.bindDraggabillyEvents=function(a){a.on(&quot;dragStart&quot;,this.handleDraggabilly.dragStart),a.on(&quot;dragMove&quot;,this.handleDraggabilly.dragMove),a.on(&quot;dragEnd&quot;,this.handleDraggabilly.dragEnd)},i.prototype.bindUIDraggableEvents=function(a){a.on(&quot;dragstart&quot;,this.handleUIDraggable.start).on(&quot;drag&quot;,this.handleUIDraggable.drag).on(&quot;dragstop&quot;,this.handleUIDraggable.stop)},i.Rect=d,i.Packer=e,i}&quot;function&quot;==typeof define&amp;&amp;define.amd?define(&quot;packery/js/packery&quot;,[&quot;classie/classie&quot;,&quot;get-size/get-size&quot;,&quot;outlayer/outlayer&quot;,&quot;./rect&quot;,&quot;./packer&quot;,&quot;./item&quot;],b):a.Packery=b(a.classie,a.getSize,a.Outlayer,a.Packery.Rect,a.Packery.Packer,a.Packery.Item)}(window),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a,c,d){var e=a.create(&quot;packery&quot;),f=e.prototype._getElementOffset,g=e.prototype._getMeasurement;b(e.prototype,c.prototype),e.prototype._getElementOffset=f,e.prototype._getMeasurement=g;var h=e.prototype._resetLayout;e.prototype._resetLayout=function(){this.packer=this.packer||new c.Packer,h.apply(this,arguments)};var i=e.prototype._getItemLayoutPosition;e.prototype._getItemLayoutPosition=function(a){return a.rect=a.rect||new c.Rect,i.call(this,a)};var j=e.prototype._manageStamp;return e.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,j.apply(this,arguments)},e.prototype.needsResizeLayout=function(){var a=d(this.element),b=this.size&amp;&amp;a,c=this.options.isHorizontal?&quot;innerHeight&quot;:&quot;innerWidth&quot;;return b&amp;&amp;a[c]!==this.size[c]},e}&quot;function&quot;==typeof define&amp;&amp;define.amd?define([&quot;isotope/js/layout-mode&quot;,&quot;packery/js/packery&quot;,&quot;get-size/get-size&quot;],c):c(a.Isotope.LayoutMode,a.Packery,a.getSize)}(window);</B></P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2014.igem.org/Team:UT-Tokyo/packery-mode.pkgd.min.js">http://2014.igem.org/Team:UT-Tokyo/packery-mode.pkgd.min.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:UT-Tokyo/packery-mode.pkgd.min.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:UT-Tokyo/packery-mode.pkgd.min.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:UT-Tokyo/packery-mode.pkgd.min.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:UT-Tokyo/packery-mode.pkgd.min.js&amp;oldid=160252" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2014.igem.org:Privacy_policy" title="2014.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2014.igem.org:General_disclaimer" title="2014.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>