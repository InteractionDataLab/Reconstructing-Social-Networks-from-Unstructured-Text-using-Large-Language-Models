<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_DTU-Denmark_dhtmlx_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:DTU-Denmark/dhtmlx.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:DTU-Denmark/dhtmlx.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:DTU-Denmark/dhtmlx.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:DTU-Denmark/dhtmlx.js&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:DTU-Denmark/dhtmlx.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:DTU-Denmark/dhtmlx.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2014.igem.org</H3>
			if(typeof(window.dhx4)==&quot;undefined&quot;){window.dhx4={version:&quot;4.0&quot;,skin:null,skinDetect:function(c){var g=document.createElement(&quot;DIV&quot;);g.className=c+&quot;_skin_detect&quot;;if(document.body.firstChild){document.body.insertBefore(g,document.body.firstChild)}else{document.body.appendChild(g)}var a=g.offsetWidth;g.parentNode.removeChild(g);g=null;return{10:&quot;dhx_skyblue&quot;,20:&quot;dhx_web&quot;,30:&quot;dhx_terrace&quot;}[a]||null},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var g=this.first();for(var c in this.data){g=Math.max(g,this.data[c])}return g},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){return(a==true||a==1||a==&quot;true&quot;||a==&quot;1&quot;||a==&quot;yes&quot;||a==&quot;y&quot;)},trim:function(a){return String(a).replace(/^\s{1,}/,&quot;&quot;).replace(/\s{1,}$/,&quot;&quot;)},template:function(c,g,a){return c.replace(/#([a-zA-Z0-9_-]{1,})#/g,function(l,h){if(h.length&gt;0&amp;&amp;typeof(g[h])!=&quot;undefined&quot;){if(a==true){return window.dhx4.trim(g[h])}return String(g[h])}return &quot;&quot;})},absLeft:function(a){if(typeof(a)==&quot;string&quot;){a=document.getElementById(a)}return this._aOfs(a).left},absTop:function(a){if(typeof(a)==&quot;string&quot;){a=document.getElementById(a)}return this._aOfs(a).top},_aOfsSum:function(a){var g=0,c=0;while(a){g=g+parseInt(a.offsetTop);c=c+parseInt(a.offsetLeft);a=a.offsetParent}return{top:g,left:c}},_aOfsRect:function(h){var n=h.getBoundingClientRect();var o=document.body;var c=document.documentElement;var a=window.pageYOffset||c.scrollTop||o.scrollTop;var l=window.pageXOffset||c.scrollLeft||o.scrollLeft;var m=c.clientTop||o.clientTop||0;var q=c.clientLeft||o.clientLeft||0;var r=n.top+a-m;var g=n.left+l-q;return{top:Math.round(r),left:Math.round(g)}},_aOfs:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfsSum(a)}},_isObj:function(a){return(a!=null&amp;&amp;typeof(a)==&quot;object&quot;&amp;&amp;typeof(a.length)==&quot;undefined&quot;)},_copyObj:function(h){if(this._isObj(h)){var g={};for(var c in h){if(typeof(h[c])==&quot;object&quot;&amp;&amp;h[c]!=null){g[c]=this._copyObj(h[c])}else{g[c]=h[c]}}}else{var g=[];for(var c=0;c&lt;h.length;c++){if(typeof(h[c])==&quot;object&quot;&amp;&amp;h[c]!=null){g[c]=this._copyObj(h[c])}else{g[c]=h[c]}}}return g},screenDim:function(){var a=(navigator.userAgent.indexOf(&quot;MSIE&quot;)&gt;=0);var c={};c.left=document.body.scrollLeft;c.right=c.left+(window.innerWidth||document.body.clientWidth);c.top=Math.max((a?document.documentElement:document.getElementsByTagName(&quot;html&quot;)[0]).scrollTop,document.body.scrollTop);c.bottom=c.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return c},selectTextRange:function(h,m,c){h=(typeof(h)==&quot;string&quot;?document.getElementById(h):h);var a=h.value.length;m=Math.max(Math.min(m,a),0);c=Math.min(c,a);if(h.setSelectionRange){h.setSelectionRange(m,c)}else{if(h.createTextRange){var g=h.createTextRange();g.moveStart(&quot;character&quot;,m);g.moveEnd(&quot;character&quot;,c-a);try{g.select()}catch(l){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var g={MozTransition:&quot;transitionend&quot;,WebkitTransition:&quot;webkitTransitionEnd&quot;,OTransition:&quot;oTransitionEnd&quot;,msTransition:&quot;transitionend&quot;,transition:&quot;transitionend&quot;};for(var c in g){if(this.transData.transProp==false&amp;&amp;document.documentElement.style[c]!=null){this.transData.transProp=c;this.transData.transEv=g[c]}}g=null}return this.transData}};window.dhx4.isIE=(navigator.userAgent.indexOf(&quot;MSIE&quot;)&gt;=0||navigator.userAgent.indexOf(&quot;Trident&quot;)&gt;=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&amp;&amp;navigator.userAgent.indexOf(&quot;MSIE&quot;)&gt;=0);window.dhx4.isOpera=(navigator.userAgent.indexOf(&quot;Opera&quot;)&gt;=0);window.dhx4.isChrome=(navigator.userAgent.indexOf(&quot;Chrome&quot;)&gt;=0);window.dhx4.isKHTML=(navigator.userAgent.indexOf(&quot;Safari&quot;)&gt;=0||navigator.userAgent.indexOf(&quot;Konqueror&quot;)&gt;=0);window.dhx4.isFF=(navigator.userAgent.indexOf(&quot;Firefox&quot;)&gt;=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)&gt;=0)}if(typeof(window.dhx4.ajax)==&quot;undefined&quot;){window.dhx4.ajax={get:function(a,c){this._call(&quot;GET&quot;,a,null,true,c)},getSync:function(a){return this._call(&quot;GET&quot;,a,null,false)},post:function(c,a,g){if(arguments.length==1){a=&quot;&quot;}else{if(arguments.length==2&amp;&amp;(typeof(a)==&quot;function&quot;||typeof(window[a])==&quot;function&quot;)){g=a;a=&quot;&quot;}else{a=String(a)}}this._call(&quot;POST&quot;,c,a,true,g)},postSync:function(c,a){a=(a==null?&quot;&quot;:String(a));return this._call(&quot;POST&quot;,c,a,false)},getLong:function(a,c){this._call(&quot;GET&quot;,a,null,true,c,{url:a})},postLong:function(c,a,g){if(arguments.length==2&amp;&amp;(typeof(a)==&quot;function&quot;||typeof(window[a]))){g=a;a=&quot;&quot;}this._call(&quot;POST&quot;,c,a,true,g,{url:c,postData:a})},_call:function(n,c,a,m,l,h){var g=(window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;));if(m==true){g.onreadystatechange=function(){if(g.readyState==4&amp;&amp;g.status==200){if(typeof(l)==&quot;function&quot;){l.apply(window,[{ai:g}])}if(h!=null){if(typeof(h.postData)!=&quot;undefined&quot;){dhx4.ajax.postLong(h.url,h.postData,l)}else{dhx4.ajax.getLong(h.url,l)}}l=null;g=null}}}if(n==&quot;GET&quot;){c+=(c.indexOf(&quot;?&quot;)&gt;=0?&quot;&amp;&quot;:&quot;?&quot;)+&quot;dhxr&quot;+new Date().getTime()}g.open(n,c,m);if(n==&quot;POST&quot;){g.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;);a+=(a.length&gt;0?&quot;&amp;&quot;:&quot;&quot;)+&quot;dhxr&quot;+new Date().getTime()}else{a=null}g.setRequestHeader(&quot;X-Requested-With&quot;,&quot;XMLHttpRequest&quot;);g.send(a);if(!m){return{ai:g}}}}}if(typeof(window.dhx4._enableDataLoading)==&quot;undefined&quot;){window.dhx4._enableDataLoading=function(obj,initObj,xmlToJson,xmlRootTag,mode){if(mode==&quot;clear&quot;){for(var a in obj._dhxdataload){obj._dhxdataload[a]=null;delete obj._dhxdataload[a]}obj._loadData=null;obj._dhxdataload=null;obj.load=null;obj.loadStruct=null;obj=null;return}obj._dhxdataload={initObj:initObj,xmlToJson:xmlToJson,xmlRootTag:xmlRootTag,onBeforeXLS:null};obj._loadData=function(data,loadParams,onLoad){if(arguments.length==2){onLoad=loadParams;loadParams=null}var obj=null;if(arguments.length==3){onLoad=arguments[2]}if(typeof(data)==&quot;string&quot;){var k=data.replace(/^\s{1,}/,&quot;&quot;).replace(/\s{1,}$/,&quot;&quot;);var tag=new RegExp(&quot;^&lt;&quot;+this._dhxdataload.xmlRootTag);if(tag.test(k)){if(window.DOMParser){obj=(new window.DOMParser()).parseFromString(data,&quot;text/xml&quot;)}else{if(typeof(window.ActiveXObject)!=&quot;undefined&quot;){obj=new window.ActiveXObject(&quot;Microsoft.XMLDOM&quot;);obj.async=&quot;false&quot;;obj.loadXML(data)}}if(obj!=null){obj=this[this._dhxdataload.xmlToJson].apply(this,[obj])}}if(obj==null&amp;&amp;(k.match(/^\{.*\}$/)!=null||k.match(/^\[.*\]$/)!=null)){try{eval(&quot;dhx4.temp=&quot;+k)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null}if(obj==null){this.callEvent(&quot;onXLS&quot;,[]);var params=[];if(typeof(this._dhxdataload.onBeforeXLS)==&quot;function&quot;){var k=this._dhxdataload.onBeforeXLS.apply(this,[data]);if(k!=null&amp;&amp;typeof(k)==&quot;object&quot;){if(k.url!=null){data=k.url}if(k.params!=null){for(var a in k.params){params.push(a+&quot;=&quot;+encodeURIComponent(k.params[a]))}}}}var t=this;dhx4.ajax.post(data,params.join(&quot;&amp;&quot;)+(typeof(loadParams)==&quot;string&quot;?&quot;&amp;&quot;+loadParams:&quot;&quot;),function(r){var obj=null;if(r.ai.getResponseHeader(&quot;Content-Type&quot;).search(/xml/gi)&gt;=0||(r.ai.responseText.replace(/^\s{1,}/,&quot;&quot;)).match(/^&lt;/)!=null){obj=t[t._dhxdataload.xmlToJson].apply(t,[r.ai.responseXML])}else{try{eval(&quot;dhx4.temp=&quot;+r.ai.responseText)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null}if(obj!=null){t[t._dhxdataload.initObj].apply(t,[obj,data])}t.callEvent(&quot;onXLE&quot;,[]);if(onLoad!=null){if(typeof(onLoad)==&quot;function&quot;){onLoad.apply(t,[])}else{if(typeof(window[onLoad])==&quot;function&quot;){window[onLoad].apply(t,[])}}}onLoad=null;t=null});return}}else{if(typeof(data.documentElement)==&quot;object&quot;||(typeof(data.tagName)!=&quot;undefined&quot;&amp;&amp;typeof(data.getElementsByTagName)!=&quot;undefined&quot;&amp;&amp;data.getElementsByTagName(this._dhxdataload.xmlRootTag).length&gt;0)){obj=this[this._dhxdataload.xmlToJson].apply(this,[data])}else{obj=window.dhx4._copyObj(data)}}if(obj!=null){this[this._dhxdataload.initObj].apply(this,[obj])}if(onLoad!=null){if(typeof(onLoad)==&quot;function&quot;){onLoad.apply(this,[])}else{if(typeof(window[onLoad])==&quot;function&quot;){window[onLoad].apply(this,[])}}onLoad=null}};if(mode!=null){var k={struct:&quot;loadStruct&quot;,data:&quot;load&quot;};for(var a in mode){if(mode[a]==true){obj[k[a]]=function(){return this._loadData.apply(this,arguments)}}}}obj=null}}if(typeof(window.dhx4._eventable)==&quot;undefined&quot;){window.dhx4._eventable=function(a,c){if(c==&quot;clear&quot;){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.mR=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(g,l){g=String(g).toLowerCase();if(!this.dhxevs.data[g]){this.dhxevs.data[g]={}}var h=window.dhx4.newId();this.dhxevs.data[g][h]=l;return h};a.detachEvent=function(m){for(var h in this.dhxevs.data){var l=0;for(var g in this.dhxevs.data[h]){if(g==m){this.dhxevs.data[h][g]=null;delete this.dhxevs.data[h][g]}else{l++}}if(l==0){this.dhxevs.data[h]=null;delete this.dhxevs.data[h]}}};a.mR=function(g){g=String(g).toLowerCase();return(this.dhxevs.data[g]!=null)};a.callEvent=function(h,m){h=String(h).toLowerCase();if(this.dhxevs.data[h]==null){return true}var l=true;for(var g in this.dhxevs.data[h]){l=this.dhxevs.data[h][g].apply(this,m)&amp;&amp;l}return l};a.detachAllEvents=function(){for(var h in this.dhxevs.data){for(var g in this.dhxevs.data[h]){this.dhxevs.data[h][g]=null;delete this.dhxevs.data[h][g]}this.dhxevs.data[h]=null;delete this.dhxevs.data[h]}};a=null}}dhtmlx=function(g){for(var c in g){dhtmlx[c]=g[c]}return dhtmlx};dhtmlx.extend_api=function(a,h,g){var c=window[a];if(!c){return}window[a]=function(n){if(n&amp;&amp;typeof n==&quot;object&quot;&amp;&amp; !n.tagName){var m=c.apply(this,(h.ahY?h.ahY(n):arguments));for(var l in dhtmlx){if(h[l]){this[h[l]](dhtmlx[l])}}for(var l in n){if(h[l]){this[h[l]](n[l])}else{if(l.indexOf(&quot;on&quot;)==0){this.attachEvent(l,n[l])}}}}else{var m=c.apply(this,arguments)}if(h._patch){h._patch(this)}return m||this};window[a].prototype=c.prototype;if(g){dhtmlXHeir(window[a].prototype,g)}};dhtmlxAjax={get:function(a,g){var c=new ag(true);c.async=(arguments.length&lt;3);c.aA=g;c.loadXML(a);return c},post:function(a,g,h){var c=new ag(true);c.async=(arguments.length&lt;4);c.aA=h;c.loadXML(a,true,g);return c},getSync:function(a){return this.get(a,null,true)},postSync:function(a,c){return this.post(a,c,null,true)}};function ag(c,h,g,a){this.ai=&quot;&quot;;if(typeof(g)!=&quot;undefined&quot;){this.async=g}else{this.async=true}this.UR=c||null;this.cT=h||null;this.aA=null;this.hN=a||false;return this}ag.count=0;ag.prototype.cz=function(c){var a=true;this.check=function(){if((c)&amp;&amp;(c.UR!=null)){if((!c.ai.readyState)||(c.ai.readyState==4)){if(!a){return}a=false;ag.count++;if(typeof c.UR==&quot;function&quot;){c.UR(c.cT,null,null,null,c)}if(c.aA){c.aA.call(this,c);c.aA=null}}}};return this.check};ag.prototype.cR=function(g,a){if(typeof this.ai.status==&quot;undefined&quot;||this.ai.status&lt;400){if(this.ai.responseXML){var c=this.ai.responseXML.getElementsByTagName(g);if(c.length==0&amp;&amp;g.indexOf(&quot;:&quot;)!= -1){var c=this.ai.responseXML.getElementsByTagName((g.split(&quot;:&quot;))[1])}var h=c[0]}else{var h=this.ai.documentElement}if(h){this.jV=false;return h}if(!this.jV&amp;&amp;_isIE){this.jV=true;var a=this.ai;this.loadXMLString(this.ai.responseText.replace(/^[\s]+/,&quot;&quot;),true);return this.cR(g,a)}}dhtmlxError.gn(&quot;LoadXML&quot;,&quot;Incorrect XML&quot;,[(a||this.ai),this.cT]);return document.createElement(&quot;DIV&quot;)};ag.prototype.loadXMLString=function(c,a){if(!_isIE){var g=new DOMParser();this.ai=g.parseFromString(c,&quot;text/xml&quot;)}else{this.ai=new ActiveXObject(&quot;Microsoft.XMLDOM&quot;);this.ai.async=this.async;this.ai.onreadystatechange=function(){};this.ai.loadXML(c)}if(a){return}if(this.UR){this.UR(this.cT,null,null,null,this)}if(this.aA){this.aA();this.aA=null}};ag.prototype.loadXML=function(g,c,a,h){if(this.hN){g+=((g.indexOf(&quot;?&quot;)!= -1)?&quot;&amp;&quot;:&quot;?&quot;)+&quot;a_dhx_rSeed=&quot;+(new Date()).valueOf()}this.bU=g;if((!_isIE)&amp;&amp;(window.XMLHttpRequest)){this.ai=new XMLHttpRequest()}else{this.ai=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)}if(this.async){this.ai.onreadystatechange=new this.cz(this)}this.ai.open(c?&quot;POST&quot;:&quot;GET&quot;,g,this.async);if(h){this.ai.setRequestHeader(&quot;User-Agent&quot;,&quot;dhtmlxRPC v0.1 (&quot;+navigator.userAgent+&quot;)&quot;);this.ai.setRequestHeader(&quot;Content-type&quot;,&quot;text/xml&quot;)}else{if(c){this.ai.setRequestHeader(&quot;Content-type&quot;,(this.contenttype||&quot;application/x-www-form-urlencoded&quot;))}}this.ai.setRequestHeader(&quot;X-Requested-With&quot;,&quot;XMLHttpRequest&quot;);this.ai.send(null||a);if(!this.async){(new this.cz(this))()}};ag.prototype.fA=function(){this.hj=null;this.eo=null;this.jV=null;this.async=null;this.hN=null;this.bU=null;this.UR=null;this.cT=null;this.ai=null;this.et=null;this.hi=null;this.doXSLTransToObject=null;this.doXSLTransToString=null;this.loadXML=null;this.loadXMLString=null;this.doSerialization=null;this.xmlNodeToJSON=null;this.cR=null;this.setXSLParamValue=null;return null};ag.prototype.xmlNodeToJSON=function(h){var g={};for(var c=0;c&lt;h.attributes.length;c++){g[h.attributes[c].name]=h.attributes[c].value}g._tagvalue=h.firstChild?h.firstChild.nodeValue:&quot;&quot;;for(var c=0;c&lt;h.childNodes.length;c++){var a=h.childNodes[c].tagName;if(a){if(!g[a]){g[a]=[]}g[a].push(this.xmlNodeToJSON(h.childNodes[c]))}}return g};function jP(a,c){this.handler=function(g){if(!g){g=window.event}a(g,c);return true};return this.handler}function ej(a){return getOffset(a).left}function dg(a){return getOffset(a).top}function getOffsetSum(a){var g=0,c=0;while(a){g=g+parseInt(a.offsetTop);c=c+parseInt(a.offsetLeft);a=a.offsetParent}return{top:g,left:c}}function getOffsetRect(h){var n=h.getBoundingClientRect();var o=document.body;var c=document.documentElement;var a=window.pageYOffset||c.scrollTop||o.scrollTop;var l=window.pageXOffset||c.scrollLeft||o.scrollLeft;var m=c.clientTop||o.clientTop||0;var q=c.clientLeft||o.clientLeft||0;var r=n.top+a-m;var g=n.left+l-q;return{top:Math.round(r),left:Math.round(g)}}function getOffset(a){if(a.getBoundingClientRect){return getOffsetRect(a)}else{return getOffsetSum(a)}}function ap(a){if(typeof(a)==&quot;string&quot;){a=a.toLowerCase()}switch(a){case &quot;1&quot;:case &quot;true&quot;:case &quot;yes&quot;:case &quot;y&quot;:case 1:case true:return true;break;default:return false}}function jv(a){if(a.indexOf(&quot;?&quot;)!= -1){return &quot;&amp;&quot;}else{return &quot;?&quot;}}function dhtmlDragAndDropObject(){if(window.aj){return window.aj}this.aG=0;this.al=0;this.bh=0;this.aM=0;this.dG=null;this.dH=null;this.PF=0;window.aj=this;return this}dhtmlDragAndDropObject.prototype.fG=function(a){a.onmousedown=null;a.eO=null;a.aK=null};dhtmlDragAndDropObject.prototype.dS=function(a,c){a.onmousedown=this.af;a.eO=c;this.eH(a,c)};dhtmlDragAndDropObject.prototype.eH=function(a,c){a.aK=c};dhtmlDragAndDropObject.prototype.af=function(a){if((a||window.event)&amp;&amp;(a||event).button==2){return}if(window.aj.PF){window.aj.PF=0;document.body.onmouseup=window.aj.dG;document.body.onmousemove=window.aj.dH;return false}if(window.aj.al){window.aj.dc(a)}window.aj.PF=1;window.aj.dG=document.body.onmouseup;window.aj.dH=document.body.onmousemove;window.aj.bh=this;window.aj.aM=this.eO;document.body.onmouseup=window.aj.af;document.body.onmousemove=window.aj.kU;window.aj.downtime=new Date().valueOf();if((a)&amp;&amp;(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.kU=function(g){if(!g){g=window.event}ae=window.aj;if((new Date()).valueOf()-ae.downtime&lt;100){return}if(!ae.al){if(ae.PF){ae.al=ae.aM.gL(ae.bh,g);if(!ae.al){return ae.dc()}ae.al.onselectstart=function(){return false};ae.bN=ae.al;document.body.appendChild(ae.al);document.body.onmouseup=ae.dc;ae.PF=0;ae.al.aR=window;ae.bm()}else{return ae.dc(g,true)}}if(ae.al.parentNode!=window.document.body&amp;&amp;ae.bN){var a=ae.bN;if(ae.bN.old){a=ae.bN.old}a.parentNode.removeChild(a);var c=ae.al.aR;if(a.aR&amp;&amp;a.aR.aj.aG){a.aR.aj.aG.aK.iX(a.aR.aj.aG)}if(_isIE){var l=document.createElement(&quot;Div&quot;);l.innerHTML=ae.al.outerHTML;ae.al=l.childNodes[0]}else{ae.al=ae.al.cloneNode(true)}ae.al.aR=window;ae.bN.old=ae.al;document.body.appendChild(ae.al);c.aj.al=ae.al}ae.al.style.left=g.clientX+15+(ae.fx?ae.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+&quot;px&quot;;ae.al.style.top=g.clientY+3+(ae.fy?ae.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+&quot;px&quot;;if(!g.srcElement){var h=g.target}else{h=g.srcElement}ae.eq(h,g)};dhtmlDragAndDropObject.prototype.bS=function(l){if(window.name){var g=parent.frames[window.name].frameElement.offsetParent;var h=0;var c=0;while(g){h+=g.offsetLeft;c+=g.offsetTop;g=g.offsetParent}if((parent.aj)){var a=parent.aj.bS(1);h+=a.split(&quot;_&quot;)[0]*1;c+=a.split(&quot;_&quot;)[1]*1}if(l){return h+&quot;_&quot;+c}else{this.fx=h}this.fy=c}return &quot;0_0&quot;};dhtmlDragAndDropObject.prototype.eq=function(c,a){if((c)&amp;&amp;(c.aK)){if(this.aG){this.aG.aK.iX(this.aG)}this.aG=c;this.aG=this.aG.aK.tY(this.aG,this.bh,a.clientX,a.clientY,a);this.wS=(_isIE?a.srcElement:a.target)}else{if((c)&amp;&amp;(c.tagName!=&quot;BODY&quot;)){this.eq(c.parentNode,a)}else{if(this.aG){this.aG.aK.iX(this.aG,a.clientX,a.clientY,a)}this.aG=0;if(this.hq){this.hq()}}}};dhtmlDragAndDropObject.prototype.dc=function(c,g){ae=window.aj;if(!g){ae.PE();var a=ae.aG;ae.aG=null;if(a){a.aK.BK(ae.bh,ae.aM,a,(_isIE?event.srcElement:c.target))}}ae.aG=null;if((ae.al)&amp;&amp;(ae.al.parentNode==document.body)){ae.al.parentNode.removeChild(ae.al)}ae.al=0;ae.bN=0;ae.fx=0;ae.fy=0;ae.bh=0;ae.aM=0;document.body.onmouseup=ae.dG;document.body.onmousemove=ae.dH;ae.dG=null;ae.dH=null;ae.PF=0};dhtmlDragAndDropObject.prototype.PE=function(g){if(g){window.aj.dc(1,1)}for(var a=0;a&lt;window.frames.length;a++){try{if((window.frames[a]!=g)&amp;&amp;(window.frames[a].aj)){window.frames[a].aj.PE(window)}}catch(c){}}try{if((parent.aj)&amp;&amp;(parent!=window)&amp;&amp;(parent!=g)){parent.aj.PE(window)}}catch(c){}};dhtmlDragAndDropObject.prototype.bm=function(g,h){if(g){window.aj.af();window.aj.bh=g.aj.bh;window.aj.aM=g.aj.aM;window.aj.al=g.aj.al;window.aj.bN=g.aj.al;window.document.body.onmouseup=window.aj.dc;window.PF=0;if(((!_isIE)&amp;&amp;(h))&amp;&amp;((!aq)||(qG&lt;1.8))){window.aj.bS()}}try{if((parent.aj)&amp;&amp;(parent!=window)&amp;&amp;(parent!=g)){parent.aj.bm(window)}}catch(c){}for(var a=0;a&lt;window.frames.length;a++){try{if((window.frames[a]!=g)&amp;&amp;(window.frames[a].aj)){window.frames[a].aj.bm(window,((!g||h)?1:0))}}catch(c){}}};aq=false;_isIE=false;cU=false;cn=false;gP=false;_isChrome=false;qG=false;_KHTMLrv=false;pe=false;if(navigator.userAgent.indexOf(&quot;Macintosh&quot;)!= -1){gP=true}if(navigator.userAgent.toLowerCase().indexOf(&quot;chrome&quot;)&gt; -1){_isChrome=true}if((navigator.userAgent.indexOf(&quot;Safari&quot;)!= -1)||(navigator.userAgent.indexOf(&quot;Konqueror&quot;)!= -1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf(&quot;Safari&quot;)+7,5));if(_KHTMLrv&gt;525){aq=true;qG=1.9}else{cn=true}}else{if(navigator.userAgent.indexOf(&quot;Opera&quot;)!= -1){cU=true;pe=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf(&quot;Opera&quot;)+6,3))}else{if(navigator.appName.indexOf(&quot;Microsoft&quot;)!= -1){_isIE=true;if((navigator.appVersion.indexOf(&quot;MSIE 8.0&quot;)!= -1||navigator.appVersion.indexOf(&quot;MSIE 9.0&quot;)!= -1||navigator.appVersion.indexOf(&quot;MSIE 10.0&quot;)!= -1||document.documentMode&gt;7)&amp;&amp;document.compatMode!=&quot;BackCompat&quot;){_isIE=8}}else{if(navigator.appName==&quot;Netscape&quot;&amp;&amp;navigator.userAgent.indexOf(&quot;Trident&quot;)!= -1){_isIE=8}else{aq=true;qG=parseFloat(navigator.userAgent.split(&quot;rv:&quot;)[1])}}}}ag.prototype.et=function(g,l,h,q){if(cn||(!_isIE&amp;&amp; !window.XPathResult)){return this.hi(g,l)}if(_isIE){if(!l){if(!this.ai.nodeName){l=this.ai.responseXML}else{l=this.ai}}if(!l){dhtmlxError.gn(&quot;LoadXML&quot;,&quot;Incorrect XML&quot;,[(l||this.ai),this.cT])}if(h!=null){l.setProperty(&quot;SelectionNamespaces&quot;,&quot;xmlns:xsl='&quot;+h+&quot;'&quot;)}if(q==&quot;single&quot;){return l.selectSingleNode(g)}else{return l.selectNodes(g)||new Array(0)}}else{var a=l;if(!l){if(!this.ai.nodeName){l=this.ai.responseXML}else{l=this.ai}}if(!l){dhtmlxError.gn(&quot;LoadXML&quot;,&quot;Incorrect XML&quot;,[(l||this.ai),this.cT])}if(l.nodeName.indexOf(&quot;document&quot;)!= -1){a=l}else{a=l;l=l.ownerDocument}var n=XPathResult.ANY_TYPE;if(q==&quot;single&quot;){n=XPathResult.FIRST_ORDERED_NODE_TYPE}var m=new Array();var c=l.evaluate(g,a,function(r){return h},n,null);if(n==XPathResult.FIRST_ORDERED_NODE_TYPE){return c.singleNodeValue}var o=c.iterateNext();while(o){m[m.length]=o;o=c.iterateNext()}return m}};function de(c,a,g){if(!this.cW){this.cW=new Array()}return this}de.prototype.mP=function(c,a){this.cW[c]=a};de.prototype.gn=function(c,a,g){if(this.cW[c]){return this.cW[c](c,a,g)}if(this.cW.ALL){return this.cW.ALL(c,a,g)}alert(&quot;Error type: &quot;+arguments[0]+&quot;\nDescription: &quot;+arguments[1]);return null};window.dhtmlxError=new de();ag.prototype.hi=function(g,a){var l=g.replace(/[\/]+/gi,&quot;/&quot;).split(&quot;/&quot;);var h=null;var c=1;if(!l.length){return[]}if(l[0]==&quot;.&quot;){h=[a]}else{if(l[0]==&quot;&quot;){h=(this.ai.responseXML||this.ai).getElementsByTagName(l[c].replace(/\<A href="/wiki/index.php?title=%5E%5C&amp;action=edit&amp;redlink=1" class="new" title="^\ (page does not exist)">^\</A>*\]/g,&quot;&quot;));c++}else{return[]}}for(c;c&lt;l.length;c++){h=this.eo(h,l[c])}if(l[c-1].indexOf(&quot;[&quot;)!= -1){h=this.hj(h,l[c-1])}return h};ag.prototype.hj=function(h,g){var m=new Array();var g=g.replace(/[^\[]*\[\@/g,&quot;&quot;).replace(/[\[\]\@]*/g,&quot;&quot;);for(var l=0;l&lt;h.length;l++){if(h[l].getAttribute(g)){m[m.length]=h[l]}}return m};ag.prototype.eo=function(h,g){var n=new Array();if(cn){g=g.toUpperCase()}for(var m=0;m&lt;h.length;m++){for(var l=0;l&lt;h[m].childNodes.length;l++){if(cn){if(h[m].childNodes[l].tagName&amp;&amp;h[m].childNodes[l].tagName.toUpperCase()==g){n[n.length]=h[m].childNodes[l]}}else{if(h[m].childNodes[l].tagName==g){n[n.length]=h[m].childNodes[l]}}}}return n};function dhtmlXHeir(h,g){for(var l in g){if(typeof(g[l])==&quot;function&quot;){h[l]=g[l]}}return h}function dhtmlxEvent(c,g,a){if(c.addEventListener){c.addEventListener(g,a,false)}else{if(c.attachEvent){c.attachEvent(&quot;on&quot;+g,a)}}}ag.prototype.xslDoc=null;ag.prototype.setXSLParamValue=function(c,g,h){if(!h){h=this.xslDoc}if(h.responseXML){h=h.responseXML}var a=this.et(&quot;/xsl:stylesheet/xsl:variable[@name='&quot;+c+&quot;']&quot;,h,&quot;<A href="http://www.w3.org/1999/XSL/Transform" class="external free" rel="nofollow">http://www.w3.org/1999/XSL/Transform</A>&quot;,&quot;single&quot;);if(a!=null){a.firstChild.nodeValue=g}};ag.prototype.doXSLTransToObject=function(h,c){if(!h){h=this.xslDoc}if(h.responseXML){h=h.responseXML}if(!c){c=this.ai}if(c.responseXML){c=c.responseXML}if(!_isIE){if(!this.XSLProcessor){this.XSLProcessor=new XSLTProcessor();this.XSLProcessor.importStylesheet(h)}var a=this.XSLProcessor.transformToDocument(c)}else{var a=new ActiveXObject(&quot;Msxml2.DOMDocument.3.0&quot;);try{c.transformNodeToObject(h,a)}catch(g){a=c.transformNode(h)}}return a};ag.prototype.doXSLTransToString=function(g,c){var a=this.doXSLTransToObject(g,c);if(typeof(a)==&quot;string&quot;){return a}return this.doSerialization(a)};ag.prototype.doSerialization=function(c){if(!c){c=this.ai}if(c.responseXML){c=c.responseXML}if(!_isIE){var a=new XMLSerializer();return a.serializeToString(c)}else{return c.xml}};dhtmlxEventable=function(obj){obj.attachEvent=function(name,hk,callObj){name=&quot;ev_&quot;+name.toLowerCase();if(!this[name]){this[name]=new this.eventCatcher(callObj||this)}return(name+&quot;:&quot;+this[name].oe(hk))};obj.callEvent=function(name,afo){name=&quot;ev_&quot;+name.toLowerCase();if(this[name]){return this[name].apply(this,afo)}return true};obj.mR=function(name){return(! !this[&quot;ev_&quot;+name.toLowerCase()])};obj.eventCatcher=function(obj){var gu=[];var z=function(){var res=true;for(var i=0;i&lt;gu.length;i++){if(gu[i]!=null){var zr=gu[i].apply(obj,arguments);res=res&amp;&amp;zr}}return res};z.oe=function(ev){if(typeof(ev)!=&quot;function&quot;){ev=eval(ev)}if(ev){return gu.push(ev)-1}return false};z.uI=function(id){gu[id]=null};return z};obj.detachEvent=function(id){if(id!=false){var list=id.split(&quot;:&quot;);this[list[0]].uI(list[1])}};obj.detachAllEvents=function(){for(var name in this){if(name.indexOf(&quot;ev_&quot;)==0){this.detachEvent(name);this[name]=null}}};obj=null};if(!window.dhtmlx){dhtmlx={}}dhtmlx.assert=function(c,a){if(!c){dhtmlx.error(a)}};dhtmlx.assert_enabled=function(){return false};dhtmlx.assert_event=function(m,g){if(!m._event_check){m._event_check={};m._event_check_size={}}for(var c in g){m._event_check[c.toLowerCase()]=g[c];var l= -1;for(var h in g[c]){l++}m._event_check_size[c.toLowerCase()]=l}};dhtmlx.assert_method_info=function(l,c,h,m){var a=[];for(var g=0;g&lt;m.length;g++){a.push(m[g][0]+&quot; : &quot;+m[g][1]+&quot;\n   &quot;+m[g][2].describe()+(m[g][3]?&quot;; optional&quot;:&quot;&quot;))}return l.name+&quot;.&quot;+c+&quot;\n&quot;+h+&quot;\n Arguments:\n - &quot;+a.join(&quot;\n - &quot;)};dhtmlx.assert_method=function(g,a){for(var c in a){dhtmlx.assert_method_process(g,c,a[c].descr,a[c].CF,(a[c].min||99),a[c].Ch)}};dhtmlx.assert_method_process=function(m,c,l,n,g,h){var a=m[c];if(!h){m[c]=function(){if(arguments.length!=n.length&amp;&amp;arguments.length&lt;g){dhtmlx.log(&quot;warn&quot;,&quot;Incorrect count of parameters\n&quot;+m[c].describe()+&quot;\n\nExpecting &quot;+n.length+&quot; but have only &quot;+arguments.length)}else{for(var o=0;o&lt;n.length;o++){if(!n[o][3]&amp;&amp; !n[o][2](arguments[o])){dhtmlx.log(&quot;warn&quot;,&quot;Incorrect method call\n&quot;+m[c].describe()+&quot;\n\nActual value of &quot;+(o+1)+&quot; parameter: {&quot;+(typeof arguments[o])+&quot;} &quot;+arguments[o])}}}return a.apply(this,arguments)}}m[c].describe=function(){return dhtmlx.assert_method_info(m,c,l,n)}};dhtmlx.assert_event_call=function(g,c,a){if(g._event_check){if(!g._event_check[c]){dhtmlx.log(&quot;warn&quot;,&quot;Not expected event call :&quot;+c)}else{if(dhtmlx.isNotDefined(a)){dhtmlx.log(&quot;warn&quot;,&quot;Event without parameters :&quot;+c)}else{if(g._event_check_size[c]!=a.length){dhtmlx.log(&quot;warn&quot;,&quot;Incorrect event call, expected &quot;+g._event_check_size[c]+&quot; parameter(s), but have &quot;+a.length+&quot; parameter(s), for &quot;+c+&quot; event&quot;)}}}}};dhtmlx.assert_event_attach=function(c,a){if(c._event_check&amp;&amp; !c._event_check[a]){dhtmlx.log(&quot;warn&quot;,&quot;Unknown event name: &quot;+a)}};dhtmlx.assert_property=function(c,a){if(!c._settings_check){c._settings_check={}}dhtmlx.extend(c._settings_check,a)};dhtmlx.assert_check=function(g,c){if(typeof g==&quot;object&quot;){for(var a in g){dhtmlx.assert_settings(a,g[a],c)}}};dhtmlx.assert_settings=function(o,l,h){h=h||this._settings_check;if(h){if(!h[o]){return dhtmlx.log(&quot;warn&quot;,&quot;Unknown propery: &quot;+o)}var n=&quot;&quot;;var c=&quot;&quot;;var a=false;for(var g=0;g&lt;h[o].length;g++){var m=h[o][g];if(typeof m==&quot;string&quot;){continue}if(typeof m==&quot;function&quot;){a=a||m(l)}else{if(typeof m==&quot;object&quot;&amp;&amp;typeof m[1]==&quot;function&quot;){a=a||m[1](l);if(a&amp;&amp;m[2]){dhtmlx.assert_check(l,m[2])}}}if(a){break}}if(!a){dhtmlx.log(&quot;warn&quot;,&quot;Invalid configuration\n&quot;+dhtmlx.assert_info(o,h)+&quot;\nActual value: {&quot;+(typeof l)+&quot;} &quot;+l)}}};dhtmlx.assert_info=function(c,m){var a=m[c];var l=&quot;&quot;;var h=[];for(var g=0;g&lt;a.length;g++){if(typeof rule==&quot;string&quot;){l=a[g]}else{if(a[g].describe){h.push(a[g].describe())}else{if(a[g][1]&amp;&amp;a[g][1].describe){h.push(a[g][1].describe())}}}}return &quot;Property: &quot;+c+&quot;, &quot;+l+&quot; \nExpected value: \n - &quot;+h.join(&quot;\n - &quot;)};if(dhtmlx.assert_enabled()){dhtmlx.assert_rule_color=function(a){if(typeof a!=&quot;string&quot;){return false}if(a.indexOf(&quot;#&quot;)!==0){return false}if(a.substr(1).replace(/[0-9A-F]/gi,&quot;&quot;)!==&quot;&quot;){return false}return true};dhtmlx.assert_rule_color.describe=function(){return &quot;{String} Value must start from # and contain hexadecimal code of color&quot;};dhtmlx.assert_rule_template=function(a){if(typeof a==&quot;function&quot;){return true}if(typeof a==&quot;string&quot;){return true}return false};dhtmlx.assert_rule_template.describe=function(){return &quot;{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers&quot;};dhtmlx.assert_rule_boolean=function(a){if(typeof a==&quot;boolean&quot;){return true}return false};dhtmlx.assert_rule_boolean.describe=function(){return &quot;{Boolean} true or false&quot;};dhtmlx.assert_rule_object=function(a,c){if(typeof a==&quot;object&quot;){return true}return false};dhtmlx.assert_rule_object.describe=function(){return &quot;{Object} Configuration object&quot;};dhtmlx.assert_rule_string=function(a){if(typeof a==&quot;string&quot;){return true}return false};dhtmlx.assert_rule_string.describe=function(){return &quot;{String} Plain string&quot;};dhtmlx.assert_rule_htmlpt=function(a){return! !dhtmlx.toNode(a)};dhtmlx.assert_rule_htmlpt.describe=function(){return &quot;{Object},{String} HTML node or ID of HTML Node&quot;};dhtmlx.assert_rule_notdocumented=function(a){return false};dhtmlx.assert_rule_notdocumented.describe=function(){return &quot;This options wasn't documented&quot;};dhtmlx.assert_rule_key=function(c){var a=function(g){return c[g]};a.describe=function(){var h=[];for(var g in c){h.push(g)}return &quot;{String} can take one of next values: &quot;+h.join(&quot;, &quot;)};return a};dhtmlx.assert_rule_dimension=function(a){if(a*1==a&amp;&amp; !isNaN(a)&amp;&amp;a&gt;=0){return true}return false};dhtmlx.assert_rule_dimension.describe=function(){return &quot;{Integer} value must be a positive number&quot;};dhtmlx.assert_rule_number=function(a){if(typeof a==&quot;number&quot;){return true}return false};dhtmlx.assert_rule_number.describe=function(){return &quot;{Integer} value must be a number&quot;};dhtmlx.assert_rule_function=function(a){if(typeof a==&quot;function&quot;){return true}return false};dhtmlx.assert_rule_function.describe=function(){return &quot;{Function} value must be a custom function&quot;};dhtmlx.assert_rule_any=function(a){return true};dhtmlx.assert_rule_any.describe=function(){return &quot;Any value&quot;};dhtmlx.assert_rule_mix=function(g,c){var h=function(a){if(g(a)||c(a)){return true}return false};h.describe=function(){return g.describe()};return h}}dhtmlx.version=&quot;3.0&quot;;dhtmlx.codebase=&quot;./&quot;;dhtmlx.copy=function(c){var a=dhtmlx.copy._function;a.prototype=c;return new a()};dhtmlx.copy._function=function(){};dhtmlx.extend=function(c,a){for(var g in a){c[g]=a[g]}if(dhtmlx.assert_enabled()&amp;&amp;a._assert){c._assert();c._assert=null}dhtmlx.assert(c,&quot;Invalid nesting target&quot;);dhtmlx.assert(a,&quot;Invalid nesting source&quot;);if(a.ahY){c.ahY()}return c};dhtmlx.proto_extend=function(){var m=arguments;var g=m[0];var c=[];for(var l=m.length-1;l&gt;0;l--){if(typeof m[l]==&quot;function&quot;){m[l]=m[l].prototype}for(var h in m[l]){if(h==&quot;_init&quot;){c.push(m[l][h])}else{if(!g[h]){g[h]=m[l][h]}}}}if(m[0].ahY){c.push(m[0].ahY)}g.ahY=function(){for(var n=0;n&lt;c.length;n++){c[n].apply(this,arguments)}};g.base=m[1];var a=function(n){this.ahY(n);if(this._parseSettings){this._parseSettings(n,this.defaults)}};a.prototype=g;g=m=null;return a};dhtmlx.bind=function(c,a){return function(){return c.apply(a,arguments)}};dhtmlx.require=function(a){if(!dhtmlx._modules[a]){dhtmlx.assert(dhtmlx.ajax,&quot;load module is required&quot;);dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText);dhtmlx._modules[a]=true}};dhtmlx._modules={};dhtmlx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhtmlx.methodPush=function(a,g,c){return function(){var h=false;h=a[g].apply(a,arguments);return h}};dhtmlx.isNotDefined=function(c){return typeof c==&quot;undefined&quot;};dhtmlx.amY=function(h,c,g,a){setTimeout(function(){var l=h.apply(c,g);h=c=g=null;return l},a||1)};dhtmlx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhtmlx.toNode=function(a){if(typeof a==&quot;string&quot;){return document.getElementById(a)}return a};dhtmlx.toArray=function(a){return dhtmlx.extend((a||[]),dhtmlx.PowerArray)};dhtmlx.toFunctor=function(str){return(typeof(str)==&quot;string&quot;)?eval(str):str};dhtmlx._events={};dhtmlx.event=function(h,g,a,c){h=dhtmlx.toNode(h);var l=dhtmlx.uid();dhtmlx._events[l]=[h,g,a];if(c){a=dhtmlx.bind(a,c)}if(h.addEventListener){h.addEventListener(g,a,false)}else{if(h.attachEvent){h.attachEvent(&quot;on&quot;+g,a)}}return l};dhtmlx.eventRemove=function(c){if(!c){return}dhtmlx.assert(this._events[c],&quot;Removing non-existing event&quot;);var a=dhtmlx._events[c];if(a[0].removeEventListener){a[0].removeEventListener(a[1],a[2],false)}else{if(a[0].detachEvent){a[0].detachEvent(&quot;on&quot;+a[1],a[2])}}delete this._events[c]};dhtmlx.log=function(c,g,a){if(window.console&amp;&amp;console.log){c=c.toLowerCase();if(window.console[c]){window.console[c](g||&quot;unknown error&quot;)}else{window.console.log(c+&quot;: &quot;+g)}if(a){window.console.log(a)}}};dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date();dhtmlx.log(&quot;Info&quot;,&quot;Timing start [&quot;+a+&quot;]&quot;);window.setTimeout(function(){var c=new Date();dhtmlx.log(&quot;Info&quot;,&quot;Timing end [&quot;+a+&quot;]:&quot;+(c.valueOf()-dhtmlx._start_time_log.valueOf())/1000+&quot;s&quot;)},1)};dhtmlx.log_time=function(a){var g=&quot;_start_time_log&quot;+a;if(!dhtmlx[g]){dhtmlx[g]=new Date();dhtmlx.log(&quot;Info&quot;,&quot;Timing start [&quot;+a+&quot;]&quot;)}else{var c=new Date();dhtmlx.log(&quot;Info&quot;,&quot;Timing end [&quot;+a+&quot;]:&quot;+(c.valueOf()-dhtmlx[g].valueOf())/1000+&quot;s&quot;);dhtmlx[g]=null}};dhtmlx.error=function(c,a){dhtmlx.log(&quot;error&quot;,c,a)};dhtmlx.EventSystem={ahY:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=true},unblock:function(){this._events._block=false},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(g,l){if(this._events._block){return true}g=g.toLowerCase();dhtmlx.assert_event_call(this,g,l);var h=this._events[g.toLowerCase()];var a=true;if(dhtmlx.debug){dhtmlx.log(&quot;info&quot;,&quot;[&quot;+this.name+&quot;] event:&quot;+g,l)}if(h){for(var c=0;c&lt;h.length;c++){if(h[c].apply(this,(l||[]))===false){a=false}}}if(this._map[g]&amp;&amp; !this._map[g].callEvent(g,l)){a=false}return a},attachEvent:function(c,a,h){c=c.toLowerCase();dhtmlx.assert_event_attach(this,c);h=h||dhtmlx.uid();a=dhtmlx.toFunctor(a);var g=this._events[c]||dhtmlx.toArray();g.push(a);this._events[c]=g;this._handlers[h]={f:a,t:c};return h},detachEvent:function(h){if(this._handlers[h]){var c=this._handlers[h].t;var a=this._handlers[h].f;var g=this._events[c];g.remove(a);delete this._handlers[h]}}};dhtmlx.PowerArray={removeAt:function(c,a){if(c&gt;=0){this.splice(c,(a||1))}},remove:function(a){this.removeAt(this.find(a))},insertAt:function(c,g){if(!g&amp;&amp;g!==0){this.push(c)}else{var a=this.splice(g,(this.length-g));this[g]=c;this.push.apply(this,a)}},find:function(a){for(i=0;i&lt;this.length;i++){if(a==this[i]){return i}}return-1},Kw:function(a,g){for(var c=0;c&lt;this.length;c++){a.call((g||this),this[c])}},map:function(a,g){for(var c=0;c&lt;this.length;c++){this[c]=a.call((g||this),this[c])}return this}};dhtmlx.env={};if(navigator.userAgent.indexOf(&quot;Opera&quot;)!= -1){dhtmlx.cU=true}else{dhtmlx._isIE= ! !document.all;dhtmlx.aq= !document.all;dhtmlx._isWebKit=(navigator.userAgent.indexOf(&quot;KHTML&quot;)!= -1);if(navigator.appVersion.indexOf(&quot;MSIE 8.0&quot;)!= -1&amp;&amp;document.compatMode!=&quot;BackCompat&quot;){dhtmlx._isIE=8}if(navigator.appVersion.indexOf(&quot;MSIE 9.0&quot;)!= -1&amp;&amp;document.compatMode!=&quot;BackCompat&quot;){dhtmlx._isIE=9}}dhtmlx.env={};(function(){dhtmlx.env.transform=false;dhtmlx.env.transition=false;var a={};a.uY=[&quot;transform&quot;,&quot;transition&quot;];a.transform=[&quot;transform&quot;,&quot;WebkitTransform&quot;,&quot;MozTransform&quot;,&quot;oTransform&quot;,&quot;msTransform&quot;];a.transition=[&quot;transition&quot;,&quot;WebkitTransition&quot;,&quot;MozTransition&quot;,&quot;oTransition&quot;];var h=document.createElement(&quot;DIV&quot;);var g;for(var c=0;c&lt;a.uY.length;c++){while(p=a[a.uY[c]].pop()){if(typeof h.style[p]!=&quot;undefined&quot;){dhtmlx.env[a.uY[c]]=true}}}})();dhtmlx.env.transform_prefix=(function(){var a;if(dhtmlx.cU){a=&quot;-o-&quot;}else{a=&quot;&quot;;if(dhtmlx.aq){a=&quot;-moz-&quot;}if(dhtmlx._isWebKit){a=&quot;-webkit-&quot;}}return a})();dhtmlx.env.svg=(function(){return document.implementation.hasFeature(&quot;<A href="http://www.w3.org/TR/SVG11/feature#BasicStructure" class="external free" rel="nofollow">http://www.w3.org/TR/SVG11/feature#BasicStructure</A>&quot;,&quot;1.1&quot;)})();dhtmlx.zIndex={drag:10000};dhtmlx.html={create:function(c,a,g){a=a||{};var h=document.createElement(c);for(var l in a){h.setAttribute(l,a[l])}if(a.style){h.style.cssText=a.style}if(a[&quot;class&quot;]){h.className=a[&quot;class&quot;]}if(g){h.innerHTML=g}return h},getValue:function(a){a=dhtmlx.toNode(a);if(!a){return &quot;&quot;}return dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value},remove:function(c){if(c instanceof Array){for(var a=0;a&lt;c.length;a++){this.remove(c[a])}}else{if(c&amp;&amp;c.parentNode){c.parentNode.removeChild(c)}}},insertBefore:function(c,g,a){if(!c){return}if(g){g.parentNode.insertBefore(c,g)}else{a.appendChild(c)}},locate:function(c,h){c=c||event;var a=c.target||c.srcElement;while(a){if(a.getAttribute){var g=a.getAttribute(h);if(g){return g}}a=a.parentNode}return null},offset:function(h){if(h.getBoundingClientRect){var n=h.getBoundingClientRect();var o=document.body;var c=document.documentElement;var a=window.pageYOffset||c.scrollTop||o.scrollTop;var l=window.pageXOffset||c.scrollLeft||o.scrollLeft;var m=c.clientTop||o.clientTop||0;var q=c.clientLeft||o.clientLeft||0;var r=n.top+a-m;var g=n.left+l-q;return{y:Math.round(r),x:Math.round(g)}}else{var r=0,g=0;while(h){r=r+parseInt(h.offsetTop,10);g=g+parseInt(h.offsetLeft,10);h=h.offsetParent}return{y:r,x:g}}},pos:function(a){a=a||event;if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}var c=((dhtmlx._isIE)&amp;&amp;(document.compatMode!=&quot;BackCompat&quot;))?document.documentElement:document.body;return{x:a.clientX+c.scrollLeft-c.clientLeft,y:a.clientY+c.scrollTop-c.clientTop}},preventEvent:function(a){if(a&amp;&amp;a.preventDefault){a.preventDefault()}dhtmlx.html.aoZ(a)},aoZ:function(a){(a||event).cancelBubble=true;return false},addCss:function(c,a){c.className+=&quot; &quot;+a},removeCss:function(c,a){c.className=c.className.replace(RegExp(a,&quot;g&quot;),&quot;&quot;)}};(function(){var a=document.getElementsByTagName(&quot;SCRIPT&quot;);dhtmlx.assert(a.length,&quot;Can't locate codebase&quot;);if(a.length){a=(a[a.length-1].getAttribute(&quot;src&quot;)||&quot;&quot;).split(&quot;/&quot;);a.splice(a.length-1,1);dhtmlx.codebase=a.slice(0,a.length).join(&quot;/&quot;)+&quot;/&quot;}})();if(!dhtmlx.ui){dhtmlx.ui={}}dhtmlx.Destruction={ahY:function(){dhtmlx.destructors.push(this)},fA:function(){this.fA=function(){};this._htmlmap=null;this._htmlrows=null;if(this.gv){document.body.appendChild(this.gv)}this.gv=null;if(this._obj){this._obj.innerHTML=&quot;&quot;;this._obj._htmlmap=null}this._obj=this._dataobj=null;this.data=null;this._events=this._handlers={};if(this.ht){this.ht=function(){}}}};dhtmlx.destructors=[];dhtmlx.event(window,&quot;unload&quot;,function(){if(dhtmlx.destructors){for(var g=0;g&lt;dhtmlx.destructors.length;g++){dhtmlx.destructors[g].fA()}dhtmlx.destructors=[]}for(var c in dhtmlx._events){var h=dhtmlx._events[c];if(h[0].removeEventListener){h[0].removeEventListener(h[1],h[2],false)}else{if(h[0].detachEvent){h[0].detachEvent(&quot;on&quot;+h[1],h[2])}}delete dhtmlx._events[c]}});dhtmlx.ajax=function(a,c,g){if(arguments.length!==0){var h=new dhtmlx.ajax();if(g){h.master=g}h.get(a,null,c)}if(!this.getXHR){return new dhtmlx.ajax()}return this};dhtmlx.ajax.prototype={getXHR:function(){if(dhtmlx._isIE){return new ActiveXObject(&quot;Microsoft.xmlHTTP&quot;)}else{return new XMLHttpRequest()}},send:function(l,q,n){var c=this.getXHR();if(typeof n==&quot;function&quot;){n=[n]}if(typeof q==&quot;object&quot;){var m=[];for(var g in q){var o=q[g];if(o===null||o===dhtmlx.undefined){o=&quot;&quot;}m.push(g+&quot;=&quot;+encodeURIComponent(o))}q=m.join(&quot;&amp;&quot;)}if(q&amp;&amp; !this.post){l=l+(l.indexOf(&quot;?&quot;)!= -1?&quot;&amp;&quot;:&quot;?&quot;)+q;q=null}c.open(this.post?&quot;POST&quot;:&quot;GET&quot;,l,!this._sync);if(this.post){c.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;)}var h=this;c.onreadystatechange=function(){if(!c.readyState||c.readyState==4){if(n&amp;&amp;h){for(var a=0;a&lt;n.length;a++){if(n[a]){n[a].call((h.master||h),c.responseText,c.responseXML,c)}}}h.master=null;n=h=null}};c.send(q||null);return c},get:function(a,g,c){this.post=false;return this.send(a,g,c)},post:function(a,g,c){this.post=true;return this.send(a,g,c)},sync:function(){this._sync=true;return this}};dhtmlx.AtomDataLoader={ahY:function(a){this.data={};if(a){this._settings.datatype=a.datatype||&quot;json&quot;;this._after_init.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(a){if(!this._ready_for_data){return a}this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data){return a}this.parse(a,this._settings.datatype);return true},load:function(a,c){this.callEvent(&quot;onXLS&quot;,[]);if(typeof c==&quot;string&quot;){this.data.driver=dhtmlx.DataDriver[c];c=arguments[2]}else{this.data.driver=dhtmlx.DataDriver.xml}dhtmlx.ajax(a,[this._onLoad,c],this)},parse:function(c,a){this.callEvent(&quot;onXLS&quot;,[]);this.data.driver=dhtmlx.DataDriver[a||&quot;xml&quot;];this._onLoad(c,null)},_onLoad:function(l,c,a){var g=this.data.driver;var h=g.getRecords(g.toObject(l,c))[0];this.data=(g?g.getDetails(h):l);this.callEvent(&quot;onXLE&quot;,[])},_check_data_feed:function(c){if(!this._settings.dataFeed||this._ignore_feed|| !c){return true}var a=this._settings.dataFeed;if(typeof a==&quot;function&quot;){return a.call(this,(c.id||c),c)}a=a+(a.indexOf(&quot;?&quot;)== -1?&quot;?&quot;:&quot;&amp;&quot;)+&quot;action=get&amp;id=&quot;+encodeURIComponent(c.id||c);this.callEvent(&quot;onXLS&quot;,[]);dhtmlx.ajax(a,function(h,g){this._ignore_feed=true;this.setValues(dhtmlx.DataDriver.json.toObject(h)[0]);this._ignore_feed=false;this.callEvent(&quot;onXLE&quot;,[])},this);return false}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(data){if(!data){data=&quot;[]&quot;}if(typeof data==&quot;string&quot;){eval(&quot;dhtmlx.temp=&quot;+data);return dhtmlx.temp}return data},getRecords:function(a){if(a&amp;&amp; !(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0),_key:(a.dhx_security)}}};dhtmlx.DataDriver.json_ext={toObject:function(data){if(!data){data=&quot;[]&quot;}if(typeof data==&quot;string&quot;){var temp;eval(&quot;temp=&quot;+data);dhtmlx.temp=[];var header=temp.header;for(var i=0;i&lt;temp.data.length;i++){var item={};for(var j=0;j&lt;header.length;j++){if(typeof(temp.data[i][j])!=&quot;undefined&quot;){item[header[j]]=temp.data[i][j]}}dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(a){if(a&amp;&amp; !(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0)}}};dhtmlx.DataDriver.html={toObject:function(c){if(typeof c==&quot;string&quot;){var a=null;if(c.indexOf(&quot;&lt;&quot;)== -1){a=dhtmlx.toNode(c)}if(!a){a=document.createElement(&quot;DIV&quot;);a.innerHTML=c}return a.getElementsByTagName(this.tag)}return c},getRecords:function(a){if(a.tagName){return a.childNodes}return a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:&quot;LI&quot;};dhtmlx.DataDriver.jsarray={toObject:function(data){if(typeof data==&quot;string&quot;){eval(&quot;dhtmlx.temp=&quot;+data);return dhtmlx.temp}return data},getRecords:function(a){return a},getDetails:function(g){var a={};for(var c=0;c&lt;g.length;c++){a[&quot;data&quot;+c]=g[c]}return a},getInfo:function(a){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(g){g=this.stringToArray(g);var a={};for(var c=0;c&lt;g.length;c++){a[&quot;data&quot;+c]=g[c]}return a},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(c){c=c.split(this.cell);for(var a=0;a&lt;c.length;a++){c[a]=c[a].replace(/^[ \t\n\r]*(\&quot;|)/g,&quot;&quot;).replace(/(\&quot;|)[ \t\n\r]*$/g,&quot;&quot;)}return c},row:&quot;\n&quot;,cell:&quot;,&quot;};dhtmlx.DataDriver.xml={toObject:function(c,a){if(a&amp;&amp;(a=this.checkResponse(c,a))){return a}if(typeof c==&quot;string&quot;){return this.fromString(c)}return c},getRecords:function(a){return this.xpath(a,this.records)},records:&quot;/*/item&quot;,getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:(a.documentElement.getAttribute(&quot;total_count&quot;)||0),_from:(a.documentElement.getAttribute(&quot;pos&quot;)||0),_key:(a.documentElement.getAttribute(&quot;dhx_security&quot;))}},xpath:function(h,q){if(window.XPathResult){var g=h;if(h.nodeName.indexOf(&quot;document&quot;)== -1){h=h.ownerDocument}var n=[];var c=h.evaluate(q,g,null,XPathResult.ANY_TYPE,null);var o=c.iterateNext();while(o){n.push(o);o=c.iterateNext()}return n}else{var m=true;try{if(typeof(h.selectNodes)==&quot;undefined&quot;){m=false}}catch(l){}if(m){return h.selectNodes(q)}else{var a=q.split(&quot;/&quot;).pop();return h.getElementsByTagName(a)}}},tagToObject:function(g,q){q=q||{};var l=false;var h=g.attributes;if(h&amp;&amp;h.length){for(var n=0;n&lt;h.length;n++){q[h[n].name]=h[n].value}l=true}var c=g.childNodes;var o={};for(var n=0;n&lt;c.length;n++){if(c[n].nodeType==1){var m=c[n].tagName;if(typeof q[m]!=&quot;undefined&quot;){if(!(q[m]instanceof Array)){q[m]=[q[m]]}q[m].push(this.tagToObject(c[n],{}))}else{q[c[n].tagName]=this.tagToObject(c[n],{})}l=true}}if(!l){return this.nodeValue(g)}q.value=this.nodeValue(g);return q},nodeValue:function(a){if(a.firstChild){return a.firstChild.wholeText||a.firstChild.data}return &quot;&quot;},fromString:function(c){if(window.DOMParser&amp;&amp; !dhtmlx._isIE){return(new DOMParser()).parseFromString(c,&quot;text/xml&quot;)}if(window.ActiveXObject){var a=new ActiveXObject(&quot;Microsoft.xmlDOM&quot;);a.loadXML(c);return a}dhtmlx.error(&quot;Load from xml string is not supported&quot;)},checkResponse:function(h,g){if(g&amp;&amp;(g.firstChild&amp;&amp;g.firstChild.tagName!=&quot;parsererror&quot;)){return g}var c=this.fromString(h.replace(/^[\s]+/,&quot;&quot;));if(c){return c}dhtmlx.error(&quot;xml can't be parsed&quot;,h)}};dhtmlx.DataLoader={ahY:function(a){a=a||&quot;&quot;;this.name=&quot;DataStore&quot;;this.data=(a.datastore)||(new dhtmlx.DataStore());this._readyHandler=this.data.attachEvent(&quot;onStoreLoad&quot;,dhtmlx.bind(this._call_onready,this))},load:function(a,c){dhtmlx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed){this.data.feed=function(h,g){if(this._load_count){return this._load_count=[h,g]}else{this._load_count=true}this.load(a+((a.indexOf(&quot;?&quot;)== -1)?&quot;?&quot;:&quot;&amp;&quot;)+&quot;posStart=&quot;+h+&quot;&amp;count=&quot;+g,function(){var l=this._load_count;this._load_count=false;if(typeof l==&quot;object&quot;){this.data.feed.apply(this,l)}})}}},_onLoad:function(g,c,a){this.data.Aq(this.data.driver.toObject(g,c));this.callEvent(&quot;onXLE&quot;,[]);if(this._readyHandler){this.data.detachEvent(this._readyHandler);this._readyHandler=null}},dataFeed_setter:function(a){this.data.attachEvent(&quot;onBeforeFilter&quot;,dhtmlx.bind(function(n,m){if(this._settings.dataFeed){var l={};if(!n&amp;&amp; !l){return}if(typeof n==&quot;function&quot;){if(!m){return}n(m,l)}else{l={text:m}}this.clearAll();var c=this._settings.dataFeed;if(typeof c==&quot;function&quot;){return c.call(this,m,l)}var h=[];for(var g in l){h.push(&quot;dhx_filter[&quot;+g+&quot;]=&quot;+encodeURIComponent(l[g]))}this.load(c+(c.indexOf(&quot;?&quot;)&lt;0?&quot;?&quot;:&quot;&amp;&quot;)+h.join(&quot;&amp;&quot;),this._settings.datatype);return false}},this));return a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);if(a&amp;&amp;a.call){a.apply(this,arguments)}}}};dhtmlx.DataStore=function(){this.name=&quot;DataStore&quot;;dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver(&quot;xml&quot;);this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],&quot;incorrect DataDriver&quot;);this.driver=dhtmlx.DataDriver[a]},Aq:function(l){this.callEvent(&quot;onParse&quot;,[this.driver,l]);if(this._filter_order){this.filter()}var m=this.driver.getInfo(l);if(m._key){dhtmlx.security_key=m._key}var h=this.driver.getRecords(l);var o=(m._from||0)*1;if(o===0&amp;&amp;this.order[0]){o=this.order.length}var c=0;for(var g=0;g&lt;h.length;g++){var a=this.driver.getDetails(h[g]);var n=this.id(a);if(!this.pull[n]){this.order[c+o]=n;c++}this.pull[n]=a;if(this.extraParser){this.extraParser(a)}if(this._scheme){if(this._scheme.$init){this._scheme.$update(a)}else{if(this._scheme.$update){this._scheme.$update(a)}}}}for(var g=0;g&lt;m._size;g++){if(!this.order[g]){var n=dhtmlx.uid();var a={id:n,$template:&quot;loading&quot;};this.pull[n]=a;this.order[g]=n}}this.callEvent(&quot;onStoreLoad&quot;,[this.driver,l]);this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(c,a){dhtmlx.assert(this.pull[c],&quot;Can't change id, for non existing item: &quot;+c);this.pull[a]=this.pull[c];this.pull[a].id=a;this.order[this.order.find(c)]=a;if(this._filter_order){this._filter_order[this._filter_order.find(c)]=a}this.callEvent(&quot;onIdChange&quot;,[c,a]);if(this._render_change_id){this._render_change_id(c,a)}},get:function(a){return this.item(a)},set:function(c,a){return this.update(c,a)},item:function(a){return this.pull[a]},update:function(c,a){if(this._scheme&amp;&amp;this._scheme.$update){this._scheme.$update(a)}if(this.callEvent(&quot;onBeforeUpdate&quot;,[c,a])===false){return false}this.pull[c]=a;this.refresh(c)},refresh:function(a){if(this._skip_refresh){return}if(a){this.callEvent(&quot;onStoreUpdated&quot;,[a,this.pull[a],&quot;update&quot;])}else{this.callEvent(&quot;onStoreUpdated&quot;,[null,null,null])}},silent:function(a){this._skip_refresh=true;a.call(this);this._skip_refresh=false},getRange:function(h,g){if(h){h=this.indexById(h)}else{h=this.startOffset||0}if(g){g=this.indexById(g)}else{g=Math.min((this.endOffset||Infinity),(this.dataCount()-1));if(g&lt;0){g=0}}if(h&gt;g){var c=g;g=h;h=c}return this.getIndexRange(h,g)},getIndexRange:function(h,g){g=Math.min((g||Infinity),this.dataCount()-1);var a=dhtmlx.toArray();for(var c=(h||0);c&lt;=g;c++){a.push(this.item(this.order[c]))}return a},dataCount:function(){return this.order.length},exists:function(a){return! !(this.pull[a])},move:function(a,h){if(a&lt;0||h&lt;0){dhtmlx.error(&quot;DataStore::move&quot;,&quot;Incorrect indexes&quot;);return}var g=this.idByIndex(a);var c=this.item(g);this.order.removeAt(a);this.order.insertAt(g,Math.min(this.order.length,h));this.callEvent(&quot;onStoreUpdated&quot;,[g,c,&quot;move&quot;])},scheme:function(a){this._scheme=a},sync:function(l,h,a){if(typeof h!=&quot;function&quot;){a=h;h=null}if(dhtmlx.debug_bind){this.debug_sync_master=l;dhtmlx.log(&quot;[sync] &quot;+this.debug_bind_master.name+&quot;@&quot;+this.debug_bind_master._settings.id+&quot; &lt;= &quot;+this.debug_sync_master.name+&quot;@&quot;+this.debug_sync_master._settings.id)}var g=l;if(l.name!=&quot;DataStore&quot;){l=l.data}var c=dhtmlx.bind(function(o,m,n){if(n!=&quot;update&quot;||h){o=null}if(!o){this.order=dhtmlx.toArray([].concat(l.order));this._filter_order=null;this.pull=l.pull;if(h){this.silent(h)}if(this._on_sync){this._on_sync()}}if(dhtmlx.debug_bind){dhtmlx.log(&quot;[sync:request] &quot;+this.debug_sync_master.name+&quot;@&quot;+this.debug_sync_master._settings.id+&quot; &lt;= &quot;+this.debug_bind_master.name+&quot;@&quot;+this.debug_bind_master._settings.id)}if(!a){this.refresh(o)}else{a=false}},this);l.attachEvent(&quot;onStoreUpdated&quot;,c);this.feed=function(n,m){g.loadNext(m,n)};c()},add:function(l,a){if(this._scheme){l=l||{};for(var c in this._scheme){l[c]=l[c]||this._scheme[c]}if(this._scheme){if(this._scheme.$init){this._scheme.$update(l)}else{if(this._scheme.$update){this._scheme.$update(l)}}}}var m=this.id(l);var h=this.dataCount();if(dhtmlx.isNotDefined(a)||a&lt;0){a=h}if(a&gt;h){dhtmlx.log(&quot;Warning&quot;,&quot;DataStore:add&quot;,&quot;Index of out of bounds&quot;);a=Math.min(this.order.length,a)}if(this.callEvent(&quot;onBeforeAdd&quot;,[m,l,a])===false){return false}if(this.exists(m)){return dhtmlx.error(&quot;Not unique ID&quot;)}this.pull[m]=l;this.order.insertAt(m,a);if(this._filter_order){var g=this._filter_order.length;if(!a&amp;&amp;this.order.length){g=0}this._filter_order.insertAt(m,g)}this.callEvent(&quot;onafterAdd&quot;,[m,a]);this.callEvent(&quot;onStoreUpdated&quot;,[m,l,&quot;add&quot;]);return m},remove:function(g){if(g instanceof Array){for(var a=0;a&lt;g.length;a++){this.remove(g[a])}return}if(this.callEvent(&quot;onBeforeDelete&quot;,[g])===false){return false}if(!this.exists(g)){return dhtmlx.error(&quot;Not existing ID&quot;,g)}var c=this.item(g);this.order.remove(g);if(this._filter_order){this._filter_order.remove(g)}delete this.pull[g];this.callEvent(&quot;onafterdelete&quot;,[g]);this.callEvent(&quot;onStoreUpdated&quot;,[g,c,&quot;delete&quot;])},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this.feed=null;this._filter_order=null;this.callEvent(&quot;onClearAll&quot;,[]);this.refresh()},idByIndex:function(a){if(a&gt;=this.order.length||a&lt;0){dhtmlx.log(&quot;Warning&quot;,&quot;DataStore::idByIndex Incorrect index&quot;)}return this.order[a]},indexById:function(c){var a=this.order.find(c);return a},next:function(c,a){return this.order[this.indexById(c)+(a||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(c,a){return this.order[this.indexById(c)-(a||1)]},sort:function(m,c,a){var g=m;if(typeof m==&quot;function&quot;){g={as:m,dir:c}}else{if(typeof m==&quot;string&quot;){g={by:m,dir:c,as:a}}}var l=[g.by,g.dir,g.as];if(!this.callEvent(&quot;onbeforesort&quot;,l)){return}if(this.order.length){var n=dhtmlx.sort.create(g);var h=this.getRange(this.first(),this.last());h.sort(n);this.order=h.map(function(o){return this.id(o)},this)}this.refresh();this.callEvent(&quot;onaftersort&quot;,l)},filter:function(l,h){if(!this.callEvent(&quot;onBeforeFilter&quot;,[l,h])){return}if(this._filter_order){this.order=this._filter_order;delete this._filter_order}if(!this.order.length){return}if(l){var c=l;h=h||&quot;&quot;;if(typeof l==&quot;string&quot;){l=dhtmlx.Template.fromHTML(l);h=h.toString().toLowerCase();c=function(o,n){return l(o).toLowerCase().indexOf(n)!= -1}}var g=dhtmlx.toArray();for(var a=0;a&lt;this.order.length;a++){var m=this.order[a];if(c(this.item(m),h)){g.push(m)}}this._filter_order=this.order;this.order=g}this.refresh();this.callEvent(&quot;onAfterFilter&quot;,[])},Kw:function(g,c){for(var a=0;a&lt;this.order.length;a++){g.call((c||this),this.item(this.order[a]))}},provideApi:function(h,c){this.debug_bind_master=h;if(c){this.mapEvent({onbeforesort:h,onaftersort:h,onbeforeadd:h,onafteradd:h,onbeforedelete:h,onafterdelete:h,onbeforeupdate:h})}var g=[&quot;get&quot;,&quot;set&quot;,&quot;sort&quot;,&quot;add&quot;,&quot;remove&quot;,&quot;exists&quot;,&quot;idByIndex&quot;,&quot;indexById&quot;,&quot;item&quot;,&quot;update&quot;,&quot;refresh&quot;,&quot;dataCount&quot;,&quot;filter&quot;,&quot;next&quot;,&quot;previous&quot;,&quot;clearAll&quot;,&quot;first&quot;,&quot;last&quot;,&quot;serialize&quot;];for(var a=0;a&lt;g.length;a++){h[g[a]]=dhtmlx.methodPush(this,g[a])}if(dhtmlx.assert_enabled()){this.assert_event(h)}},serialize:function(){var g=this.order;var a=[];for(var c=0;c&lt;g.length;c++){a.push(this.pull[g[c]])}return a}};dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{&quot;int&quot;:function(g,c){g=g*1;c=c*1;return g&gt;c?1:(g&lt;c? -1:0)},string_strict:function(g,c){g=g.toString();c=c.toString();return g&gt;c?1:(g&lt;c? -1:0)},string:function(g,c){g=g.toString().toLowerCase();c=c.toString().toLowerCase();return g&gt;c?1:(g&lt;c? -1:0)}},by:function(c,a){if(!c){return a}if(typeof a!=&quot;function&quot;){a=dhtmlx.sort.as[a||&quot;string&quot;]}c=dhtmlx.Template.fromHTML(c);return function(h,g){return a(c(h),c(g))}},dir:function(c,a){if(c==&quot;asc&quot;){return a}return function(h,g){return a(h,g)* -1}}};dhtmlx.KeyEvents={ahY:function(){dhtmlx.event(this._obj,&quot;keypress&quot;,this._onKeyPress,this)},_onKeyPress:function(c){c=c||event;var a=c.which||c.keyCode;this.callEvent((this._edit_id?&quot;onEditKeyPress&quot;:&quot;onKeyPress&quot;),[a,c.ctrlKey,c.shiftKey,c])}};dhtmlx.MouseEvents={ahY:function(){if(this.on_click){dhtmlx.event(this._obj,&quot;click&quot;,this._onClick,this);dhtmlx.event(this._obj,&quot;contextmenu&quot;,this._onContext,this)}if(this.on_dblclick){dhtmlx.event(this._obj,&quot;dblclick&quot;,this._onDblClick,this)}if(this.on_mouse_move){dhtmlx.event(this._obj,&quot;mousemove&quot;,this._onMouse,this);dhtmlx.event(this._obj,(dhtmlx._isIE?&quot;mouseleave&quot;:&quot;mouseout&quot;),this._onMouse,this)}},_onClick:function(a){return this._mouseEvent(a,this.on_click,&quot;ItemClick&quot;)},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,&quot;ItemDblClick&quot;)},_onContext:function(a){var c=dhtmlx.html.locate(a,this._id);if(c&amp;&amp; !this.callEvent(&quot;onBeforeContextMenu&quot;,[c,a])){return dhtmlx.html.preventEvent(a)}},_onMouse:function(a){if(dhtmlx._isIE){a=document.createEventObject(event)}if(this._mouse_move_timer){window.clearTimeout(this._mouse_move_timer)}this.callEvent(&quot;onMouseMoving&quot;,[a]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){if(a.type==&quot;mousemove&quot;){this._onMouseMove(a)}else{this._onMouseOut(a)}},this),500)},_onMouseMove:function(a){if(!this._mouseEvent(a,this.on_mouse_move,&quot;MouseMove&quot;)){this.callEvent(&quot;onMouseOut&quot;,[a||event])}},_onMouseOut:function(a){this.callEvent(&quot;onMouseOut&quot;,[a||event])},_mouseEvent:function(m,l,c){m=m||event;var a=m.target||m.srcElement;var g=&quot;&quot;;var n=null;var h=false;while(a&amp;&amp;a.parentNode){if(!h&amp;&amp;a.getAttribute){n=a.getAttribute(this._id);if(n){if(a.getAttribute(&quot;userdata&quot;)){this.callEvent(&quot;onLocateData&quot;,[n,a])}if(!this.callEvent(&quot;on&quot;+c,[n,m,a])){return}h=true}}g=a.className;if(g){g=g.split(&quot; &quot;);g=g[0]||g[1];if(l[g]){return l[g].call(this,m,n||dhtmlx.html.locate(m,this._id),a)}}a=a.parentNode}return h}};dhtmlx.Settings={ahY:function(){this._settings=this.config={}},define:function(c,a){if(typeof c==&quot;object&quot;){return this._parseSeetingColl(c)}return this._define(c,a)},_define:function(c,a){dhtmlx.assert_settings.call(this,c,a);var g=this[c+&quot;_setter&quot;];return this._settings[c]=g?g.call(this,a):a},_parseSeetingColl:function(g){if(g){for(var c in g){this._define(c,g[c])}}},_parseSettings:function(g,a){var c=dhtmlx.extend({},a);if(typeof g==&quot;object&quot;&amp;&amp; !g.tagName){dhtmlx.extend(c,g)}this._parseSeetingColl(c)},_mergeSettings:function(a,g){for(var c in g){switch(typeof a[c]){case &quot;object&quot;:a[c]=this._mergeSettings((a[c]||{}),g[c]);break;case &quot;undefined&quot;:a[c]=g[c];break;default:break}}return a},_parseContainer:function(c,a,g){if(typeof c==&quot;object&quot;&amp;&amp; !c.tagName){c=c.container}this._obj=this.$view=dhtmlx.toNode(c);if(!this._obj&amp;&amp;g){this._obj=g(c)}dhtmlx.assert(this._obj,&quot;Incorrect html container&quot;);this._obj.className+=&quot; &quot;+a;this._obj.onselectstart=function(){return false};this._dataobj=this._obj},_set_type:function(a){if(typeof a==&quot;object&quot;){return this.type_setter(a)}dhtmlx.assert(this.types,&quot;RenderStack :: Types are not defined&quot;);dhtmlx.assert(this.types[a],&quot;RenderStack :: Inccorect type name&quot;,a);this.type=dhtmlx.extend({},this.types[a]);this.customize()},customize:function(a){if(a){dhtmlx.extend(this.type,a)}this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.ht()},type_setter:function(a){this._set_type(typeof a==&quot;object&quot;?dhtmlx.Type.add(this,a):a);return a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){this._obj.className+=&quot; &quot;+a;return a}};dhtmlx.Template={_cache:{},empty:function(){return &quot;&quot;},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(c){var a=dhtmlx.Template.setter(c);var g=this;return function(){return a.apply(g,arguments)}},fromHTML:function(a){if(typeof a==&quot;function&quot;){return a}if(this._cache[a]){return this._cache[a]}a=(a||&quot;&quot;).toString();a=a.replace(/[\r\n]+/g,&quot;\\n&quot;);a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'&quot;+(obj.$1?&quot;$2&quot;:&quot;$3&quot;)+&quot;');a=a.replace(/\{common\.([^}\(]*)\}/g,'&quot;+common.$1+&quot;');a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'&quot;+(common.$1?common.$1(obj):&quot;&quot;)+&quot;');a=a.replace(/\{obj\.([^}]*)\}/g,'&quot;+obj.$1+&quot;');a=a.replace(/#([a-z0-9_]+)#/gi,'&quot;+obj.$1+&quot;');a=a.replace(/\{obj\}/g,'&quot;+obj+&quot;');a=a.replace(/\{-obj/g,&quot;{obj&quot;);a=a.replace(/\{-common/g,&quot;{common&quot;);a='return &quot;'+a+'&quot;;';return this._cache[a]=Function(&quot;obj&quot;,&quot;common&quot;,a)}};dhtmlx.Type={add:function(g,c){if(!g.types&amp;&amp;g.prototype.types){g=g.prototype}if(dhtmlx.assert_enabled()){this.assert_event(c)}var a=c.name||&quot;default&quot;;this._template(c);this._template(c,&quot;edit&quot;);this._template(c,&quot;loading&quot;);g.types[a]=dhtmlx.extend(dhtmlx.extend({},(g.types[a]||this._default)),c);return a},_default:{css:&quot;default&quot;,template:function(){return &quot;&quot;},template_edit:function(){return &quot;&quot;},template_loading:function(){return &quot;...&quot;},width:150,height:80,margin:5,padding:0},_template:function(g,a){a=&quot;template&quot;+(a?(&quot;_&quot;+a):&quot;&quot;);var c=g[a];if(c&amp;&amp;(typeof c==&quot;string&quot;)){if(c.indexOf(&quot;-&gt;&quot;)!= -1){c=c.split(&quot;-&gt;&quot;);switch(c[0]){case &quot;html&quot;:c=dhtmlx.html.getValue(c[1]).replace(/\&quot;/g,'\\&quot;');break;case &quot;http&quot;:c=new dhtmlx.ajax().sync().get(c[1],{uid:(new Date()).valueOf()}).responseText;break;default:break}}g[a]=dhtmlx.Template.fromHTML(c)}}};dhtmlx.SingleRender={ahY:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},ht:function(){if(!this.callEvent||this.callEvent(&quot;onBeforeRender&quot;,[this.data])){if(this.data){this._dataobj.innerHTML=this._toHTML(this.data)}if(this.callEvent){this.callEvent(&quot;onAfterRender&quot;,[])}}}};dhtmlx.ui.Tooltip=function(a){this.name=&quot;Tooltip&quot;;this.version=&quot;3.0&quot;;if(dhtmlx.assert_enabled()){this._assert()}if(typeof a==&quot;string&quot;){a={template:a}}dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(a,{type:&quot;default&quot;,dy:0,dx:20});this._dataobj=this._obj=document.createElement(&quot;DIV&quot;);this._obj.className=&quot;dhx_tooltip&quot;;dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(a,c){if(this._disabled){return}if(this.data!=a){this.data=a;this.ht(a)}this._obj.style.top=c.y+this._settings.dy+&quot;px&quot;;this._obj.style.left=c.x+this._settings.dx+&quot;px&quot;;this._obj.style.display=&quot;block&quot;},hide:function(){this.data=null;this._obj.style.display=&quot;none&quot;},disable:function(){this._disabled=true},enable:function(){this._disabled=false},types:{&quot;default&quot;:dhtmlx.Template.fromHTML(&quot;{obj.id}&quot;)},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(c){var a=new dhtmlx.ui.Tooltip(c);this.attachEvent(&quot;onMouseMove&quot;,function(h,g){a.show(this.get(h),dhtmlx.html.pos(g))});this.attachEvent(&quot;onMouseOut&quot;,function(h,g){a.hide()});this.attachEvent(&quot;onMouseMoving&quot;,function(h,g){a.hide()});return a}};dhtmlx.compat=function(a,c){if(dhtmlx.compat[a]){dhtmlx.compat[a](c)}};(function(){if(!window.dhtmlxError){var c=function(){};window.dhtmlxError={mP:c,gn:c};window.ap=function(g){return! !g};window.dhtmlxEventable=function(g){dhtmlx.extend(g,dhtmlx.EventSystem)};var a={cR:function(g){},et:function(g){return dhtmlx.DataDriver.xml.xpath(this.xml,g)},ai:{responseXML:true}};dhtmlx.compat.Iq=function(m){var g=&quot;_sendData&quot;;var h=&quot;_in_progress&quot;;var n=&quot;_tMode&quot;;var l=&quot;_waitMode&quot;;m[g]=function(q,r){if(!q){return}if(r){this[h][r]=(new Date()).valueOf()}if(!this.callEvent(&quot;onBeforeDataSending&quot;,r?[r,this.YA(r)]:[])){return false}var o=this;var s=this.cj;if(this[n]!=&quot;POST&quot;){dhtmlx.ajax().get(s+((s.indexOf(&quot;?&quot;)!= -1)?&quot;&amp;&quot;:&quot;?&quot;)+this.serialize(q,r),&quot;&quot;,function(w,u,v){a.xml=dhtmlx.DataDriver.xml.checkResponse(w,u);o.afterUpdate(o,null,null,null,a)})}else{dhtmlx.ajax().post(s,this.serialize(q,r),function(w,u,v){a.xml=dhtmlx.DataDriver.xml.checkResponse(w,u);o.afterUpdate(o,null,null,null,a)})}this[l]++}}}})();if(!dhtmlx.attaches){dhtmlx.attaches={}}dhtmlx.attaches.attachAbstract=function(c,a){var l=document.createElement(&quot;DIV&quot;);l.id=&quot;CustomObject_&quot;+dhtmlx.uid();l.style.width=&quot;100%&quot;;l.style.height=&quot;100%&quot;;l.arj=&quot;grid&quot;;document.body.appendChild(l);this.attachObject(l.id);a.container=l.id;var h=this.vs[this.av];h.grid=new window[c](a);h.gridId=l.id;h.gridObj=l;h.grid.setSizes=function(){if(this.resize){this.resize()}else{this.ht()}};var g=&quot;_viewRestore&quot;;return this.vs[this[g]()].grid};dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract(&quot;dhtmlXDataView&quot;,a)};dhtmlx.attaches.attachChart=function(a){return this.attachAbstract(&quot;dhtmlXChart&quot;,a)};dhtmlx.compat.layout=function(){};function Iq(a){this.cj=a;this.action_param=&quot;!nativeeditor_status&quot;;this.object=null;this.bE=[];this.aH=true;this.cJ=&quot;cell&quot;;this.hR=&quot;GET&quot;;this.post_delim=&quot;_&quot;;this.ef=0;this._in_progress={};this._invalid={};this.az=[];this.messages=[];this.akR={updated:&quot;font-weight:bold;&quot;,inserted:&quot;font-weight:bold;&quot;,deleted:&quot;text-decoration : line-through;&quot;,invalid:&quot;background-color:FFE0E0;&quot;,invalid_cell:&quot;border-bottom:2px solid red;&quot;,error:&quot;color:red;&quot;,clear:&quot;font-weight:normal;text-decoration:none;&quot;};this.enableUTFencoding(true);dhtmlxEventable(this);return this}Iq.prototype={JI:function(c,a){this.hR=c;this.gW=a},escape:function(a){if(this.ahf){return encodeURIComponent(a)}else{return escape(a)}},enableUTFencoding:function(a){this.ahf=ap(a)},setDataColumns:function(a){this._columns=(typeof a==&quot;string&quot;)?a.split(&quot;,&quot;):a},iM:function(){return!this.bE.length},ahP:function(a){this.iO=ap(a)},enablePartialDataSend:function(a){this._changed=ap(a)},mq:function(c,a){this.aH=(c==&quot;cell&quot;);this.cJ=c;this.dnd=a},ignore:function(c,a){this._silent_mode=true;c.call(a||window);this._silent_mode=false},setUpdated:function(h,g,l){if(this._silent_mode){return}var c=this.iv(h);l=l||&quot;updated&quot;;var a=this.obj.getUserData(h,this.action_param);if(a&amp;&amp;l==&quot;updated&quot;){l=a}if(g){this.set_invalid(h,false);this.bE[c]=h;this.obj.setUserData(h,this.action_param,l);if(this._in_progress[h]){this._in_progress[h]=&quot;wait&quot;}}else{if(!this.is_invalid(h)){this.bE.splice(c,1);this.obj.setUserData(h,this.action_param,&quot;&quot;)}}if(!g){this._clearUpdateFlag(h)}this.markRow(h,g,l);if(g&amp;&amp;this.aH){this.sendData(h)}},_clearUpdateFlag:function(a){},markRow:function(m,g,l){var h=&quot;&quot;;var c=this.is_invalid(m);if(c){h=this.akR[c];g=true}if(this.callEvent(&quot;onRowMark&quot;,[m,g,l,c])){h=this.akR[g?l:&quot;clear&quot;]+h;this.obj[this._methods[0]](m,h);if(c&amp;&amp;c.details){h+=this.akR[c+&quot;_cell&quot;];for(var a=0;a&lt;c.details.length;a++){if(c.details[a]){this.obj[this._methods[1]](m,a,h)}}}}},YA:function(a){return this.obj.getUserData(a,this.action_param)},is_invalid:function(a){return this._invalid[a]},set_invalid:function(g,c,a){if(a){c={value:c,details:a,toString:function(){return this.value.toString()}}}this._invalid[g]=c},aZ:function(a){return true},sendData:function(a){if(this.ef&amp;&amp;(this.obj.acE==&quot;tree&quot;||this.obj._h2)){return}if(this.obj.editStop){this.obj.editStop()}if(typeof a==&quot;undefined&quot;||this.gW){return this.sendAllData()}if(this._in_progress[a]){return false}this.messages=[];if(!this.aZ(a)&amp;&amp;this.callEvent(&quot;onValidationError&quot;,[a,this.messages])){return false}this._beforeSendData(this.fD(a),a)},_beforeSendData:function(a,c){if(!this.callEvent(&quot;onBeforeUpdate&quot;,[c,this.YA(c),a])){return false}this._sendData(a,c)},serialize:function(h,l){if(typeof h==&quot;string&quot;){return h}if(typeof l!=&quot;undefined&quot;){return this.serialize_one(h,&quot;&quot;)}else{var a=[];var g=[];for(var c in h){if(h.hasOwnProperty(c)){a.push(this.serialize_one(h[c],c+this.post_delim));g.push(c)}}a.push(&quot;ids=&quot;+this.escape(g.join(&quot;,&quot;)));if(dhtmlx.security_key){a.push(&quot;dhx_security=&quot;+dhtmlx.security_key)}return a.join(&quot;&amp;&quot;)}},serialize_one:function(h,c){if(typeof h==&quot;string&quot;){return h}var a=[];for(var g in h){if(h.hasOwnProperty(g)){a.push(this.escape((c||&quot;&quot;)+g)+&quot;=&quot;+this.escape(h[g]))}}return a.join(&quot;&amp;&quot;)},_sendData:function(c,g){if(!c){return}if(!this.callEvent(&quot;onBeforeDataSending&quot;,g?[g,this.YA(g),c]:[null,null,c])){return false}if(g){this._in_progress[g]=(new Date()).valueOf()}var a=new ag(this.afterUpdate,this,true);var h=this.cj+(this._user?(jv(this.cj)+[&quot;dhx_user=&quot;+this._user,&quot;dhx_version=&quot;+this.obj.getUserData(0,&quot;version&quot;)].join(&quot;&amp;&quot;)):&quot;&quot;);if(this.hR!=&quot;POST&quot;){a.loadXML(h+((h.indexOf(&quot;?&quot;)!= -1)?&quot;&amp;&quot;:&quot;?&quot;)+this.serialize(c,g))}else{a.loadXML(h,true,this.serialize(c,g))}this.ef++},sendAllData:function(){if(!this.bE.length){return}this.messages=[];var c=true;for(var a=0;a&lt;this.bE.length;a++){c&amp;=this.aZ(this.bE[a])}if(!c&amp;&amp; !this.callEvent(&quot;onValidationError&quot;,[&quot;&quot;,this.messages])){return false}if(this.gW){this._sendData(this.ahb())}else{for(var a=0;a&lt;this.bE.length;a++){if(!this._in_progress[this.bE[a]]){if(this.is_invalid(this.bE[a])){continue}this._beforeSendData(this.fD(this.bE[a]),this.bE[a]);if(this.ef&amp;&amp;(this.obj.acE==&quot;tree&quot;||this.obj._h2)){return}}}}},ahb:function(h){var c={};var a=false;for(var g=0;g&lt;this.bE.length;g++){var l=this.bE[g];if(this._in_progress[l]||this.is_invalid(l)){continue}if(!this.callEvent(&quot;onBeforeUpdate&quot;,[l,this.YA(l)])){continue}c[l]=this.fD(l,l+this.post_delim);a=true;this._in_progress[l]=(new Date()).valueOf()}return a?c:null},xU:function(c,a){this.az[c]=a||(function(g){return(g!=&quot;&quot;)})},hX:function(a){this.az[a]=false},iv:function(c){var a=0;for(a=0;a&lt;this.bE.length;a++){if(c==this.bE[a]){break}}return a},alx:function(a,c){if(!this.aF){this.aF=[]}this.aF[a]=c},afterUpdateCallback:function(c,n,m,l){var a=c;var h=(m!=&quot;error&quot;&amp;&amp;m!=&quot;invalid&quot;);if(!h){this.set_invalid(c,m)}if((this.aF)&amp;&amp;(this.aF[m])&amp;&amp;(!this.aF[m](l))){return(delete this._in_progress[a])}if(this._in_progress[a]!=&quot;wait&quot;){this.setUpdated(c,false)}var g=c;switch(m){case &quot;inserted&quot;:case &quot;insert&quot;:if(n!=c){this.obj[this._methods[2]](c,n);c=n}break;case &quot;delete&quot;:case &quot;deleted&quot;:this.obj.setUserData(c,this.action_param,&quot;true_deleted&quot;);this.obj[this._methods[3]](c);delete this._in_progress[a];return this.callEvent(&quot;onAfterUpdate&quot;,[c,m,n,l]);break}if(this._in_progress[a]!=&quot;wait&quot;){if(h){this.obj.setUserData(c,this.action_param,&quot;&quot;)}delete this._in_progress[a]}else{delete this._in_progress[a];this.setUpdated(n,true,this.obj.getUserData(c,this.action_param))}this.callEvent(&quot;onAfterUpdate&quot;,[g,m,n,l])},afterUpdate:function(o,u,r,q,n){n.cR(&quot;data&quot;);if(!n.ai.responseXML){return}var s=n.et(&quot;//data/action&quot;);for(var l=0;l&lt;s.length;l++){var m=s[l];var h=m.getAttribute(&quot;type&quot;);var a=m.getAttribute(&quot;sid&quot;);var g=m.getAttribute(&quot;tid&quot;);o.afterUpdateCallback(a,g,h,m)}o.finalizeUpdate()},finalizeUpdate:function(){if(this.ef){this.ef--}if((this.obj.acE==&quot;tree&quot;||this.obj._h2)&amp;&amp;this.bE.length){this.sendData()}this.callEvent(&quot;onAfterUpdateFinish&quot;,[]);if(!this.bE.length){this.callEvent(&quot;onFullSync&quot;,[])}},init:function(a){this.obj=a;if(this.obj._dp_init){this.obj._dp_init(this)}},afd:function(a){this.attachEvent(&quot;onAfterUpdate&quot;,a)},iU:function(a){},gS:function(a){this.attachEvent(&quot;onBeforeDataSending&quot;,a)},setAutoUpdate:function(g,c){g=g||2000;this._user=c||(new Date()).valueOf();this._need_update=false;this._loader=null;this._update_busy=false;this.attachEvent(&quot;onAfterUpdate&quot;,function(h,m,n,l){this.afterAutoUpdate(h,m,n,l)});this.attachEvent(&quot;onFullSync&quot;,function(){this.fullSync()});var a=this;window.setInterval(function(){a.loadUpdate()},g)},afterAutoUpdate:function(a,g,h,c){if(g==&quot;collision&quot;){this._need_update=true;return false}else{return true}},fullSync:function(){if(this._need_update==true){this._need_update=false;this.loadUpdate()}return true},getUpdates:function(a,c){if(this._update_busy){return false}else{this._update_busy=true}this._loader=this._loader||new ag(true);this._loader.async=true;this._loader.aA=c;this._loader.loadXML(a)},_v:function(a){if(a.firstChild){return a.firstChild.nodeValue}return &quot;&quot;},asA:function(a){var g=[];for(var c=0;c&lt;a.length;c++){g[c]=this._v(a[c])}return g},loadUpdate:function(){var c=this;var a=this.obj.getUserData(0,&quot;version&quot;);var g=this.cj+jv(this.cj)+[&quot;dhx_user=&quot;+this._user,&quot;dhx_version=&quot;+a].join(&quot;&amp;&quot;);g=g.replace(&quot;editing=true&amp;&quot;,&quot;&quot;);this.getUpdates(g,function(){var m=c._loader.et(&quot;//userdata&quot;);c.obj.setUserData(0,&quot;version&quot;,c._v(m[0]));var h=c._loader.et(&quot;//update&quot;);if(h.length){c._silent_mode=true;for(var n=0;n&lt;h.length;n++){var l=h[n].getAttribute(&quot;status&quot;);var q=h[n].getAttribute(&quot;id&quot;);var o=h[n].getAttribute(&quot;parent&quot;);switch(l){case &quot;inserted&quot;:c.callEvent(&quot;insertCallback&quot;,[h[n],q,o]);break;case &quot;updated&quot;:c.callEvent(&quot;updateCallback&quot;,[h[n],q,o]);break;case &quot;deleted&quot;:c.callEvent(&quot;deleteCallback&quot;,[h[n],q,o]);break}}c._silent_mode=false}c._update_busy=false;c=null})}};function dhtmlXCellObject(g,a){this.cell=document.createElement(&quot;DIV&quot;);this.cell.className=&quot;dhx_cell&quot;+(a||&quot;&quot;);this._idd=g;this._isCell=true;this.kZ={borders:true,idx:{},css:a||&quot;&quot;,idx_data:{vI:&quot;dhx_cell_cont&quot;,pr1:&quot;dhx_cell_progress_bar&quot;,pr2:&quot;dhx_cell_progress_img&quot;,menu:&quot;dhx_cell_menu&quot;,toolbar:&quot;dhx_cell_toolbar&quot;,ribbon:&quot;dhx_cell_ribbon&quot;,sb:&quot;dhx_cell_statusbar&quot;},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var c=document.createElement(&quot;DIV&quot;);c.className=&quot;dhx_cell_cont&quot;+this.kZ.css;this.cell.appendChild(c);c=null;this._updateIdx=function(){for(var h in this.kZ.idx){this.kZ.idx[h]=null;delete this.kZ.idx[h]}for(var n=0;n&lt;this.cell.childNodes.length;n++){var l=this.cell.childNodes[n].className;for(var h in this.kZ.idx_data){var m=new RegExp(this.kZ.idx_data[h]);if(l.match(m)!=null){this.kZ.idx[h]=n}}}this.callEvent(&quot;_onIdxUpdated&quot;,[])};this._adjustAttached=function(){for(var h in this.dataNodes){if(this.dataNodes[h]!=null&amp;&amp;typeof(this.dataNodes[h].setSizes)==&quot;function&quot;){this.dataNodes[h].setSizes()}}if(this.dataObj!=null&amp;&amp;typeof(this.dataObj.setSizes)==&quot;function&quot;){this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(m,s,n,q,r,l,o){if(!this.kZ.size){this.kZ.size={}}this.kZ.size.x=m;this.kZ.size.y=s;this.kZ.size.w=n;this.kZ.size.h=q;this.cell.style.left=m+&quot;px&quot;;this.cell.style.top=s+&quot;px&quot;;this.cell.style.width=n+&quot;px&quot;;this.cell.style.height=q+&quot;px&quot;;this.callEvent(&quot;_onSetSize&quot;,[]);if(l!==true){this._adjustCont(r,o)}else{this._adjustAttached(r)}this._adjustProgress()};this._adjustCont=function(q,n){var o=this.cell.childNodes[this.kZ.idx.vI];var m=0;for(var h in this.kZ.ofs_nodes.t){var l=this.kZ.ofs_nodes.t[h];m+=(l==&quot;func&quot;?this[h]():(l==true?this.cell.childNodes[this.kZ.idx[h]].offsetHeight:0))}var r=0;for(var h in this.kZ.ofs_nodes.b){var l=this.kZ.ofs_nodes.b[h];r+=(l==&quot;func&quot;?this[h]():(l==true?this.cell.childNodes[this.kZ.idx[h]].offsetHeight:0))}o.style.left=&quot;0px&quot;;o.style.top=m+&quot;px&quot;;if(!this.kZ.cells_cont){this.kZ.cells_cont={};o.style.width=this.cell.offsetWidth+&quot;px&quot;;o.style.height=Math.max(this.cell.offsetHeight-m-r,0)+&quot;px&quot;;this.kZ.cells_cont.w=parseInt(o.style.width)-o.offsetWidth;this.kZ.cells_cont.h=parseInt(o.style.height)-o.offsetHeight}o.style.left=&quot;0px&quot;;o.style.top=m+&quot;px&quot;;o.style.width=Math.max(this.cell.offsetWidth+this.kZ.cells_cont.w,0)+&quot;px&quot;;o.style.height=Math.max(this.kZ.size.h-m-r+this.kZ.cells_cont.h,0)+&quot;px&quot;;o=null;this._adjustAttached(q);if(n==&quot;expand&quot;&amp;&amp;this.dataType==&quot;editor&quot;&amp;&amp;this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var l=[&quot;menu&quot;,&quot;toolbar&quot;];for(var n=0;n&lt;l.length;n++){if(this.kZ.idx[l[n]]!=null){var o=this.cell.childNodes[this.kZ.idx[l[n]]];var m=&quot;dhx_cell_&quot;+l[n]+&quot;_no_borders&quot;;var h=&quot;dhx_cell_&quot;+l[n]+&quot;_def&quot;;o.className=o.className.replace(new RegExp(this.kZ.borders?m:h),this.kZ.borders?h:m);o=null}}};this._resetSizeState=function(){this.kZ.cells_cont=null};this.kZ.view=&quot;def&quot;;this.kZ.views_loaded={};this.kZ.views_loaded[this.kZ.view]=true;this._viewSave=function(m){this.views[m]={borders:this.kZ.borders,ofs_nodes:{t:{},b:{}},dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var n=this.cell.childNodes[this.kZ.idx.vI];while(n.childNodes.length&gt;0){this.views[m].cellCont.push(n.firstChild);n.removeChild(n.firstChild)}this.dataType=null;this.dataObj=null;for(var l in this.dataNodes){for(var h in this.kZ.ofs_nodes){if(typeof(this.kZ.ofs_nodes[h][l])!=&quot;undefined&quot;){this.views[m].ofs_nodes[h][l]=this.kZ.ofs_nodes[h][l];this.kZ.ofs_nodes[h][l]=null;delete this.kZ.ofs_nodes[h][l]}}this.views[m].dataNodesCont[l]=this.cell.childNodes[this.kZ.idx[l]];this.cell.removeChild(this.cell.childNodes[this.kZ.idx[l]]);this.views[m].dataNodes[l]=this.dataNodes[l];this.dataNodes[l]=null;delete this.dataNodes[l];this._updateIdx()}this.callEvent(&quot;_onViewSave&quot;,[m])};this._viewRestore=function(m){if(this.views[m]==null){return}this.dataObj=this.views[m].dataObj;this.dataType=this.views[m].dataType;for(var n=0;n&lt;this.views[m].cellCont.length;n++){this.cell.childNodes[this.kZ.idx.vI].appendChild(this.views[m].cellCont[n])}for(var l in this.views[m].dataNodes){this.dataNodes[l]=this.views[m].dataNodes[l];if(l==&quot;menu&quot;){this.cell.insertBefore(this.views[m].dataNodesCont[l],this.cell.childNodes[this.kZ.idx.toolbar||this.kZ.idx.vI])}if(l==&quot;toolbar&quot;){this.cell.insertBefore(this.views[m].dataNodesCont[l],this.cell.childNodes[this.kZ.idx.vI])}if(l==&quot;sb&quot;){this.cell.appendChild(this.views[m].dataNodesCont[l])}this._updateIdx()}for(var l in this.views[m].ofs_nodes){for(var h in this.views[m].ofs_nodes[l]){this.kZ.ofs_nodes[l][h]=this.views[m].ofs_nodes[l][h]}}if(this.kZ.borders!=this.views[m].borders){this[this.views[m].borders?&quot;_showBorders&quot;:&quot;_hideBorders&quot;](true)}this.callEvent(&quot;_onViewRestore&quot;,[m]);this._viewDelete(m)};this._viewDelete=function(m){if(this.views[m]==null){return}this.views[m].borders=null;for(var l in this.views[m].ofs_nodes){for(var h in this.views[m].ofs_nodes[l]){this.views[m].ofs_nodes[l][h]=null}this.views[m].ofs_nodes[l]=null}this.views[m].dataType=null;this.views[m].dataObj=null;for(var n=0;n&lt;this.views[m].cellCont.length;n++){this.views[m].cellCont[n]=null}this.views[m].cellCont=null;for(var l in this.views[m].dataNodes){this.views[m].dataNodes[l]=null;this.views[m].dataNodesCont[l]=null}this.views[m].dataNodes=this.views[m].dataNodesCont=null;this.views[m]=null;delete this.views[m]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.kZ.view==a){return false}this._viewSave(this.kZ.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.kZ.view=a;var c=(typeof(this.kZ.views_loaded[this.kZ.view])==&quot;undefined&quot;);this.kZ.views_loaded[this.kZ.view]=true;return c};dhtmlXCellObject.prototype.getViewName=function(){return this.kZ.view};dhtmlXCellObject.prototype.unloadView=function(h){if(h==this.kZ.view){var l=this.kZ.unloading;this.kZ.unloading=true;this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon();this._detachObject(null,true);this.kZ.unloading=l;if(!this.kZ.unloading){this._adjustCont(this._idd)}return}if(this.views[h]==null){return}var g=this.views[h];for(var c in g.dataNodes){if(typeof(g.dataNodes[c].unload)==&quot;function&quot;){g.dataNodes[c].unload()}g.dataNodes[c]=null;g.dataNodesCont[c]=null}if(g.dataType==&quot;url&quot;){if(g.cellCont!=null&amp;&amp;g.cellCont[0]!=&quot;null&quot;){this._detachURLEvents(g.cellCont[0])}}else{if(g.dataObj!=null){if(typeof(g.dataObj.unload)==&quot;function&quot;){g.dataObj.unload()}else{if(typeof(g.dataObj.fA)==&quot;function&quot;){g.dataObj.fA()}}g.dataObj=null}}g=null;this._viewDelete(h);if(typeof(this.kZ.views_loaded[h])!=&quot;undefined&quot;){delete this.kZ.views_loaded[h]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.kZ.progress){return}this.kZ.progress=true;var c=document.createElement(&quot;DIV&quot;);c.className=&quot;dhx_cell_progress_bar&quot;;this.cell.appendChild(c);var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhx_cell_progress_img&quot;;this.cell.appendChild(a);c=a=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(!this.kZ.progress){return}this.cell.childNodes[this.kZ.idx.pr2].parentNode.removeChild(this.cell.childNodes[this.kZ.idx.pr2]);this.cell.childNodes[this.kZ.idx.pr1].parentNode.removeChild(this.cell.childNodes[this.kZ.idx.pr1]);this.kZ.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.kZ.idx.pr1==null){return}if(!this.kZ.pr){this.kZ.pr={}}var c=this.cell.childNodes[this.kZ.idx.pr1];var a=this.cell.childNodes[this.kZ.idx.pr2];if(!this.kZ.pr.ofs){a.style.width=c.offsetWidth+&quot;px&quot;;a.style.height=c.offsetHeight+&quot;px&quot;;this.kZ.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}}a.style.width=c.offsetWidth-this.kZ.pr.ofs.w+&quot;px&quot;;a.style.height=c.offsetHeight-this.kZ.pr.ofs.h+&quot;px&quot;;c=a=null};dhtmlXCellObject.prototype._showBorders=function(a){if(this.kZ.borders){return}this.kZ.borders=true;this.cell.childNodes[this.kZ.idx.vI].className=&quot;dhx_cell_cont&quot;+this.kZ.css;this.kZ.cells_cont=null;this._mtbUpdBorder();this.callEvent(&quot;_onBorderChange&quot;,[true]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(a){if(!this.kZ.borders){return}this.kZ.borders=false;this.cell.childNodes[this.kZ.idx.vI].className=&quot;dhx_cell_cont&quot;+this.kZ.css+&quot; dhx_cell_cont_no_borders&quot;;this.kZ.cells_cont=null;this._mtbUpdBorder();this.callEvent(&quot;_onBorderChange&quot;,[false]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.kZ.idx.vI].style.overflow=&quot;auto&quot;};dhtmlXCellObject.prototype._unload=function(){this.kZ.unloading=true;this.callEvent(&quot;_onCellUnload&quot;,[]);this.progressOff();this.unloadView(this.kZ.view);this.dataNodes=null;this.kZ=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,&quot;clear&quot;);for(var c in this.views){this.unloadView(c)}for(var c in this){this[c]=null}};dhtmlXCellObject.prototype.attachObject=function(l,g){if(window.dhx4.s2b(g)&amp;&amp; !(typeof(window.dhtmlXWindowsCell)!=&quot;undefined&quot;&amp;&amp;(this instanceof window.dhtmlXWindowsCell))){g=false}if(typeof(l)==&quot;string&quot;){l=document.getElementById(l)}if(l.parentNode==this.cell.childNodes[this.kZ.idx.vI]){l=null;return}if(g){l.style.display=&quot;&quot;;var a=l.offsetWidth;var c=l.offsetHeight}this._attachObject(l);this.dataType=&quot;obj&quot;;l.style.display=&quot;&quot;;l=null;if(g){this._adjustByCont(a,c)}};dhtmlXCellObject.prototype.appendObject=function(a){if(typeof(a)==&quot;string&quot;){a=document.getElementById(a)}if(a.parentNode==this.cell.childNodes[this.kZ.idx.vI]){a=null;return}if(!this.kZ.append_mode){this.cell.childNodes[this.kZ.idx.vI].style.overflow=&quot;auto&quot;;this.kZ.append_mode=true}this._attachObject(a,null,null,true);this.dataType=&quot;obj&quot;;a.style.display=&quot;&quot;;a=null};dhtmlXCellObject.prototype.detachObject=function(c,a){this._detachObject(null,c,a)};dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){return this.dataObj};dhtmlXCellObject.prototype.attachURL=function(c,r,g){if(g==true){g={}}var h=(typeof(g)!=&quot;undefined&quot;&amp;&amp;g!=false&amp;&amp;g!=null);if(!this.kZ.url_data){this.kZ.url_data={}}this.kZ.url_data.url=c;this.kZ.url_data.ajax=(r==true);this.kZ.url_data.post_data=(g==true?{}:(g||null));if(r==true){var q=this;if(h){var l=&quot;&quot;;for(var o in g){l+=&quot;&amp;&quot;+encodeURIComponent(o)+&quot;=&quot;+encodeURIComponent(g[o])}dhx4.ajax.post(c,l,function(a){q.attachHTMLString(&quot;<DIV style="position:relative;width:100%;height:100%;overflow:auto;">&quot;+a.ai.responseText+&quot;</DIV>&quot;);if(typeof(q._doOnFrameContentLoaded)==&quot;function&quot;){q._doOnFrameContentLoaded()}q.dataType=&quot;url-ajax&quot;;q=a=null})}else{dhx4.ajax.get(c,function(a){q.attachHTMLString(&quot;<DIV style="position:relative;width:100%;height:100%;overflow:auto;">&quot;+a.ai.responseText+&quot;</DIV>&quot;);if(typeof(q._doOnFrameContentLoaded)==&quot;function&quot;){q._doOnFrameContentLoaded()}q.dataType=&quot;url-ajax&quot;;q=a=null})}}else{if(this.dataType==&quot;url&quot;){var m=this.getFrame()}else{var m=document.createElement(&quot;IFRAME&quot;);m.frameBorder=0;m.border=0;m.style.width=&quot;100%&quot;;m.style.height=&quot;100%&quot;;m.style.position=&quot;relative&quot;;this._attachObject(m);this.dataType=&quot;url&quot;;this._attachURLEvents()}if(h){var n=(typeof(this.kZ.url_data.post_ifr)==&quot;undefined&quot;);this.kZ.url_data.post_ifr=true;if(n){this._attachURLEvents()}m.src=&quot;about:blank&quot;}else{m.src=c+(c.indexOf(&quot;?&quot;)&gt;=0?&quot;&amp;&quot;:&quot;?&quot;)+&quot;dhxr&quot;+new Date().getTime()}m=null}m=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType==&quot;url&quot;||this.dataType==&quot;url-ajax&quot;)){return}if(this.kZ.url_data==null){return}this.attachURL(this.kZ.url_data.url,this.kZ.url_data.ajax,this.kZ.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/&lt;script[^&gt;]*&gt;[^\f]*?&lt;\/script&gt;/g)||[];for(var i=0;i&lt;z.length;i++){var s=z[i].replace(/&lt;([\/]{0,1})script[^&gt;]*&gt;/gi,&quot;&quot;);if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachLayout=function(a){if(this.kZ.skin==&quot;dhx_skyblue&quot;&amp;&amp;typeof(window.dhtmlXWindowsCell)!=&quot;undefined&quot;&amp;&amp;(this instanceof dhtmlXWindowsCell)){}if(this instanceof dhtmlXLayoutCell){this._hideBorders()}var c=document.createElement(&quot;DIV&quot;);c.style.width=&quot;100%&quot;;c.style.height=&quot;100%&quot;;c.style.position=&quot;relative&quot;;c.style.overflow=&quot;hidden&quot;;this._attachObject(c);if(typeof(this._layoutMainInst)!=&quot;undefined&quot;){c._layoutMainInst=this._layoutMainInst}if(this instanceof window.dhtmlXLayoutCell){}if(typeof(window.dhtmlXLayoutCell)!=&quot;undefined&quot;&amp;&amp;this instanceof dhtmlXLayoutCell){c._isParentCell=true}if(typeof(window.dhtmlXAccordionCell)!=&quot;undefined&quot;&amp;&amp;(this instanceof window.dhtmlXAccordionCell)){c._ofs={t: -1}}if(typeof(a)==&quot;string&quot;){a={aiw:a}}if(typeof(a.skin)==&quot;undefined&quot;){a.skin=this.kZ.skin}a.parent=c;this.dataType=&quot;layout&quot;;this.dataObj=new dhtmlXLayoutObject(a);c._layoutMainInst=null;a.parent=null;c=a=null;this.callEvent(&quot;_onContentAttach&quot;,[]);return this.dataObj};dhtmlXCellObject.prototype.attachTree=function(a){var c=document.createElement(&quot;DIV&quot;);c.style.width=&quot;100%&quot;;c.style.height=&quot;100%&quot;;c.style.position=&quot;relative&quot;;c.style.overflow=&quot;hidden&quot;;this._attachObject(c);this.dataType=&quot;tree&quot;;this.dataObj=new dhtmlXTreeObject(c,&quot;100%&quot;,&quot;100%&quot;,(a||0));this.dataObj.setSkin(this.kZ.skin);this.dataObj.cB.childNodes[0].style.marginTop=&quot;2px&quot;;this.dataObj.cB.childNodes[0].style.marginBottom=&quot;2px&quot;;c=null;this.callEvent(&quot;_onContentAttach&quot;,[]);return this.dataObj};dhtmlXCellObject.prototype.attachGrid=function(){var a=document.createElement(&quot;DIV&quot;);a.style.width=&quot;100%&quot;;a.style.height=&quot;100%&quot;;a.style.position=&quot;relative&quot;;a.style.overflow=&quot;hidden&quot;;this._attachObject(a);this.dataType=&quot;grid&quot;;this.dataObj=new dhtmlXGridObject(a);this.dataObj.setSkin(this.kZ.skin);if(this.kZ.skin==&quot;dhx_skyblue&quot;&amp;&amp;typeof(window.dhtmlXWindowsCell)!=&quot;undefined&quot;&amp;&amp;this instanceof window.dhtmlXWindowsCell){this.dataObj.aL.style.border=&quot;1px solid #a4bed4&quot;;this.dataObj.vw=0}else{this.dataObj.aL.style.border=&quot;0px solid white&quot;;this.dataObj.vw=2}a=null;this.callEvent(&quot;_onContentAttach&quot;,[]);return this.dataObj};dhtmlXCellObject.prototype.attachTabbar=function(a){if(typeof(window.dhtmlXLayoutCell)!=&quot;undefined&quot;&amp;&amp;this instanceof dhtmlXLayoutCell){this._hideBorders()}if(typeof(a)==&quot;string&quot;){a={mode:a}}else{if(typeof(a)!=&quot;object&quot;||a==null){a={}}}var c=document.createElement(&quot;DIV&quot;);c.style.width=&quot;100%&quot;;c.style.height=&quot;100%&quot;;c.style.position=&quot;relative&quot;;c.style.overflow=&quot;hidden&quot;;if(typeof(window.dhtmlXAccordionCell)!=&quot;undefined&quot;&amp;&amp;(this instanceof window.dhtmlXAccordionCell)){c._ofs={t: -1}}this._attachObject(c);a.skin=this.kZ.skin;a.parent=c;this.dataType=&quot;tabbar&quot;;this.dataObj=new dhtmlXTabBar(a);a.parent=c=null;a=null;this.callEvent(&quot;_onContentAttach&quot;,[]);return this.dataObj};dhtmlXCellObject.prototype.attachAccordion=function(a){if(typeof(window.dhtmlXWindowsCell)!=&quot;undefined&quot;&amp;&amp;(this instanceof dhtmlXWindowsCell)){}else{if(this._isCell){this._hideBorders()}}var c=document.createElement(&quot;DIV&quot;);c.style.width=&quot;100%&quot;;c.style.height=&quot;100%&quot;;c.style.position=&quot;relative&quot;;this._attachObject(c);if(typeof(a)==&quot;undefined&quot;){a={}}if(typeof(a.skin)==&quot;undefined&quot;){a.skin=this.kZ.skin}a.parent=c;if(typeof(window.dhtmlXAccordionCell)!=&quot;undefined&quot;&amp;&amp;(this instanceof window.dhtmlXAccordionCell)){c._ofs={s:{first: -1},m:{first:4}}}this.dataType=&quot;acc&quot;;this.dataObj=new dhtmlXAccordion(a);a.obj=null;c=a=null;this.callEvent(&quot;_onContentAttach&quot;,[]);return this.dataObj};dhtmlXCellObject.prototype.attachEditor=function(a){var c=document.createElement(&quot;DIV&quot;);c.style.width=&quot;100%&quot;;c.style.height=&quot;100%&quot;;c.style.position=&quot;relative&quot;;c.style.overflow=&quot;hidden&quot;;this._attachObject(c);if(!(typeof(a)==&quot;object&quot;&amp;&amp;a!=null)){a={}}a.parent=c;this.dataType=&quot;editor&quot;;this.dataObj=new dhtmlXEditor(a);c=null;a.parent=null;a=null;this.callEvent(&quot;_onContentAttach&quot;,[]);return this.dataObj};dhtmlXCellObject.prototype.attachDataView=function(a){var c=document.createElement(&quot;DIV&quot;);c.style.width=&quot;100%&quot;;c.style.height=&quot;100%&quot;;c.style.position=&quot;relative&quot;;c.style.overflow=&quot;hidden&quot;;this._attachObject(c);if(typeof(a)==&quot;undefined&quot;){a={}}c.id=&quot;DataViewObject_&quot;+new Date().getTime();a.container=c.id;a.skin=this.kZ.skin;this.dataType=&quot;dataview&quot;;this.dataObj=new dhtmlXDataView(a);this.dataObj.setSizes=function(){this.ht()};c=null;this.callEvent(&quot;_onContentAttach&quot;,[]);return this.dataObj};dhtmlXCellObject.prototype.attachScheduler=function(a,n,c,h){h=h||window.scheduler;var l=false;if(c){var m=document.getElementById(c);if(m){l=true}}if(!l){var g=c||'';var m=document.createElement(&quot;DIV&quot;);m.id=&quot;dhxSchedObj_&quot;+new Date().getTime();m.style.width=&quot;100%&quot;;m.style.height=&quot;100%&quot;;m.style.position=&quot;relative&quot;;m.style.overflow=&quot;hidden&quot;;m.className=&quot;dhx_cal_container&quot;;m.innerHTML='<DIV class="dhx_cal_navline"><DIV class="dhx_cal_prev_button"> </DIV><DIV class="dhx_cal_next_button"> </DIV>'+g+'</DIV>';this._attachObject(m)}this.dataType=&quot;scheduler&quot;;this.dataObj=h;this.dataObj.setSizes=function(){this.update_view()};h.init(m.id,a,n);m=null;this.callEvent(&quot;_onContentAttach&quot;,[]);return this.dataObj};dhtmlXCellObject.prototype.attachForm=function(a){var c=document.createElement(&quot;DIV&quot;);c.style.width=&quot;100%&quot;;c.style.height=&quot;100%&quot;;c.style.position=&quot;relative&quot;;if(window.dhtmlx&amp;&amp;dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(c)}else{c.style.overflow=&quot;auto&quot;}this._attachObject(c);this.dataType=&quot;form&quot;;this.dataObj=new dhtmlXForm(c,a);this.dataObj.setSkin(this.kZ.skin);c=null;this.callEvent(&quot;_onContentAttach&quot;,[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var c=document.createElement(&quot;DIV&quot;);c.id=&quot;GMapsObj_&quot;+this._genStr(12);c.style.width=&quot;100%&quot;;c.style.height=&quot;100%&quot;;c.style.position=&quot;relative&quot;;c.style.overflow=&quot;hidden&quot;;this._attachObject(c);if(!a){a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType=&quot;maps&quot;;this.dataObj=new google.maps.Map(c,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,&quot;resize&quot;)};c=null;this.callEvent(&quot;_onContentAttach&quot;,[]);return this.dataObj};dhtmlXCellObject.prototype.attachChart=function(a){var c=document.createElement(&quot;DIV&quot;);c.id=&quot;dhxChartObj_&quot;+window.dhx4.newId();c.style.width=&quot;100%&quot;;c.style.height=&quot;100%&quot;;document.body.appendChild(c);this._attachObject(c);a.container=c.id;this.dataType=&quot;chart&quot;;this.dataObj=new dhtmlXChart(a);if(!this.dataObj.setSizes){this.dataObj.setSizes=function(){if(this.resize){this.resize()}else{this.ht()}}}return this.dataObj};dhtmlXCellObject.prototype.attachMenu=function(a){if(this.dataNodes.menu){return}if(typeof(a)==&quot;undefined&quot;){a={}}if(typeof(a.skin)==&quot;undefined&quot;){a.skin=this.kZ.skin}a.parent=this._attachObject(&quot;menu&quot;).firstChild;this.dataNodes.menu=new dhtmlXMenuObject(a);this._adjustCont(this._idd);a.parent=null;a=null;return this.dataNodes.menu};dhtmlXCellObject.prototype.detachMenu=function(){if(!this.dataNodes.menu){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;delete this.dataNodes.menu;this._detachObject(&quot;menu&quot;)};dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide(&quot;menu&quot;,&quot;&quot;)};dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide(&quot;menu&quot;,&quot;none&quot;)};dhtmlXCellObject.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&amp;&amp;this.dataNodes.toolbar==null)){return}if(typeof(a)==&quot;undefined&quot;){a={}}else{if(typeof(a)==&quot;string&quot;){a={skin:a}}}if(typeof(a.skin)==&quot;undefined&quot;){a.skin=this.kZ.skin}a.parent=this._attachObject(&quot;toolbar&quot;).firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this._adjustCont(this._idd);this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent(&quot;_onIconSizeChange&quot;,function(){this._masterCell._adjustCont()});a.parent=null;a=null;return this.dataNodes.toolbar};dhtmlXCellObject.prototype.detachToolbar=function(){if(!this.dataNodes.toolbar){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;delete this.dataNodes.toolbar;this._detachObject(&quot;toolbar&quot;)};dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide(&quot;toolbar&quot;,&quot;&quot;)};dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide(&quot;toolbar&quot;,&quot;none&quot;)};dhtmlXCellObject.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&amp;&amp;this.dataNodes.toolbar==null)){return}if(typeof(a)==&quot;undefined&quot;){a={}}if(typeof(a.skin)==&quot;undefined&quot;){a.skin=this.kZ.skin}a.parent=this._attachObject(&quot;ribbon&quot;).firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);var c=this;this.dataNodes.ribbon.attachEvent(&quot;_onHeightChanged&quot;,function(){c._adjustCont(c._idd)});this._adjustCont();a.parent=null;a=null;return this.dataNodes.ribbon};dhtmlXCellObject.prototype.detachRibbon=function(){if(!this.dataNodes.ribbon){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;delete this.dataNodes.ribbon;this._detachObject(&quot;ribbon&quot;)};dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide(&quot;ribbon&quot;,&quot;&quot;)};dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide(&quot;ribbon&quot;,&quot;none&quot;)};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sb){return}if(this.kZ.skin==&quot;dhx_skyblue&quot;&amp;&amp;typeof(window.dhtmlXWindowsCell)!=&quot;undefined&quot;&amp;&amp;(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.kZ.idx.vI].className+=&quot; dhx_cell_statusbar_attached&quot;}this.dataNodes.sb=this._attachObject(&quot;sb&quot;,a);this.dataNodes.sb.setText=function(c){this.childNodes[0].innerHTML=c};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(c){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.kZ.skin==&quot;dhx_skyblue&quot;&amp;&amp;typeof(window.dhtmlXWindowsCell)!=&quot;undefined&quot;&amp;&amp;(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.kZ.idx.vI].className=this.cell.childNodes[this.kZ.idx.vI].className.replace(/\s{0,}dhx_cell_statusbar_attached/,&quot;&quot;)}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject(&quot;sb&quot;)};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide(&quot;sb&quot;,&quot;&quot;)};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide(&quot;sb&quot;,&quot;none&quot;)};dhtmlXCellObject.prototype._mtbShowHide=function(c,a){if(!this.dataNodes[c]){return}this.cell.childNodes[this.kZ.idx[c]].style.display=a;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!=&quot;url&quot;){return null}return this.cell.childNodes[this.kZ.idx.vI].firstChild};dhtmlXCellObject.prototype._genStr=function(){if(!this._genStrId){this._genStrId=new Date().getTime()}return this._genStrId++};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!=&quot;url&quot;){return}var g=this;var c=this._idd;var a=this.cell.childNodes[this.kZ.idx.vI].firstChild;if(typeof(this._doOnFrameMouseDown)!=&quot;function&quot;){this._doOnFrameMouseDown=function(h){g.callEvent(&quot;_onContentMouseDown&quot;,[c,h||event])}}if(typeof(window.addEventListener)==&quot;function&quot;){a.onload=function(){try{if(typeof(g._doOnFrameMouseDown)==&quot;function&quot;){this.contentWindow.document.body.addEventListener(&quot;mousedown&quot;,g._doOnFrameMouseDown,false)}}catch(h){}try{if(typeof(g._doOnFrameContentLoaded)==&quot;function&quot;){g._doOnFrameContentLoaded()}}catch(h){}}}else{a.onreadystatechange=function(h){if(this.readyState==&quot;complete&quot;){try{if(typeof(g._doOnFrameMouseDown)==&quot;function&quot;){this.contentWindow.document.body.attachEvent(&quot;onmousedown&quot;,g._doOnFrameMouseDown)}}catch(l){}try{if(typeof(g._doOnFrameContentLoaded)==&quot;function&quot;){g._doOnFrameContentLoaded()}}catch(l){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.kZ.url_data.post_ifr==true){var m=this.getFrame().contentWindow.document;var l=m.createElement(&quot;FORM&quot;);l.method=&quot;POST&quot;;l.action=this.kZ.url_data.url;m.body.appendChild(l);var g={};g[&quot;dhxr&quot;+new Date().getTime()]=&quot;1&quot;;for(var c in this.kZ.url_data.post_data){g[c]=this.kZ.url_data.post_data[c]}for(var c in g){var h=m.createElement(&quot;INPUT&quot;);h.type=&quot;hidden&quot;;h.name=c;h.value=g[c];l.appendChild(h);h=null}this.kZ.url_data.post_ifr=false;l.submit()}else{this.callEvent(&quot;_onContentLoaded&quot;,[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(a==null){if(this.dataType!=&quot;url&quot;){return}a=this.cell.childNodes[this.kZ.idx.vI].firstChild}if(typeof(window.addEventListener)==&quot;function&quot;){a.onload=null;try{a.contentWindow.document.body.removeEventListener(&quot;mousedown&quot;,this._doOnFrameMouseDown,false)}catch(c){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent(&quot;onmousedown&quot;,this._doOnFrameMouseDown)}catch(c){}}a=null};dhtmlXCellObject.prototype._attachObject=function(o,l,n,a,m){if(o==&quot;menu&quot;){if(typeof(m)!=&quot;undefined&quot;){o=m}else{o=document.createElement(&quot;DIV&quot;);o.className=&quot;dhx_cell_menu_&quot;+(this.kZ.borders?&quot;def&quot;:&quot;no_borders&quot;);o.appendChild(document.createElement(&quot;DIV&quot;))}this.cell.insertBefore(o,this.cell.childNodes[this.kZ.idx.toolbar||this.kZ.idx.vI]);this.kZ.ofs_nodes.t.menu=true;this._updateIdx();return o}if(o==&quot;toolbar&quot;){if(typeof(m)!=&quot;undefined&quot;){o=m}else{o=document.createElement(&quot;DIV&quot;);o.className=&quot;dhx_cell_toolbar_&quot;+(this.kZ.borders?&quot;def&quot;:&quot;no_borders&quot;);o.appendChild(document.createElement(&quot;DIV&quot;));o.firstChild.className=&quot;dhx_toolbar_base_18_dhx_skyblue&quot;}this.cell.insertBefore(o,this.cell.childNodes[this.kZ.idx.vI]);this.kZ.ofs_nodes.t.toolbar=true;this._updateIdx();return o}if(o==&quot;ribbon&quot;){if(typeof(m)!=&quot;undefined&quot;){o=m}else{o=document.createElement(&quot;DIV&quot;);o.className=&quot;dhx_cell_ribbon_&quot;+(this.kZ.borders?&quot;def&quot;:&quot;no_borders&quot;);o.appendChild(document.createElement(&quot;DIV&quot;))}this.cell.insertBefore(o,this.cell.childNodes[this.kZ.idx.vI]);this.kZ.ofs_nodes.t.ribbon=true;this._updateIdx();this._adjustCont(this._idd);return o}if(o==&quot;sb&quot;){if(typeof(m)!=&quot;undefined&quot;){o=m}else{var c=l||{};var q=(typeof(c.text)==&quot;string&quot;&amp;&amp;c.text.length&gt;0?c.text:&quot; &quot;);var g=(typeof(c.height)==&quot;number&quot;?c.height:false);var o=document.createElement(&quot;DIV&quot;);o.className=&quot;dhx_cell_statusbar_def&quot;;o.innerHTML=&quot;<DIV class="dhx_cell_statusbar_text">&quot;+q+&quot;</DIV>&quot;;if(g!=false){o.firstChild.style.height=o.firstChild.style.lineHeight=g+&quot;px&quot;}}if(this.kZ.idx.pr1!=null){this.cell.insertBefore(o,this.cell.childNodes[this.kZ.idx.pr1])}else{this.cell.appendChild(o)}this.kZ.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return o}if(a!=true){this._detachObject(null,true,null)}if(typeof(n)==&quot;string&quot;){this.cell.childNodes[this.kZ.idx.vI].innerHTML=n}else{this.cell.childNodes[this.kZ.idx.vI].appendChild(o)}o=null};dhtmlXCellObject.prototype._detachObject=function(l,c,a){this.callEvent(&quot;_onBeforeContentDetach&quot;,[]);if(l==&quot;menu&quot;||l==&quot;toolbar&quot;||l==&quot;ribbon&quot;||l==&quot;sb&quot;){var h=this.cell.childNodes[this.kZ.idx[l]];h.parentNode.removeChild(h);h=null;this.kZ.ofs_nodes[l==&quot;sb&quot;?&quot;b&quot;:&quot;t&quot;][l]=false;this._updateIdx();if(!this.kZ.unloading){this._adjustCont(this._idd)}return}if(c==true){a=false}else{if(typeof(a)==&quot;undefined&quot;){a=document.body}else{if(typeof(a)==&quot;string&quot;){a=document.getElementById(a)}}}if(a===false){if(this.dataType==&quot;url&quot;){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)==&quot;function&quot;){this.dataObj.unload()}else{if(typeof(this.dataObj.fA)==&quot;function&quot;){this.dataObj.fA()}}}}}var h=this.cell.childNodes[this.kZ.idx.vI];while(h.childNodes.length&gt;0){if(a===false){h.removeChild(h.lastChild)}else{h.firstChild.style.display=&quot;none&quot;;a.appendChild(h.firstChild)}}if(this.kZ.append_mode){h.style.overflow=&quot;&quot;;this.kZ.append_mode=false}var g=(this.dataType==&quot;tabbar&quot;);this.dataObj=null;this.dataType=null;a=h=null;if(this.kZ.unloading!=true&amp;&amp;g){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(c){this.detachObject(true);var h=&quot;layout&quot;;if(typeof(window.dhtmlXWindowsCell)!=&quot;undefined&quot;&amp;&amp;this instanceof window.dhtmlXWindowsCell){h=&quot;window&quot;}if(typeof(window.dhtmlXWindowsCell)!=&quot;undefined&quot;&amp;&amp;c instanceof window.dhtmlXWindowsCell&amp;&amp;c.wins.w[c._idd].kZ.parked){c.wins._winCellSetOpacity(c._idd,&quot;open&quot;,false)}if(typeof(window.dhtmlXAccordionCell)!=&quot;undefined&quot;&amp;&amp;c instanceof window.dhtmlXAccordionCell&amp;&amp;c.kZ.opened==false){c._cellSetOpacity(&quot;open&quot;,false)}for(var g in c.dataNodes){this._attachObject(g,null,null,null,c.cell.childNodes[c.kZ.idx[g]]);this.dataNodes[g]=c.dataNodes[g];c.dataNodes[g]=null;c.kZ.ofs_nodes[g==&quot;sb&quot;?&quot;b&quot;:&quot;t&quot;][g]=false;c._updateIdx()}this._mtbUpdBorder();if(c.dataType!=null&amp;&amp;c.dataObj!=null){this.dataType=c.dataType;this.dataObj=c.dataObj;while(c.cell.childNodes[c.kZ.idx.vI].childNodes.length&gt;0){this.cell.childNodes[this.kZ.idx.vI].appendChild(c.cell.childNodes[c.kZ.idx.vI].firstChild)}c.dataType=null;c.dataObj=null;if(this.dataType==&quot;grid&quot;){if(h==&quot;window&quot;&amp;&amp;this.kZ.skin==&quot;dhx_skyblue&quot;){this.dataObj.aL.style.border=&quot;1px solid #a4bed4&quot;;this.dataObj.vw=0}else{this.dataObj.aL.style.border=&quot;0px solid white&quot;;this.dataObj.vw=2}}}else{while(c.cell.childNodes[c.kZ.idx.vI].childNodes.length&gt;0){this.cell.childNodes[this.kZ.idx.vI].appendChild(c.cell.childNodes[c.kZ.idx.vI].firstChild)}}this.kZ.view=c.kZ.view;c.kZ.view=&quot;def&quot;;for(var g in c.views){this.views[g]=c.views[g];c.views[g]=null;delete c.views[g]}c._updateIdx();c._adjustCont();this._updateIdx();this._adjustCont();if(h==&quot;window&quot;&amp;&amp;this.wins.w[this._idd].kZ.parked){this.wins._winCellSetOpacity(this._idd,&quot;close&quot;,false)}};function dhtmlXCalendarObject(m,u){this.i={};var g=null;if(typeof(m)==&quot;string&quot;){var h=document.getElementById(m)}else{var h=m}if(h&amp;&amp;typeof(h)==&quot;object&quot;&amp;&amp;h.tagName&amp;&amp;String(h.tagName).toLowerCase()!=&quot;input&quot;){g=h}h=null;if(typeof(m)!=&quot;object&quot;|| !m.length){m=[m]}for(var c=0;c&lt;m.length;c++){if(typeof(m[c])==&quot;string&quot;){m[c]=(document.getElementById(m[c])||null)}if(m[c]!=null&amp;&amp;m[c].tagName&amp;&amp;String(m[c].tagName).toLowerCase()==&quot;input&quot;){this.i[window.dhx4.newId()]={input:m[c]}}else{if(!(m[c]instanceof Array)&amp;&amp;m[c]instanceof Object&amp;&amp;(m[c].input!=null||m[c].button!=null)){if(m[c].input!=null&amp;&amp;typeof(m[c].input)==&quot;string&quot;){m[c].input=document.getElementById(m[c].input)}if(m[c].button!=null&amp;&amp;typeof(m[c].button)==&quot;string&quot;){m[c].button=document.getElementById(m[c].button)}this.i[window.dhx4.newId()]=m[c]}}m[c]=null}this.kZ={skin:(u||window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhtmlxcalendar&quot;)||&quot;dhx_skyblue&quot;),zi:window.dhx4.newId(),touch:(typeof(window.ontouchstart)!=&quot;undefined&quot;)};this.setSkin=function(q,a){if(this.kZ.skin==q&amp;&amp; !a){return}this.kZ.skin=q;this.base.className=&quot;dhtmlxcalendar_&quot;+this.kZ.skin;this._ifrSize()};this.base=document.createElement(&quot;DIV&quot;);this.base.style.display=&quot;none&quot;;this.base.appendChild(document.createElement(&quot;DIV&quot;));if(g!=null){this._hasParent=true;g.appendChild(this.base);g=null}else{document.body.appendChild(this.base)}this.WP=function(a){if(this._hasParent){if(typeof(a)==&quot;object&quot;){a.appendChild(this.base)}else{if(typeof(a)==&quot;string&quot;){document.getElementById(a).appendChild(this.base)}}}};this.setSkin(this.kZ.skin,true);if(this.kZ.touch){this.base.ontouchstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}a.cancelBubble=true}}else{this.base.onclick=function(a){a=a||event;a.cancelBubble=true};this.base.onmousedown=function(){return false}}this.Re=function(y){if(!this.langData[y]){return}this.lang=y;this.setWeekStartDay(this.langData[this.lang].Yg);this.setDateFormat(this.langData[this.lang].dateformat||&quot;%Y-%m-%d&quot;);if(this.msCont){var x=0;for(var v=0;v&lt;this.msCont.childNodes.length;v++){for(var a=0;a&lt;this.msCont.childNodes[v].childNodes.length;a++){this.msCont.childNodes[v].childNodes[a].innerHTML=this.langData[this.lang].Vx[x++]}}}};this.contMonth=document.createElement(&quot;DIV&quot;);this.contMonth.className=&quot;dhtmlxcalendar_month_cont&quot;;this.contMonth.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};this.base.firstChild.appendChild(this.contMonth);var n=document.createElement(&quot;UL&quot;);n.className=&quot;dhtmlxcalendar_line&quot;;this.contMonth.appendChild(n);var s=document.createElement(&quot;LI&quot;);s.className=&quot;dhtmlxcalendar_cell dhtmlxcalendar_month_hdr&quot;;s.innerHTML=&quot;&quot;;n.appendChild(s);var l=this;s[this.kZ.touch?&quot;ontouchstart&quot;:&quot;onclick&quot;]=function(w){w=w||event;var q=(w.target||w.srcElement);if(q.className&amp;&amp;q.className.indexOf(&quot;dhtmlxcalendar_month_arrow&quot;)===0){l._hideSelector();var v=(q.parentNode.firstChild==q? -1:1);var a=new Date(l._activeMonth);l._drawMonth(new Date(l._activeMonth.getFullYear(),l._activeMonth.getMonth()+v,1,0,0,0,0));l._evOnArrowClick([a,new Date(l._activeMonth)]);return}if(q.className&amp;&amp;q.className==&quot;dhtmlxcalendar_month_label_month&quot;){w.cancelBubble=true;l._showSelector(&quot;month&quot;,Math.round(q.offsetLeft+q.offsetWidth/2),q.offsetTop+q.offsetHeight+2,&quot;selector_month&quot;,true);return}if(q.className&amp;&amp;q.className==&quot;dhtmlxcalendar_month_label_year&quot;){w.cancelBubble=true;l._showSelector(&quot;year&quot;,Math.round(q.offsetLeft+q.offsetWidth/2),q.offsetTop+q.offsetHeight+2,&quot;selector_year&quot;,true);return}l._hideSelector()};this.contDays=document.createElement(&quot;DIV&quot;);this.contDays.className=&quot;dhtmlxcalendar_days_cont&quot;;this.base.firstChild.appendChild(this.contDays);this.setWeekStartDay=function(a){if(a==0){a=7}this._wStart=Math.min(Math.max((isNaN(a)?1:a),1),7);this._drawDaysOfWeek()};this._drawDaysOfWeek=function(){if(this.contDays.childNodes.length==0){var y=document.createElement(&quot;UL&quot;);y.className=&quot;dhtmlxcalendar_line&quot;;this.contDays.appendChild(y)}else{var y=this.contDays.firstChild}var v=this._wStart;var x=this.langData[this.lang].Zo;x.push(String(this.langData[this.lang].Zo[0]).valueOf());for(var A=0;A&lt;8;A++){if(y.childNodes[A]==null){var a=document.createElement(&quot;LI&quot;);y.appendChild(a)}else{var a=y.childNodes[A]}if(A==0){a.className=&quot;dhtmlxcalendar_cell_wn&quot;;a.innerHTML=&quot;<DIV class="dhtmlxcalendar_label">&quot;+(this.langData[this.lang].weekname||&quot;w&quot;)+&quot;</DIV>&quot;}else{a.className=&quot;dhtmlxcalendar_cell&quot;+(v&gt;=6?&quot; dhtmlxcalendar_day_weekday_cell&quot;:&quot;&quot;)+(A==1?&quot;_first&quot;:&quot;&quot;);a.innerHTML=x[v];if(++v&gt;7){v=1}}}if(this._activeMonth!=null){this._drawMonth(this._activeMonth)}};this._wStart=this.langData[this.lang].Yg;this.setWeekStartDay(this._wStart);this.contDates=document.createElement(&quot;DIV&quot;);this.contDates.className=&quot;dhtmlxcalendar_dates_cont&quot;;this.base.firstChild.appendChild(this.contDates);this.contDates[this.kZ.touch?&quot;ontouchend&quot;:&quot;onclick&quot;]=function(y){y=y||event;var q=(y.target||y.srcElement);if(q.parentNode!=null&amp;&amp;q.parentNode._date!=null){q=q.parentNode}if(q._date!=null&amp;&amp; !q._css_dis){var w=l._activeDate.getHours();var v=l._activeDate.getMinutes();var x=q._date;if(l.mR(&quot;onBeforeChange&quot;)){if(!l.callEvent(&quot;onBeforeChange&quot;,[new Date(q._date.getFullYear(),q._date.getMonth(),q._date.getDate(),w,v)])){return}}if(l._activeDateCell!=null){l._activeDateCell._css_date=false;l._updateCellStyle(l._activeDateCell._q,l._activeDateCell._w)}var a=(l._activeDate.getFullYear()+&quot;_&quot;+l._activeDate.getMonth()!=x.getFullYear()+&quot;_&quot;+x.getMonth());l._nullDate=false;l._activeDate=new Date(x.getFullYear(),x.getMonth(),x.getDate(),w,v);l._activeDateCell=q;l._activeDateCell._css_date=true;l._activeDateCell._css_hover=false;l._updateCellStyle(l._activeDateCell._q,l._activeDateCell._w);if(a){l._drawMonth(l._activeDate)}if(l._activeInp&amp;&amp;l.i[l._activeInp]&amp;&amp;l.i[l._activeInp].input!=null){l.i[l._activeInp].input.value=l._dateToStr(new Date(l._activeDate.getTime()))}if(!l._hasParent){l._hide()}l._evOnClick([new Date(l._activeDate.getTime())])}};if(!this.kZ.touch){this.contDates.onmouseover=function(q){q=q||event;var a=(q.target||q.srcElement);if(a.parentNode!=null&amp;&amp;a.parentNode._date!=null){a=a.parentNode}if(a._date!=null){if(l._lastHover==a||a._css_hover){return}a._css_hover=true;l._updateCellStyle(a._q,a._w);l._lastHover=a;l._evOnMouseOver([new Date(a._date.getFullYear(),a._date.getMonth(),a._date.getDate(),0,0,0,0),q]);a=null}};this.contDates.onmouseout=function(a){l._clearDayHover(a||event)}}this._lastHover=null;this._clearDayHover=function(a){if(!this._lastHover){return}this._lastHover._css_hover=false;this._updateCellStyle(this._lastHover._q,this._lastHover._w);l._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),a]);this._lastHover=null};for(var c=0;c&lt;6;c++){var n=document.createElement(&quot;UL&quot;);n.className=&quot;dhtmlxcalendar_line&quot;;this.contDates.appendChild(n);for(var r=0;r&lt;=7;r++){var s=document.createElement(&quot;LI&quot;);if(r==0){s.className=&quot;dhtmlxcalendar_cell_wn&quot;}else{s.className=&quot;dhtmlxcalendar_cell&quot;}n.appendChild(s)}}this.contTime=document.createElement(&quot;DIV&quot;);this.contTime.className=&quot;dhtmlxcalendar_time_cont&quot;;this.base.firstChild.appendChild(this.contTime);this.showTime=function(){this.contTime.style.display=&quot;&quot;;this._ifrSize()};this.hideTime=function(){this.contTime.style.display=&quot;none&quot;;this._ifrSize()};var n=document.createElement(&quot;UL&quot;);n.className=&quot;dhtmlxcalendar_line&quot;;this.contTime.appendChild(n);var s=document.createElement(&quot;LI&quot;);s.className=&quot;dhtmlxcalendar_cell dhtmlxcalendar_time_hdr&quot;;s.innerHTML=&quot;<SPAN class="dhtmlxcalendar_label_colon"> : </SPAN>&quot;;n.appendChild(s);s[this.kZ.touch?&quot;ontouchstart&quot;:&quot;onclick&quot;]=function(v){v=v||event;var a=(v.target||v.srcElement);if(a.tagName!=null&amp;&amp;a.tagName.toLowerCase()==&quot;span&quot;&amp;&amp;a._par==true&amp;&amp;a.parentNode!=null){a=a.parentNode}if(a.className&amp;&amp;a.className==&quot;dhtmlxcalendar_label_hours&quot;){v.cancelBubble=true;var q=l.contMonth.offsetHeight+l.contDays.offsetHeight+l.contDates.offsetHeight+a.offsetTop;l._showSelector(&quot;hours&quot;,Math.round(a.offsetLeft+a.offsetWidth/2),q-2,&quot;selector_hours&quot;,true);return}if(a.className&amp;&amp;a.className==&quot;dhtmlxcalendar_label_minutes&quot;){v.cancelBubble=true;if(l._minutesInterval==1){var w=l.Ul(&quot;%i&quot;);a.innerHTML=&quot;<SPAN class="dhtmlxcalendar_selected_date">&quot;+w.charAt(0)+&quot;</SPAN>&quot;+w.charAt(1);a.firstChild._par=true;l._selectorMode=1}var q=l.contMonth.offsetHeight+l.contDays.offsetHeight+l.contDates.offsetHeight+a.offsetTop;l._showSelector(&quot;minutes&quot;,Math.round(a.offsetLeft+a.offsetWidth/2),q-2,&quot;selector_minutes&quot;,true);return}l._hideSelector()};this._activeMonth=null;this._activeDate=new Date();this._activeDateCell=null;this.setDate=function(q){this._nullDate=(typeof(q)==&quot;undefined&quot;||q===&quot;&quot;|| !q);if(!(q instanceof Date)){q=this._strToDate(String(q||&quot;&quot;));if(q==&quot;Invalid Date&quot;){q=new Date()}}var a=q.getTime();if(this._isOutOfRange(a)){return}this._activeDate=new Date(a);this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleHours();this._updateVisibleMinutes()};this.getDate=function(q){if(this._nullDate){return null}var a=new Date(this._activeDate.getTime());if(q){return this._dateToStr(a)}return a};this._drawMonth=function(E){if(!(E instanceof Date)){return}if(isNaN(E.getFullYear())){E=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)}this._activeMonth=new Date(E.getFullYear(),E.getMonth(),1,0,0,0,0);this._activeDateCell=null;var C=new Date(this._activeMonth.getTime());var x=C.getDay();var I=x-this._wStart;if(I&lt;0){I=I+7}C.setDate(C.getDate()-I);var L=E.getMonth();var M=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime();var A=0;for(var v=0;v&lt;6;v++){var D=this._wStart;for(var K=0;K&lt;=7;K++){if(K==0){var J=this.getWeekNumber(new Date(C.getFullYear(),C.getMonth(),C.getDate()+A,0,0,0,0));this.contDates.childNodes[v].childNodes[K].innerHTML=&quot;<DIV class="dhtmlxcalendar_label">&quot;+J+&quot;</DIV>&quot;}else{var a=new Date(C.getFullYear(),C.getMonth(),C.getDate()+A,0,0,0,0);var H=a.getDay();var y=a.getTime();var F=&quot;dhtmlxcalendar_label&quot;;if(this._tipData[y]!=null){if(this._tipData[y].usePopup&amp;&amp;typeof(window.dhtmlXPopup)==&quot;function&quot;){this.contDates.childNodes[v].childNodes[K].removeAttribute(&quot;title&quot;);this._initTooltipPopup()}else{this.contDates.childNodes[v].childNodes[K].setAttribute(&quot;title&quot;,this._tipData[y].text)}if(this._tipData[y].showIcon){F+=&quot; dhtmlxcalendar_label_title&quot;}}else{this.contDates.childNodes[v].childNodes[K].removeAttribute(&quot;title&quot;)}this.contDates.childNodes[v].childNodes[K].innerHTML=&quot;<DIV class="&quot;+F+&quot;">&quot;+a.getDate()+&quot;</DIV>&quot;;this.contDates.childNodes[v].childNodes[K]._date=new Date(y);this.contDates.childNodes[v].childNodes[K]._q=v;this.contDates.childNodes[v].childNodes[K]._w=K;this.contDates.childNodes[v].childNodes[K]._css_month=(a.getMonth()==L);this.contDates.childNodes[v].childNodes[K]._css_date=(!this._nullDate&amp;&amp;y==M);this.contDates.childNodes[v].childNodes[K]._css_weekend=(D&gt;=6);this.contDates.childNodes[v].childNodes[K]._css_dis=this._isOutOfRange(y);this.contDates.childNodes[v].childNodes[K]._css_holiday=(this._holidays[y]==true);this._updateCellStyle(v,K);if(y==M){this._activeDateCell=this.contDates.childNodes[v].childNodes[K]}if(++D&gt;7){D=1}A++}}}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(E)};this._updateCellStyle=function(y,a){var x=this.contDates.childNodes[y].childNodes[a];var v=&quot;dhtmlxcalendar_cell dhtmlxcalendar_cell&quot;;v+=(x._css_month?&quot;_month&quot;:&quot;&quot;);v+=(x._css_date?&quot;_date&quot;:&quot;&quot;);v+=(x._css_weekend?&quot;_weekend&quot;:&quot;&quot;);v+=(x._css_holiday?&quot;_holiday&quot;:&quot;&quot;);v+=(x._css_dis?&quot;_dis&quot;:&quot;&quot;);v+=(x._css_hover&amp;&amp; !x._css_dis?&quot;_hover&quot;:&quot;&quot;);x.className=v;x=null};this._minutesInterval=5;this._initSelector=function(E,y){if(!this._selCover){this._selCover=document.createElement(&quot;DIV&quot;);this._selCover.className=&quot;dhtmlxcalendar_selector_cover&quot;;this.base.firstChild.appendChild(this._selCover)}if(!this._sel){this._sel=document.createElement(&quot;DIV&quot;);this._sel.className=&quot;dhtmlxcalendar_selector_obj&quot;;this.base.firstChild.appendChild(this._sel);this._sel.appendChild(document.createElement(&quot;TABLE&quot;));this._sel.firstChild.className=&quot;dhtmlxcalendar_selector_table&quot;;this._sel.firstChild.cellSpacing=0;this._sel.firstChild.cellPadding=0;this._sel.firstChild.border=0;this._sel.firstChild.appendChild(document.createElement(&quot;TBODY&quot;));this._sel.firstChild.firstChild.appendChild(document.createElement(&quot;TR&quot;));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement(&quot;TD&quot;));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement(&quot;TD&quot;));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement(&quot;TD&quot;));this._sel.firstChild.firstChild.firstChild.childNodes[0].className=&quot;dhtmlxcalendar_selector_cell_left&quot;;this._sel.firstChild.firstChild.firstChild.childNodes[1].className=&quot;dhtmlxcalendar_selector_cell_middle&quot;;this._sel.firstChild.firstChild.firstChild.childNodes[2].className=&quot;dhtmlxcalendar_selector_cell_right&quot;;this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML=&quot; &quot;;this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML=&quot; &quot;;if(!this.kZ.touch){this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className=&quot;dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover&quot;};this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className=&quot;dhtmlxcalendar_selector_cell_left&quot;};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className=&quot;dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover&quot;};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className=&quot;dhtmlxcalendar_selector_cell_right&quot;};this._sel.onmouseover=function(w){w=w||event;var q=(w.target||w.srcElement);if(q._cell===true){if(l._selHover!=q){l._clearSelHover()}if(String(q.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)!=null){q.className+=&quot; dhtmlxcalendar_selector_cell_hover&quot;;l._selHover=q}}};this._sel.onmouseout=function(){l._clearSelHover()}}this._sel.firstChild.firstChild.firstChild.childNodes[0][this.kZ.touch?&quot;ontouchstart&quot;:&quot;onclick&quot;]=function(q){q=q||event;q.cancelBubble=true;l._scrollYears(-1)};this._sel.firstChild.firstChild.firstChild.childNodes[2][this.kZ.touch?&quot;ontouchstart&quot;:&quot;onclick&quot;]=function(q){q=q||event;q.cancelBubble=true;l._scrollYears(1)};this._sel._ta={};this._selHover=null;this._sel.appendChild(document.createElement(&quot;DIV&quot;));this._sel.lastChild.className=&quot;dhtmlxcalendar_selector_obj_arrow&quot;}if(this._sel._ta[E]==true){return}if(E==&quot;month&quot;){this._msCells={};this.msCont=document.createElement(&quot;DIV&quot;);this.msCont.className=&quot;dhtmlxcalendar_area_&quot;+y;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);var v=0;for(var a=0;a&lt;4;a++){var D=document.createElement(&quot;UL&quot;);D.className=&quot;dhtmlxcalendar_selector_line&quot;;this.msCont.appendChild(D);for(var F=0;F&lt;3;F++){var H=document.createElement(&quot;LI&quot;);H.innerHTML=this.langData[this.lang].Vx[v];H.className=&quot;dhtmlxcalendar_selector_cell&quot;;D.appendChild(H);H._month=v;H._cell=true;this._msCells[v++]=H}}this.msCont[this.kZ.touch?&quot;ontouchstart&quot;:&quot;onclick&quot;]=function(w){w=w||event;w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._month!=null){l._hideSelector();l._updateActiveMonth();l._drawMonth(new Date(l._activeMonth.getFullYear(),q._month,1,0,0,0,0));l._doOnSelectorChange()}}}if(E==&quot;year&quot;){this._ysCells={};this.ysCont=document.createElement(&quot;DIV&quot;);this.ysCont.className=&quot;dhtmlxcalendar_area_&quot;+y;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(var a=0;a&lt;4;a++){var D=document.createElement(&quot;UL&quot;);D.className=&quot;dhtmlxcalendar_selector_line&quot;;this.ysCont.appendChild(D);for(var F=0;F&lt;3;F++){var H=document.createElement(&quot;LI&quot;);H.className=&quot;dhtmlxcalendar_selector_cell&quot;;H._cell=true;D.appendChild(H)}}this.ysCont[this.kZ.touch?&quot;ontouchstart&quot;:&quot;onclick&quot;]=function(w){w=w||event;w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._year!=null){l._hideSelector();l._drawMonth(new Date(q._year,l._activeMonth.getMonth(),1,0,0,0,0));l._doOnSelectorChange()}}}if(E==&quot;hours&quot;){this._hsCells={};this.hsCont=document.createElement(&quot;DIV&quot;);this.hsCont.className=&quot;dhtmlxcalendar_area_&quot;+y;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);var v=0;for(var a=0;a&lt;4;a++){var D=document.createElement(&quot;UL&quot;);D.className=&quot;dhtmlxcalendar_selector_line&quot;;this.hsCont.appendChild(D);for(var F=0;F&lt;6;F++){var H=document.createElement(&quot;LI&quot;);H.innerHTML=this._fixLength(v,2);H.className=&quot;dhtmlxcalendar_selector_cell&quot;;D.appendChild(H);H._hours=v;H._cell=true;this._hsCells[v++]=H}}this.hsCont[this.kZ.touch?&quot;ontouchstart&quot;:&quot;onclick&quot;]=function(w){w=w||event;w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._hours!=null){l._hideSelector();l._activeDate.setHours(q._hours);l._updateActiveHours();l._updateVisibleHours();l._doOnSelectorChange()}}}if(E==&quot;minutes&quot;){var C=4;var x=3;var A=2;if(this._minutesInterval==1){if(this._selectorMode==1){C=2;x=3;A=1}else{C=2;x=5;A=1;y+=&quot;5&quot;}}if(this._minutesInterval==10){C=2}if(this._minutesInterval==15){C=1;x=4;y+=&quot;4&quot;}this._rsCells={};this.rsCont=document.createElement(&quot;DIV&quot;);this.rsCont.className=&quot;dhtmlxcalendar_area_&quot;+y;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);var v=0;for(var a=0;a&lt;C;a++){var D=document.createElement(&quot;UL&quot;);D.className=&quot;dhtmlxcalendar_selector_line&quot;;this.rsCont.appendChild(D);for(var F=0;F&lt;x;F++){var H=document.createElement(&quot;LI&quot;);H.innerHTML=(A&gt;1?this._fixLength(v,A):v);H.className=&quot;dhtmlxcalendar_selector_cell&quot;;D.appendChild(H);H._minutes=v;H._cell=true;this._rsCells[v]=H;v+=this._minutesInterval}}this.rsCont[this.kZ.touch?&quot;ontouchstart&quot;:&quot;onclick&quot;]=function(I){I=I||event;I.cancelBubble=true;var w=(I.target||I.srcElement);if(w._minutes!=null){if(l._minutesInterval==1){var q=l.Ul(&quot;%i&quot;);if(l._selectorMode==1){q=w._minutes.toString()+q.charAt(1)}else{q=q.charAt(0)+w._minutes.toString()}l._activeDate.setMinutes(Number(q));l._hideSelector();if(l._selectorMode==1){l._updateVisibleMinutes(true);l._selectorMode=2;l._showSelector(&quot;minutes&quot;,l._sel._x,l._sel._y,&quot;selector_minutes&quot;,true);l._updateActiveMinutes();return}else{l._selectorMode=1}}else{l._hideSelector();l._activeDate.setMinutes(w._minutes);l._updateActiveMinutes()}l._updateVisibleMinutes();l._doOnSelectorChange()}}}this._sel._ta[E]=true};this._showSelector=function(A,q,C,w,a){if(a===true&amp;&amp;this._sel!=null&amp;&amp;this._isSelectorVisible()&amp;&amp;A==this._sel._t){this._hideSelector();return}if(this.kZ.skin==&quot;dhx_terrace&quot;){q+=12}if(!this._sel|| !this._sel._ta[A]){this._initSelector(A,w)}if(A!=this._sel._t&amp;&amp;this._sel._t==&quot;minutes&quot;&amp;&amp;this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.Ul(&quot;%i&quot;)}this._sel._x=q;this._sel._y=C;this._sel.style.visibility=&quot;hidden&quot;;this._sel.style.display=&quot;&quot;;this._selCover.style.width=this.base.offsetWidth-2+&quot;px&quot;;this._selCover.style.top=this.contMonth.offsetHeight+&quot;px&quot;;this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+&quot;px&quot;;this._selCover.style.display=&quot;&quot;;this._sel._t=A;this._sel.className=&quot;dhtmlxcalendar_selector_obj dhtmlxcalendar_&quot;+w;this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display=(A==&quot;year&quot;?&quot;&quot;:&quot;none&quot;);var v=Math.max(0,q-Math.round(this._sel.offsetWidth/2));if(v+this._sel.offsetWidth&gt;this._sel.parentNode.offsetWidth){v=this._sel.parentNode.offsetWidth-this._sel.offsetWidth}this._sel.style.left=v+&quot;px&quot;;if(A==&quot;hours&quot;||A==&quot;minutes&quot;){this._sel.style.top=C-this._sel.offsetHeight+&quot;px&quot;}else{this._sel.style.top=C+&quot;px&quot;}this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+&quot;px&quot;;this._sel.style.visibility=&quot;visible&quot;;this._doOnSelectorShow(A)};this._doOnSelectorShow=function(a){if(a==&quot;month&quot;){this._updateActiveMonth()}if(a==&quot;year&quot;){this._updateYearsList(this._activeMonth)}if(a==&quot;hours&quot;){this._updateActiveHours()}if(a==&quot;minutes&quot;){this._updateActiveMinutes()}};this._hideSelector=function(a){if(!this._sel){return}this._sel.style.display=&quot;none&quot;;this._sel.style.visible=&quot;hidden&quot;;this._selCover.style.display=&quot;none&quot;;if(this._sel._t==&quot;minutes&quot;&amp;&amp;this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.Ul(&quot;%i&quot;);this._unloadSelector(&quot;minutes&quot;)}};this._isSelectorVisible=function(){if(!this._sel){return false}return(this._sel.style.display!=&quot;none&quot;)};this._doOnSelectorChange=function(a){this.callEvent(&quot;onChange&quot;,[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),a===true])};this._clearSelHover=function(){if(!this._selHover){return}this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,&quot;&quot;));this._selHover=null};this._unloadSelector=function(v){if(!this._sel){return}if(!this._sel._ta[v]){return}if(v==&quot;month&quot;){this.msCont.onclick=this.msCont.ontouchstart=null;this._msActive=null;for(var q in this._msCells){this._msCells[q]._cell=null;this._msCells[q]._month=null;this._msCells[q].parentNode.removeChild(this._msCells[q]);this._msCells[q]=null}this._msCells=null;while(this.msCont.childNodes.length&gt;0){this.msCont.removeChild(this.msCont.lastChild)}this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if(v==&quot;year&quot;){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(var q in this._ysCells){this._ysCells[q]._cell=null;this._ysCells[q]._year=null;this._ysCells[q].parentNode.removeChild(this._ysCells[q]);this._ysCells[q]=null}this._ysCells=null;while(this.ysCont.childNodes.length&gt;0){this.ysCont.removeChild(this.ysCont.lastChild)}this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if(v==&quot;hours&quot;){this.hsCont.onclick=this.hsCont.ontouchstart=null;this._hsActive=null;for(var q in this._hsCells){this._hsCells[q]._cell=null;this._hsCells[q]._hours=null;this._hsCells[q].parentNode.removeChild(this._hsCells[q]);this._hsCells[q]=null}this._hsCells=null;while(this.hsCont.childNodes.length&gt;0){this.hsCont.removeChild(this.hsCont.lastChild)}this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if(v==&quot;minutes&quot;){this.rsCont.onclick=this.rsCont.ontouchstart=null;this._rsActive=null;for(var q in this._rsCells){this._rsCells[q]._cell=null;this._rsCells[q]._minutes=null;this._rsCells[q].parentNode.removeChild(this._rsCells[q]);this._rsCells[q]=null}this._rsCells=null;while(this.rsCont.childNodes.length&gt;0){this.rsCont.removeChild(this.rsCont.lastChild)}this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[v]=null};this.setMinutesInterval=function(a){if(!(a==1||a==5||a==10||a==15)){return}this._minutesInterval=a;this._unloadSelector(&quot;minutes&quot;)};this._updateActiveMonth=function(){if(typeof(this._msActive)!=&quot;undefined&quot;&amp;&amp;typeof(this._msCells[this._msActive])!=&quot;undefined&quot;){this._msCells[this._msActive].className=&quot;dhtmlxcalendar_selector_cell&quot;}this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className=&quot;dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active&quot;};this._updateActiveYear=function(){var a=this._activeMonth.getFullYear();if(this._ysCells[a]){this._ysCells[a].className=&quot;dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active&quot;}};this._updateYearsList=function(C){for(var x in this._ysCells){this._ysCells[x]=null;delete this._ysCells[x]}var y=12*Math.floor(C.getFullYear()/12);for(var A=0;A&lt;4;A++){for(var v=0;v&lt;3;v++){this.ysCont.childNodes[A].childNodes[v].innerHTML=y;this.ysCont.childNodes[A].childNodes[v]._year=y;this.ysCont.childNodes[A].childNodes[v].className=&quot;dhtmlxcalendar_selector_cell&quot;;this._ysCells[y++]=this.ysCont.childNodes[A].childNodes[v]}}this._updateActiveYear()};this._scrollYears=function(a){var v=(a&lt;0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+a;var q=new Date(v,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(q)};this._updateActiveHours=function(){if(typeof(this._hsActive)!=&quot;undefined&quot;&amp;&amp;typeof(this._hsCells[this._hsActive])!=&quot;undefined&quot;){this._hsCells[this._hsActive].className=&quot;dhtmlxcalendar_selector_cell&quot;}this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className=&quot;dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active&quot;};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){if(this._rsActive!=null&amp;&amp;typeof(this._rsActive)!=&quot;undefined&quot;&amp;&amp;typeof(this._rsCells[this._rsActive])!=&quot;undefined&quot;){this._rsCells[this._rsActive].className=&quot;dhtmlxcalendar_selector_cell&quot;}if(this._minutesInterval==1){this._rsActive=(this.Ul(&quot;%i&quot;).toString()).charAt(this._selectorMode==1?0:1)}else{this._rsActive=this._activeDate.getMinutes()}if(typeof(this._rsCells[this._rsActive])!=&quot;undefined&quot;){this._rsCells[this._rsActive].className=&quot;dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active&quot;}};this._updateVisibleMinutes=function(q){var a=this._fixLength(this._activeDate.getMinutes(),2).toString();if(q==true){a=a.charAt(0)+&quot;<SPAN class="dhtmlxcalendar_selected_date">&quot;+a.charAt(1)+&quot;</SPAN>&quot;}this.contTime.firstChild.firstChild.childNodes[3].innerHTML=a;if(q==true){this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=true}};this._fixLength=function(a,q){while(String(a).length&lt;q){a=&quot;0&quot;+String(a)}return a};this._dateFormat=&quot;&quot;;this._dateFormatRE=null;this.setDateFormat=function(x){var w={};if(this._strToDate!=null){for(var q in this.i){if(this.i[q].input!=null&amp;&amp;this.i[q].input.value.length&gt;0){var y=this._strToDate(this.i[q].input.value);if(y instanceof Date){w[q]=y}}}}this._dateFormat=x;var v=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(a){var A=a.replace(/%/,&quot;&quot;);switch(A){case &quot;n&quot;:case &quot;h&quot;:case &quot;j&quot;:case &quot;g&quot;:case &quot;G&quot;:return &quot;\\d{1,2}&quot;;case &quot;m&quot;:case &quot;d&quot;:case &quot;H&quot;:case &quot;i&quot;:case &quot;s&quot;:case &quot;y&quot;:return &quot;\\d{2}&quot;;case &quot;Y&quot;:return &quot;\\d{4}&quot;;case &quot;M&quot;:return &quot;(&quot;+l.langData[l.lang].Vx.join(&quot;|&quot;).toLowerCase()+&quot;){1,}&quot;;case &quot;F&quot;:return &quot;(&quot;+l.langData[l.lang].RB.join(&quot;|&quot;).toLowerCase()+&quot;){1,}&quot;;case &quot;D&quot;:return &quot;[a-z]{2}&quot;;case &quot;a&quot;:case &quot;A&quot;:return &quot;AM|PM&quot;}return a});this._dateFormatRE=new RegExp(v,&quot;i&quot;);for(var q in w){this.i[q].input.value=this._dateToStr(w[q])}w=null};this.setDateFormat(this.langData[this.lang].dateformat||&quot;%Y-%m-%d&quot;);this._getInd=function(w,a){for(var v=0;v&lt;a.length;v++){if(a[v].toLowerCase()==w){return v}}return-1};this._updateDateStr=function(q){if(!this._dateFormatRE|| !q.match(this._dateFormatRE)){return}if(q==this.Ul()){return}var a=this._strToDate(q);if(!(a instanceof Date)){return}if(this.mR(&quot;onBeforeChange&quot;)){if(!this.callEvent(&quot;onBeforeChange&quot;,[new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())])){if(this.i!=null&amp;&amp;this._activeInp!=null&amp;&amp;this.i[this._activeInp]!=null&amp;&amp;this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.Ul()}return}}this._nullDate=false;this._activeDate=a;this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleMinutes();this._updateVisibleHours();if(this._sel&amp;&amp;this._isSelectorVisible()){this._doOnSelectorShow(this._sel._t)}this._doOnSelectorChange(true)};this.showMonth=function(a){if(typeof(a)==&quot;string&quot;){a=this._strToDate(a)}if(!(a instanceof Date)){return}this._drawMonth(a)};this.WK=function(x,y,q,w){var v=this._strToDate(y,x);if(w){return v}this.setDate(v)};this.Ul=function(q,a){if(!(a&amp;&amp;a instanceof Date)){if(this._nullDate){return &quot;&quot;}a=new Date(this._activeDate)}return this._dateToStr(a,q)};this.getWeekNumber=function(x){if(typeof(x)==&quot;string&quot;){x=this._strToDate(x)}if(!(x instanceof Date)){return &quot;Invalid Date&quot;}if(typeof(this._ftDay)==&quot;undefined&quot;){this._ftDay=4}var E=this._wStart;var w=E+7;var D=4;var q=new Date(x.getFullYear(),0,1,0,0,0,0);var v=q.getDay();if(v==0){v=7}if(D&lt;E){D+=7;v+=7}var A=0;if(v&gt;=E&amp;&amp;v&lt;=D){}else{A=1}var y=v-E;var C=new Date(x.getFullYear(),0,1-y+A*7,0,0,0,0);var H=604800000;var a=new Date(x.getFullYear(),x.getMonth(),x.getDate()+1,0,0,0,0);var F=Math.ceil((a.getTime()-C.getTime())/H);return F};this.showWeekNumbers=function(){this.base.firstChild.className=&quot;dhtmlxcalendar_wn&quot;};this.hideWeekNumbers=function(){this.base.firstChild.className=&quot;&quot;};this.show=function(v){if(!v&amp;&amp;this._hasParent){this._show();return}if(typeof(v)==&quot;object&quot;&amp;&amp;typeof(v._dhtmlxcalendar_uid)!=&quot;undefined&quot;&amp;&amp;this.i[v._dhtmlxcalendar_uid]==v){this._show(v._dhtmlxcalendar_uid);return}if(typeof(v)==&quot;undefined&quot;){for(var q in this.i){if(!v){v=q}}}if(!v){return}this._show(v)};this.hide=function(){if(this._isVisible()){this._hide()}};this.Yi=function(){return this._isVisible()};this._activeInp=null;this.pos=&quot;bottom&quot;;this.Yy=function(a,q){this._px=null;this._py=null;if(a==&quot;right&quot;||a==&quot;bottom&quot;){this.pos=a}else{this.pos=&quot;int&quot;;if(typeof(a)!=&quot;undefined&quot;&amp;&amp; !isNaN(a)){this.base.style.left=a+&quot;px&quot;;this._px=a}if(typeof(q)!=&quot;undefined&quot;&amp;&amp; !isNaN(q)){this.base.style.top=q+&quot;px&quot;;this._py=q}this._ifrSize()}};this._show=function(A,a){if(a===true&amp;&amp;this._activeInp==A&amp;&amp;this._isVisible()){this._hide();return}this.base.style.visibility=&quot;hidden&quot;;this.base.style.display=&quot;&quot;;if(!A){if(this._px&amp;&amp;this._py){this.base.style.left=this._px+&quot;px&quot;;this.base.style.top=this._py+&quot;px&quot;}else{this.base.style.left=&quot;0px&quot;;this.base.style.top=&quot;0px&quot;}}else{if(this.base.className.indexOf(&quot;dhtmlxcalendar_in_input&quot;)== -1){this.base.className+=&quot; dhtmlxcalendar_in_input&quot;}var w=(this.i[A].input||this.i[A].button);var q=(navigator.appVersion.indexOf(&quot;MSIE&quot;)!= -1);var x=Math.max((q?document.documentElement:document.getElementsByTagName(&quot;html&quot;)[0]).scrollTop,document.body.scrollTop);var v=x+(q?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight);if(this.pos==&quot;right&quot;){this.base.style.left=this._getLeft(w)+w.offsetWidth+&quot;px&quot;;this.base.style.top=Math.min(this._getTop(w),v-this.base.offsetHeight)+&quot;px&quot;}else{if(this.pos==&quot;bottom&quot;){var y=this._getTop(w)+w.offsetHeight+1;if(y+this.base.offsetHeight&gt;v){y=this._getTop(w)-this.base.offsetHeight}this.base.style.left=this._getLeft(w)+&quot;px&quot;;this.base.style.top=y+&quot;px&quot;}else{this.base.style.left=(this._px||0)+&quot;px&quot;;this.base.style.top=(this._py||0)+&quot;px&quot;}}this._activeInp=A;w=null}this._hideSelector();this.base.style.visibility=&quot;visible&quot;;this.base.style.zIndex=window.dhx4.zim.reserve(this.kZ.zi);this._ifrSize();if(this._ifr){this._ifr.style.display=&quot;&quot;}this.callEvent(&quot;onShow&quot;,[])};this._hide=function(){this._hideSelector();this.base.style.display=&quot;none&quot;;window.dhx4.zim.clear(this.kZ.zi);if(this.base.className.indexOf(&quot;dhtmlxcalendar_in_input&quot;)&gt;=0){this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,&quot;&quot;)}this._activeInp=null;if(this._ifr){this._ifr.style.display=&quot;none&quot;}this.callEvent(&quot;onHide&quot;,[])};this._isVisible=function(){return(this.base.style.display!=&quot;none&quot;)};this._getLeft=function(a){return this._posGetOffset(a).left};this._getTop=function(a){return this._posGetOffset(a).top};this._posGetOffsetSum=function(a){var v=0,q=0;while(a){v=v+parseInt(a.offsetTop);q=q+parseInt(a.offsetLeft);a=a.offsetParent}return{top:v,left:q}};this._posGetOffsetRect=function(w){var A=w.getBoundingClientRect();var C=document.body;var q=document.documentElement;var a=window.pageYOffset||q.scrollTop||C.scrollTop;var x=window.pageXOffset||q.scrollLeft||C.scrollLeft;var y=q.clientTop||C.clientTop||0;var D=q.clientLeft||C.clientLeft||0;var E=A.top+a-y;var v=A.left+x-D;return{top:Math.round(E),left:Math.round(v)}};this._posGetOffset=function(a){return this[a.getBoundingClientRect?&quot;_posGetOffsetRect&quot;:&quot;_posGetOffsetSum&quot;](a)};this._rangeActive=false;this._rangeFrom=null;this._rangeTo=null;this._rangeSet={};this.setInsensitiveDays=function(w){var a=this._extractDates(w);for(var v=0;v&lt;a.length;v++){this._rangeSet[new Date(a[v].getFullYear(),a[v].getMonth(),a[v].getDate(),0,0,0,0).getTime()]=true}this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(v){if(v==null){this._clearHolidays()}else{if(v!=null){var a=this._extractDates(v);for(var w=0;w&lt;a.length;w++){this._holidays[new Date(a[w].getFullYear(),a[w].getMonth(),a[w].getDate(),0,0,0,0).getTime()]=true}}}this._drawMonth(this._activeMonth)};this._extractDates=function(x){if(typeof(x)==&quot;string&quot;||x instanceof Date){x=[x]}var v=[];for(var y=0;y&lt;x.length;y++){if(typeof(x[y])==&quot;string&quot;){var A=x[y].split(&quot;,&quot;);for(var a=0;a&lt;A.length;a++){v.push(this._strToDate(A[a]))}}else{if(x[y]instanceof Date){v.push(x[y])}}}return v};this._clearRange=function(){this._rangeActive=false;this._rangeType=null;this._rangeFrom=null;this._rangeTo=null};this._clearRangeSet=function(){for(var q in this._rangeSet){this._rangeSet[q]=null;delete this._rangeSet[q]}};this._clearHolidays=function(){for(var q in this._holidays){this._holidays[q]=null;delete this._holidays[q]}};this._isOutOfRange=function(q){if(this._rangeSet[q]==true){return true}if(this._rangeActive){if(this._rangeType==&quot;in&quot;&amp;&amp;(q&lt;this._rangeFrom||q&gt;this._rangeTo)){return true}if(this._rangeType==&quot;out&quot;&amp;&amp;(q&gt;=this._rangeFrom&amp;&amp;q&lt;=this._rangeTo)){return true}if(this._rangeType==&quot;from&quot;&amp;&amp;q&lt;this._rangeFrom){return true}if(this._rangeType==&quot;to&quot;&amp;&amp;q&gt;this._rangeTo){return true}}var a=new Date(q);if(this._rangeWeek){if(this._rangeWeekData[a.getDay()]===true){return true}}if(this._rangeMonth){if(this._rangeMonthData[a.getDate()]===true){return true}}if(this._rangeYear){if(this._rangeYearData[a.getMonth()+&quot;_&quot;+a.getDate()]===true){return true}}return false};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(w,v,a){var q=false;if(w!=null&amp;&amp;v!=null){if(!(w instanceof Date)){w=this._strToDate(w)}if(!(v instanceof Date)){v=this._strToDate(v)}if(w.getTime()&gt;v.getTime()){return}this._rangeFrom=new Date(w.getFullYear(),w.getMonth(),w.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(v.getFullYear(),v.getMonth(),v.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType=&quot;in&quot;;q=true}if(!q&amp;&amp;w!=null&amp;&amp;v==null){if(!(w instanceof Date)){w=this._strToDate(w)}this._rangeFrom=new Date(w.getFullYear(),w.getMonth(),w.getDate(),0,0,0,0).getTime();this._rangeTo=null;if(a===true){this._rangeFrom++}this._rangeActive=true;this._rangeType=&quot;from&quot;;q=true}if(!q&amp;&amp;w==null&amp;&amp;v!=null){if(!(v instanceof Date)){v=this._strToDate(v)}this._rangeFrom=null;this._rangeTo=new Date(v.getFullYear(),v.getMonth(),v.getDate(),0,0,0,0).getTime();if(a===true){this._rangeTo--}this._rangeActive=true;this._rangeType=&quot;to&quot;;q=true}if(q){this._drawMonth(this._activeMonth)}};this.setInsensitiveRange=function(q,a){if(q!=null&amp;&amp;a!=null){if(!(q instanceof Date)){q=this._strToDate(q)}if(!(a instanceof Date)){a=this._strToDate(a)}if(q.getTime()&gt;a.getTime()){return}this._rangeFrom=new Date(q.getFullYear(),q.getMonth(),q.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType=&quot;out&quot;;this._drawMonth(this._activeMonth);return}if(q!=null&amp;&amp;a==null){this.setSensitiveRange(null,q,true);return}if(q==null&amp;&amp;a!=null){this.setSensitiveRange(a,null,true);return}};this.disableDays=function(A,y){if(A==&quot;week&quot;){if(typeof(y)!=&quot;object&quot;&amp;&amp;typeof(y.length)==&quot;undefined&quot;){y=[y]}if(!this._rangeWeekData){this._rangeWeekData={}}for(var v in this._rangeWeekData){this._rangeWeekData[v]=false;delete this._rangeWeekData[v]}for(var x=0;x&lt;y.length;x++){this._rangeWeekData[y[x]]=true;if(y[x]==7){this._rangeWeekData[0]=true}}this._rangeWeek=true}if(A==&quot;month&quot;){if(typeof(y)!=&quot;object&quot;&amp;&amp;typeof(y.length)==&quot;undefined&quot;){y=[y]}if(!this._rangeMonthData){this._rangeMonthData={}}for(var v in this._rangeMonthData){this._rangeMonthData[v]=false;delete this._rangeMonthData[v]}for(var x=0;x&lt;y.length;x++){this._rangeMonthData[y[x]]=true}this._rangeMonth=true}if(A==&quot;year&quot;){var w=this._extractDates(y);if(!this._rangeYearData){this._rangeYearData={}}for(var v in this._rangeYearData){this._rangeYearData[v]=false;delete this._rangeYearData[v]}for(var x=0;x&lt;w.length;x++){this._rangeYearData[w[x].getMonth()+&quot;_&quot;+w[x].getDate()]=true}this._rangeYear=true}this._drawMonth(this._activeMonth)};this.enableDays=function(a){if(a==&quot;week&quot;){this._rangeWeek=false}if(a==&quot;month&quot;){this._rangeMonth=false}if(a==&quot;year&quot;){this._rangeYear=false}this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=false;this._tipPopup=null;this._tipCellDate=null;this._tipCellDim=null;this.setTooltip=function(w,A,C,a){var x=this._extractDates(w);for(var y=0;y&lt;x.length;y++){var v=new Date(x[y].getFullYear(),x[y].getMonth(),x[y].getDate(),0,0,0,0).getTime();this._tipData[v]={text:A,showIcon:C,usePopup:a}}this._drawMonth(this._activeMonth)};this.clearTooltip=function(v){var w=this._extractDates(v);for(var x=0;x&lt;w.length;x++){var a=new Date(w[x].getFullYear(),w[x].getMonth(),w[x].getDate(),0,0,0,0).getTime();this._tipData[a]=null;delete this._tipData[a]}this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){if(this._tipEvs){return}this.attachEvent(&quot;onMouseOver&quot;,function(q){var a=new Date(q.getFullYear(),q.getMonth(),q.getDate(),0,0,0,0).getTime();if(this._tipData[a]!=null){if(this._tipTM){window.clearTimeout(this._tipTM)}this._tipCellDate=q;this._tipCellDim=this.getCellDimension(q);this._tipText=this._tipData[a].text;this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime)}});this.attachEvent(&quot;onMouseOut&quot;,this._hideTooltipPopup);this._tipEvs=true};this._showTooltipPopup=function(A,a,C,q,v){if(!l._tipPopup){l._tipPopup=new dhtmlXPopup({mode:&quot;top&quot;})}l._tipPopup.attachHTML(l._tipText);l._tipPopup.show(l._tipCellDim.x,l._tipCellDim.y,l._tipCellDim.w,l._tipCellDim.h);l.callEvent(&quot;onPopupShow&quot;,[l._tipCellDate])};this._hideTooltipPopup=function(){if(this._tipTM){window.clearTimeout(this._tipTM)}if(this._tipPopup!=null&amp;&amp;this._tipPopup.Yi()){this._tipPopup.hide();this.callEvent(&quot;onPopupHide&quot;,[this._tipCellDate])}};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(x){if(typeof(x)==&quot;string&quot;){x=this._strToDate(x)}if(!(x instanceof Date)){return null}var y=new Date(x.getFullYear(),x.getMonth(),x.getDate(),0,0,0,0).getTime();var v=null;for(var A=0;A&lt;this.contDates.childNodes.length;A++){for(var a=0;a&lt;this.contDates.childNodes[A].childNodes.length;a++){var C=this.contDates.childNodes[A].childNodes[a];if(C._date!=null&amp;&amp;C._date.getTime()==y){v={x:this._getLeft(C),y:this._getTop(C),w:C.offsetWidth,h:C.offsetHeight}}C=null}}return v};this._updateFromInput=function(a){if(this._nullInInput&amp;&amp;((a.value).replace(/\s/g,&quot;&quot;)).length==0){if(this.mR(&quot;onBeforeChange&quot;)){if(!this.callEvent(&quot;onBeforeChange&quot;,[null])){if(this.i!=null&amp;&amp;this._activeInp!=null&amp;&amp;this.i[this._activeInp]!=null&amp;&amp;this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.Ul()}return}}this.setDate(null)}else{this._updateDateStr(a.value)}a=null};this._doOnClick=function(q){q=q||event;var a=(q.target||q.srcElement);if(a._dhtmlxcalendar_uid&amp;&amp;a._dhtmlxcalendar_uid!=l._activeInp&amp;&amp;l._isVisible()&amp;&amp;l._activeInp){l._hide();return}if(!a._dhtmlxcalendar_uid|| !l.i[a._dhtmlxcalendar_uid]){if(l._isSelectorVisible()){l._hideSelector()}else{if(!l._hasParent&amp;&amp;l._isVisible()){l._hide()}}}};this._doOnKeyDown=function(a){a=a||event;if(a.keyCode==27||a.keyCode==13){if(l._isSelectorVisible()){l._hideSelector()}else{if(l._isVisible()&amp;&amp; !l._hasParent){l._hide()}}}};this._doOnInpClick=function(q){q=q||event;var a=(q.target||q.srcElement);if(!a._dhtmlxcalendar_uid){return}if(!l._listenerEnabled){l._updateFromInput(a)}l._show(a._dhtmlxcalendar_uid,true)};this._doOnInpKeyUp=function(q){q=q||event;var a=(q.target||q.srcElement);if(q.keyCode==13|| !a._dhtmlxcalendar_uid){return}if(!l._listenerEnabled){l._updateFromInput(a)}};this._doOnBtnClick=function(q){q=q||event;var a=(q.target||q.srcElement);if(!a._dhtmlxcalendar_uid){return}if(l.i[a._dhtmlxcalendar_uid].input!=null){l._updateFromInput(l.i[a._dhtmlxcalendar_uid].input)}l._show(a._dhtmlxcalendar_uid,true)};this._doOnUnload=function(){if(l&amp;&amp;l.unload){l.unload()}};if(typeof(window.addEventListener)==&quot;function&quot;){document.body.addEventListener((this.kZ.touch?&quot;touchstart&quot;:&quot;click&quot;),l._doOnClick,false);window.addEventListener(&quot;keydown&quot;,l._doOnKeyDown,false);window.addEventListener(&quot;unload&quot;,l._doOnUnload,false)}else{document.body.attachEvent(&quot;onclick&quot;,l._doOnClick);document.body.attachEvent(&quot;onkeydown&quot;,l._doOnKeyDown);window.attachEvent(&quot;onunload&quot;,l._doOnUnload)}this.attachObj=function(v){var q=window.dhx4.newId();if(typeof(v)==&quot;string&quot;){this.i[q]={input:document.getElementById(v)}}else{if(typeof(v.tagName)!=&quot;undefined&quot;){this.i[q]={input:v}}else{if(typeof(v)==&quot;object&quot;&amp;&amp;(v.input!=null||v.button!=null)){this.i[q]={};if(v.input!=null){this.i[q].input=(typeof(v.input)==&quot;string&quot;?document.getElementById(v.input):v.input)}if(v.button!=null){this.i[q].button=(typeof(v.button)==&quot;string&quot;?document.getElementById(v.button):v.button)}}}}this._attachEventsToObject(q);return q};this.detachObj=function(w){var v=null;if(this.i[w]!=null){v=w}else{if(typeof(w)==&quot;string&quot;){w=document.getElementById(w);v=w._dhtmlxcalendar_uid}else{if(typeof(w.tagName)!=&quot;undefined&quot;){v=w._dhtmlxcalendar_uid}else{if(typeof(w)==&quot;object&quot;&amp;&amp;(w.input!=null||w.button!=null)){if(v==null&amp;&amp;w.input!=null){v=(typeof(w.input)==&quot;string&quot;?document.getElementById(w.input):w.input)._dhtmlxcalendar_uid}if(v==null&amp;&amp;w.button!=null){v=(typeof(w.button)==&quot;string&quot;?document.getElementById(w.button):w.button)._dhtmlxcalendar_uid}}}}}if(v!=null&amp;&amp;this.i[v]!=null){this._detachEventsFromObject(v);for(var q in this.i[q]){this.i[v][q]._dhtmlxcalendar_uid=null;this.i[v][q]=null;delete this.i[v][q]}this.i[v]=null;delete this.i[v];return true}return false};this._attachEventsToObject=function(q){if(this.i[q].button!=null){this.i[q].button._dhtmlxcalendar_uid=q;if(typeof(window.addEventListener)==&quot;function&quot;){this.i[q].button.addEventListener((this.kZ.touch?&quot;touchstart&quot;:&quot;click&quot;),l._doOnBtnClick,false)}else{this.i[q].button.attachEvent(&quot;onclick&quot;,l._doOnBtnClick)}}else{if(this.i[q].input!=null){this.i[q].input._dhtmlxcalendar_uid=q;if(typeof(window.addEventListener)==&quot;function&quot;){this.i[q].input.addEventListener((this.kZ.touch?&quot;touchstart&quot;:&quot;click&quot;),l._doOnInpClick,false);this.i[q].input.addEventListener(&quot;keyup&quot;,l._doOnInpKeyUp,false)}else{this.i[q].input.attachEvent(&quot;onclick&quot;,l._doOnInpClick);this.i[q].input.attachEvent(&quot;onkeyup&quot;,l._doOnInpKeyUp)}}}};this._detachEventsFromObject=function(q){if(this.i[q].button!=null){if(typeof(window.addEventListener)==&quot;function&quot;){this.i[q].button.removeEventListener((this.kZ.touch?&quot;touchstart&quot;:&quot;click&quot;),l._doOnBtnClick,false)}else{this.i[q].button.detachEvent(&quot;onclick&quot;,l._doOnBtnClick)}}else{if(this.i[q].input!=null){if(typeof(window.addEventListener)==&quot;function&quot;){this.i[q].input.removeEventListener((this.kZ.touch?&quot;touchstart&quot;:&quot;click&quot;),l._doOnInpClick,false);this.i[q].input.removeEventListener(&quot;keyup&quot;,l._doOnInpKeyUp,false)}else{this.i[q].input.detachEvent(&quot;onclick&quot;,l._doOnInpClick);this.i[q].input.detachEvent(&quot;onkeyup&quot;,l._doOnInpKeyUp)}}}};this.enableListener=function(a){if(!a){return}if(typeof(window.addEventListener)==&quot;function&quot;){a.addEventListener(&quot;focus&quot;,l._listenerEvFocus,false);a.addEventListener(&quot;blur&quot;,l._listenerEvBlur,false)}else{a.attachEvent(&quot;onfocus&quot;,l._listenerEvFocus);a.attachEvent(&quot;onblur&quot;,l._listenerEvBlur)}a=null};this.disableListener=function(a){if(!a){return}a._f0=false;if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(window.addEventListener)==&quot;function&quot;){a.removeEventListener(&quot;focus&quot;,l._listenerEvFocus,false);a.removeEventListener(&quot;blur&quot;,l._listenerEvBlur,false)}else{a.detachEvent(&quot;onfocus&quot;,l._listenerEvFocus);a.detachEvent(&quot;onblur&quot;,l._listenerEvBlur)}a=null};this._startListener=function(a){if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(a._v1)==&quot;undefined&quot;){a._v1=a.value}if(a._v1!=a.value){this._updateFromInput(a);a._v1=a.value}if(a._f0){this._tmListener=window.setTimeout(function(){l._startListener(a)},100)}};this._listenerEvFocus=function(q){q=q||event;var a=q.target||q.srcElement;a._f0=true;l._startListener(a);a=null};this._listenerEvBlur=function(q){q=q||event;var a=q.target||q.srcElement;a._f0=false;a=null};for(var o in this.i){this._attachEventsToObject(o)}window.dhx4._eventable(this);this._evOnArrowClick=function(a){return this.callEvent(&quot;onArrowClick&quot;,a)};this._evOnClick=function(a){return this.callEvent(&quot;onClick&quot;,a)};this._evOnMouseOut=function(a){return this.callEvent(&quot;onMouseOut&quot;,a)};this._evOnMouseOver=function(a){return this.callEvent(&quot;onMouseOver&quot;,a)};this.unload=function(){this._activeDate=null;this._activeDateCell=null;this._activeInp=null;this._activeMonth=null;this._dateFormat=null;this._dateFormatRE=null;this._lastHover=null;if(this._tmListener){window.clearTimeout(this._tmListener)}this._tmListener=null;if(typeof(window.addEventListener)==&quot;function&quot;){document.body.removeEventListener((this.kZ.touch?&quot;touchstart&quot;:&quot;click&quot;),l._doOnClick,false);window.removeEventListener(&quot;keydown&quot;,l._doOnKeyDown,false);window.removeEventListener(&quot;unload&quot;,l._doOnUnload,false)}else{document.body.detachEvent(&quot;onclick&quot;,l._doOnClick);document.body.detachEvent(&quot;onkeydown&quot;,l._doOnKeyDown);window.detachEvent(&quot;onunload&quot;,l._doOnKeyDown)}this._doOnClick=null;this._doOnKeyDown=null;this._doOnUnload=null;for(var q in this.i){this.i[q]._dhtmlxcalendar_uid=null;this._detachEventsFromObject(q);this.disableListener(this.i[q].input);this.i[q]=null;delete this.i[q]}this.i=null;this._doOnInpClick=null;this._doOnInpKeyUp=null;window.dhx4._eventable(this,&quot;clear&quot;);this.contMonth.onselectstart=null;this.contMonth.firstChild.firstChild.onclick=null;this.contMonth.firstChild.firstChild.ontouchstart=null;this.contMonth.firstChild.firstChild.firstChild.onmouseover=null;this.contMonth.firstChild.firstChild.firstChild.onmouseout=null;this.contMonth.firstChild.firstChild.lastChild.onmouseover=null;this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;while(this.contMonth.firstChild.firstChild.childNodes.length&gt;0){this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild)}this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild);this.contMonth.removeChild(this.contMonth.firstChild);this.contMonth.parentNode.removeChild(this.contMonth);this.contMonth=null;while(this.contDays.firstChild.childNodes.length&gt;0){this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild)}this.contDays.removeChild(this.contDays.firstChild);this.contDays.parentNode.removeChild(this.contDays);this.contDays=null;this.contDates.onclick=null;this.contDates.ontouchstart=null;this.contDates.onmouseover=null;this.contDates.onmouseout=null;while(this.contDates.childNodes.length&gt;0){while(this.contDates.lastChild.childNodes.length&gt;0){this.contDates.lastChild.lastChild._css_date=null;this.contDates.lastChild.lastChild._css_month=null;this.contDates.lastChild.lastChild._css_weekend=null;this.contDates.lastChild.lastChild._css_hover=null;this.contDates.lastChild.lastChild._date=null;this.contDates.lastChild.lastChild._q=null;this.contDates.lastChild.lastChild._w=null;this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild)}this.contDates.removeChild(this.contDates.lastChild)}this.contDates.parentNode.removeChild(this.contDates);this.contDates=null;this.contTime.firstChild.firstChild.onclick=null;this.contTime.firstChild.firstChild.ontouchstart=null;while(this.contTime.firstChild.firstChild.childNodes.length&gt;0){this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild)}this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild);this.contTime.removeChild(this.contTime.firstChild);this.contTime.parentNode.removeChild(this.contTime);this.contTime=null;this._lastHover=null;this._unloadSelector(&quot;month&quot;);this._unloadSelector(&quot;year&quot;);this._unloadSelector(&quot;hours&quot;);this._unloadSelector(&quot;minutes&quot;);if(this._selCover){this._selCover.parentNode.removeChild(this._selCover);this._selCover=null}if(this._sel){for(var q in this._sel._ta){this._sel._ta[q]=null}this._sel._ta=null;this._sel._t=null;this._sel.onmouseover=null;this._sel.onmouseout=null;while(this._sel.firstChild.firstChild.firstChild.childNodes.length&gt;0){this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null;this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild)}this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild);this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);while(this._sel.childNodes.length&gt;0){this._sel.removeChild(this._sel.lastChild)}this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.onmousedown=null;this.base.ontouchstart=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.base=null;this._clearDayHover=null;this._clearSelHover=null;this._doOnSelectorChange=null;this._doOnSelectorShow=null;this._drawMonth=null;this._fixLength=null;this._getLeft=null;this._getTop=null;this._ifrSize=null;this._hide=null;this._hideSelector=null;this._initSelector=null;this._isSelectorVisible=null;this._isVisible=null;this._posGetOffset=null;this._posGetOffsetRect=null;this._posGetOffsetSum=null;this._scrollYears=null;this._show=null;this._showSelector=null;this._strToDate=null;this._updateActiveHours=null;this._updateActiveMinutes=null;this._updateActiveMonth=null;this._updateActiveYear=null;this._updateCellStyle=null;this._updateDateStr=null;this._updateVisibleHours=null;this._updateVisibleMinutes=null;this._updateYearsList=null;this.enableIframe=null;this.hide=null;this.hideTime=null;this.setDate=null;this.setDateFormat=null;this.Vs=null;this.show=null;this.showTime=null;this.unload=null;if(this._tipPopup!=null){this._tipPopup.unload();this._tipPopup=null}for(var q in this){delete this[q]}q=l=null};this.setDate(this._activeDate);return this}dhtmlXCalendarObject.prototype.lang=&quot;en&quot;;dhtmlXCalendarObject.prototype.langData={en:{dateformat:&quot;%Y-%m-%d&quot;,hdrformat:&quot;%F %Y&quot;,RB:[&quot;January&quot;,&quot;February&quot;,&quot;March&quot;,&quot;April&quot;,&quot;May&quot;,&quot;June&quot;,&quot;July&quot;,&quot;August&quot;,&quot;September&quot;,&quot;October&quot;,&quot;November&quot;,&quot;December&quot;],Vx:[&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;,&quot;Jun&quot;,&quot;Jul&quot;,&quot;Aug&quot;,&quot;Sep&quot;,&quot;Oct&quot;,&quot;Nov&quot;,&quot;Dec&quot;],abo:[&quot;Sunday&quot;,&quot;Monday&quot;,&quot;Tuesday&quot;,&quot;Wednesday&quot;,&quot;Thursday&quot;,&quot;Friday&quot;,&quot;Saturday&quot;],Zo:[&quot;Su&quot;,&quot;Mo&quot;,&quot;Tu&quot;,&quot;We&quot;,&quot;Th&quot;,&quot;Fr&quot;,&quot;Sa&quot;],Yg:1,weekname:&quot;w&quot;}};dhtmlXCalendarObject.prototype._buildMonthHdr=function(l){var c=this;var h=function(m){return(String(m).length==1?&quot;0&quot;+String(m):m)};var a=function(m,n){return &quot;<SPAN class="dhtmlxcalendar_month_label_&quot;+m+&quot;">&quot;+n+&quot;</SPAN>&quot;};var g=String(this.langData[this.lang].hdrformat||(&quot;%F %Y&quot;)).replace(/%[a-z]/gi,function(m){switch(m){case &quot;%m&quot;:return a(&quot;month&quot;,h(l.getMonth()+1));case &quot;%n&quot;:return a(&quot;month&quot;,l.getMonth()+1);case &quot;%M&quot;:return a(&quot;month&quot;,c.langData[c.lang].Vx[l.getMonth()]);case &quot;%F&quot;:return a(&quot;month&quot;,c.langData[c.lang].RB[l.getMonth()]);case &quot;%y&quot;:return a(&quot;year&quot;,h(l.getYear()%100));case &quot;%Y&quot;:return a(&quot;year&quot;,l.getFullYear());case &quot;%%&quot;:return &quot;%&quot;;default:return m}});c=h=a=null;return g};dhtmlXCalendarObject.prototype.enableIframe=function(a){if(a==true){if(!this._ifr){this._ifr=document.createElement(&quot;IFRAME&quot;);this._ifr.frameBorder=0;this._ifr.border=0;this._ifr.setAttribute(&quot;src&quot;,&quot;javascript:false;&quot;);this._ifr.className=&quot;dhtmlxcalendar_ifr&quot;;this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open(&quot;text/html&quot;,&quot;replace&quot;);this.contentWindow.document.write(&quot;&quot;)};this.base.parentNode.insertBefore(this._ifr,this.base);this._ifrSize()}}else{if(this._ifr){this._ifr.parentNode.removeChild(this._ifr);this._ifr=null}}};dhtmlXCalendarObject.prototype._ifrSize=function(){if(this._ifr){this._ifr.style.left=this.base.style.left;this._ifr.style.top=this.base.style.top;this._ifr.style.width=this.base.offsetWidth+&quot;px&quot;;this._ifr.style.height=this.base.offsetHeight+&quot;px&quot;}};dhtmlxCalendarObject=dhtmlXCalendarObject;dhtmlXCalendarObject.prototype._strToDate=function(l,A){A=(A||this._dateFormat);A=A.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,&quot;\\$&amp;&quot;);var D=[];var s=[];A=A.replace(/%[a-z]/gi,function(q){switch(q){case &quot;%d&quot;:case &quot;%m&quot;:case &quot;%y&quot;:case &quot;%h&quot;:case &quot;%H&quot;:case &quot;%i&quot;:case &quot;%s&quot;:s.push(q);return &quot;(\\d{2})&quot;;case &quot;%D&quot;:case &quot;%l&quot;:case &quot;%M&quot;:case &quot;%F&quot;:s.push(q);return &quot;([a-zÃ©Ã»Ã¤\u0430-\u044F\u0451]{1,})&quot;;case &quot;%j&quot;:case &quot;%n&quot;:case &quot;%g&quot;:case &quot;%G&quot;:s.push(q);return &quot;(\\d{1,2})&quot;;case &quot;%Y&quot;:s.push(q);return &quot;(\\d{4})&quot;;case &quot;%a&quot;:s.push(q);return &quot;(\\[am|pm])&quot;;case &quot;%A&quot;:s.push(q);return &quot;(\\[AM|PM])&quot;}return q});var E=new RegExp(A);var u=l.match(E);if(u==null||u.length-1!=s.length){return &quot;Invalid Date&quot;}for(var c=1;c&lt;u.length;c++){D.push(u[c])}var g={&quot;%y&quot;:1,&quot;%Y&quot;:1,&quot;%n&quot;:2,&quot;%m&quot;:2,&quot;%M&quot;:2,&quot;%F&quot;:2,&quot;%d&quot;:3,&quot;%j&quot;:3,&quot;%a&quot;:4,&quot;%A&quot;:4,&quot;%H&quot;:5,&quot;%G&quot;:5,&quot;%h&quot;:5,&quot;%g&quot;:5,&quot;%i&quot;:6,&quot;%s&quot;:7};var x={};var n={};for(var c=0;c&lt;s.length;c++){if(typeof(g[s[c]])!=&quot;undefined&quot;){var h=g[s[c]];if(!x[h]){x[h]=[];n[h]=[]}x[h].push(D[c]);n[h].push(s[c])}}D=[];s=[];for(var c=1;c&lt;=7;c++){if(x[c]!=null){for(var y=0;y&lt;x[c].length;y++){D.push(x[c][y]);s.push(n[c][y])}}}var o=this;var a=new Date();a.setDate(1);a.setMinutes(0);a.setSeconds(0);for(var c=0;c&lt;D.length;c++){switch(s[c]){case &quot;%d&quot;:case &quot;%j&quot;:case &quot;%n&quot;:case &quot;%m&quot;:case &quot;%Y&quot;:case &quot;%H&quot;:case &quot;%G&quot;:case &quot;%i&quot;:case &quot;%s&quot;:if(!isNaN(D[c])){a[{&quot;%d&quot;:&quot;setDate&quot;,&quot;%j&quot;:&quot;setDate&quot;,&quot;%n&quot;:&quot;setMonth&quot;,&quot;%m&quot;:&quot;setMonth&quot;,&quot;%Y&quot;:&quot;setFullYear&quot;,&quot;%H&quot;:&quot;setHours&quot;,&quot;%G&quot;:&quot;setHours&quot;,&quot;%i&quot;:&quot;setMinutes&quot;,&quot;%s&quot;:&quot;setSeconds&quot;}[s[c]]](Number(D[c])+(s[c]==&quot;%m&quot;||s[c]==&quot;%n&quot;? -1:0))}break;case &quot;%M&quot;:case &quot;%F&quot;:var m=this._getInd(D[c].toLowerCase(),o.langData[o.lang][{&quot;%M&quot;:&quot;monthesSNames&quot;,&quot;%F&quot;:&quot;monthesFNames&quot;}[s[c]]]);if(m&gt;=0){a.setMonth(m)}break;case &quot;%y&quot;:if(!isNaN(D[c])){var C=Number(D[c]);a.setFullYear(C+(C&gt;50?1900:2000))}break;case &quot;%g&quot;:case &quot;%h&quot;:if(!isNaN(D[c])){var C=Number(D[c]);if(C&lt;=12&amp;&amp;C&gt;=0){a.setHours(C+(this._getInd(&quot;pm&quot;,D)&gt;=0?(C==12?0:12):(C==12? -12:0)))}}break}}o=null;return a};dhtmlXCalendarObject.prototype._dateToStr=function(m,h){var g=this;if(m instanceof Date){var l=function(n){return(String(n).length==1?&quot;0&quot;+String(n):n)};var a=function(n){switch(n){case &quot;%d&quot;:return l(m.getDate());case &quot;%j&quot;:return m.getDate();case &quot;%D&quot;:return g.langData[g.lang].Zo[m.getDay()];case &quot;%l&quot;:return g.langData[g.lang].abo[m.getDay()];case &quot;%m&quot;:return l(m.getMonth()+1);case &quot;%n&quot;:return m.getMonth()+1;case &quot;%M&quot;:return g.langData[g.lang].Vx[m.getMonth()];case &quot;%F&quot;:return g.langData[g.lang].RB[m.getMonth()];case &quot;%y&quot;:return l(m.getYear()%100);case &quot;%Y&quot;:return m.getFullYear();case &quot;%g&quot;:return(m.getHours()+11)%12+1;case &quot;%h&quot;:return l((m.getHours()+11)%12+1);case &quot;%G&quot;:return m.getHours();case &quot;%H&quot;:return l(m.getHours());case &quot;%i&quot;:return l(m.getMinutes());case &quot;%s&quot;:return l(m.getSeconds());case &quot;%a&quot;:return(m.getHours()&gt;11?&quot;pm&quot;:&quot;am&quot;);case &quot;%A&quot;:return(m.getHours()&gt;11?&quot;PM&quot;:&quot;AM&quot;);case &quot;%%&quot;:&quot;%&quot;;default:return n}};var c=String(h||this._dateFormat).replace(/%[a-zA-Z]/g,a)}g=null;return(c||String(m))};window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(c){var a=this;this.PU=new dhtmlXCalendarObject(c);this.PU.hideTime();this.Qx=new dhtmlXCalendarObject(c);this.Qx.hideTime();this.PU.attachEvent(&quot;onClick&quot;,function(g){a._updateRange(&quot;rightCalendar&quot;,g,null);a._evOnClick([&quot;left&quot;,g])});this.Qx.attachEvent(&quot;onClick&quot;,function(g){a._updateRange(&quot;leftCalendar&quot;,null,g);a._evOnClick([&quot;right&quot;,g])});this.PU.attachEvent(&quot;onBeforeChange&quot;,function(g){return a._evOnBeforeChange([&quot;left&quot;,g])});this.Qx.attachEvent(&quot;onBeforeChange&quot;,function(g){return a._evOnBeforeChange([&quot;right&quot;,g])});this.show=function(){this.PU.show();this.Qx.base.style.marginLeft=this.PU.base.offsetWidth-1+&quot;px&quot;;this.Qx.show()};this.hide=function(){this.PU.hide();this.Qx.hide()};this.setDateFormat=function(g){this.PU.setDateFormat(g);this.Qx.setDateFormat(g)};this.setDates=function(h,g){if(h!=null){this.PU.setDate(h)}if(g!=null){this.Qx.setDate(g)}this._updateRange()};this._updateRange=function(g,l,h){if(arguments.length==3){(g==&quot;leftCalendar&quot;?this.PU:this.Qx).setSensitiveRange(l,h)}else{this.PU.setSensitiveRange(null,this.Qx.getDate());this.Qx.setSensitiveRange(this.PU.getDate(),null)}};this.Ul=function(){return this.PU.Ul.apply(this.PU,arguments)};this.unload=function(){window.dhx4._eventable(this,&quot;clear&quot;);this.PU.unload();this.Qx.unload();this.PU=this.Qx=null;this._updateRange=null;this._evOnClick=null;this._evOnBeforeChange=null;this.show=null;this.hide=null;this.setDateFormat=null;this.setDates=null;this.Ul=null;this.unload=null;a=null};this._evOnClick=function(g){return this.callEvent(&quot;onClick&quot;,g)};this._evOnBeforeChange=function(g){return this.callEvent(&quot;onBeforeChange&quot;,g)};window.dhx4._eventable(this);return this};function dhtmlXCombo(m,s,g,o,l){var n=this;var h=null;var u=null;if(typeof(m)==&quot;object&quot;&amp;&amp; !m.tagName){h=m;m=h.parent;g=h.width;s=h.name;o=h.mode;u=h.skin}this.vI=(typeof(m)==&quot;string&quot;?document.getElementById(m):m);this.kZ={skin:null,form_name:s||&quot;dhxcombo&quot;,combo_width:(parseInt(g)||this.vI.offsetWidth||120)-(dhx4.isFF||dhx4.isIE?2:0),combo_image:false,combo_focus:false,opts_type:(typeof(o)==&quot;string&quot;&amp;&amp;typeof(this.modes[o])!=&quot;undefined&quot;?o:&quot;option&quot;),opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:true,allow_empty_value:true,enabled:true,img_path:&quot;&quot;,img_def:&quot;&quot;,img_def_dis:true,template:{input:&quot;#text#&quot;,option:&quot;#text#&quot;},f_mode:false,f_url:false,f_cache:false,f_cache_data:{},f_dyn:false,f_dyn_end:false,f_mask:&quot;&quot;,f_ac:true,f_ac_text:&quot;&quot;,f_server_tm:null,f_server_last:&quot;&quot;,last_hover:null,last_selected:null,last_match:null,last_text:&quot;&quot;,last_value:&quot;&quot;,tm_hover:null,tm_confirm_blur:null,clear_click:false,clear_blur:false,clear_bsp:false,clear_key:false,sp:{dhx_skyblue:{list_ofs:1},dhx_web:{list_ofs:0},dhx_terrace:{list_ofs:1}}};this.kZ.combo_image=(this.modes[this.kZ.opts_type].image==true);this.t={};this.base=document.createElement(&quot;DIV&quot;);this.base.style.width=this.kZ.combo_width+&quot;px&quot;;this.base.innerHTML=&quot;&lt;input type='text' class='dhxcombo_input' style='width:&quot;+(this.kZ.combo_width-24-(this.kZ.combo_image?23:0))+&quot;px;&quot;+(this.kZ.combo_image?&quot;margin-left:23px;&quot;:&quot;&quot;)+&quot;' autocomplete='off'&gt;&lt;input type='hidden' value=<I>&gt;&lt;input type='hidden' value='false'&gt;&quot;+(this.kZ.combo_image?&quot;<DIV class="dhxcombo_top_image">&quot;+this.modes[this.kZ.opts_type].getTopImage(null,this.kZ.enabled)+&quot;</DIV>&quot;:&quot;&quot;);this.vI.appendChild(this.base);this.list=document.createElement(&quot;DIV&quot;);this.list.style.display=&quot;none&quot;;document.body.insertBefore(this.list,document.body.firstChild);this.setSkin(u||window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhxcombo&quot;)||&quot;dhx_skyblue&quot;);this._updateTopImage=function(a){if(!this.kZ.combo_image){return}if(a!=null){this.base.lastChild.innerHTML=this.t[a].obj.getTopImage(this.t[a].item,this.kZ.enabled)}else{this.base.lastChild.innerHTML=this.modes[this.kZ.opts_type].getTopImage(null,this.kZ.enabled)}};this._filterOpts=function(D){if(this.kZ.f_server_tm){window.clearTimeout(this.kZ.f_server_tm)}var w=String(this.base.firstChild.value).replace(new RegExp(this.kZ.f_ac_text+&quot;$&quot;,&quot;i&quot;),&quot;&quot;);if(this.kZ.f_server_last==w.toLowerCase()){this._checkForMatch();return}if(this.kZ.f_url!=null&amp;&amp;this.mR(&quot;onDynXLS&quot;)){this.kZ.f_server_last=w.toLowerCase();this.callEvent(&quot;onDynXLS&quot;,[w]);return}if(this.kZ.f_url!=null){if(w.length==0){this.kZ.f_server_last=w.toLowerCase();this.clearAll();return}if(this.kZ.f_cache==true&amp;&amp;this.kZ.f_cache_data[w]!=null){this.clearAll();this.kZ.f_server_last=w.toLowerCase();for(var y=0;y&lt;this.kZ.f_cache_data[w].data.length;y++){this.load(this.kZ.f_cache_data[w].data[y])}if(this.kZ.f_dyn){this.kZ.f_dyn_end=this.kZ.f_cache_data[w].dyn_end;this.kZ.f_mask=this.kZ.f_cache_data[w].mask}if(D!==true){this._showList(true);this._checkForMatch()}}else{this.kZ.f_server_tm=window.setTimeout(function(){n.kZ.f_server_last=w.toLowerCase();n.kZ.f_mask=w;var a=&quot;mask=&quot;+encodeURIComponent(w);if(n.kZ.f_dyn){a+=&quot;&amp;pos=0&quot;;n.kZ.f_dyn_end=false}window.dhx4.ajax.post(n.kZ.f_url,a,function(E){if(n.kZ.f_cache){if(!n.kZ.f_cache_data[w]){n.kZ.f_cache_data[w]={data:[],dyn_end:false,mask:w}}n.kZ.f_cache_data[w].data.push(E.ai.responseXML)}n.clearAll();n.load(E.ai.responseXML);if(n.kZ.f_ac&amp;&amp;n.kZ.f_mode==&quot;start&quot;&amp;&amp;n.kZ.clear_bsp==false&amp;&amp;n.list.firstChild!=null){var q=n.list.firstChild._optId;var F=String(n.t[q].obj.getText(n.list.firstChild,true));if(String(F).toLowerCase().indexOf(String(w).toLowerCase())===0){n.base.firstChild.value=F;n._selectRange(w.length,F.length)}}if(D!==true){n._showList(true);n._checkForMatch()}})},200)}}else{this.kZ.f_server_last=w.toLowerCase();var x=(w.length==0?true:new RegExp((this.kZ.f_mode==&quot;start&quot;?&quot;^&quot;:&quot;&quot;)+w,&quot;i&quot;));var C=null;for(var v in this.t){var A=this.t[v].obj.getText(this.t[v].item,true);if(x===true||x.test(A)==true){this.t[v].item.style.display=&quot;&quot;;if(C==null&amp;&amp;w.length&gt;0){C=String(this.t[v].obj.getText(this.t[v].item,true))}}else{this.t[v].item.style.display=&quot;none&quot;}}if(this.kZ.f_ac&amp;&amp;this.kZ.f_mode==&quot;start&quot;&amp;&amp;this.kZ.clear_bsp==false&amp;&amp;C!=null){this.kZ.f_ac_text=C.replace(new RegExp(&quot;^&quot;+w,&quot;i&quot;),&quot;&quot;);this.base.firstChild.value=C;this._selectRange(this.kZ.f_server_last.length,this.base.firstChild.value.length)}if(this.kZ.f_mode==&quot;between&quot;&amp;&amp;this.kZ.clear_bsp==true){this._checkForMatch(true)}if(D!==true){this._showList(true);this._checkForMatch()}}};this._initObj=function(a){if(typeof(a.template)!=&quot;undefined&quot;){this.setTemplate(a.template)}this.addOption(a.options)};this._xmlToObj=function(E,H){var L={options:[]};var I=(H==true?E:E.getElementsByTagName(&quot;complete&quot;));if(I.length&gt;0){var x=I[0].childNodes;for(var v=0;v&lt;x.length;v++){if(typeof(x[v].tagName)!=&quot;undefined&quot;){if(String(x[v].tagName).toLowerCase()==&quot;template&quot;){for(var K=0;K&lt;x[v].childNodes.length;K++){if(x[v].childNodes[K].tagName!=null){var D=x[v].childNodes[K].tagName;if(typeof(this.kZ.template[D])!=&quot;undefined&quot;){this.kZ.template[D]=(x[v].childNodes[K].firstChild!=null?x[v].childNodes[K].firstChild.nodeValue:&quot;&quot;)}}}}if(String(x[v].tagName).toLowerCase()==&quot;option&quot;){var C=false;if(H==true){C=(window.dhx4.s2b(x[v].selected)||x[v].getAttribute(&quot;selected&quot;)!=null)}else{C=window.dhx4.s2b(x[v].getAttribute(&quot;selected&quot;))}var y={value:x[v].getAttribute(&quot;value&quot;),text:(x[v].firstChild!=null?x[v].firstChild.nodeValue:&quot;&quot;),selected:C,checked:window.dhx4.s2b(x[v].getAttribute(&quot;checked&quot;))};for(var J in{img:1,img_dis:1,img_src:1,img_src_dis:1}){if(x[v].getAttribute(J)!=null){y[J]=x[v].getAttribute(J)}}for(var K=0;K&lt;x[v].childNodes.length;K++){if(x[v].childNodes[K].tagName!=null&amp;&amp;String(x[v].childNodes[K].tagName).toLowerCase()==&quot;text&quot;){y.text={};var A=x[v].childNodes[K];for(var F=0;F&lt;A.childNodes.length;F++){if(A.childNodes[F].tagName!=null){y.text[A.childNodes[F].tagName]=(A.childNodes[F].firstChild!=null?A.childNodes[F].firstChild.nodeValue:&quot;&quot;)}}}}L.options.push(y)}}}I=x=null}return L};window.dhx4._enableDataLoading(this,&quot;_initObj&quot;,&quot;_xmlToObj&quot;,&quot;complete&quot;,{data:true});window.dhx4._eventable(this);this._getNearItem=function(v,q){var a=null;while(v!=null){v=v[q&lt;0?&quot;previousSibling&quot;:&quot;nextSibling&quot;];if(a==null&amp;&amp;v!=null&amp;&amp;v.style.display==&quot;&quot;&amp;&amp;v._optId!=null){a=v;v=null}}return a};this.aqJ(this.kZ.form_name);this._doOnListMouseMove=function(q){q=q||event;var a=q.target||q.srcElement;while(a!=null&amp;&amp;a!=this){if(typeof(a._optId)!=&quot;undefined&quot;){if(n.kZ.tm_hover){window.clearTimeout(n.kZ.tm_hover)}n._setSelected(a._optId)}a=a.parentNode}a=null};this._doOnListMouseDown=function(a){a=a||event;a.cancelBubble=true;n.kZ.clear_click=true;window.setTimeout(function(){n.base.firstChild.focus()},1)};this._doOnListMouseUp=function(v){v=v||event;var a=v.target||v.srcElement;while(a!=null&amp;&amp;a!=this){if(typeof(a._optId)!=&quot;undefined&quot;){var q=true;if(typeof(n.t[a._optId].obj.optionClick)==&quot;function&quot;&amp;&amp;n.t[a._optId].obj.optionClick(a,v,n)!==true){q=false}if(q){n._setSelected(a._optId,null,true);n._confirmSelect(&quot;click&quot;)}}a=a.parentNode}a=null};this._doOnListMouseOut=function(a){if(n.kZ.tm_hover){window.clearTimeout(n.kZ.tm_hover)}n.kZ.tm_hover=window.setTimeout(function(){var q=n.kZ.last_match||n.kZ.last_selected;if(n.kZ.last_match==null&amp;&amp;n.t[q]!=null){if(n.base.firstChild.value!=n.t[q].obj.getText(n.t[q].item,true)){q=null}}n._setSelected(q,null,true)},1)};this._doOnBaseMouseDown=function(x){if(!n.kZ.enabled){return}n.kZ.clear_click=true;x=x||event;var q=x.target||x.srcElement;if(q!=this.firstChild){window.setTimeout(function(){n.base.firstChild.focus()},1);var w=q;while(w!=this&amp;&amp;w!=null){if(w==this.lastChild){if(typeof(n.modes[n.kZ.opts_type].topImageClick)==&quot;function&quot;){var v=(n.kZ.last_hover||n.kZ.last_selected);var a=(v!=null?n.t[v].item:null);if(n.modes[n.kZ.opts_type].topImageClick(a,n)!==true){v=a=null;return}}w=null}else{w=w.parentNode}}}if(n._isListVisible()){n._hideList()}else{if(q!=this.firstChild){n.kZ.clear_blur=true}n._showList();n._setSelected(n.kZ.last_selected,true,true)}q=null};this._doOnBodyMouseDown=function(){if(n.kZ.clear_click){n.kZ.clear_click=false;return}n._confirmSelect(&quot;blur&quot;)};this._doOnInputFocus=function(){n.kZ.clear_blur=false;if(n.kZ.tm_confirm_blur){window.clearTimeout(n.kZ.tm_confirm_blur)}if(n.kZ.combo_focus==false){n.kZ.combo_focus=true;n.callEvent(&quot;onFocus&quot;,[])}};this._doOnInputBlur=function(){if(n.kZ.clear_blur==true){n.kZ.clear_blur=false;return}if(n.kZ.tm_confirm_blur){window.clearTimeout(n.kZ.tm_confirm_blur)}n.kZ.tm_confirm_blur=window.setTimeout(function(){if(n.kZ.clear_click==false){n._confirmSelect(&quot;blur&quot;);n.kZ.combo_focus=false;n.callEvent(&quot;onBlur&quot;,[])}},20)};this._doOnInputKeyUp=function(a){a=a||event;if(n.kZ.f_mode!=false){n.kZ.clear_bsp=(a.keyCode==8||a.keyCode==46);n._filterOpts();return}else{n._checkForMatch()}};this._doOnInputKeyDown=function(a){a=a||event;if((a.keyCode==38||a.keyCode==40)&amp;&amp; !a.ctrlKey&amp;&amp; !a.shiftKey&amp;&amp; !a.altKey){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;n._keyOnUpDown(a.keyCode==38? -1:1)}if(a.keyCode==113){if(!n._isListVisible()){n._showList();if(n.base.firstChild.value==n.kZ.last_text){n._setSelected(n.kZ.last_selected,true,true);n.base.firstChild.value=n.kZ.last_text;n.kZ.f_server_last=n.base.firstChild.value.toLowerCase()}else{n.kZ.f_server_last=n.base.firstChild.value.toLowerCase();if(n.kZ.f_mode==false){n._checkForMatch()}}}else{}}if(a.keyCode==27){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;n._cancelSelect()}if(a.keyCode==13){if(a.preventDefault){a.preventDefault()}n._confirmSelect(&quot;kbd&quot;)}n.kZ.clear_key=true;n.callEvent(&quot;onKeyPressed&quot;,[a.keyCode||a.charCode])};this._doOnInputKeyPress=function(a){if(n.kZ.clear_key){n.kZ.clear_key=false;return}a=a||event;n.callEvent(&quot;onKeyPressed&quot;,[a.keyCode||a.charCode])};this._keyOnUpDown=function(a){var q=null;if(this.kZ.last_hover){q=this.t[this.kZ.last_hover].item}else{if(this.kZ.last_selected){q=this.t[this.kZ.last_selected].item}}if(!q&amp;&amp;this._getListVisibleCount()==0){return}if(q!=null&amp;&amp;q.style.display!=&quot;&quot;){q=null}this._showList();if(q!=null){if(this.t[q._optId].obj.isSelected(q)){q=this._getNearItem(q,a)}}else{q=this.list.firstChild;if(q.style.display!=&quot;&quot;){q=this._getNearItem(q,1)}}if(q==null){return}this._setSelected(q._optId,true,true);if(this.kZ.f_mode==false){this.base.firstChild.value=this.t[q._optId].obj.getText(q,true)}else{var v=String(this.t[q._optId].obj.getText(q,true));if(this.kZ.f_mode==&quot;start&quot;&amp;&amp;this.kZ.f_ac==true){if(v.toLowerCase().indexOf(this.kZ.f_server_last)===0){this.kZ.f_ac_text=v.substring(this.kZ.f_server_last.length,v.length);this.base.firstChild.value=v;this._selectRange(this.kZ.f_server_last.length,this.base.firstChild.value.length)}else{this.base.firstChild.value=v;this.kZ.f_server_last=this.base.firstChild.value.toLowerCase();this._selectRange(0,this.base.firstChild.value.length)}}else{this.base.firstChild.value=v;this.kZ.f_server_last=this.base.firstChild.value.toLowerCase()}}q=null};this.kZ.evs_nodes=[{node:document.body,evs:{mousedown:&quot;_doOnBodyMouseDown&quot;}},{node:this.base,evs:{mousedown:&quot;_doOnBaseMouseDown&quot;}},{node:this.base.firstChild,evs:{keyup:&quot;_doOnInputKeyUp&quot;,keydown:&quot;_doOnInputKeyDown&quot;,keypress:&quot;_doOnInputKeyPress&quot;,focus:&quot;_doOnInputFocus&quot;,blur:&quot;_doOnInputBlur&quot;}},{node:this.list,evs:{mousemove:&quot;_doOnListMouseMove&quot;,mousedown:&quot;_doOnListMouseDown&quot;,mouseup:&quot;_doOnListMouseUp&quot;,mouseout:&quot;_doOnListMouseOut&quot;}}];for(var c=0;c&lt;this.kZ.evs_nodes.length;c++){for(var r in this.kZ.evs_nodes[c].evs){if(window.addEventListener){this.kZ.evs_nodes[c].node.addEventListener(r,this[this.kZ.evs_nodes[c].evs[r]],false)}else{this.kZ.evs_nodes[c].node.attachEvent(&quot;on&quot;+r,this[this.kZ.evs_nodes[c].evs[r]])}}}this.unload=function(){this.clearAll();this.t=null;for(var w=0;w&lt;this.kZ.evs_nodes.length;w++){for(var v in this.kZ.evs_nodes[w].evs){if(window.addEventListener){this.kZ.evs_nodes[w].node.removeEventListener(v,this[this.kZ.evs_nodes[w].evs[v]],false)}else{this.kZ.evs_nodes[w].node.detachEvent(&quot;on&quot;+v,this[this.kZ.evs_nodes[w].evs[v]])}this.kZ.evs_nodes[w].evs[v]=null;delete this.kZ.evs_nodes[w].evs[v]}this.kZ.evs_nodes[w].node=null;this.kZ.evs_nodes[w].evs=null;delete this.kZ.evs_nodes[w].node;delete this.kZ.evs_nodes[w].evs;this.kZ.evs_nodes[w]=null}window.dhx4._eventable(this,&quot;clear&quot;);window.dhx4._enableDataLoading(this,null,null,null,&quot;clear&quot;);this.fK=this.ajs=this.dr=null;for(var v in this.kZ){this.kZ[v]=null;delete this.kZ[v]}this.kZ=null;this.base.parentNode.removeChild(this.base);this.list.parentNode.removeChild(this.list);this.base=this.list=this.vI=null;this.modes=null;for(var v in this){if(typeof(this[v])==&quot;function&quot;){this[v]=null}}n=null};this.fK=this.base.firstChild;this.ajs=this.base.childNodes[this.base.childNodes.length-(this.kZ.combo_image?2:1)];this.dr=this.list;this.fR=this.base;this.zZ=m;m=null;if(h!=null){if(h.filter!=null){if(typeof(h.filter)==&quot;string&quot;){this.fF(true,h.filter,window.dhx4.s2b(h.filter_cache),window.dhx4.s2b(h.filter_sub_load))}else{this.fF(true)}}if(h.image_path!=null){this.setImagePath(h.image_path)}if(h.default_image!=null||h.default_image_dis!=null){this.OH(h.default_image,h.default_image_dis)}if(h.items||h.options){this.addOption(h.items||h.options)}if(h.xml||h.json){this.load(h.xml||h.json)}if(typeof(h.readonly)!=&quot;undefined&quot;){this.readonly(h.readonly)}h=null}return this}function dhtmlXComboFromSelect(g){if(typeof(g)==&quot;string&quot;){g=document.getElementById(g)}var c=g.offsetWidth;var r=g.getAttribute(&quot;name&quot;)||null;var h=document.createElement(&quot;SPAN&quot;);g.parentNode.insertBefore(h,g);var m=g.getAttribute(&quot;mode&quot;)||g.getAttribute(&quot;opt_type&quot;)||&quot;option&quot;;var l=new dhtmlXCombo(h,r,c,m);h=null;var o=g.getAttribute(&quot;imagePath&quot;);if(o){l.setImagePath(o)}var q=g.getAttribute(&quot;defaultImage&quot;);var n=g.getAttribute(&quot;defaultImageDis&quot;);if(window.dhx4.s2b(n)==true){n=true}if(q!=null||n!=null){l.OH(q,n)}var a=l._xmlToObj([g],true);if(a.options.length&gt;0){l.addOption(a.options)}a=null;g.parentNode.removeChild(g);g=null;return l}dhtmlXCombo.prototype.aqJ=function(a){this.kZ.form_name=a;this.base.childNodes[1].name=a;this.base.childNodes[2].name=a+&quot;_new_value&quot;};dhtmlXCombo.prototype.readonly=function(a){if(window.dhx4.s2b(a)){this.base.firstChild.setAttribute(&quot;readOnly&quot;,&quot;true&quot;)}else{this.base.firstChild.removeAttribute(&quot;readOnly&quot;)}};dhtmlXCombo.prototype.setPlaceholder=function(a){if(typeof(a)==&quot;undefined&quot;||a==null){a=&quot;&quot;}this.base.firstChild.setAttribute(&quot;placeholder&quot;,String(a))};dhtmlXCombo.prototype.setTemplate=function(g){for(var c in g){if(typeof(this.kZ.template[c])!=&quot;undefined&quot;){this.kZ.template[c]=String(g[c])}}for(var c in this.t){this.t[c].obj.setText(this.t[c].item,this.t[c].item._conf.text)}this._confirmSelect()};dhtmlXCombo.prototype.setSkin=function(a){if(a==this.kZ.skin){return}this.kZ.skin=a;this.base.className=&quot;dhxcombo_&quot;+this.kZ.skin+(this.kZ.enabled?&quot;&quot;:&quot; dhxcombo_disabled&quot;);this.list.className=&quot;dhxcombolist_&quot;+this.kZ.skin};dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild};dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.kZ.combo_image?2:1)]};dhtmlXCombo.prototype.getList=function(){return this.list};dhtmlXCombo.prototype.getBase=function(){return this.base};dhtmlXCombo.prototype.getParent=function(){return this.zZ};dhtmlXCombo.prototype.forEachOption=function(a){for(var c=0;c&lt;this.list.childNodes.length;c++){a.apply(window,[this._getOption(this.list.childNodes[c]._optId,c)])}};dhtmlXCombo.prototype.setFocus=function(){if(this.kZ.enabled){this.base.firstChild.focus()}};dhtmlXCombo.prototype.setFontSize=function(a,c){if(a!=null){this.base.firstChild.style.fontSize=a}if(c!=null){this.list.style.fontSize=c}};dhtmlXCombo.prototype.acS=function(l){var m=null;var g=null;for(var h=0;h&lt;this.list.childNodes.length;h++){if(m==null){var c=this.list.childNodes[h]._optId;if(this.t[c].obj.getValue(this.t[c].item)==l){m=c;g=h}}}return(m==null?null:this._getOption(m,g))};dhtmlXCombo.prototype.afy=function(a){if(a&lt;0){return null}if(this.list.childNodes[a]==null){return null}return this._getOption(this.list.childNodes[a]._optId,a)};dhtmlXCombo.prototype.MV=function(l){var m=null;var g=null;for(var h=0;h&lt;this.list.childNodes.length;h++){if(m==null){var c=this.list.childNodes[h]._optId;if(this.t[c].obj.getText(this.t[c].item,true)==l){m=c;g=h}}}return(m==null?null:this._getOption(m,g))};dhtmlXCombo.prototype.Nn=function(){return this._getOptionProp(this.kZ.last_selected,&quot;index&quot;,-1)};dhtmlXCombo.prototype.xn=function(){return this._getOptionProp(this.kZ.last_selected,&quot;text&quot;,&quot;&quot;)};dhtmlXCombo.prototype.vL=function(){return this._getOptionProp(this.kZ.last_selected,&quot;value&quot;,null)};dhtmlXCombo.prototype.FV=function(){return this.base.childNodes[1].value};dhtmlXCombo.prototype.nK=function(){return this.base.childNodes[0].value};dhtmlXCombo.prototype.gg=function(c){var a=this.acS(c);return(a!=null?a.index: -1)};dhtmlXCombo.prototype.nQ=function(a){this.kZ.last_text=this.base.firstChild.value=a;this.kZ.f_server_last=this.base.firstChild.value.toLowerCase()};dhtmlXCombo.prototype.Um=function(c){var a=this.acS(c);if(a!=null){this.dn(a.index)}else{this.kZ.last_value=c;this.base.childNodes[1].value=this.kZ.last_value;this.base.childNodes[2].value=&quot;true&quot;}};dhtmlXCombo.prototype.dn=function(c,g,a){if(c&lt;0||c&gt;=this.list.childNodes.length){return}var h=this.list.childNodes[c]._optId;this._setSelected(h,this._isListVisible(),true);this._confirmSelect(&quot;script&quot;)};dhtmlXCombo.prototype.Sv=function(){};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect(&quot;script&quot;)};dhtmlXCombo.prototype.enable=function(a){a=(typeof(a)==&quot;undefined&quot;?true:window.dhx4.s2b(a));if(this.kZ.enabled==a){return}this.kZ.enabled=a;if(a){this.base.className=&quot;dhxcombo_&quot;+this.kZ.skin;this.base.firstChild.removeAttribute(&quot;disabled&quot;)}else{this._hideList();this.base.className=&quot;dhxcombo_&quot;+this.kZ.skin+&quot; dhxcombo_disabled&quot;;this.base.firstChild.setAttribute(&quot;disabled&quot;,&quot;true&quot;)}this._updateTopImage(this.kZ.last_selected)};dhtmlXCombo.prototype.disable=function(a){a=(typeof(a)==&quot;undefined&quot;?true:window.dhx4.s2b(a));this.enable(!a)};dhtmlXCombo.prototype.isEnabled=function(){return(this.kZ.enabled==true)};dhtmlXCombo.prototype.show=function(a){if(typeof(a)==&quot;undefined&quot;){a=true}else{a=window.dhx4.s2b(a)}this.base.style.display=(a==true?&quot;&quot;:&quot;none&quot;)};dhtmlXCombo.prototype.hide=function(a){if(typeof(a)==&quot;undefined&quot;){a=true}this.show(!a)};dhtmlXCombo.prototype.Yi=function(){return(this.base.style.display==&quot;&quot;)};dhtmlXCombo.prototype.fF=function(h,c,a,g){if(h==true||h==&quot;between&quot;){this.kZ.f_mode=(h==true?&quot;start&quot;:&quot;between&quot;);if(c!=null){this.kZ.f_url=c;this.kZ.f_cache=window.dhx4.s2b(a);this.kZ.f_dyn=window.dhx4.s2b(g)}else{this.kZ.f_url=null;this.kZ.f_cache=false;this.kZ.f_dyn=false}}else{this.kZ.f_mode=false;this.kZ.f_url=null;this.kZ.f_cache=false;this.kZ.f_dyn=false}};dhtmlXCombo.prototype.filter=function(c){for(var g=0;g&lt;this.list.childNodes.length;g++){var a=c.apply(window,[this._getOption(this.list.childNodes[g]._optId,g)]);this.list.childNodes[g].style.display=(a===true?&quot;&quot;:&quot;none&quot;)}};dhtmlXCombo.prototype.sort=function(g){var a=[];for(var c=0;c&lt;this.list.childNodes.length;c++){var h=this.list.childNodes[c]._optId;a.push([h,this._getOption(h,c)])}if(g==&quot;asc&quot;||g==&quot;desc&quot;){k=true;a.sort(function(m,l){m=m[1].text_option.toLowerCase();l=l[1].text_option.toLowerCase();var n=(g==&quot;asc&quot;?1: -1);return(m&gt;l?n: -1*n)})}else{if(typeof(g)==&quot;function&quot;||typeof(window[g])==&quot;function&quot;){if(typeof(window[g])==&quot;function&quot;){g=window[g]}a.sort(function(m,l){return g.apply(window,[m[1],l[1]])})}}while(this.list.childNodes.length&gt;0){this.list.removeChild(this.list.lastChild)}for(var c=0;c&lt;a.length;c++){this.list.appendChild(this.t[a[c][0]].item)}};dhtmlXCombo.prototype.enableAutocomplete=function(a){if(typeof(a)==&quot;undefined&quot;){a=true}else{a=window.dhx4.s2b(a)}this.kZ.f_ac=a};dhtmlXCombo.prototype.disableAutocomplete=function(a){if(typeof(a)==&quot;undefined&quot;){a=true}else{a=window.dhx4.s2b(a)}this.enableAutocomplete(!a)};dhtmlXCombo.prototype.allowFreeText=function(a){this.kZ.allow_free_text=(typeof(a)==&quot;undefined&quot;?true:window.dhx4.s2b(a))};dhtmlXCombo.prototype._checkForMatch=function(h){var a=window.dhx4.trim(this.base.firstChild.value).toLowerCase();var l=null;var c=this.list.firstChild;while(c!=null){if(c.style.display==&quot;&quot;&amp;&amp;c._optId!=null){var g=window.dhx4.trim(this.t[c._optId].obj.getText(c,true)).toLowerCase();if(a==g){l=c._optId;c=null}}if(c!=null){c=c.nextSibling}}if(this.kZ.last_match==null){if(l!=null){this._setSelected(l,true,true);this.kZ.last_match=l}else{if(this.kZ.f_mode!=&quot;between&quot;||h==true){this._setSelected(null,true,true);this.kZ.last_match=null}}}else{if(l!=null){if(l!=this.kZ.last_match){this._setSelected(l,true,true);this.kZ.last_match=l}}else{this._setSelected(null,true,true);this.kZ.last_match=null}}};dhtmlXCombo.prototype._selectRange=function(c,a){if(this.kZ.combo_focus==true){window.dhx4.selectTextRange(this.base.firstChild,c,a)}};dhtmlXCombo.prototype.BJ=function(){if(!this._isListVisible()){this._showList()}};dhtmlXCombo.prototype.au=function(){this._hideList()};dhtmlXCombo.prototype._showList=function(a){if(this._getListVisibleCount()==0){if(a&amp;&amp;this._isListVisible()){this._hideList()}return}if(this._isListVisible()){this._checkListHeight();return}this.list.style.zIndex=window.dhx4.zim.reserve(this.kZ.list_zi_id);this.list.style.visibility=&quot;hidden&quot;;this.list.style.display=&quot;&quot;;this.list.style.width=Math.max(this.kZ.opts_width||0,this.kZ.combo_width)+&quot;px&quot;;this.list.style.top=window.dhx4.absTop(this.base)+this.base.offsetHeight-1+&quot;px&quot;;this.list.style.left=window.dhx4.absLeft(this.base)+&quot;px&quot;;this._checkListHeight();this.list.style.visibility=&quot;visible&quot;;this.callEvent(&quot;onOpen&quot;,[])};dhtmlXCombo.prototype._hideList=function(){if(!this._isListVisible()){return}window.dhx4.zim.clear(this.kZ.list_zi_id);this.list.style.display=&quot;none&quot;;this.kZ.clear_click=false;this.callEvent(&quot;onClose&quot;,[])};dhtmlXCombo.prototype._isListVisible=function(){return(this.list.style.display==&quot;&quot;)};dhtmlXCombo.prototype._getListVisibleCount=function(){var a=0;for(var c=0;c&lt;this.list.childNodes.length;c++){a+=(this.list.childNodes[c].style.display==&quot;&quot;?1:0)}return a};dhtmlXCombo.prototype._checkListHeight=function(){if(!this._isListVisible()){return}if(this.kZ.item_h==null){var q=this.list.firstChild;while(q!=null){if(q.style.display==&quot;&quot;){this.kZ.item_h=q.offsetHeight;q=null}else{q=q.nextSibling}}q=null}var r=window.dhx4.screenDim();var m=window.dhx4.absTop(this.base);var a=this.base.offsetHeight;var c=Math.max(0,Math.floor((m-r.top)/this.kZ.item_h));var o=Math.max(0,Math.floor((r.bottom-(m+a))/this.kZ.item_h));var u=this._getListVisibleCount();if(o&lt;Math.min(this.kZ.opts_count_min,u)&amp;&amp;c&gt;o){o=null}var n=Math.min((o==null?c:o),this.kZ.opts_count,u);var g=(n&lt;u?(n*this.kZ.item_h)+&quot;px&quot;:&quot;&quot;);var l=this.kZ.sp[this.kZ.skin].list_ofs;this.list.style.height=g;this.list.style.top=(o==null?m-this.list.offsetHeight+l:m+a-l)+&quot;px&quot;};dhtmlXCombo.prototype._scrollToItem=function(l){var h=this.t[l].item.offsetTop;var g=h+this.t[l].item.offsetHeight;var c=this.list.scrollTop;var a=c+this.list.clientHeight;if(h&lt;c){this.list.scrollTop=h}else{if(g&gt;a){this.list.scrollTop=g-this.list.clientHeight}}};dhtmlXCombo.prototype._setSelected=function(l,h,c){if(c){this._updateTopImage(l)}if(l!=null&amp;&amp;this.kZ.last_hover==l){if(h){this._scrollToItem(l)}return}if(this.kZ.last_hover!=null){this.t[this.kZ.last_hover].obj.setSelected(this.t[this.kZ.last_hover].item,false);this.kZ.last_hover=null;if(l==null){this.callEvent(&quot;onSelectionChange&quot;,[])}}if(l!=null){this.t[l].obj.setSelected(this.t[l].item,true);this.kZ.last_hover=l;this.callEvent(&quot;onSelectionChange&quot;,[]);if(this.t[l].item==this.t[l].item.parentNode.lastChild&amp;&amp;this.kZ.f_url!=null&amp;&amp;this.kZ.f_dyn==true&amp;&amp; !this.kZ.f_dyn_end){var g=&quot;mask=&quot;+encodeURIComponent(this.kZ.f_mask)+&quot;&amp;pos=&quot;+this.list.childNodes.length;var a=this;window.dhx4.ajax.post(this.kZ.f_url,g,function(n){if(a.kZ.f_cache){a.kZ.f_cache_data[a.kZ.f_mask].data.push(n.ai.responseXML)}var m=a.list.childNodes.length;a.load(n.ai.responseXML);if(m==a.list.childNodes.length){a.kZ.f_dyn_end=true;if(a.kZ.f_cache){a.kZ.f_cache_data[a.kZ.f_mask].dyn_end=true}}a=null})}if(h){this._scrollToItem(l)}}};dhtmlXCombo.prototype.addOption=function(m,n,c,a,h){var g=null;if(!(m instanceof Array)){var o=this._renderOption({value:m,text:n,css:c,img:a});if(g==null&amp;&amp;window.dhx4.s2b(h)==true){g=o}}else{for(var l=0;l&lt;m.length;l++){if(m[l]instanceof Array){o=this._renderOption({value:m[l][0],text:m[l][1],css:m[l][2],img:m[l][3]});if(g==null&amp;&amp;window.dhx4.s2b(m[l][4])==true){g=o}}else{var o=this._renderOption(m[l]);if(g==null&amp;&amp;window.dhx4.s2b(m[l].selected)==true){g=o}}}}if(g!=null){this._setSelected(g,this._isListVisible(),true);this._confirmSelect(&quot;onInit&quot;)}};dhtmlXCombo.prototype.VL=function(a,g,c,h){var l=this._getOptionId(a);if(l==null){return}this.t[l].obj.update(this.t[l].item,{value:g,text:c,css:h});if(this.kZ.last_selected==l){this.kZ.last_text=this.base.firstChild.value=this.t[l].obj.getText(this.t[l].item,true);this.kZ.f_server_last=this.base.firstChild.value.toLowerCase()}};dhtmlXCombo.prototype.Xp=function(h){for(var c in this.t){var g=this.t[c].obj.getValue(this.t[c].item);if(g==h){this._removeOption(c)}}if(this._isListVisible()){this._showList(true)}};dhtmlXCombo.prototype.clearAll=function(){for(var c in this.t){this._removeOption(c)}if(this.kZ.tm_hover){window.clearTimeout(this.kZ.tm_hover)}this.kZ.last_hover=null;this.kZ.last_selected=null;this.list.scrollTop=0;this._hideList()};dhtmlXCombo.prototype._renderOption=function(c){var g=window.dhx4.newId();var a=document.createElement(&quot;DIV&quot;);a._optId=g;a._tpl=this.kZ.template;if(typeof(c.img)==&quot;undefined&quot;&amp;&amp;typeof(c.img_src)!=&quot;undefined&quot;){c.img=c.img_src;delete c.img_src}if(typeof(c.img_dis)==&quot;undefined&quot;&amp;&amp;typeof(c.img_src_dis)!=&quot;undefined&quot;){c.img_dis=c.img_src_dis;delete c.img_src_dis}c.img_path=this.kZ.img_path;c.img_def=this.kZ.img_def;c.img_def_dis=this.kZ.img_def_dis;this.list.appendChild(a);this.t[a._optId]={obj:this.modes[this.kZ.opts_type].ht(a,c),item:a,kZ:{type:this.kZ.opts_type}};a=null;return g};dhtmlXCombo.prototype._removeOption=function(a){this.t[a].obj.destruct(this.t[a].item);this.t[a].obj=null;this.t[a].item.parentNode.removeChild(this.t[a].item);this.t[a].item=null;this.t[a].kZ=null;this.t[a]=null;delete this.t[a];if(this.kZ.last_hover==a){this.kZ.last_hover=null}if(this.kZ.last_selected==a){this.kZ.last_selected=null;this._confirmSelect(&quot;onDelete&quot;)}};dhtmlXCombo.prototype._confirmSelect=function(c){var a=false;if(this.kZ.f_server_tm){window.clearTimeout(this.kZ.f_server_tm)}if(this.kZ.last_hover!=null){a=a||(this.kZ.last_value!=this._getOptionValue(this.kZ.last_hover));this.kZ.last_match=this.kZ.last_selected=this.kZ.last_hover;this.kZ.last_value=this._getOptionValue(this.kZ.last_selected);this.kZ.last_text=this.base.firstChild.value=this.t[this.kZ.last_selected].obj.getText(this.t[this.kZ.last_selected].item,true);this.kZ.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.kZ.last_value;this.base.childNodes[2].value=&quot;false&quot;}else{if(this.kZ.allow_free_text||(this.base.firstChild.value==&quot;&quot;&amp;&amp;this.kZ.allow_empty_value)){a=a||(this.kZ.last_text!=this.base.firstChild.value);this.kZ.last_match=this.kZ.last_value=this.kZ.last_selected=null;this.kZ.last_text=this.base.firstChild.value;this.kZ.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.kZ.last_text;this.base.childNodes[2].value=&quot;true&quot;}else{this._cancelSelect();this._updateTopImage(this.kZ.last_selected);return}}if(this.kZ.f_ac&amp;&amp;this.kZ.f_mode==&quot;start&quot;){this.kZ.f_ac_text=&quot;&quot;;if(c!=&quot;blur&quot;){this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)}}this._hideList();if(a==true&amp;&amp;c!=&quot;onInit&quot;&amp;&amp;c!=&quot;onDelete&quot;){this.callEvent(&quot;onChange&quot;,[this.kZ.last_value,this.kZ.last_text])}};dhtmlXCombo.prototype._cancelSelect=function(){this._hideList();this.base.firstChild.value=this.kZ.last_text;if(this.kZ.f_mode!=false){this._filterOpts(true)}};dhtmlXCombo.prototype._getOption=function(n,h){if(!this.t[n]){return null}if(typeof(h)==&quot;undefined&quot;){h= -1}if(h&lt;0){for(var m=0;m&lt;this.list.childNodes.length;m++){if(h&lt;0&amp;&amp;this.list.childNodes[m]._optId==n){h=m}}}var l={value:this.t[n].obj.getValue(this.t[n].item),text:this.t[n].obj.getText(this.t[n].item),text_input:this.t[n].obj.getText(this.t[n].item,true),text_option:this.t[n].obj.getText(this.t[n].item,null,true),css:this.t[n].obj.getCss(this.t[n].item),selected:(n==this.kZ.last_selected),index:h};if(typeof(this.t[n].obj.getExtraData)==&quot;function&quot;){var g=this.t[n].obj.getExtraData(this.t[n].item);for(var c in g){if(typeof(l[c])==&quot;undefined&quot;){l[c]=g[c]}}}return l};dhtmlXCombo.prototype._getOptionProp=function(h,g,c){if(h!=null){var a=this._getOption(h);if(a!=null){return a[g]}}return c};dhtmlXCombo.prototype._getOptionId=function(c){var h=null;for(var a=0;a&lt;this.list.childNodes.length;a++){if(h==null){var g=this.list.childNodes[a]._optId;if(c==this.t[g].obj.getValue(this.t[g].item)){h=g}}}return h};dhtmlXCombo.prototype._getOptionValue=function(a){return this._getOptionProp(a,&quot;value&quot;,null)};dhtmlXCombo.prototype.Gl=function(a){this.kZ.combo_width=parseInt(a);this.base.style.width=this.kZ.combo_width+&quot;px&quot;;this.base.firstChild.style.width=(this.kZ.combo_width-24-(this.kZ.combo_image?23:0))+&quot;px&quot;;this.base.firstChild.style.marginLeft=(this.kZ.combo_image?&quot;23px&quot;:&quot;0px&quot;)};dhtmlXCombo.prototype.setOptionWidth=function(a){this.kZ.opts_width=(parseInt(a)||null)};dhtmlXCombo.prototype.modes={};dhtmlXCombo.prototype.doWithItem=function(a,n,l,g){var m=(a&gt;=0&amp;&amp;a&lt;this.list.childNodes.length?this.list.childNodes[a]._optId:null);if(m==null){return null}if(typeof(this.t[m].obj[n])!=&quot;function&quot;){return null}var h=[this.t[m].item];for(var c=2;c&lt;arguments.length;c++){h.push(arguments[c])}return this.t[m].obj[n].apply(this.t[m].obj,h)};function dhtmlXComboExtend(h,g){for(var c in dhtmlXCombo.prototype.modes[g]){if(typeof(dhtmlXCombo.prototype.modes[h][c])==&quot;undefined&quot;){dhtmlXCombo.prototype.modes[h][c]=dhtmlXCombo.prototype.modes[g][c]}}}dhtmlXCombo.prototype.modes.option={image:false,option_css:&quot;dhxcombo_option_text&quot;,ht:function(a,c){a._conf={value:c.value,css:&quot;&quot;};a.className=&quot;dhxcombo_option&quot;;a.innerHTML=&quot;<DIV class="&quot;+this.option_css+&quot;"> </DIV>&quot;;if(c.css!=null){a.lastChild.style.cssText=c.css;a._conf.css=c.css}this.setText(a,c.text);return this},destruct:function(a){a._conf=null},update:function(a,c){a._conf.value=c.value;a._conf.css=c.css;a.lastChild.style.cssText=c.css;this.setText(a,c.text)},setText:function(c,g){c._conf.text=g;var a=(typeof(g)==&quot;object&quot;?window.dhx4.template(c._tpl.option,c._conf.text,true):window.dhx4.trim(c._conf.text||&quot;&quot;));c.lastChild.innerHTML=(a.length==0?&quot; &quot;:a)},getText:function(g,a,c){if(window.dhx4.s2b(a)&amp;&amp;typeof(g._conf.text)==&quot;object&quot;){return window.dhx4.template(g._tpl.input,g._conf.text,true)}if(window.dhx4.s2b(c)&amp;&amp;typeof(g._conf.text)==&quot;object&quot;){return window.dhx4.template(g._tpl.option,g._conf.text,true)}return g._conf.text},getValue:function(a){return a._conf.value},getCss:function(a){return a._conf.css},setSelected:function(a,c){a.className=&quot;dhxcombo_option&quot;+(c?&quot; dhxcombo_option_selected&quot;:&quot;&quot;)},isSelected:function(a){return String(a.className).indexOf(&quot;dhxcombo_option_selected&quot;)&gt;=0},getExtraData:function(a){return{type:&quot;option&quot;}}};dhtmlXCombo.prototype.modes.checkbox={image:true,image_css:&quot;dhxcombo_checkbox dhxcombo_chbx_#state#&quot;,option_css:&quot;dhxcombo_option_text dhxcombo_option_text_chbx&quot;,ht:function(a,c){a._conf={value:c.value,css:&quot;&quot;,checked:window.dhx4.s2b(c.checked)};a.className=&quot;dhxcombo_option&quot;;a.innerHTML=&quot;<DIV class="&quot;+this.option_css+&quot;"> </DIV>&quot;;a.firstChild._optChbxId=a._optId;if(c.css!=null){a.lastChild.style.cssText+=c.css;a._conf.css=c.css}this.setText(a,c.text);return this},Ou:function(a,c){a._conf.checked=window.dhx4.s2b(c);a.firstChild.className=String(this.image_css).replace(&quot;#state#&quot;,(a._conf.checked?&quot;1&quot;:&quot;0&quot;))},isChecked:function(a){return(a._conf.checked==true)},getExtraData:function(a){return{type:&quot;checkbox&quot;,checked:a._conf.checked}},optionClick:function(h,g,l){var c=true;var a=(g.target||g.srcElement);while(c==true&amp;&amp;a!=null&amp;&amp;a!=h){if(a._optChbxId!=null){if(l.callEvent(&quot;onCheck&quot;,[h._conf.value,!h._conf.checked])===true){this.Ou(h,!this.isChecked(h))}c=false}else{a=a.parentNode}}a=l=h=null;return c},getTopImage:function(c,a){return &quot;&quot;},topImageClick:function(a,c){return true}};dhtmlXComboExtend(&quot;checkbox&quot;,&quot;option&quot;);dhtmlXCombo.prototype.Ou=function(a,c){this.doWithItem(a,&quot;setChecked&quot;,c)};dhtmlXCombo.prototype.getChecked=function(a,h){var c=[];for(var g=0;g&lt;this.list.childNodes.length;g++){if(this.isChecked(g)){c.push(this._getOptionProp(this.list.childNodes[g]._optId,&quot;value&quot;,&quot;&quot;))}}return c};dhtmlXCombo.prototype.isChecked=function(a){return this.doWithItem(a,&quot;isChecked&quot;)};dhtmlXCombo.prototype.modes.image={image:true,image_css:&quot;dhxcombo_image&quot;,option_css:&quot;dhxcombo_option_text dhxcombo_option_text_image&quot;,ht:function(a,c){a._conf={value:c.value,css:&quot;&quot;};a.className=&quot;dhxcombo_option&quot;;a.innerHTML=&quot;<DIV class="&quot;+this.option_css+&quot;"> </DIV>&quot;;if(c.css!=null){a.lastChild.style.cssText+=c.css;a._conf.css=c.css}this.setText(a,c.text);this.hW(a,c.img,c.img_dis,c.img_path,c.img_def,c.img_def_dis);return this},update:function(a,c){a._conf.value=c.value;a._conf.css=c.css;a.lastChild.style.cssText=c.css;this.setText(a,c.text);this.hW(a,c.img,c.img_dis,c.img_path,c.img_def,c.img_def_dis)},hW:function(g,a,l,m,h,c){if(a!=null&amp;&amp;a.length&gt;0){a=m+a}else{if(h!=null&amp;&amp;h.length&gt;0){a=m+h}else{a=null}}if(l!=null&amp;&amp;l.length&gt;0){l=m+l}else{if(c!=null&amp;&amp;c.length&gt;0){l=m+c}else{if(c==true){l=a}else{l=null}}}g._conf.img=a;g._conf.img_dis=l;g.firstChild.style.backgroundImage=(a!=null?&quot;url(&quot;+a+&quot;)&quot;:&quot;none&quot;)},getExtraData:function(a){return{type:&quot;image&quot;}},getTopImage:function(h,g){var c=(g?&quot;img&quot;:&quot;img_dis&quot;);if(h!=null&amp;&amp;h._conf[c]!=null){return &quot;&quot;}return &quot;&quot;}};dhtmlXComboExtend(&quot;image&quot;,&quot;option&quot;);dhtmlXCombo.prototype.OH=function(a,c){if(a!=null){this.kZ.img_def=a}if(c!=null){this.kZ.img_def_dis=c}};dhtmlXCombo.prototype.setImagePath=function(a){this.kZ.img_path=a};function dhtmlXColorPicker(o){if(!(this instanceof dhtmlXColorPicker)){return new dhtmlXColorPicker(o)}dhx4._eventable(this);var m=this,h=undefined,n=null,g,a,c;this._nodes=[];this.activeNode=null;this._inputListenerId=null;this.base=null;this._globalNode=null;this.memory=null;this.skin=null;this.kZ={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:&quot;right&quot;,customColors:false,vf:null,hide:false,hideOnSelect:false,lang:&quot;en&quot;,closeable:true};this.value={red:null,blue:null,green:null,hue:null,sat:null,lum:null};this._initMoveSelection=function(l){l=l||event;if(typeof(window.addEventListener)==&quot;function&quot;){m._controllerNodes.colorArea.addEventListener(&quot;mousemove&quot;,m._setMoveSelection,false);document.body.addEventListener(&quot;mouseup&quot;,m._cleanMoveSelection,false)}else{m._controllerNodes.colorArea.attachEvent(&quot;onmousemove&quot;,m._setMoveSelection);document.body.attachEvent(&quot;onmouseup&quot;,m._cleanMoveSelection)}m._setMoveSelection(l,m._controllerNodes.colorArea);return false};this._cleanMoveSelection=function(){if(typeof(window.removeEventListener)==&quot;function&quot;){m._controllerNodes.colorArea.removeEventListener(&quot;mousemove&quot;,m._setMoveSelection,false);document.body.removeEventListener(&quot;mouseup&quot;,m._cleanMoveSelection,false)}else{m._controllerNodes.colorArea.detachEvent(&quot;onmousemove&quot;,m._setMoveSelection);document.body.detachEvent(&quot;onmouseup&quot;,m._cleanMoveSelection)}return false};this._setMoveSelection=function(l){l=l||event;var q=m._getOffsetPosition(l,m._controllerNodes.colorArea);if(m._controllerNodes.fr_cover){setTimeout(function(){m._setColorAreaXY(q.x,q.y);m._setColorByXYC()},0)}else{m._setColorAreaXY(q.x,q.y);m._setColorByXYC()}return false};this._initMoveContrast=function(l){l=l||event;if(typeof(window.addEventListener)==&quot;function&quot;){document.body.addEventListener(&quot;mousemove&quot;,m._setMoveContrast,false);document.body.addEventListener(&quot;mouseup&quot;,m._cleanMoveContrast,false)}else{document.body.attachEvent(&quot;onmousemove&quot;,m._setMoveContrast);document.body.attachEvent(&quot;onmouseup&quot;,m._cleanMoveContrast)}m._setMoveContrast(l,m._controllerNodes.contrastArea)};this._cleanMoveContrast=function(){if(typeof(window.removeEventListener)==&quot;function&quot;){document.body.removeEventListener(&quot;mousemove&quot;,m._setMoveContrast,false);document.body.removeEventListener(&quot;mouseup&quot;,m._cleanMoveContrast,false)}else{document.body.detachEvent(&quot;onmousemove&quot;,m._setMoveContrast);document.body.detachEvent(&quot;onmouseup&quot;,m._cleanMoveContrast)}};this._setMoveContrast=function(l){l=l||event;var q=m._getOffsetPosition(l,m._controllerNodes.contrastArea);m._setContrastY(q.y);m._setColorByXYC(true)};this._doOnSelectColor=function(){var l=m.colorAIP.rgb2hex({r:m.value.red,g:m.value.green,b:m.value.blue});if(m.activeNode!=null){if(m.activeNode.valueCont){m.activeNode.valueCont.value=l}if(m.activeNode.valueColor){m.activeNode.valueColor.style.backgroundColor=l}}if(m.base.ahC||m.kZ.hideOnSelect){m.hide()}m.callEvent(&quot;onSelect&quot;,[l,((m.activeNode)?m.activeNode.node:null)])};this._doOnCancel=function(){if(m.callEvent(&quot;onCancel&quot;,[((m.activeNode)?m.activeNode.node:null)])==true&amp;&amp;m.kZ.closeable==true){m.hide()}};this._doOnFocusByInput=function(){var q=(this!=window)?this:event.srcElement;var l=(m.activeNode&amp;&amp;m.activeNode.valueCont&amp;&amp;m.activeNode.valueCont==q)?m.activeNode:m._getNodeByValueCont(q);m.activeNode=l;if(l&amp;&amp;l==m.activeNode){m._initListenerInput()}};this._doOnBlurByInput=function(){var q=(this!=window)?this:event.srcElement;var l=(m.activeNode&amp;&amp;m.activeNode.valueCont&amp;&amp;m.activeNode.valueCont==q)?m.activeNode:m._getNodeByValueCont(q);if(l&amp;&amp;l==m.activeNode){m._removeListenerInput()}};this._doOnClickByNode=function(q){q=q||event;var l=(this!=window)?this:event.srcElement;m.activeNode=(m.activeNode.node!=l)?m._getNodeByElement(l):m.activeNode;if(!m.Yi()){m.show()}};this.saveColor=function(){m.memory.setValue(m.value)};this._onSelectMemoryEl=function(q){var l;m._refreshCoordinatesByHSL(q.value.hue,q.value.sat,q.value.lum);for(l in q.value){m.value[l]=q.value[l]}m._refreshContrast();m._refreshInputValues();m._refreshColorValue()};this._doOnClickByBody=function(r){r=r||event;var l=true,q=r.target||r.srcElement;if(m._isBaseNode(q)){l=false}if(l&amp;&amp;m.activeNode&amp;&amp;(m.activeNode.node==q||m.activeNode.valueCont==q)){l=false}if(l){m.hide()}};this._doOnChangeHSL=function(){var r=parseInt(m._controllerNodes.hue.value),q=parseInt(m._controllerNodes.sat.value),l=parseInt(m._controllerNodes.lum.value),s;if(isNaN(r)||r&gt;359||r&lt;0){m._controllerNodes.hue.value=m.value.hue}else{m.value.hue=r}if(isNaN(q)||q&gt;100||q&lt;0){m._controllerNodes.sat.value=m.value.sat}else{m.value.sat=q}if(isNaN(l)||l&gt;100||l&lt;0){m._controllerNodes.lum.value=m.value.lum}else{m.value.lum=l}s=m.colorAIP.hsl2rgb(m.value.hue,m.value.sat/100,m.value.lum/100);m.value.red=Math.round(255*s.r);m.value.green=Math.round(255*s.g);m.value.blue=Math.round(255*s.b);m._refreshCoordinatesByHSL(m.value.hue,m.value.sat,m.value.lum);m._refreshContrast();m._refreshInputValues();m._refreshColorValue()};this._doOnChangeRGB=function(){var s=parseInt(m._controllerNodes.red.value),r=parseInt(m._controllerNodes.green.value),l=parseInt(m._controllerNodes.blue.value),q;if(isNaN(s)||s&gt;255||s&lt;0){m._controllerNodes.red.value=m.value.red}else{m.value.red=s}if(isNaN(r)||r&gt;255||r&lt;0){m._controllerNodes.green.value=m.value.green}else{m.value.green=r}if(isNaN(l)||l&gt;255||l&lt;0){m._controllerNodes.blue.value=m.value.blue}else{m.value.blue=l}q=m.colorAIP.rgb2hsl(m.value.red/255,m.value.green/255,m.value.blue/255);m.value.hue=Math.round(q.h);m.value.sat=Math.round(q.s*100);m.value.lum=Math.round(q.l*100);m._refreshCoordinatesByHSL(m.value.hue,m.value.sat,m.value.lum);m._refreshContrast();m._refreshInputValues();m._refreshColorValue()};this._doOnChangeHSV=function(){m._controllerNodes.hsv.value=m.qO(m._controllerNodes.hsv.value)};this._checkType=function(q){var l;if(q instanceof Array){l=m._checkType(q[0]);switch(l){case &quot;string&quot;:return &quot;array_string&quot;;break;case &quot;input&quot;:case &quot;textarea&quot;:return &quot;array_input&quot;;break;case &quot;object&quot;:return &quot;array_object&quot;;break;default:return undefined}}else{if(q==undefined){return null}else{if(typeof(q)==&quot;string&quot;){return &quot;string&quot;}else{if(q.tagName&amp;&amp;q.tagName.toLowerCase()==&quot;input&quot;){return &quot;input&quot;}else{if(q.tagName&amp;&amp;q.tagName.toLowerCase()==&quot;textarea&quot;){return &quot;textarea&quot;}else{if(q.tagName){return &quot;container&quot;}else{if(typeof(q)==&quot;object&quot;){return &quot;object&quot;}else{return undefined}}}}}}}};this._initByObject=function(l){if(l.parent&amp;&amp;l.parent.tagName){m.base=l.parent}else{if(typeof(l.parent)==&quot;string&quot;){m.base=document.getElementById(l.parent)}else{m.base=document.createElement(&quot;div&quot;);m.base.ahC=true}}if(l.color){m.kZ.vf=l.color}if(typeof(l.closeable)!=&quot;undefined&quot;){this.kZ.closeable=dhx4.s2b(l.closeable)}if(l.custom_colors){this._tempInitCC=function(){var s,r;this.initMemoryColors();this.kZ.customColors=true;if(l.custom_colors instanceof Array){r=l.custom_colors.length;for(s=0;s&lt;r;s++){this.setCustomColors(l.custom_colors[s])}}if(this.base.parentNode){this.showMemory()}delete this._tempInitCC}}if(l.hide){m.kZ.hide=true}if(l.input){m._addNode(l.input,l.target_color,l.target_value)}var q=l.skin||window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhxcolorpicker&quot;)||&quot;dhx_skyblue&quot;;m.setSkin(q);if(l.colors){m.initMemoryColors();m.kZ.customColors=true}if(l.link){m._addNode(l.link)}};this.unload=function(){var s,q,r;if(this.Yi()){this.hide()}this.destructMemory();q=this._nodes.length;for(s=0;s&lt;q;s++){this._detachEventsFromNode(this._nodes[s]);for(r in this._nodes[s]){this._nodes[s][r]=null}delete this._nodes[s]}this._nodes=null;if(!this.base.ahC){this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,&quot;&quot;)}else{delete this.base.ahC}if(typeof(window.addEventListener)==&quot;function&quot;){this._controllerNodes.colorArea.removeEventListener(&quot;mousedown&quot;,this._initMoveSelection,false);this._controllerNodes.colorArea.removeEventListener(&quot;dblclick&quot;,this._doOnSelectColor,false);this._controllerNodes.contrastArea.removeEventListener(&quot;mousedown&quot;,this._initMoveContrast,false);this._controllerNodes.button_save.removeEventListener(&quot;click&quot;,this._doOnSelectColor,false);this._controllerNodes.button_cancel.removeEventListener(&quot;click&quot;,this._doOnCancel,false);this._controllerNodes.hue.removeEventListener(&quot;change&quot;,this._doOnChangeHSL,false);this._controllerNodes.sat.removeEventListener(&quot;change&quot;,this._doOnChangeHSL,false);this._controllerNodes.lum.removeEventListener(&quot;change&quot;,this._doOnChangeHSL,false);this._controllerNodes.red.removeEventListener(&quot;change&quot;,this._doOnChangeRGB,false);this._controllerNodes.green.removeEventListener(&quot;change&quot;,this._doOnChangeRGB,false);this._controllerNodes.blue.removeEventListener(&quot;change&quot;,this._doOnChangeRGB,false);this._controllerNodes.hsv.removeEventListener(&quot;change&quot;,this._doOnChangeHSV,false)}else{this._controllerNodes.colorArea.detachEvent(&quot;onmousedown&quot;,this._initMoveSelection);this._controllerNodes.colorArea.detachEvent(&quot;ondblclick&quot;,this._doOnSelectColor);this._controllerNodes.contrastArea.detachEvent(&quot;onmousedown&quot;,this._initMoveContrast);this._controllerNodes.button_save.detachEvent(&quot;onclick&quot;,this._doOnSelectColor);this._controllerNodes.button_cancel.detachEvent(&quot;onclick&quot;,this._doOnCancel);this._controllerNodes.hue.detachEvent(&quot;onchange&quot;,this._doOnChangeHSL);this._controllerNodes.sat.detachEvent(&quot;onchange&quot;,this._doOnChangeHSL);this._controllerNodes.lum.detachEvent(&quot;onchange&quot;,this._doOnChangeHSL);this._controllerNodes.red.detachEvent(&quot;onchange&quot;,this._doOnChangeRGB);this._controllerNodes.green.detachEvent(&quot;onchange&quot;,this._doOnChangeRGB);this._controllerNodes.blue.detachEvent(&quot;onchange&quot;,this._doOnChangeRGB);this._controllerNodes.hsv.detachEvent(&quot;onchange&quot;,this._doOnChangeHSV)}if(this._controllerNodes.fr_cover){if(this._controllerNodes.fr_cover.parentNode){this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover)}delete this._controllerNodes.fr_cover}dhx4.zim.clear(this.kZ.cp_id);dhx4._eventable(this,&quot;clear&quot;);for(r in this){this[r]=null}m=null,n=null,c=null};h=this._checkType(o);switch(h){case &quot;object&quot;:m._initByObject(o);break;case &quot;input&quot;:case &quot;textarea&quot;:m._initByObject({});this._addNode(o);break;case &quot;string&quot;:n=document.getElementById(o);return new dhtmlXColorPicker(n);break;case &quot;container&quot;:m._initByObject({parent:o});break;case null:m._initByObject({});break;case &quot;array_string&quot;:case &quot;array_input&quot;:m._initByObject({});a=o.length;for(g=0;g&lt;a;g++){this._addNode(o[g])}break;case &quot;array_object&quot;:m._initByObject({});a=o.length;for(g=0;g&lt;a;g++){c=this._addNode(o[g].input,o[g].target_color,o[g].target_value).kZ;c.customColors=(o[g].custom_colors!=undefined)?dhx4.s2b(o[g].custom_colors):c.customColors;c.vf=(o[g].color!=undefined)?o[g].color:c.vf}break}this.base.innerHTML=&quot;<DIV class="dhxcp_g_area"><DIV class="dhxcp_sub_area"><DIV class="dhxcp_g_input_area"><DIV class="dhxcp_value_cont">&lt;input type='text' class='dhxcp_value'/&gt;</DIV><TABLE class="dhxcp_inputs_cont" cellpadding="0" cellspacing="0" border="0"><TBODY><TR><TD class="dhxcp_label_hsl">&quot;+this.i18n[this.kZ.lang].labelHue+&quot;</TD><TD class="dhxcp_input_hsl">&lt;input type='text' class='dhxcp_input_hsl'/&gt;</TD><TD class="dhxcp_label_rgb">&quot;+this.i18n[this.kZ.lang].labelRed+&quot;</TD><TD class="dhxcp_input_rgb">&lt;input type='text' class='dhxcp_input_rgb'/&gt;</TD></TR><TR><TD class="dhxcp_label_hsl">&quot;+this.i18n[this.kZ.lang].labelSat+&quot;</TD><TD class="dhxcp_input_hsl">&lt;input type='text' class='dhxcp_input_hsl'/&gt;</TD><TD class="dhxcp_label_rgb">&quot;+this.i18n[this.kZ.lang].labelGreen+&quot;</TD><TD class="dhxcp_input_rgb">&lt;input type='text' class='dhxcp_input_rgb'/&gt;</TD></TR><TR><TD class="dhxcp_label_hsl">&quot;+this.i18n[this.kZ.lang].labelLum+&quot;</TD><TD class="dhxcp_input_hsl">&lt;input type='text' class='dhxcp_input_hsl'/&gt;</TD><TD class="dhxcp_label_rgb">&quot;+this.i18n[this.kZ.lang].labelBlue+&quot;</TD><TD class="dhxcp_input_rgb">&lt;input type='text' class='dhxcp_input_rgb'/&gt;</TD></TR></TBODY></TABLE></DIV><DIV class="dhxcp_buttons_area">&lt;button class='dhx_button_save'&gt;&quot;+this.i18n[this.kZ.lang].btnSelect+&quot;&lt;/button&gt;&lt;button class='dhx_button_cancel'&gt;&quot;+this.i18n[this.kZ.lang].btnCancel+&quot;&lt;/button&gt;</DIV></DIV>&quot;;&quot;</DIV>&quot;;this._globalNode=this.base.firstChild;this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};if(typeof(this._tempInitCC)==&quot;function&quot;){this._tempInitCC()}if(typeof(window.addEventListener)==&quot;function&quot;){this._controllerNodes.colorArea.addEventListener(&quot;mousedown&quot;,this._initMoveSelection,false);this._controllerNodes.colorArea.addEventListener(&quot;dblclick&quot;,this._doOnSelectColor,false);this._controllerNodes.contrastArea.addEventListener(&quot;mousedown&quot;,this._initMoveContrast,false);this._controllerNodes.button_save.addEventListener(&quot;click&quot;,this._doOnSelectColor,false);this._controllerNodes.button_cancel.addEventListener(&quot;click&quot;,this._doOnCancel,false);this._controllerNodes.hue.addEventListener(&quot;change&quot;,this._doOnChangeHSL,false);this._controllerNodes.sat.addEventListener(&quot;change&quot;,this._doOnChangeHSL,false);this._controllerNodes.lum.addEventListener(&quot;change&quot;,this._doOnChangeHSL,false);this._controllerNodes.red.addEventListener(&quot;change&quot;,this._doOnChangeRGB,false);this._controllerNodes.green.addEventListener(&quot;change&quot;,this._doOnChangeRGB,false);this._controllerNodes.blue.addEventListener(&quot;change&quot;,this._doOnChangeRGB,false);this._controllerNodes.hsv.addEventListener(&quot;change&quot;,this._doOnChangeHSV,false)}else{this._controllerNodes.colorArea.attachEvent(&quot;onmousedown&quot;,this._initMoveSelection);this._controllerNodes.colorArea.attachEvent(&quot;ondblclick&quot;,this._doOnSelectColor);this._controllerNodes.contrastArea.attachEvent(&quot;onmousedown&quot;,this._initMoveContrast);this._controllerNodes.button_save.attachEvent(&quot;onclick&quot;,this._doOnSelectColor);this._controllerNodes.button_cancel.attachEvent(&quot;onclick&quot;,this._doOnCancel);this._controllerNodes.hue.attachEvent(&quot;onchange&quot;,this._doOnChangeHSL);this._controllerNodes.sat.attachEvent(&quot;onchange&quot;,this._doOnChangeHSL);this._controllerNodes.lum.attachEvent(&quot;onchange&quot;,this._doOnChangeHSL);this._controllerNodes.red.attachEvent(&quot;onchange&quot;,this._doOnChangeRGB);this._controllerNodes.green.attachEvent(&quot;onchange&quot;,this._doOnChangeRGB);this._controllerNodes.blue.attachEvent(&quot;onchange&quot;,this._doOnChangeRGB);this._controllerNodes.hsv.attachEvent(&quot;onchange&quot;,this._doOnChangeHSV)}if(this.kZ.vf){this.qO(this.kZ.vf)}else{this._setColorAreaXY(10,10);this._setContrastY(10);m._setColorByXYC()}if(this._nodes.length){for(var g=0;g&lt;this._nodes.length;g++){this._attachEventsToNode(this._nodes[g])}}if(this.kZ.hide){this.hide()}if(typeof(this._cpInitFRM)==&quot;function&quot;){this._cpInitFRM()}}dhtmlXColorPicker.prototype.linkTo=function(c,g,h){if(arguments.length==1){g=h=c}var a;c=c||null;h=h||null;if(typeof(g)==&quot;string&quot;){g=document.getElementById(g)}a=this._addNode(g,c,h);if(a){this._attachEventsToNode(a)}return a};dhtmlXColorPicker.prototype._isBaseNode=function(a){if(a==this.base){return true}if(a.parentElement==document.body){return false}else{if(!a.parentElement){return false}else{return this._isBaseNode(a.parentElement)}}};dhtmlXColorPicker.prototype._hasInput=function(g){var c,a,h=false;a=this._nodes.length;for(c=0;c&lt;a;c++){if(this._nodes[c].valueCont==g){h=true;break}}return h};dhtmlXColorPicker.prototype._findNodesByArray=function(m){var g,a,c,h=[];a=m.length;for(g=0;g&lt;a;g++){if(typeof(m[g])==&quot;string&quot;){c=document.getElementById(m[g])}else{c=m[g]}if(c){this._addNode(c)}}};dhtmlXColorPicker.prototype._addNode=function(l,n,m){var c,h,g,a;if(typeof(l)==&quot;string&quot;){c=document.getElementById(l)}else{c=l}if(typeof(n)==&quot;string&quot;){n=document.getElementById(n)}if(typeof(m)==&quot;string&quot;){m=document.getElementById(m)}if(!c){return null}if(dhx4.s2b(c.getAttribute(&quot;colorbox&quot;))){h=document.createElement(&quot;div&quot;);h.style.width=c.offsetWidth+&quot;px&quot;;h.style.height=c.offsetHeight+&quot;px&quot;;c.style.width=c.offsetWidth-(c.offsetHeight+8)+&quot;px&quot;;c.parentNode.insertBefore(h,c);h.style.position=&quot;relative&quot;;g=document.createElement(&quot;div&quot;);h.appendChild(c);h.appendChild(g);g.className=&quot;dhxcp_colorBox&quot;;c.className+=&quot; dhxcp_colorInput&quot;;g.style.width=g.style.height=c.offsetHeight+&quot;px&quot;}a={node:c,valueColor:(n!=undefined)?n:g||c,valueCont:(m!=undefined)?m:c,kZ:{customColors:(c.getAttribute(&quot;customcolors&quot;)!=null)?dhx4.s2b(c.getAttribute(&quot;customcolors&quot;)):null,vf:c.getAttribute(&quot;selectedcolor&quot;)}};this._nodes.push(a);if(!this.activeNode){this.activeNode=a}return a};dhtmlXColorPicker.prototype.getNode=function(g){var a=null,c=null;if(typeof(g)==&quot;string&quot;){a=document.getElementById(g)}else{a=g}if(a.tagName!=undefined){c=this._getNodeByElement(a)}return c};dhtmlXColorPicker.prototype._getNodeByElement=function(g){var h=null,c,a;a=this._nodes.length;for(c=0;c&lt;a;c++){if(this._nodes[c].node==g){h=this._nodes[c]}}return h};dhtmlXColorPicker.prototype._getNodeByValueCont=function(g){var h=null,c,a;a=this._nodes.length;for(c=0;c&lt;a;c++){if(this._nodes[c].valueCont&amp;&amp;this._nodes[c].valueCont==g){h=this._nodes[c]}}return h};dhtmlXColorPicker.prototype.initMemoryColors=function(){var c=this;this._controllerNodes.memory_block.innerHTML=&quot;<DIV class="dhxcp_memory_button_cont">&lt;button class='dhxcp_save_to_memory'&gt;<DIV class="dhxcp_label_bm">&quot;+this.i18n[this.kZ.lang].btnAddColor+&quot;</DIV>&lt;/button&gt;</DIV><DIV class="dhxcp_memory_els_cont">&lt;a class='dhxcp_memory_el'&gt;&lt;/a&gt;&lt;a class='dhxcp_memory_el'&gt;&lt;/a&gt;&lt;a class='dhxcp_memory_el'&gt;&lt;/a&gt;&lt;a class='dhxcp_memory_el'&gt;&lt;/a&gt;&lt;a class='dhxcp_memory_el'&gt;&lt;/a&gt;&lt;a class='dhxcp_memory_el'&gt;&lt;/a&gt;&lt;a class='dhxcp_memory_el'&gt;&lt;/a&gt;&lt;a class='dhxcp_memory_el'&gt;&lt;/a&gt;</DIV>&quot;;this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]);this.memory.onSelect=this._onSelectMemoryEl;this.memory.onSave=function(h){var g=c.colorAIP.rgb2hex({r:h.red,g:h.green,b:h.blue});c.callEvent(&quot;onSaveColor&quot;,[g])};var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild;if(typeof(window.addEventListener)==&quot;function&quot;){a.addEventListener(&quot;click&quot;,this.saveColor,false)}else{a.attachEvent(&quot;onclick&quot;,this.saveColor)}};dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(o,n,c){var a,m,g;a=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*o/359)+this.configColorArea.minX;m=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-c)/100)+this.configColorArea.minY;g=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-n)/100)+this.configColorArea.minY;this._setColorAreaXY(a,m);this._setContrastY(g)};dhtmlXColorPicker.prototype.qO=function(n){var h,g,m=true,c,a=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),l;if(n instanceof Array){h={r:parseInt(n[0]),g:parseInt(n[1]),b:parseInt(n[2])}}else{if(typeof(n)==&quot;string&quot;){n=n.replace(/\s/g,&quot;&quot;);if(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(n)){g=n.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i);h={r:parseInt(g[1]),g:parseInt(g[2]),b:parseInt(g[3])}}else{h=this.colorAIP.hex2rgb(n)}}}m=m&amp;&amp;h instanceof Object;m=m&amp;&amp;(0&lt;=h.r&amp;&amp;h.r&lt;=255);m=m&amp;&amp;(0&lt;=h.g&amp;&amp;h.g&lt;=255);m=m&amp;&amp;(0&lt;=h.b&amp;&amp;h.b&lt;=255);if(!m){return a}l=this.colorAIP.rgb2hex({r:h.r,g:h.g,b:h.b});if(l==a){return a}this.value.red=h.r;this.value.green=h.g;this.value.blue=h.b;c=this.colorAIP.rgb2hsl(h.r/255,h.g/255,h.b/255);this.value.hue=Math.round(c.h);this.value.sat=Math.round(c.s*100);this.value.lum=Math.round(c.l*100);this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum);this._refreshContrast();this._refreshInputValues();this._refreshColorValue();return l};dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]};dhtmlXColorPicker.prototype._attachEventsToNode=function(a){if(typeof(window.addEventListener)==&quot;function&quot;){a.node.addEventListener(&quot;click&quot;,this._doOnClickByNode,false)}else{a.node.attachEvent(&quot;onclick&quot;,this._doOnClickByNode)}if(a.valueCont&amp;&amp;a.valueCont.tagName.toLowerCase()==&quot;input&quot;){if(typeof(window.addEventListener)==&quot;function&quot;){a.valueCont.addEventListener(&quot;focus&quot;,this._doOnFocusByInput,false);a.valueCont.addEventListener(&quot;blur&quot;,this._doOnBlurByInput,false)}else{a.valueCont.attachEvent(&quot;onfocus&quot;,this._doOnFocusByInput);a.valueCont.attachEvent(&quot;onblur&quot;,this._doOnBlurByInput)}}};dhtmlXColorPicker.prototype._detachEventsFromNode=function(a){if(typeof(window.addEventListener)==&quot;function&quot;){a.node.removeEventListener(&quot;click&quot;,this._doOnClickByNode,false)}else{a.node.detachEvent(&quot;onclick&quot;,this._doOnClickByNode)}if(a.valueCont&amp;&amp;a.valueCont.tagName.toLowerCase()==&quot;input&quot;){if(typeof(window.addEventListener)==&quot;function&quot;){a.valueCont.removeEventListener(&quot;focus&quot;,this._doOnFocusByInput,false);a.valueCont.removeEventListener(&quot;blur&quot;,this._doOnBlurByInput,false)}else{a.valueCont.detachEvent(&quot;onfocus&quot;,this._doOnFocusByInput);a.valueCont.detachEvent(&quot;onblur&quot;,this._doOnBlurByInput)}}};dhtmlXColorPicker.prototype.show=function(c){var a=false;if(c!=undefined){this.activeNode=this.getNode(c)||this.activeNode}if(this.activeNode&amp;&amp;this.activeNode.valueCont&amp;&amp;this.activeNode.valueCont.value){this.qO(this.activeNode.valueCont.value)}if(this.activeNode){a=(this.activeNode.kZ.customColors!=null)?this.activeNode.kZ.customColors:this.kZ.customColors;this.qO(this.activeNode.kZ.vf)}else{a=this.kZ.customColors}if(a){this.showMemory()}else{this.hideMemory()}if(this.base.ahC){this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.kZ.cp_id);if(document.body.firstChild){document.body.insertBefore(this.base,document.body.firstChild)}else{document.body.appendChild(this.base)}this._refreshPosition();if(typeof(window.addEventListener)==&quot;function&quot;){document.body.addEventListener(&quot;mousedown&quot;,this._doOnClickByBody,false)}else{document.body.attachEvent(&quot;onmousedown&quot;,this._doOnClickByBody)}}else{this.base.appendChild(this._globalNode)}if(this._controllerNodes.fr_cover){this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode)}this.callEvent(&quot;onShow&quot;,[((this.activeNode)?this.activeNode.node:null)])};dhtmlXColorPicker.prototype.Yy=function(c,l){var h=null,a=parseInt(c),g=parseInt(l);if(isNaN(a)){h=(c.toLowerCase()==&quot;left&quot;)?&quot;left&quot;:(c.toLowerCase()==&quot;bottom&quot;)?&quot;bottom&quot;:null}if(this.base.ahC){if(h==null){}else{this.kZ.position=h;this._refreshPosition(h)}}else{if(isNaN(a)||isNaN(g)){}else{this._globalNode.style.left=a+&quot;px&quot;;this._globalNode.style.top=g+&quot;px&quot;;if(this._controllerNodes.fr_cover){this._controllerNodes.fr_cover.style.left=this._globalNode.style.left;this._controllerNodes.fr_cover.style.top=this._globalNode.style.top}}}};dhtmlXColorPicker.prototype._initListenerInput=function(){var a=this;this._inputListenerId=this._inputListenerId||setInterval(function(){a._refreshValueByInput()},70)};dhtmlXColorPicker.prototype._removeListenerInput=function(){if(this._inputListenerId){clearInterval(this._inputListenerId);this._inputListenerId=null}};dhtmlXColorPicker.prototype._refreshValueByInput=function(){var c=this.activeNode.valueCont.value,a=this.getSelectedColor()[0];if(this._inputListenerId){if(/^#[\da-f]{6}$/i.test(c)&amp;&amp;c!=a){this.qO(c);this.callEvent(&quot;onSelect&quot;,[c,this.activeNode.node])}}};dhtmlXColorPicker.prototype._refreshPosition=function(c){if(this.activeNode==null){return}var m=dhx4.absTop(this.activeNode.node),a=dhx4.absLeft(this.activeNode.node),g=dhx4.screenDim(),h=this._globalNode.offsetHeight,l=0;c=c||this.kZ.position;switch(c){case &quot;bottom&quot;:this._globalNode.style.top=m+this.activeNode.node.offsetHeight+this.kZ.indent+&quot;px&quot;;this._globalNode.style.left=a+&quot;px&quot;;break;default:this._globalNode.style.left=a+this.activeNode.node.offsetWidth+this.kZ.indent+&quot;px&quot;;l=m;if(g.bottom-(l+h)&lt;=0){l=g.bottom-(h+this.kZ.indent)}if(l-g.top&lt;0){l=g.top+this.kZ.indent}this._globalNode.style.top=l+&quot;px&quot;}if(this._controllerNodes.fr_cover){this._controllerNodes.fr_cover.style.left=this._globalNode.style.left;this._controllerNodes.fr_cover.style.top=this._globalNode.style.top}};dhtmlXColorPicker.prototype.Yi=function(){var a=false;if(this.base.ahC){a=this.base.parentNode==document.body}else{a=this._globalNode.parentNode==this.base}return a};dhtmlXColorPicker.prototype.hide=function(){if(this.base.ahC){if(this.base.parentNode){this.base.parentNode.removeChild(this.base);dhx4.zim.clear(this.kZ.cp_id);if(typeof(window.addEventListener)==&quot;function&quot;){document.body.removeEventListener(&quot;mousedown&quot;,this._doOnClickByBody,false)}else{document.body.detachEvent(&quot;onmousedown&quot;,this._doOnClickByBody)}}}else{if(this.Yi()==false){return}this.base.removeChild(this._globalNode)}if(this._controllerNodes.fr_cover&amp;&amp;this._controllerNodes.fr_cover.parentNode){this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover)}if(this.callEvent!=undefined){this.callEvent(&quot;onHide&quot;,[((this.activeNode)?this.activeNode.node:null)])}};dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119};dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:true,dhx_web:true,dhx_terrace:true};dhtmlXColorPicker.prototype.i18n={en:{labelHue:&quot;Hue&quot;,labelSat:&quot;Sat&quot;,labelLum:&quot;Lum&quot;,labelRed:&quot;Red&quot;,labelGreen:&quot;Green&quot;,labelBlue:&quot;Blue&quot;,btnAddColor:&quot;Save the color&quot;,btnSelect:&quot;Select&quot;,btnCancel:&quot;Cancel&quot;}};dhtmlXColorPicker.prototype.Re=function(a){if(typeof(this._mergeLangModules)==&quot;function&quot;){this._mergeLangModules()}this.kZ.lang=a;this._refreshLanguage()};dhtmlXColorPicker.prototype._refreshLanguage=function(){var a,c=this.i18n[this.kZ.lang];for(a in c){if(this._labelNodes[a]){this._labelNodes[a].innerHTML=c[a]}}};dhtmlXColorPicker.prototype._setColorAreaXY=function(a,g){var c=this.configColorArea;a=parseInt(a);if(c.minX&gt;a){this.kZ.x=c.minX}else{if(a&gt;c.maxX){this.kZ.x=c.maxX}else{if(!isNaN(a)){this.kZ.x=a}}}g=parseInt(g);if(c.minY&gt;g){this.kZ.y=c.minY}else{if(g&gt;c.maxY){this.kZ.y=c.maxY}else{if(!isNaN(g)){this.kZ.y=g}}}this._refreshLines()};dhtmlXColorPicker.prototype._setColorByXYC=function(c){c=c||false;this.value.hue=Math.round((359*(this.kZ.x-this.configColorArea.minX))/(this.configColorArea.maxX-this.configColorArea.minX));this.value.lum=Math.round(100-(100*(this.kZ.y-this.configColorArea.minY))/(this.configColorArea.maxY-this.configColorArea.minY));this.value.sat=Math.round(100-(100*(this.kZ.c-this.configColorArea.minY))/(this.configColorArea.maxY-this.configColorArea.minY));var a=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*a.r);this.value.green=Math.round(255*a.g);this.value.blue=Math.round(255*a.b);if(!c){this._refreshContrast()}this._refreshInputValues();this._refreshColorValue()};dhtmlXColorPicker.prototype._setContrastY=function(c){var a=this.configColorArea;c=parseInt(c);if(!isNaN(c)){this.kZ.c=Math.min(Math.max(a.minY,c),a.maxY)}this._refreshContrastLine()};dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue;this._controllerNodes.sat.value=this.value.sat;this._controllerNodes.lum.value=this.value.lum;this._controllerNodes.red.value=this.value.red;this._controllerNodes.green.value=this.value.green;this._controllerNodes.blue.value=this.value.blue};dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor=&quot;rgb(&quot;+[this.value.red,this.value.green,this.value.blue].join(&quot;, &quot;)+&quot;)&quot;;var a=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=a;this.callEvent(&quot;onChange&quot;,[a])};dhtmlXColorPicker.prototype._refreshContrast=function(){var h=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100);var l=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100);var g=this._checkIeVersion();if(g&amp;&amp;g&lt;=8){var m=this._controllerNodes.contrastArea.firstChild;if(m==this._controllerNodes.contrast_line){m=document.createElement(&quot;div&quot;);m.className+=&quot;dhxcp_ie_gradient&quot;;this._controllerNodes.contrastArea.appendChild(m);this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line)}var c=this.colorAIP.rgb2hex({r:Math.round(255*h.r),g:Math.round(255*h.g),b:Math.round(255*h.b)});var a=this.colorAIP.rgb2hex({r:Math.round(255*l.r),g:Math.round(255*l.g),b:Math.round(255*l.b)});m.style.filter=&quot;progid:DXImageTransform.Microsoft.gradient(startColorstr='&quot;+a+&quot;', endColorstr='&quot;+c+&quot;', GradientType=0)&quot;}else{h=[Math.round(255*h.r),Math.round(255*h.g),Math.round(255*h.b)];l=[Math.round(255*l.r),Math.round(255*l.g),Math.round(255*l.b)];this._controllerNodes.contrastArea.style.backgroundImage=&quot;linear-gradient(to top, rgb(&quot;+h.join(&quot;,&quot;)+&quot;), rgb(&quot;+l.join(&quot;,&quot;)+&quot;))&quot;}};dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.kZ.x+&quot;px&quot;;this._controllerNodes.h_line.style.top=this.kZ.y+&quot;px&quot;};dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.kZ.c+&quot;px&quot;};dhtmlXColorPicker.prototype._getOffsetPosition=function(h,a){var c={x:NaN,y:NaN},g=h.target||h.srcElement;if(g==a){c.x=(h.offsetX!=undefined)?h.offsetX:h.layerX;c.y=(h.offsetY!=undefined)?h.offsetY:h.layerY}else{if(g==this._controllerNodes.v_line){c.y=(h.offsetY!=undefined)?h.offsetY:h.layerY}else{c.x=(h.offsetX!=undefined)?h.offsetX:h.layerX}}return c};dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(c){var a=c.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(a!=null){return{r:parseInt(&quot;0x&quot;+a[2]),g:parseInt(&quot;0x&quot;+a[3]),b:parseInt(&quot;0x&quot;+a[4])}}else{return null}},rgb2hex:function(l){var h=parseInt(l.r),c=parseInt(l.g),a=parseInt(l.b);h=h||0,c=c||0,a=a||0;return &quot;#&quot;+((h)?((h&lt;16)?&quot;0&quot;+h.toString(16):h.toString(16)):&quot;00&quot;)+((c)?((c&lt;16)?&quot;0&quot;+c.toString(16):c.toString(16)):&quot;00&quot;)+((a)?((a&lt;16)?&quot;0&quot;+a.toString(16):a.toString(16)):&quot;00&quot;)},rgb2hsl:function(q,o,h){var n,m,c;var a=Math.max(q,o,h),l=Math.min(q,o,h);c=0.5*(a+l);if(a==l){n=0}else{if(a==q){n=60*(o-h)/(a-l);if(o&lt;h){n+=360}}else{if(a==o){n=60*(h-q)/(a-l)+120}else{n=60*(q-o)/(a-l)+240}}}if(c==0||a==l){m=0}else{if(c&lt;=0.5){m=0.5*(a-l)/c}else{m=0.5*(a-l)/(1-c)}}return{h:n,s:m,l:c}},hsl2rgb:function(q,g,n){var l,m,o;var c=[],a=[];if(n&lt;=0.5){l=n*(1+g)}else{l=n+g-(n*g)}m=2*n-l;o=q/360;c.push(o+1/3);c.push(o);c.push(o-1/3);for(var h=0;h&lt;3;h++){if(c[h]&lt;0){c[h]+=1}else{if(c[h]&gt;1){c[h]-=1}}if(c[h]&lt;1/6){a.push(m+(l-m)*6*c[h])}else{if(c[h]&lt;0.5){a.push(l)}else{if(c[h]&lt;2/3){a.push(m+(l-m)*(2/3-c[h])*6)}else{a.push(m)}}}}return{r:a[0],g:a[1],b:a[2]}}};dhtmlXColorPicker.prototype._checkIeVersion=function(){var a;var c=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);a=(c&amp;&amp;c[2])?parseInt(c[2]):null;return a};dhtmlXColorPicker.prototype.setCustomColors=function(){if(this.memory==null){this.initMemoryColors();this.kZ.customColors=true}var h,g,n,c,m,a;g=arguments.length;for(h=0;h&lt;g;h++){if(arguments[h]instanceof Array){n=this._rgb2value(arguments[h][0],arguments[h][1],arguments[h][2]);this.memory.setValue(n,null,false);continue}else{if(typeof(arguments[h])==&quot;string&quot;){c=arguments[h].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i);if(c instanceof Array){n=this._rgb2value(c[1],c[2],c[3]);this.memory.setValue(n,null,false);continue}c=arguments[h].match(/(#[\da-f]{6})/ig);if(c instanceof Array){a=c.length;for(m=0;m&lt;a;m++){n=this._hex2value(c[m]);this.memory.setValue(n,null,false)}}}}}};dhtmlXColorPicker.prototype._rgb2value=function(l,h,a){var c=this.colorAIP.rgb2hsl(l/255,h/255,a/255);return{red:l,green:h,blue:a,hue:Math.round(c.h),sat:Math.round(c.s*100),lum:Math.round(c.l*100)}};dhtmlXColorPicker.prototype._hex2value=function(g){var c,a;c=this.colorAIP.hex2rgb(g);a=this.colorAIP.rgb2hsl(c.r/255,c.g/255,c.b/255);return{red:c.r,green:c.g,blue:c.b,hue:Math.round(a.h),sat:Math.round(a.s*100),lum:Math.round(a.l*100)}};dhtmlXColorPicker.prototype.showMemory=function(){if(this.memory==null){this.initMemoryColors()}if(!this._globalNode.className.match(/dhxcp_add_memory/)){this._globalNode.className+=&quot; dhxcp_add_memory&quot;}this.kZ.customColors=true};dhtmlXColorPicker.prototype.hideMemory=function(){if(this.memory!=null){this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,&quot;&quot;)}this.kZ.customColors=false};dhtmlXColorPicker.prototype.setSkin=function(l){l=l.toLowerCase();var g,c= -1,a,h=&quot;dhtmlxcp&quot;;g=this.base.className.match(/\S\w+/ig);if(g instanceof Array){for(a in this._skinCollection){if(c== -1){c=this._indexOf(g,h+&quot;_&quot;+a)}else{break}}c=(c== -1)?g.length:c}else{g=[];c=0}g[c]=h+&quot;_&quot;+l;this.base.className=g.join(&quot; &quot;);this.skin=l};dhtmlXColorPicker.prototype.hideOnSelect=function(a){a=dhx4.s2b(a);this.kZ.hideOnSelect=a};dhtmlXColorPicker.prototype._indexOf=function(a,h){var g,c,m= -1;c=a.length;for(g=c;g&gt;=0;g--){if(a[g]==h){m=g;break}}return m};dhtmlXColorPicker.prototype.destructMemory=function(){if(this.memory==null){return}this.hideMemory();var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null;if(typeof(window.addEventListener)==&quot;function&quot;){a.removeEventListener(&quot;click&quot;,this.saveColor,false)}else{a.detachEvent(&quot;onclick&quot;,this.saveColor)}this.memory.remove();this._controllerNodes.memory_block.innerHTML=&quot;&quot;;this.memory=null};dhtmlXColorPicker.prototype.Memory=function(g){var c=this,a=null,h={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var m=(this!=window)?this:event.srcElement;var l=l||m.dhxpc_memory;if(a!=null){c.unSelect()}a=l;l.domElement.className+=&quot; dhxcp_memory_el_select&quot;;if(typeof(c.onSelect)==&quot;function&quot;){c.onSelect(l)}};this.onSelect=null;this.onSave=null;this._createMemoryController=function(l){var m={domElement:l,value:dhx4._copyObj(h)};l.dhxpc_memory=m;if(typeof(window.addEventListener)==&quot;function&quot;){l.addEventListener(&quot;click&quot;,c.select,false)}else{l.attachEvent(&quot;onclick&quot;,c.select)}return m};this._findMemoryControllers=function(r){var o=r.getElementsByTagName(&quot;a&quot;),n,m,q=[];m=o.length;for(n=0;n&lt;m;n++){q.push(this._createMemoryController(o[n]))}return q};this.controllers=this._findMemoryControllers(g);this.unSelect=function(){if(a){a.domElement.className=a.domElement.className.replace(/\s.*$/i,&quot;&quot;)}a=null};this.setActiveNext=function(){var n=null,m;if(a==null){a=this.controllers[0]}else{n=this.getIndex(a);m=this.controllers.length;this.unSelect();a=(n+1&lt;m)?this.controllers[n+1]:this.controllers[0]}a.domElement.className+=&quot; dhxcp_memory_el_next&quot;;return a};this.setValue=function(m,l,n){a=l||a;if(a==null){a=this.controllers[0]}a.value.red=m.red;a.value.blue=m.blue;a.value.green=m.green;a.value.hue=m.hue;a.value.sat=m.sat;a.value.lum=m.lum;a.domElement.style.backgroundColor=&quot;rgb(&quot;+[m.red,m.green,m.blue].join(&quot;, &quot;)+&quot;)&quot;;this.setActiveNext();if((n!=false)&amp;&amp;(typeof(this.onSave)==&quot;function&quot;)){this.onSave(m)}};this.clean=function(){var m=this.controllers.length,o;for(var n=0;n&lt;m;n++){o=this.controllers[n];o.value=dhx4._copyObj(h);o.domElement.style.backgroundColor=&quot;rgb(&quot;+[h.red,h.green,h.blue].join(&quot;, &quot;)+&quot;)&quot;}this.unSelect();a=this.controllers[0]};this.getIndex=function(o){var n,m,q= -1;m=this.controllers.length;for(n=0;n&lt;m;n++){if(this.controllers[n]==o){q=n;break}}return q};this.remove=function(){var n,m;m=this.controllers.length;for(n=0;n&lt;m;n++){if(typeof(window.addEventListener)==&quot;function&quot;){this.controllers[n].domElement.removeEventListener(&quot;click&quot;,this.select,false)}else{this.controllers[n].domElement.detachEvent(&quot;onclick&quot;,this.select)}delete this.controllers[n].domElement.dhxpc_memory}delete this.onSelect;delete this.controllers;delete this.onSave}};if(window.dhx4.isIE6){dhtmlXColorPicker.prototype._cpInitFRM=function(){var a;if(!this._controllerNodes.fr_cover){a=document.createElement(&quot;IFRAME&quot;);a.className=&quot;dhxcp_frm&quot;;a.border=0;a.frameBorder=0;this._controllerNodes.fr_cover=a}if(!this.base.ahC){this.base.insertBefore(a,this._globalNode)}}}function dhtmlXSlider(g){var c=this;this.kZ={size:null,skin:null,vertical:false,min:0,max:99,value:0,step:1,margin:2,border:1,disabled:false,tooltip:false,visible:true,linkTo:undefined};this._attachedNode={};this.base=null;var a=null;if(arguments.length&gt;1){return new dhtmlXSlider(this._renderArgumets(arguments))}else{if(typeof(g)==&quot;string&quot;||(typeof(g)==&quot;object&quot;&amp;&amp;g.tagName)){return new dhtmlXSlider({parent:g})}}if(typeof(g.parent)==&quot;string&quot;){this.base=document.getElementById(g.parent)}else{this.base=g.parent}this._mergeConfig(this._readAttFormNode(this.base));this._mergeConfig(g);if(this.kZ.size==null||this.kZ.size==undefined){if(this.kZ.vertical){this.kZ.size=this.base.offsetHeight}else{this.kZ.size=this.base.offsetWidth}}var h=this.kZ.skin||window.dhx4.skin||(typeof(dhtmlx)!==&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhxslider&quot;)||&quot;dhx_skyblue&quot;;this.setSkin(h);this.base.innerHTML=&quot;&quot;;this._nodes={vI:this.base.firstChild,track:this.base.firstChild.firstChild,runner:this.base.firstChild.childNodes[1]};this._nodes.vI.onmousedown=this._nodes.track.onmousedown=this._nodes.vI.onselectstart=this._nodes.track.onselectstart=function(l){l=l||event;if(typeof(l.preventDefault)==&quot;function&quot;){l.preventDefault()}else{l.returnValue=false}return false};this.kZ.value=this._normalize(this.kZ.value);this._setOrient(this.kZ.vertical);this.Gl(this.kZ.size);this._initMover=function(l){l=l||event;a={};a.value=c.kZ.value;a.coord=(c.kZ.vertical)?l.clientY:l.clientX;if(c.kZ.disabled==false){if(typeof(window.addEventListener)==&quot;function&quot;){window.addEventListener(&quot;mousemove&quot;,c._move,false);window.addEventListener(&quot;mouseup&quot;,c._cleanMove,false)}else{document.body.attachEvent(&quot;onmousemove&quot;,c._move);document.body.attachEvent(&quot;onmouseup&quot;,c._cleanMove)}}c.callEvent(&quot;_onRunnerMouseDown&quot;,[]);return false};this._move=function(q){q=q||event;var o=(c.kZ.vertical)?c._nodes.runner.offsetHeight:c._nodes.runner.offsetWidth;var m=c.kZ.max-c.kZ.min;var l=(c.kZ.vertical)?q.clientY:q.clientX;var n=a.value+(l-a.coord)*m/(c.kZ.size-o);c.setValue(Math.round(n),true)};this._cleanMove=function(l){if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;mousemove&quot;,c._move,false);window.removeEventListener(&quot;mouseup&quot;,c._cleanMove,false)}else{document.body.detachEvent(&quot;onmousemove&quot;,c._move);document.body.detachEvent(&quot;onmouseup&quot;,c._cleanMove)}a=null;c.callEvent(&quot;onSlideEnd&quot;,[c.kZ.value]);c.callEvent(&quot;_onRunnerMouseUp&quot;,[])};this._doOnSetValue=function(q){if(a){return false}q=q||event;var o=(c.kZ.vertical)?(q.offsetY||q.layerY):(q.offsetX||q.layerX);var n=(c.kZ.vertical)?c._nodes.runner.offoffsetHeightsetHe:c._nodes.runner.offsetWidth;var l=c.kZ.max-c.kZ.min;var m=o*l/(c.kZ.size)+c.kZ.min;c.setValue(Math.round(m),true);if(!a){c._initMover(q)}return false};this._doOnChangeInput=function(m){m=m||event;var l=m.target||m.srcElement;c.setValue(l.value)};this._doOnKeyDown=function(m){m=m||event;var l=m.target||m.srcElement;if(m.keyCode==13){c.setValue(l.value)}};this._attachEvents(this._nodes);this.unload=function(){dhx4._eventable(this,&quot;clear&quot;);this._detachNode();this._detachEvents(this._nodes);this.base.removeChild(this._nodes.vI);this._nodes.vI.onmousedown=this._nodes.track.onmousedown=this._nodes.vI.onselectstart=this._nodes.track.onselectstart=null;delete this._nodes.vI;delete this._nodes.track;delete this._nodes.max;delete this._nodes.min;delete this._nodes.runner;if(/\s?dhtmlxslider_\S*/.test(this.base.className)){this.base.className=this.base.className.replace(/\s?dhtmlxslider_\S*/,&quot;&quot;)}for(var l in this){this[l]=null}c=null};dhx4._eventable(this);if(this.kZ.disabled){this.disable()}if(this.kZ.tooltip){this.enableTooltip()}if(!this.kZ.visible){this.hide()}if(this.kZ.linkTo){this.linkTo(this.kZ.linkTo)}return this}dhtmlXSlider.prototype._setOrient=function(a){a=a||false;if(/\s?dhxsl_cont_hr/i.test(this._nodes.vI.className)){this._nodes.vI.className=this._nodes.vI.className.replace(/\s?dhxsl_cont_hr/i,&quot;&quot;)}if(/\s?dhxsl_cont_vr/i.test(this._nodes.vI.className)){this._nodes.vI.className=this._nodes.vI.className.replace(/\s?dhxsl_cont_vr/i,&quot;&quot;)}if(a){this._nodes.vI.className+=&quot; dhxsl_cont_vr&quot;}else{this._nodes.vI.className+=&quot; dhxsl_cont_hr&quot;}};dhtmlXSlider.prototype._attachEvents=function(a){if(typeof(window.addEventListener)==&quot;function&quot;){a.runner.addEventListener(&quot;mousedown&quot;,this._initMover,false);a.vI.addEventListener(&quot;mousedown&quot;,this._doOnSetValue,false)}else{a.runner.attachEvent(&quot;onmousedown&quot;,this._initMover);a.vI.attachEvent(&quot;onmousedown&quot;,this._doOnSetValue)}};dhtmlXSlider.prototype._detachEvents=function(a){if(typeof(window.addEventListener)==&quot;function&quot;){a.runner.removeEventListener(&quot;mousedown&quot;,this._initMover,false);a.vI.removeEventListener(&quot;mousedown&quot;,this._doOnSetValue,false)}else{a.runner.detachEvent(&quot;onmousedown&quot;,this._initMover);a.vI.detachEvent(&quot;onmousedown&quot;,this._doOnSetValue)}};dhtmlXSlider.prototype._mergeConfig=function(c){for(var a in c){switch(a.toLowerCase()){case &quot;size&quot;:case &quot;min&quot;:case &quot;max&quot;:case &quot;value&quot;:case &quot;step&quot;:this.kZ[a]=parseInt(c[a]);break;case &quot;vertical&quot;:case &quot;tooltip&quot;:case &quot;disabled&quot;:case &quot;visible&quot;:this.kZ[a]=dhx4.s2b(c[a]);break;case &quot;parent&quot;:continue;break;default:this.kZ[a]=c[a]}}};dhtmlXSlider.prototype._readAttFormNode=function(h){var n=h.attributes,a=n.length,g,m={},c;for(g=0;g&lt;a;g++){c=n[g];switch(c.name.toLowerCase()){case &quot;size&quot;:case &quot;min&quot;:case &quot;max&quot;:case &quot;value&quot;:case &quot;step&quot;:m[c.name]=parseInt(c.value);break;case &quot;skin&quot;:m.skin=c.value;break;case &quot;vertical&quot;:case &quot;disabled&quot;:case &quot;visible&quot;:m[c.name]=dhx4.s2b(c.value);break;case &quot;linkto&quot;:m.linkTo=c.value;break;case &quot;tooltip&quot;:m.tooltip=dhx4.s2b(c.value);break}}return m};dhtmlXSlider.prototype._renderArgumets=function(a){var h={},g,c;c=a.length;for(g=0;g&lt;c;g++){switch(g){case 0:h.parent=a[g];break;case 1:h.size=a[g];break;case 2:h.skin=a[g];break;case 3:h.vertical=a[g];break;case 4:h.min=a[g];break;case 5:h.max=a[g];break;case 6:h.value=a[g];break;case 7:h.step=a[g];break}}return h};dhtmlXSlider.prototype._skinCollection={dhx_skyblue:true,dhx_web:true,dhx_terrace:true};dhtmlXSlider.prototype._indexOf=function(a,h){var g,c,m= -1;c=a.length;for(g=c;g&gt;=0;g--){if(a[g]==h){m=g;break}}return m};dhtmlXSlider.prototype._refreshRunner=function(){var a,c;if(this.kZ.vertical){a=this._nodes.vI.offsetHeight-this._nodes.runner.offsetHeight;c=this._getCoord(a);this._nodes.runner.style.top=c+this.kZ.border+&quot;px&quot;;this._nodes.runner.style.left=Math.round((this._nodes.vI.offsetWidth-this._nodes.runner.offsetWidth)/2)+&quot;px&quot;}else{a=this._nodes.vI.offsetWidth-this._nodes.runner.offsetWidth;c=this._getCoord(a);this._nodes.runner.style.left=c+this.kZ.border+&quot;px&quot;;this._nodes.runner.style.top=Math.round((this._nodes.vI.offsetHeight-this._nodes.runner.offsetHeight)/2)+&quot;px&quot;}};dhtmlXSlider.prototype._setValueByCoord=function(h){var a=dhx4.absLeft(this._nodes.vI),l=dhx4.absTop(this._nodes.vI),g,c;if(this.kZ.vertical){c=(h.y-l-this._nodes.runner.offsetHeight/2)/(this._nodes.vI.offsetHeight-this._nodes.runner.offsetHeight)}else{c=(h.x-a-this._nodes.runner.offsetWidth/2)/(this._nodes.vI.offsetWidth-this._nodes.runner.offsetWidth)}g=Math.round((this.kZ.max-this.kZ.min)*c+this.kZ.min);this.setValue(g,true)};dhtmlXSlider.prototype._getCoord=function(a){var g=this.kZ;var c=(g.value-g.min)/(g.max-g.min);return Math.round(a*c)};dhtmlXSlider.prototype._normalize=function(a){a=parseInt(a);return Math.round(a/this.kZ.step)*this.kZ.step};dhtmlXSlider.prototype._attachNode=function(c){var a=c.tagName.toLowerCase();if(!a){return}this._attachedNode.node=c;switch(a){case &quot;input&quot;:if(typeof(window.addEventListener)==&quot;function&quot;){c.addEventListener(&quot;change&quot;,this._doOnChangeInput,false);c.addEventListener(&quot;keydown&quot;,this._doOnKeyDown,false)}else{c.attachEvent(&quot;onchange&quot;,this._doOnChangeInput);c.attachEvent(&quot;onkeydown&quot;,this._doOnKeyDown)}this._attachedNode.setValue=function(g){c.value=g};break;default:this._attachedNode.setValue=function(g){c.innerHTML=g}}this._attachedNode.setValue(this.kZ.value)};dhtmlXSlider.prototype._detachNode=function(){var c=this._attachedNode.node;if(!c){return}var a=c.tagName;switch(a){case &quot;input&quot;:if(typeof(window.addEventListener)==&quot;function&quot;){c.removeEventListener(&quot;change&quot;,this._doOnChangeInput,false);c.removeEventListener(&quot;keydown&quot;,this._doOnChangeInput,false)}else{c.detachEvent(&quot;change&quot;,this._doOnChangeInput);c.detachEvent(&quot;keydown&quot;,this._doOnChangeInput)}break}delete this._attachedNode.node;delete this._attachedNode.setValue};dhtmlXSlider.prototype.Gl=function(a){a=parseInt(a);if(!isNaN(a)){if(this.kZ.vertical){if(this._nodes.vI.style.width){delete this._nodes.vI.style.width}this._nodes.vI.style.height=a-this.kZ.margin+&quot;px&quot;}else{if(this._nodes.vI.style.height){delete this._nodes.vI.style.height}this._nodes.vI.style.width=a-this.kZ.margin+&quot;px&quot;}this._refreshRunner()}};dhtmlXSlider.prototype.setSkin=function(l){l=l.toLowerCase();var g,c= -1,a,h=&quot;dhtmlxslider&quot;;g=this.base.className.match(/\S\w+/ig);if(g instanceof Array){for(a in this._skinCollection){if(c== -1){c=this._indexOf(g,h+&quot;_&quot;+a)}else{break}}c=(c== -1)?g.length:c}else{g=[];c=0}g[c]=h+&quot;_&quot;+l;this.base.className=g.join(&quot; &quot;);this.kZ.skin=l;if(this._nodes){this._refreshRunner()}};dhtmlXSlider.prototype.setValue=function(a,c){a=parseInt(a);c=c||false;if(!isNaN(a)){a=this._normalize(a);a=Math.max(this.kZ.min,a);a=Math.min(this.kZ.max,a);if(this.kZ.value!==a){this.kZ.value=a;this._refreshRunner();if(this.kZ.tooltip){this._nodes.vI.title=this.kZ.value}if(c){this.callEvent(&quot;onChange&quot;,[this.kZ.value,this])}}}if(typeof(this._attachedNode.setValue)==&quot;function&quot;){this._attachedNode.setValue(this.kZ.value)}};dhtmlXSlider.prototype.getValue=function(){return this.kZ.value};dhtmlXSlider.prototype.disable=function(g){g=(g==false)?false:true;var c=null;if(g){for(var a in this._nodes){if(a==&quot;cont&quot;){continue}c=new RegExp(&quot;\\s?dhxsl_&quot;+a+&quot;_dis&quot;,&quot;i&quot;);if(!c.test(this._nodes[a].className)){this._nodes[a].className+=&quot; dhxsl_&quot;+a+&quot;_dis&quot;}}this.kZ.disabled=true}else{this.enable()}};dhtmlXSlider.prototype.enable=function(){var c;for(var a in this._nodes){if(a==&quot;cont&quot;){continue}c=new RegExp(&quot;\\s?dhxsl_&quot;+a+&quot;_dis&quot;,&quot;i&quot;);if(c.test(this._nodes[a].className)){this._nodes[a].className=this._nodes[a].className.replace(c,&quot;&quot;)}}this.kZ.disabled=false};dhtmlXSlider.prototype.isEnabled=function(){return!this.kZ.disabled};dhtmlXSlider.prototype.disableTooltip=function(){this._nodes.vI.removeAttribute(&quot;title&quot;);this.kZ.tooltip=false};dhtmlXSlider.prototype.enableTooltip=function(a){if(typeof(a)==&quot;undefined&quot;){a=true}else{a=dhx4.s2b(a)}if(a){this._nodes.vI.title=this.kZ.value;this.kZ.tooltip=true}else{this.disableTooltip()}};dhtmlXSlider.prototype.setMax=function(a){a=parseInt(a);if(!isNaN(a)&amp;&amp;this.kZ.min&lt;a){this.kZ.max=a;this.setValue(this.kZ.value)}};dhtmlXSlider.prototype.getMax=function(){return this.kZ.max};dhtmlXSlider.prototype.setMin=function(a){a=parseInt(a);if(!isNaN(a)&amp;&amp;this.kZ.max&gt;a){this.kZ.min=a;this.setValue(this.kZ.value)}};dhtmlXSlider.prototype.getMin=function(){return this.kZ.min};dhtmlXSlider.prototype.setStep=function(a){a=parseInt(a);var c=this.kZ.max-this.kZ.min;if(!isNaN(a)&amp;&amp;a&lt;c){this.kZ.step=a;this.setValue(this.kZ.value)}};dhtmlXSlider.prototype.getStep=function(){return this.kZ.step};dhtmlXSlider.prototype.show=function(){if(/\s?dhxsl_hidden/i.test(this._nodes.vI.className)){this._nodes.vI.className=this._nodes.vI.className.replace(/\s?dhxsl_hidden/i,&quot;&quot;)}this.kZ.visible=true};dhtmlXSlider.prototype.hide=function(){if(!/\s?dhxsl_hidden/i.test(this._nodes.vI.className)){this._nodes.vI.className+=&quot; dhxsl_hidden&quot;}this.kZ.visible=false};dhtmlXSlider.prototype.Yi=function(){return this.kZ.visible};dhtmlXSlider.prototype.linkTo=function(a){if(typeof(a)==&quot;string&quot;){a=document.getElementById(a)}if(this._attachedNode.node){this._detachNode()}this._attachNode(a)};function dhtmlXPopup(g){var h=this;this.kZ=g||{};g=null;this.mode=(this.kZ.mode||&quot;bottom&quot;);this.kZ.zi=window.dhx4.newId();this.kZ.isIE=(navigator.userAgent.indexOf(&quot;MSIE&quot;)&gt;=0);this.p=document.createElement(&quot;DIV&quot;);this.p.style.display=&quot;none&quot;;this.p.innerHTML=&quot;<DIV class="dhx_popup_area&quot;+(this.kZ.isIE?&quot; dhx_popup_area_ie&quot;:&quot;&quot;)+&quot;"><TABLE cellspacing="0" cellpadding="0" border="0" class="dhx_popup_table">&lt;tbody&gt;&lt;/tbody&gt;</TABLE></DIV>&quot;;document.body.appendChild(this.p);this.skinParams={dhx_terrace:{t0:19,t1:9,arM:19,t3:9},dhx_skyblue:{t0:12,t1:9,arM:12,t3:9},dhx_web:{t0:12,t1:9,arM:12,t3:9}};this.p.onclick=function(l){l=l||event;h._clearClick=true;if(h._nodeObj!=null){h.callEvent(&quot;onContentClick&quot;,[]);return true}var a=(l.target||l.srcElement);var m=null;while(a!=h.p&amp;&amp;a!=null){if(typeof(a._idd)!=&quot;undefined&quot;&amp;&amp; !a._isSeparator){m=a._idd;a=null}else{a=a.parentNode}}a=null;if(m!=null){h.callEvent(&quot;onClick&quot;,[m]);if(h!=null&amp;&amp;h.Yi!=null&amp;&amp;h.Yi()&amp;&amp;h.callEvent(&quot;onBeforeHide&quot;,[&quot;select&quot;,l,m])===true){l.cancelBubble=true;h.hide()}}};this.separator=&quot;DHXSEP_&quot;+window.dhx4.newId();this.tpl=[];this._setTemplate=function(a){this.tpl=a.split(&quot;,&quot;)};this.show=function(l){var a=null;if(arguments.length==1){if(!l){l=this.kZ.id[0]}else{if(!this._idExists(l)){return}}if(this.kZ.toolbar){a=this.kZ.toolbar._getItemDim(l)}if(this.kZ.ribbon){a=this.kZ.ribbon._getItemDim(l)}if(this.kZ.form){a=this.kZ.form._getItemDim(l)}}else{if(arguments.length==4){this._clearClick=true;a={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]};l=null}}if(!a){return}this.p.style.visibility=&quot;hidden&quot;;this.p.style.display=&quot;&quot;;this._setPos(a);this.p.style.zIndex=window.dhx4.zim.reserve(this.kZ.zi);this.p.style.visibility=&quot;visible&quot;;this._lastId=l;this.callEvent(&quot;onShow&quot;,[l])};this._setPos=function(I,n){var v=I.left;var s=I.top;var C=I.width;var L=I.height;this._posData={left:v,top:s,width:C,height:L};var N=window.dhx4.screenDim();var F=n||this.mode;if(typeof(n)==&quot;undefined&quot;){n=false}var P={top:(s-this.p.offsetHeight)-N.top,bottom:N.bottom-(s+L+this.p.offsetHeight),left:v-this.p.offsetWidth-N.left,right:N.right-(v+C+this.p.offsetWidth)};if(!n&amp;&amp;P[F]&lt;0){var J=this._getAvailPos(F,P);if(J!==false){this._setPos(I,J);return}}if(F==&quot;top&quot;||F==&quot;bottom&quot;){var D=this.skinParams[this.kZ.skin].arM;var A=this.skinParams[this.kZ.skin].t3;var r=Math.round(this.p.offsetWidth/2);var a=Math.round(this.p.lastChild.offsetWidth/2);if(v&lt;N.left){var M=Math.min(v+C,N.left);C=v+C-M;v=M}if(v+C&gt;N.right){C=N.right-v}var u=Math.round(v+C/2);var m=u-r;var K=u-D-a;var q=u+a+D-this.p.offsetWidth;if(m&lt;N.left-A){m=Math.min(N.left-A,K)}else{if(m+this.p.offsetWidth&gt;N.right+A){m=Math.max(q,N.right+A-this.p.offsetWidth)}}this.p.style.left=m+&quot;px&quot;;this.p.style.top=(F==&quot;top&quot;?s-this.p.offsetHeight:s+L)+&quot;px&quot;;u=u-m-a;this.p.lastChild.className=&quot;dhx_popup_arrow dhx_popup_arrow_&quot;+F;this.p.lastChild.style.top=(F==&quot;top&quot;?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+&quot;px&quot;;this.p.lastChild.style.left=u+&quot;px&quot;}if(F==&quot;left&quot;||F==&quot;right&quot;){var D=this.skinParams[this.kZ.skin].t0;var A=this.skinParams[this.kZ.skin].t1;var o=Math.round(this.p.offsetHeight/2);var S=Math.round(this.p.lastChild.offsetHeight/2);if(s&lt;N.top){var l=Math.min(s+L,N.top);L=s+L-l;s=l}if(s+L&gt;N.bottom){L=N.bottom-s}var u=Math.round(s+L/2);var H=u-o;var Q=u-D-S;var O=u+S+D-this.p.offsetHeight;if(H&lt;N.top-A){H=Math.min(N.top-A,Q)}else{if(H+this.p.offsetHeight&gt;N.bottom+A){H=Math.max(O,N.bottom+A-this.p.offsetHeight)}}this.p.style.left=(F==&quot;left&quot;?v-this.p.offsetWidth:v+C)+&quot;px&quot;;this.p.style.top=H+&quot;px&quot;;u=u-H-S;this.p.lastChild.className=&quot;dhx_popup_arrow dhx_popup_arrow_&quot;+F;this.p.lastChild.style.left=(F==&quot;left&quot;?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+&quot;px&quot;;this.p.lastChild.style.top=u+&quot;px&quot;}if(this._IEDisp&amp;&amp;this._nodeId!=null){var E=document.getElementById(this._nodeId);window.setTimeout(function(){E.style.visibility=&quot;visible&quot;;E=null},1)}};this._getAvailPos=function(s,r){var m={top:[&quot;bottom&quot;,&quot;right&quot;,&quot;left&quot;],bottom:[&quot;top&quot;,&quot;right&quot;,&quot;left&quot;],left:[&quot;right&quot;,&quot;bottom&quot;,&quot;top&quot;],right:[&quot;left&quot;,&quot;bottom&quot;,&quot;top&quot;]};var n=null;for(var o=0;o&lt;m[s].length;o++){if(n==null&amp;&amp;r[m[s][o]]&gt;0){n=m[s][o]}}if(n==null){n=&quot;bottom&quot;;for(var l in r){if(r[l]&gt;r[n]){n=l}}}if(n==s){return false}return n};this._repaint=function(){if(this.Yi()){this._setPos(this._posData)}};this.clear=function(){if(this._nodeObj){if(this.kZ.isIE&amp;&amp;typeof(dhtmlXLayoutObject)!=&quot;undefined&quot;&amp;&amp;this._nodeObj instanceof dhtmlXLayoutObject){this.p.onmousedown=null}if(this._nodeObj.unload){this._nodeObj.unload()}else{if(this._nodeObj.destruct){this._nodeObj.destruct()}}this._nodeObj=this._nodeId=null;if(this._nodeObjEv!=null){for(var l=0;l&lt;this._nodeObjEv.length;l++){this.detachEvent(this._nodeObjEv[l])}this._nodeObjEv=null}}if(this._IEHoverInited){this._IEHoverClear()}var a=this.p.firstChild.firstChild.firstChild;while(a.childNodes.length&gt;0){a.removeChild(a.lastChild)}a=null;this.itemData={}};this.hide=function(){if(this.p.style.display!=&quot;none&quot;){this.p.style.display=&quot;none&quot;;window.dhx4.zim.clear(this.kZ.zi);var a=this._lastId;this._lastId=null;this.callEvent(&quot;onHide&quot;,[a])}};this.Yi=function(){return(this.p.style.display==&quot;&quot;)};this.itemData={};this.getItemData=function(a){if(!a){return this.itemData}if(this.itemData[a]){return this.itemData[a]}return{}};this.setSkin=function(a){this.kZ.skin=a;this.p.className=&quot;dhx_popup_&quot;+this.kZ.skin;if(this._nodeObj!=null&amp;&amp;typeof(this._nodeObj.setSkin)==&quot;function&quot;){this._nodeObj.setSkin(this.kZ.skin)}this._repaint()};this.attachList=function(m,u){this._setTemplate(m);this.clear();var n=this.p.firstChild.firstChild.firstChild;for(var s=0;s&lt;u.length;s++){var o=document.createElement(&quot;TR&quot;);if(u[s]!=this.separator){if(typeof(u[s].id)==&quot;undefined&quot;||u[s].id==null){o._idd=window.dhx4.newId();while(this.itemData[o._idd]!=null){o._idd=window.dhx4.newId()}}else{o._idd=u[s].id}this.itemData[o._idd]=u[s]}n.appendChild(o);if(u[s]==this.separator){o.className=&quot;dhx_popup_sep&quot;;o._isSeparator=true;var v=document.createElement(&quot;TD&quot;);v.className=&quot;dhx_popup_sep&quot;;v.colSpan=this.tpl.length;v.innerHTML=&quot;<DIV class="dhx_popup_sep"> </DIV>&quot;;o.appendChild(v);v=null}else{for(var a=0;a&lt;this.tpl.length;a++){var l=&quot;dhx_popup_td&quot;;if(this._IEFirstLast&amp;&amp;(this.tpl.length==1||a==0||a==this.tpl.length-1)){if(this.tpl.length==1){l+=&quot; dhx_popup_td_single&quot;}else{l+=(a==0?&quot; dhx_popup_td_first&quot;:&quot; dhx_popup_td_last&quot;)}}var v=document.createElement(&quot;TD&quot;);v.className=l;v.innerHTML=u[s][this.tpl[a]]||&quot; &quot;;o.appendChild(v);v=null}if(this._IEHover){o._IEHover=true;if(!this._IEHoverInited){this._IEHoverInit()}}}o=null}n=null;this._repaint()};this._attachNode=function(n,m){this.clear();this._nodeId=&quot;dhxpopup_node_&quot;+window.dhx4.newId();var a=this.p.firstChild.firstChild.firstChild;var l=document.createElement(&quot;TR&quot;);l.className=&quot;dhxnode&quot;;a.appendChild(l);var o=document.createElement(&quot;TD&quot;);o.className=&quot;dhx_popup_td&quot;;o.innerHTML=&quot;&quot;;if(m.width){o.firstChild.style.width=m.width+&quot;px&quot;}if(m.height){o.firstChild.style.height=m.height+&quot;px&quot;}l.appendChild(o);o=l=a=null;if(typeof(this[&quot;_attach_init_&quot;+n])==&quot;function&quot;){this[&quot;_attach_init_&quot;+n](m);this._enableIEVFix()}this._repaint();return this._nodeObj};this.unload=function(){if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;click&quot;,this._doOnClick,false);window.removeEventListener(&quot;keyup&quot;,this._doOnKeyUp,false);window.removeEventListener(&quot;unload&quot;,this._doOnUnload,false)}else{document.body.detachEvent(&quot;onclick&quot;,this._doOnClick,false);document.body.detachEvent(&quot;onkeyup&quot;,this._doOnKeyUp,false);document.body.detachEvent(&quot;onunload&quot;,this._doOnUnload,false)}this.clear();this._doOnClick=null;this._doOnUnload=null;this._doOnKeyUp=null;if(this.kZ.toolbarEvent!=null&amp;&amp;this.kZ.toolbar!=null){if(this.kZ.toolbar.detachEvent!=null){this.kZ.toolbar.detachEvent(this.kZ.toolbarEvent)}else{this.kZ.toolbar._getItemDim=null}}if(this.kZ.ribbonEvent!=null&amp;&amp;this.kZ.ribbon!=null){if(this.kZ.ribbon.detachEvent!=null){this.kZ.ribbon.detachEvent(this.kZ.ribbonEvent)}else{this.kZ.ribbon._getItemDim=null}}if(this.kZ.slider){for(var a=0;a&lt;this.kZ.slider_events.length;a++){this.kZ.slider.detachEvent(this.kZ.slider_events[a])}this.kZ.slider_events=null;this._sliderShow=this._sliderHide=null;this.kZ.slider=null}window.dhx4._eventable(this,&quot;clear&quot;);this.attachList=this.attachAccordion=this.attachCalendar=this.attachForm=this.attachGrid=this.attachLayout=this.attachTabbar=this.attachTree=this.attachHTML=this.attachObject=this._attachNode=null;this.show=this.hide=this.Yi=this._setTemplate=this._repaint=this._setPos=this.getItemData=this.clear=this._idExists=this._doOnToolbarClick=this._doOnRibbonClick=this.setSkin=null;this.tpl=this.itemData=this.separator=this.mode=null;this._clearClick=this._lastId=this._posData=this.skinParams=this.skinParent=null;this.p.onclick=null;this.p.parentNode.removeChild(this.p);this.p=null;this.kZ.toolbar=this.kZ.toolbarEvent=this.kZ.ribbon=this.kZ.ribbonEvent=this.kZ.form=this.kZ.id=null;this.kZ=null;this._IEHover=this._IEHoverTM=this._IEHoverInit=this._IEHoverClear=this._IEHoverRender=this._IEHoverInited=null;this._IEDisp=null;this.unload=null;h=null};window.dhx4._eventable(this);this._doOnClick=function(o){o=o||event;if(h._clearClick){h._clearClick=false;return}if(h.kZ.form!=null){var q;var l=(o.target||o.srcElement);if((l.tagName||&quot;&quot;).toLowerCase()==&quot;option&quot;){l=l.parentNode}if(l.className!=null&amp;&amp;l.className.search(&quot;dhxform&quot;)&gt;=0){if(l.parentNode!=null&amp;&amp;l.parentNode.parentNode!=null&amp;&amp;l.parentNode.parentNode._idd!=null){q=l.parentNode.parentNode._idd;if(l.parentNode.parentNode.wT==&quot;ra&quot;){q=[l.parentNode.parentNode._group,l.parentNode.parentNode._value]}}}else{var a=true;var m=false;while(a&amp;&amp; !m){var n=(l.className||&quot;&quot;).toLowerCase();if(n.length&gt;0){m=(n==&quot;dhxform_btn&quot;||n.search(/dhxeditor_inside/gi)&gt;=0||n==&quot;dhxcombo_input&quot;||n.search(/dhxcombolist/gi)&gt;=0)}l=l.parentNode;a=(l!=null)}if(m){return}}l=null;if(q!=null&amp;&amp;h._idExists(q)){return}}if(h.Yi()&amp;&amp;h.callEvent(&quot;onBeforeHide&quot;,[&quot;click&quot;,o])===true){h.hide()}};this._doOnKeyUp=function(a){a=a||event;if(a.keyCode==27){if(h.Yi()&amp;&amp;h.callEvent(&quot;onBeforeHide&quot;,[&quot;esc&quot;,a])===true){h.hide()}}};this._doOnUnload=function(){h.unload()};if(typeof(window.addEventListener)==&quot;function&quot;){window.addEventListener(&quot;click&quot;,this._doOnClick,false);window.addEventListener(&quot;keyup&quot;,this._doOnKeyUp,false);window.addEventListener(&quot;unload&quot;,this._doOnUnload,false)}else{document.body.attachEvent(&quot;onclick&quot;,this._doOnClick,false);document.body.attachEvent(&quot;onkeyup&quot;,this._doOnKeyUp,false);document.body.attachEvent(&quot;onunload&quot;,this._doOnUnload,false)}this._idExists=function(m){var a=false;for(var l=0;l&lt;this.kZ.id.length;l++){if(this.kZ.id[l]instanceof Array){a=a||(this.kZ.id[l][0]==m[0]&amp;&amp;this.kZ.id[l][1]==m[1])}else{a=a||this.kZ.id[l]==m}}return a};this._IEDisp=(this.kZ.isIE&amp;&amp;(navigator.userAgent.search(&quot;MSIE 6.0&quot;)&gt;=0||document.compatMode!=&quot;CSS1Compat&quot;));this._IEHover=(this.kZ.isIE&amp;&amp;navigator.userAgent.search(&quot;MSIE 6.0&quot;)&gt;=0);if(this._IEHover){this._IEHoverInit=function(){this.p.onmouseover=function(){var a=event.srcElement;while(a!=this&amp;&amp;a._IEHover!=true){a=a.parentNode}if(a._IEHover){if(h._IEHoverTM){window.clearTimeout(h._IEHoverTM)}if(h._lastIEHover==a){return}h._IEHoverRender(a);a=null}};this.p.onmouseout=function(){if(h._IEHoverTM){window.clearTimeout(h._IEHoverTM)}h._IEHoverTM=window.setTimeout(function(){h._IEHoverRender(null)},1)};this._IEHoverRender=function(a){if(this._lastIEHover!=null){if(this._lastIEHover.className.search(/tr_hover/gi)&gt;=0){this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,&quot;&quot;);this._lastIEHover=null}}if(a!=null&amp;&amp;a.className.search(/tr_hover/gi)&lt;0){a.className+=&quot; tr_hover&quot;;h._lastIEHover=a}};this._IEHoverInited=true};this._IEHoverClear=function(){this.p.onmouseover=null;this.p.onmouseout=null;this._IEHoverInited=false}}this._IEFirstLast=(this.kZ.isIE&amp;&amp;navigator.userAgent.search(/MSIE [6,7,8]\.0/i)&gt;=0);this._enableIEVFix=function(){if(this.kZ.isIE&amp;&amp;navigator.userAgent.search(&quot;MSIE 6.0&quot;)&gt;=0){var l=this.attachEvent(&quot;onHide&quot;,function(){document.getElementById(this._nodeId).style.visibility=&quot;hidden&quot;});var a=this.attachEvent(&quot;onShow&quot;,function(){document.getElementById(this._nodeId).style.visibility=&quot;visible&quot;});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(l,a)}};if(typeof(window.dhtmlXToolbarObject)!=&quot;undefined&quot;&amp;&amp;this.kZ.toolbar!=null&amp;&amp;this.kZ.toolbar instanceof window.dhtmlXToolbarObject&amp;&amp;this.kZ.id!=null){if(!(this.kZ.id instanceof Array)){this.kZ.id=[this.kZ.id]}this.skinParent=this.kZ.toolbar.kZ.skin;this._doOnToolbarClick=function(l){for(var a=0;a&lt;h.kZ.id.length;a++){if(l==h.kZ.id[a]){if(l!=h._lastId){h.show(l);h._clearClick=true}}}};if(typeof(dhtmlXToolbarObject.prototype._getItemDim)==&quot;undefined&quot;){dhtmlXToolbarObject.prototype._getItemDim=function(m){var a=this.objPull[this.idPrefix+m];var l={left:window.dhx4.absLeft(a.obj),top:window.dhx4.absTop(a.obj),width:a.obj.offsetWidth+(a.arw?a.arw.offsetWidth:0),height:a.obj.offsetHeight};a=null;return l}}this.kZ.toolbarEvent=this.kZ.toolbar.attachEvent(&quot;onClick&quot;,this._doOnToolbarClick)}if(typeof(window.dhtmlXRibbon)!=&quot;undefined&quot;&amp;&amp;this.kZ.ribbon!=null&amp;&amp;this.kZ.ribbon instanceof window.dhtmlXRibbon&amp;&amp;this.kZ.id!=null){if(!(this.kZ.id instanceof Array)){this.kZ.id=[this.kZ.id]}this.skinParent=this.kZ.ribbon.kZ.skin;this._doOnRibbonClick=function(l){for(var a=0;a&lt;h.kZ.id.length;a++){if(l==h.kZ.id[a]){if(l!=h._lastId){h.show(l);h._clearClick=true}}}};if(typeof(dhtmlXRibbon.prototype._getItemDim)==&quot;undefined&quot;){dhtmlXRibbon.prototype._getItemDim=function(m){var a=this._items[m].base;var l={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};a=null;return l}}this.kZ.ribbonEvent=this.kZ.ribbon.attachEvent(&quot;_showPopup&quot;,this._doOnRibbonClick)}if(typeof(window.dhtmlXForm)!=&quot;undefined&quot;&amp;&amp;this.kZ.form!=null&amp;&amp;this.kZ.form instanceof window.dhtmlXForm&amp;&amp;this.kZ.id!=null){if(!(this.kZ.id instanceof Array)){this.kZ.id=[this.kZ.id]}if(!this.kZ.mode){this.mode=&quot;right&quot;}this.skinParent=this.kZ.form.skin;if(typeof(dhtmlXForm.prototype._getItemDim)==&quot;undefined&quot;){dhtmlXForm.prototype._getItemDim=function(a,l){return this.doWithItem(a,&quot;_getDim&quot;)};for(var c in{input:1,password:1,select:1,multiselect:1,checkbox:1,radio:1,button:1,combo:1,btn2state:1,calendar:1,colorpicker:1,editor:1}){if(dhtmlXForm.prototype.items[c]!=null){dhtmlXForm.prototype.items[c]._getDim=function(l){var a=l;if({ta:true,pw:true,se:true,calendar:true,colorpicker:1,editor:true}[l.wT]){a=l.childNodes[l._ll?1:0].childNodes[0]}if({ch:true,ra:true,btn2state:true}[l.wT]){a=l.childNodes[l._ll?1:0].childNodes[1]}if({bt:true}[l.wT]){a=l.firstChild}if({combo:true}[l.wT]){a=l._combo.zZ.firstChild}var m={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};a=null;return m}}}}}if(typeof(window.dhtmlXSlider)!=&quot;undefined&quot;&amp;&amp;this.kZ.slider!=null&amp;&amp;this.kZ.slider instanceof window.dhtmlXSlider){if(!this.kZ.mode){this.mode=&quot;top&quot;}this.kZ.slider_tm=null;this._sliderShow=function(){if(h.kZ.slider_tm){window.clearTimeout(h.kZ.slider_tm)}var a=h.kZ.slider._nodes.runner;var l={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};h.show(l.left,l.top,l.width,l.height)};this._sliderHide=function(){h.kZ.slider_tm=window.setTimeout(function(){h.hide()},200)};this.kZ.slider_events=[this.kZ.slider.attachEvent(&quot;_onRunnerMouseDown&quot;,this._sliderShow),this.kZ.slider.attachEvent(&quot;_onRunnerMouseUp&quot;,this._sliderHide),this.kZ.slider.attachEvent(&quot;onChange&quot;,this._sliderShow)]}this.setSkin(this.skinParent||this.kZ.skin||window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhx_popup&quot;)||&quot;dhx_skyblue&quot;);return this}dhtmlXPopup.prototype.attachObject=function(a){return this._attachNode(&quot;object&quot;,{obj:a})};dhtmlXPopup.prototype._attach_init_object=function(a){this._nodeObj=(typeof(a.obj)==&quot;string&quot;?document.getElementById(a.obj):a.obj);a.obj=null;document.getElementById(this._nodeId).appendChild(this._nodeObj);this._nodeObj.style.display=&quot;&quot;;this._nodeObj.style.visibility=&quot;visible&quot;};dhtmlXPopup.prototype.attachHTML=function(a){return this._attachNode(&quot;html&quot;,{html:a})};dhtmlXPopup.prototype._attach_init_html=function(a){document.getElementById(this._nodeId).innerHTML=a.html;this._nodeObj={text:a.html}};dhtmlXPopup.prototype.attachForm=function(a){return this._attachNode(&quot;form&quot;,{struct:a})};dhtmlXPopup.prototype._attach_init_form=function(c){var a=this;this._nodeObj=new dhtmlXForm(this._nodeId,c.struct);this._nodeObj.setSkin(this.kZ.skin);this._nodeObj.attachEvent(&quot;_onBeforeEditorAccess&quot;,function(){a._clearClick=true})};dhtmlXPopup.prototype.attachCalendar=function(){return this._attachNode(&quot;calendar&quot;,{})};dhtmlXPopup.prototype._attach_init_calendar=function(a){this._nodeObj=new dhtmlXCalendarObject(this._nodeId);this._nodeObj.setSkin(this.kZ.skin);this._nodeObj.show()};dhtmlXPopup.prototype.attachGrid=function(c,a){return this._attachNode(&quot;grid&quot;,{width:c||400,height:a||200})};dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId);this._nodeObj.setSkin(this.kZ.skin)};dhtmlXPopup.prototype.attachTree=function(g,c,a){return this._attachNode(&quot;tree&quot;,{width:g||400,height:c||200,fO:a||0})};dhtmlXPopup.prototype._attach_init_tree=function(a){this._nodeObj=new dhtmlXTreeObject(this._nodeId,&quot;100%&quot;,&quot;100%&quot;,(a.fO))};dhtmlXPopup.prototype.attachLayout=function(c,a,g){return this._attachNode(&quot;layout&quot;,{width:c||400,height:a||200,aiw:g||&quot;3L&quot;})};dhtmlXPopup.prototype._attach_init_layout=function(a){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,a.aiw,this.kZ.skin)};dhtmlXPopup.prototype.attachAccordion=function(g,a,c){return this._attachNode(&quot;accordion&quot;,{width:g||400,height:a||200,kZ:c||{}})};dhtmlXPopup.prototype._attach_init_accordion=function(a){a.kZ.parent=this._nodeId;a.kZ.skin=this.kZ.skin;this._nodeObj=new dhtmlXAccordion(a.kZ)};dhtmlXPopup.prototype.attachTabbar=function(g,a,c){if(typeof(c)==&quot;string&quot;){c={mode:c}}else{if(typeof(c)!=&quot;object&quot;||c==null){c={}}}return this._attachNode(&quot;tabbar&quot;,{width:g||400,height:a||200,kZ:c})};dhtmlXPopup.prototype._attach_init_tabbar=function(a){a.kZ.parent=this._nodeId;a.kZ.skin=this.kZ.skin;this._nodeObj=new dhtmlXTabBar(a.kZ)};dhtmlXPopup.prototype.attachEditor=function(g,a,c){return this._attachNode(&quot;editor&quot;,{width:g||400,height:a||200,kZ:c||{}})};dhtmlXPopup.prototype._attach_init_editor=function(c){document.getElementById(this._nodeId).className=&quot;dhxeditor_&quot;+this.kZ.skin;c.kZ.parent=this._nodeId;if(c.kZ.skin==null){c.kZ.skin=this.kZ.skin}this._nodeObj=new dhtmlXEditor(c.kZ);var a=this.attachEvent(&quot;onShow&quot;,function(){if(this._nodeObj instanceof window.dhtmlXEditor){this._nodeObj.setSizes()}});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(a)};dhtmlXPopup.prototype.attachColorPicker=function(a){if(typeof(a)!=&quot;object&quot;||a==null){a={}}return this._attachNode(&quot;colorpicker&quot;,{kZ:a})};dhtmlXPopup.prototype._attach_init_colorpicker=function(a){a.kZ.skin=this.kZ.skin;a.kZ.parent=this._nodeId;this._nodeObj=new dhtmlXColorPicker(a.kZ)};function dhtmlXMenuObject(l,m){var h=this;this.kZ={skin:(m||window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhxmenu&quot;)||&quot;dhx_skyblue&quot;),mode:&quot;web&quot;,align:&quot;left&quot;,is_touched:false,selected: -1,last_click: -1,fixed_pos:false,rtl:false,icons_path:&quot;&quot;,arrow_ff_fix:(navigator.userAgent.indexOf(&quot;MSIE&quot;)&gt;=0&amp;&amp;document.compatMode==&quot;BackCompat&quot;),live_id:window.dhx4.newId(),tags:{root:&quot;menu&quot;,item:&quot;item&quot;,text_ext:&quot;itemtext&quot;,userdata:&quot;userdata&quot;,tooltip:&quot;tooltip&quot;,hotkey:&quot;hotkey&quot;,href:&quot;href&quot;},autoload:{},hide_tm:{},top_mode:true,top_tmtime:200,v_enabled:false,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:&quot;bottom&quot;,dir_sublv:&quot;right&quot;,auto_overflow:false,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,tm_sec:400,tm_handler:null,dload:false,dload_url:&quot;&quot;,dload_icon:false,dload_params:{action:&quot;loadMenu&quot;},dload_pid:&quot;parentId&quot;,tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:false,ctx_zoneid:false,ctx_autoshow:true,ctx_autohide:true,ctx_hideall:true,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]};if(typeof(l)==&quot;object&quot;&amp;&amp;l!=null&amp;&amp;typeof(l.tagName)==&quot;undefined&quot;){if(l.icons_path!=null||l.icon_path!=null){this.kZ.icons_path=(l.icons_path||l.icon_path)}if(l.skin!=null){this.kZ.skin=l.skin}if(l.visible_area){this.kZ.v_enabled=true;this.kZ.v={x1:l.visible_area.x1,x2:l.visible_area.x2,y1:l.visible_area.y1,y2:l.visible_area.y2}}for(var g in{json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1}){if(l[g]!=null){this.kZ.autoload[g]=l[g]}}l=l.parent}if(l==null){this.base=document.body}else{var c=(typeof(l)==&quot;string&quot;?document.getElementById(l):l);if(c!=null){this.base=c;if(!this.base.id){this.base.id=(new Date()).valueOf()}this.base.className+=&quot; dhtmlxMenu_&quot;+this.kZ.skin+&quot;_Middle dir_left&quot;;this.base._autoSkinUpdate=true;if(this.base.oncontextmenu){this.base._oldContextMenuHandler=this.base.oncontextmenu}this.kZ.ctx_baseid=this.base.id;this.base.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};this.base.oncontextmenu=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false}}else{this.base=document.body}}this.idPrefix=&quot;&quot;;this.topId=&quot;dhxWebMenuTopId&quot;;this.idPull={};this.itemPull={};this.userData={};this.radio={};this.setSkin=function(o){var q=this.kZ.skin;this.kZ.skin=o;switch(this.kZ.skin){case &quot;dhx_skyblue&quot;:case &quot;dhx_web&quot;:this.kZ.tl_botmarg=2;this.kZ.tl_rmarg=1;this.kZ.tl_ofsleft=1;break;case &quot;dhx_terrace&quot;:this.kZ.tl_botmarg=0;this.kZ.tl_rmarg=0;this.kZ.tl_ofsleft=0;break}if(this.base._autoSkinUpdate){this.base.className=this.base.className.replace(&quot;dhtmlxMenu_&quot;+q+&quot;_Middle&quot;,&quot;&quot;)+&quot; dhtmlxMenu_&quot;+this.kZ.skin+&quot;_Middle&quot;}for(var n in this.idPull){this.idPull[n].className=String(this.idPull[n].className).replace(q,this.kZ.skin)}};this.setSkin(this.kZ.skin);this._addSubItemToSelected=function(o,n){var a=true;for(var r=0;r&lt;this.kZ.selected_sub.length;r++){if((this.kZ.selected_sub[r][0]==o)&amp;&amp;(this.kZ.selected_sub[r][1]==n)){a=false}}if(a==true){this.kZ.selected_sub.push(new Array(o,n))}return a};this._removeSubItemFromSelected=function(r,o){var a=new Array();var n=false;for(var s=0;s&lt;this.kZ.selected_sub.length;s++){if((this.kZ.selected_sub[s][0]==r)&amp;&amp;(this.kZ.selected_sub[s][1]==o)){n=true}else{a[a.length]=this.kZ.selected_sub[s]}}if(n==true){this.kZ.selected_sub=a}return n};this._getSubItemToDeselectByPolygon=function(r){var a=new Array();for(var s=0;s&lt;this.kZ.selected_sub.length;s++){if(this.kZ.selected_sub[s][1]==r){a[a.length]=this.kZ.selected_sub[s][0];a=a.concat(this._getSubItemToDeselectByPolygon(this.kZ.selected_sub[s][0]));var o=true;for(var n=0;n&lt;this.kZ.opened_poly.length;n++){if(this.kZ.opened_poly[n]==this.kZ.selected_sub[s][0]){o=false}}if(o==true){this.kZ.opened_poly[this.kZ.opened_poly.length]=this.kZ.selected_sub[s][0]}this.kZ.selected_sub[s][0]= -1;this.kZ.selected_sub[s][1]= -1}}return a};this._hidePolygon=function(a){if(this.idPull[&quot;polygon_&quot;+a]!=null){if(this.idPull[&quot;polygon_&quot;+a]._zId!=null){window.dhx4.zim.clear(this.idPull[&quot;polygon_&quot;+a]._zId)}if(typeof(this._menuEffect)!=&quot;undefined&quot;&amp;&amp;this._menuEffect!==false){this._hidePolygonEffect(&quot;polygon_&quot;+a)}else{if(this.idPull[&quot;polygon_&quot;+a].style.display==&quot;none&quot;){return}this.idPull[&quot;polygon_&quot;+a].style.display=&quot;none&quot;;if(this.idPull[&quot;arrowup_&quot;+a]!=null){this.idPull[&quot;arrowup_&quot;+a].style.display=&quot;none&quot;}if(this.idPull[&quot;arrowdown_&quot;+a]!=null){this.idPull[&quot;arrowdown_&quot;+a].style.display=&quot;none&quot;}this._updateItemComplexState(a,true,false);if(window.dhx4.isIE6&amp;&amp;this.idPull[&quot;polygon_&quot;+a+&quot;_ie6cover&quot;]!=null){this.idPull[&quot;polygon_&quot;+a+&quot;_ie6cover&quot;].style.display=&quot;none&quot;}}a=String(a).replace(this.idPrefix,&quot;&quot;);if(a==this.topId){a=null}this.callEvent(&quot;onHide&quot;,[a]);if(a!=null&amp;&amp;this.kZ.skin==&quot;dhx_terrace&quot;&amp;&amp;this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId){this._improveTerraceButton(this.idPrefix+a,true)}}};this._showPolygon=function(I,o){var N=this._countVisiblePolygonItems(I);if(N==0){return}var J=&quot;polygon_&quot;+I;if((this.idPull[J]!=null)&amp;&amp;(this.idPull[I]!=null)){if(this.kZ.top_mode&amp;&amp;this.kZ.mode==&quot;web&quot;&amp;&amp; !this.kZ.context){if(!this.idPull[I]._mouseOver&amp;&amp;o==this.kZ.dir_toplv){return}}if(!this.kZ.fixed_pos){this._autoDetectVisibleArea()}var K=0;var M=0;var P=null;var E=null;if(this.idPull[J]._zId==null){this.idPull[J]._zId=window.dhx4.newId()}this.idPull[J]._zInd=window.dhx4.zim.reserve(this.idPull[J]._zId);this.idPull[J].style.visibility=&quot;hidden&quot;;this.idPull[J].style.left=&quot;0px&quot;;this.idPull[J].style.top=&quot;0px&quot;;this.idPull[J].style.display=&quot;&quot;;this.idPull[J].style.zIndex=this.idPull[J]._zInd;if(this.kZ.auto_overflow){if(this.idPull[J].firstChild.offsetHeight&gt;this.kZ.v.y1+this.kZ.v.y2){var D=Math.floor((this.kZ.v.y2-this.kZ.v.y1-35)/24);this.kZ.overflow_limit=D}else{this.kZ.overflow_limit=0;if(this.idPull[&quot;arrowup_&quot;+I]!=null){this._removeUpArrow(String(I).replace(this.idPrefix,&quot;&quot;))}if(this.idPull[&quot;arrowdown_&quot;+I]!=null){this._removeDownArrow(String(I).replace(this.idPrefix,&quot;&quot;))}}}if(this.kZ.overflow_limit&gt;0&amp;&amp;this.kZ.overflow_limit&lt;N){if(this.idPull[&quot;arrowup_&quot;+I]==null){this._addUpArrow(String(I).replace(this.idPrefix,&quot;&quot;))}if(this.idPull[&quot;arrowdown_&quot;+I]==null){this._addDownArrow(String(I).replace(this.idPrefix,&quot;&quot;))}P=this.idPull[&quot;arrowup_&quot;+I];P.style.display=&quot;none&quot;;E=this.idPull[&quot;arrowdown_&quot;+I];E.style.display=&quot;none&quot;}if(this.kZ.overflow_limit&gt;0){if(this.kZ.overflow_limit&lt;N){this.idPull[J].childNodes[1].style.height=24*this.kZ.overflow_limit+&quot;px&quot;;P.style.width=E.style.width=this.idPull[J].childNodes[1].style.width=this.idPull[J].childNodes[1].childNodes[0].offsetWidth+&quot;px&quot;;this.idPull[J].childNodes[1].scrollTop=0;P.style.display=&quot;&quot;;K=P.offsetHeight;E.style.display=&quot;&quot;;M=E.offsetHeight}else{this.idPull[J].childNodes[1].style.height=&quot;&quot;;this.idPull[J].childNodes[1].style.width=&quot;&quot;}}if(this.itemPull[I]!=null){var A=&quot;polygon_&quot;+this.itemPull[I][&quot;parent&quot;]}else{if(this.kZ.context){var A=this.idPull[this.idPrefix+this.topId]}}var a=(this.idPull[I].tagName!=null?window.dhx4.absLeft(this.idPull[I]):this.idPull[I][0]);var O=(this.idPull[I].tagName!=null?window.dhx4.absTop(this.idPull[I]):this.idPull[I][1]);var n=(this.idPull[I].tagName!=null?this.idPull[I].offsetWidth:0);var q=(this.idPull[I].tagName!=null?this.idPull[I].offsetHeight:0);var v=0;var u=0;var C=this.idPull[J].offsetWidth;var L=this.idPull[J].childNodes[1].offsetHeight+K+M;if(o==&quot;bottom&quot;){if(this.kZ.rtl){v=a+(n!=null?n:0)-C}else{if(this.kZ.align==&quot;right&quot;){v=a+n-C}else{v=a-1+(o==this.kZ.dir_toplv?this.kZ.tl_rmarg:0)}}u=O-1+q+this.kZ.tl_botmarg}if(o==&quot;right&quot;){v=a+n-1;u=O+2}if(o==&quot;left&quot;){v=a-this.idPull[J].offsetWidth+2;u=O+2}if(o==&quot;top&quot;){v=a-1;u=O-L+2}if(this.kZ.fixed_pos){var H=65536;var F=65536}else{var H=(this.kZ.v.x2!=null?this.kZ.v.x2:0);var F=(this.kZ.v.y2!=null?this.kZ.v.y2:0);if(H==0){if(window.innerWidth){H=window.innerWidth;F=window.innerHeight}else{H=document.body.offsetWidth;F=document.body.scrollHeight}}}if(v+C&gt;H&amp;&amp; !this.kZ.rtl){v=a-C+2}if(v&lt;this.kZ.v.x1&amp;&amp;this.kZ.rtl){v=a+n-2}if(v&lt;0){v=0}if(u+L&gt;F&amp;&amp;this.kZ.v.y2!=null){u=Math.max(O+q-L+2,(this.kZ.v_enabled?this.kZ.v.y1+2:2));if(this.kZ.context&amp;&amp;this.idPrefix+this.topId==I&amp;&amp;E!=null){u=u-2}if(this.itemPull[I]!=null&amp;&amp; !this.kZ.context){if(this.itemPull[I][&quot;parent&quot;]==this.idPrefix+this.topId){u=u-this.base.offsetHeight}}}this.idPull[J].style.left=v+&quot;px&quot;;this.idPull[J].style.top=u+&quot;px&quot;;if(typeof(this._menuEffect)!=&quot;undefined&quot;&amp;&amp;this._menuEffect!==false){this._showPolygonEffect(J)}else{this.idPull[J].style.visibility=&quot;&quot;;if(this.kZ.overflow_limit&gt;0&amp;&amp;this.kZ.overflow_limit&lt;N){this.idPull[J].childNodes[1].scrollTop=0;this._checkArrowsState(I)}if(window.dhx4.isIE6){var s=J+&quot;_ie6cover&quot;;if(this.idPull[s]==null){var r=document.createElement(&quot;IFRAME&quot;);r.className=&quot;dhtmlxMenu_IE6CoverFix_&quot;+this.kZ.skin;r.frameBorder=0;r.setAttribute(&quot;src&quot;,&quot;javascript:false;&quot;);document.body.insertBefore(r,document.body.firstChild);this.idPull[s]=r}this.idPull[s].style.left=v+&quot;px&quot;;this.idPull[s].style.top=u+&quot;px&quot;;this.idPull[s].style.width=this.idPull[J].offsetWidth+&quot;px&quot;;this.idPull[s].style.height=this.idPull[J].offsetHeight+&quot;px&quot;;this.idPull[s].style.zIndex=this.idPull[J].style.zIndex-1;this.idPull[s].style.display=&quot;&quot;}}I=String(I).replace(this.idPrefix,&quot;&quot;);if(I==this.topId){I=null}this.callEvent(&quot;onShow&quot;,[I]);if(I!=null&amp;&amp;this.kZ.skin==&quot;dhx_terrace&quot;&amp;&amp;this.itemPull[this.idPrefix+I].parent==this.idPrefix+this.topId){this._improveTerraceButton(this.idPrefix+I,false)}}};this._redistribSubLevelSelection=function(s,r){while(this.kZ.opened_poly.length&gt;0){this.kZ.opened_poly.pop()}var a=this._getSubItemToDeselectByPolygon(r);this._removeSubItemFromSelected(-1,-1);for(var n=0;n&lt;a.length;n++){if((this.idPull[a[n]]!=null)&amp;&amp;(a[n]!=s)){if(this.itemPull[a[n]][&quot;state&quot;]==&quot;enabled&quot;){this.idPull[a[n]].className=&quot;sub_item&quot;}}}for(var n=0;n&lt;this.kZ.opened_poly.length;n++){if(this.kZ.opened_poly[n]!=r){this._hidePolygon(this.kZ.opened_poly[n])}}if(this.itemPull[s][&quot;state&quot;]==&quot;enabled&quot;){this.idPull[s].className=&quot;sub_item_selected&quot;;if(this.itemPull[s][&quot;complex&quot;]&amp;&amp;this.kZ.dload&amp;&amp;(this.itemPull[s][&quot;loaded&quot;]==&quot;no&quot;)){if(this.kZ.dload_icon==true){this._updateLoaderIcon(s,true)}this.itemPull[s].loaded=&quot;get&quot;;var o=s.replace(this.idPrefix,&quot;&quot;);this._dhxdataload.onBeforeXLS=function(){var u={params:{}};u.params[this.kZ.dload_pid]=o;for(var q in this.kZ.dload_params){u.params[q]=this.kZ.dload_params[q]}return u};this.loadStruct(this.kZ.dload_url)}if(this.itemPull[s][&quot;complex&quot;]||(this.kZ.dload&amp;&amp;(this.itemPull[s][&quot;loaded&quot;]==&quot;yes&quot;))){if((this.itemPull[s][&quot;complex&quot;])&amp;&amp;(this.idPull[&quot;polygon_&quot;+s]!=null)){this._updateItemComplexState(s,true,true);this._showPolygon(s,this.kZ.dir_sublv)}}this._addSubItemToSelected(s,r);this.kZ.selected=s}};this._doOnClick=function(n,x,r){this.kZ.last_click=n;if(this.itemPull[this.idPrefix+n][&quot;href_link&quot;]!=null&amp;&amp;this.itemPull[this.idPrefix+n].state==&quot;enabled&quot;){var s=document.createElement(&quot;FORM&quot;);var v=String(this.itemPull[this.idPrefix+n][&quot;href_link&quot;]).split(&quot;?&quot;);s.action=v[0];if(v[1]!=null){var o=String(v[1]).split(&quot;&amp;&quot;);for(var a=0;a&lt;o.length;a++){var w=String(o[a]).split(&quot;=&quot;);var u=document.createElement(&quot;INPUT&quot;);u.type=&quot;hidden&quot;;u.name=(w[0]||&quot;&quot;);u.value=(w[1]||&quot;&quot;);s.appendChild(u)}}if(this.itemPull[this.idPrefix+n][&quot;href_target&quot;]!=null){s.target=this.itemPull[this.idPrefix+n][&quot;href_target&quot;]}s.style.display=&quot;none&quot;;document.body.appendChild(s);s.submit();if(s!=null){document.body.removeChild(s);s=null}return}if(x.charAt(0)==&quot;c&quot;){return}if(x.charAt(1)==&quot;d&quot;){return}if(x.charAt(2)==&quot;s&quot;){return}if(this.mR(&quot;onClick&quot;)){this.callEvent(&quot;onClick&quot;,[n,this.kZ.ctx_zoneid,r])}else{if((x.charAt(1)==&quot;d&quot;)||(this.kZ.mode==&quot;win&quot;&amp;&amp;x.charAt(2)==&quot;t&quot;)){return}}if(this.kZ.context&amp;&amp;this._isContextMenuVisible()&amp;&amp;this.kZ.ctx_autohide){this._hideContextMenu()}else{if(this._clearAndHide){this._clearAndHide()}}};this._doOnTouchMenu=function(a){if(this.kZ.is_touched==false){this.kZ.is_touched=true;if(this.mR(&quot;onTouch&quot;)){this.callEvent(&quot;onTouch&quot;,[a])}}};this._searchMenuNode=function(o,s){var a=new Array();for(var r=0;r</I><S><I>0){a=n}}}return a};this._getMenuNodes=function(q){var n=new Array;for(var o in this.itemPull){if(this.itemPull[o][&quot;parent&quot;]==q){n[n.length]=o}}return n};this._genStr=function(a){var n=&quot;&quot;;var r=&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;;for(var o=0;o&lt;a;o++){n+=r.charAt(Math.round(Math.random()*(r.length-1)))}return n};this.getItemType=function(a){a=this.idPrefix+a;if(this.itemPull[a]==null){return null}return this.itemPull[a][&quot;type&quot;]};this.forEachItem=function(o){for(var n in this.itemPull){o(String(n).replace(this.idPrefix,&quot;&quot;))}};this._clearAndHide=function(){h.kZ.selected= -1;h.kZ.last_click= -1;while(h.kZ.opened_poly.length&gt;0){h.kZ.opened_poly.pop()}for(var a=0;a&lt;h.kZ.selected_sub.length;a++){var n=h.kZ.selected_sub[a][0];if(h.idPull[n]!=null){if(h.itemPull[n][&quot;state&quot;]==&quot;enabled&quot;){if(h.idPull[n].className==&quot;sub_item_selected&quot;){h.idPull[n].className=&quot;sub_item&quot;}if(h.idPull[n].className==&quot;dhtmlxMenu_&quot;+h.kZ.skin+&quot;_TopLevel_Item_Selected&quot;){if(h.itemPull[n][&quot;cssNormal&quot;]!=null){h.idPull[n].className=h.itemPull[n][&quot;cssNormal&quot;]}else{h.idPull[n].className=&quot;dhtmlxMenu_&quot;+h.kZ.skin+&quot;_TopLevel_Item_Normal&quot;}}}}h._hidePolygon(n)}h.kZ.is_touched=false;if(h.kZ.context&amp;&amp;h.kZ.ctx_hideall){h._hidePolygon(h.idPrefix+h.topId)}};this._showSubLevelItem=function(n,a){if(document.getElementById(&quot;arrow_&quot;+this.idPrefix+n)!=null){document.getElementById(&quot;arrow_&quot;+this.idPrefix+n).style.display=(a?&quot;none&quot;:&quot;&quot;)}if(document.getElementById(&quot;image_&quot;+this.idPrefix+n)!=null){document.getElementById(&quot;image_&quot;+this.idPrefix+n).style.display=(a?&quot;none&quot;:&quot;&quot;)}if(document.getElementById(this.idPrefix+n)!=null){document.getElementById(this.idPrefix+n).style.display=(a?&quot;&quot;:&quot;none&quot;)}};this._hideSubLevelItem=function(a){this._showSubLevelItem(a,true)};this.idPrefix=this._genStr(12)+&quot;_&quot;;this._bodyClick=function(a){a=a||event;if(a.button==2||(window.dhx4.isOpera&amp;&amp;a.ctrlKey==true)){return}if(h.kZ.context){if(h.kZ.ctx_autohide&amp;&amp;(!window.dhx4.isOpera||(h._isContextMenuVisible()&amp;&amp;window.dhx4.isOpera))){h._hideContextMenu()}}else{if(h._clearAndHide){h._clearAndHide()}}};this._bodyContext=function(o){o=o||event;var n=String((o.srcElement||o.target).className);if(n.search(&quot;dhtmlxMenu&quot;)!= -1&amp;&amp;n.search(&quot;SubLevelArea&quot;)!= -1){return}var a=true;var q=o.target||o.srcElement;while(q!=null){if(q.id!=null){if(h.isContextZone(q.id)){a=false}}if(q==document.body){a=false}q=q.parentNode}if(a){h.hideContextMenu()}};if(typeof(window.addEventListener)!=&quot;undefined&quot;){window.addEventListener(&quot;click&quot;,this._bodyClick,false);window.addEventListener(&quot;contextmenu&quot;,this._bodyContext,false)}else{document.body.attachEvent(&quot;onclick&quot;,this._bodyClick);document.body.attachEvent(&quot;oncontextmenu&quot;,this._bodyContext)}this.unload=function(){window.dhx4._eventable(this,&quot;clear&quot;);dhtmlXMenuObject.prototype.liveInst[this.kZ.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.kZ.live_id]}catch(o){}this.kZ.live_id=null;if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;click&quot;,this._bodyClick,false);window.removeEventListener(&quot;contextmenu&quot;,this._bodyContext,false)}else{document.body.detachEvent(&quot;onclick&quot;,this._bodyClick);document.body.detachEvent(&quot;oncontextmenu&quot;,this._bodyContext)}this._bodyClick=null;this._bodyContext=null;this.removeItem(this.idPrefix+this.topId,true);this.itemPull=null;this.idPull=null;if(this.kZ.context){for(var n in this.kZ.ctx_zones){this.removeContextZone(n)}}if(this.vI!=null){this.vI.className=&quot;&quot;;this.vI.parentNode.removeChild(this.vI);this.vI=null}if(this.base!=null){this.base.className=&quot;&quot;;if(!this.kZ.context){this.base.oncontextmenu=(this.base._oldContextMenuHandler||null)}this.base.onselectstart=null;this.base=null}for(var n in this){this[n]=null}h=null};dhtmlXMenuObject.prototype.liveInst[this.kZ.live_id]=this;window.dhx4._enableDataLoading(this,&quot;_initObj&quot;,&quot;_xmlToJson&quot;,this.kZ.tags.root,{struct:true});window.dhx4._eventable(this);if(window.dhx4.s2b(this.kZ.autoload.context)==true){this.renderAsContextMenu()}if(this.kZ.autoload.dynamic!=null){this.enableDynamicLoading(this.kZ.autoload.dynamic,window.dhx4.s2b(this.kZ.autoload.dynamic_icon))}else{if(this.kZ.autoload.items!=null){this.loadStruct(this.kZ.autoload.items,this.kZ.autoload.onload)}else{if(this.kZ.autoload.json!=null){this.loadStruct(this.kZ.autoload.json,this.kZ.autoload.onload)}else{if(this.kZ.autoload.xml!=null){this.loadStruct(this.kZ.autoload.xml,this.kZ.autoload.onload)}}}}for(var g in{onclick:1,oncheckboxclick:1,onradioclick:1}){if(this.kZ.autoload[g]!=null){if(typeof(this.kZ.autoload[g])==&quot;function&quot;){this.attachEvent(g,this.kZ.autoload[g])}else{if(typeof(window[this.kZ.autoload[g]])==&quot;function&quot;){this.attachEvent(g,window[this.kZ.autoload[g]])}}}}if(this.kZ.autoload.top_text!=null){this.setTopText(this.kZ.autoload.top_text)}if(this.kZ.autoload.align!=null){this.setAlign(this.kZ.autoload.align)}if(this.kZ.autoload.open_mode!=null){this.setOpenMode(this.kZ.autoload.open_mode)}if(this.kZ.autoload.overflow!=null){this.setOverflowHeight(this.kZ.autoload.overflow)}for(var g in this.kZ.autoload){this.kZ.autoload[g]=null;delete this.kZ.autoload[g]}this.kZ.autoload=null;return this}dhtmlXMenuObject.prototype.ahY=function(){if(this._isInited==true){return}if(this.kZ.dload){this._dhxdataload.onBeforeXLS=function(){var g={params:{}};for(var c in this.kZ.dload_params){g.params[c]=this.kZ.dload_params[c]}return g};this.loadStruct(this.kZ.dload_url)}else{this._initTopLevelMenu();this._isInited=true}};dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(m){var h=0;for(var c in this.itemPull){var g=this.itemPull[c][&quot;parent&quot;];var l=this.itemPull[c][&quot;type&quot;];if(this.idPull[c]!=null){if(g==m&amp;&amp;(l==&quot;item&quot;||l==&quot;radio&quot;||l==&quot;checkbox&quot;)&amp;&amp;this.idPull[c].style.display!=&quot;none&quot;){h++}}}return h};dhtmlXMenuObject.prototype._redefineComplexState=function(c){if(this.idPrefix+this.topId==c){return}if((this.idPull[&quot;polygon_&quot;+c]!=null)&amp;&amp;(this.idPull[c]!=null)){var a=this._countVisiblePolygonItems(c);if((a&gt;0)&amp;&amp;(!this.itemPull[c][&quot;complex&quot;])){this._updateItemComplexState(c,true,false)}if((a==0)&amp;&amp;(this.itemPull[c][&quot;complex&quot;])){this._updateItemComplexState(c,false,false)}}};dhtmlXMenuObject.prototype._updateItemComplexState=function(l,g,h){if((!this.kZ.context)&amp;&amp;(this._getItemLevelType(l.replace(this.idPrefix,&quot;&quot;))==&quot;TopLevel&quot;)){this.itemPull[l][&quot;complex&quot;]=g;return}if((this.idPull[l]==null)||(this.itemPull[l]==null)){return}this.itemPull[l][&quot;complex&quot;]=g;if(l==this.idPrefix+this.topId){return}var a=null;var c=this.idPull[l].childNodes[this.kZ.rtl?0:2];if(c.childNodes[0]){if(String(c.childNodes[0].className).search(&quot;complex_arrow&quot;)===0){a=c.childNodes[0]}}if(this.itemPull[l][&quot;complex&quot;]){if(a==null){a=document.createElement(&quot;DIV&quot;);a.className=&quot;complex_arrow&quot;;a.id=&quot;arrow_&quot;+l;while(c.childNodes.length&gt;0){c.removeChild(c.childNodes[0])}c.appendChild(a)}if(this.kZ.dload&amp;&amp;(this.itemPull[l].loaded==&quot;get&quot;)&amp;&amp;this.kZ.dload_icon){if(a.className!=&quot;complex_arrow_loading&quot;){a.className=&quot;complex_arrow_loading&quot;}}else{a.className=&quot;complex_arrow&quot;}return}if((!this.itemPull[l][&quot;complex&quot;])&amp;&amp;(a!=null)){c.removeChild(a);if(this.itemPull[l][&quot;hotkey_backup&quot;]!=null&amp;&amp;this.setHotKey){this.setHotKey(l.replace(this.idPrefix,&quot;&quot;),this.itemPull[l][&quot;hotkey_backup&quot;])}}};dhtmlXMenuObject.prototype._getItemLevelType=function(a){return(this.itemPull[this.idPrefix+a][&quot;parent&quot;]==this.idPrefix+this.topId?&quot;TopLevel&quot;:&quot;SubLevelArea&quot;)};dhtmlXMenuObject.prototype.setIconsPath=function(a){this.kZ.icons_path=a};dhtmlXMenuObject.prototype._updateItemImage=function(g,h){g=this.idPrefix+g;var l=(this.itemPull[g][&quot;parent&quot;]==this.idPrefix+this.topId&amp;&amp; !this.kZ.context);var m=null;if(l){for(var a=0;a&lt;this.idPull[g].childNodes.length;a++){try{if(this.idPull[g].childNodes[a].className==&quot;dhtmlxMenu_TopLevel_Item_Icon&quot;){m=this.idPull[g].childNodes[a]}}catch(n){}}}else{try{var m=this.idPull[g].childNodes[this.kZ.rtl?2:0].childNodes[0]}catch(n){}if(!(m!=null&amp;&amp;typeof(m.className)!=&quot;undefined&quot;&amp;&amp;m.className==&quot;sub_icon&quot;)){m=null}}if(this.itemPull[g][&quot;type&quot;]==&quot;radio&quot;){var r=this.itemPull[g][(this.itemPull[g][&quot;state&quot;]==&quot;enabled&quot;?&quot;imgen&quot;:&quot;imgdis&quot;)]}else{var r=this.itemPull[g][(this.itemPull[g][&quot;state&quot;]==&quot;enabled&quot;?&quot;imgen&quot;:&quot;imgdis&quot;)]}if(r.length&gt;0){if(m!=null){m.src=this.kZ.icons_path+r}else{if(l){var m=document.createElement(&quot;IMG&quot;);m.className=&quot;dhtmlxMenu_TopLevel_Item_Icon&quot;;m.src=this.kZ.icons_path+r;m.border=&quot;0&quot;;m.id=&quot;image_&quot;+g;if(!this.kZ.rtl&amp;&amp;this.idPull[g].childNodes.length&gt;0){this.idPull[g].insertBefore(m,this.idPull[g].childNodes[0])}else{this.idPull[g].appendChild(m)}}else{var m=document.createElement(&quot;IMG&quot;);m.className=&quot;sub_icon&quot;;m.src=this.kZ.icons_path+r;m.border=&quot;0&quot;;m.id=&quot;image_&quot;+g;var o=this.idPull[g].childNodes[this.kZ.rtl?2:0];while(o.childNodes.length&gt;0){o.removeChild(o.childNodes[0])}o.appendChild(m)}}}else{if(m!=null){var c=m.parentNode;c.removeChild(m);c.innerHTML=&quot; &quot;;c=m=null}}};dhtmlXMenuObject.prototype._getAllParents=function(m){var g=new Array();for(var c in this.itemPull){if(this.itemPull[c][&quot;parent&quot;]==m){g[g.length]=this.itemPull[c][&quot;id&quot;];if(this.itemPull[c][&quot;complex&quot;]){var h=this._getAllParents(this.itemPull[c][&quot;id&quot;]);for(var l=0;l&lt;h.length;l++){g[g.length]=h[l]}}}}return g};dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(this.kZ.v_enabled){return}var a=window.dhx4.screenDim();this.kZ.v.x1=a.left;this.kZ.v.x2=a.right;this.kZ.v.y1=a.top;this.kZ.v.y2=a.bottom};dhtmlXMenuObject.prototype.getItemPosition=function(l){l=this.idPrefix+l;var h= -1;if(this.itemPull[l]==null){return h}var a=this.itemPull[l][&quot;parent&quot;];var g=(this.idPull[&quot;polygon_&quot;+a]!=null?this.idPull[&quot;polygon_&quot;+a].tbd:this.vI);for(var c=0;c&lt;g.childNodes.length;c++){if(g.childNodes[c]==this.idPull[&quot;separator_&quot;+l]||g.childNodes[c]==this.idPull[l]){h=c}}return h};dhtmlXMenuObject.prototype.setItemPosition=function(n,m){n=this.idPrefix+n;if(this.idPull[n]==null){return}var c=(this.itemPull[n][&quot;parent&quot;]==this.idPrefix+this.topId);var a=this.idPull[n];var h=this.getItemPosition(n.replace(this.idPrefix,&quot;&quot;));var g=this.itemPull[n][&quot;parent&quot;];var l=(this.idPull[&quot;polygon_&quot;+g]!=null?this.idPull[&quot;polygon_&quot;+g].tbd:this.vI);l.removeChild(l.childNodes[h]);if(m&lt;0){m=0}if(c&amp;&amp;m&lt;1){m=1}if(m&lt;l.childNodes.length){l.insertBefore(a,l.childNodes[m])}else{l.appendChild(a)}};dhtmlXMenuObject.prototype.getParentId=function(a){a=this.idPrefix+a;if(this.itemPull[a]==null){return null}return((this.itemPull[a][&quot;parent&quot;]!=null?this.itemPull[a][&quot;parent&quot;]:this.topId).replace(this.idPrefix,&quot;&quot;))};dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,true);this._isInited=false;this.idPrefix=this._genStr(12)+&quot;_&quot;;this.itemPull={}};if(typeof(dhtmlXMenuObject.prototype.liveInst)==&quot;undefined&quot;){dhtmlXMenuObject.prototype.liveInst={}}dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(h,c){var a=this._getSubItemToDeselectByPolygon(&quot;parent&quot;);this._removeSubItemFromSelected(-1,-1);for(var g=0;g&lt;a.length;g++){if(a[g]!=h){this._hidePolygon(a[g])}if((this.idPull[a[g]]!=null)&amp;&amp;(a[g]!=h)){this.idPull[a[g]].className=this.idPull[a[g]].className.replace(/Selected/g,&quot;Normal&quot;)}}if(this.itemPull[this.idPrefix+h][&quot;state&quot;]==&quot;enabled&quot;){this.idPull[this.idPrefix+h].className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_TopLevel_Item_Selected&quot;;this._addSubItemToSelected(this.idPrefix+h,&quot;parent&quot;);this.kZ.selected=(this.kZ.mode==&quot;win&quot;?(this.kZ.selected!= -1?h:this.kZ.selected):h);if((this.itemPull[this.idPrefix+h][&quot;complex&quot;])&amp;&amp;(this.kZ.selected!= -1)){this._showPolygon(this.idPrefix+h,this.kZ.dir_toplv)}}};dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.kZ.dir_toplv=&quot;bottom&quot;;this.kZ.dir_sublv=(this.kZ.rtl?&quot;left&quot;:&quot;right&quot;);if(this.kZ.context){this.idPull[this.idPrefix+this.topId]=new Array(0,0);this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId)}else{var a=this._getMenuNodes(this.idPrefix+this.topId);for(var c=0;c&lt;a.length;c++){if(this.itemPull[a[c]][&quot;type&quot;]==&quot;item&quot;){this._renderToplevelItem(a[c],null)}if(this.itemPull[a[c]][&quot;type&quot;]==&quot;separator&quot;){this._renderSeparator(a[c],null)}}}};dhtmlXMenuObject.prototype._renderToplevelItem=function(o,n){var l=this;var a=document.createElement(&quot;DIV&quot;);a.id=o;if(this.itemPull[o][&quot;state&quot;]==&quot;enabled&quot;&amp;&amp;this.itemPull[o][&quot;cssNormal&quot;]!=null){a.className=this.itemPull[o][&quot;cssNormal&quot;]}else{a.className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_TopLevel_Item_&quot;+(this.itemPull[o][&quot;state&quot;]==&quot;enabled&quot;?&quot;Normal&quot;:&quot;Disabled&quot;)}if(this.itemPull[o][&quot;title&quot;]!=&quot;&quot;){var h=document.createElement(&quot;DIV&quot;);h.className=&quot;top_level_text&quot;;h.innerHTML=this.itemPull[o][&quot;title&quot;];a.appendChild(h)}if(this.itemPull[o][&quot;tip&quot;].length&gt;0){a.title=this.itemPull[o][&quot;tip&quot;]}if((this.itemPull[o][&quot;imgen&quot;]!=&quot;&quot;)||(this.itemPull[o][&quot;imgdis&quot;]!=&quot;&quot;)){var g=this.itemPull[o][(this.itemPull[o][&quot;state&quot;]==&quot;enabled&quot;)?&quot;imgen&quot;:&quot;imgdis&quot;];if(g){var c=document.createElement(&quot;IMG&quot;);c.border=&quot;0&quot;;c.id=&quot;image_&quot;+o;c.src=this.kZ.icons_path+g;c.className=&quot;dhtmlxMenu_TopLevel_Item_Icon&quot;;if(a.childNodes.length&gt;0&amp;&amp; !this.kZ.rtl){a.insertBefore(c,a.childNodes[0])}else{a.appendChild(c)}}}a.onselectstart=function(m){m=m||event;if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}return false};a.oncontextmenu=function(m){m=m||event;if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}return false};if(!this.vI){this.vI=document.createElement(&quot;DIV&quot;);this.vI.dir=&quot;ltr&quot;;this.vI.className=(this.kZ.align==&quot;right&quot;?&quot;align_right&quot;:&quot;align_left&quot;);this.base.appendChild(this.vI)}if(n!=null){n++;if(n&lt;0){n=0}if(n&gt;this.vI.childNodes.length-1){n=null}}if(n!=null){this.vI.insertBefore(a,this.vI.childNodes[n])}else{this.vI.appendChild(a)}this.idPull[a.id]=a;if(this.itemPull[o][&quot;complex&quot;]&amp;&amp;(!this.kZ.dload)){this._addSubMenuPolygon(this.itemPull[o][&quot;id&quot;],this.itemPull[o][&quot;id&quot;])}a.onmouseover=function(){if(l.kZ.mode==&quot;web&quot;){window.clearTimeout(l.kZ.tm_handler)}var m=l._getSubItemToDeselectByPolygon(&quot;parent&quot;);l._removeSubItemFromSelected(-1,-1);for(var s=0;s&lt;m.length;s++){if(m[s]!=this.id){l._hidePolygon(m[s])}if((l.idPull[m[s]]!=null)&amp;&amp;(m[s]!=this.id)){if(l.itemPull[m[s]][&quot;cssNormal&quot;]!=null){l.idPull[m[s]].className=l.itemPull[m[s]][&quot;cssNormal&quot;]}else{if(l.idPull[m[s]].className==&quot;sub_item_selected&quot;){l.idPull[m[s]].className=&quot;sub_item&quot;}l.idPull[m[s]].className=l.idPull[m[s]].className.replace(/Selected/g,&quot;Normal&quot;)}}}if(l.itemPull[this.id][&quot;state&quot;]==&quot;enabled&quot;){this.className=&quot;dhtmlxMenu_&quot;+l.kZ.skin+&quot;_TopLevel_Item_Selected&quot;;l._addSubItemToSelected(this.id,&quot;parent&quot;);l.kZ.selected=(l.kZ.mode==&quot;win&quot;?(l.kZ.selected!= -1?this.id:l.kZ.selected):this.id);if(l.kZ.dload){if(l.itemPull[this.id].loaded==&quot;no&quot;){this._dynLoadTM=new Date().getTime();l.itemPull[this.id].loaded=&quot;get&quot;;var u=this.id.replace(l.idPrefix,&quot;&quot;);l._dhxdataload.onBeforeXLS=function(){var v={params:{}};v.params[this.kZ.dload_pid]=u;for(var q in this.kZ.dload_params){v.params[q]=this.kZ.dload_params[q]}return v};l.loadStruct(l.kZ.dload_url)}if(l.kZ.top_mode&amp;&amp;l.kZ.mode==&quot;web&quot;&amp;&amp; !l.kZ.context){this._mouseOver=true}}if((!l.kZ.dload)||(l.kZ.dload&amp;&amp;(!l.itemPull[this.id][&quot;loaded&quot;]||l.itemPull[this.id][&quot;loaded&quot;]==&quot;yes&quot;))){if((l.itemPull[this.id][&quot;complex&quot;])&amp;&amp;(l.kZ.selected!= -1)){if(l.kZ.top_mode&amp;&amp;l.kZ.mode==&quot;web&quot;&amp;&amp; !l.kZ.context){this._mouseOver=true;var r=this.id;this._menuOpenTM=window.setTimeout(function(){l._showPolygon(r,l.kZ.dir_toplv)},l.kZ.top_tmtime)}else{l._showPolygon(this.id,l.kZ.dir_toplv)}}}}l._doOnTouchMenu(this.id.replace(l.idPrefix,&quot;&quot;))};a.onmouseout=function(){if(!((l.itemPull[this.id][&quot;complex&quot;])&amp;&amp;(l.kZ.selected!= -1))&amp;&amp;(l.itemPull[this.id][&quot;state&quot;]==&quot;enabled&quot;)){if(l.itemPull[this.id][&quot;cssNormal&quot;]!=null){a.className=l.itemPull[this.id][&quot;cssNormal&quot;]}else{a.className=&quot;dhtmlxMenu_&quot;+l.kZ.skin+&quot;_TopLevel_Item_Normal&quot;}}if(l.kZ.mode==&quot;web&quot;){window.clearTimeout(l.kZ.tm_handler);l.kZ.tm_handler=window.setTimeout(function(){l._clearAndHide()},l.kZ.tm_sec,&quot;JavaScript&quot;)}if(l.kZ.top_mode&amp;&amp;l.kZ.mode==&quot;web&quot;&amp;&amp; !l.kZ.context){this._mouseOver=false;window.clearTimeout(this._menuOpenTM)}};a.onclick=function(u){if(l.kZ.mode==&quot;web&quot;){window.clearTimeout(l.kZ.tm_handler)}if(l.kZ.mode!=&quot;web&quot;&amp;&amp;l.itemPull[this.id][&quot;state&quot;]==&quot;disabled&quot;){return}u=u||event;u.cancelBubble=true;if(u.preventDefault){u.preventDefault()}else{u.returnValue=false}if(l.kZ.mode==&quot;win&quot;){if(l.itemPull[this.id][&quot;complex&quot;]){if(l.kZ.selected==this.id){l.kZ.selected= -1;var r=false}else{l.kZ.selected=this.id;var r=true}if(r){l._showPolygon(this.id,l.kZ.dir_toplv)}else{l._hidePolygon(this.id)}}}var m=(l.itemPull[this.id][&quot;complex&quot;]?&quot;c&quot;:&quot;-&quot;);var v=(l.itemPull[this.id][&quot;state&quot;]!=&quot;enabled&quot;?&quot;d&quot;:&quot;-&quot;);var q={ctrl:u.ctrlKey,alt:u.altKey,shift:u.shiftKey};l._doOnClick(this.id.replace(l.idPrefix,&quot;&quot;),m+v+&quot;t&quot;,q);return false};if(this.kZ.skin==&quot;dhx_terrace&quot;){this._improveTerraceSkin()}};dhtmlXMenuObject.prototype._addSubMenuPolygon=function(m,l){var c=this._renderSublevelPolygon(m,l);var a=this._getMenuNodes(l);for(g=0;g&lt;a.length;g++){if(this.itemPull[a[g]][&quot;type&quot;]==&quot;separator&quot;){this._renderSeparator(a[g],null)}else{this._renderSublevelItem(a[g],null)}}if(m==l){var h=&quot;topLevel&quot;}else{var h=&quot;subLevel&quot;}for(var g=0;g&lt;a.length;g++){if(this.itemPull[a[g]][&quot;complex&quot;]){this._addSubMenuPolygon(m,this.itemPull[a[g]][&quot;id&quot;])}}};dhtmlXMenuObject.prototype._renderSublevelPolygon=function(l,h){var c=document.createElement(&quot;DIV&quot;);c.className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_SubLevelArea_Polygon &quot;+(this.kZ.rtl?&quot;dir_right&quot;:&quot;&quot;);c.dir=&quot;ltr&quot;;c.oncontextmenu=function(m){m=m||event;if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}m.cancelBubble=true;return false};c.id=&quot;polygon_&quot;+h;c.onclick=function(m){m=m||event;m.cancelBubble=true};c.style.display=&quot;none&quot;;document.body.insertBefore(c,document.body.firstChild);c.innerHTML='';var g=document.createElement(&quot;TABLE&quot;);g.className=&quot;dhtmlxMebu_SubLevelArea_Tbl&quot;;g.cellSpacing=0;g.cellPadding=0;g.border=0;var a=document.createElement(&quot;TBODY&quot;);g.appendChild(a);c.childNodes[1].appendChild(g);c.tbl=g;c.tbd=a;this.idPull[c.id]=c;if(this.sxDacProc!=null){this.idPull[&quot;sxDac_&quot;+h]=new this.sxDacProc(c,c.className);if(window.dhx4.isIE){this.idPull[&quot;sxDac_&quot;+h]._setSpeed(this.dacSpeedIE);this.idPull[&quot;sxDac_&quot;+h]._setCustomCycle(this.dacCyclesIE)}else{this.idPull[&quot;sxDac_&quot;+h]._setSpeed(this.dacSpeed);this.idPull[&quot;sxDac_&quot;+h]._setCustomCycle(this.dacCycles)}}return c};dhtmlXMenuObject.prototype._renderSublevelItem=function(a,r){var o=this;var q=document.createElement(&quot;TR&quot;);q.className=(this.itemPull[a][&quot;state&quot;]==&quot;enabled&quot;?&quot;sub_item&quot;:&quot;sub_item_dis&quot;);var n=document.createElement(&quot;TD&quot;);n.className=&quot;sub_item_icon&quot;;var s=this.itemPull[a][(this.itemPull[a][&quot;state&quot;]==&quot;enabled&quot;?&quot;imgen&quot;:&quot;imgdis&quot;)];if(s!=&quot;&quot;){var w=this.itemPull[a][&quot;type&quot;];if(w==&quot;checkbox&quot;||w==&quot;radio&quot;){var l=document.createElement(&quot;DIV&quot;);l.id=&quot;image_&quot;+this.itemPull[a][&quot;id&quot;];l.className=&quot;sub_icon &quot;+s;n.appendChild(l)}if(!(w==&quot;checkbox&quot;||w==&quot;radio&quot;)){var l=document.createElement(&quot;IMG&quot;);l.id=&quot;image_&quot;+this.itemPull[a][&quot;id&quot;];l.className=&quot;sub_icon&quot;;l.src=this.kZ.icons_path+s;n.appendChild(l)}}else{n.innerHTML=&quot; &quot;}var m=document.createElement(&quot;TD&quot;);m.className=&quot;sub_item_text&quot;;if(this.itemPull[a][&quot;title&quot;]!=&quot;&quot;){var v=document.createElement(&quot;DIV&quot;);v.className=&quot;sub_item_text&quot;;v.innerHTML=this.itemPull[a][&quot;title&quot;];m.appendChild(v)}else{m.innerHTML=&quot; &quot;}var h=document.createElement(&quot;TD&quot;);h.className=&quot;sub_item_hk&quot;;if(this.itemPull[a][&quot;complex&quot;]){var c=document.createElement(&quot;DIV&quot;);c.className=&quot;complex_arrow&quot;;c.id=&quot;arrow_&quot;+this.itemPull[a][&quot;id&quot;];h.appendChild(c)}else{if(this.itemPull[a][&quot;hotkey&quot;].length&gt;0&amp;&amp; !this.itemPull[a][&quot;complex&quot;]){var g=document.createElement(&quot;DIV&quot;);g.className=&quot;sub_item_hk&quot;;g.innerHTML=this.itemPull[a][&quot;hotkey&quot;];h.appendChild(g)}else{h.innerHTML=&quot; &quot;}}q.appendChild(this.kZ.rtl?h:n);q.appendChild(m);q.appendChild(this.kZ.rtl?n:h);q.id=this.itemPull[a][&quot;id&quot;];q.parent=this.itemPull[a][&quot;parent&quot;];if(this.itemPull[a][&quot;tip&quot;].length&gt;0){q.title=this.itemPull[a][&quot;tip&quot;]}q.onselectstart=function(x){x=x||event;if(x.preventDefault){x.preventDefault()}else{x.returnValue=false}return false};q.onmouseover=function(x){if(o.kZ.hide_tm[this.id]){window.clearTimeout(o.kZ.hide_tm[this.id])}if(o.kZ.mode==&quot;web&quot;){window.clearTimeout(o.kZ.tm_handler)}if(!this._visible){o._redistribSubLevelSelection(this.id,this.parent)}this._visible=true};q.onmouseout=function(){if(o.kZ.mode==&quot;web&quot;){if(o.kZ.tm_handler){window.clearTimeout(o.kZ.tm_handler)}o.kZ.tm_handler=window.setTimeout(function(){if(o&amp;&amp;o._clearAndHide){o._clearAndHide()}},o.kZ.tm_sec,&quot;JavaScript&quot;)}var x=this;if(o.kZ.hide_tm[this.id]){window.clearTimeout(o.kZ.hide_tm[this.id])}o.kZ.hide_tm[this.id]=window.setTimeout(function(){x._visible=false},50)};q.onclick=function(y){if(!o.mR(&quot;onClick&quot;)&amp;&amp;o.itemPull[this.id][&quot;complex&quot;]){return}y=y||event;y.cancelBubble=true;if(y.preventDefault){y.preventDefault()}else{y.returnValue=false}tc=(o.itemPull[this.id][&quot;complex&quot;]?&quot;c&quot;:&quot;-&quot;);td=(o.itemPull[this.id][&quot;state&quot;]==&quot;enabled&quot;?&quot;-&quot;:&quot;d&quot;);var x={ctrl:y.ctrlKey,alt:y.altKey,shift:y.shiftKey};switch(o.itemPull[this.id][&quot;type&quot;]){case &quot;checkbox&quot;:o._checkboxOnClickHandler(this.id.replace(o.idPrefix,&quot;&quot;),tc+td+&quot;n&quot;,x);break;case &quot;radio&quot;:o._radioOnClickHandler(this.id.replace(o.idPrefix,&quot;&quot;),tc+td+&quot;n&quot;,x);break;case &quot;item&quot;:o._doOnClick(this.id.replace(o.idPrefix,&quot;&quot;),tc+td+&quot;n&quot;,x);break}return false};var u=this.idPull[&quot;polygon_&quot;+this.itemPull[a][&quot;parent&quot;]];if(r!=null){r++;if(r&lt;0){r=0}if(r&gt;u.tbd.childNodes.length-1){r=null}}if(r!=null&amp;&amp;u.tbd.childNodes[r]!=null){u.tbd.insertBefore(q,u.tbd.childNodes[r])}else{u.tbd.appendChild(q)}this.idPull[q.id]=q};dhtmlXMenuObject.prototype._renderSeparator=function(c,n){var a=(this.kZ.context?&quot;SubLevelArea&quot;:(this.itemPull[c][&quot;parent&quot;]==this.idPrefix+this.topId?&quot;TopLevel&quot;:&quot;SubLevelArea&quot;));if(a==&quot;TopLevel&quot;&amp;&amp;this.kZ.context){return}var l=this;if(a!=&quot;TopLevel&quot;){var m=document.createElement(&quot;TR&quot;);m.className=&quot;sub_sep&quot;;var g=document.createElement(&quot;TD&quot;);g.colSpan=&quot;3&quot;;m.appendChild(g)}var h=document.createElement(&quot;DIV&quot;);h.id=&quot;separator_&quot;+c;h.className=(a==&quot;TopLevel&quot;?&quot;top_sep&quot;:&quot;sub_sep&quot;);h.onselectstart=function(r){r=r||event;if(r.preventDefault){r.preventDefault()}else{r.returnValue=false}};h.onclick=function(s){s=s||event;s.cancelBubble=true;var r={ctrl:s.ctrlKey,alt:s.altKey,shift:s.shiftKey};l._doOnClick(this.id.replace(&quot;separator_&quot;+l.idPrefix,&quot;&quot;),&quot;--s&quot;,r)};if(a==&quot;TopLevel&quot;){if(n!=null){n++;if(n&lt;0){n=0}if(this.vI.childNodes[n]!=null){this.vI.insertBefore(h,this.vI.childNodes[n])}else{this.vI.appendChild(h)}}else{var q=this.vI.childNodes[this.vI.childNodes.length-1];if(String(q).search(&quot;TopLevel_Text&quot;)== -1){this.vI.appendChild(h)}else{this.vI.insertBefore(h,q)}}this.idPull[h.id]=h}else{var o=this.idPull[&quot;polygon_&quot;+this.itemPull[c][&quot;parent&quot;]];if(n!=null){n++;if(n&lt;0){n=0}if(n&gt;o.tbd.childNodes.length-1){n=null}}if(n!=null&amp;&amp;o.tbd.childNodes[n]!=null){o.tbd.insertBefore(m,o.tbd.childNodes[n])}else{o.tbd.appendChild(m)}g.appendChild(h);this.idPull[h.id]=m}};dhtmlXMenuObject.prototype.addNewSeparator=function(a,c){c=this.idPrefix+(c!=null?c:this._genStr(24));var g=this.idPrefix+this.getParentId(a);this._addItemIntoGlobalStrorage(c,g,&quot;&quot;,&quot;separator&quot;,false,&quot;&quot;,&quot;&quot;);this._renderSeparator(c,this.getItemPosition(a))};dhtmlXMenuObject.prototype._initObj=function(u,v,n){if(!(u instanceof Array)){n=u.parentId;if(n!=null&amp;&amp;String(n).indexOf(this.idPrefix)!==0){n=this.idPrefix+String(n)}u=u.items}for(var g=0;g<U>0){this.itemPull[u[g].id].complex=true;this._initObj(u[g].items,true,u[g].id)}else{if(this.kZ.dload&amp;&amp;u[g].complex==true){this.itemPull[u[g].id].loaded=&quot;no&quot;}}this.itemPull[u[g].id].items=null}if(v!==true){if(this.kZ.dload==true){if(n==null){this._initTopLevelMenu()}else{this._addSubMenuPolygon(n,n);if(this.kZ.selected==n){var s=(this.itemPull[n].parent==this.idPrefix+this.topId);var c=(s&amp;&amp; !this.kZ.context?this.kZ.dir_toplv:this.kZ.dir_sublv);var l=false;if(s&amp;&amp;this.kZ.top_mode&amp;&amp;this.kZ.mode==&quot;web&quot;&amp;&amp; !this.kZ.context){var x=this.idPull[n];if(x._mouseOver==true){var m=this.kZ.top_tmtime-(new Date().getTime()-x._dynLoadTM);if(m&gt;1){var r=n;var o=this;x._menuOpenTM=window.setTimeout(function(){o._showPolygon(r,c);o=r=null},m);l=true}}}if(!l){this._showPolygon(n,c)}}this.itemPull[n].loaded=&quot;yes&quot;;if(this.kZ.dload_icon==true){this._updateLoaderIcon(n,false)}}}else{this.ahY()}}};dhtmlXMenuObject.prototype._xmlToJson=function(l,h){var n=[];if(h==null){var o=l.getElementsByTagName(this.kZ.tags.root);if(o==null||o.length==0){return data}o=o[0]}else{o=l}if(o.getAttribute(&quot;parentId&quot;)!=null){h=this.idPrefix+o.getAttribute(&quot;parentId&quot;)}for(var c=0;c&lt;o.childNodes.length;c++){if(typeof(o.childNodes[c].tagName)!=&quot;undefined&quot;&amp;&amp;String(o.childNodes[c].tagName).toLowerCase()==this.kZ.tags.item){var a=o.childNodes[c];var v={id:this.idPrefix+(a.getAttribute(&quot;id&quot;)||this._genStr(24)),title:a.getAttribute(&quot;text&quot;)||&quot;&quot;,imgen:a.getAttribute(&quot;img&quot;)||&quot;&quot;,imgdis:a.getAttribute(&quot;imgdis&quot;)||&quot;&quot;,tip:&quot;&quot;,hotkey:&quot;&quot;,type:a.getAttribute(&quot;type&quot;)||&quot;item&quot;};if(a.getAttribute(&quot;cssNormal&quot;)!=null){v.cssNormal=a.getAttribute(&quot;cssNormal&quot;)}if(v.type==&quot;checkbox&quot;){v.checked=a.getAttribute(&quot;checked&quot;)}if(v.type==&quot;radio&quot;){v.checked=a.getAttribute(&quot;checked&quot;);v.group=a.getAttribute(&quot;group&quot;)}v.state=&quot;enabled&quot;;if(a.getAttribute(&quot;enabled&quot;)!=null&amp;&amp;window.dhx4.s2b(a.getAttribute(&quot;enabled&quot;))==false){v.state=&quot;disabled&quot;}else{if(a.getAttribute(&quot;disabled&quot;)!=null&amp;&amp;window.dhx4.s2b(a.getAttribute(&quot;disabled&quot;))==true){v.state=&quot;disabled&quot;}}v.parent=(h!=null?h:this.idPrefix+this.topId);if(this.kZ.dload){v.complex=(a.getAttribute(&quot;complex&quot;)!=null);if(v.complex){v.loaded=&quot;no&quot;}}else{var g=this._xmlToJson(a,v.id);v.items=g.items;v.complex=(v.items.length&gt;0)}for(var s=0;s&lt;a.childNodes.length;s++){if(typeof(a.childNodes[s].tagName)!=&quot;undefined&quot;){var u=String(a.childNodes[s].tagName||&quot;&quot;).toLowerCase();if(u==this.kZ.tags.userdata){var m=a.childNodes[s];if(m.getAttribute(&quot;name&quot;)!=null){this.userData[v.id+&quot;_&quot;+m.getAttribute(&quot;name&quot;)]=(m.firstChild!=null&amp;&amp;m.firstChild.nodeValue!=null?m.firstChild.nodeValue:&quot;&quot;)}}if(u==this.kZ.tags.text_ext){v.title=a.childNodes[s].firstChild.nodeValue}if(u==this.kZ.tags.tooltip){v.tip=a.childNodes[s].firstChild.nodeValue}if(u==this.kZ.tags.hotkey){v.hotkey=a.childNodes[s].firstChild.nodeValue}if(u==this.kZ.tags.href&amp;&amp;v.type==&quot;item&quot;){v.href_link=a.childNodes[s].firstChild.nodeValue;if(a.childNodes[s].getAttribute(&quot;target&quot;)!=null){v.href_target=a.childNodes[s].getAttribute(&quot;target&quot;)}}}}n.push(v)}}var a={parentId:h,items:n};return a};dhtmlXMenuObject.prototype.enableDynamicLoading=function(a,c){this.kZ.dload=true;this.kZ.dload_url=a;this.kZ.dload_sign=(String(this.kZ.dload_url).search(/\?/)== -1?&quot;?&quot;:&quot;&amp;&quot;);this.kZ.dload_icon=c;this.ahY()};dhtmlXMenuObject.prototype._updateLoaderIcon=function(h,g){if(this.idPull[h]==null){return}if(String(this.idPull[h].className).search(&quot;TopLevel_Item&quot;)&gt;=0){return}var c=(this.kZ.rtl?0:2);if(!this.idPull[h].childNodes[c]){return}if(!this.idPull[h].childNodes[c].childNodes[0]){return}var a=this.idPull[h].childNodes[c].childNodes[0];if(String(a.className).search(&quot;complex_arrow&quot;)===0){a.className=&quot;complex_arrow&quot;+(g?&quot;_loading&quot;:&quot;&quot;)}};dhtmlXMenuObject.prototype.addNewSibling=function(h,l,a,c,g,o){var n=this.idPrefix+(l!=null?l:this._genStr(24));var m=this.idPrefix+(h!=null?this.getParentId(h):this.topId);this._addItemIntoGlobalStrorage(n,m,a,&quot;item&quot;,c,g,o);if((m==this.idPrefix+this.topId)&amp;&amp;(!this.kZ.context)){this._renderToplevelItem(n,this.getItemPosition(h))}else{this._renderSublevelItem(n,this.getItemPosition(h))}};dhtmlXMenuObject.prototype.addNewChild=function(n,m,h,a,c,g,l){if(n==null){if(this.kZ.context){n=this.topId}else{this.addNewSibling(n,h,a,c,g,l);if(m!=null){this.setItemPosition(h,m)}return}}h=this.idPrefix+(h!=null?h:this._genStr(24));if(this.setHotKey){this.setHotKey(n,&quot;&quot;)}n=this.idPrefix+n;this._addItemIntoGlobalStrorage(h,n,a,&quot;item&quot;,c,g,l);if(this.idPull[&quot;polygon_&quot;+n]==null){this._renderSublevelPolygon(n,n)}this._renderSublevelItem(h,m-1);this._redefineComplexState(n)};dhtmlXMenuObject.prototype.removeItem=function(h,m,l){if(!m){h=this.idPrefix+h}var n=null;if(h!=this.idPrefix+this.topId){if(this.itemPull[h]==null){return}if(this.idPull[&quot;polygon_&quot;+h]&amp;&amp;this.idPull[&quot;polygon_&quot;+h]._tmShow){window.clearTimeout(this.idPull[&quot;polygon_&quot;+h]._tmShow)}var v=this.itemPull[h][&quot;type&quot;];if(v==&quot;separator&quot;){var u=this.idPull[&quot;separator_&quot;+h];if(this.itemPull[h][&quot;parent&quot;]==this.idPrefix+this.topId){u.onclick=null;u.onselectstart=null;u.id=null;u.parentNode.removeChild(u)}else{u.childNodes[0].childNodes[0].onclick=null;u.childNodes[0].childNodes[0].onselectstart=null;u.childNodes[0].childNodes[0].id=null;u.childNodes[0].removeChild(u.childNodes[0].childNodes[0]);u.removeChild(u.childNodes[0]);u.parentNode.removeChild(u)}this.idPull[&quot;separator_&quot;+h]=null;this.itemPull[h]=null;delete this.idPull[&quot;separator_&quot;+h];delete this.itemPull[h];u=null}else{n=this.itemPull[h][&quot;parent&quot;];var u=this.idPull[h];u.onclick=null;u.oncontextmenu=null;u.onmouseover=null;u.onmouseout=null;u.onselectstart=null;u.id=null;while(u.childNodes.length&gt;0){u.removeChild(u.childNodes[0])}u.parentNode.removeChild(u);this.idPull[h]=null;this.itemPull[h]=null;delete this.idPull[h];delete this.itemPull[h];u=null}v=null}for(var r in this.itemPull){if(this.itemPull[r][&quot;parent&quot;]==h){this.removeItem(r,true,true)}}var s=new Array(h);if(n!=null&amp;&amp; !l){if(this.idPull[&quot;polygon_&quot;+n]!=null){if(this.idPull[&quot;polygon_&quot;+n].tbd.childNodes.length==0){s.push(n);this._updateItemComplexState(n,false,false)}}}for(var c=0;c&lt;s.length;c++){if(this.idPull[&quot;polygon_&quot;+s[c]]){var g=this.idPull[&quot;polygon_&quot;+s[c]];g.onclick=null;g.oncontextmenu=null;g.tbl.removeChild(g.tbd);g.tbd=null;g.childNodes[1].removeChild(g.tbl);g.tbl=null;g.id=null;g.parentNode.removeChild(g);g=null;if(window.dhx4.isIE6){var o=&quot;polygon_&quot;+s[c]+&quot;_ie6cover&quot;;if(this.idPull[o]!=null){document.body.removeChild(this.idPull[o]);delete this.idPull[o]}}if(this.idPull[&quot;arrowup_&quot;+h]!=null&amp;&amp;this._removeArrow){this._removeArrow(&quot;arrowup_&quot;+h)}if(this.idPull[&quot;arrowdown_&quot;+h]!=null&amp;&amp;this._removeArrow){this._removeArrow(&quot;arrowdown_&quot;+h)}this.idPull[&quot;polygon_&quot;+s[c]]=null;delete this.idPull[&quot;polygon_&quot;+s[c]]}}s=null;if(this.kZ.skin==&quot;dhx_terrace&quot;&amp;&amp;arguments.length==1){this._improveTerraceSkin()}};dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(o,a,g,n,h,c,m){var l={id:o,title:g,imgen:(c!=null?c:&quot;&quot;),imgdis:(m!=null?m:&quot;&quot;),type:n,state:(h==true?&quot;disabled&quot;:&quot;enabled&quot;),parent:a,complex:false,hotkey:&quot;&quot;,tip:&quot;&quot;};this.itemPull[l.id]=l};dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.kZ.context=true;if(this.base._autoSkinUpdate==true){this.base.className=this.base.className.replace(&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_Middle&quot;,&quot;&quot;);this.base._autoSkinUpdate=false}if(this.kZ.ctx_baseid!=null){this.addContextZone(this.kZ.ctx_baseid)}};dhtmlXMenuObject.prototype.addContextZone=function(c){if(c==document.body){c=&quot;document.body.&quot;+this.idPrefix;var h=document.body}else{var h=document.getElementById(c)}var m=false;for(var g in this.kZ.ctx_zones){m=m||(g==c)||(this.kZ.ctx_zones[g]==h)}if(m==true){return false}this.kZ.ctx_zones[c]=h;var l=this;if(window.dhx4.isOpera){this.operaContext=function(a){l._doOnContextMenuOpera(a,l)};h.addEventListener(&quot;mouseup&quot;,this.operaContext,false)}else{if(h.oncontextmenu!=null&amp;&amp; !h._oldContextMenuHandler){h._oldContextMenuHandler=h.oncontextmenu}h.oncontextmenu=function(n){for(var a in dhtmlXMenuObject.prototype.liveInst){if(a!=l.kZ.live_id){if(dhtmlXMenuObject.prototype.liveInst[a].context){dhtmlXMenuObject.prototype.liveInst[a]._hideContextMenu()}}}n=n||event;n.cancelBubble=true;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}l._doOnContextBeforeCall(n,this);return false}}};dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(g,a){for(var c in dhtmlXMenuObject.prototype.liveInst){if(c!=a.kZ.live_id){if(dhtmlXMenuObject.prototype.liveInst[c].context){dhtmlXMenuObject.prototype.liveInst[c]._hideContextMenu()}}}g.cancelBubble=true;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}if(g.button==0&amp;&amp;g.ctrlKey==true){a._doOnContextBeforeCall(g,this)}return false};dhtmlXMenuObject.prototype.removeContextZone=function(a){if(!this.isContextZone(a)){return false}if(a==document.body){a=&quot;document.body.&quot;+this.idPrefix}var c=this.kZ.ctx_zones[a];if(window.dhx4.isOpera){c.removeEventListener(&quot;mouseup&quot;,this.operaContext,false)}else{c.oncontextmenu=(c._oldContextMenuHandler!=null?c._oldContextMenuHandler:null);c._oldContextMenuHandler=null}try{this.kZ.ctx_zones[a]=null;delete this.kZ.ctx_zones[a]}catch(g){}return true};dhtmlXMenuObject.prototype.isContextZone=function(a){if(a==document.body&amp;&amp;this.kZ.ctx_zones[&quot;document.body.&quot;+this.idPrefix]!=null){return true}var c=false;if(this.kZ.ctx_zones[a]!=null){if(this.kZ.ctx_zones[a]==document.getElementById(a)){c=true}}return c};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){if(this.idPull[&quot;polygon_&quot;+this.idPrefix+this.topId]==null){return false}return(this.idPull[&quot;polygon_&quot;+this.idPrefix+this.topId].style.display==&quot;&quot;)};dhtmlXMenuObject.prototype._showContextMenu=function(c,g,a){this._clearAndHide();if(this.idPull[&quot;polygon_&quot;+this.idPrefix+this.topId]==null){return false}window.clearTimeout(this.kZ.tm_handler);this.idPull[this.idPrefix+this.topId]=new Array(c,g);this._showPolygon(this.idPrefix+this.topId,&quot;bottom&quot;);this.callEvent(&quot;onContextMenu&quot;,[a])};dhtmlXMenuObject.prototype._hideContextMenu=function(){if(this.idPull[&quot;polygon_&quot;+this.idPrefix+this.topId]==null){return false}this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId)};dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(l,n){this.kZ.ctx_zoneid=n.id;this._clearAndHide();this._hideContextMenu();var h=(l.srcElement||l.target);var c=(window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML?l.offsetX:l.layerX);var a=(window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML?l.offsetY:l.layerY);var m=window.dhx4.absLeft(h)+c;var g=window.dhx4.absTop(h)+a;if(this.mR(&quot;onBeforeContextMenu&quot;)){if(this.callEvent(&quot;onBeforeContextMenu&quot;,[n.id,l])){if(this.kZ.ctx_autoshow){this._showContextMenu(m,g,n.id);this.callEvent(&quot;onAfterContextMenu&quot;,[n.id,l])}}}else{if(this.kZ.ctx_autoshow){this._showContextMenu(m,g,n.id);this.callEvent(&quot;onAfterContextMenu&quot;,[n.id])}}};dhtmlXMenuObject.prototype.showContextMenu=function(a,c){this._showContextMenu(a,c,false)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};dhtmlXMenuObject.prototype.setAutoShowMode=function(a){this.kZ.ctx_autoshow=(a==true?true:false)};dhtmlXMenuObject.prototype.setAutoHideMode=function(a){this.kZ.ctx_autohide=(a==true?true:false)};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(a){this.kZ.ctx_hideall=(a==true?true:false)};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.kZ.ctx_hideall};dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var g in this.itemPull){if(this.itemPull[g].parent==this.idPrefix+this.topId&amp;&amp;this.idPull[g]!=null){var l=false;var h=false;if(this.idPull[g].parentNode.firstChild==this.idPull[g]){l=true}if(this.idPull[g].parentNode.lastChild==this.idPull[g]){h=true}for(var c in this.itemPull){if(this.itemPull[c].type==&quot;separator&quot;&amp;&amp;this.itemPull[c].parent==this.idPrefix+this.topId){if(this.idPull[g].nextSibling==this.idPull[&quot;separator_&quot;+c]){h=true}if(this.idPull[g].previousSibling==this.idPull[&quot;separator_&quot;+c]){l=true}}}this.idPull[g].style.borderLeftWidth=(l?&quot;1px&quot;:&quot;0px&quot;);this.idPull[g].style.borderTopLeftRadius=this.idPull[g].style.borderBottomLeftRadius=(l?&quot;3px&quot;:&quot;0px&quot;);this.idPull[g].style.borderTopRightRadius=this.idPull[g].style.borderBottomRightRadius=(h?&quot;3px&quot;:&quot;0px&quot;);this.idPull[g]._bl=l;this.idPull[g]._br=h}}};dhtmlXMenuObject.prototype._improveTerraceButton=function(c,a){if(a){this.idPull[c].style.borderBottomLeftRadius=(this.idPull[c]._bl?&quot;3px&quot;:&quot;0px&quot;);this.idPull[c].style.borderBottomRightRadius=(this.idPull[c]._br?&quot;3px&quot;:&quot;0px&quot;)}else{this.idPull[c].style.borderBottomLeftRadius=&quot;0px&quot;;this.idPull[c].style.borderBottomRightRadius=&quot;0px&quot;}};dhtmlXMenuObject.prototype.setItemEnabled=function(a){this._changeItemState(a,&quot;enabled&quot;,this._getItemLevelType(a))};dhtmlXMenuObject.prototype.setItemDisabled=function(a){this._changeItemState(a,&quot;disabled&quot;,this._getItemLevelType(a))};dhtmlXMenuObject.prototype.isItemEnabled=function(a){return(this.itemPull[this.idPrefix+a]!=null?(this.itemPull[this.idPrefix+a][&quot;state&quot;]==&quot;enabled&quot;):false)};dhtmlXMenuObject.prototype._changeItemState=function(l,h,c){var g=false;var a=this.idPrefix+l;if((this.itemPull[a]!=null)&amp;&amp;(this.idPull[a]!=null)){if(this.itemPull[a][&quot;state&quot;]!=h){this.itemPull[a][&quot;state&quot;]=h;if(this.itemPull[a][&quot;parent&quot;]==this.idPrefix+this.topId&amp;&amp; !this.kZ.context){this.idPull[a].className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_TopLevel_Item_&quot;+(this.itemPull[a][&quot;state&quot;]==&quot;enabled&quot;?&quot;Normal&quot;:&quot;Disabled&quot;)}else{this.idPull[a].className=&quot;sub_item&quot;+(this.itemPull[a][&quot;state&quot;]==&quot;enabled&quot;?&quot;&quot;:&quot;_dis&quot;)}this._updateItemComplexState(this.idPrefix+l,this.itemPull[this.idPrefix+l][&quot;complex&quot;],false);this._updateItemImage(l,c);if((this.idPrefix+this.kZ.last_click==a)&amp;&amp;(c!=&quot;TopLevel&quot;)){this._redistribSubLevelSelection(a,this.itemPull[a][&quot;parent&quot;])}if(c==&quot;TopLevel&quot;&amp;&amp; !this.kZ.context){}}}return g};dhtmlXMenuObject.prototype.getItemText=function(a){return(this.itemPull[this.idPrefix+a]!=null?this.itemPull[this.idPrefix+a][&quot;title&quot;]:&quot;&quot;)};dhtmlXMenuObject.prototype.setItemText=function(l,h){l=this.idPrefix+l;if((this.itemPull[l]!=null)&amp;&amp;(this.idPull[l]!=null)){this._clearAndHide();this.itemPull[l][&quot;title&quot;]=h;if(this.itemPull[l][&quot;parent&quot;]==this.idPrefix+this.topId&amp;&amp; !this.kZ.context){var g=null;for(var a=0;a&lt;this.idPull[l].childNodes.length;a++){try{if(this.idPull[l].childNodes[a].className==&quot;top_level_text&quot;){g=this.idPull[l].childNodes[a]}}catch(c){}}if(String(this.itemPull[l][&quot;title&quot;]).length==&quot;&quot;||this.itemPull[l][&quot;title&quot;]==null){if(g!=null){g.parentNode.removeChild(g)}}else{if(!g){g=document.createElement(&quot;DIV&quot;);g.className=&quot;top_level_text&quot;;if(this.kZ.rtl&amp;&amp;this.idPull[l].childNodes.length&gt;0){this.idPull[l].insertBefore(g,this.idPull[l].childNodes[0])}else{this.idPull[l].appendChild(g)}}g.innerHTML=this.itemPull[l][&quot;title&quot;]}}else{var g=null;for(var a=0;a&lt;this.idPull[l].childNodes[1].childNodes.length;a++){if(String(this.idPull[l].childNodes[1].childNodes[a].className||&quot;&quot;)==&quot;sub_item_text&quot;){g=this.idPull[l].childNodes[1].childNodes[a]}}if(String(this.itemPull[l][&quot;title&quot;]).length==&quot;&quot;||this.itemPull[l][&quot;title&quot;]==null){if(g){g.parentNode.removeChild(g);g=null;this.idPull[l].childNodes[1].innerHTML=&quot; &quot;}}else{if(!g){g=document.createElement(&quot;DIV&quot;);g.className=&quot;sub_item_text&quot;;this.idPull[l].childNodes[1].innerHTML=&quot;&quot;;this.idPull[l].childNodes[1].appendChild(g)}g.innerHTML=this.itemPull[l][&quot;title&quot;]}}}};dhtmlXMenuObject.prototype.loadFromHTML=function(g,m,h){var c=this.kZ.tags.item;this.kZ.tags.item=&quot;div&quot;;var l=(typeof(g)==&quot;string&quot;?document.getElementById(g):g);var a=this._xmlToJson(l,this.idPrefix+this.topId);this._initObj(a);this.kZ.tags.item=c;if(m){l.parentNode.removeChild(l)}l=objOd=null;if(onload!=null){if(typeof(h)==&quot;function&quot;){h()}else{if(typeof(window[h])==&quot;function&quot;){window[h]()}}}};dhtmlXMenuObject.prototype.hideItem=function(a){this._changeItemVisible(a,false)};dhtmlXMenuObject.prototype.showItem=function(a){this._changeItemVisible(a,true)};dhtmlXMenuObject.prototype.isItemHidden=function(c){var a=null;if(this.idPull[this.idPrefix+c]!=null){a=(this.idPull[this.idPrefix+c].style.display==&quot;none&quot;)}return a};dhtmlXMenuObject.prototype._changeItemVisible=function(g,c){var a=this.idPrefix+g;if(this.itemPull[a]==null){return}if(this.itemPull[a][&quot;type&quot;]==&quot;separator&quot;){a=&quot;separator_&quot;+a}if(this.idPull[a]==null){return}this.idPull[a].style.display=(c?&quot;&quot;:&quot;none&quot;);this._redefineComplexState(this.itemPull[this.idPrefix+g][&quot;parent&quot;])};dhtmlXMenuObject.prototype.setUserData=function(g,a,c){this.userData[this.idPrefix+g+&quot;_&quot;+a]=c};dhtmlXMenuObject.prototype.getUserData=function(c,a){return(this.userData[this.idPrefix+c+&quot;_&quot;+a]!=null?this.userData[this.idPrefix+c+&quot;_&quot;+a]:null)};dhtmlXMenuObject.prototype.setOpenMode=function(a){this.kZ.mode=(a==&quot;win&quot;?&quot;win&quot;:&quot;web&quot;)};dhtmlXMenuObject.prototype.setWebModeTimeout=function(a){this.kZ.tm_sec=(!isNaN(a)?a:400)};dhtmlXMenuObject.prototype.getItemImage=function(c){var a=new Array(null,null);c=this.idPrefix+c;if(this.itemPull[c][&quot;type&quot;]==&quot;item&quot;){a[0]=this.itemPull[c][&quot;imgen&quot;];a[1]=this.itemPull[c][&quot;imgdis&quot;]}return a};dhtmlXMenuObject.prototype.setItemImage=function(g,a,c){if(this.itemPull[this.idPrefix+g][&quot;type&quot;]!=&quot;item&quot;){return}this.itemPull[this.idPrefix+g][&quot;imgen&quot;]=a;this.itemPull[this.idPrefix+g][&quot;imgdis&quot;]=c;this._updateItemImage(g,this._getItemLevelType(g))};dhtmlXMenuObject.prototype.clearItemImage=function(a){this.setItemImage(a,&quot;&quot;,&quot;&quot;)};dhtmlXMenuObject.prototype.setVisibleArea=function(c,a,h,g){this.kZ.v_enabled=true;this.kZ.v.x1=c;this.kZ.v.x2=a;this.kZ.v.y1=h;this.kZ.v.y2=g};dhtmlXMenuObject.prototype.setTooltip=function(c,a){c=this.idPrefix+c;if(!(this.itemPull[c]!=null&amp;&amp;this.idPull[c]!=null)){return}this.idPull[c].title=(a.length&gt;0?a:null);this.itemPull[c][&quot;tip&quot;]=a};dhtmlXMenuObject.prototype.getTooltip=function(a){if(this.itemPull[this.idPrefix+a]==null){return null}return this.itemPull[this.idPrefix+a][&quot;tip&quot;]};dhtmlXMenuObject.prototype.setTopText=function(a){if(this.kZ.context){return}if(this._topText==null){this._topText=document.createElement(&quot;DIV&quot;);this._topText.className=&quot;dhtmlxMenu_TopLevel_Text_&quot;+(this.kZ.rtl?&quot;left&quot;:(this.kZ.align==&quot;left&quot;?&quot;right&quot;:&quot;left&quot;));this.base.appendChild(this._topText)}this._topText.innerHTML=a};dhtmlXMenuObject.prototype.setAlign=function(a){if(this.kZ.align==a){return}if(a==&quot;left&quot;||a==&quot;right&quot;){this.kZ.align=a;if(this.vI){this.vI.className=(this.kZ.align==&quot;right&quot;?&quot;align_right&quot;:&quot;align_left&quot;)}if(this._topText!=null){this._topText.className=&quot;dhtmlxMenu_TopLevel_Text_&quot;+(this.kZ.align==&quot;left&quot;?&quot;right&quot;:&quot;left&quot;)}}};dhtmlXMenuObject.prototype.setHref=function(g,a,c){if(this.itemPull[this.idPrefix+g]==null){return}this.itemPull[this.idPrefix+g][&quot;href_link&quot;]=a;if(c!=null){this.itemPull[this.idPrefix+g][&quot;href_target&quot;]=c}};dhtmlXMenuObject.prototype.clearHref=function(a){if(this.itemPull[this.idPrefix+a]==null){return}delete this.itemPull[this.idPrefix+a][&quot;href_link&quot;];delete this.itemPull[this.idPrefix+a][&quot;href_target&quot;]};dhtmlXMenuObject.prototype.getCircuit=function(c){var a=new Array(c);while(this.getParentId(c)!=this.topId){c=this.getParentId(c);a[a.length]=c}return a.reverse()};dhtmlXMenuObject.prototype._getCheckboxState=function(a){if(this.itemPull[this.idPrefix+a]==null){return null}return this.itemPull[this.idPrefix+a][&quot;checked&quot;]};dhtmlXMenuObject.prototype._setCheckboxState=function(c,a){if(this.itemPull[this.idPrefix+c]==null){return}this.itemPull[this.idPrefix+c][&quot;checked&quot;]=a};dhtmlXMenuObject.prototype._updateCheckboxImage=function(c){if(this.idPull[this.idPrefix+c]==null){return}this.itemPull[this.idPrefix+c][&quot;imgen&quot;]=&quot;chbx_&quot;+(this._getCheckboxState(c)?&quot;1&quot;:&quot;0&quot;);this.itemPull[this.idPrefix+c][&quot;imgdis&quot;]=this.itemPull[this.idPrefix+c][&quot;imgen&quot;];try{this.idPull[this.idPrefix+c].childNodes[(this.kZ.rtl?2:0)].childNodes[0].className=&quot;sub_icon &quot;+this.itemPull[this.idPrefix+c][&quot;imgen&quot;]}catch(a){}};dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(h,a,c){if(a.charAt(1)==&quot;d&quot;){return}if(this.itemPull[this.idPrefix+h]==null){return}var g=this._getCheckboxState(h);if(this.mR(&quot;onCheckboxClick&quot;)){if(this.callEvent(&quot;onCheckboxClick&quot;,[h,g,this.kZ.ctx_zoneid,c])){this.setCheckboxState(h,!g)}}else{this.setCheckboxState(h,!g)}if(this.mR(&quot;onClick&quot;)){this.callEvent(&quot;onClick&quot;,[h])}};dhtmlXMenuObject.prototype.setCheckboxState=function(c,a){this._setCheckboxState(c,a);this._updateCheckboxImage(c)};dhtmlXMenuObject.prototype.getCheckboxState=function(a){return this._getCheckboxState(a)};dhtmlXMenuObject.prototype.addCheckbox=function(o,h,q,r,s,a,l){if(this.kZ.context&amp;&amp;h==this.topId){}else{if(this.itemPull[this.idPrefix+h]==null){return}if(o==&quot;child&quot;&amp;&amp;this.itemPull[this.idPrefix+h][&quot;type&quot;]!=&quot;item&quot;){return}}var m=&quot;chbx_&quot;+(a?&quot;1&quot;:&quot;0&quot;);var g=m;if(o==&quot;sibling&quot;){var c=this.idPrefix+(r!=null?r:this._genStr(24));var n=this.idPrefix+this.getParentId(h);this._addItemIntoGlobalStrorage(c,n,s,&quot;checkbox&quot;,l,m,g);this.itemPull[c][&quot;checked&quot;]=a;this._renderSublevelItem(c,this.getItemPosition(h))}else{var c=this.idPrefix+(r!=null?r:this._genStr(24));var n=this.idPrefix+h;this._addItemIntoGlobalStrorage(c,n,s,&quot;checkbox&quot;,l,m,g);this.itemPull[c][&quot;checked&quot;]=a;if(this.idPull[&quot;polygon_&quot;+n]==null){this._renderSublevelPolygon(n,n)}this._renderSublevelItem(c,q-1);this._redefineComplexState(n)}};dhtmlXMenuObject.prototype.setHotKey=function(m,a){m=this.idPrefix+m;if(!(this.itemPull[m]!=null&amp;&amp;this.idPull[m]!=null)){return}if(this.itemPull[m][&quot;parent&quot;]==this.idPrefix+this.topId&amp;&amp; !this.kZ.context){return}if(this.itemPull[m][&quot;complex&quot;]){return}var c=this.itemPull[m][&quot;type&quot;];if(!(c==&quot;item&quot;||c==&quot;checkbox&quot;||c==&quot;radio&quot;)){return}var l=null;try{if(this.idPull[m].childNodes[this.kZ.rtl?0:2].childNodes[0].className==&quot;sub_item_hk&quot;){l=this.idPull[m].childNodes[this.kZ.rtl?0:2].childNodes[0]}}catch(h){}if(a.length==0){this.itemPull[m][&quot;hotkey_backup&quot;]=this.itemPull[m][&quot;hotkey&quot;];this.itemPull[m][&quot;hotkey&quot;]=&quot;&quot;;if(l!=null){l.parentNode.removeChild(l)}}else{this.itemPull[m][&quot;hotkey&quot;]=a;this.itemPull[m][&quot;hotkey_backup&quot;]=null;if(l==null){l=document.createElement(&quot;DIV&quot;);l.className=&quot;sub_item_hk&quot;;var g=this.idPull[m].childNodes[this.kZ.rtl?0:2];while(g.childNodes.length&gt;0){g.removeChild(g.childNodes[0])}g.appendChild(l)}l.innerHTML=a}};dhtmlXMenuObject.prototype.getHotKey=function(a){if(this.itemPull[this.idPrefix+a]==null){return null}return this.itemPull[this.idPrefix+a][&quot;hotkey&quot;]};dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(a){var g=this._getSubItemToDeselectByPolygon(a);for(var c=0;c&lt;this.kZ.opened_poly.length;c++){if(this.kZ.opened_poly[c]!=a){this._hidePolygon(this.kZ.opened_poly[c])}}for(var c=0;c&lt;g.length;c++){if(this.idPull[g[c]]!=null&amp;&amp;this.itemPull[g[c]][&quot;state&quot;]==&quot;enabled&quot;){this.idPull[g[c]].className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_SubLevelArea_Item_Normal&quot;}}};dhtmlXMenuObject.prototype._checkArrowsState=function(h){var c=this.idPull[&quot;polygon_&quot;+h].childNodes[1];var g=this.idPull[&quot;arrowup_&quot;+h];var a=this.idPull[&quot;arrowdown_&quot;+h];if(c.scrollTop==0){g.className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_SubLevelArea_ArrowUp_Disabled&quot;}else{g.className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_SubLevelArea_ArrowUp&quot;+(g.over?&quot;_Over&quot;:&quot;&quot;)}if(c.scrollTop+c.offsetHeight&lt;c.scrollHeight){a.className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_SubLevelArea_ArrowDown&quot;+(a.over?&quot;_Over&quot;:&quot;&quot;)}else{a.className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_SubLevelArea_ArrowDown_Disabled&quot;}c=g=a=null};dhtmlXMenuObject.prototype._addUpArrow=function(h){var c=this;var g=document.createElement(&quot;DIV&quot;);g.FC=this.idPrefix+h;g.id=&quot;arrowup_&quot;+this.idPrefix+h;g.className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_SubLevelArea_ArrowUp&quot;;g.over=false;g.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};g.oncontextmenu=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};g.onmouseover=function(){if(c.kZ.mode==&quot;web&quot;){window.clearTimeout(c.kZ.tm_handler)}c._clearAllSelectedSubItemsInPolygon(this.FC);if(this.className==&quot;dhtmlxMenu_&quot;+c.kZ.skin+&quot;_SubLevelArea_ArrowUp_Disabled&quot;){return}this.className=&quot;dhtmlxMenu_&quot;+c.kZ.skin+&quot;_SubLevelArea_ArrowUp_Over&quot;;this.over=true;c._canScrollUp=true;c._doScrollUp(this.FC,true)};g.onmouseout=function(){if(c.kZ.mode==&quot;web&quot;){window.clearTimeout(c.kZ.tm_handler);c.kZ.tm_handler=window.setTimeout(function(){c._clearAndHide()},c.kZ.tm_sec,&quot;JavaScript&quot;)}this.over=false;c._canScrollUp=false;if(this.className==&quot;dhtmlxMenu_&quot;+c.kZ.skin+&quot;_SubLevelArea_ArrowUp_Disabled&quot;){return}this.className=&quot;dhtmlxMenu_&quot;+c.kZ.skin+&quot;_SubLevelArea_ArrowUp&quot;;window.clearTimeout(c.kZ.of_utm)};g.onclick=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}l.cancelBubble=true;return false};var a=this.idPull[&quot;polygon_&quot;+this.idPrefix+h];a.childNodes[0].appendChild(g);this.idPull[g.id]=g;a=g=null};dhtmlXMenuObject.prototype._addDownArrow=function(h){var c=this;var g=document.createElement(&quot;DIV&quot;);g.FC=this.idPrefix+h;g.id=&quot;arrowdown_&quot;+this.idPrefix+h;g.className=&quot;dhtmlxMenu_&quot;+this.kZ.skin+&quot;_SubLevelArea_ArrowDown&quot;;g.over=false;g.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};g.oncontextmenu=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};g.onmouseover=function(){if(c.kZ.mode==&quot;web&quot;){window.clearTimeout(c.kZ.tm_handler)}c._clearAllSelectedSubItemsInPolygon(this.FC);if(this.className==&quot;dhtmlxMenu_&quot;+c.kZ.skin+&quot;_SubLevelArea_ArrowDown_Disabled&quot;){return}this.className=&quot;dhtmlxMenu_&quot;+c.kZ.skin+&quot;_SubLevelArea_ArrowDown_Over&quot;;this.over=true;c._canScrollDown=true;c._doScrollDown(this.FC,true)};g.onmouseout=function(){if(c.kZ.mode==&quot;web&quot;){window.clearTimeout(c.kZ.tm_handler);c.kZ.tm_handler=window.setTimeout(function(){c._clearAndHide()},c.kZ.tm_sec,&quot;JavaScript&quot;)}this.over=false;c._canScrollDown=false;if(this.className==&quot;dhtmlxMenu_&quot;+c.kZ.skin+&quot;_SubLevelArea_ArrowDown_Disabled&quot;){return}this.className=&quot;dhtmlxMenu_&quot;+c.kZ.skin+&quot;_SubLevelArea_ArrowDown&quot;;window.clearTimeout(c.kZ.of_dtm)};g.onclick=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}l.cancelBubble=true;return false};var a=this.idPull[&quot;polygon_&quot;+this.idPrefix+h];a.childNodes[2].appendChild(g);this.idPull[g.id]=g;a=g=null};dhtmlXMenuObject.prototype._removeUpArrow=function(c){var a=&quot;arrowup_&quot;+this.idPrefix+c;this._removeArrow(a)};dhtmlXMenuObject.prototype._removeDownArrow=function(c){var a=&quot;arrowdown_&quot;+this.idPrefix+c;this._removeArrow(a)};dhtmlXMenuObject.prototype._removeArrow=function(a){var c=this.idPull[a];c.onselectstart=null;c.oncontextmenu=null;c.onmouseover=null;c.onmouseout=null;c.onclick=null;if(c.parentNode){c.parentNode.removeChild(c)}c=null;this.idPull[a]=null;try{delete this.idPull[a]}catch(g){}};dhtmlXMenuObject.prototype._isArrowExists=function(a){if(this.idPull[&quot;arrowup_&quot;+a]!=null&amp;&amp;this.idPull[&quot;arrowdown_&quot;+a]!=null){return true}return false};dhtmlXMenuObject.prototype._doScrollUp=function(m,h){var a=this.idPull[&quot;polygon_&quot;+m].childNodes[1];if(this._canScrollUp&amp;&amp;a.scrollTop&gt;0){var g=false;var l=a.scrollTop-this.kZ.of_ustep;if(l&lt;0){g=true;l=0}a.scrollTop=l;if(!g){var c=this;this.kZ.of_utm=window.setTimeout(function(){c._doScrollUp(m,false);c=null},this.kZ.of_utime)}else{h=true}}else{this._canScrollUp=false;this._checkArrowsState(m)}if(h){this._checkArrowsState(m)}};dhtmlXMenuObject.prototype._doScrollDown=function(m,h){var a=this.idPull[&quot;polygon_&quot;+m].childNodes[1];if(this._canScrollDown&amp;&amp;a.scrollTop+a.offsetHeight&lt;=a.scrollHeight){var g=false;var l=a.scrollTop+this.kZ.of_dstep;if(l+a.offsetHeight&gt;=a.scrollHeight){g=true;l=a.scrollHeight-a.offsetHeight}a.scrollTop=l;if(!g){var c=this;this.kZ.of_dtm=window.setTimeout(function(){c._doScrollDown(m,false);c=null},this.kZ.of_dtime)}else{h=true}}else{this._canScrollDown=false;this._checkArrowsState(m)}if(h){this._checkArrowsState(m)}};dhtmlXMenuObject.prototype._countPolygonItems=function(m){var h=0;for(var c in this.itemPull){var g=this.itemPull[c][&quot;parent&quot;];var l=this.itemPull[c][&quot;type&quot;];if(g==this.idPrefix+m&amp;&amp;(l==&quot;item&quot;||l==&quot;radio&quot;||l==&quot;checkbox&quot;)){h++}}return h};dhtmlXMenuObject.prototype.setOverflowHeight=function(h){if(h===&quot;auto&quot;){this.kZ.overflow_limit=0;this.kZ.auto_overflow=true;return}if(this.kZ.overflow_limit==0&amp;&amp;h&lt;=0){return}this._clearAndHide();if(this.kZ.overflow_limit&gt;=0&amp;&amp;h&gt;0){this.kZ.overflow_limit=h;return}if(this.kZ.overflow_limit&gt;0&amp;&amp;h&lt;=0){for(var g in this.itemPull){if(this._isArrowExists(g)){var c=String(g).replace(this.idPrefix,&quot;&quot;);this._removeUpArrow(c);this._removeDownArrow(c);this.idPull[&quot;polygon_&quot;+g].childNodes[1].style.height=&quot;&quot;}}this.kZ.overflow_limit=0;return}};dhtmlXMenuObject.prototype._getRadioImgObj=function(g){try{var a=this.idPull[this.idPrefix+g].childNodes[(this.kZ.rtl?2:0)].childNodes[0]}catch(c){var a=null}return a};dhtmlXMenuObject.prototype._setRadioState=function(h,g){var c=this._getRadioImgObj(h);if(c!=null){var a=this.itemPull[this.idPrefix+h];a.checked=g;a.imgen=&quot;rdbt_&quot;+(a.checked?&quot;1&quot;:&quot;0&quot;);a.imgdis=a.imgen;c.className=&quot;sub_icon &quot;+a.imgen}};dhtmlXMenuObject.prototype._radioOnClickHandler=function(h,a,c){if(a.charAt(1)==&quot;d&quot;||this.itemPull[this.idPrefix+h][&quot;group&quot;]==null){return}var g=this.itemPull[this.idPrefix+h][&quot;group&quot;];if(this.mR(&quot;onRadioClick&quot;)){if(this.callEvent(&quot;onRadioClick&quot;,[g,this.getRadioChecked(g),h,this.kZ.ctx_zoneid,c])){this.setRadioChecked(g,h)}}else{this.setRadioChecked(g,h)}if(this.mR(&quot;onClick&quot;)){this.callEvent(&quot;onClick&quot;,[h])}};dhtmlXMenuObject.prototype.getRadioChecked=function(h){var m=null;for(var g=0;g&lt;this.radio[h].length;g++){var l=this.radio[h][g].replace(this.idPrefix,&quot;&quot;);var a=this._getRadioImgObj(l);if(a!=null){var c=(a.className).match(/rdbt_1$/gi);if(c!=null){m=l}}}return m};dhtmlXMenuObject.prototype.setRadioChecked=function(c,h){if(this.radio[c]==null){return}for(var a=0;a&lt;this.radio[c].length;a++){var g=this.radio[c][a].replace(this.idPrefix,&quot;&quot;);this._setRadioState(g,(g==h))}};dhtmlXMenuObject.prototype.addRadioButton=function(q,l,r,s,u,v,a,m){if(this.kZ.context&amp;&amp;l==this.topId){}else{if(this.itemPull[this.idPrefix+l]==null){return}if(q==&quot;child&quot;&amp;&amp;this.itemPull[this.idPrefix+l][&quot;type&quot;]!=&quot;item&quot;){return}}var g=this.idPrefix+(s!=null?s:this._genStr(24));var n=&quot;rdbt_&quot;+(a?&quot;1&quot;:&quot;0&quot;);var c=n;if(q==&quot;sibling&quot;){var o=this.idPrefix+this.getParentId(l);this._addItemIntoGlobalStrorage(g,o,u,&quot;radio&quot;,m,n,c);this._renderSublevelItem(g,this.getItemPosition(l))}else{var o=this.idPrefix+l;this._addItemIntoGlobalStrorage(g,o,u,&quot;radio&quot;,m,n,c);if(this.idPull[&quot;polygon_&quot;+o]==null){this._renderSublevelPolygon(o,o)}this._renderSublevelItem(g,r-1);this._redefineComplexState(o)}var h=(v!=null?v:this._genStr(24));this.itemPull[g][&quot;group&quot;]=h;if(this.radio[h]==null){this.radio[h]=new Array()}this.radio[h][this.radio[h].length]=g;if(a==true){this.setRadioChecked(h,String(g).replace(this.idPrefix,&quot;&quot;))}};dhtmlXMenuObject.prototype.serialize=function(){var a=&quot;&lt;menu&gt;&quot;+this._readLevel(this.idPrefix+this.topId)+&quot;&lt;/menu&gt;&quot;;return a};dhtmlXMenuObject.prototype._readLevel=function(h){var l=&quot;&quot;;for(var q in this.itemPull){if(this.itemPull[q][&quot;parent&quot;]==h){var c=&quot;&quot;;var g=&quot;&quot;;var s=&quot;&quot;;var o=String(this.itemPull[q][&quot;id&quot;]).replace(this.idPrefix,&quot;&quot;);var n=&quot;&quot;;var r=(this.itemPull[q][&quot;title&quot;]!=&quot;&quot;?' text=&quot;'+this.itemPull[q][&quot;title&quot;]+'&quot;':&quot;&quot;);var m=&quot;&quot;;if(this.itemPull[q][&quot;type&quot;]==&quot;item&quot;){if(this.itemPull[q][&quot;imgen&quot;]!=&quot;&quot;){c=' img=&quot;'+this.itemPull[q][&quot;imgen&quot;]+'&quot;'}if(this.itemPull[q][&quot;imgdis&quot;]!=&quot;&quot;){g=' imgdis=&quot;'+this.itemPull[q][&quot;imgdis&quot;]+'&quot;'}if(this.itemPull[q][&quot;hotkey&quot;]!=&quot;&quot;){s=&quot;&lt;hotkey&gt;&quot;+this.itemPull[q][&quot;hotkey&quot;]+&quot;&lt;/hotkey&gt;&quot;}}if(this.itemPull[q][&quot;type&quot;]==&quot;separator&quot;){n=' type=&quot;separator&quot;'}else{if(this.itemPull[q][&quot;state&quot;]==&quot;disabled&quot;){m=' enabled=&quot;false&quot;'}}if(this.itemPull[q][&quot;type&quot;]==&quot;checkbox&quot;){n=' type=&quot;checkbox&quot;'+(this.itemPull[q][&quot;checked&quot;]?' checked=&quot;true&quot;':&quot;&quot;)}if(this.itemPull[q][&quot;type&quot;]==&quot;radio&quot;){n=' type=&quot;radio&quot; group=&quot;'+this.itemPull[q][&quot;group&quot;]+'&quot; '+(this.itemPull[q][&quot;checked&quot;]?' checked=&quot;true&quot;':&quot;&quot;)}l+=&quot;&lt;item id='&quot;+o+&quot;'&quot;+r+n+c+g+m+&quot;&gt;&quot;;l+=s;if(this.itemPull[q][&quot;complex&quot;]){l+=this._readLevel(q)}l+=&quot;&lt;/item&gt;&quot;}}return l};dhtmlXMenuObject.prototype.enableEffect=function(g,l,h){this._menuEffect=(g==&quot;opacity&quot;||g==&quot;slide&quot;||g==&quot;slide+&quot;?g:false);this._pOpStyleIE=(navigator.userAgent.search(/MSIE\s[678]\.0/gi)&gt;=0);for(var c in this.idPull){if(c.search(/polygon/)===0){this._pOpacityApply(c,(this._pOpStyleIE?100:1));this.idPull[c].style.height=&quot;&quot;}}this._pOpMax=(typeof(l)==&quot;undefined&quot;?100:l)/(this._pOpStyleIE?1:100);this._pOpStyleName=(this._pOpStyleIE?&quot;filter&quot;:&quot;opacity&quot;);this._pOpStyleValue=(this._pOpStyleIE?&quot;progid:DXImageTransform.Microsoft.Alpha(Opacity=#)&quot;:&quot;#&quot;);this._pSlSteps=(this._pOpStyleIE?10:20);this._pSlTMTimeMax=h||50};dhtmlXMenuObject.prototype._showPolygonEffect=function(a){this._pShowHide(a,true)};dhtmlXMenuObject.prototype._hidePolygonEffect=function(a){this._pShowHide(a,false)};dhtmlXMenuObject.prototype._pOpacityApply=function(a,c){this.idPull[a].style[this._pOpStyleName]=String(this._pOpStyleValue).replace(&quot;#&quot;,c||this.idPull[a]._op)};dhtmlXMenuObject.prototype._pShowHide=function(a,c){if(!this.idPull){return}if(this.idPull[a]._tmShow!=null){if((this.idPull[a]._step_h&gt;0&amp;&amp;c==true)||(this.idPull[a]._step_h&lt;0&amp;&amp;c==false)){return}window.clearTimeout(this.idPull[a]._tmShow);this.idPull[a]._tmShow=null;this.idPull[a]._max_h=null}if(c==false&amp;&amp;(this.idPull[a].style.visibility==&quot;hidden&quot;||this.idPull[a].style.display==&quot;none&quot;)){return}if(c==true&amp;&amp;this.idPull[a].style.display==&quot;none&quot;){this.idPull[a].style.visibility=&quot;hidden&quot;;this.idPull[a].style.display=&quot;&quot;}if(this.idPull[a]._max_h==null){this.idPull[a]._max_h=parseInt(this.idPull[a].offsetHeight);this.idPull[a]._h=(c==true?0:this.idPull[a]._max_h);this.idPull[a]._step_h=Math.round(this.idPull[a]._max_h/this._pSlSteps)*(c==true?1: -1);if(this.idPull[a]._step_h==0){return}this.idPull[a]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps);if(this._menuEffect==&quot;slide+&quot;||this._menuEffect==&quot;opacity&quot;){this.idPull[a].op_tm=this.idPull[a]._step_tm;this.idPull[a].op_step=(this._pOpMax/this._pSlSteps)*(c==true?1: -1);if(this._pOpStyleIE){this.idPull[a].op_step=Math.round(this.idPull[a].op_step)}this.idPull[a]._op=(c==true?0:this._pOpMax);this._pOpacityApply(a)}else{this.idPull[a]._op=(this._pOpStyleIE?100:1);this._pOpacityApply(a)}if(this._menuEffect.search(/slide/)===0){this.idPull[a].style.height=&quot;0px&quot;}this.idPull[a].style.visibility=&quot;visible&quot;}this._pEffectSet(a,this.idPull[a]._h+this.idPull[a]._step_h)};dhtmlXMenuObject.prototype._pEffectSet=function(g,c){if(!this.idPull){return}if(this.idPull[g]._tmShow){window.clearTimeout(this.idPull[g]._tmShow)}this.idPull[g]._h=Math.max(0,Math.min(c,this.idPull[g]._max_h));if(this._menuEffect.search(/slide/)===0){this.idPull[g].style.height=this.idPull[g]._h+&quot;px&quot;}c+=this.idPull[g]._step_h;if(this._menuEffect==&quot;slide+&quot;||this._menuEffect==&quot;opacity&quot;){this.idPull[g]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[g]._op+this.idPull[g].op_step));this._pOpacityApply(g)}if((this.idPull[g]._step_h&gt;0&amp;&amp;c&lt;=this.idPull[g]._max_h)||(this.idPull[g]._step_h&lt;0&amp;&amp;c&gt;=0)){var a=this;this.idPull[g]._tmShow=window.setTimeout(function(){a._pEffectSet(g,c)},this.idPull[g]._step_tm)}else{if(this._menuEffect.search(/slide/)===0){this.idPull[g].style.height=&quot;&quot;}if(this.idPull[g]._step_h&lt;0){this.idPull[g].style.visibility=&quot;hidden&quot;}if(this._menuEffect==&quot;slide+&quot;||this._menuEffect==&quot;opacity&quot;){this.idPull[g]._op=(this.idPull[g]._step_h&lt;0?(this._pOpStyleIE?100:1):this._pOpMax);this._pOpacityApply(g)}this.idPull[g]._tmShow=null;this.idPull[g]._h=null;this.idPull[g]._max_h=null;this.idPull[g]._step_tm=null}};function dhtmlXRibbon(h){var g=this,c,a;this.kZ={type:&quot;ribbon&quot;,icons_path:(h&amp;&amp;h.icons_path)?h.icons_path:&quot;&quot;,skin:&quot;dhx_skyblue&quot;};this._eventHandlers={};this._base=null;this._items={};this._tabbar=null;this.childIds=[];if(typeof(h)===&quot;string&quot;){a=h}else{if(h&amp;&amp;h.tagName){a=h}else{if(h&amp;&amp;h.parent){if(h.parent.tagName||typeof(h.parent)===&quot;string&quot;){a=h.parent}}}}this._doOnHighlight0=function(o){o=o||event;var n=o.target||o.srcElement;var l=g._findItemByNode(n);var m=g._items[l._dhx_ribbonId];if(m.kZ.disable){return}if(g.items[m.type]&amp;&amp;typeof(g.items[m.type].mouseover)===&quot;function&quot;){if(g.items[m.type].mouseover(m,g,o)!==true){return false}}if(!/dhxrb_highlight0/.test(l.className)){l.className+=&quot; dhxrb_highlight0&quot;}};this._doOffHighlight0=function(o){o=o||event;var n=o.target||o.srcElement;var l=g._findItemByNode(n);var m=g._items[l._dhx_ribbonId];if(m.kZ.disable){return}if(g.items[m.type]&amp;&amp;typeof(g.items[m.type].mouseout)===&quot;function&quot;){if(g.items[m.type].mouseout(m,g,o)!==true){return false}}if(/dhxrb_highlight1/.test(l.className)){l.className=l.className.replace(/\s?dhxrb_highlight1/,&quot;&quot;)}if(/dhxrb_highlight0/.test(l.className)){l.className=l.className.replace(/\s?dhxrb_highlight0/,&quot;&quot;)}};this._doOnHighlight1=function(o){o=o||event;var n=o.target||o.srcElement;var l=g._findItemByNode(n);var m=g._items[l._dhx_ribbonId];if(m.kZ.disable){return}g.callEvent(&quot;_showPopup&quot;,[m.id]);if(g.items[m.type]&amp;&amp;typeof(g.items[m.type].mousedown)===&quot;function&quot;){if(g.items[m.type].mousedown(m,g,o)!==true){return false}}if(!/dhxrb_highlight1/.test(l.className)){l.className+=&quot; dhxrb_highlight1&quot;}};this._doOffHighlight1=function(o){o=o||event;var n=o.target||o.srcElement;var l=g._findItemByNode(n);var m=g._items[l._dhx_ribbonId];if(m.kZ.disable){return}if(g.items[m.type]&amp;&amp;typeof(g.items[m.type].mouseup)===&quot;function&quot;){if(g.items[m.type].mouseup(m,g,o)!==true){return false}}if(/dhxrb_highlight1/.test(l.className)){l.className=l.className.replace(/\s?dhxrb_highlight1/,&quot;&quot;)}};this._doOnClick=function(o){o=o||event;var n=o.target||o.srcElement;var l=g._findItemByNode(n);var m=g._items[l._dhx_ribbonId];if(m.kZ.disable){return}if(g.items[m.type]&amp;&amp;typeof(g.items[m.type].click)===&quot;function&quot;){g.items[m.type].click(m,g,o)}};this._doOnFocus=function(o){o=o||event;var n=o.target||o.srcElement;var l=g._findItemByNode(n);var m=g._items[l._dhx_ribbonId];if(m.kZ.disable){return}g.callEvent(&quot;_showPopup&quot;,[m.id]);if(g.items[m.type]&amp;&amp;typeof(g.items[m.type].focus)===&quot;function&quot;){g.items[m.type].focus(m,g,o)}};this._doOnBlur=function(o){o=o||event;var n=o.target||o.srcElement;var l=g._findItemByNode(n);var m=g._items[l._dhx_ribbonId];if(m.kZ.disable){return}if(g.items[m.type]&amp;&amp;typeof(g.items[m.type].blur)===&quot;function&quot;){g.items[m.type].blur(m,g,o)}};this._doOnChange=function(o){o=o||event;var n=o.target||o.srcElement;var l=g._findItemByNode(n);var m=g._items[l._dhx_ribbonId];if(m.kZ.disable){return}if(g.items[m.type]&amp;&amp;typeof(g.items[m.type].JA)===&quot;function&quot;){g.items[m.type].JA(m,g,o)}};this._doOnKeydown=function(o){o=o||event;var n=o.target||o.srcElement;var l=g._findItemByNode(n);var m=g._items[l._dhx_ribbonId];if(m.kZ.disable){return}if(g.items[m.type]&amp;&amp;typeof(g.items[m.type].keydown)===&quot;function&quot;){g.items[m.type].keydown(m,g,o)}};this._tabCustomApi={enable:function(o,n){var m=null,l=null;n=n||false;if(n!==true){m=g._items[this._idd];for(l in m.childIds){l=parseInt(l);g.enable(m.childIds[l])}}return g._tabOriginalApi.enable.apply(this,[o])},disable:function(o,n){var m=null,l=null;if(n!==false){m=g._items[this._idd];for(l in m.childIds){l=parseInt(l);g.disable(m.childIds[l])}}return g._tabOriginalApi.disable.apply(this,[o])},close:function(n){var m=g._items[this._idd],l;g._removeTab(m);g._tabOriginalApi.close.apply(this,[n]);for(l in g._tabOriginalApi){this[l]=null}}};this._attachEventTabbar=function(){this._tabbar.attachEvent(&quot;onSelect&quot;,function(){return g.callEvent(&quot;onSelect&quot;,arguments)});this._tabbar.attachEvent(&quot;onTabClick&quot;,function(){return g.callEvent(&quot;onTabClick&quot;,arguments)});this._tabbar.attachEvent(&quot;onTabClose&quot;,function(){return g.callEvent(&quot;onTabClose&quot;,arguments)})};if(typeof(a)===&quot;string&quot;){this._base=document.getElementById(a)}else{if(a&amp;&amp;a.tagName){this._base=a}else{this._base=document.createElement(&quot;div&quot;);this._base.ahC=true;if(document.body.firstChild){document.body.insertBefore(this._base,document.body.firstChild)}else{document.body.appendChild(this._base)}}}c=dhx4.skin||(typeof(dhtmlx)!==&quot;undefined&quot;?dhtmlx.skin:null)||dhx4.skinDetect(&quot;dhtmlxribbon&quot;)||&quot;dhx_skyblue&quot;;if(typeof(h)===&quot;object&quot;&amp;&amp;h.skin){c=h.skin}this.setSkin(c);dhx4._eventable(this);dhx4._enableDataLoading(this,&quot;_renderData&quot;,&quot;_xmlToJson&quot;,&quot;ribbon&quot;,{struct:true});this.attachEvent(&quot;_onHeightChanged&quot;,function(){this.kZ.inited=true});this._base.className+=&quot; dhxrb_without_tabbar&quot;;this._base.innerHTML=&quot;&quot;;if(h!=null){if(h.json){this.loadStruct(h.json,h.onload)}else{if(h.xml){this.loadStruct(h.xml,h.onload)}else{this._renderData(h)}}}this.unload=function(){var m=null,l=[];for(m in this.childIds){m=parseInt(m);l.push(this.childIds[m])}dhx4._enableDataLoading(this,null,null,null,&quot;clear&quot;);dhx4._eventable(this,&quot;clear&quot;);for(m in l){m=parseInt(m);if(this._items[l[m]].type===&quot;tab&quot;){this.tabs(l[m]).close(false)}else{this.removeItem(l[m])}}if(this._tabbar){this._tabbar.unload();this._tabbar=null}this._base.innerHTML=&quot;&quot;;if(this._base.ahC){this._base.parentNode.removeChild(this._base)}else{this._base.className=this._base.className.replace(/\s?(dhtmlx|dhxrb)(\S*)/ig,&quot;&quot;)}for(m in this){this[m]=null}g=null}}dhtmlXRibbon.prototype.setSizes=function(){if(this._tabbar!=null&amp;&amp;typeof(this.setSizes)==&quot;function&quot;){this._tabbar.setSizes()}};dhtmlXRibbon.prototype._renderData=function(c){var a=this._base.firstChild;if(c!==null){this.kZ.icons_path=c.icons_path||this.kZ.icons_path;if(c.tabs instanceof Array){this._base.className=this._base.className.replace(/\s?dhxrb_without_tabbar/i,&quot;&quot;);a.className=&quot;dhxrb_with_tabbar&quot;;this._tabbar=new dhtmlXTabBar(a);this._attachEventTabbar();this._tabbar.setSkin(this.kZ.skin);this.childIds=this._appendTabs(c.tabs)}else{if(c.items instanceof Array){if(!/\s?dhxrb_without_tabbar/i.test(this._base.className)){this._base.className+=&quot; dhxrb_without_tabbar&quot;}if(/\s?dhxrb_background_area/i.test(a.className)){a.className=&quot;dhxrb_background_area&quot;}a.innerHTML=&quot;&quot;;this.childIds=this._appendBlocks(c.items,a.firstChild)}}this.callEvent(&quot;_onHeightChanged&quot;,[])}};dhtmlXRibbon.prototype._xmlToJson=function(c){var a=c.lastChild||null,h={},g=[];if(a&amp;&amp;a.tagName===&quot;ribbon&quot;){g=this._convertXmlNodeListIntoObject(a.childNodes)}if(g[0]&amp;&amp;g[0].type&amp;&amp;g[0].type.toLowerCase()===&quot;block&quot;){h.items=g}else{h.tabs=g}return h};dhtmlXRibbon.prototype._convertXmlNodeListIntoObject=function(c){var g,a,m=[],h;a=c.length;for(g=0;g&lt;a;g++){h=this._covertXmlNodeToObject(c[g]);if(h){m.push(h)}}return m};dhtmlXRibbon.prototype._covertXmlNodeToObject=function(h){if(!h|| !h.tagName|| !(h.tagName.toLowerCase()===&quot;item&quot;||h.tagName.toLowerCase()===&quot;tab&quot;)){return null}var g,a,c=h.attributes,m={};a=c.length;for(g=0;g&lt;a;g++){switch(c[g].name){case &quot;isbig&quot;:m.isbig=dhx4.s2b(c[g].value);break;case &quot;state&quot;:m.state=dhx4.s2b(c[g].value);break;default:m[c[g].name]=c[g].value}}if(h.childNodes.length){if(h.getAttribute(&quot;type&quot;)===&quot;buttonCombo&quot;||h.getAttribute(&quot;type&quot;)===&quot;buttonSelect&quot;){m.data=h}else{if(h.tagName.toLowerCase()===&quot;tab&quot;){m.items=this._convertXmlNodeListIntoObject(h.childNodes)}else{m.list=this._convertXmlNodeListIntoObject(h.childNodes)}}}return m};dhtmlXRibbon.prototype._appendTabs=function(m){var c,a,g,h=[];a=m.length;for(c=0;c&lt;a;c++){g=this._addTab(m[c]);if(m[c].items instanceof Array){g.childIds=this._appendBlocks(m[c].items,g.base,g)}h.push(g.id)}return h};dhtmlXRibbon.prototype._addTab=function(g){var a,h,c={kZ:{active:false,text:&quot;&quot;,width:null,position:null,disable:false},base:document.createElement(&quot;div&quot;),type:&quot;tab&quot;,childIds:[]};for(a in g){if(a===&quot;items&quot;){continue}c.kZ[a]=g[a]}if(!g.id){c.id=dhx4.newId()}else{c.id=g.id}while(this._items[c.id]){c.id=dhx4.newId()}this._tabbar.hG(c.id,c.kZ.text,c.kZ.width,c.kZ.position,c.kZ.active);c.base.className=&quot;dhxrb_g_area&quot;;c.base._dhx_ribbonId=c.id;this.tabs(c.id).attachObject(c.base);this._changeApiForTab(this.tabs(c.id));this._items[c.id]=c;return c};dhtmlXRibbon.prototype._changeApiForTab=function(c){var a;for(a in this._tabOriginalApi){this._tabOriginalApi[a]=this._tabOriginalApi[a]||c[a];c[a]=this._tabCustomApi[a]}};dhtmlXRibbon.prototype._tabOriginalApi={enable:null,disable:null,close:null};dhtmlXRibbon.prototype._appendBlocks=function(a,u,g){var n,h,o,m,r,c,s=[];g=g||null;h=a.length;for(n=0;n&lt;h;n++){if(typeof(a[n])===&quot;object&quot;&amp;&amp;a[n].type===&quot;block&quot;){o=this._addBlock(a[n],u);if(a[n].list&amp;&amp;(a[n].list instanceof Array)){m=a[n].list;r=m.length;for(c=0;c&lt;r;c++){this._addItem(o.id,null,null,m[c])}}if(g!==null){o.parentId=g.id}if(o.kZ.disable){this.disable(o.id)}s.push(o.id)}}return s};dhtmlXRibbon.prototype._addBlock=function(m,h){var g,a,n,c;n={kZ:{text:&quot;&quot;,text_pos:&quot;bottom&quot;,type:&quot;block&quot;,mode:&quot;cols&quot;,disable:false},type:&quot;block&quot;,childIds:[],base:document.createElement(&quot;div&quot;),contForItems:document.createElement(&quot;div&quot;),contForText:document.createElement(&quot;div&quot;)};for(c in m){if(c===&quot;list&quot;||c===&quot;type&quot;||c===&quot;id&quot;){continue}n.kZ[c]=m[c]}if(!m.id){n.id=dhx4.newId()}else{n.id=m.id}while(this._items[n.id]){n.id=dhx4.newId()}n.base.className=&quot;dhxrb_block_base&quot;;h.appendChild(n.base);n.contForItems.className=&quot;dhxrb_block_items&quot;;n.contForText.className=&quot;dhxrb_block_label&quot;;n.base.appendChild(n.contForItems);if(n.kZ.text){n.contForText.innerHTML=n.kZ.text;if(n.kZ.text_pos===&quot;top&quot;){n.base.insertBefore(n.contForText,n.contForItems)}else{n.base.appendChild(n.contForText)}}n.base._dhx_ribbonId=n.id;this._items[n.id]=n;return n};dhtmlXRibbon.prototype._addItem=function(g,c,q,n){var l=this._items[g],a,m,s=null,o=this,h;if(n.type!==&quot;newLevel&quot;&amp;&amp; !this.items[n.type]){return null}if(n.type===&quot;newLevel&quot;){this._addNewLevel(l)}else{if(l.type===&quot;group&quot;){a=document.createElement(&quot;div&quot;);a.className=&quot;dhxrb_in_group&quot;;l.base.appendChild(a)}else{if(n.isbig){a=document.createElement(&quot;div&quot;);a.className=&quot;dhxrb_big_button&quot;;l.contForItems.appendChild(a)}else{m=this._getContainerForSmallItem(l);a=document.createElement(&quot;div&quot;);a.className=(l.kZ.mode===&quot;rows&quot;)?&quot;dhxrb_in_row&quot;:&quot;dhxrb_3rows_button&quot;;m.appendChild(a)}}}if(a){this._attachEventForItem(a);h={icons_path:n.icons_path||this.kZ.icons_path,skin:this.kZ.skin};for(var r in n){h[r]=n[r]}if(!h.id){h.id=dhx4.newId()}while(this._items[h.id]){h.id=dhx4.newId()}s=(this.items[h.type]&amp;&amp;this.items[h.type].ht)?this.items[h.type].ht(a,h):null}if(s!==null){this._items[s.id]=s;s.parentId=l.id;l.childIds.push(s.id);a._dhx_ribbonId=s.id;if(h.onclick&amp;&amp;(typeof(h.onclick)===&quot;function&quot;)){this._eventHandlers[s.id]=this._eventHandlers[s.id]||{};this._eventHandlers[s.id][&quot;onclick&quot;]=h.onclick}s.callEvent=function(){o.callEvent.apply(o,arguments)};s._callHandler=function(){o._callHandler.apply(o,arguments)};if(this.items[h.type]&amp;&amp;typeof(this.items[h.type].callAfterInit)===&quot;function&quot;){this.items[h.type].callAfterInit.apply(this,[s])}}return s};dhtmlXRibbon.prototype._callHandler=function(c,a){if(this._eventHandlers[c]&amp;&amp;this._eventHandlers[c].onclick){this._eventHandlers[c].onclick.apply(this,a)}};dhtmlXRibbon.prototype.items={};dhtmlXRibbon.prototype.items.button={ht:function(c,a){var g,h;h={base:c,id:a.id,type:a.type,kZ:{text:&quot;&quot;,text_pos:(a.isbig)?&quot;bottom&quot;:&quot;right&quot;,img:null,imgdis:null,isbig:false,disable:false,skin:a.skin}};for(g in a){if(g===&quot;id&quot;||g===&quot;onclick&quot;||g===&quot;type&quot;){continue}h.kZ[g]=a[g]}c.innerHTML=&quot;&lt;img class='dhxrb_image&quot;+((h.kZ.img)?&quot;'&quot;:&quot; dhxrb_invisible'&quot;)+&quot; src='&quot;+((h.kZ.img)?h.kZ.icons_path+h.kZ.img:&quot;&quot;)+&quot;' /&gt;<DIV class="dhxrb_label_button">&quot;+h.kZ.text+&quot;</DIV>&quot;;if(typeof(this.afterRender)===&quot;function&quot;){this.afterRender(h)}if(h.kZ.disable){this.disable(h)}return h},getText:function(a){return a.kZ.text},setText:function(c,g){var a=c.base.childNodes[1];c.kZ.text=g;a.innerHTML=g},mousedown:function(a,g,c){return true},click:function(a,g,c){if(c.button!==0){return false}g._callHandler(a.id,[a.id]);a.callEvent(&quot;onClick&quot;,[a.id]);return false},disable:function(c){var g=c.base.childNodes[0],a=c.base.childNodes[1];if(c.kZ.imgdis){g.src=c.kZ.icons_path+c.kZ.imgdis;if(/\s?dhxrb_invisible/i.test(g.className)){g.className=g.className.replace(/\s?dhxrb_invisible/i,&quot;&quot;)}}if(!/\s?dhxrb_disable_text_style/i.test(a.className)){a.className+=&quot; dhxrb_disable_text_style&quot;}return true},enable:function(c){var g=c.base.childNodes[0],a=c.base.childNodes[1];if(c.kZ.img){g.src=c.kZ.icons_path+c.kZ.img}else{if(!/\s?dhxrb_invisible/i.test(g.className)){g.className+=&quot; dhxrb_invisible&quot;}}if(/\s?dhxrb_disable_text_style/i.test(a.className)){a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,&quot;&quot;)}return true}};dhtmlXRibbon.prototype.items.buttonTwoState={click:function(a,g,c){return false},afterRender:function(a){if(a.kZ.state){this.setState(a,a.kZ.state)}},mouseover:function(a){if(!/dhxrb_highlight0/.test(a.base.className)){a.base.className+=&quot; dhxrb_highlight0&quot;}return false},mouseout:function(a){if(/dhxrb_highlight0/.test(a.base.className)){a.base.className=a.base.className.replace(/\s?dhxrb_highlight0/,&quot;&quot;)}return false},mousedown:function(a,g,c){g._callHandler(a.id,[a.id,!a.kZ.state]);this.setState(a,!a.kZ.state,true);return false},mouseup:function(a){return false},setState:function(a,c,g){g=g||false;c=dhx4.s2b(c);if(c){if(!/dhxrb_highlight1/.test(a.base.className)){a.base.className+=&quot; dhxrb_highlight1&quot;}}else{if(/dhxrb_highlight1/.test(a.base.className)){a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,&quot;&quot;)}}a.kZ.state=c;if(g){a.callEvent(&quot;onStateChange&quot;,[a.id,a.kZ.state])}}};dhtmlXRibbon.prototype.items.buttonSegment={click:function(a,g,c){return false},mousedown:function(a,g,c){this.setState(a,g,true);return false},callAfterInit:function(a){if(a.kZ.state||dhtmlXRibbon.prototype.items.buttonSegment._getSelectedNeighbor(a,this)===null){if(a.kZ.state){a.kZ.state=false}dhtmlXRibbon.prototype.items.buttonSegment.setState(a,this,false)}},afterRender:function(){},setState:function(a,l,h){h=h||false;var g=null,c=dhx4.s2b(a.kZ.state);if(c===false){g=this._getSelectedNeighbor(a,l);if(g!==null){this._unSelect(g)}if(!/dhxrb_highlight1/.test(a.base.className)){a.base.className+=&quot; dhxrb_highlight1&quot;}a.kZ.state=true;if(h){l._callHandler(a.id,[a.id,(g?g.id:null)]);l.callEvent(&quot;onStateChange&quot;,[a.id,(g?g.id:null)])}}},remove:function(g,n){var l=dhx4.s2b(g.kZ.state),m=null,a=0,c=n._items[g.parentId],h;if(l){while(c.childIds[a]&amp;&amp;m===null){h=n._items[c.childIds[a]];if(h.type===&quot;buttonSegment&quot;&amp;&amp;h!==g){m=h}a++}if(m){this.setState(m,n)}}},_unSelect:function(a){var c=dhx4.s2b(a.kZ.state);if(c){if(/dhxrb_highlight1/.test(a.base.className)){a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,&quot;&quot;)}a.kZ.state=false}},_getSelectedNeighbor:function(h,o){var g=o._items[h.parentId],c,a,n,m=null;a=g.childIds.length;for(c=0;c&lt;a;c++){n=o._items[g.childIds[c]];if(n.type===&quot;buttonSegment&quot;&amp;&amp;n.kZ.state){m=n;break}}return m}};dhtmlXRibbon.prototype.items.buttonSelect={itemCollection:[],_isAttachedEventInWindow:false,afterRender:function(c){var a=c.base.childNodes[1];a.innerHTML+=&quot;<SPAN class="dhxrb_arrow"> </SPAN>&quot;;c.menu=null;this.itemCollection.push(c);this._attachEventToWindow();a=null},setText:function(a,g){var c=a.base.childNodes[1].lastChild;a.kZ.text=g;a.base.childNodes[1].innerHTML=g;a.base.childNodes[1].appendChild(c)},_attachEventToWindow:function(){if(this._isAttachedEventInWindow===false){if(typeof(window.addEventListener)===&quot;function&quot;){document.body.addEventListener(&quot;mousedown&quot;,this._hideAllMenus,false)}else{document.body.attachEvent(&quot;onmousedown&quot;,this._hideAllMenus)}this._isAttachedEventInWindow=true}},_detachEventFromWindow:function(){if(typeof(window.addEventListener)===&quot;function&quot;){document.body.removeEventListener(&quot;mousedown&quot;,this._hideAllMenus,false)}else{document.body.detachEvent(&quot;onmousedown&quot;,this._hideAllMenus)}this._isAttachedEventInWindow=false},_hideAllMenus:function(l){l=l||event;var g=l.target||l.srcElement;var a=true;while(g!==null&amp;&amp;a===true){if(g.className!==null&amp;&amp;/SubLevelArea_Polygon/i.test(g.className)){a=false}else{g=g.parentNode}}if(a===false){return}var c=dhtmlXRibbon.prototype.items.buttonSelect.itemCollection;for(var n in c){var h=c[n];if(h.menu instanceof dhtmlXMenuObject){if(h._skipHiding){h._skipHiding=false}else{dhtmlXRibbon.prototype.items.buttonSelect.hideMenu(h)}}}},mousedown:function(a,g,c){a._skipHiding=true;this.showMenu(a);return false},mouseup:function(a){return false},click:function(){},setState:function(){},showMenu:function(c){var a=dhx4.absLeft(c.base),g=dhx4.absTop(c.base)+c.base.offsetHeight;if(!(c.menu instanceof dhtmlXMenuObject)){c.menu=new dhtmlXMenuObject({parent:c.base,icons_path:c.kZ.icons_path,context:true,items:c.kZ.items,skin:c.kZ.skin});if(c.kZ.data){c.menu.loadStruct(c.kZ.data);delete c.kZ.data}c.menu.setAutoHideMode(false);c.menu.attachEvent(&quot;onHide&quot;,function(h){if(h===null){dhtmlXRibbon.prototype.items.buttonSelect._doOnHideMenu(c)}});c.menu.attachEvent(&quot;onShow&quot;,function(h){if(h===null){dhtmlXRibbon.prototype.items.buttonSelect._doOnShowMenu(c)}});c.menu.attachEvent(&quot;onClick&quot;,function(h){c.callEvent(&quot;onClick&quot;,[h])});c.base.oncontextmenu=function(){return false};dhtmlXRibbon.prototype.items.buttonSelect.showMenu(c)}else{c.menu.showContextMenu(a,g)}},hideMenu:function(a){if(a.menu instanceof dhtmlXMenuObject){a.menu.hideContextMenu()}},remove:function(c){var g,a;if(c.menu instanceof dhtmlXMenuObject){c.menu.unload();c.menu=null}c.base.oncontextmenu=null;g=dhtmlXRibbon.prototype._indexOf(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection,c);if(g!== -1){dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.splice(g,1)}if(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.length===0){this._detachEventFromWindow()}},setSkin:function(a,c){if(a.menu instanceof dhtmlXMenuObject){a.menu.setSkin(c)}},_doOnHideMenu:function(a){if(a._skipHiding){a._skipHiding=false}else{if(/dhxrb_highlight1/.test(a.base.className)){a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,&quot;&quot;)}}},_doOnShowMenu:function(a){if(!/dhxrb_highlight1/.test(a.base.className)){a.base.className+=&quot; dhxrb_highlight1&quot;}}};dhtmlXRibbon.prototype.items.group={ht:function(c,a){var g,h;h={base:c,id:a.id,type:a.type,kZ:{disable:false,skin:a.skin},childIds:[]};c.className=&quot;dhxrb_group&quot;;for(g in a){if(g===&quot;id&quot;||g===&quot;onclick&quot;||g===&quot;type&quot;){continue}h.kZ[g]=a[g]}return h},callAfterInit:function(m){this._detachEventFromItem(m.base);var h,a,n=m.kZ.list,o,g,c;a=(n)?n.length:0;for(h=0;h&lt;a;h++){o=this._addItem(m.id,null,null,n[h]);if(o===null){continue}g=o.base.childNodes[1];if(g&amp;&amp; !g.innerHTML&amp;&amp; !/\s?dhxrb_label_hide/i.test(g.className)){g.className+=&quot; dhxrb_label_hide&quot;}}dhtmlXRibbon.prototype.items.group.normalise(m);if(m.kZ.disable){this.disable(m.id)}n=undefined},normalise:function(o){var a=o.base.children;var g=a.length,c=false,q=0;var h,n;for(var m=0;m&lt;g;m++){if(!/dhxrb_separator_group/i.test(a[m].className)){if(/dhxrb_item_hide/i.test(a[m].className)){q++;continue}}if((Math.ceil((m-q)/2)-Math.floor((m-q)/2))===0){if(/dhxrb_separator_group/i.test(a[m].className)){a[m].parentNode.removeChild(a[m]);c=true;break}}else{if(!/dhxrb_separator_group/i.test(a[m].className)){h=document.createElement(&quot;div&quot;);h.className=&quot;dhxrb_separator_groupp&quot;;o.base.insertBefore(h,a[m]);c=true;break}}}if(c){this.normalise(o)}else{n=o.base.lastChild;if(n&amp;&amp;/dhxrb_separator_group/i.test(n.className)){n.parentNode.removeChild(n)}}},hideChild:function(c,h){var a=dhtmlXRibbon.prototype._indexOf(c.base.children,h.base);if(a===0){a++}else{if(a!== -1){a--}else{return}}var g=c.base.children[a];if(g&amp;&amp;/dhxrb_separator_group/i.test(g.className)){g.parentNode.removeChild(g)}},showChild:function(a){this.normalise(a)}};dhtmlXRibbon.prototype.items.input={ht:function(c,a){var g,h;h={base:c,id:a.id,type:a.type,kZ:{text:&quot;&quot;,text_pos:(a.isbig)?&quot;bottom&quot;:&quot;right&quot;,img:null,imgdis:null,isbig:false,disable:false,skin:a.skin,value:&quot;&quot;}};for(g in a){if(g===&quot;id&quot;||g===&quot;onclick&quot;||g===&quot;type&quot;){continue}h.kZ[g]=a[g]}c.innerHTML=&quot;&lt;input type='text' class='dhxrb_input'&gt;<DIV class="dhxrb_label_button">&quot;+h.kZ.text+&quot;</DIV>&quot;;if(typeof(this.afterRender)===&quot;function&quot;){this.afterRender(h)}if(h.kZ.disable){this.disable(h)}if(h.kZ.width){this.setWidth(h,h.kZ.width)}if(h.kZ.value){this.setValue(h,h.kZ.value)}return h},callAfterInit:function(c){var a=c.base.childNodes[0];this._detachEventFromItem(c.base);this._attachEventsToInput(a)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,JA:function(c){var a=c.base.childNodes[0];c.kZ.value=a.value},keydown:function(c,h,g){if(g.keyCode===13){var a=c.base.childNodes[0];c.kZ.value=a.value;h.callEvent(&quot;onEnter&quot;,[c.id,c.kZ.value])}},remove:function(c,g){var a=c.base.childNodes[0];g._detachEventsFromInput(a)},getValue:function(c){var a=c.base.childNodes[0],g;g=a.value;a=undefined;return g},setValue:function(c,g){var a=c.base.childNodes[0],g;a.value=g;c.kZ.value=g},setWidth:function(c,g){var a=c.base.childNodes[0];a.style.width=parseInt(g)+&quot;px&quot;},disable:function(g){var c=g.base.childNodes[0],a=g.base.childNodes[1];c.disabled=true;if(!/\s?dhxrb_disable_text_style/i.test(a.className)){a.className+=&quot; dhxrb_disable_text_style&quot;}return true},enable:function(g){var c=g.base.childNodes[0],a=g.base.childNodes[1];c.disabled=false;if(/\s?dhxrb_disable_text_style/i.test(a.className)){a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,&quot;&quot;)}return true}};dhtmlXRibbon.prototype.items.checkbox={ht:function(c,a){var g,h;h={base:c,id:a.id,type:a.type,kZ:{text:&quot;&quot;,text_pos:(a.isbig)?&quot;bottom&quot;:&quot;right&quot;,disable:false,checked:false}};for(g in a){if(g===&quot;id&quot;||g===&quot;onclick&quot;||g===&quot;type&quot;){continue}h.kZ[g]=a[g]}c.innerHTML=&quot;<DIV class="dhxrb_label_checkbox">&quot;+h.kZ.text+&quot;</DIV>&quot;;if(typeof(this.afterRender)===&quot;function&quot;){this.afterRender(h)}if(h.kZ.checked){this.check(h)}return h},callAfterInit:function(a){if(a.kZ.disable){this.disable(a.id)}},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,mousedown:function(a){return false},mouseup:function(a){return false},click:function(a,g,c){if(c.button!==0){return false}if(a.type===&quot;checkbox&quot;){if(a.kZ.checked){this.uncheck(a,true)}else{this.check(a,true)}}},check:function(a,c){c=c||false;if(a.type!==&quot;checkbox&quot;){return}a.kZ.checked=true;if(!/\s?dhxrb_checked/i.test(a.base.className)){a.base.className+=&quot; dhxrb_checked&quot;}if(c){a.callEvent(&quot;onCheck&quot;,[a.id,a.kZ.checked])}},uncheck:function(a,c){c=c||false;if(a.type!==&quot;checkbox&quot;){return}a.kZ.checked=false;if(/\s?dhxrb_checked/i.test(a.base.className)){a.base.className=a.base.className.replace(/\s?dhxrb_checked/i,&quot;&quot;)}if(c){a.callEvent(&quot;onCheck&quot;,[a.id,a.kZ.checked])}},disable:function(a){return true},enable:function(a){return true}};dhtmlXRibbon.prototype.items.text={ht:function(a,h){var g={base:a,id:h.id,type:h.type,kZ:{text:&quot;&quot;}};for(var c in h){if(c===&quot;id&quot;||c===&quot;type&quot;){continue}g.kZ[c]=h[c]}a.innerHTML=&quot;<DIV class="dhxrb_item_text">&quot;+g.kZ.text+&quot;</DIV>&quot;;if(typeof(this.afterRender)===&quot;function&quot;){this.afterRender(g)}return g},callAfterInit:function(a){this._detachEventFromItem(a.base)},getText:function(a){return a.kZ.text},setText:function(a,c){a.kZ.text=c;a.base.innerHTML=c}};dhtmlXRibbon.prototype.items.buttonCombo={ht:function(a,c){var g,h,l={};h={base:a,id:c.id,type:c.type,kZ:{text:&quot;&quot;,text_pos:&quot;right&quot;,width:140,skin:c.skin}};for(g in c){if(g===&quot;id&quot;||g===&quot;onclick&quot;||g===&quot;type&quot;){continue}h.kZ[g]=c[g]}for(g in h.kZ){if(g===&quot;text&quot;||g===&quot;text_pos&quot;||g===&quot;disable&quot;||g===&quot;data&quot;){continue}l[g]=h.kZ[g]}h.base.className+=&quot; dhxrb_buttoncombo_cont&quot;;h.base.innerHTML=&quot;<DIV class="dhxrb_label_button">&quot;+h.kZ.text+&quot;</DIV>&quot;;l.parent=h.base.firstChild;h.combo=new dhtmlXCombo(l);h.combo.setSkin(l.skin);h.combo.attachEvent(&quot;onChange&quot;,function(m,n){h._callHandler(h.id,[m,n]);h.callEvent(&quot;onSelectOption&quot;,[h.id,m,n])});if(h.kZ.data){h.combo.load(h.kZ.data);delete h.kZ.data}if(typeof(this.afterRender)===&quot;function&quot;){this.afterRender(h)}if(h.kZ.disable){this.disable(h)}return h},callAfterInit:function(a){this._detachEventFromItem(a.base)},disable:function(c){var a=c.base.lastChild;if(c.combo instanceof dhtmlXCombo){c.combo.disable()}if(!/\s?dhxrb_disable_text_style/i.test(a.className)){a.className+=&quot; dhxrb_disable_text_style&quot;}return true},enable:function(c){var a=c.base.lastChild;if(c.combo instanceof dhtmlXCombo){c.combo.enable()}if(/\s?dhxrb_disable_text_style/i.test(a.className)){a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,&quot;&quot;)}return true},remove:function(a){if(a.combo instanceof dhtmlXCombo){a.combo.unload();a.combo=null}},getValue:function(a){var c=null;if(a.combo instanceof dhtmlXCombo){c=a.combo.vL()}return c},setValue:function(a,c){if(a.combo instanceof dhtmlXCombo){a.combo.Um(c)}},setSkin:function(a,c){if(a.combo instanceof dhtmlXCombo){a.combo.setSkin(c)}}};dhtmlXRibbon.prototype.items.slider={ht:function(a,l){var g,h,c={};h={base:a,id:l.id,type:l.type,kZ:{text:&quot;&quot;,text_pos:&quot;right&quot;,size:150,vertical:false,min:0,max:99,value:0,step:1,margin:10,disabled:false,enableTooltip:false}};for(g in l){if(g===&quot;id&quot;||g===&quot;onclick&quot;||g===&quot;type&quot;){continue}h.kZ[g]=l[g]}for(g in h.kZ){if(g===&quot;text&quot;||g===&quot;text_pos&quot;||g===&quot;isbig&quot;){continue}c[g]=h.kZ[g]}h.base.innerHTML=&quot;</U></I><DIV class="dhxrb_label_button">&quot;+h.kZ.text+&quot;</DIV>&quot;;c.parent=h.base.firstChild.firstChild;h.slider=new dhtmlXSlider(c);if(typeof(this.afterRender)===&quot;function&quot;){this.afterRender(h)}if(h.kZ.disable){this.disable(h)}h.slider.attachEvent(&quot;onChange&quot;,function(m){h._callHandler(h.id,[m]);h.callEvent(&quot;onValueChange&quot;,[h.id,m])});return h},callAfterInit:function(a){this._detachEventFromItem(a.base)},setSkin:function(a,c){if(a.slider instanceof dhtmlXSlider){a.slider.setSkin(c)}},disable:function(c){var a=c.base.childNodes[1];if(c.slider instanceof dhtmlXSlider){c.slider.disable()}if(!/\s?dhxrb_disable_text_style/i.test(a.className)){a.className+=&quot; dhxrb_disable_text_style&quot;}return true},enable:function(c){var a=c.base.childNodes[1];if(c.slider instanceof dhtmlXSlider){c.slider.enable()}if(/\s?dhxrb_disable_text_style/i.test(a.className)){a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,&quot;&quot;)}return true},remove:function(a){if(a.slider instanceof dhtmlXSlider){a.slider.unload();a.slider=null}},getValue:function(a){var c=null;if(a.slider instanceof dhtmlXSlider){c=a.slider.getValue()}return c},setValue:function(a,c){if(a.slider instanceof dhtmlXSlider){a.slider.setValue(c)}}};dhtmlXRibbon.prototype.items._extends=function(g,c){var a;for(a in c){g[a]=g[a]||c[a]}return g};dhtmlXRibbon.prototype._addNewLevel=function(g){var c,a;if(g.kZ.mode===&quot;rows&quot;){c=g.contForItems.lastChild;if(c&amp;&amp;/dhxrb_block_rows/i.test(c.className)&amp;&amp;(c.childNodes.length&lt;3)){a=document.createElement(&quot;div&quot;);a.className=&quot;dhxrb_block_row&quot;;c.appendChild(a)}else{c=document.createElement(&quot;div&quot;);c.className=&quot;dhxrb_block_rows&quot;;g.contForItems.appendChild(c);a=document.createElement(&quot;div&quot;);a.className=&quot;dhxrb_block_row&quot;;c.appendChild(a)}}else{var a=document.createElement(&quot;div&quot;);a.className=&quot;dhxrb_3rows_block&quot;;g.contForItems.appendChild(a)}};dhtmlXRibbon.prototype._attachEventForItem=function(a){if(typeof(window.addEventListener)===&quot;function&quot;){a.addEventListener(&quot;mouseover&quot;,this._doOnHighlight0,false);a.addEventListener(&quot;mouseout&quot;,this._doOffHighlight0,false);a.addEventListener(&quot;mousedown&quot;,this._doOnHighlight1,false);a.addEventListener(&quot;mouseup&quot;,this._doOffHighlight1,false);a.addEventListener(&quot;click&quot;,this._doOnClick,false)}else{a.attachEvent(&quot;onmouseover&quot;,this._doOnHighlight0);a.attachEvent(&quot;onmouseout&quot;,this._doOffHighlight0);a.attachEvent(&quot;onmousedown&quot;,this._doOnHighlight1);a.attachEvent(&quot;onmouseup&quot;,this._doOffHighlight1);a.attachEvent(&quot;onclick&quot;,this._doOnClick)}};dhtmlXRibbon.prototype._detachEventFromItem=function(a){if(typeof(window.addEventListener)===&quot;function&quot;){a.removeEventListener(&quot;mouseover&quot;,this._doOnHighlight0,false);a.removeEventListener(&quot;mouseout&quot;,this._doOffHighlight0,false);a.removeEventListener(&quot;mousedown&quot;,this._doOnHighlight1,false);a.removeEventListener(&quot;mouseup&quot;,this._doOffHighlight1,false);a.removeEventListener(&quot;click&quot;,this._doOnClick,false)}else{a.detachEvent(&quot;onmouseover&quot;,this._doOnHighlight0);a.detachEvent(&quot;onmouseout&quot;,this._doOffHighlight0);a.detachEvent(&quot;onmousedown&quot;,this._doOnHighlight1);a.detachEvent(&quot;onmouseup&quot;,this._doOffHighlight1);a.detachEvent(&quot;onclick&quot;,this._doOnClick)}};dhtmlXRibbon.prototype._attachEventsToInput=function(a){if(typeof(window.addEventListener)===&quot;function&quot;){a.addEventListener(&quot;focus&quot;,this._doOnFocus,false);a.addEventListener(&quot;blur&quot;,this._doOnBlur,false);a.addEventListener(&quot;change&quot;,this._doOnChange,false);a.addEventListener(&quot;keydown&quot;,this._doOnKeydown,false)}else{a.attachEvent(&quot;onfocus&quot;,this._doOnFocus);a.attachEvent(&quot;onblur&quot;,this._doOnBlur);a.attachEvent(&quot;onchange&quot;,this._doOnChange);a.attachEvent(&quot;onkeydown&quot;,this._doOnKeydown)}};dhtmlXRibbon.prototype._detachEventsFromInput=function(a){if(typeof(window.addEventListener)===&quot;function&quot;){a.removeEventListener(&quot;focus&quot;,this._doOnFocus,false);a.removeEventListener(&quot;blur&quot;,this._doOnBlur,false);a.removeEventListener(&quot;change&quot;,this._doOnChange,false);a.removeEventListener(&quot;keydown&quot;,this._doOnKeydown,false)}else{a.detachEvent(&quot;onfocus&quot;,this._doOnFocus);a.detachEvent(&quot;onblur&quot;,this._doOnBlur);a.detachEvent(&quot;onchange&quot;,this._doOnChange);a.detachEvent(&quot;onkeydown&quot;,this._doOnKeydown)}};dhtmlXRibbon.prototype._getContainerForSmallItem=function(g){var c=g.contForItems.lastChild,a=null;if(g.kZ.mode===&quot;rows&quot;){if(c&amp;&amp;/\s?dhxrb_block_rows/i.test(c.className)){a=c.lastChild;if(!a){a=document.createElement(&quot;div&quot;);a.className=&quot;dhxrb_block_row&quot;;c.appendChild(a)}}else{c=document.createElement(&quot;div&quot;);c.className=&quot;dhxrb_block_rows&quot;;g.contForItems.appendChild(c);a=document.createElement(&quot;div&quot;);a.className=&quot;dhxrb_block_row&quot;;c.appendChild(a)}}else{if(c&amp;&amp;/dhxrb_3rows_block/i.test(c.className)&amp;&amp;(c.childNodes.length&lt;3)){a=c}else{a=document.createElement(&quot;div&quot;);a.className=&quot;dhxrb_3rows_block&quot;;g.contForItems.appendChild(a)}}return a};dhtmlXRibbon.prototype._findItemByNode=function(a){while(a&amp;&amp; !a._dhx_ribbonId){a=a.parentNode}return a};dhtmlXRibbon.prototype._indexOf=function(a,h){var g,c;c=a.length;for(g=0;g&lt;c;g++){if(a[g]===h){return g}}return-1};dhtmlXRibbon.prototype._removeItem=function(g){var a,h= -1,c=this._items[g.parentId];if(g.type===&quot;group&quot;){this._removeGroup(g);return}delete this._items[g.id];a=g.base.parentNode;this._detachEventFromItem(g.base);a.removeChild(g.base);if(c.type===&quot;block&quot;){if(a!==c.contForItems&amp;&amp;a.childNodes.length===0){a.parentNode.removeChild(a)}}else{if(c.type===&quot;group&quot;){dhtmlXRibbon.prototype.items.group.normalise(c)}}h=this._indexOf(c.childIds,g.id);if(h!== -1){c.childIds.splice(h,1)}if(this.items[g.type]&amp;&amp;(typeof(this.items[g.type].remove)===&quot;function&quot;)){this.items[g.type].remove(g,this)}};dhtmlXRibbon.prototype._removeGroup=function(h){var c=[],l,g=this._items[h.parentId],a=h.base.parentNode;for(l in h.childIds){l=parseInt(l);c.push(this._items[h.childIds[l]])}for(l in c){l=parseInt(l);this._removeItem(c[l])}delete this._items[h.id];if(h.base.parentNode){a.removeChild(h.base)}if(a.childNodes.length===0){a.parentNode.removeChild(a)}l=this._indexOf(g.childIds,h.id);if(l!== -1){g.childIds.splice(l,1)}if(this.items[h.type]&amp;&amp;(typeof(this.items[h.type].remove)===&quot;function&quot;)){this.items[h.type].remove(h)}};dhtmlXRibbon.prototype._removeBlock=function(h){var a=[],g,c;for(g in h.childIds){g=parseInt(g);a.push(this._items[h.childIds[g]])}for(g in a){g=parseInt(g);this._removeItem(a[g])}delete this._items[h.id];h.base.parentNode.removeChild(h.base);if(h.parentId){c=this._items[h.parentId]}else{c=this}g=this._indexOf(c.childIds,h.id);if(g!== -1){c.childIds.splice(g,1)}};dhtmlXRibbon.prototype._removeTab=function(c,a){var h=[],g;for(g in c.childIds){g=parseInt(g);h.push(this._items[c.childIds[g]])}for(g in h){g=parseInt(g);this._removeBlock(h[g])}delete this._items[c.id];g=this._indexOf(this.childIds,c.id);if(g!== -1){this.childIds.splice(g,1)}};dhtmlXRibbon.prototype._skinCollection={dhx_skyblue:true,dhx_web:true,dhx_terrace:true};dhtmlXRibbon.prototype._setSkinForItems=function(g){var a,c;for(a in this._items){c=this._items[a];c.kZ.skin=g;if(dhtmlXRibbon.prototype.items[c.type]&amp;&amp;typeof(dhtmlXRibbon.prototype.items[c.type].setSkin)===&quot;function&quot;){dhtmlXRibbon.prototype.items[c.type].setSkin(c,g)}}c=undefined,a=undefined};dhtmlXRibbon.prototype._setBlockText=function(a,c){a.kZ.text=c;a.contForText.innerHTML=c;if(!c&amp;&amp;(c!==0)&amp;&amp;a.contForText.parentNode){a.contForText.parentNode.removeChild(a.contForText)}else{if(!a.contForText.parentNode){if(a.kZ.text_pos===&quot;top&quot;){a.base.insertBefore(a.contForText,a.contForItems)}else{a.base.appendChild(a.contForText)}}}};dhtmlXRibbon.prototype.hide=function(g){var c=this._items[g];if(this.items[c.type]&amp;&amp;(typeof(this.items[c.type].hide)===&quot;function&quot;)){if(this.items[c.type].hide(c)!==true){return}}if(c.type===&quot;tab&quot;){return}else{if(!/\s?dhxrb_item_hide/i.test(c.base.className)){c.base.className+=&quot; dhxrb_item_hide&quot;}}var a=this._items[c.parentId];if(a&amp;&amp;this.items[a.type]&amp;&amp;(typeof(this.items[a.type].hideChild)===&quot;function&quot;)){this.items[a.type].hideChild(a,c)}};dhtmlXRibbon.prototype.show=function(g){var c=this._items[g];if(this.items[c.type]&amp;&amp;(typeof(this.items[c.type].show)===&quot;function&quot;)){if(this.items[c.type].show(c)!==true){return}}if(c.type===&quot;tab&quot;){return}else{if(/\s?dhxrb_item_hide/i.test(c.base.className)){c.base.className=c.base.className.replace(/\s?dhxrb_item_hide/i,&quot;&quot;)}}var a=this._items[c.parentId];if(a&amp;&amp;this.items[a.type]&amp;&amp;(typeof(this.items[a.type].showChild)===&quot;function&quot;)){this.items[a.type].showChild(a,c)}};dhtmlXRibbon.prototype.getValue=function(g){var a=this._items[g],c=undefined;if(this.items[a.type]&amp;&amp;(typeof(this.items[a.type].getValue)===&quot;function&quot;)){return this.items[a.type].getValue(a)}};dhtmlXRibbon.prototype.setValue=function(g,c){var a=this._items[g];if(this.items[a.type]&amp;&amp;typeof(this.items[a.type].setValue)===&quot;function&quot;){this.items[a.type].setValue(a,c)}};dhtmlXRibbon.prototype.check=function(g,c){c=dhx4.s2b(c);var a=this._items[g];if(a&amp;&amp; !a.kZ.checked&amp;&amp;typeof(this.items[a.type].check)===&quot;function&quot;){this.items[a.type].check(a);if(c){this.callEvent(&quot;onCheck&quot;,[a.id,a.kZ.checked])}}};dhtmlXRibbon.prototype.uncheck=function(g,c){c=dhx4.s2b(c);var a=this._items[g];if(a&amp;&amp;a.kZ.checked&amp;&amp;typeof(this.items[a.type].uncheck)===&quot;function&quot;){this.items[a.type].uncheck(a);if(c){this.callEvent(&quot;onCheck&quot;,[a.id,a.kZ.checked])}}};dhtmlXRibbon.prototype.disable=function(h,c){var g=this._items[h],a;if(this.items[g.type]&amp;&amp;(typeof(this.items[g.type].disable)===&quot;function&quot;)){if(this.items[g.type].disable(g)!==true){return}}if(g.type===&quot;tab&quot;){return}else{if(g.type===&quot;block&quot;||g.type===&quot;group&quot;){for(a in g.childIds){a=parseInt(a);this.disable(g.childIds[a])}}}if(!/\s?dhxrb_item_disable/i.test(g.base.className)){g.base.className+=&quot; dhxrb_item_disable&quot;}g.kZ.disable=true};dhtmlXRibbon.prototype.enable=function(h,c){var g=this._items[h],a;if(this.items[g.type]&amp;&amp;(typeof(this.items[g.type].enable)===&quot;function&quot;)){if(this.items[g.type].enable(g)!==true){return}}if(g.type===&quot;tab&quot;){return}else{if(g.type===&quot;block&quot;||g.type===&quot;group&quot;){for(a in g.childIds){a=parseInt(a);this.enable(g.childIds[a])}}}if(/\s?dhxrb_item_disable/i.test(g.base.className)){g.base.className=g.base.className.replace(/\s?dhxrb_item_disable/i,&quot;&quot;)}g.kZ.disable=false};dhtmlXRibbon.prototype.isEnabled=function(c){var a=this._items[c];if(this.items[a.type]&amp;&amp;typeof(this.items[a.type].isEnabled)===&quot;function&quot;){return this.items[a.type].isEnabled(a)}if(a.type===&quot;tab&quot;){return}else{return a.kZ.disable!==true}};dhtmlXRibbon.prototype.Yi=function(c){var a=this._items[c];if(this.items[a.type]&amp;&amp;(typeof(this.items[a.type].Yi)===&quot;function&quot;)){return this.items[a.type].Yi(a)}if(a.type===&quot;tab&quot;){return}else{return!/\s?dhxrb_item_hide/i.test(a.base.className)}};dhtmlXRibbon.prototype.setItemState=function(h,c,g){c=dhx4.s2b(c);g=dhx4.s2b(g);var a=this._items[h];if(a&amp;&amp;(typeof(this.items[a.type].setState)===&quot;function&quot;)){switch(a.type){case &quot;buttonSegment&quot;:this.items[a.type].setState(a,this,g);break;default:this.items[a.type].setState(a,c,g)}}};dhtmlXRibbon.prototype.setIconPath=function(a){this.kZ.icons_path=a};dhtmlXRibbon.prototype.removeItem=function(c){var a=this._items[c];switch(a.type){case &quot;tab&quot;:break;case &quot;block&quot;:this._removeBlock(a);break;case &quot;group&quot;:this._removeGroup(a);break;default:this._removeItem(a)}};dhtmlXRibbon.prototype.setSkin=function(l){l=(typeof(l)===&quot;string&quot;)?l.toLowerCase():&quot;&quot;;if(this._skinCollection[l]!==true){return}var g,c= -1,a,h=&quot;dhtmlxribbon&quot;;g=this._base.className.match(/\S\w+/ig);if(g instanceof Array){for(a in this._skinCollection){if(c=== -1){c=this._indexOf(g,h+&quot;_&quot;+a)}else{break}}c=(c=== -1)?g.length:c}else{g=[];c=0}g[c]=h+&quot;_&quot;+l;this._base.className=g.join(&quot; &quot;);this.kZ.skin=l;if(this._tabbar!==null){this._tabbar.setSkin(l)}this._setSkinForItems(l)};dhtmlXRibbon.prototype.tabs=function(a){if(this._tabbar instanceof dhtmlXTabBar){return this._tabbar.tabs(a)}else{return undefined}};dhtmlXRibbon.prototype.getItemType=function(c){var a=this._items[c];if(a){return a.type}else{return undefined}};dhtmlXRibbon.prototype.getValue=function(g){var a=this._items[g],c=undefined;if(a&amp;&amp;this.items[a.type]&amp;&amp;typeof(this.items[a.type].getValue)===&quot;function&quot;){c=this.items[a.type].getValue(a)}return c};dhtmlXRibbon.prototype.setValue=function(h,c,g){var a=this._items[h];g=g||false;if(a&amp;&amp;this.items[a.type]&amp;&amp;typeof(this.items[a.type].setValue)===&quot;function&quot;){this.items[a.type].setValue(a,c)}};dhtmlXRibbon.prototype.getItemText=function(c){var a=this._items[c];if(!a){return null}else{if(a.type===&quot;tab&quot;){return this.tabs(a.id).getText()}else{if(a.type===&quot;block&quot;){return this.items.button.getText(a)}else{if(this.items[a.type]&amp;&amp;typeof(this.items[a.type].getText)===&quot;function&quot;){return this.items[a.type].getText(a)}else{return null}}}}};dhtmlXRibbon.prototype.setItemText=function(g,c){var a=this._items[g];if(!a){return}else{if(a.type===&quot;tab&quot;){this.tabs(a.id).setText(c)}else{if(a.type===&quot;block&quot;){this._setBlockText(a,c)}else{if(this.items[a.type]&amp;&amp;typeof(this.items[a.type].setText)===&quot;function&quot;){this.items[a.type].setText(a,c)}}}}};(function(){var a=dhtmlXRibbon.prototype.items;a.buttonTwoState=a._extends(a.buttonTwoState,a.button);a.buttonSelect=a._extends(a.buttonSelect,a.buttonTwoState);a.buttonSegment=a._extends(a.buttonSegment,a.buttonTwoState)})();function dhtmlXToolbarObject(c,g){var a=this;this.kZ={skin:(g||window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhxtoolbar&quot;)||&quot;dhx_skyblue&quot;),align:&quot;left&quot;,align_autostart:&quot;left&quot;,icons_path:&quot;&quot;,iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null};if(typeof(c)==&quot;object&quot;&amp;&amp;c!=null&amp;&amp;typeof(c.tagName)==&quot;undefined&quot;){if(c.icons_path!=null||c.icon_path!=null){this.kZ.icons_path=(c.icons_path||c.icon_path)}if(c.icons_size!=null){this.kZ.icons_size_autoload=c.icons_size}if(c.json!=null){this.kZ.json_autoload=c.json}if(c.xml!=null){this.kZ.xml_autoload=c.xml}if(c.onload!=null){this.kZ.onload_autoload=c.onload}if(c.items!=null){this.kZ.items_autoload=c.items}if(c.skin!=null){this.kZ.skin=c.skin}if(c.align!=null){this.kZ.align_autostart=c.align}c=c.parent}this.vI=(typeof(c)!=&quot;object&quot;)?document.getElementById(c):c;while(this.vI.childNodes.length&gt;0){this.vI.removeChild(this.vI.childNodes[0])}c=null;this.vI.dir=&quot;ltr&quot;;this.base=document.createElement(&quot;DIV&quot;);this.base.className=&quot;dhxtoolbar_float_left&quot;;this.vI.appendChild(this.base);if(window.dhx4.isIPad){this.vI.ontouchstart=function(h){h=h||event;if((String(h.target.tagName||&quot;&quot;).toLowerCase()==&quot;input&quot;)){return true}if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}h.cancelBubble=true;return false}}this.setSkin(this.kZ.skin);this.objPull={};this.anyUsed=&quot;none&quot;;this._genStr=function(h){var l=&quot;&quot;;var n=&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;;for(var m=0;m&lt;h;m++){l+=n.charAt(Math.round(Math.random()*(n.length-1)))}return l};this.rootTypes=new Array(&quot;button&quot;,&quot;buttonSelect&quot;,&quot;buttonTwoState&quot;,&quot;separator&quot;,&quot;label&quot;,&quot;slider&quot;,&quot;text&quot;,&quot;buttonInput&quot;);this.idPrefix=this._genStr(12);window.dhx4._enableDataLoading(this,&quot;_initObj&quot;,&quot;_xmlToJson&quot;,&quot;toolbar&quot;,{struct:true});window.dhx4._eventable(this);this._getObj=function(n,h){var l=null;for(var m=0;m&lt;n.childNodes.length;m++){if(n.childNodes[m].tagName!=null){if(String(n.childNodes[m].tagName).toLowerCase()==String(h).toLowerCase()){l=n.childNodes[m]}}}return l};this._addImgObj=function(l){var h=document.createElement(&quot;IMG&quot;);if(l.childNodes.length&gt;0){l.insertBefore(h,l.childNodes[0])}else{l.appendChild(h)}return h};this._setItemImage=function(n,l,h){if(h==true){n.imgEn=l}else{n.imgDis=l}if((!n.state&amp;&amp;h==true)||(n.state&amp;&amp;h==false)){return}var m=this._getObj(n.obj,&quot;img&quot;);if(m==null){m=this._addImgObj(n.obj)}m.src=this.kZ.icons_path+l};this._clearItemImage=function(m,h){if(h==true){m.imgEn=&quot;&quot;}else{m.imgDis=&quot;&quot;}if((!m.state&amp;&amp;h==true)||(m.state&amp;&amp;h==false)){return}var l=this._getObj(m.obj,&quot;img&quot;);if(l!=null){l.parentNode.removeChild(l)}};this._setItemText=function(h,m){var l=this._getObj(h.obj,&quot;div&quot;);if(m==null||m.length==0){if(l!=null){l.parentNode.removeChild(l)}return}if(l==null){l=document.createElement(&quot;DIV&quot;);l.className=&quot;dhxtoolbar_text&quot;;h.obj.appendChild(l)}l.innerHTML=m};this._getItemText=function(h){var l=this._getObj(h.obj,&quot;div&quot;);if(l!=null){return l.innerHTML}return &quot;&quot;};this._enableItem=function(l){if(l.state){return}l.state=true;if(this.objPull[l.id][&quot;type&quot;]==&quot;buttonTwoState&quot;&amp;&amp;this.objPull[l.id][&quot;obj&quot;][&quot;pressed&quot;]==true){l.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_pres&quot;;l.obj.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_over&quot;}else{l.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;;l.obj.renderAs=l.obj.className}if(l.arw){l.arw.className=String(l.obj.className).replace(&quot;btn&quot;,&quot;arw&quot;)}var h=this._getObj(l.obj,&quot;img&quot;);if(l.imgEn!=&quot;&quot;){if(h==null){h=this._addImgObj(l.obj)}h.src=this.kZ.icons_path+l.imgEn}else{if(h!=null){h.parentNode.removeChild(h)}}};this._disableItem=function(l){if(!l.state){return}l.state=false;l.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_&quot;+(this.objPull[l.id][&quot;type&quot;]==&quot;buttonTwoState&quot;&amp;&amp;l.obj.pressed?&quot;pres_&quot;:&quot;&quot;)+&quot;dis&quot;;l.obj.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;;if(l.arw){l.arw.className=String(l.obj.className).replace(&quot;btn&quot;,&quot;arw&quot;)}var h=this._getObj(l.obj,&quot;img&quot;);if(l.imgDis!=&quot;&quot;){if(h==null){h=this._addImgObj(l.obj)}h.src=this.kZ.icons_path+l.imgDis}else{if(h!=null){h.parentNode.removeChild(h)}}if(l.polygon!=null){if(l.polygon.style.display!=&quot;none&quot;){window.dhx4.zim.clear(l.polygon._idd);l.polygon.style.display=&quot;none&quot;;if(l.polygon._ie6cover){l.polygon._ie6cover.style.display=&quot;none&quot;}if(this.kZ.skin==&quot;dhx_terrace&quot;){this._improveTerraceButtonSelect(l.id,true)}}}this.anyUsed=&quot;none&quot;};this.clearAll=function(){for(var h in this.objPull){this._removeItem(String(h).replace(this.idPrefix,&quot;&quot;))}};this._doOnClick=function(h){if(a&amp;&amp;a.forEachItem){a.forEachItem(function(m){if(a.objPull[a.idPrefix+m][&quot;type&quot;]==&quot;buttonSelect&quot;){var l=a.objPull[a.idPrefix+m];if(l.arw._skip===true){l.arw._skip=false}else{if(l.polygon.style.display!=&quot;none&quot;){l.obj.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;;l.obj.className=l.obj.renderAs;l.arw.className=String(l.obj.renderAs).replace(&quot;btn&quot;,&quot;arw&quot;);a.anyUsed=&quot;none&quot;;window.dhx4.zim.clear(l.polygon._idd);l.polygon.style.display=&quot;none&quot;;if(l.polygon._ie6cover){l.polygon._ie6cover.style.display=&quot;none&quot;}if(a.kZ.skin==&quot;dhx_terrace&quot;){a._improveTerraceButtonSelect(l.id,true)}}}}})}};if(window.dhx4.isIPad){document.addEventListener(&quot;touchstart&quot;,this._doOnClick,false)}else{if(typeof(window.addEventListener)!=&quot;undefined&quot;){window.addEventListener(&quot;mousedown&quot;,this._doOnClick,false)}else{document.body.attachEvent(&quot;onmousedown&quot;,this._doOnClick)}}if(this.kZ.icons_size_autoload!=null){this.yZ(this.kZ.icons_size_autoload);this.kZ.icons_size_autoload=null}if(this.kZ.items_autoload!=null){this.loadStruct(this.kZ.items_autoload,this.kZ.onload_autoload);this.kZ.items_autoload=null}else{if(this.kZ.json_autoload!=null){this.loadStruct(this.kZ.json_autoload,this.kZ.onload_autoload);this.kZ.json_autoload=null}else{if(this.kZ.xml_autoload!=null){this.loadStruct(this.kZ.xml_autoload,this.kZ.onload_autoload);this.kZ.xml_autoload=null}}}if(this.kZ.align_autostart!=this.kZ.align){this.setAlign(this.kZ.align_autostart);this.kZ.align_autostart=null}return this}dhtmlXToolbarObject.prototype.addSpacer=function(g){var c=this.idPrefix+g;if(this._spacer!=null){if(this._spacer.idd==g){return}if(this._spacer==this.objPull[c].obj.parentNode){var a=true;while(a){var n=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(n==g||this._spacer.childNodes.length==0){if(this.objPull[c].arw!=null){this.base.appendChild(this.objPull[c].arw)}a=false}}this._spacer.idd=g;this._fixSpacer();return}if(this.base==this.objPull[c].obj.parentNode){var a=true;var m=(this.objPull[c].arw!=null);while(a){var h=this.base.childNodes.length-1;if(m==true){if(this.base.childNodes[h]==this.objPull[c].arw){a=false}}if(this.base.childNodes[h].idd==g){a=false}if(a){if(this._spacer.childNodes.length&gt;0){this._spacer.insertBefore(this.base.childNodes[h],this._spacer.childNodes[0])}else{this._spacer.appendChild(this.base.childNodes[h])}}}this._spacer.idd=g;this._fixSpacer();return}}else{var l=null;for(var h=0;h&lt;this.base.childNodes.length;h++){if(this.base.childNodes[h]==this.objPull[this.idPrefix+g].obj){l=h;if(this.objPull[this.idPrefix+g].arw!=null){l=h+1}}}if(l!=null){this._spacer=document.createElement(&quot;DIV&quot;);this._spacer.className=(this.kZ.align==&quot;right&quot;?&quot; dhxtoolbar_float_left&quot;:&quot; dhxtoolbar_float_right&quot;);this._spacer.dir=&quot;ltr&quot;;this._spacer.idd=g;while(this.base.childNodes.length&gt;l+1){this._spacer.appendChild(this.base.childNodes[l+1])}this.vI.appendChild(this._spacer);this._fixSpacer()}}if(this.kZ.skin==&quot;dhx_terrace&quot;){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(!this._spacer){return}while(this._spacer.childNodes.length&gt;0){this.base.appendChild(this._spacer.childNodes[0])}this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;if(this.kZ.skin==&quot;dhx_terrace&quot;){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(typeof(window.addEventListener)==&quot;undefined&quot;&amp;&amp;this._spacer!=null){this._spacer.style.borderLeft=&quot;1px solid #a4bed4&quot;;var a=this._spacer;window.setTimeout(function(){a.style.borderLeft=&quot;0px solid #a4bed4&quot;;a=null},1)}};dhtmlXToolbarObject.prototype.getType=function(g){var h=this.getParentId(g);if(h!=null){var c=null;var a=this.objPull[this.idPrefix+h]._listOptions[g];if(a!=null){if(a.sep!=null){c=&quot;buttonSelectSeparator&quot;}else{c=&quot;buttonSelectButton&quot;}}return c}else{if(this.objPull[this.idPrefix+g]==null){return null}return this.objPull[this.idPrefix+g][&quot;type&quot;]}};dhtmlXToolbarObject.prototype.getTypeExt=function(c){var a=this.getType(c);if(a==&quot;buttonSelectButton&quot;||a==&quot;buttonSelectSeparator&quot;){if(a==&quot;buttonSelectButton&quot;){a=&quot;button&quot;}else{a=&quot;separator&quot;}return a}return null};dhtmlXToolbarObject.prototype.inArray=function(g,c){for(var a=0;a&lt;g.length;a++){if(g[a]==c){return true}}return false};dhtmlXToolbarObject.prototype.getParentId=function(h){var l=null;for(var g in this.objPull){if(this.objPull[g]._listOptions){for(var c in this.objPull[g]._listOptions){if(c==h){l=String(g).replace(this.idPrefix,&quot;&quot;)}}}}return l};dhtmlXToolbarObject.prototype._addItem=function(a,c){this._addItemToStorage(a,c);if(this.kZ.skin==&quot;dhx_terrace&quot;){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.addButton=function(l,h,c,a,g){this._addItem({id:l,type:&quot;button&quot;,text:c,img:a,imgdis:g},h)};dhtmlXToolbarObject.prototype.addText=function(g,c,a){this._addItem({id:g,type:&quot;text&quot;,text:a},c)};dhtmlXToolbarObject.prototype.addButtonSelect=function(h,o,v,a,c,r,n,x,l,m){var w=[];for(var g=0;g&lt;a.length;g++){var s={};if(a[g]instanceof Array){s.id=a[g][0];s.type=(a[g][1]==&quot;obj&quot;?&quot;button&quot;:&quot;separator&quot;);s.text=(a[g][2]||null);s.img=(a[g][3]||null)}else{if(a[g]instanceof Object&amp;&amp;a[g]!=null&amp;&amp;typeof(a[g].id)!=&quot;undefined&quot;&amp;&amp;typeof(a[g].type)!=&quot;undefined&quot;){s.id=a[g].id;s.type=(a[g].type==&quot;obj&quot;?&quot;button&quot;:&quot;separator&quot;);s.text=a[g].text;s.img=a[g].img}}w.push(s)}this._addItem({id:h,type:&quot;buttonSelect&quot;,text:v,img:c,imgdis:r,renderSelect:n,openAll:x,options:w,maxOpen:l,mode:m},o)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(l,h,c,a,g){this._addItem({id:l,type:&quot;buttonTwoState&quot;,img:a,imgdis:g,text:c},h)};dhtmlXToolbarObject.prototype.addSeparator=function(c,a){this._addItem({id:c,type:&quot;separator&quot;},a)};dhtmlXToolbarObject.prototype.addSlider=function(c,n,l,h,q,g,m,a,o){this._addItem({id:c,type:&quot;slider&quot;,length:l,valueMin:h,valueMax:q,valueNow:g,textMin:m,textMax:a,toolTip:o},n)};dhtmlXToolbarObject.prototype.addInput=function(h,g,c,a){this._addItem({id:h,type:&quot;buttonInput&quot;,value:c,width:a},g)};dhtmlXToolbarObject.prototype.forEachItem=function(g){for(var c in this.objPull){if(this.inArray(this.rootTypes,this.objPull[c][&quot;type&quot;])){g(this.objPull[c][&quot;id&quot;].replace(this.idPrefix,&quot;&quot;))}}};(function(){var m=&quot;isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen&quot;.split(&quot;,&quot;);var g=[false,&quot;&quot;,&quot;&quot;,false,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,false,&quot;&quot;,&quot;&quot;,&quot;&quot;,null,&quot;&quot;,[null,null],&quot;&quot;,[null,null],&quot;&quot;,null];var c=function(n,o){return function(s,r,q){s=this.idPrefix+s;if(this.objPull[s][n]!=null){return this.objPull[s][n].call(this.objPull[s],r,q)}else{return o}}};for(var l=0;l&lt;m.length;l++){var a=m[l];var h=g[l];dhtmlXToolbarObject.prototype[a]=c(a,h)}})();dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&amp;&amp;this.objPull[a].showItem!=null){this.objPull[a].showItem();if(this.kZ.skin==&quot;dhx_terrace&quot;){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&amp;&amp;this.objPull[a].hideItem!=null){this.objPull[a].hideItem();if(this.kZ.skin==&quot;dhx_terrace&quot;){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.fI=function(a){return this._getPosition(a)};dhtmlXToolbarObject.prototype._getPosition=function(l,g){if(this.objPull[this.idPrefix+l]==null){return null}var h=null;var a=0;for(var c=0;c&lt;this.base.childNodes.length;c++){if(this.base.childNodes[c].idd!=null){if(this.base.childNodes[c].idd==l){h=a}a++}}if(!h&amp;&amp;this._spacer!=null){for(var c=0;c&lt;this._spacer.childNodes.length;c++){if(this._spacer.childNodes[c].idd!=null){if(this._spacer.childNodes[c].idd==l){h=a}a++}}}return h};dhtmlXToolbarObject.prototype.Yy=function(a,c){this._setPosition(a,c)};dhtmlXToolbarObject.prototype._setPosition=function(l,h){if(this.objPull[this.idPrefix+l]==null){return}if(isNaN(h)){h=this.base.childNodes.length}if(h&lt;0){h=0}var a=null;if(this._spacer){a=this._spacer.idd;this.removeSpacer()}var g=this.objPull[this.idPrefix+l];this.base.removeChild(g.obj);if(g.arw){this.base.removeChild(g.arw)}var c=this._getIdByPosition(h,true);if(c[0]==null){this.base.appendChild(g.obj);if(g.arw){this.base.appendChild(g.arw)}}else{this.base.insertBefore(g.obj,this.base.childNodes[c[1]]);if(g.arw){this.base.insertBefore(g.arw,this.base.childNodes[c[1]+1])}}if(a!=null){this.addSpacer(a)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(m,c){var l=null;var a=0;var g=0;for(var h=0;h&lt;this.base.childNodes.length;h++){if(this.base.childNodes[h][&quot;idd&quot;]!=null&amp;&amp;l==null){if((a++)==m){l=this.base.childNodes[h][&quot;idd&quot;]}}if(l==null){g++}}g=(l==null?null:g);return(c==true?new Array(l,g):l)};dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a);if(this.kZ.skin==&quot;dhx_terrace&quot;){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._removeItem=function(l){var g=this.getType(l);l=this.idPrefix+l;var h=this.objPull[l];if(g==&quot;button&quot;){h.obj._doOnMouseOver=null;h.obj._doOnMouseOut=null;h.obj._doOnMouseUp=null;h.obj._doOnMouseUpOnceAnywhere=null;h.obj.onclick=null;h.obj.onmouseover=null;h.obj.onmouseout=null;h.obj.onmouseup=null;h.obj.onmousedown=null;h.obj.onselectstart=null;h.obj.renderAs=null;h.obj.idd=null;h.obj.parentNode.removeChild(h.obj);h.obj=null;h.id=null;h.state=null;h.img=null;h.imgEn=null;h.imgDis=null;h.type=null;h.enableItem=null;h.disableItem=null;h.isEnabled=null;h.showItem=null;h.hideItem=null;h.Yi=null;h.setItemText=null;h.getItemText=null;h.setItemImage=null;h.clearItemImage=null;h.setItemImageDis=null;h.clearItemImageDis=null;h.setItemToolTip=null;h.getItemToolTip=null}if(g==&quot;buttonTwoState&quot;){h.obj._doOnMouseOver=null;h.obj._doOnMouseOut=null;h.obj.onmouseover=null;h.obj.onmouseout=null;h.obj.onmousedown=null;h.obj.onselectstart=null;h.obj.renderAs=null;h.obj.idd=null;h.obj.parentNode.removeChild(h.obj);h.obj=null;h.id=null;h.state=null;h.img=null;h.imgEn=null;h.imgDis=null;h.type=null;h.enableItem=null;h.disableItem=null;h.isEnabled=null;h.showItem=null;h.hideItem=null;h.Yi=null;h.setItemText=null;h.getItemText=null;h.setItemImage=null;h.clearItemImage=null;h.setItemImageDis=null;h.clearItemImageDis=null;h.setItemToolTip=null;h.getItemToolTip=null;h.setItemState=null;h.getItemState=null}if(g==&quot;buttonSelect&quot;){for(var c in h._listOptions){this.removeListOption(l,c)}h._listOptions=null;if(h.polygon._ie6cover){document.body.removeChild(h.polygon._ie6cover);h.polygon._ie6cover=null}h.p_tbl.removeChild(h.p_tbody);h.polygon.removeChild(h.p_tbl);h.polygon.onselectstart=null;document.body.removeChild(h.polygon);h.p_tbody=null;h.p_tbl=null;h.polygon=null;h.obj.onclick=null;h.obj.onmouseover=null;h.obj.onmouseout=null;h.obj.onmouseup=null;h.obj.onmousedown=null;h.obj.onselectstart=null;h.obj.idd=null;h.obj.iddPrefix=null;h.obj.parentNode.removeChild(h.obj);h.obj=null;h.arw.onclick=null;h.arw.onmouseover=null;h.arw.onmouseout=null;h.arw.onmouseup=null;h.arw.onmousedown=null;h.arw.onselectstart=null;h.arw.parentNode.removeChild(h.arw);h.arw=null;h.renderSelect=null;h.state=null;h.type=null;h.id=null;h.img=null;h.imgEn=null;h.imgDis=null;h.openAll=null;h._isListButton=null;h._separatorButtonSelectObject=null;h._buttonButtonSelectObject=null;h.setWidth=null;h.enableItem=null;h.disableItem=null;h.isEnabled=null;h.showItem=null;h.hideItem=null;h.Yi=null;h.setItemText=null;h.getItemText=null;h.setItemImage=null;h.clearItemImage=null;h.setItemImageDis=null;h.clearItemImageDis=null;h.setItemToolTip=null;h.getItemToolTip=null;h.addListOption=null;h.removeListOption=null;h.showListOption=null;h.hideListOption=null;h.isListOptionVisible=null;h.enableListOption=null;h.disableListOption=null;h.isListOptionEnabled=null;h.setListOptionPosition=null;h.getListOptionPosition=null;h.setListOptionImage=null;h.getListOptionImage=null;h.clearListOptionImage=null;h.setListOptionText=null;h.getListOptionText=null;h.setListOptionToolTip=null;h.getListOptionToolTip=null;h.forEachListOption=null;h.getAllListOptions=null;h.setListOptionSelected=null;h.getListOptionSelected=null}if(g==&quot;buttonInput&quot;){h.obj.childNodes[0].onkeydown=null;h.obj.removeChild(h.obj.childNodes[0]);h.obj.w=null;h.obj.idd=null;h.obj.parentNode.removeChild(h.obj);h.obj=null;h.id=null;h.type=null;h.enableItem=null;h.disableItem=null;h.isEnabled=null;h.showItem=null;h.hideItem=null;h.Yi=null;h.setItemToolTip=null;h.getItemToolTip=null;h.setWidth=null;h.getWidth=null;h.setValue=null;h.getValue=null;h.setItemText=null;h.getItemText=null}if(g==&quot;slider&quot;){if(window.dhx4.isIPad){document.removeEventListener(&quot;touchmove&quot;,pen._doOnMouseMoveStart,false);document.removeEventListener(&quot;touchend&quot;,pen._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;mousemove&quot;,h.pen._doOnMouseMoveStart,false);window.removeEventListener(&quot;mouseup&quot;,h.pen._doOnMouseMoveEnd,false)}else{document.body.detachEvent(&quot;onmousemove&quot;,h.pen._doOnMouseMoveStart);document.body.detachEvent(&quot;onmouseup&quot;,h.pen._doOnMouseMoveEnd)}}h.pen.allowMove=null;h.pen.initXY=null;h.pen.maxX=null;h.pen.minX=null;h.pen.nowX=null;h.pen.newNowX=null;h.pen.valueMax=null;h.pen.valueMin=null;h.pen.valueNow=null;h.pen._definePos=null;h.pen._detectLimits=null;h.pen._doOnMouseMoveStart=null;h.pen._doOnMouseMoveEnd=null;h.pen.onmousedown=null;h.obj.removeChild(h.pen);h.pen=null;h.label.tip=null;document.body.removeChild(h.label);h.label=null;h.obj.onselectstart=null;h.obj.idd=null;while(h.obj.childNodes.length&gt;0){h.obj.removeChild(h.obj.childNodes[0])}h.obj.parentNode.removeChild(h.obj);h.obj=null;h.id=null;h.type=null;h.state=null;h.enableItem=null;h.disableItem=null;h.isEnabled=null;h.setItemToolTipTemplate=null;h.getItemToolTipTemplate=null;h.setMaxValue=null;h.setMinValue=null;h.getMaxValue=null;h.getMinValue=null;h.setValue=null;h.getValue=null;h.showItem=null;h.hideItem=null;h.Yi=null}if(g==&quot;separator&quot;){h.obj.onselectstart=null;h.obj.idd=null;h.obj.parentNode.removeChild(h.obj);h.obj=null;h.id=null;h.type=null;h.showItem=null;h.hideItem=null;h.Yi=null}if(g==&quot;text&quot;){h.obj.onselectstart=null;h.obj.idd=null;h.obj.parentNode.removeChild(h.obj);h.obj=null;h.id=null;h.type=null;h.showItem=null;h.hideItem=null;h.Yi=null;h.setWidth=null;h.setItemText=null;h.getItemText=null}g=null;h=null;this.objPull[this.idPrefix+l]=null;delete this.objPull[this.idPrefix+l]};(function(){var h=&quot;addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected&quot;.split(&quot;,&quot;);var c=function(l){return function(s,n,m,r,q,o){s=this.idPrefix+s;if(this.objPull[s]==null){return}if(this.objPull[s][&quot;type&quot;]!=&quot;buttonSelect&quot;){return}return this.objPull[s][l].call(this.objPull[s],n,m,r,q,o)}};for(var g=0;g&lt;h.length;g++){var a=h[g];dhtmlXToolbarObject.prototype[a]=c(a)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(c,a){return c+a};dhtmlXToolbarObject.prototype._separatorObject=function(a,g,c){this.id=a.idPrefix+g;this.obj=document.createElement(&quot;DIV&quot;);this.obj.className=&quot;dhx_toolbar_sep&quot;;this.obj.style.display=(c.hidden!=null?&quot;none&quot;:&quot;&quot;);this.obj.idd=String(g);this.obj.title=(c.title||&quot;&quot;);this.obj.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}};if(window.dhx4.isIPad){this.obj.ontouchstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}h.cancelBubble=true;return false}}a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=&quot;&quot;};this.hideItem=function(){this.obj.style.display=&quot;none&quot;};this.Yi=function(){return(this.obj.style.display==&quot;&quot;)};return this};dhtmlXToolbarObject.prototype._textObject=function(a,g,c){this.id=a.idPrefix+g;this.obj=document.createElement(&quot;DIV&quot;);this.obj.className=&quot;dhx_toolbar_text&quot;;this.obj.style.display=(c.hidden!=null?&quot;none&quot;:&quot;&quot;);this.obj.idd=String(g);this.obj.title=(c.title||&quot;&quot;);this.obj.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}};if(window.dhx4.isIPad){this.obj.ontouchstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}h.cancelBubble=true;return false}}this.obj.innerHTML=(c.text||&quot;&quot;);a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=&quot;&quot;};this.hideItem=function(){this.obj.style.display=&quot;none&quot;};this.Yi=function(){return(this.obj.style.display==&quot;&quot;)};this.setItemText=function(h){this.obj.innerHTML=h};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(h){this.obj.style.width=h+&quot;px&quot;};this.setItemToolTip=function(h){this.obj.title=h};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonObject=function(a,h,c){this.id=a.idPrefix+h;this.state=(c.enabled!=null?false:true);this.imgEn=(c.img||&quot;&quot;);this.imgDis=(c.imgdis||&quot;&quot;);this.img=(this.state?(this.imgEn!=&quot;&quot;?this.imgEn:&quot;&quot;):(this.imgDis!=&quot;&quot;?this.imgDis:&quot;&quot;));this.obj=document.createElement(&quot;DIV&quot;);this.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_&quot;+(this.state?&quot;def&quot;:&quot;dis&quot;);this.obj.style.display=(c.hidden!=null?&quot;none&quot;:&quot;&quot;);this.obj.allowClick=false;this.obj.extAction=(c.action||null);this.obj.renderAs=this.obj.className;this.obj.idd=String(h);this.obj.title=(c.title||&quot;&quot;);this.obj.pressed=false;this.obj.innerHTML=a._rtlParseBtn((this.img!=&quot;&quot;?&quot;&lt;img src='&quot;+a.kZ.icons_path+this.img+&quot;'&gt;&quot;:&quot;&quot;),(c.text!=null?&quot;<DIV class="dhxtoolbar_text">&quot;+c.text+&quot;</DIV>&quot;:&quot;&quot;));var g=this;this.obj.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){this.allowClick=true;if(g.state==false){return}if(a.anyUsed!=&quot;none&quot;){return}this.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_over&quot;;this.renderAs=this.className};this.obj._doOnMouseOut=function(){this.allowClick=false;if(g.state==false){return}if(a.anyUsed!=&quot;none&quot;){return}this.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;;this.renderAs=this.renderAs};this.obj.onclick=function(l){if(g.state==false){return}if(this.allowClick==false){return}l=l||event;var m=this.idd.replace(a.idPrefix,&quot;&quot;);if(this.extAction){try{window[this.extAction](m)}catch(l){}}if(a&amp;&amp;a.callEvent){a.callEvent(&quot;onClick&quot;,[m])}};this.obj[window.dhx4.isIPad?&quot;ontouchstart&quot;:&quot;onmousedown&quot;]=function(l){if(g.state==false){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}l.cancelBubble=true;return false}if(a.anyUsed!=&quot;none&quot;){return}a.anyUsed=this.idd;this.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_pres&quot;;this.pressed=true;this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){a.anyUsed=&quot;none&quot;;this._doOnMouseOut()};return false};this.obj[window.dhx4.isIPad?&quot;ontouchend&quot;:&quot;onmouseup&quot;]=function(m){if(g.state==false){return}if(a.anyUsed!=&quot;none&quot;){if(a.anyUsed!=this.idd){return}}var l=a.anyUsed;this._doOnMouseUp();if(window.dhx4.isIPad&amp;&amp;l!=&quot;none&quot;){a.callEvent(&quot;onClick&quot;,[this.idd.replace(a.idPrefix,&quot;&quot;)])}};if(window.dhx4.isIPad){this.obj.ontouchmove=function(l){this._doOnMouseUp()}}this.obj._doOnMouseUp=function(){a.anyUsed=&quot;none&quot;;this.className=this.renderAs;this.pressed=false};this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp();this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){this._doOnMouseOut()}};a.base.appendChild(this.obj);this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=&quot;&quot;};this.hideItem=function(){this.obj.style.display=&quot;none&quot;};this.Yi=function(){return(this.obj.style.display==&quot;&quot;)};this.setItemText=function(l){a._setItemText(this,l)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(l){a._setItemImage(this,l,true)};this.clearItemImage=function(){a._clearItemImage(this,true)};this.setItemImageDis=function(l){a._setItemImage(this,l,false)};this.clearItemImageDis=function(){a._clearItemImage(this,false)};this.setItemToolTip=function(l){this.obj.title=l};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonSelectObject=function(g,m,l){this.id=g.idPrefix+m;this.state=(l.enabled!=null?(l.enabled==&quot;true&quot;?true:false):true);this.imgEn=(l.img||&quot;&quot;);this.imgDis=(l.imgdis||&quot;&quot;);this.img=(this.state?(this.imgEn!=&quot;&quot;?this.imgEn:&quot;&quot;):(this.imgDis!=&quot;&quot;?this.imgDis:&quot;&quot;));this.mode=(l.mode||&quot;button&quot;);if(this.mode==&quot;select&quot;){this.openAll=true;this.renderSelect=false;if(!l.text||l.text.length==0){l.text=&quot; &quot;}}else{this.openAll=(window.dhx4.s2b(l.openAll)==true);this.renderSelect=(l.renderSelect==null?true:window.dhx4.s2b(l.renderSelect))}this.maxOpen=(!isNaN(l.maxOpen?l.maxOpen:&quot;&quot;)?l.maxOpen:null);this._maxOpenTest=function(){if(!isNaN(this.maxOpen)){if(!g._sbw){var o=document.createElement(&quot;DIV&quot;);o.className=&quot;dhxtoolbar_maxopen_test&quot;;document.body.appendChild(o);var n=document.createElement(&quot;DIV&quot;);n.className=&quot;dhxtoolbar_maxopen_test2&quot;;o.appendChild(n);g._sbw=o.offsetWidth-n.offsetWidth;o.removeChild(n);n=null;document.body.removeChild(o);o=null}}};this._maxOpenTest();this.obj=document.createElement(&quot;DIV&quot;);this.obj.allowClick=false;this.obj.extAction=(l.action||null);this.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_&quot;+(this.state?&quot;def&quot;:&quot;dis&quot;);this.obj.style.display=(l.hidden!=null?&quot;none&quot;:&quot;&quot;);this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(n){n=n||event;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}};this.obj.idd=String(m);this.obj.title=(l.title||&quot;&quot;);this.obj.pressed=false;this.callEvent=false;this.obj.innerHTML=g._rtlParseBtn((this.img!=&quot;&quot;?&quot;&lt;img src='&quot;+g.kZ.icons_path+this.img+&quot;'&gt;&quot;:&quot;&quot;),(l.text!=null?&quot;<DIV class="dhxtoolbar_text">&quot;+l.text+&quot;</DIV>&quot;:&quot;&quot;));g.base.appendChild(this.obj);this.arw=document.createElement(&quot;DIV&quot;);this.arw.className=&quot;dhx_toolbar_arw dhxtoolbar_btn_&quot;+(this.state?&quot;def&quot;:&quot;dis&quot;);this.arw.style.display=this.obj.style.display;this.arw.innerHTML=&quot;<DIV class="arwimg"> </DIV>&quot;;this.arw.title=this.obj.title;this.arw.onselectstart=function(n){n=n||event;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}};g.base.appendChild(this.arw);var a=this;this.obj.onmouseover=function(n){n=n||event;if(g.anyUsed!=&quot;none&quot;){return}if(!a.state){return}a.obj.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_over&quot;;a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace(&quot;btn&quot;,&quot;arw&quot;)};this.obj.onmouseout=function(){a.obj.allowClick=false;if(g.anyUsed!=&quot;none&quot;){return}if(!a.state){return}a.obj.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;;a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace(&quot;btn&quot;,&quot;arw&quot;);a.callEvent=false};this.arw.onmouseover=this.obj.onmouseover;this.arw.onmouseout=this.obj.onmouseout;if(this.openAll==true){}else{this.obj.onclick=function(n){n=n||event;if(!a.obj.allowClick){return}if(!a.state){return}if(g.anyUsed!=&quot;none&quot;){return}var o=a.obj.idd.replace(g.idPrefix,&quot;&quot;);if(a.obj.extAction){try{window[a.obj.extAction](o)}catch(n){}}g.callEvent(&quot;onClick&quot;,[o])};this.obj[window.dhx4.isIPad?&quot;ontouchstart&quot;:&quot;onmousedown&quot;]=function(n){n=n||event;if(g.anyUsed!=&quot;none&quot;){return}if(!a.state){return}a.obj.allowClick=true;a.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_pres&quot;;a.arw.className=&quot;dhx_toolbar_arw dhxtoolbar_btn_pres&quot;;a.callEvent=true};this.obj[window.dhx4.isIPad?&quot;ontouchend&quot;:&quot;onmouseup&quot;]=function(n){n=n||event;n.cancelBubble=true;if(g.anyUsed!=&quot;none&quot;){return}if(!a.state){return}a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace(&quot;btn&quot;,&quot;arw&quot;);if(window.dhx4.isIPad&amp;&amp;a.callEvent){var o=a.obj.idd.replace(g.idPrefix,&quot;&quot;);g.callEvent(&quot;onClick&quot;,[o])}}}if(window.dhx4.isIPad){this.obj.ontouchmove=this.obj.onmouseout}this.arw[window.dhx4.isIPad?&quot;ontouchstart&quot;:&quot;onmousedown&quot;]=function(q){q=q||event;var x=(this.className.indexOf(&quot;dhx_toolbar_arw&quot;)===0?this:this.nextSibling);if(x._skip){q=q||event;q.cancelBubble=true}else{x._skip=true}x=null;if(!a.state){return}if(g.anyUsed==a.obj.idd){a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace(&quot;btn&quot;,&quot;arw&quot;);g.anyUsed=&quot;none&quot;;window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display=&quot;none&quot;;if(a.polygon._ie6cover){a.polygon._ie6cover.style.display=&quot;none&quot;}if(g.kZ.skin==&quot;dhx_terrace&quot;){g._improveTerraceButtonSelect(a.id,true)}}else{if(g.anyUsed!=&quot;none&quot;){if(g.objPull[g.idPrefix+g.anyUsed][&quot;type&quot;]==&quot;buttonSelect&quot;){var w=g.objPull[g.idPrefix+g.anyUsed];if(w.polygon.style.display!=&quot;none&quot;){w.obj.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;;w.obj.className=w.obj.renderAs;w.arw.className=String(a.obj.renderAs).replace(&quot;btn&quot;,&quot;arw&quot;);window.dhx4.zim.clear(w.polygon._idd);w.polygon.style.display=&quot;none&quot;;if(w.polygon._ie6cover){w.polygon._ie6cover.style.display=&quot;none&quot;}if(g.kZ.skin==&quot;dhx_terrace&quot;){g._improveTerraceButtonSelect(w.id,true)}}}}a.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_over&quot;;a.arw.className=&quot;dhx_toolbar_arw dhxtoolbar_btn_pres&quot;;g.anyUsed=a.obj.idd;a.polygon.style.top=&quot;0px&quot;;a.polygon.style.visibility=&quot;hidden&quot;;a.polygon.style.zIndex=window.dhx4.zim.reserve(a.polygon._idd);a.polygon.style.display=&quot;&quot;;if(g.kZ.skin==&quot;dhx_terrace&quot;){g._improveTerraceButtonSelect(a.id,false)}a._fixMaxOpenHeight(a.maxOpen||null);g._autoDetectVisibleArea();var r=window.dhx4.absTop(a.obj)+a.obj.offsetHeight+g.kZ.sel_ofs_y;var u=a.polygon.offsetHeight;if(r+u&gt;g.tY2){var s=(a.maxOpen!=null?Math.floor((g.tY2-r)/22):0);if(s&gt;=1){a._fixMaxOpenHeight(s)}else{r=window.dhx4.absTop(a.obj)-u-g.kZ.sel_ofs_y;if(r&lt;0){r=0}}}a.polygon.style.top=r+&quot;px&quot;;if(g.rtl){a.polygon.style.left=window.dhx4.absLeft(a.obj)+a.obj.offsetWidth-a.polygon.offsetWidth+g.kZ.sel_ofs_x+&quot;px&quot;}else{var o=document.body.scrollLeft;var n=o+(window.innerWidth||document.body.clientWidth);var v=window.dhx4.absLeft(a.obj)+g.kZ.sel_ofs_x;if(v+a.polygon.offsetWidth&gt;n){v=window.dhx4.absLeft(a.arw)+a.arw.offsetWidth-a.polygon.offsetWidth}a.polygon.style.left=v+&quot;px&quot;}a.polygon.style.visibility=&quot;visible&quot;;if(a.polygon._ie6cover){a.polygon._ie6cover.style.left=a.polygon.style.left;a.polygon._ie6cover.style.top=a.polygon.style.top;a.polygon._ie6cover.style.width=a.polygon.offsetWidth+&quot;px&quot;;a.polygon._ie6cover.style.height=a.polygon.offsetHeight+&quot;px&quot;;a.polygon._ie6cover.style.display=&quot;&quot;}}return false};this.arw.onclick=function(n){n=n||event;n.cancelBubble=true};this.arw[window.dhx4.isIPad?&quot;ontouchend&quot;:&quot;onmouseup&quot;]=function(n){n=n||event;n.cancelBubble=true};if(this.openAll===true){this.obj.onclick=this.arw.onclick;this.obj.onmousedown=this.arw.onmousedown;this.obj.onmouseup=this.arw.onmouseup;if(window.dhx4.isIPad){this.obj.ontouchstart=this.arw.ontouchstart;this.obj.ontouchend=this.arw.ontouchend}}this.obj.iddPrefix=g.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(s){var r=&quot;auto&quot;;var q=false;if(s!==null){var o=0;for(var n in this._listOptions){o++}if(o&gt;s){this._ph=22*s;r=this._ph+&quot;px&quot;}else{q=true}}this.polygon.style.width=&quot;auto&quot;;this.polygon.style.height=&quot;auto&quot;;if(!q&amp;&amp;a.maxOpen!=null){this.polygon.style.width=this.p_tbl.offsetWidth+g._sbw+&quot;px&quot;;this.polygon.style.height=r}};this._separatorButtonSelectObject=function(q,n,o){this.obj={};this.obj.tr=document.createElement(&quot;TR&quot;);this.obj.tr.className=&quot;tr_sep&quot;;this.obj.tr.onselectstart=function(r){r=r||event;if(r.preventDefault){r.preventDefault()}else{r.returnValue=false}return false};this.obj.td=document.createElement(&quot;TD&quot;);this.obj.td.colSpan=&quot;2&quot;;this.obj.td.className=&quot;td_btn_sep&quot;;this.obj.td.onselectstart=function(r){r=r||event;if(r.preventDefault){r.preventDefault()}else{r.returnValue=false}return false};if(isNaN(o)){o=a.p_tbody.childNodes.length+1}else{if(o&lt;1){o=1}}if(o&gt;a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[o-1])}this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement(&quot;DIV&quot;);this.obj.sep.className=&quot;btn_sep&quot;;this.obj.sep.onselectstart=function(r){r=r||event;if(r.preventDefault){r.preventDefault()}else{r.returnValue=false}return false};this.obj.td.appendChild(this.obj.sep);a._listOptions[q]=this.obj;return this};this._buttonButtonSelectObject=function(s,q,r){var o=true;if(typeof(q.enabled)!=&quot;undefined&quot;){o=window.dhx4.s2b(q.enabled)}else{if(typeof(q.disabled)!=&quot;undefined&quot;){o=window.dhx4.s2b(q.disabled)}}this.obj={};this.obj.tr=document.createElement(&quot;TR&quot;);this.obj.tr.en=o;this.obj.tr.extAction=(q.action||null);this.obj.tr._selected=(q.selected!=null);this.obj.tr.className=&quot;tr_btn&quot;+(this.obj.tr.en?(this.obj.tr._selected&amp;&amp;a.renderSelect?&quot; tr_btn_selected&quot;:&quot;&quot;):&quot; tr_btn_disabled&quot;);this.obj.tr.onselectstart=function(u){u=u||event;if(u.preventDefault){u.preventDefault()}else{u.returnValue=false}return false};this.obj.tr.idd=String(s);if(isNaN(r)){r=a.p_tbody.childNodes.length+1}else{if(r&lt;1){r=1}}if(r&gt;a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[r-1])}this.obj.td_a=document.createElement(&quot;TD&quot;);this.obj.td_a.className=&quot;td_btn_img&quot;;this.obj.td_a.onselectstart=function(u){u=u||event;if(u.preventDefault){u.preventDefault()}else{u.returnValue=false}return false};this.obj.td_b=document.createElement(&quot;TD&quot;);this.obj.td_b.className=&quot;td_btn_txt&quot;;this.obj.td_b.onselectstart=function(u){u=u||event;if(u.preventDefault){u.preventDefault()}else{u.returnValue=false}return false};if(g.rtl){this.obj.tr.appendChild(this.obj.td_b);this.obj.tr.appendChild(this.obj.td_a)}else{this.obj.tr.appendChild(this.obj.td_a);this.obj.tr.appendChild(this.obj.td_b)}if(q.img!=null){this.obj.td_a.innerHTML=&quot;&lt;img class='btn_sel_img' src='&quot;+g.kZ.icons_path+q.img+&quot;' border='0'&gt;&quot;;this.obj.tr._img=q.img}else{this.obj.td_a.innerHTML=&quot; &quot;}var n=(q.text!=null?q.text:(q.itemText||&quot;&quot;));this.obj.td_b.innerHTML=&quot;<DIV class="btn_sel_text">&quot;+n+&quot;</DIV>&quot;;this.obj.tr[window.dhx4.isIPad?&quot;ontouchstart&quot;:&quot;onmouseover&quot;]=function(){if(!this.en||(this._selected&amp;&amp;a.renderSelect)){return}this.className=&quot;tr_btn tr_btn_over&quot;};this.obj.tr.onmouseout=function(){if(!this.en){return}if(this._selected&amp;&amp;a.renderSelect){if(String(this.className).search(&quot;tr_btn_selected&quot;)== -1){this.className=&quot;tr_btn tr_btn_selected&quot;}}else{this.className=&quot;tr_btn&quot;}};this.obj.tr[window.dhx4.isIPad?&quot;ontouchend&quot;:&quot;onclick&quot;]=function(u){u=u||event;u.cancelBubble=true;if(!this.en){return}a.setListOptionSelected(this.idd.replace(g.idPrefix,&quot;&quot;));a.obj.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;;a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace(&quot;btn&quot;,&quot;arw&quot;);window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display=&quot;none&quot;;if(a.polygon._ie6cover){a.polygon._ie6cover.style.display=&quot;none&quot;}if(g.kZ.skin==&quot;dhx_terrace&quot;){g._improveTerraceButtonSelect(a.id,true)}g.anyUsed=&quot;none&quot;;var v=this.idd.replace(g.idPrefix,&quot;&quot;);if(this.extAction){try{window[this.extAction](v)}catch(u){}}g.callEvent(&quot;onClick&quot;,[v])};a._listOptions[s]=this.obj;return this};this.polygon=document.createElement(&quot;DIV&quot;);this.polygon.dir=&quot;ltr&quot;;this.polygon.style.display=&quot;none&quot;;this.polygon.className=&quot;dhx_toolbar_poly_&quot;+g.kZ.skin+&quot; dhxtoolbar_icons_&quot;+g.kZ.iconSize;this.polygon.onselectstart=function(n){n=n||event;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}};this.polygon.onmousedown=function(n){n=n||event;n.cancelBubble=true};this.polygon.style.overflowY=&quot;auto&quot;;this.polygon._idd=window.dhx4.newId();if(window.dhx4.isIPad){this.polygon.ontouchstart=function(n){n=n||event;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}n.cancelBubble=true;return false}}this.p_tbl=document.createElement(&quot;TABLE&quot;);this.p_tbl.className=&quot;buttons_cont&quot;;this.p_tbl.cellSpacing=&quot;0&quot;;this.p_tbl.cellPadding=&quot;0&quot;;this.p_tbl.border=&quot;0&quot;;this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement(&quot;TBODY&quot;);this.p_tbl.appendChild(this.p_tbody);if(l.options!=null){for(var h=0;h&lt;l.options.length;h++){var c=&quot;_&quot;+(l.options[h].type||&quot;&quot;)+&quot;ButtonSelectObject&quot;;if(l.options[h].id==null){l.options[h].id=g._genStr(24)}if(typeof(this[c])==&quot;function&quot;){new this[c](l.options[h].id,l.options[h])}}}document.body.appendChild(this.polygon);if(window.dhx4.isIE6){this.polygon._ie6cover=document.createElement(&quot;IFRAME&quot;);this.polygon._ie6cover.frameBorder=0;this.polygon._ie6cover.style.position=&quot;absolute&quot;;this.polygon._ie6cover.style.border=&quot;none&quot;;this.polygon._ie6cover.style.backgroundColor=&quot;#000000&quot;;this.polygon._ie6cover.style.filter=&quot;alpha(opacity=100)&quot;;this.polygon._ie6cover.style.display=&quot;none&quot;;this.polygon._ie6cover.setAttribute(&quot;src&quot;,&quot;javascript:false;&quot;);document.body.appendChild(this.polygon._ie6cover)}this.setWidth=function(n){this.obj.style.width=n-this.arw.offsetWidth+&quot;px&quot;;this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+&quot;px&quot;;this.p_tbl.style.width=this.polygon.style.width};this.enableItem=function(){g._enableItem(this)};this.disableItem=function(){g._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=&quot;&quot;;this.arw.style.display=&quot;&quot;};this.hideItem=function(){this.obj.style.display=&quot;none&quot;;this.arw.style.display=&quot;none&quot;};this.Yi=function(){return(this.obj.style.display==&quot;&quot;)};this.setItemText=function(n){g._setItemText(this,n)};this.getItemText=function(){return g._getItemText(this)};this.setItemImage=function(n){g._setItemImage(this,n,true)};this.clearItemImage=function(){g._clearItemImage(this,true)};this.setItemImageDis=function(n){g._setItemImage(this,n,false)};this.clearItemImageDis=function(){g._clearItemImage(this,false)};this.setItemToolTip=function(n){this.obj.title=n;this.arw.title=n};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(u,s,q,r,n){if(!(q==&quot;button&quot;||q==&quot;separator&quot;)){return}var o={id:u,type:q,text:r,img:n};new this[&quot;_&quot;+q+&quot;ButtonSelectObject&quot;](u,o,s)};this.removeListOption=function(q){if(!this._isListButton(q,true)){return}var n=this._listOptions[q];if(n.td_a!=null&amp;&amp;n.td_b!=null){n.td_a.onselectstart=null;n.td_b.onselectstart=null;while(n.td_a.childNodes.length&gt;0){n.td_a.removeChild(n.td_a.childNodes[0])}while(n.td_b.childNodes.length&gt;0){n.td_b.removeChild(n.td_b.childNodes[0])}n.tr.onselectstart=null;n.tr.onmouseover=null;n.tr.onmouseout=null;n.tr.onclick=null;while(n.tr.childNodes.length&gt;0){n.tr.removeChild(n.tr.childNodes[0])}n.tr.parentNode.removeChild(n.tr);n.td_a=null;n.td_b=null;n.tr=null}else{n.sep.onselectstart=null;n.td.onselectstart=null;n.tr.onselectstart=null;while(n.td.childNodes.length&gt;0){n.td.removeChild(n.td.childNodes[0])}while(n.tr.childNodes.length&gt;0){n.tr.removeChild(n.tr.childNodes[0])}n.tr.parentNode.removeChild(n.tr);n.sep=null;n.td=null;n.tr=null}n=null;this._listOptions[q]=null;try{delete this._listOptions[q]}catch(o){}};this.showListOption=function(n){if(!this._isListButton(n,true)){return}this._listOptions[n].tr.style.display=&quot;&quot;};this.hideListOption=function(n){if(!this._isListButton(n,true)){return}this._listOptions[n].tr.style.display=&quot;none&quot;};this.isListOptionVisible=function(n){if(!this._isListButton(n,true)){return}return(this._listOptions[n].tr.style.display!=&quot;none&quot;)};this.enableListOption=function(n){if(!this._isListButton(n)){return}this._listOptions[n].tr.en=true;this._listOptions[n].tr.className=&quot;tr_btn&quot;+(this._listOptions[n].tr._selected&amp;&amp;g.renderSelect?&quot; tr_btn_selected&quot;:&quot;&quot;)};this.disableListOption=function(n){if(!this._isListButton(n)){return}this._listOptions[n].tr.en=false;this._listOptions[n].tr.className=&quot;tr_btn tr_btn_disabled&quot;};this.isListOptionEnabled=function(n){if(!this._isListButton(n)){return}return this._listOptions[n].tr.en};this.setListOptionPosition=function(q,o){if(!this._listOptions[q]||this.getListOptionPosition(q)==o||isNaN(o)){return}if(o&lt;1){o=1}var n=this._listOptions[q].tr;this.p_tbody.removeChild(n);if(o&gt;this.p_tbody.childNodes.length){this.p_tbody.appendChild(n)}else{this.p_tbody.insertBefore(n,this.p_tbody.childNodes[o-1])}n=null};this.getListOptionPosition=function(r){var o= -1;if(!this._listOptions[r]){return o}for(var n=0;n&lt;this.p_tbody.childNodes.length;n++){if(this.p_tbody.childNodes[n]==this._listOptions[r].tr){o=n+1}}return o};this.setListOptionImage=function(r,n){if(!this._isListButton(r)){return}var q=this._listOptions[r].tr.childNodes[(g.rtl?1:0)];if(q.childNodes.length&gt;0){q.childNodes[0].src=g.kZ.icons_path+n}else{var o=document.createElement(&quot;IMG&quot;);o.className=&quot;btn_sel_img&quot;;o.src=g.kZ.icons_path+n;q.appendChild(o)}q=null};this.getListOptionImage=function(q){if(!this._isListButton(q)){return}var o=this._listOptions[q].tr.childNodes[(g.rtl?1:0)];var n=null;if(o.childNodes.length&gt;0){n=o.childNodes[0].src}o=null;return n};this.clearListOptionImage=function(o){if(!this._isListButton(o)){return}var n=this._listOptions[o].tr.childNodes[(g.rtl?1:0)];while(n.childNodes.length&gt;0){n.removeChild(n.childNodes[0])}n.innerHTML=&quot; &quot;;n=null};this.setListOptionText=function(o,n){if(!this._isListButton(o)){return}this._listOptions[o].tr.childNodes[(g.rtl?0:1)].childNodes[0].innerHTML=n};this.getListOptionText=function(n){if(!this._isListButton(n)){return}return this._listOptions[n].tr.childNodes[(g.rtl?0:1)].childNodes[0].innerHTML};this.setListOptionToolTip=function(o,n){if(!this._isListButton(o)){return}this._listOptions[o].tr.title=n};this.getListOptionToolTip=function(n){if(!this._isListButton(n)){return}return this._listOptions[n].tr.title};this.forEachListOption=function(o){for(var n in this._listOptions){o(n)}};this.getAllListOptions=function(){var o=new Array();for(var n in this._listOptions){o[o.length]=n}return o};this.setListOptionSelected=function(q){for(var n in this._listOptions){var o=this._listOptions[n];if(o.td_a!=null&amp;&amp;o.td_b!=null&amp;&amp;o.tr.en){if(n==q){o.tr._selected=true;o.tr.className=&quot;tr_btn&quot;+(this.renderSelect?&quot; tr_btn_selected&quot;:&quot;&quot;);if(this.mode==&quot;select&quot;){if(o.tr._img){this.setItemImage(o.tr._img)}else{this.clearItemImage()}this.setItemText(this.getListOptionText(q))}}else{o.tr._selected=false;o.tr.className=&quot;tr_btn&quot;}}o=null}};this.getListOptionSelected=function(){var o=null;for(var n in this._listOptions){if(this._listOptions[n].tr._selected==true){o=n}}return o};this._isListButton=function(o,n){if(this._listOptions[o]==null){return false}if(!n&amp;&amp;this._listOptions[o].tr.className==&quot;tr_sep&quot;){return false}return true};this.setMaxOpen=function(n){this._ph=null;if(typeof(n)==&quot;number&quot;){this.maxOpen=n;this._maxOpenTest();return}this.maxOpen=null};if(l.width){this.setWidth(l.width)}if(this.mode==&quot;select&quot;&amp;&amp;typeof(l.selected)!=&quot;undefined&quot;){this.setListOptionSelected(l.selected)}return this};dhtmlXToolbarObject.prototype._buttonInputObject=function(g,l,h){this.id=g.idPrefix+l;this.obj=document.createElement(&quot;DIV&quot;);this.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;;this.obj.style.display=(h.hidden!=null?&quot;none&quot;:&quot;&quot;);this.obj.idd=String(l);this.obj.w=(h.width!=null?h.width:100);this.obj.title=(h.title!=null?h.title:&quot;&quot;);this.obj.innerHTML=&quot;&lt;input class='dhxtoolbar_input' type='text' style='width:&quot;+this.obj.w+&quot;px;'&quot;+(h.value!=null?&quot; value='&quot;+h.value+&quot;'&quot;:&quot;&quot;)+&quot;&gt;&quot;;var c=g;var a=this;this.obj.childNodes[0].onkeydown=function(m){m=m||event;if(m.keyCode==13){c.callEvent(&quot;onEnter&quot;,[a.obj.idd,this.value])}};g.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=false};this.disableItem=function(){this.obj.childNodes[0].disabled=true};this.isEnabled=function(){return(!this.obj.childNodes[0].disabled)};this.showItem=function(){this.obj.style.display=&quot;&quot;};this.hideItem=function(){this.obj.style.display=&quot;none&quot;};this.Yi=function(){return(this.obj.style.display!=&quot;none&quot;)};this.setValue=function(m){this.obj.childNodes[0].value=m};this.getValue=function(){return this.obj.childNodes[0].value};this.setWidth=function(m){this.obj.w=m;this.obj.childNodes[0].style.width=this.obj.w+&quot;px&quot;};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(m){this.obj.title=m};this.getItemToolTip=function(){return this.obj.title};this.getInput=function(){return this.obj.firstChild};if(typeof(h.enabled)!=&quot;undefined&quot;&amp;&amp;window.dhx4.s2b(h.enabled)==false){this.disableItem()}return this};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(a,h,c){this.id=a.idPrefix+h;this.state=(c.enabled!=null?false:true);this.imgEn=(c.img!=null?c.img:&quot;&quot;);this.imgDis=(c.imgdis!=null?c.imgdis:&quot;&quot;);this.img=(this.state?(this.imgEn!=&quot;&quot;?this.imgEn:&quot;&quot;):(this.imgDis!=&quot;&quot;?this.imgDis:&quot;&quot;));this.obj=document.createElement(&quot;DIV&quot;);this.obj.pressed=(c.selected!=null);this.obj.extAction=(c.action||null);this.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_&quot;+(this.obj.pressed?&quot;pres&quot;+(this.state?&quot;&quot;:&quot;_dis&quot;):(this.state?&quot;def&quot;:&quot;dis&quot;));this.obj.style.display=(c.hidden!=null?&quot;none&quot;:&quot;&quot;);this.obj.renderAs=this.obj.className;this.obj.idd=String(h);this.obj.title=(c.title||&quot;&quot;);if(this.obj.pressed){this.obj.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_over&quot;}this.obj.innerHTML=a._rtlParseBtn((this.img!=&quot;&quot;?&quot;&lt;img src='&quot;+a.kZ.icons_path+this.img+&quot;'&gt;&quot;:&quot;&quot;),(c.text!=null?&quot;<DIV class="dhxtoolbar_text">&quot;+c.text+&quot;</DIV>&quot;:&quot;&quot;));a.base.appendChild(this.obj);var g=this;this.obj.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){if(g.state==false){return}if(a.anyUsed!=&quot;none&quot;){return}if(this.pressed){this.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_over&quot;;return}this.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_over&quot;;this.renderAs=this.className};this.obj._doOnMouseOut=function(){if(g.state==false){return}if(a.anyUsed!=&quot;none&quot;){return}if(this.pressed){this.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;;return}this.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;;this.renderAs=this.className};this.obj[window.dhx4.isIPad?&quot;ontouchstart&quot;:&quot;onmousedown&quot;]=function(l){if(a.mR(&quot;onBeforeStateChange&quot;)){if(!a.callEvent(&quot;onBeforeStateChange&quot;,[this.idd.replace(a.idPrefix,&quot;&quot;),this.pressed])){return}}if(g.state==false){return}if(a.anyUsed!=&quot;none&quot;){return}this.pressed= !this.pressed;this.className=(this.pressed?&quot;dhx_toolbar_btn dhxtoolbar_btn_pres&quot;:this.renderAs);var m=this.idd.replace(a.idPrefix,&quot;&quot;);if(this.extAction){try{window[this.extAction](m,this.pressed)}catch(l){}}a.callEvent(&quot;onStateChange&quot;,[m,this.pressed]);return false};this.setItemState=function(l,n){if(this.obj.pressed!=l){if(l==true){this.obj.pressed=true;this.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_pres&quot;+(this.state?&quot;&quot;:&quot;_dis&quot;);this.obj.renderAs=&quot;dhx_toolbar_btn dhxtoolbar_btn_over&quot;}else{this.obj.pressed=false;this.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_&quot;+(this.state?&quot;def&quot;:&quot;dis&quot;);this.obj.renderAs=this.obj.className}if(n==true){var o=this.obj.idd.replace(a.idPrefix,&quot;&quot;);if(this.obj.extAction){try{window[this.obj.extAction](o,this.obj.pressed)}catch(m){}}a.callEvent(&quot;onStateChange&quot;,[o,this.obj.pressed])}}};this.getItemState=function(){return this.obj.pressed};this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=&quot;&quot;};this.hideItem=function(){this.obj.style.display=&quot;none&quot;};this.Yi=function(){return(this.obj.style.display==&quot;&quot;)};this.setItemText=function(l){a._setItemText(this,l)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(l){a._setItemImage(this,l,true)};this.clearItemImage=function(){a._clearItemImage(this,true)};this.setItemImageDis=function(l){a._setItemImage(this,l,false)};this.clearItemImageDis=function(){a._clearItemImage(this,false)};this.setItemToolTip=function(l){this.obj.title=l};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._sliderObject=function(h,m,l){this.id=h.idPrefix+m;this.state=(l.enabled!=null?(l.enabled==&quot;true&quot;?true:false):true);this.obj=document.createElement(&quot;DIV&quot;);this.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_&quot;+(this.state?&quot;def&quot;:&quot;dis&quot;);this.obj.style.display=(l.hidden!=null?&quot;none&quot;:&quot;&quot;);this.obj.onselectstart=function(n){n=n||event;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}};this.obj.idd=String(m);this.obj.len=(l.length!=null?Number(l.length):50);this.obj.innerHTML=&quot;<DIV class="dhxtoolbar_text">&quot;+(l.textMin||&quot;&quot;)+&quot;</DIV><DIV class="dhxtoolbar_text">&quot;+(l.textMax||&quot;&quot;)+&quot;</DIV>&quot;;h.base.appendChild(this.obj);var a=this;this.pen=document.createElement(&quot;DIV&quot;);this.pen.className=&quot;dhxtoolbar_sl_pen&quot;;this.obj.appendChild(this.pen);var g=this.pen;this.label=document.createElement(&quot;DIV&quot;);this.label.dir=&quot;ltr&quot;;this.label.className=&quot;dhx_toolbar_slider_label_&quot;+h.kZ.skin+(h.rtl?&quot;_rtl&quot;:&quot;&quot;);this.label.style.display=&quot;none&quot;;this.label.tip=(l.toolTip||&quot;%v&quot;);this.label._zi=window.dhx4.newId();document.body.appendChild(this.label);var c=this.label;this.pen.valueMin=(l.valueMin!=null?Number(l.valueMin):0);this.pen.valueMax=(l.valueMax!=null?Number(l.valueMax):100);if(this.pen.valueMin&gt;this.pen.valueMax){this.pen.valueMin=this.pen.valueMax}this.pen.valueNow=(l.valueNow!=null?Number(l.valueNow):this.pen.valueMax);if(this.pen.valueNow&gt;this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}if(this.pen.valueNow&lt;this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits=function(){this.minX=a.obj.childNodes[1].offsetLeft+2;this.maxX=a.obj.childNodes[3].offsetLeft-this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+&quot;px&quot;;this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=false;this.pen[window.dhx4.isIPad?&quot;ontouchstart&quot;:&quot;onmousedown&quot;]=function(n){if(a.state==false){return}n=n||event;this.initXY=(window.dhx4.isIPad?n.touches[0].clientX:n.clientX);this.newValueNow=this.valueNow;this.allowMove=true;this.className=&quot;dhxtoolbar_sl_pen dhxtoolbar_over&quot;;if(c.tip!=&quot;&quot;){c.style.visibility=&quot;hidden&quot;;c.style.display=&quot;&quot;;c.innerHTML=c.tip.replace(&quot;%v&quot;,this.valueNow);c.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-c.offsetWidth/2)+&quot;px&quot;;c.style.top=window.dhx4.absTop(this)-c.offsetHeight-3+&quot;px&quot;;c.style.visibility=&quot;&quot;;c.style.zIndex=window.dhx4.zim.reserve(c._zi)}};this.pen._doOnMouseMoveStart=function(o){o=o||event;if(!g.allowMove){return}var n=(window.dhx4.isIPad?o.touches[0].clientX:o.clientX);var q=n-g.initXY;if(n&lt;window.dhx4.absLeft(g)+Math.round(g.offsetWidth/2)&amp;&amp;g.nowX==g.minX){return}if(n&gt;window.dhx4.absLeft(g)+Math.round(g.offsetWidth/2)&amp;&amp;g.nowX==g.maxX){return}g.newNowX=g.nowX+q;if(g.newNowX&lt;g.minX){g.newNowX=g.minX}if(g.newNowX&gt;g.maxX){g.newNowX=g.maxX}g.nowX=g.newNowX;g.style.left=g.nowX+&quot;px&quot;;g.initXY=n;g.newValueNow=Math.round((g.valueMax-g.valueMin)*(g.newNowX-g.minX)/(g.maxX-g.minX)+g.valueMin);if(c.tip!=&quot;&quot;){c.innerHTML=c.tip.replace(/%v/gi,g.newValueNow);c.style.left=Math.round(window.dhx4.absLeft(g)+g.offsetWidth/2-c.offsetWidth/2)+&quot;px&quot;;c.style.top=window.dhx4.absTop(g)-c.offsetHeight-3+&quot;px&quot;}o.cancelBubble=true;if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}return false};this.pen._doOnMouseMoveEnd=function(){if(!g.allowMove){return}g.className=&quot;dhxtoolbar_sl_pen&quot;;g.allowMove=false;g.nowX=g.newNowX;g.valueNow=g.newValueNow;if(c.tip!=&quot;&quot;){c.style.display=&quot;none&quot;;window.dhx4.zim.clear(c._zi)}h.callEvent(&quot;onValueChange&quot;,[a.obj.idd.replace(h.idPrefix,&quot;&quot;),g.valueNow])};if(window.dhx4.isIPad){document.addEventListener(&quot;touchmove&quot;,g._doOnMouseMoveStart,false);document.addEventListener(&quot;touchend&quot;,g._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)!=&quot;undefined&quot;){window.addEventListener(&quot;mousemove&quot;,g._doOnMouseMoveStart,false);window.addEventListener(&quot;mouseup&quot;,g._doOnMouseMoveEnd,false)}else{document.body.attachEvent(&quot;onmousemove&quot;,g._doOnMouseMoveStart);document.body.attachEvent(&quot;onmouseup&quot;,g._doOnMouseMoveEnd)}}this.enableItem=function(){if(this.state){return}this.state=true;this.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_def&quot;};this.disableItem=function(){if(!this.state){return}this.state=false;this.obj.className=&quot;dhx_toolbar_btn dhxtoolbar_btn_dis&quot;};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=&quot;&quot;};this.hideItem=function(){this.obj.style.display=&quot;none&quot;};this.Yi=function(){return(this.obj.style.display==&quot;&quot;)};this.setValue=function(n,o){n=Number(n);if(n&lt;this.pen.valueMin){n=this.pen.valueMin}if(n&gt;this.pen.valueMax){n=this.pen.valueMax}this.pen.valueNow=n;this.pen._definePos();if(o==true){h.callEvent(&quot;onValueChange&quot;,[this.obj.idd.replace(h.idPrefix,&quot;&quot;),this.pen.valueNow])}};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(o,n){o=Number(o);if(o&gt;this.pen.valueMax){return}this.obj.childNodes[0].innerHTML=n;this.obj.childNodes[0].style.display=(n.length&gt;0?&quot;&quot;:&quot;none&quot;);this.pen.valueMin=o;if(this.pen.valueNow&lt;this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits();this.pen._definePos()};this.setMaxValue=function(o,n){o=Number(o);if(o&lt;this.pen.valueMin){return}this.obj.childNodes[4].innerHTML=n;this.obj.childNodes[4].style.display=(n.length&gt;0?&quot;&quot;:&quot;none&quot;);this.pen.valueMax=o;if(this.pen.valueNow&gt;this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}this.pen._detectLimits();this.pen._definePos()};this.getMinValue=function(){var n=this.obj.childNodes[0].innerHTML;var o=this.pen.valueMin;return new Array(o,n)};this.getMaxValue=function(){var n=this.obj.childNodes[4].innerHTML;var o=this.pen.valueMax;return new Array(o,n)};this.setItemToolTipTemplate=function(n){this.label.tip=n};this.getItemToolTipTemplate=function(){return this.label.tip};return this};dhtmlXToolbarObject.prototype.unload=function(){if(this.kZ.isIPad){document.removeEventListener(&quot;touchstart&quot;,this._doOnClick,false)}else{if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;mousedown&quot;,this._doOnClick,false)}else{document.body.detachEvent(&quot;onmousedown&quot;,this._doOnClick)}}this._doOnClick=null;this.clearAll();this.objPull=null;if(this._xmlLoader){this._xmlLoader.fA();this._xmlLoader=null}while(this.base.childNodes.length&gt;0){this.base.removeChild(this.base.childNodes[0])}this.vI.removeChild(this.base);this.base=null;while(this.vI.childNodes.length&gt;0){this.vI.removeChild(this.vI.childNodes[0])}this.vI.className=&quot;&quot;;this.vI=null;window.dhx4._enableDataLoading(this,null,null,null,&quot;clear&quot;);window.dhx4._eventable(this,&quot;clear&quot;);this.tX1=null;this.tX2=null;this.tY1=null;this.tY2=null;this.anyUsed=null;this.idPrefix=null;this.rootTypes=null;this._rtl=null;this._rtlParseBtn=null;this.setRTL=null;this._sbw=null;this._getObj=null;this._addImgObj=null;this._setItemImage=null;this._clearItemImage=null;this._setItemText=null;this._getItemText=null;this._enableItem=null;this._disableItem=null;this._xmlParser=null;this._addItemToStorage=null;this._genStr=null;this._addItem=null;this._getPosition=null;this._setPosition=null;this._getIdByPosition=null;this._separatorObject=null;this._textObject=null;this._buttonObject=null;this._buttonSelectObject=null;this._buttonInputObject=null;this._buttonTwoStateObject=null;this._sliderObject=null;this._autoDetectVisibleArea=null;this._removeItem=null;this.setAlign=null;this.setSkin=null;this.setIconsPath=null;this.setIconPath=null;this.loadXML=null;this.loadXMLString=null;this.clearAll=null;this.addSpacer=null;this.removeSpacer=null;this.getType=null;this.getTypeExt=null;this.inArray=null;this.getParentId=null;this.addButton=null;this.addText=null;this.addButtonSelect=null;this.addButtonTwoState=null;this.addSeparator=null;this.addSlider=null;this.addInput=null;this.forEachItem=null;this.showItem=null;this.hideItem=null;this.Yi=null;this.enableItem=null;this.disableItem=null;this.isEnabled=null;this.setItemText=null;this.getItemText=null;this.setItemToolTip=null;this.getItemToolTip=null;this.setItemImage=null;this.setItemImageDis=null;this.clearItemImage=null;this.clearItemImageDis=null;this.setItemState=null;this.getItemState=null;this.setItemToolTipTemplate=null;this.getItemToolTipTemplate=null;this.setValue=null;this.getValue=null;this.setMinValue=null;this.getMinValue=null;this.setMaxValue=null;this.getMaxValue=null;this.setWidth=null;this.getWidth=null;this.fI=null;this.Yy=null;this.removeItem=null;this.addListOption=null;this.removeListOption=null;this.showListOption=null;this.hideListOption=null;this.isListOptionVisible=null;this.enableListOption=null;this.disableListOption=null;this.isListOptionEnabled=null;this.setListOptionPosition=null;this.getListOptionPosition=null;this.setListOptionText=null;this.getListOptionText=null;this.setListOptionToolTip=null;this.getListOptionToolTip=null;this.setListOptionImage=null;this.getListOptionImage=null;this.clearListOptionImage=null;this.forEachListOption=null;this.getAllListOptions=null;this.setListOptionSelected=null;this.getListOptionSelected=null;this.unload=null;this.setUserData=null;this.getUserData=null;this.setMaxOpen=null;this.items=null;this.kZ=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var a=window.dhx4.screenDim();this.tX1=a.left;this.tX2=a.right;this.tY1=a.top;this.tY2=a.bottom};dhtmlXToolbarObject.prototype._initObj=function(c){for(var a=0;a&lt;c.length;a++){this._addItemToStorage(c[a])}if(this.kZ.skin==&quot;dhx_terrace&quot;){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._xmlToJson=function(v){var o=[];var A=v.getElementsByTagName(&quot;toolbar&quot;);if(A!=null&amp;&amp;A[0]!=null){A=A[0];var E=[&quot;id&quot;,&quot;type&quot;,&quot;hidden&quot;,&quot;title&quot;,&quot;text&quot;,&quot;enabled&quot;,&quot;img&quot;,&quot;imgdis&quot;,&quot;action&quot;,&quot;openAll&quot;,&quot;renderSelect&quot;,&quot;mode&quot;,&quot;maxOpen&quot;,&quot;width&quot;,&quot;value&quot;,&quot;selected&quot;,&quot;length&quot;,&quot;textMin&quot;,&quot;textMax&quot;,&quot;toolTip&quot;,&quot;valueMin&quot;,&quot;valueMax&quot;,&quot;valueNow&quot;];var g=[&quot;id&quot;,&quot;type&quot;,&quot;enabled&quot;,&quot;disabled&quot;,&quot;action&quot;,&quot;selected&quot;,&quot;img&quot;,&quot;text&quot;];for(var c=0;c&lt;A.childNodes.length;c++){if(A.childNodes[c].tagName==&quot;item&quot;){var n={};for(var C=0;C&lt;E.length;C++){var l=A.childNodes[c].getAttribute(E[C]);if(l!=null){n[E[C]]=l}}for(var y=0;y&lt;A.childNodes[c].childNodes.length;y++){if(A.childNodes[c].childNodes[y].tagName==&quot;item&quot;&amp;&amp;n.type==&quot;buttonSelect&quot;){var D={};for(var C=0;C&lt;g.length;C++){var l=A.childNodes[c].childNodes[y].getAttribute(g[C]);if(l!=null){D[g[C]]=l}}var x=A.childNodes[c].childNodes[y].getElementsByTagName(&quot;itemText&quot;);if(x!=null&amp;&amp;x[0]!=null){D.itemText=x[0].firstChild.nodeValue}var s=A.childNodes[c].childNodes[y].getElementsByTagName(&quot;userdata&quot;);for(var C=0;C&lt;s.length;C++){if(!D.userdata){D.userdata={}}var a={};try{a.name=s[C].getAttribute(&quot;name&quot;)}catch(m){a.name=null}try{a.value=s[C].firstChild.nodeValue}catch(m){a.value=&quot;&quot;}if(a.name!=null){D.userdata[a.name]=a.value}}if(n.options==null){n.options=[]}n.options.push(D)}if(A.childNodes[c].childNodes[y].tagName==&quot;userdata&quot;){if(n.userdata==null){n.userdata={}}var D={};try{D.name=A.childNodes[c].childNodes[y].getAttribute(&quot;name&quot;)}catch(m){D.name=null}try{D.value=A.childNodes[c].childNodes[y].firstChild.nodeValue}catch(m){D.value=&quot;&quot;}if(D.name!=null){n.userdata[D.name]=D.value}}}o.push(n)}}}return o};dhtmlXToolbarObject.prototype._addItemToStorage=function(m,o){var n=(m.id||this._genStr(24));var h=(m.type||&quot;&quot;);if(h!=&quot;&quot;&amp;&amp;this[&quot;_&quot;+h+&quot;Object&quot;]!=null){if(h==&quot;buttonSelect&quot;){if(m.options!=null){for(var l=0;l&lt;m.options.length;l++){if(m.options[l].type==&quot;obj&quot;){m.options[l].type=&quot;button&quot;}if(m.options[l].type==&quot;sep&quot;){m.options[l].type=&quot;separator&quot;}}}}if(h==&quot;slider&quot;){var g={tip_template:&quot;toolTip&quot;,value_min:&quot;valueMin&quot;,value_max:&quot;valueMax&quot;,value_now:&quot;valueNow&quot;,text_min:&quot;textMin&quot;,text_max:&quot;textMax&quot;};for(var c in g){if(m[g[c]]==null&amp;&amp;m[c]!=null){m[g[c]]=m[c]}}}if(h==&quot;buttonInput&quot;){if(m.value==null&amp;&amp;m.text!=null){m.value=m.text}}if(h==&quot;buttonTwoState&quot;){if(typeof(m.selected)==&quot;undefined&quot;&amp;&amp;typeof(m.pressed)!=&quot;undefined&quot;&amp;&amp;window.dhx4.s2b(m.pressed)){m.selected=true}}if(typeof(m.enabled)==&quot;undefined&quot;&amp;&amp;typeof(m.disabled)!=&quot;undefined&quot;&amp;&amp;window.dhx4.s2b(m.disabled)){m.enabled=false}if(m.imgDis==null&amp;&amp;m.img_disabled!=null){m.imgdis=m.img_disabled}if((typeof(m.openAll)==&quot;undefined&quot;||m.openAll==null)&amp;&amp;this.kZ.skin==&quot;dhx_terrace&quot;){m.openAll=true}this.objPull[this.idPrefix+n]=new this[&quot;_&quot;+h+&quot;Object&quot;](this,n,m);this.objPull[this.idPrefix+n][&quot;type&quot;]=h;this.Yy(n,o)}if(m.userdata!=null){for(var c in m.userdata){this.setUserData(n,c,m.userdata[c])}}if(m.options!=null){for(var l=0;l&lt;m.options.length;l++){if(m.options[l].userdata!=null){for(var c in m.options[l].userdata){this.setListOptionUserData(m.id,m.options[l].id,c,m.options[l].userdata[c])}}}}};dhtmlXToolbarObject.prototype.setSkin=function(l,g){if(g===true){this.vI.className=this.vI.className.replace(/dhxtoolbar_icons_\d{1,}/,&quot;dhxtoolbar_icons_&quot;+this.kZ.iconSize)}else{this.kZ.skin=l;if(this.kZ.skin==&quot;dhx_skyblue&quot;){this.kZ.sel_ofs_y=1}if(this.kZ.skin==&quot;dhx_web&quot;){this.kZ.sel_ofs_y=1;this.kZ.sel_ofs_x=1}if(this.kZ.skin==&quot;dhx_terrace&quot;){this.kZ.sel_ofs_y= -1;this.kZ.sel_ofs_x=0}this.vI.className=&quot;dhx_toolbar_&quot;+this.kZ.skin+&quot; dhxtoolbar_icons_&quot;+this.kZ.iconSize}for(var c in this.objPull){var h=this.objPull[c];if(h.type==&quot;slider&quot;){h.pen._detectLimits();h.pen._definePos();h.label.className=&quot;dhx_toolbar_slider_label_&quot;+this.kZ.skin}if(h.type==&quot;buttonSelect&quot;){h.polygon.className=&quot;dhx_toolbar_poly_&quot;+this.kZ.skin+&quot; dhxtoolbar_icons_&quot;+this.kZ.iconSize}}if(l==&quot;dhx_terrace&quot;){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.setAlign=function(a){this.kZ.align=(a==&quot;right&quot;?&quot;right&quot;:&quot;left&quot;);this.base.className=(a==&quot;right&quot;?&quot;dhxtoolbar_float_right&quot;:&quot;dhxtoolbar_float_left&quot;);if(this._spacer){this._spacer.className=(a==&quot;right&quot;?&quot; dhxtoolbar_float_left&quot;:&quot; dhxtoolbar_float_right&quot;)}};dhtmlXToolbarObject.prototype.yZ=function(a){this.kZ.iconSize=({18:true,24:true,32:true,48:true}[a]?a:18);this.setSkin(this.kZ.skin,true);this.callEvent(&quot;_onIconSizeChange&quot;,[this.kZ.iconSize])};dhtmlXToolbarObject.prototype.setIconsPath=function(a){this.kZ.icons_path=a};dhtmlXToolbarObject.prototype.setUserData=function(g,a,c){g=this.idPrefix+g;if(this.objPull[g]!=null){if(this.objPull[g].userData==null){this.objPull[g].userData={}}this.objPull[g].userData[a]=c}};dhtmlXToolbarObject.prototype.getUserData=function(c,a){c=this.idPrefix+c;if(this.objPull[c]!=null&amp;&amp;this.objPull[c].userData!=null){return this.objPull[c].userData[a]||null}return null};dhtmlXToolbarObject.prototype._isListOptionExists=function(a,g){if(this.objPull[this.idPrefix+a]==null){return false}var c=this.objPull[this.idPrefix+a];if(c.type!=&quot;buttonSelect&quot;){return false}if(c._listOptions[g]==null){return false}return true};dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,l,c,h){if(!this._isListOptionExists(a,l)){return}var g=this.objPull[this.idPrefix+a]._listOptions[l];if(g.userData==null){g.userData={}}g.userData[c]=h};dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,h,c){if(!this._isListOptionExists(a,h)){return null}var g=this.objPull[this.idPrefix+a]._listOptions[h];if(!g.userData){return null}return(g.userData[c]?g.userData[c]:null)};dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){if(this.kZ.terrace_radius==null){this.kZ.terrace_radius=&quot;3px&quot;}var g=[];var h={separator:true,text:true};var m=[this.base];if(this._spacer!=null){m.push(this._spacer)}for(var o=0;o&lt;m.length;o++){g[o]=[];for(var c=0;c&lt;m[o].childNodes.length;c++){if(m[o].childNodes[c].idd!=null&amp;&amp;m[o].childNodes[c].style.display!=&quot;none&quot;){var n=this.idPrefix+m[o].childNodes[c].idd;if(this.objPull[n]!=null&amp;&amp;this.objPull[n].obj==m[o].childNodes[c]){g[o].push({a:n,type:this.objPull[n].type,node:this.objPull[n][this.objPull[n].type==&quot;buttonSelect&quot;?&quot;arw&quot;:&quot;obj&quot;]})}}}m[o]=null}for(var o=0;o&lt;g.length;o++){for(var c=0;c&lt;g[o].length;c++){var r=g[o][c];var s=false;var l=false;if(!h[r.type]){if(c==g[o].length-1||(g[o][c+1]!=null&amp;&amp;h[g[o][c+1].type])){s=true}if(c==0||(c-1&gt;=0&amp;&amp;g[o][c-1]!=null&amp;&amp;h[g[o][c-1].type])){l=true}}r.node.style.borderRightWidth=(s?&quot;1px&quot;:&quot;0px&quot;);r.node.style.borderTopRightRadius=r.node.style.borderBottomRightRadius=(s?this.kZ.terrace_radius:&quot;0px&quot;);if(r.type==&quot;buttonSelect&quot;){r.node.previousSibling.style.borderTopLeftRadius=r.node.previousSibling.style.borderBottomLeftRadius=(l?this.kZ.terrace_radius:&quot;0px&quot;);r.node.previousSibling._br=s;r.node.previousSibling._bl=l}else{r.node.style.borderTopLeftRadius=r.node.style.borderBottomLeftRadius=(l?this.kZ.terrace_radius:&quot;0px&quot;)}r.node._br=s;r.node._bl=l}}for(var o=0;o&lt;g.length;o++){for(var c=0;c&lt;g[o].length;c++){for(var n in g[o][c]){g[o][c][n]=null}g[o][c]=null}g[o]=null}g=m=null};dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(g,c){var a=this.objPull[g];if(c==true){a.obj.style.borderBottomLeftRadius=(a.obj._bl?this.kZ.terrace_radius:&quot;0px&quot;);a.arw.style.borderBottomRightRadius=(a.obj._br?this.kZ.terrace_radius:&quot;0px&quot;)}else{a.obj.style.borderBottomLeftRadius=&quot;0px&quot;;a.arw.style.borderBottomRightRadius=&quot;0px&quot;}a=null};function dhtmlXEditor(g,h){var c=this;this.kZ={content:&quot;&quot;,contentHTML:&quot;&quot;,resizeTM:null,resizeTMTime:100,roMode:false,toolbar:false,iconsPath:&quot;&quot;,evs:[&quot;focus&quot;,&quot;blur&quot;,&quot;keydown&quot;,&quot;keyup&quot;,&quot;keypress&quot;,&quot;mouseup&quot;,&quot;mousedown&quot;,&quot;click&quot;]};this._doOnFocusChanged=null;this._doOnAccess=null;if(typeof(g)==&quot;object&quot;&amp;&amp;g!=null&amp;&amp;g.tagName==null){h=g.skin;if(g.content!=null){this.kZ.content=g.content}if(g.contentHTML!=null){this.kZ.contentHTML=g.contentHTML}if(g.iconsPath!=null){this.kZ.iconsPath=g.iconsPath}if(g.toolbar!=null){this.kZ.toolbar=window.dhx4.s2b(g.toolbar)}if(g.onFocusChanged!=null){this._doOnFocusChanged=g.onFocusChanged}if(g.onAccess!=null){this._doOnAccess=g.onAccess}g=g.parent}this.kZ.skin=(h||window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhxeditor&quot;)||&quot;dhx_skyblue&quot;);if(typeof(g)==&quot;string&quot;){g=document.getElementById(g)}this.base=g;this.base.className+=&quot; dhxeditor_&quot;+this.kZ.skin;while(this.base.childNodes.length&gt;0){this.base.removeChild(this.base.childNodes[0])}var l=(window.dhx4.isIE?this.base.currentStyle.position:window.getComputedStyle(this.base,null).getPropertyValue(&quot;position&quot;));if(!(l==&quot;relative&quot;||l==&quot;absolute&quot;)){this.base.style.position=&quot;relative&quot;}this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this);this.base.appendChild(this.cell.cell);this.setSizes();this.cBlock=document.createElement(&quot;DIV&quot;);this.cBlock.className=&quot;dhxcont_content_blocker&quot;;this.cBlock.style.display=&quot;none&quot;;this.base.appendChild(this.cBlock);this.editor=document.createElement(&quot;IFRAME&quot;);this.editor.className=&quot;dhxeditor_mainiframe&quot;;this.editor.frameBorder=0;if(window.dhx4.isOpera){this.editor.scrolling=&quot;yes&quot;}var a=this.editor;if(typeof(window.addEventListener)!=&quot;undefined&quot;){a.onload=function(){for(var m=0;m&lt;c.kZ.evs.length;m++){a.contentWindow.addEventListener(c.kZ.evs[m],c._ev,false)}}}else{a.onreadystatechange=function(m){if(typeof(a.readyState)!=&quot;undefined&quot;&amp;&amp;a.readyState==&quot;complete&quot;){try{for(var n=0;n&lt;c.kZ.evs.length;n++){a.contentWindow.document.body.attachEvent(&quot;on&quot;+c.kZ.evs[n],c._ev)}}catch(o){}}}}this._ev=function(n){n=n||event;var m=n.type;c.callEvent(&quot;onAccess&quot;,[m,n]);if(typeof(c._doOnAccess)==&quot;function&quot;){c._doOnAccess(m,n)}else{if(typeof(c._doOnAccess)==&quot;string&quot;&amp;&amp;typeof(window[c._doOnAccess])==&quot;function&quot;){window[c._doOnAccess](m,n)}}};this._focus=function(){if(window.dhx4.isIE){this.editor.contentWindow.document.body.focus()}else{this.editor.contentWindow.focus()}};this.cell.attachObject(this.editor);this.edWin=this.editor.contentWindow;this.edDoc=this.edWin.document;this._prepareContent=function(o,r){var n=&quot;&quot;;if(o===true&amp;&amp;this.getContent!=null){n=this.getContent()}var m=this.editor.contentWindow.document;m.open(&quot;text/html&quot;,&quot;replace&quot;);if(window.dhx4.isOpera){m.write(&quot;&quot;)}else{if(window.dhx4.isKHTML){m.write(&quot;&quot;)}else{if(window.dhx4.isIE){m.write(&quot;&quot;)}else{m.write(&quot;&quot;)}}}m.close();if(window.dhx4.isIE){m.contentEditable=(r!==true)}else{m.designMode=(r!==true?&quot;On&quot;:&quot;Off&quot;)}if(window.dhx4.isFF){try{m.execCommand(&quot;useCSS&quot;,false,true)}catch(q){}}if(o===true&amp;&amp;this.setContent!=null){this.setContent(n)}};this._prepareContent();this._doOnResize=function(){window.clearTimeout(c.kZ.resizeTM);c.kZ.resizeTM=window.setTimeout(function(){if(c.setSizes){c.setSizes()}},c.kZ.resizeTMTime)};this._runCommand=function(o,r){if(this.kZ.roMode===true){return}if(arguments.length&lt;2){r=null}if(window.dhx4.isIE){this.edWin.focus()}try{var n=this.editor.contentWindow.document;n.execCommand(o,false,r)}catch(q){}if(window.dhx4.isIE){this.edWin.focus();var m=this;window.setTimeout(function(){m.edWin.focus();m=null},1)}};this.applyBold=function(){this._runCommand(&quot;Bold&quot;)};this.applyItalic=function(){this._runCommand(&quot;Italic&quot;)};this.applyUnderscore=function(){this._runCommand(&quot;Underline&quot;)};this.clearFormatting=function(){this._runCommand(&quot;RemoveFormat&quot;)};this._doOnClick=function(o){var n=o||window.event;var m=n.target||n.srcElement;c._showInfo(m)};this._doOnMouseDown=function(o){var n=o||window.event;var m=n.target||n.srcElement;c._showInfo(m)};this._doOnKeyUp=function(q){var o=q||window.event;var m=o.keyCode;var n=o.target||o.srcElement;if({37:1,38:1,39:1,40:1,13:1}[m]==1){c._showInfo(n)}};this._getParentByTag=function(m,o){o=o.toLowerCase();var n=m;do{if(o==&quot;&quot;||n.nodeName.toLowerCase()==o){return n}}while(n=n.parentNode);return m};this._isStyleProperty=function(o,r,m,q){r=r.toLowerCase();var s=o;do{if((s.nodeName.toLowerCase()==r)&amp;&amp;(s.style[m]==q)){return true}}while(s=s.parentNode);return false};this._setStyleProperty=function(m,q){this.style[q]=false;var o=this._getParentByTag(m,q);if(o&amp;&amp;(o.tagName.toLowerCase()==q)){this.style[q]=true}if(q==&quot;del&quot;&amp;&amp;this._getParentByTag(m,&quot;strike&quot;)&amp;&amp;this._getParentByTag(m,&quot;strike&quot;).tagName.toLowerCase()==&quot;strike&quot;){this.style.del=true}};this._showInfo=function(n){var n=(this._getSelectionBounds().end)?this._getSelectionBounds().end:n;if(!n|| !this._setStyleProperty){return}try{if(this.edWin.getComputedStyle){var m=this.edWin.getComputedStyle(n,null);var o=((m.getPropertyValue(&quot;font-weight&quot;)==401)?700:m.getPropertyValue(&quot;font-weight&quot;));this.style={fontStyle:m.getPropertyValue(&quot;font-style&quot;),fontSize:m.getPropertyValue(&quot;font-size&quot;),textDecoration:m.getPropertyValue(&quot;text-decoration&quot;),fontWeight:o,fontFamily:m.getPropertyValue(&quot;font-family&quot;),textAlign:m.getPropertyValue(&quot;text-align&quot;)};if(window.dhx4.isKHTML){this.style.fontStyle=m.getPropertyValue(&quot;font-style&quot;);this.style.vAlign=m.getPropertyValue(&quot;vertical-align&quot;);this.style.del=this._isStyleProperty(n,&quot;span&quot;,&quot;textDecoration&quot;,&quot;line-through&quot;);this.style.u=this._isStyleProperty(n,&quot;span&quot;,&quot;textDecoration&quot;,&quot;underline&quot;)}}else{var m=n.currentStyle;this.style={fontStyle:m.fontStyle,fontSize:m.fontSize,textDecoration:m.textDecoration,fontWeight:m.fontWeight,fontFamily:m.fontFamily,textAlign:m.textAlign}}this._setStyleProperty(n,&quot;h1&quot;);this._setStyleProperty(n,&quot;h2&quot;);this._setStyleProperty(n,&quot;h3&quot;);this._setStyleProperty(n,&quot;h4&quot;);if(!window.dhx4.isKHTML){this._setStyleProperty(n,&quot;del&quot;);this._setStyleProperty(n,&quot;sub&quot;);this._setStyleProperty(n,&quot;sup&quot;);this._setStyleProperty(n,&quot;u&quot;)}this.callEvent(&quot;onFocusChanged&quot;,[this.style,m])}catch(q){return null}};this._getSelectionBounds=function(){var r,o,u,n;if(this.edWin.getSelection){var s=this.edWin.getSelection();r=s.getRangeAt(s.rangeCount-1);u=r.startContainer;n=r.endContainer;o=r.commonAncestorContainer;if(u.nodeName==&quot;#text&quot;){o=o.parentNode}if(u.nodeName==&quot;#text&quot;){u=u.parentNode}if(u.nodeName.toLowerCase()==&quot;body&quot;){u=u.firstChild}if(n.nodeName==&quot;#text&quot;){n=n.parentNode}if(n.nodeName.toLowerCase()==&quot;body&quot;){n=n.lastChild}if(u==n){o=u}return{root:o,start:u,end:n}}else{if(this.edWin.document.selection){r=this.edDoc.selection.createRange();if(!r.duplicate){return null}o=r.parentElement();var q=r.duplicate();var m=r.duplicate();q.collapse(true);m.moveToElementText(q.parentElement());m.setEndPoint(&quot;EndToStart&quot;,q);u=q.parentElement();q=r.duplicate();m=r.duplicate();m.collapse(false);q.moveToElementText(m.parentElement());q.setEndPoint(&quot;StartToEnd&quot;,m);n=m.parentElement();if(u.nodeName.toLowerCase()==&quot;body&quot;){u=u.firstChild}if(n.nodeName.toLowerCase()==&quot;body&quot;){n=n.lastChild}if(u==n){o=u}return{root:o,start:u,end:n}}}return null};this.getContent=function(){if(!this.edDoc.body){return &quot;&quot;}else{if(window.dhx4.isFF){return this.editor.contentWindow.document.body.innerHTML.replace(/&lt;\/{0,}br\/{0,}&gt;\s{0,}$/gi,&quot;&quot;)}if(window.dhx4.isIE&amp;&amp;this.edDoc.body.innerText.length==0){return &quot;&quot;}return this.edDoc.body.innerHTML}};this.setContent=function(m){m=m||&quot;&quot;;if(this.edDoc.body){if(window.dhx4.isFF){if(typeof(this.kZ.ffTest)==&quot;undefined&quot;){this.editor.contentWindow.document.body.innerHTML=&quot;&quot;;this._runCommand(&quot;InsertHTML&quot;,&quot;test&quot;);this.kZ.ffTest=(this.editor.contentWindow.document.body.innerHTML.length&gt;0)}if(this.kZ.ffTest){this.editor.contentWindow.document.body.innerHTML=m}else{this.editor.contentWindow.document.body.innerHTML=&quot;&quot;;if(m.length==0){m=&quot; &quot;}this._runCommand(&quot;InsertHTML&quot;,m)}}else{this.editor.contentWindow.document.body.innerHTML=m}this.callEvent(&quot;onContentSet&quot;,[])}else{if(!this.kZ.firstLoadEv){this.kZ.firstLoadEv=true;this.kZ.firstLoadData=m;this._onFirstLoad=function(){c.setContent(c.kZ.firstLoadData);if(typeof(window.addEventListener)==&quot;function&quot;){c.edWin.removeEventListener(&quot;load&quot;,c._onFirstLoad,false)}else{c.edWin.detachEvent(&quot;onload&quot;,c._onFirstLoad)}c.kZ.firstLoadData=null;c.kZ.firstLoadEv=false;c._onFirstLoad=null};if(typeof(window.addEventListener)==&quot;function&quot;){this.edWin.addEventListener(&quot;load&quot;,this._onFirstLoad,false)}else{this.edWin.attachEvent(&quot;onload&quot;,this._onFirstLoad)}}}};this.gy=function(m){window.dhx4.ajax.get(m,function(n){if(n.ai.responseText!=null){c.setContent(n.ai.responseText)}})};window.dhx4._eventable(this);this.attachEvent(&quot;onFocusChanged&quot;,function(m){if(typeof(this._doOnFocusChanged)==&quot;function&quot;){this._doOnFocusChanged(m)}else{if(typeof(this._doOnFocusChanged)==&quot;string&quot;&amp;&amp;typeof(window[this._doOnFocusChanged])==&quot;function&quot;){window[this._doOnFocusChanged](m)}}});if(typeof(window.addEventListener)==&quot;function&quot;){window.addEventListener(&quot;resize&quot;,this._doOnResize,false);this.edDoc.addEventListener(&quot;click&quot;,this._doOnClick,false);this.edDoc.addEventListener(&quot;keyup&quot;,this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.addEventListener(&quot;mousedown&quot;,this._doOnMouseDown,false)}}else{window.attachEvent(&quot;onresize&quot;,this._doOnResize);this.edDoc.attachEvent(&quot;onclick&quot;,this._doOnClick);this.edDoc.attachEvent(&quot;onkeyup&quot;,this._doOnKeyUp)}this.unload=function(){if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;resize&quot;,this._doOnResize,false);this.edDoc.removeEventListener(&quot;click&quot;,this._doOnClick,false);this.edDoc.removeEventListener(&quot;keyup&quot;,this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.removeEventListener(&quot;mousedown&quot;,this._doOnMouseDown,false)}for(var m=0;m&lt;c.kZ.evs.length;m++){a.contentWindow.removeEventListener(c.kZ.evs[m],c._ev,false)}}else{window.detachEvent(&quot;onresize&quot;,this._doOnResize,false);this.edDoc.detachEvent(&quot;onclick&quot;,this._doOnClick);this.edDoc.detachEvent(&quot;onkeyup&quot;,this._doOnKeyUp);for(var m=0;m&lt;c.kZ.evs.length;m++){a.contentWindow.document.body.detachEvent(&quot;on&quot;+c.kZ.evs[m],c._ev)}}this._doOnAccess=null;this._doOnFocusChanged=null;if(typeof(window.addEventListener)==&quot;function&quot;){this.editor.onload=null}else{this.editor.onreadystatechange=null}this.editor.parentNode.removeChild(this.editor);this.editor=null;this.edDoc=null;this.edWin=null;this.cell._unload();this.cell=null;this.tb=null;window.dhx4._eventable(this,&quot;clear&quot;);this.cBlock.parentNode.removeChild(this.cBlock);this.cBlock=null;this.base.className=String(this.base.className).replace(new RegExp(&quot;\\s{0,}dhxeditor_&quot;+this.kZ.skin),&quot;&quot;);while(this.base.childNodes.length&gt;0){this.base.removeChild(this.base.childNodes[0])}this.base=null;this._doOnClick=null;this._doOnKeyUp=null;this._doOnMouseDown=null;this._ev=null;this._focus=null;this._prepareContent=null;this._doOnResize=null;this.setIconsPath=null;this.init=null;this.setSizes=null;this._runCommand=null;this.applyBold=null;this.applyItalic=null;this.applyUnderscore=null;this.clearFormatting=null;this._showInfo=null;this._getSelectionBounds=null;this.getContent=null;this.setContent=null;this.gy=null;this.setReadonly=null;this.isReadonly=null;this.unload=null;c=a=null};if(this.kZ.toolbar==true&amp;&amp;typeof(this.attachToolbar)==&quot;function&quot;&amp;&amp;typeof(window.dhtmlXToolbarObject)==&quot;function&quot;){this.attachToolbar(this.kZ.iconsPath)}this.setIconsPath=function(m){this.kZ.iconsPath=m};if(this.kZ.content.length&gt;0){this.setContent(this.kZ.content);this.kZ.content=&quot;&quot;}else{if(this.kZ.contentHTML.length&gt;0){this.gy(this.kZ.contentHTML);this.kZ.contentHTML=&quot;&quot;}}return this}dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight)};dhtmlXEditor.prototype.setReadonly=function(a){this.kZ.roMode=(a===true);this._prepareContent(true,this.kZ.roMode);this.cBlock.style.display=(this.kZ.roMode?&quot;&quot;:&quot;none&quot;)};dhtmlXEditor.prototype.isReadonly=function(a){return(this.kZ.roMode||false)};dhtmlXEditor.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp(&quot;dhxeditor_&quot;+this.kZ.skin),&quot;dhxeditor_&quot;+a);this.kZ.skin=this.cell.kZ.skin=a;if(this.tb){this.cell.detachToolbar(a);this.tb=null;this.attachToolbar()}this.setSizes()};window.dhtmlXEditorCell=function(g,a){dhtmlXCellObject.apply(this,[g,&quot;_editor&quot;]);var c=this;this.editor=a;this.kZ.skin=this.editor.kZ.skin;this.attachEvent(&quot;_onCellUnload&quot;,function(){this._stbUnload();this.editor=null;c=null});this._stbInit();return this};dhtmlXEditorCell.prototype=new dhtmlXCellObject();dhtmlXEditorCell.prototype._stbInit=function(){var m=this;var l=document.createElement(&quot;DIV&quot;);l.className=&quot;dhx_cell_stb&quot;;this.cell.insertBefore(l,this.cell.childNodes[this.kZ.idx.vI]);l.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var h={bold:&quot;applyBold&quot;,italic:&quot;applyItalic&quot;,underline:&quot;applyUnderscore&quot;,clearformat:&quot;clearFormatting&quot;};for(var g in h){var c=document.createElement(&quot;A&quot;);c.href=&quot;javascript:void(0);&quot;;c.tabIndex= -1;l.appendChild(c);c.onmousedown=c.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var n=document.createElement(&quot;DIV&quot;);n.className=&quot;dhx_cell_stb_button btn_&quot;+g;n._actv=g.charAt(0);n._cmd=h[g];c.appendChild(n);n.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};n.onmousedown=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}m.editor[this._cmd]();m.editor.callEvent(&quot;onToolbarClick&quot;,[this._actv])};n=c=null}l=null;this._stbUnload=function(){var a=this.cell.childNodes[this.kZ.idx.stb];a.onselectstart=null;while(a.childNodes.length&gt;0){a.lastChild.onmousedown=a.lastChild.onclick=null;a.lastChild.firstChild.onmousedown=a.lastChild.firstChild.onclick=null;a.lastChild.firstChild._actv=a.lastChild.firstChild._cmd=null;a.lastChild.removeChild(a.lastChild.firstChild);a.removeChild(a.lastChild)}a.parentNode.removeChild(a);a=m=null;this.kZ.idx_data.stb=this.kZ.ofs_nodes.t._getStbHeight=null;delete this.kZ.ofs_nodes.t._getStbHeight;delete this.kZ.idx_data.stb;this._updateIdx()};this.kZ.ofs_nodes.t._getStbHeight=&quot;func&quot;;this.kZ.idx_data.stb=&quot;dhx_cell_stb&quot;;this._updateIdx()};dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.kZ.idx.stb].style.display=&quot;none&quot;};dhtmlXEditorCell.prototype._getStbHeight=function(){return this.cell.childNodes[this.kZ.idx.stb].offsetHeight};dhtmlXEditor.prototype.attachToolbar=function(c){if(this.tb!=null){return}if(c!=null){this.kZ.iconsPath=c}this.cell._stbHide();this.tb=this.cell.attachToolbar({icons_path:this.kZ.iconsPath+&quot;/dhxeditor_&quot;+String(this.kZ.skin).replace(/^dhx_/,&quot;&quot;)+&quot;/&quot;,skin:this.kZ.skin});this.setSizes();this._availFonts=new Array(&quot;Arial&quot;,&quot;Arial Narrow&quot;,&quot;Comic Sans MS&quot;,&quot;Courier&quot;,&quot;Georgia&quot;,&quot;Impact&quot;,&quot;Tahoma&quot;,&quot;Times New Roman&quot;,&quot;Verdana&quot;);this._initFont=this._availFonts[0];this._xmlFonts=&quot;&quot;;for(var m=0;m&lt;this._availFonts.length;m++){var h=String(this._availFonts[m]).replace(/\s/g,&quot;_&quot;);this._xmlFonts+='&lt;item type=&quot;button&quot; id=&quot;applyFontFamily:'+h+'&quot;&gt;&lt;itemText&gt;&lt;![CDATA[&lt;img src=&quot;'+this.tb.imagePath+&quot;font_&quot;+String(h).toLowerCase()+'.gif&quot; border=&quot;0&quot; style=&quot;/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;&quot;&gt;]]&gt;&lt;/itemText&gt;&lt;/item&gt;'}this._availSizes={&quot;1&quot;:&quot;8pt&quot;,&quot;2&quot;:&quot;10pt&quot;,&quot;3&quot;:&quot;12pt&quot;,&quot;4&quot;:&quot;14pt&quot;,&quot;5&quot;:&quot;18pt&quot;,&quot;6&quot;:&quot;24pt&quot;,&quot;7&quot;:&quot;36pt&quot;};this._xmlSizes=&quot;&quot;;for(var g in this._availSizes){this._xmlSizes+='&lt;item type=&quot;button&quot; id=&quot;applyFontSize:'+g+&quot;:&quot;+this._availSizes[g]+'&quot; text=&quot;'+this._availSizes[g]+'&quot;/&gt;'}this.tbXML='&lt;toolbar&gt;&lt;item id=&quot;applyH1&quot; type=&quot;buttonTwoState&quot; img=&quot;h1.gif&quot; imgdis=&quot;h4_dis.gif&quot; title=&quot;H1&quot;/&gt;&lt;item id=&quot;applyH2&quot; type=&quot;buttonTwoState&quot; img=&quot;h2.gif&quot; imgdis=&quot;h4_dis.gif&quot; title=&quot;H2&quot;/&gt;&lt;item id=&quot;applyH3&quot; type=&quot;buttonTwoState&quot; img=&quot;h3.gif&quot; imgdis=&quot;h4_dis.gif&quot; title=&quot;H3&quot;/&gt;&lt;item id=&quot;applyH4&quot; type=&quot;buttonTwoState&quot; img=&quot;h4.gif&quot; imgdis=&quot;h4_dis.gif&quot; title=&quot;H4&quot;/&gt;&lt;item id=&quot;separ01&quot; type=&quot;separator&quot;/&gt;&lt;item id=&quot;applyBold&quot; type=&quot;buttonTwoState&quot; img=&quot;bold.gif&quot; imgdis=&quot;bold_dis.gif&quot; title=&quot;Bold Text&quot;/&gt;&lt;item id=&quot;applyItalic&quot; type=&quot;buttonTwoState&quot; img=&quot;italic.gif&quot; imgdis=&quot;italic_dis.gif&quot; title=&quot;Italic Text&quot;/&gt;&lt;item id=&quot;applyUnderscore&quot; type=&quot;buttonTwoState&quot; img=&quot;underline.gif&quot; imgdis=&quot;underline_dis.gif&quot; title=&quot;Underscore Text&quot;/&gt;&lt;item id=&quot;applyStrikethrough&quot; type=&quot;buttonTwoState&quot; img=&quot;strike.gif&quot; imgdis=&quot;strike_dis.gif&quot; title=&quot;Strikethrough Text&quot;/&gt;&lt;item id=&quot;separ02&quot; type=&quot;separator&quot;/&gt;&lt;item id=&quot;alignLeft&quot; type=&quot;buttonTwoState&quot; img=&quot;align_left.gif&quot; imgdis=&quot;align_left_dis.gif&quot; title=&quot;Left Alignment&quot;/&gt;&lt;item id=&quot;alignCenter&quot; type=&quot;buttonTwoState&quot; img=&quot;align_center.gif&quot; imgdis=&quot;align_center_dis.gif&quot; title=&quot;Center Alignment&quot;/&gt;&lt;item id=&quot;alignRight&quot; type=&quot;buttonTwoState&quot; img=&quot;align_right.gif&quot; imgdis=&quot;align_right_dis.gif&quot; title=&quot;Right Alignment&quot;/&gt;&lt;item id=&quot;alignJustify&quot; type=&quot;buttonTwoState&quot; img=&quot;align_justify.gif&quot; title=&quot;Justified Alignment&quot;/&gt;&lt;item id=&quot;separ03&quot; type=&quot;separator&quot;/&gt;&lt;item id=&quot;applySub&quot; type=&quot;buttonTwoState&quot; img=&quot;script_sub.gif&quot; imgdis=&quot;script_sub.gif&quot; title=&quot;Subscript&quot;/&gt;&lt;item id=&quot;applySuper&quot; type=&quot;buttonTwoState&quot; img=&quot;script_super.gif&quot; imgdis=&quot;script_super_dis.gif&quot; title=&quot;Superscript&quot;/&gt;&lt;item id=&quot;separ04&quot; type=&quot;separator&quot;/&gt;&lt;item id=&quot;createNumList&quot; type=&quot;button&quot; img=&quot;list_number.gif&quot; imgdis=&quot;list_number_dis.gif&quot; title=&quot;Number List&quot;/&gt;&lt;item id=&quot;createBulList&quot; type=&quot;button&quot; img=&quot;list_bullet.gif&quot; imgdis=&quot;list_bullet_dis.gif&quot; title=&quot;Bullet List&quot;/&gt;&lt;item id=&quot;separ05&quot; type=&quot;separator&quot;/&gt;&lt;item id=&quot;increaseIndent&quot; type=&quot;button&quot; img=&quot;indent_inc.gif&quot; imgdis=&quot;indent_inc_dis.gif&quot; title=&quot;Increase Indent&quot;/&gt;&lt;item id=&quot;decreaseIndent&quot; type=&quot;button&quot; img=&quot;indent_dec.gif&quot; imgdis=&quot;indent_dec_dis.gif&quot; title=&quot;Decrease Indent&quot;/&gt;&lt;item id=&quot;separ06&quot; type=&quot;separator&quot;/&gt;&lt;item id=&quot;clearFormatting&quot; type=&quot;button&quot; img=&quot;clear.gif&quot; title=&quot;Clear Formatting&quot;/&gt;&lt;/toolbar&gt;';this.tb.loadStruct(this.tbXML);this._checkAlign=function(a){this.tb.setItemState(&quot;alignCenter&quot;,false);this.tb.setItemState(&quot;alignRight&quot;,false);this.tb.setItemState(&quot;alignJustify&quot;,false);this.tb.setItemState(&quot;alignLeft&quot;,false);if(a){this.tb.setItemState(a,true)}};this._checkH=function(a){this.tb.setItemState(&quot;applyH1&quot;,false);this.tb.setItemState(&quot;applyH2&quot;,false);this.tb.setItemState(&quot;applyH3&quot;,false);this.tb.setItemState(&quot;applyH4&quot;,false);if(a){this.tb.setItemState(a,true)}};this._doOnFocusChanged=function(o){if(!o.h1&amp;&amp; !o.h2&amp;&amp; !o.h3&amp;&amp; !o.h4){var a=(String(o.fontWeight).search(/bold/i)!= -1)||(Number(o.fontWeight)&gt;=700);this.tb.setItemState(&quot;applyBold&quot;,a)}else{this.tb.setItemState(&quot;applyBold&quot;,false)}var n=&quot;alignLeft&quot;;if(String(o.textAlign).search(/center/)!= -1){n=&quot;alignCenter&quot;}if(String(o.textAlign).search(/right/)!= -1){n=&quot;alignRight&quot;}if(String(o.textAlign).search(/justify/)!= -1){n=&quot;alignJustify&quot;}this.tb.setItemState(n,true);this._checkAlign(n);this.tb.setItemState(&quot;applyH1&quot;,o.h1);this.tb.setItemState(&quot;applyH2&quot;,o.h2);this.tb.setItemState(&quot;applyH3&quot;,o.h3);this.tb.setItemState(&quot;applyH4&quot;,o.h4);if(window._KHTMLrv){o.sub=(o.vAlign==&quot;sub&quot;);o.sup=(o.vAlign==&quot;super&quot;)}this.tb.setItemState(&quot;applyItalic&quot;,(o.fontStyle==&quot;italic&quot;));this.tb.setItemState(&quot;applyStrikethrough&quot;,o.del);this.tb.setItemState(&quot;applySub&quot;,o.sub);this.tb.setItemState(&quot;applySuper&quot;,o.sup);this.tb.setItemState(&quot;applyUnderscore&quot;,o.u)};this._doOnToolbarClick=function(n){var a=String(n).split(&quot;:&quot;);if(this[a[0]]!=null){if(typeof(this[a[0]])==&quot;function&quot;){this[a[0]](a[1]);this.callEvent(&quot;onToolbarClick&quot;,[n])}}};this._doOnStateChange=function(n,a){this[n]();switch(n){case &quot;alignLeft&quot;:case &quot;alignCenter&quot;:case &quot;alignRight&quot;:case &quot;alignJustify&quot;:this._checkAlign(n);break;case &quot;applyH1&quot;:case &quot;applyH2&quot;:case &quot;applyH3&quot;:case &quot;applyH4&quot;:this._checkH(n);break}this.callEvent(&quot;onToolbarClick&quot;,[n])};this._doOnBeforeStateChange=function(n,a){if((n==&quot;alignLeft&quot;||n==&quot;alignCenter&quot;||n==&quot;alignRight&quot;||n==&quot;alignJustify&quot;)&amp;&amp;a==true){return false}return true};var l=this;this.tb.attachEvent(&quot;onClick&quot;,function(a){l._doOnToolbarClick(a)});this.tb.attachEvent(&quot;onStateChange&quot;,function(n,a){l._doOnStateChange(n,a)});this.tb.attachEvent(&quot;onBeforeStateChange&quot;,function(n,a){return l._doOnBeforeStateChange(n,a)});this.applyBold=function(){this._runCommand(&quot;Bold&quot;)};this.applyItalic=function(){this._runCommand(&quot;Italic&quot;)};this.applyUnderscore=function(){this._runCommand(&quot;Underline&quot;)};this.applyStrikethrough=function(){this._runCommand(&quot;StrikeThrough&quot;)};this.alignLeft=function(){this._runCommand(&quot;JustifyLeft&quot;)};this.alignRight=function(){this._runCommand(&quot;JustifyRight&quot;)};this.alignCenter=function(){this._runCommand(&quot;JustifyCenter&quot;)};this.alignJustify=function(){this._runCommand(&quot;JustifyFull&quot;)};this.applySub=function(){this._runCommand(&quot;Subscript&quot;)};this.applySuper=function(){this._runCommand(&quot;Superscript&quot;)};this.applyH1=function(){this._runCommand(&quot;FormatBlock&quot;,&quot;<H1>&quot;)};this.applyH2=function(){this._runCommand(&quot;FormatBlock&quot;,&quot;</H1><H2>&quot;)};this.applyH3=function(){this._runCommand(&quot;FormatBlock&quot;,&quot;</H2><H3>&quot;)};this.applyH4=function(){this._runCommand(&quot;FormatBlock&quot;,&quot;</H3><H4>&quot;)};this.createNumList=function(){this._runCommand(&quot;InsertOrderedList&quot;)};this.createBulList=function(){this._runCommand(&quot;InsertUnorderedList&quot;)};this.increaseIndent=function(){this._runCommand(&quot;Indent&quot;)};this.decreaseIndent=function(){this._runCommand(&quot;Outdent&quot;)};this.clearFormatting=function(){this._runCommand(&quot;RemoveFormat&quot;);this.tb.setItemState(&quot;applyBold&quot;,false);this.tb.setItemState(&quot;applyItalic&quot;,false);this.tb.setItemState(&quot;applyStrikethrough&quot;,false);this.tb.setItemState(&quot;applySub&quot;,false);this.tb.setItemState(&quot;applySuper&quot;,false);this.tb.setItemState(&quot;applyUnderscore&quot;,false)}};dhtmlx.Group={ahY:function(){dhtmlx.assert(this.data,&quot;DataStore required for grouping&quot;);this.data.attachEvent(&quot;onStoreLoad&quot;,dhtmlx.bind(function(){if(this._settings.group){this.group(this._settings.group,false)}},this));this.attachEvent(&quot;onBeforeRender&quot;,dhtmlx.bind(function(a){if(this._settings.sort){a.block();a.sort(this._settings.sort);a.unblock()}},this));this.attachEvent(&quot;onBeforeSort&quot;,dhtmlx.bind(function(){this._settings.sort=null},this))},_init_group_data_event:function(c,a){c.attachEvent(&quot;onClearAll&quot;,dhtmlx.bind(function(){this.ungroup(false);this.block();this.clearAll();this.unblock()},a))},sum:function(c,a){c=dhtmlx.Template.setter(c);a=a||this.data;var g=0;a.Kw(function(h){g+=c(h)*1});return g},min:function(g,c){g=dhtmlx.Template.setter(g);c=c||this.data;var a=Infinity;c.Kw(function(h){if(g(h)*1&lt;a){a=g(h)*1}});return a*1},max:function(g,c){g=dhtmlx.Template.setter(g);c=c||this.data;var a= -Infinity;c.Kw(function(h){if(g(h)*1&gt;a){a=g(h)*1}});return a},_split_data_by:function(l){var m=function(r,q){r=dhtmlx.Template.setter(r);return r(q[0])};var h=dhtmlx.Template.setter(l.by);if(!l.map[h]){l.map[h]=[h,m]}var a={};var o=[];this.data.Kw(function(q){var r=h(q);if(!a[r]){o.push({id:r});a[r]=dhtmlx.toArray()}a[r].push(q)});for(var n in l.map){var c=(l.map[n][1]||m);if(typeof c!=&quot;function&quot;){c=this[c]}for(var g=0;g&lt;o.length;g++){o[g][n]=c.call(this,l.map[n][0],a[o[g].id])}}this._not_grouped_data=this.data;this.data=new dhtmlx.DataStore();this.data.provideApi(this,true);this._init_group_data_event(this.data,this);this.parse(o,&quot;json&quot;)},group:function(a,c){this.ungroup(false);this._split_data_by(a);if(c!==false){this.ht()}},ungroup:function(a){if(this._not_grouped_data){this.data=this._not_grouped_data;this.data.provideApi(this,true)}if(a!==false){this.ht()}},group_setter:function(a){dhtmlx.assert(typeof a==&quot;object&quot;,&quot;Incorrect group value&quot;);dhtmlx.assert(a.by,&quot;group.by is mandatory&quot;);dhtmlx.assert(a.map,&quot;group.map is mandatory&quot;);return a},sort_setter:function(a){if(typeof a!=&quot;object&quot;){a={by:a}}this._mergeSettings(a,{as:&quot;string&quot;,dir:&quot;asc&quot;});return a}};dhtmlx.Date={Locale:{month_full:[&quot;January&quot;,&quot;February&quot;,&quot;March&quot;,&quot;April&quot;,&quot;May&quot;,&quot;June&quot;,&quot;July&quot;,&quot;August&quot;,&quot;September&quot;,&quot;October&quot;,&quot;November&quot;,&quot;December&quot;],month_short:[&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;,&quot;Jun&quot;,&quot;Jul&quot;,&quot;Aug&quot;,&quot;Sep&quot;,&quot;Oct&quot;,&quot;Nov&quot;,&quot;Dec&quot;],day_full:[&quot;Sunday&quot;,&quot;Monday&quot;,&quot;Tuesday&quot;,&quot;Wednesday&quot;,&quot;Thursday&quot;,&quot;Friday&quot;,&quot;Saturday&quot;],day_short:[&quot;Sun&quot;,&quot;Mon&quot;,&quot;Tue&quot;,&quot;Wed&quot;,&quot;Thu&quot;,&quot;Fri&quot;,&quot;Sat&quot;]},date_part:function(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},time_part:function(a){return(a.valueOf()/1000-a.getTimezoneOffset()*60)%86400},week_start:function(c){var a=c.getDay();if(this.config.start_on_monday){if(a===0){a=6}else{a--}}return this.date_part(this.add(c,-1*a,&quot;day&quot;))},month_start:function(a){a.setDate(1);return this.date_part(a)},year_start:function(a){a.setMonth(0);return this.month_start(a)},day_start:function(a){return this.date_part(a)},add:function(c,g,h){var a=new Date(c.valueOf());switch(h){case &quot;day&quot;:a.setDate(a.getDate()+g);break;case &quot;week&quot;:a.setDate(a.getDate()+7*g);break;case &quot;month&quot;:a.setMonth(a.getMonth()+g);break;case &quot;year&quot;:a.setYear(a.getFullYear()+g);break;case &quot;hour&quot;:a.setHours(a.getHours()+g);break;case &quot;minute&quot;:a.setMinutes(a.getMinutes()+g);break;default:return dhtmlx.Date[&quot;add_&quot;+h](c,g,h)}return a},to_fixed:function(a){if(a&lt;10){return &quot;0&quot;+a}return a},copy:function(a){return new Date(a.valueOf())},date_to_str:function(c,a){c=c.replace(/%[a-zA-Z]/g,function(g){switch(g){case &quot;%d&quot;:return '&quot;+dhtmlx.Date.to_fixed(date.getDate())+&quot;';case &quot;%m&quot;:return '&quot;+dhtmlx.Date.to_fixed((date.getMonth()+1))+&quot;';case &quot;%j&quot;:return '&quot;+date.getDate()+&quot;';case &quot;%n&quot;:return '&quot;+(date.getMonth()+1)+&quot;';case &quot;%y&quot;:return '&quot;+dhtmlx.Date.to_fixed(date.getFullYear()%100)+&quot;';case &quot;%Y&quot;:return '&quot;+date.getFullYear()+&quot;';case &quot;%D&quot;:return '&quot;+dhtmlx.Date.Locale.day_short[date.getDay()]+&quot;';case &quot;%l&quot;:return '&quot;+dhtmlx.Date.Locale.day_full[date.getDay()]+&quot;';case &quot;%M&quot;:return '&quot;+dhtmlx.Date.Locale.month_short[date.getMonth()]+&quot;';case &quot;%F&quot;:return '&quot;+dhtmlx.Date.Locale.month_full[date.getMonth()]+&quot;';case &quot;%h&quot;:return '&quot;+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+&quot;';case &quot;%g&quot;:return '&quot;+((date.getHours()+11)%12+1)+&quot;';case &quot;%G&quot;:return '&quot;+date.getHours()+&quot;';case &quot;%H&quot;:return '&quot;+dhtmlx.Date.to_fixed(date.getHours())+&quot;';case &quot;%i&quot;:return '&quot;+dhtmlx.Date.to_fixed(date.getMinutes())+&quot;';case &quot;%a&quot;:return '&quot;+(date.getHours()&gt;11?&quot;pm&quot;:&quot;am&quot;)+&quot;';case &quot;%A&quot;:return '&quot;+(date.getHours()&gt;11?&quot;PM&quot;:&quot;AM&quot;)+&quot;';case &quot;%s&quot;:return '&quot;+dhtmlx.Date.to_fixed(date.getSeconds())+&quot;';case &quot;%W&quot;:return '&quot;+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+&quot;';default:return g}});if(a){c=c.replace(/date\.get/g,&quot;date.getUTC&quot;)}return new Function(&quot;date&quot;,'return &quot;'+c+'&quot;;')},str_to_date:function(l,g){var m=&quot;var temp=date.split(/[^0-9a-zA-Z]+/g);&quot;;var a=l.match(/%[a-zA-Z]/g);for(var c=0;c&lt;a.length;c++){switch(a[c]){case &quot;%j&quot;:case &quot;%d&quot;:m+=&quot;set[2]=temp[&quot;+c+&quot;]||1;&quot;;break;case &quot;%n&quot;:case &quot;%m&quot;:m+=&quot;set[1]=(temp[&quot;+c+&quot;]||1)-1;&quot;;break;case &quot;%y&quot;:m+=&quot;set[0]=temp[&quot;+c+&quot;]*1+(temp[&quot;+c+&quot;]&gt;50?1900:2000);&quot;;break;case &quot;%g&quot;:case &quot;%G&quot;:case &quot;%h&quot;:case &quot;%H&quot;:m+=&quot;set[3]=temp[&quot;+c+&quot;]||0;&quot;;break;case &quot;%i&quot;:m+=&quot;set[4]=temp[&quot;+c+&quot;]||0;&quot;;break;case &quot;%Y&quot;:m+=&quot;set[0]=temp[&quot;+c+&quot;]||0;&quot;;break;case &quot;%a&quot;:case &quot;%A&quot;:m+=&quot;set[3]=set[3]%12+((temp[&quot;+c+&quot;]||).toLowerCase()=='am'?0:12);&quot;;break;case &quot;%s&quot;:m+=&quot;set[5]=temp[&quot;+c+&quot;]||0;&quot;;break}}var h=&quot;set[0],set[1],set[2],set[3],set[4],set[5]&quot;;if(g){h=&quot; Date.UTC(&quot;+h+&quot;)&quot;}return new Function(&quot;date&quot;,&quot;var set=[0,0,1,0,0,0]; &quot;+m+&quot; return new Date(&quot;+h+&quot;);&quot;)},getISOWeek:function(g){if(!g){return false}var c=g.getDay();if(c===0){c=7}var h=new Date(g.valueOf());h.setDate(g.getDate()+(4-c));var a=h.getFullYear();var m=Math.floor((h.getTime()-new Date(a,0,1).getTime())/86400000);var l=1+Math.floor(m/7);return l},getUTCISOWeek:function(a){return this.getISOWeek(a)}};dhtmlx.math={};dhtmlx.math._toHex=[&quot;0&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;E&quot;,&quot;F&quot;];dhtmlx.math.toHex=function(c,a){c=parseInt(c,10);str=&quot;&quot;;while(c&gt;0){str=this._toHex[c%16]+str;c=Math.floor(c/16)}while(str.length&lt;a){str=&quot;0&quot;+str}return str};dhtmlx.math.hexToDec=function(a){return parseInt(a,16)};dhtmlx.math.toRgb=function(c){var l,h,a,m;if(typeof(c)!=&quot;string&quot;){l=c[0];h=c[1];a=c[2]}else{if(c.indexOf(&quot;rgb&quot;)!= -1){m=c.substr(c.indexOf(&quot;(&quot;)+1,c.lastIndexOf(&quot;)&quot;)-c.indexOf(&quot;(&quot;)-1).split(&quot;,&quot;);l=m[0];h=m[1];a=m[2]}else{if(c.substr(0,1)==&quot;#&quot;){c=c.substr(1)}l=this.hexToDec(c.substr(0,2));h=this.hexToDec(c.substr(2,2));a=this.hexToDec(c.substr(4,2))}}l=(parseInt(l,10)||0);h=(parseInt(h,10)||0);a=(parseInt(a,10)||0);if(l&lt;0||l&gt;255){l=0}if(h&lt;0||h&gt;255){h=0}if(a&lt;0||a&gt;255){a=0}return[l,h,a]};dhtmlx.math.hsvToRgb=function(n,A,x){var m,u,l,c,y,a,o,w;m=Math.floor((n/60))%6;u=n/60-m;l=x*(1-A);c=x*(1-u*A);y=x*(1-(1-u)*A);a=0;o=0;w=0;switch(m){case 0:a=x;o=y;w=l;break;case 1:a=c;o=x;w=l;break;case 2:a=l;o=x;w=y;break;case 3:a=l;o=c;w=x;break;case 4:a=y;o=l;w=x;break;case 5:a=x;o=l;w=c;break}a=Math.floor(a*255);o=Math.floor(o*255);w=Math.floor(w*255);return[a,o,w]};dhtmlx.math.rgbToHsv=function(c,o,q){var m,l,u,a,w,y,n,x;m=c/255;l=o/255;u=q/255;var a=Math.min(m,l,u);var w=Math.max(m,l,u);n=0;y=w==0?0:(1-a/w);x=w;if(w==a){n=0}else{if(w==m&amp;&amp;l&gt;=u){n=60*(l-u)/(w-a)+0}else{if(w==m&amp;&amp;l&lt;u){n=60*(l-u)/(w-a)+360}else{if(w==l){n=60*(u-m)/(w-a)+120}else{if(w==u){n=60*(m-l)/(w-a)+240}}}}}return[n,y,x]};if(!dhtmlx.presets){dhtmlx.presets={}}dhtmlx.presets.chart={simple:{item:{borderColor:&quot;#ffffff&quot;,color:&quot;#2b7100&quot;,shadow:false,borderWidth:2},line:{color:&quot;#8ecf03&quot;,width:2}},plot:{color:&quot;#1293f8&quot;,item:{borderColor:&quot;#636363&quot;,borderWidth:1,color:&quot;#ffffff&quot;,type:&quot;r&quot;,shadow:false},line:{color:&quot;#1293f8&quot;,width:2}},diamond:{color:&quot;#b64040&quot;,item:{borderColor:&quot;#b64040&quot;,color:&quot;#b64040&quot;,type:&quot;d&quot;,radius:3,shadow:true},line:{color:&quot;#ff9000&quot;,width:2}},point:{color:&quot;#fe5916&quot;,disableLines:true,fill:false,disableItems:false,item:{color:&quot;#feb916&quot;,borderColor:&quot;#fe5916&quot;,radius:2,borderWidth:1,type:&quot;r&quot;},alpha:1},line:{line:{color:&quot;#3399ff&quot;,width:2},item:{color:&quot;#ffffff&quot;,borderColor:&quot;#3399ff&quot;,radius:2,borderWidth:2,type:&quot;d&quot;},fill:false,disableItems:false,disableLines:false,alpha:1},area:{fill:&quot;#3399ff&quot;,line:{color:&quot;#3399ff&quot;,width:1},disableItems:true,alpha:0.2,disableLines:false},round:{item:{radius:3,borderColor:&quot;#3f83ff&quot;,borderWidth:1,color:&quot;#3f83ff&quot;,type:&quot;r&quot;,shadow:false,alpha:0.6}},square:{item:{radius:3,borderColor:&quot;#447900&quot;,borderWidth:2,color:&quot;#69ba00&quot;,type:&quot;s&quot;,shadow:false,alpha:1}},column:{color:&quot;RAINBOW&quot;,gradient:false,width:45,radius:0,alpha:1,border:true},stick:{width:5,gradient:false,color:&quot;#67b5c9&quot;,radius:2,alpha:1,border:false},alpha:{color:&quot;#b9a8f9&quot;,width:70,gradient:&quot;falling&quot;,radius:0,alpha:0.5,border:true}};dhtmlx.ui.Map=function(a){this.name=&quot;Map&quot;;this._id=&quot;map_&quot;+dhtmlx.uid();this._key=a;this._map=[]};dhtmlx.ui.Map.prototype={addRect:function(g,c,a){this._createMapArea(g,&quot;RECT&quot;,c,a)},addPoly:function(g,c,a){this._createMapArea(g,&quot;POLY&quot;,c,a)},_createMapArea:function(l,c,h,g){var a=&quot;&quot;;if(arguments.length==4){a=&quot;userdata='&quot;+g+&quot;'&quot;}this._map.push(&quot;&lt;area &quot;+this._key+&quot;='&quot;+l+&quot;' shape='&quot;+c+&quot;' coords='&quot;+h.join()+&quot;' &quot;+a+&quot;&gt;&lt;/area&gt;&quot;)},addSector:function(a,r,q,n,l,g,h,m){var o=[];o.push(n);o.push(Math.floor(l*h));for(var c=r;c&lt;q;c+=Math.PI/18){o.push(Math.floor(n+g*Math.cos(c)));o.push(Math.floor((l+g*Math.sin(c))*h))}o.push(Math.floor(n+g*Math.cos(q)));o.push(Math.floor((l+g*Math.sin(q))*h));o.push(n);o.push(Math.floor(l*h));return this.addPoly(a,o,m)},ht:function(a){var g=dhtmlx.html.create(&quot;DIV&quot;);g.style.cssText=&quot;position:absolute; width:100%; height:100%; top:0px; left:0px;&quot;;a.appendChild(g);var c=dhtmlx._isIE?&quot;&quot;:&quot;src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='&quot;;g.innerHTML=&quot;&lt;map id='&quot;+this._id+&quot;' name='&quot;+this._id+&quot;'&gt;&quot;+this._map.join(&quot;\n&quot;)+&quot;&lt;/map&gt;&lt;img &quot;+c+&quot; class='dhx_map_img' usemap='#&quot;+this._id+&quot;'&gt;&quot;;a._htmlmap=g;this._map=[]}};dhtmlx.chart={};dhtmlx.chart.scatter={pvt_render_scatter:function(r,m,q,o,n,a){if(!this._settings.xValue){return dhtmlx.log(&quot;warning&quot;,&quot;Undefined propery: xValue&quot;)}var g=this._getLimits();var l=this._getLimits(&quot;h&quot;,&quot;xValue&quot;);if(!n){if(!this.canvases.x){this.canvases.x=new dhtmlx.ui.Canvas(this._obj,&quot;axis_x&quot;)}if(!this.canvases.y){this.canvases.y=new dhtmlx.ui.Canvas(this._obj,&quot;axis_y&quot;)}this._drawYAxis(this.canvases.y.getCanvas(),m,q,o,g.min,g.max);this._drawHXAxis(this.canvases.x.getCanvas(),m,q,o,l.min,l.max)}g={min:this._settings.yAxis.start,max:this._settings.yAxis.end};l={min:this._settings.xAxis.start,max:this._settings.xAxis.end};var c=this._getScatterParams(r,m,q,o,l,g);this._mapStart=q;for(var h=0;h&lt;m.length;h++){this._drawScatterItem(r,a,q,o,c,l,g,m[h],n)}},_getScatterParams:function(a,h,g,c,n,m){var l={};l.totalHeight=c.y-g.y;l.totalWidth=c.x-g.x;this._calcScatterUnit(l,n.min,n.max,l.totalWidth,&quot;X&quot;);this._calcScatterUnit(l,m.min,m.max,l.totalHeight,&quot;Y&quot;);return l},_drawScatterItem:function(s,a,q,o,g,l,h,m,n){var c=this._calculateScatterItemPosition(g,o,q,l,m,&quot;X&quot;);var r=this._calculateScatterItemPosition(g,q,o,h,m,&quot;Y&quot;);this._drawItem(s,c,r,m,this._settings.label.call(this,m),n,a)},_calculateScatterItemPosition:function(g,o,n,a,l,c){var r=this._settings[c==&quot;X&quot;?&quot;xValue&quot;:&quot;value&quot;].call(this,l);var h=g[&quot;valueFactor&quot;+c];var s=(parseFloat(r||0)-a.min)*h;var q=g[&quot;unit&quot;+c];var m=n[c.toLowerCase()]-(c==&quot;X&quot;?(-1):1)*Math.floor(q*s);if(s&lt;0){m=n[c.toLowerCase()]}if(r&gt;a.max){m=o[c.toLowerCase()]}if(r&lt;a.min){m=n[c.toLowerCase()]}return m},_calcScatterUnit:function(m,g,a,c,h){var l=this._getRelativeValue(g,a);h=(h||&quot;&quot;);m[&quot;relValue&quot;+h]=l[0];m[&quot;valueFactor&quot;+h]=l[1];m[&quot;unit&quot;+h]=(m[&quot;relValue&quot;+h]?c/m[&quot;relValue&quot;+h]:10)}};dhtmlx.chart.radar={pvt_render_radar:function(c,h,a,m,g,l){this._renderRadarChart(c,h,a,m,g,l)},_renderRadarChart:function(v,l,s,r,q,a){if(!l.length){return}var n=this._getPieParameters(s,r);var o=(this._settings.radius?this._settings.radius:n.radius);var c=(this._settings.x?this._settings.x:n.x);var u=(this._settings.y?this._settings.y:n.y);var g=[];for(var h=0;h&lt;l.length;h++){g.push(1)}var m=this._getRatios(g,l.length);this._mapStart=s;if(!q){this._drawRadarAxises(m,c,u,o,l)}this._drawRadarData(v,m,c,u,o,l,q,a)},_drawRadarData:function(D,u,o,n,l,O,E,N){var C,w,M,K,F,J,h,g,H,L,I,v,c,A,r,q,a,s,m;M=this._settings;F=M.yAxis.start;J=M.yAxis.end;m=this._getRelativeValue(F,J);v=m[0];s=(v?l/v:l/2);a=m[1];c= -Math.PI/2;C=w=c;H=[];g=0;for(K=0;K&lt;O.length;K++){if(!q){A=M.value(O[K]);r=(parseFloat(A||0)-F)*a}else{r=q}L=Math.floor(s*r);A=M.value((K!=(O.length-1))?O[K+1]:O[0]);q=(parseFloat(A||0)-F)*a;I=Math.floor(s*q);C=w;w=((K!=(O.length-1))?(c+u[K]-0.0001):c);h=(g||this._getPositionByAngle(C,o,n,L));g=this._getPositionByAngle(w,o,n,I);H.push(h)}if(M.fill){this._fillRadarChart(D,H,O)}if(!M.disableLines){this._strokeRadarChart(D,H,O)}if(!M.disableItems){this._drawRadarItemMarkers(D,H,O,E,N)}H=null},_drawRadarItemMarkers:function(a,g,l,h,m){for(var c=0;c&lt;g.length;c++){this._drawItem(a,g[c].x,g[c].y,l[c],this._settings.label.call(this,l),h,m)}},_fillRadarChart:function(a,h,m){var l,g;a.globalAlpha=this._settings.alpha.call(this,{});a.beginPath();for(var c=0;c&lt;h.length;c++){a.fillStyle=this._settings.fill.call(this,m[c]);l=h[c];g=(h[c+1]||h[0]);if(!c){a.moveTo(l.x,l.y)}a.lineTo(g.x,g.y)}a.fill();a.globalAlpha=1},_strokeRadarChart:function(a,h,m){var l,g;for(var c=0;c&lt;h.length;c++){l=h[c];g=(h[c+1]||h[0]);this._drawLine(a,l.x,l.y,g.x,g.y,this._settings.line.color.call(this,m[c]),this._settings.line.width)}},_drawRadarAxises:function(C,w,v,n,P){var a=this._settings.yAxis;var h=this._settings.xAxis;var o=a.start;var m=a.end;var r=a.step;var D={};var O=this._configYAxis;if(typeof O.step==&quot;undefined&quot;||typeof O.start==&quot;undefined&quot;||typeof O.end==&quot;undefined&quot;){var s=this._getLimits();D=this._calculateScale(s.min,s.max);o=D.start;m=D.end;r=D.step;a.end=m;a.start=o}var J=[];var M,L,E;var N=0;var g=n*r/(m-o);var u,A;if(r&lt;1){u=Math.min(this._log10(r),(o&lt;=0?0:this._log10(o)));A=Math.pow(10,-u)}var K=[];if(!this.canvases.scale){this.canvases.scale=new dhtmlx.ui.Canvas(this._obj,&quot;radar_scale&quot;)}var I=this.canvases.scale.getCanvas();for(M=m;M&gt;=o;M-=r){if(D.fixNum){M=parseFloat((new Number(M)).toFixed(D.fixNum))}J.push(Math.floor(N*g)+0.5);if(A){M=Math.round(M*A)/A}var q=v-n+J[J.length-1];this.canvases.scale.renderTextAt(&quot;middle&quot;,&quot;left&quot;,w,q,a.template(M.toString()),&quot;dhx_axis_item_y dhx_radar&quot;);if(C.length&lt;2){this._drawScaleSector(I,&quot;arc&quot;,w,v,n-J[J.length-1],-Math.PI/2,3*Math.PI/2,M);return}var l= -Math.PI/2;var H=l;var F;for(L=0;L&lt;C.length;L++){if(M==m){K.push(H)}F=l+C[L]-0.0001;this._drawScaleSector(I,(O.lineShape||&quot;line&quot;),w,v,n-J[J.length-1],H,F,M,L,P[M]);H=F}N++}for(M=0;M&lt;K.length;M++){E=this._getPositionByAngle(K[M],w,v,n);if(h.lines.call(this,P[M],M)){this._drawLine(I,w,v,E.x,E.y,(h?h.lineColor.call(this,P[M]):&quot;#cfcfcf&quot;),1)}this._drawRadarScaleLabel(I,w,v,n,K[M],(h?h.template.call(this,P[M]):&quot; &quot;))}},_drawScaleSector:function(u,m,s,q,l,c,a,h,g){var r,o;if(l&lt;0){return false}r=this._getPositionByAngle(c,s,q,l);o=this._getPositionByAngle(a,s,q,l);var n=this._settings.yAxis;if(n.bg){u.beginPath();u.moveTo(s,q);if(m==&quot;arc&quot;){u.arc(s,q,l,c,a,false)}else{u.lineTo(r.x,r.y);u.lineTo(o.x,o.y)}u.fillStyle=n.bg(h,g);u.moveTo(s,q);u.fill();u.closePath()}if(n.lines.call(this,h)){u.lineWidth=1;u.beginPath();if(m==&quot;arc&quot;){u.arc(s,q,l,c,a,false)}else{u.moveTo(r.x,r.y);u.lineTo(o.x,o.y)}u.strokeStyle=n.lineColor.call(this,h);u.stroke()}},_drawRadarScaleLabel:function(A,q,n,c,o,v){var w=this.canvases.scale.renderText(0,0,v,&quot;dhx_axis_radar_title&quot;,1);var g=w.scrollWidth;var u=w.offsetHeight;var s=0.001;var m=this._getPositionByAngle(o,q,n,c+5);var l=0,h=0;if(o&lt;0||o&gt;Math.PI){h= -u}if(o&gt;Math.PI/2){l= -g}if(Math.abs(o+Math.PI/2)&lt;s||Math.abs(o-Math.PI/2)&lt;s){l= -g/2}else{if(Math.abs(o)&lt;s||Math.abs(o-Math.PI)&lt;s){h= -u/2}}w.style.top=m.y+h+&quot;px&quot;;w.style.left=m.x+l+&quot;px&quot;;w.style.width=g+&quot;px&quot;;w.style.whiteSpace=&quot;nowrap&quot;}};dhtmlx.chart.area={pvt_render_area:function(o,F,l,h,q,C){var s,A,u,r,m,y,n,E,D,x,w,c,v,a,g;y=this._calculateLineParams(o,F,l,h,q);A=this._settings;r=(A.eventRadius||Math.floor(y.aoX/2));if(F.length){n=[];x=(!A.offset?l.x:l.x+y.aoX*0.5);for(u=0;u&lt;F.length;u++){m=F[u];D=this._getPointY(m,l,h,y);v=x+y.aoX*u;if(D){a=(typeof D==&quot;object&quot;?D.y0:D);if(u&amp;&amp;this._settings.fixOverflow){E=this._getPointY(F[u-1],l,h,y);if(E.out&amp;&amp;E.out==D.out){continue}w=y.aoX*(u-1)-0.5+x;c=(typeof E==&quot;object&quot;?E.y0:E);if(E.out){g=(E.out==&quot;min&quot;?h.y:l.y);n.push([this._calcOverflowX(w,v,c,a,g),g])}if(D.out){g=(D.out==&quot;min&quot;?h.y:l.y);n.push([this._calcOverflowX(w,v,c,a,g),g]);if(u==(F.length-1)&amp;&amp;g==l.y){n.push([v,l.y])}}}if(!D.out){n.push([v,a]);C.addRect(m.id,[v-r-l.x,a-r-l.y,v+r-l.x,a+r-l.y],q)}if(!A.yAxis){s=(!A.offset&amp;&amp;(u==F.length-1)?&quot;left&quot;:&quot;center&quot;);this.canvases[q].renderTextAt(false,s,v,a-A.labelOffset,A.label(m))}}}if(n.length){n.push([v,h.y]);n.push([n[0][0],h.y])}o.globalAlpha=this._settings.alpha.call(this,F[0]);o.fillStyle=this._settings.color.call(this,F[0]);o.beginPath();this._path(o,n);o.fill();if(A.border){o.lineWidth=A.borderWidth||1;if(A.borderColor){o.strokeStyle=A.borderColor.call(this,F[0])}else{this._setBorderStyles(o,o.fillStyle)}o.beginPath();this._path(o,n);o.stroke()}o.lineWidth=1;o.globalAlpha=1}}};dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(q,H,c,a,r,E){var J,I,v,D,A,w,l,u,m,C,o,h,g,n;C=this._calculateLineParams(q,H,c,a,r);D=this._settings;u=(D.eventRadius||Math.floor(C.aoX/2));if(H.length){o=[];n=[];h=(!D.offset?c.x:c.x+C.aoX*0.5);var F=function(x,K){return r?(H[x].$startY?K-a.y+H[x].$startY:0):K};var s=function(y,M,L){var K=(L.y-M.y)/(L.x-M.x);return K*y+M.y-K*M.x};for(A=0;A&lt;H.length;A++){m=H[A];if(!A){g=F(A,a.y);o.push([h,g])}else{h+=C.aoX}g=F(A,this._getPointY(m,c,a,C));n.push((isNaN(g)&amp;&amp; !A)?(H[A].$startY||a.y):g);if(g){o.push([h,g]);E.addRect(m.id,[h-u-c.x,g-u-c.y,h+u-c.x,g+u-c.y],r);if(!D.yAxis){v=(!D.offset&amp;&amp;l?&quot;left&quot;:&quot;center&quot;);this.canvases[r].renderTextAt(false,v,h,g-D.labelOffset,D.label(m))}}}o.push([h,F(A-1,a.y)]);if(r){for(A=H.length-2;A&gt;0;A--){h-=C.aoX;g=H[A].$startY;if(g){o.push([h,g])}}}o.push([o[0][0],o[0][1]]);q.globalAlpha=this._settings.alpha.call(this,H[0]);q.fillStyle=this._settings.color.call(this,H[0]);q.beginPath();this._path(q,o);q.fill();for(A=0;A&lt;H.length;A++){g=n[A];if(!g){if(A==H.length-1){g=H[A].$startY}for(w=A+1;w&lt;H.length;w++){if(n[w]){J={x:c.x,y:n[0]};I={x:(c.x+C.aoX*w),y:n[w]};g=s(c.x+C.aoX*A,J,I);break}}}H[A].$startY=g}}}};dhtmlx.chart.spline={pvt_render_spline:function(q,I,h,g,r,H){var F,u,o,s,E,n,m,A,w,v,l,c,a;E=this._calculateLineParams(q,I,h,g,r);F=this._settings;this._mapStart=h;o=[];if(I.length){A=(F.offset?h.x+E.aoX*0.5:h.x);for(u=0;u&lt;I.length;u++){l=this._getPointY(I[u],h,g,E);if(l){m=((!u)?A:E.aoX*u-0.5+A);o.push({x:m,y:l,index:u})}}n=this._getSplineParameters(o);for(u=0;u&lt;o.length;u++){w=o[u].x;c=o[u].y;if(u&lt;o.length-1){v=o[u+1].x;a=o[u+1].y;for(s=w;s&lt;v;s++){var D=this._getSplineYPoint(s,w,u,n.a,n.b,n.c,n.d);if(D&lt;h.y){D=h.y}if(D&gt;g.y){D=g.y}var C=this._getSplineYPoint(s+1,w,u,n.a,n.b,n.c,n.d);if(C&lt;h.y){C=h.y}if(C&gt;g.y){C=g.y}this._drawLine(q,s,D,s+1,C,F.line.color(I[u]),F.line.width)}this._drawLine(q,v-1,this._getSplineYPoint(s,w,u,n.a,n.b,n.c,n.d),v,a,F.line.color(I[u]),F.line.width)}this._drawItem(q,w,c,I[o[u].index],F.label(I[o[u].index]),r,H)}}},_getSplineParameters:function(A){var o,D,C,E,y,x,w,r,q=[],l=[],g=A.length;for(o=0;o&lt;g-1;o++){q[o]=A[o+1].x-A[o].x;l[o]=(A[o+1].y-A[o].y)/q[o]}D=[];C=[];D[0]=0;D[1]=2*(q[0]+q[1]);C[0]=0;C[1]=6*(l[1]-l[0]);for(o=2;o&lt;g-1;o++){D[o]=2*(q[o-1]+q[o])-q[o-1]*q[o-1]/D[o-1];C[o]=6*(l[o]-l[o-1])-q[o-1]*C[o-1]/D[o-1]}E=[];E[g-1]=E[0]=0;for(o=g-2;o&gt;=1;o--){E[o]=(C[o]-q[o]*E[o+1])/D[o]}y=[];x=[];w=[];r=[];for(o=0;o&lt;g-1;o++){y[o]=A[o].y;x[o]= -q[o]*E[o+1]/6-q[o]*E[o]/3+(A[o+1].y-A[o].y)/q[o];w[o]=E[o]/2;r[o]=(E[o+1]-E[o])/(6*q[o])}return{a:y,b:x,c:w,d:r}},_getSplineYPoint:function(h,m,n,l,g,q,o){return l[n]+(h-m)*(g[n]+(h-m)*(q[n]+(h-m)*o[n]))}};dhtmlx.chart.barH={pvt_render_barH:function(A,N,m,l,C,M){var r,u,E,D,a,H,o,K,v,L,c,x,n,I,w,h,y,s,J,g,q;E=(l.y-m.y)/N.length;o=this._getLimits(&quot;h&quot;);K=o.max;v=o.min;h=l.x-m.x;q= ! !this._settings.yAxis;if(!C){this._drawHScales(A,N,m,l,v,K,E)}if(q){K=parseFloat(this._settings.xAxis.end);v=parseFloat(this._settings.xAxis.start)}I=this._getRelativeValue(v,K);x=I[0];c=I[1];s=(x?h/x:10);if(!q){w=10;s=(x?(h-w)/x:10)}u=parseInt(this._settings.width,10);if((u*this._series.length+4)&gt;E){u=E/this._series.length-4}r=Math.floor((E-u*this._series.length)/2);n=(typeof this._settings.radius!=&quot;undefined&quot;?parseInt(this._settings.radius,10):Math.round(u/5));L=false;a=this._settings.gradient;if(a&amp;&amp;typeof(a)!=&quot;function&quot;){L=a;a=false}else{if(a){a=A.createLinearGradient(m.x,m.y,l.x,m.y);this._settings.gradient(a)}}if(!q){this._drawLine(A,m.x-0.5,m.y,m.x-0.5,l.y,&quot;#000000&quot;,1)}for(H=0;H&lt;N.length;H++){y=parseFloat(this._settings.value(N[H]||0));if(y&gt;K){y=K}y-=v;y*=c;J=m.x;g=m.y+r+H*E+(u+1)*C;if((y&lt;0&amp;&amp;this._settings.origin==&quot;auto&quot;)||(this._settings.xAxis&amp;&amp;y===0&amp;&amp; !(this._settings.origin!=&quot;auto&quot;&amp;&amp;this._settings.origin&gt;v))){this.canvases[C].renderTextAt(&quot;middle&quot;,&quot;right&quot;,J+10,g+u/2+r,this._settings.label(N[H]));continue}if(y&lt;0&amp;&amp;this._settings.origin!=&quot;auto&quot;&amp;&amp;this._settings.origin&gt;v){y=0}if(!q){y+=w/s}D=a||this._settings.color.call(this,N[H]);if(this._settings.border){this._drawBarHBorder(A,J,g,u,v,n,s,y,D)}A.globalAlpha=this._settings.alpha.call(this,N[H]);var F=this._drawBarH(A,l,J,g,u,v,n,s,y,D,a,L);if(L!=false){this._drawBarHGradient(A,J,g,u,v,n,s,y,D,L)}A.globalAlpha=1;if(F[3]==g){this.canvases[C].renderTextAt(&quot;middle&quot;,&quot;left&quot;,F[0]-5,F[3]+Math.floor(u/2),this._settings.label(N[H]));M.addRect(N[H].id,[F[0]-m.x,F[3]-m.y,F[2]-m.x,F[3]+u-m.y],C)}else{this.canvases[C].renderTextAt(&quot;middle&quot;,false,F[2]+5,F[1]+Math.floor(u/2),this._settings.label(N[H]));M.addRect(N[H].id,[F[0]-m.x,g-m.y,F[2]-m.x,F[3]-m.y],C)}}},_setBarHPoints:function(x,h,v,y,n,w,u,m,l){var c=0;if(n&gt;w*u){var s=(n-w*u)/n;c= -Math.asin(s)+Math.PI/2}x.moveTo(h,v+m);var g=h+w*u-n-(n?0:m);if(n&lt;w*u){x.lineTo(g,v+m)}var r=v+n;if(n&amp;&amp;n&gt;0){x.arc(g,r,n-m,-Math.PI/2+c,0,false)}var q=v+y-n-(n?0:m);var a=g+n-(n?m:0);x.lineTo(a,q);if(n&amp;&amp;n&gt;0){x.arc(g,q,n-m,0,Math.PI/2-c,false)}var o=v+y-m;x.lineTo(h,o);if(!l){x.lineTo(h,v+m)}return[a,o]},_drawHScales:function(g,n,m,l,o,c,h){var a=0;if(this._settings.xAxis){if(!this.canvases.x){this.canvases.x=new dhtmlx.ui.Canvas(this._obj)}a=this._drawHXAxis(this.canvases.x.getCanvas(),n,m,l,o,c)}if(this._settings.yAxis){if(!this.canvases.y){this.canvases.y=new dhtmlx.ui.Canvas(this._obj)}this._drawHYAxis(this.canvases.y.getCanvas(),n,m,l,h,a)}},_drawHYAxis:function(u,l,q,n,g,a){if(!this._settings.yAxis){return}var m;var c=parseInt((a?a:q.x),10)-0.5;var r=n.y+0.5;var o=q.y;this._drawLine(u,c,r,c,o,this._settings.yAxis.color,1);for(var h=0;h&lt;l.length;h++){var s=((this._settings.origin!=&quot;auto&quot;)&amp;&amp;(this._settings.view==&quot;barH&quot;)&amp;&amp;(parseFloat(this._settings.value(l[h]))&lt;this._settings.origin));m=o+g/2+h*g;this.canvases.y.renderTextAt(&quot;middle&quot;,(s?false:&quot;left&quot;),(s?c+5:c-5),m,this._settings.yAxis.template(l[h]),&quot;dhx_axis_item_y&quot;,(s?0:c-10));if(this._settings.yAxis.lines.call(this,l[h])){this._drawLine(u,q.x,m,n.x,m,this._settings.yAxis.lineColor.call(this,l[h]),1)}}this._drawLine(u,q.x+0.5,o+0.5,n.x,o+0.5,this._settings.yAxis.lineColor.call(this,{}),1);this._setYAxisTitle(q,n)},_drawHXAxis:function(C,u,y,x,g,q){var n;var l={};var o=this._settings.xAxis;if(!o){return}var A=x.y+0.5;var h=y.x-0.5;var a=x.x-0.5;var s=y.x;this._drawLine(C,h,A,a,A,o.color,1);if(o.step){n=parseFloat(o.step)}if(typeof this._configXAxis.step==&quot;undefined&quot;||typeof this._configXAxis.start==&quot;undefined&quot;||typeof this._configXAxis.end==&quot;undefined&quot;){l=this._calculateScale(g,q);g=l.start;q=l.end;n=l.step;this._settings.xAxis.end=q;this._settings.xAxis.start=g;this._settings.xAxis.step=n}if(n===0){return}var m=(a-h)*n/(q-g);var w=0;for(var r=g;r&lt;=q;r+=n){if(l.fixNum){r=parseFloat((new Number(r)).toFixed(l.fixNum))}var v=Math.floor(h+w*m)+0.5;if(!(r==g&amp;&amp;this._settings.origin==&quot;auto&quot;)&amp;&amp;o.lines.call(this,r)){this._drawLine(C,v,A,v,y.y,this._settings.xAxis.lineColor.call(this,r),1)}if(r==this._settings.origin){s=v+1}this.canvases.x.renderTextAt(false,true,v,A+2,o.template(r.toString()),&quot;dhx_axis_item_x&quot;);w++}this.canvases.x.renderTextAt(true,false,h,x.y+this._settings.padding.bottom-3,this._settings.xAxis.title,&quot;dhx_axis_title_x&quot;,x.x-y.x);if(!o.lines.call(this,{})){this._drawLine(C,h,y.y-0.5,a,y.y-0.5,this._settings.xAxis.color,0.2)}return s},_correctBarHParams:function(o,l,g,m,n,q,h){var a=this._settings.yAxis;var c=l;if(! !a&amp;&amp;this._settings.origin!=&quot;auto&quot;&amp;&amp;(this._settings.origin&gt;h)){l+=(this._settings.origin-h)*n;c=l;m=m-(this._settings.origin-h);if(m&lt;0){m*=(-1);o.translate(l,g+q);o.rotate(Math.PI);l=0.5;g=0}l+=0.5}return{value:m,x0:l,y0:g,start:c}},_drawBarH:function(v,l,C,h,q,r,m,o,u,w,a,n){v.save();var s=this._correctBarHParams(v,C,h,u,o,q,r);v.fillStyle=w;v.beginPath();var x=this._setBarHPoints(v,s.x0,s.y0,q,m,o,s.value,(this._settings.border?1:0));if(a&amp;&amp; !n){v.lineTo(l.x,s.y0+(this._settings.border?1:0))}v.fill();v.restore();var g=s.y0;var c=(s.y0!=h?h:x[1]);var A=(s.y0!=h?(s.start-x[0]):s.start);var y=(s.y0!=h?s.start:x[0]);return[A,g,y,c]},_drawBarHBorder:function(q,c,n,r,l,h,o,m,g){q.save();var a=this._correctBarHParams(q,c,n,m,o,r,l);q.beginPath();this._setBorderStyles(q,g);q.globalAlpha=0.9;this._setBarHPoints(q,a.x0,a.y0,r,h,o,a.value,q.lineWidth/2,1);q.stroke();q.restore()},_drawBarHGradient:function(s,g,q,u,n,m,r,o,h,a){s.save();var c=this._correctBarHParams(s,g,q,o,r,u,n);var l=this._setBarGradient(s,c.x0,c.y0+u,c.x0+r*c.value,c.y0,a,h,&quot;x&quot;);s.fillStyle=l.gradient;s.beginPath();this._setBarHPoints(s,c.x0,c.y0+l.offset,u-l.offset*2,m,r,c.value,l.offset);s.fill();s.globalAlpha=1;s.restore()}};dhtmlx.assert(dhtmlx.chart.barH);dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(D,Q,l,h,E,P){var O,w;var c;var x;var A=h.x-l.x;var o= ! !this._settings.yAxis;var n=this._getStackedLimits(Q);O=n.max;w=n.min;var H=Math.floor((h.y-l.y)/Q.length);if(!E){this._drawHScales(D,Q,l,h,w,O,H)}if(o){O=parseFloat(this._settings.xAxis.end);w=parseFloat(this._settings.xAxis.start)}var L=this._getRelativeValue(w,O);x=L[0];c=L[1];var u=(x?A/x:10);if(!o){var y=10;u=(x?(A-y)/x:10)}var v=parseInt(this._settings.width,10);if((v+4)&gt;H){v=H-4}var q=(H-v)/2;var m=0;var r=false;var a=this._settings.gradient;if(a){r=true}if(!o){this._drawLine(D,l.x-0.5,l.y,l.x-0.5,h.y,&quot;#000000&quot;,1)}var N=0;var K=0;for(J=0;J&lt;this._series.length;J++){if(J==E){K=N}if(this._series[J].view==&quot;stackedBarH&quot;){N++}}for(var J=0;J&lt;Q.length;J++){if(!K){Q[J].$startX=l.x}var C=parseFloat(this._settings.value(Q[J]||0));if(C&gt;O){C=O}C-=w;C*=c;var M=l.x;var g=l.y+q+J*H;if(!K){Q[J].$startX=M}else{M=Q[J].$startX}if(C&lt;0||(this._settings.yAxis&amp;&amp;C===0)){this.canvases.y.renderTextAt(&quot;middle&quot;,true,M+10,g+v/2,this._settings.label(Q[J]));continue}if(!o){C+=y/u}var F=this._settings.color.call(this,Q[J]);D.globalAlpha=this._settings.alpha.call(this,Q[J]);D.fillStyle=this._settings.color.call(this,Q[J]);D.beginPath();var I=this._setBarHPoints(D,M,g,v,m,u,C,(this._settings.border?1:0));if(a&amp;&amp; !r){D.lineTo(l.x+A,g+(this._settings.border?1:0))}D.fill();if(r!=false){var s=this._setBarGradient(D,M,g+v,M,g,r,F,&quot;x&quot;);D.fillStyle=s.gradient;D.beginPath();I=this._setBarHPoints(D,M,g,v,m,u,C,0);D.fill()}if(this._settings.border){this._drawBarHBorder(D,M,g,v,w,m,u,C,F)}D.globalAlpha=1;this.canvases[E].renderTextAt(&quot;middle&quot;,true,Q[J].$startX+(I[0]-Q[J].$startX)/2-1,g+(I[1]-g)/2,this._settings.label(Q[J]));P.addRect(Q[J].id,[Q[J].$startX-l.x,g-l.y,I[0]-l.x,I[1]-l.y],E);Q[J].$startX=I[0]}}};dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(y,M,h,g,A,L){var J,u;var a;var v;var w=g.y-h.y;var m= ! !this._settings.yAxis;var K= ! !this._settings.xAxis;var l=this._getStackedLimits(M);J=l.max;u=l.min;var D=Math.floor((g.x-h.x)/M.length);if(!A){this._drawScales(M,h,g,u,J,D)}if(m){J=parseFloat(this._settings.yAxis.end);u=parseFloat(this._settings.yAxis.start)}var H=this._getRelativeValue(u,J);v=H[0];a=H[1];var r=(v?w/v:10);var s=parseInt(this._settings.width,10);if(s+4&gt;D){s=D-4}var n=Math.floor((D-s)/2);var o=(this._settings.gradient?this._settings.gradient:false);if(!K){this._drawLine(y,h.x,g.y+0.5,g.x,g.y+0.5,&quot;#000000&quot;,1)}for(var F=0;F&lt;M.length;F++){var x=parseFloat(this._settings.value(M[F]||0));if(!x){if(!A|| !M[F].$startY){M[F].$startY=g.y}continue}if(!A){x-=u}x*=a;var I=h.x+n+F*D;var c=g.y;if(!A){M[F].$startY=c}else{c=M[F].$startY}if(c&lt;(h.y+1)){continue}if(x&lt;0||(this._settings.yAxis&amp;&amp;x===0)){this.canvases.y.renderTextAt(true,true,I+Math.floor(s/2),c,this._settings.label(M[F]));continue}var C=this._settings.color.call(this,M[F]);y.globalAlpha=this._settings.alpha.call(this,M[F]);y.fillStyle=this._settings.color.call(this,M[F]);y.beginPath();var E=this._setStakedBarPoints(y,I-(this._settings.border?0.5:0),c,s+(this._settings.border?0.5:0),r,x,0,h.y);y.fill();if(o){y.save();var q=this._setBarGradient(y,I,c,I+s,E[1],o,C,&quot;y&quot;);y.fillStyle=q.gradient;y.beginPath();E=this._setStakedBarPoints(y,I+q.offset,c,s-q.offset*2,r,x,(this._settings.border?1:0),h.y);y.fill();y.restore()}if(this._settings.border){y.save();this._setBorderStyles(y,C);y.beginPath();this._setStakedBarPoints(y,I-0.5,c,s+1,r,x,0,h.y,1);y.stroke();y.restore()}y.globalAlpha=1;this.canvases[A].renderTextAt(false,true,I+Math.floor(s/2),(E[1]+(c-E[1])/2)-7,this._settings.label(M[F]));L.addRect(M[F].id,[I-h.x,E[1]-h.y,E[0]-h.x,(M[F].$startY||c)-h.y],A);M[F].$startY=(this._settings.border?(E[1]+1):E[1])}},_setStakedBarPoints:function(u,c,q,v,r,o,h,g,l){u.moveTo(c,q);var n=q-r*o+h;if(n&lt;g){n=g}u.lineTo(c,n);var a=c+v;var m=n;u.lineTo(a,m);var s=c+v;u.lineTo(s,q);if(!l){u.lineTo(c,q)}return[s,m-2*h]}};dhtmlx.chart.line={pvt_render_line:function(n,C,l,h,o,y){var x,q,m,v,u,s,r,c,a,g,A,w;v=this._calculateLineParams(n,C,l,h,o);x=this._settings;if(C.length){u=(x.offset?l.x+v.aoX*0.5:l.x);m=[];for(q=0;q&lt;C.length;q++){w=this._getPointY(C[q],l,h,v);if(w){r=((!q)?u:v.aoX*q-0.5+u);a=(typeof w==&quot;object&quot;?w.y0:w);if(q&amp;&amp;this._settings.fixOverflow){A=this._getPointY(C[q-1],l,h,v);if(A.out&amp;&amp;A.out==w.out){continue}s=v.aoX*(q-1)-0.5+u;c=(typeof A==&quot;object&quot;?A.y0:A);if(A.out){g=(A.out==&quot;min&quot;?h.y:l.y);m.push({x:this._calcOverflowX(s,r,c,a,g),y:g})}if(w.out){g=(w.out==&quot;min&quot;?h.y:l.y);m.push({x:this._calcOverflowX(s,r,c,a,g),y:g})}}if(!w.out){m.push({x:r,y:w,index:q})}}}this._mapStart=l;for(q=1;q&lt;=m.length;q++){s=m[q-1].x;c=m[q-1].y;if(q&lt;m.length){r=m[q].x;a=m[q].y;this._drawLine(n,s,c,r,a,x.line.color.call(this,C[q-1]),x.line.width);if(x.line&amp;&amp;x.line.shadow){n.globalAlpha=0.3;this._drawLine(n,s+2,c+x.line.width+8,r+2,a+x.line.width+8,&quot;#eeeeee&quot;,x.line.width+3);n.globalAlpha=1}}if(typeof m[q-1].index!=&quot;undefined&quot;){this._drawItem(n,s,c,C[m[q-1].index],x.label(C[m[q-1].index]),o,y,l)}}}},_calcOverflowX:function(c,a,h,g,l){return c+(l-h)*(a-c)/(g-h)},_drawItem:function(v,g,u,q,s,r,c){var h=this._settings.item;var o=parseInt(h.radius.call(this,q),10)||0;var n=this._mapStart;if(o){v.save();if(h.shadow){v.lineWidth=1;v.strokeStyle=&quot;#bdbdbd&quot;;v.fillStyle=&quot;#bdbdbd&quot;;var a=[0.1,0.2,0.3];for(var m=(a.length-1);m&gt;=0;m--){v.globalAlpha=a[m];v.strokeStyle=&quot;#d0d0d0&quot;;v.beginPath();this._strokeChartItem(v,g,u+2*o/3,o+m+1,h.type);v.stroke()}v.beginPath();v.globalAlpha=0.3;v.fillStyle=&quot;#bdbdbd&quot;;this._strokeChartItem(v,g,u+2*o/3,o+1,h.type);v.fill()}v.restore();v.lineWidth=h.borderWidth;v.fillStyle=h.color.call(this,q);v.strokeStyle=h.borderColor.call(this,q);v.globalAlpha=h.alpha.call(this,q);v.beginPath();this._strokeChartItem(v,g,u,o+1,h.type);v.fill();v.stroke();v.globalAlpha=1}if(s){this.canvases[r].renderTextAt(false,true,g,u-o-this._settings.labelOffset,this._settings.label.call(this,q))}var l=(this._settings.eventRadius||o+1);c.addRect(q.id,[g-l-n.x,u-l-n.y,g+l-n.x,u+l-n.y],r)},_strokeChartItem:function(a,c,l,h,g){var m=[];c=parseInt(c,10);l=parseInt(l,10);if(g&amp;&amp;(g==&quot;square&quot;||g==&quot;s&quot;)){h*=Math.sqrt(2)/2;m=[[c-h-a.lineWidth/2,l-h],[c+h,l-h],[c+h,l+h],[c-h,l+h],[c-h,l-h]]}else{if(g&amp;&amp;(g==&quot;diamond&quot;||g==&quot;d&quot;)){var n=(a.lineWidth&gt;1?a.lineWidth*Math.sqrt(2)/4:0);m=[[c,l-h],[c+h,l],[c,l+h],[c-h,l],[c+n,l-h-n]]}else{if(g&amp;&amp;(g==&quot;triangle&quot;||g==&quot;t&quot;)){m=[[c,l-h],[c+Math.sqrt(3)*h/2,l+h/2],[c-Math.sqrt(3)*h/2,l+h/2],[c,l-h]]}else{m=<A href="/wiki/index.php?title=C,l,h,0,Math.PI*2,true&amp;action=edit&amp;redlink=1" class="new" title="C,l,h,0,Math.PI*2,true (page does not exist)">c,l,h,0,Math.PI*2,true</A>}}}this._path(a,m)},_getPointY:function(g,o,m,a){var n=a.minValue;var h=a.maxValue;var r=a.unit;var c=a.valueFactor;var q=this._settings.value(g);var s=(parseFloat(q||0)-n)*c;if(!this._settings.yAxis){s+=a.startValue/r}var l=m.y-r*s;if(this._settings.fixOverflow&amp;&amp;(this._settings.view==&quot;line&quot;||this._settings.view==&quot;area&quot;)){if(q&gt;h){l={y:o.y,y0:l,out:&quot;max&quot;}}else{if(s&lt;0||q&lt;n){l={y:m.y,y0:l,out:&quot;min&quot;}}}}else{if(q&gt;h){l=o.y}if(s&lt;0||q&lt;n){l=m.y}}return l},_calculateLineParams:function(q,h,n,m,l){var c={};var r;c.totalHeight=m.y-n.y;c.aoX=(m.x-n.x)/((!this._settings.offset)?(h.length-1):h.length);var g= ! !this._settings.yAxis;var a=(this._settings.view.indexOf(&quot;stacked&quot;)!= -1?this._getStackedLimits(h):this._getLimits());c.maxValue=a.max;c.minValue=a.min;if(!l){this._drawScales(h,n,m,c.minValue,c.maxValue,c.aoX)}if(g){c.maxValue=parseFloat(this._settings.yAxis.end);c.minValue=parseFloat(this._settings.yAxis.start)}var o=this._getRelativeValue(c.minValue,c.maxValue);r=o[0];c.valueFactor=o[1];c.unit=(r?c.totalHeight/r:10);c.startValue=0;if(!g){c.startValue=10;if(c.unit!=c.totalHeight){c.unit=(r?(c.totalHeight-c.startValue)/r:10)}}return c}};dhtmlx.chart.bar={pvt_render_bar:function(A,Q,l,h,C,P){var u,E,I,n,N,v,w,c,J,x,s,M,o,O=h.y-l.y;o= ! !this._settings.yAxis;M= ! !this._settings.xAxis;n=this._getLimits();N=n.max;v=n.min;E=(h.x-l.x)/Q.length;if(!C&amp;&amp; !(this._settings.origin!=&quot;auto&quot;&amp;&amp; !o)){this._drawScales(Q,l,h,v,N,E)}if(o){N=parseFloat(this._settings.yAxis.end);v=parseFloat(this._settings.yAxis.start)}J=this._getRelativeValue(v,N);w=J[0];c=J[1];s=(w?O/w:w);if(!o&amp;&amp; !(this._settings.origin!=&quot;auto&quot;&amp;&amp;M)){x=10;s=(w?(O-x)/w:x)}if(!C&amp;&amp;(this._settings.origin!=&quot;auto&quot;&amp;&amp; !o)&amp;&amp;this._settings.origin&gt;v){this._drawXAxis(A,Q,l,h,E,h.y-s*(this._settings.origin-v))}u=parseInt(this._settings.width,10);var L=0;var H=0;for(I=0;I&lt;this._series.length;I++){if(I==C){H=L}if(this._series[I].view==&quot;bar&quot;){L++}}if(this._series&amp;&amp;(u*L+4)&gt;E){u=parseInt(E/L-4,10)}var q=(E-u*L)/2;var m=(typeof this._settings.radius!=&quot;undefined&quot;?parseInt(this._settings.radius,10):Math.round(u/5));var r=false;var a=this._settings.gradient;if(a&amp;&amp;typeof(a)!=&quot;function&quot;){r=a;a=false}else{if(a){a=A.createLinearGradient(0,h.y,0,l.y);this._settings.gradient(a)}}if(!M){this._drawLine(A,l.x,h.y+0.5,h.x,h.y+0.5,&quot;#000000&quot;,1)}for(I=0;I&lt;Q.length;I++){var y=parseFloat(this._settings.value(Q[I])||0);if(isNaN(y)){continue}if(y&gt;N){y=N}y-=v;y*=c;var K=l.x+q+parseInt(I*E,10)+(u+1)*H;var g=h.y;if(y&lt;0||(this._settings.yAxis&amp;&amp;y===0&amp;&amp; !(this._settings.origin!=&quot;auto&quot;&amp;&amp;this._settings.origin&gt;v))){this.canvases[C].renderTextAt(true,true,K+Math.floor(u/2),g,this._settings.label(Q[I]));continue}if(!o&amp;&amp; !(this._settings.origin!=&quot;auto&quot;&amp;&amp;M)){y+=x/s}var D=a||this._settings.color.call(this,Q[I]);A.globalAlpha=this._settings.alpha.call(this,Q[I]);var F=this._drawBar(A,l,K,g,u,v,m,s,y,D,a,r);if(r){this._drawBarGradient(A,K,g,u,v,m,s,y,D,r)}if(this._settings.border){this._drawBarBorder(A,K,g,u,v,m,s,y,D)}A.globalAlpha=1;if(F[0]!=K){this.canvases[C].renderTextAt(false,true,K+Math.floor(u/2),F[1],this._settings.label(Q[I]))}else{this.canvases[C].renderTextAt(true,true,K+Math.floor(u/2),F[3],this._settings.label(Q[I]))}P.addRect(Q[I].id,[K-l.x,F[3]-l.y,F[2]-l.x,F[1]-l.y],C)}},_correctBarParams:function(o,l,g,m,n,q,h){var a=this._settings.xAxis;var c=g;if(! !a&amp;&amp;this._settings.origin!=&quot;auto&quot;&amp;&amp;(this._settings.origin&gt;h)){g-=(this._settings.origin-h)*n;c=g;m=m-(this._settings.origin-h);if(m&lt;0){m*=(-1);o.translate(l+q,g);o.rotate(Math.PI);l=0;g=0}g-=0.5}return{value:m,x0:l,y0:g,start:c}},_drawBar:function(v,l,C,h,q,r,m,o,u,w,a,n){v.save();v.fillStyle=w;var s=this._correctBarParams(v,C,h,u,o,q,r);var x=this._setBarPoints(v,s.x0,s.y0,q,m,o,s.value,(this._settings.border?1:0));if(a&amp;&amp; !n){v.lineTo(s.x0+(this._settings.border?1:0),l.y)}v.fill();v.restore();var A=s.x0;var y=(s.x0!=C?C+x[0]:x[0]);var g=(s.x0!=C?(s.start-x[1]-s.y0):s.y0);var c=(s.x0!=C?s.start-s.y0:x[1]);return[A,g,y,c]},_drawBarBorder:function(q,c,n,r,l,h,o,m,g){var a;q.save();a=this._correctBarParams(q,c,n,m,o,r,l);this._setBorderStyles(q,g);this._setBarPoints(q,a.x0,a.y0,r,h,o,a.value,q.lineWidth/2,1);q.stroke();q.restore()},_drawBarGradient:function(u,h,r,v,o,n,s,q,l,c){u.save();var g=this._correctBarParams(u,h,r,q,s,v,o);var m=this._setBarGradient(u,g.x0,g.y0,g.x0+v,g.y0-s*g.value+2,c,l,&quot;y&quot;);var a=this._settings.border?1:0;u.fillStyle=m.gradient;this._setBarPoints(u,g.x0+m.offset,g.y0,v-m.offset*2,n,s,g.value,m.offset+a);u.fill();u.restore()},_setBarPoints:function(x,h,u,y,o,v,s,l,n){x.beginPath();var c=0;if(o&gt;v*s){var m=(o-v*s)/o;if(m&lt;=1&amp;&amp;m&gt;= -1){c= -Math.acos(m)+Math.PI/2}}x.moveTo(h+l,u);var r=u-Math.floor(v*s)+o+(o?0:l);if(o&lt;v*s){x.lineTo(h+l,r)}var g=h+o;if(o&amp;&amp;o&gt;0){x.arc(g,r,o-l,-Math.PI+c,-Math.PI/2,false)}var a=h+y-o-l;var q=r-o+(o?l:0);x.lineTo(a,q);if(o&amp;&amp;o&gt;0){x.arc(a,r,o-l,-Math.PI/2,0-c,false)}var w=h+y-l;x.lineTo(w,u);if(!n){x.lineTo(h+l,u)}return[w,q]}};dhtmlx.chart.pie={pvt_render_pie:function(c,h,a,m,g,l){this._renderPie(c,h,a,m,1,l,g)},_renderPie:function(s,F,l,h,D,E,u){if(!F.length){return}var v=this._getPieParameters(l,h);var n=(this._settings.radius?this._settings.radius:v.radius);if(n&lt;0){return}var a=this._getValues(F);var m=this._getTotalValue(a);var o=this._getRatios(a,m);var C=(this._settings.x?this._settings.x:v.x);var g=(this._settings.y?this._settings.y:v.y);if(D==1&amp;&amp;this._settings.shadow){this._addShadow(s,C,g,n)}g=g/D;var r= -Math.PI/2;var x=[];s.scale(1,D);if(this._settings.gradient){var A=(D!=1?C+n/3:C);var c=(D!=1?g+n/3:g);this._showRadialGradient(s,C,g,n,A,c)}for(var y=0;y&lt;F.length;y++){if(!a[y]){continue}s.strokeStyle=this._settings.lineColor.call(this,F[y]);s.beginPath();s.moveTo(C,g);x.push(r);alpha1= -Math.PI/2+o[y]-0.0001;s.arc(C,g,n,r,alpha1,false);s.lineTo(C,g);var w=this._settings.color.call(this,F[y]);s.fillStyle=w;s.fill();if(this._settings.pieInnerText){this._drawSectorLabel(C,g,5*n/6,r,alpha1,D,this._settings.pieInnerText(F[y],m),true)}if(this._settings.label){this._drawSectorLabel(C,g,n+this._settings.labelOffset,r,alpha1,D,this._settings.label(F[y]))}if(D!=1){this._createLowerSector(s,C,g,r,alpha1,n,true);s.fillStyle=&quot;#000000&quot;;s.globalAlpha=0.2;this._createLowerSector(s,C,g,r,alpha1,n,false);s.globalAlpha=1;s.fillStyle=w}E.addSector(F[y].id,r,alpha1,C-l.x,g-l.y/D,n,D,u);r=alpha1}s.globalAlpha=0.8;var q;for(y=0;y&lt;x.length;y++){q=this._getPositionByAngle(x[y],C,g,n);this._drawLine(s,C,g,q.x,q.y,this._settings.lineColor.call(this,F[y]),2)}if(D==1){s.lineWidth=2;s.strokeStyle=&quot;#ffffff&quot;;s.beginPath();s.arc(C,g,n+1,0,2*Math.PI,false);s.stroke()}s.globalAlpha=1;s.scale(1,1/D)},_getValues:function(g){var a=[];for(var c=0;c&lt;g.length;c++){a.push(parseFloat(this._settings.value(g[c])||0))}return a},_getTotalValue:function(a){var g=0;for(var c=0;c&lt;a.length;c++){g+=a[c]}return g},_getRatios:function(c,a){var m;var l=[];var h=0;a=a||this._getTotalValue(c);for(var g=0;g&lt;c.length;g++){m=c[g];l[g]=Math.PI*2*(a?((m+h)/a):(1/c.length));h+=m}return l},_getPieParameters:function(n,l){var h=l.x-n.x;var c=l.y-n.y;var g=n.x+h/2;var m=n.y+c/2;var a=Math.min(h/2,c/2);return{x:g,y:m,radius:a}},_createLowerSector:function(h,l,n,g,a,m,c){h.lineWidth=1;if(!((g&lt;=0&amp;&amp;a&gt;=0)||(g&gt;=0&amp;&amp;a&lt;=Math.PI)||(Math.abs(g-Math.PI)&gt;0.003&amp;&amp;g&lt;=Math.PI&amp;&amp;a&gt;=Math.PI))){return}if(g&lt;=0&amp;&amp;a&gt;=0){g=0;c=false;this._drawSectorLine(h,l,n,m,g,a)}if(g&lt;=Math.PI&amp;&amp;a&gt;=Math.PI){a=Math.PI;c=false;this._drawSectorLine(h,l,n,m,g,a)}var o=(this._settings.height||Math.floor(m/4))/this._settings.cant;h.beginPath();h.arc(l,n,m,g,a,false);h.lineTo(l+m*Math.cos(a),n+m*Math.sin(a)+o);h.arc(l,n+o,m,a,g,true);h.lineTo(l+m*Math.cos(g),n+m*Math.sin(g));h.fill();if(c){h.stroke()}},_drawSectorLine:function(g,h,m,l,c,a){g.beginPath();g.arc(h,m,l,c,a,false);g.stroke()},_addShadow:function(c,a,m,h){c.globalAlpha=0.5;var l=[&quot;#c4c4c4&quot;,&quot;#c6c6c6&quot;,&quot;#cacaca&quot;,&quot;#dcdcdc&quot;,&quot;#dddddd&quot;,&quot;#e0e0e0&quot;,&quot;#eeeeee&quot;,&quot;#f5f5f5&quot;,&quot;#f8f8f8&quot;];for(var g=l.length-1;g&gt; -1;g--){c.beginPath();c.fillStyle=l[g];c.arc(a+1,m+1,h+g,0,Math.PI*2,true);c.fill()}c.globalAlpha=1},_getGrayGradient:function(a){a.addColorStop(0,&quot;#ffffff&quot;);a.addColorStop(0.7,&quot;#7a7a7a&quot;);a.addColorStop(1,&quot;#000000&quot;);return a},_showRadialGradient:function(g,c,n,a,h,l){g.beginPath();var m;if(typeof this._settings.gradient!=&quot;function&quot;){m=g.createRadialGradient(h,l,a/4,c,n,a);m=this._getGrayGradient(m)}else{m=this._settings.gradient(m)}g.fillStyle=m;g.arc(c,n,a,0,Math.PI*2,true);g.fill();g.globalAlpha=0.7},_drawSectorLabel:function(E,c,h,A,w,F,v,a){var u=this.canvases[0].renderText(0,0,v,0,1);if(!u){return}var H=u.scrollWidth;u.style.width=H+&quot;px&quot;;if(H&gt;E){H=E}var C=(w-A&lt;0.2?4:8);if(a){C=H/1.8}var g=A+(w-A)/2;h=h-(C-8)/2;var o= -C;var n= -8;var D=&quot;right&quot;;if(g&gt;=Math.PI/2&amp;&amp;g&lt;Math.PI||g&lt;=3*Math.PI/2&amp;&amp;g&gt;=Math.PI){o= -H-o+1;D=&quot;left&quot;}var l=0;if(!a&amp;&amp;F&lt;1&amp;&amp;(g&gt;0&amp;&amp;g&lt;Math.PI)){l=(this._settings.height||Math.floor(h/4))/F}var q=(c+Math.floor((h+l)*Math.sin(g)))*F+n;var r=E+Math.floor((h+C/2)*Math.cos(g))+o;var m=(w&lt;Math.PI/2+0.01);var s=(A&lt;Math.PI/2);if(s&amp;&amp;m){r=Math.max(r,E+3)}else{if(!s&amp;&amp; !m){r=Math.min(r,E-H)}else{if(!a&amp;&amp;(g&gt;=Math.PI/2&amp;&amp;g&lt;Math.PI||g&lt;=3*Math.PI/2&amp;&amp;g&gt;=Math.PI)){r+=H/3}}}u.style.top=q+&quot;px&quot;;u.style.left=r+&quot;px&quot;;u.style.width=H+&quot;px&quot;;u.style.textAlign=D;u.style.whiteSpace=&quot;nowrap&quot;}};dhtmlx.chart.pie3D={pvt_render_pie3D:function(c,h,a,m,g,l){this._renderPie(c,h,a,m,this._settings.cant,l)}};dhtmlx.chart.donut={pvt_render_donut:function(u,l,r,q,n,c){if(!l.length){return}this._renderPie(u,l,r,q,1,c);var h=this._settings;var m=this._getPieParameters(r,q);var a=(h.radius?h.radius:m.radius);var o=((h.innerRadius&amp;&amp;(h.innerRadius&lt;a))?h.innerRadius:a/3);var g=(h.x?h.x:m.x);var s=(h.y?h.y:m.y);u.fillStyle=&quot;#ffffff&quot;;u.beginPath();u.arc(g,s,o,0,Math.PI*2,true);u.fill()}};dhtmlx.DataDriver.dhtmlxgrid={_grid_getter:&quot;_get_cell_value&quot;,toObject:function(a){this._grid=a;return a},getRecords:function(a){return a.aD},getDetails:function(g){var a={};for(var c=0;c&lt;this._grid.adG();c++){a[&quot;data&quot;+c]=this._grid[this._grid_getter](g,c)}return a},getInfo:function(a){return{_size:0,_from:0}}};dhtmlx.ui.Canvas=function(c,g,l){this._canvas_labels=[];this._canvas_name=g;this._obj=c;var h=c.offsetWidth*(window.devicePixelRatio||1);var a=c.offsetHeight*(window.devicePixelRatio||1);var l=l||&quot;&quot;;l+=&quot;;width:&quot;+c.offsetWidth+&quot;px;height:&quot;+c.offsetHeight+&quot;px;&quot;;this._prepareCanvas(g,l,h,a)};dhtmlx.ui.Canvas.prototype={_prepareCanvas:function(c,h,g,a){this._canvas=dhtmlx.html.create(&quot;canvas&quot;,{width:g,height:a,canvas_id:c,style:(h||&quot;&quot;)});this._obj.appendChild(this._canvas);if(!this._canvas.getContext){if(dhtmlx._isIE){dhtmlx.require(&quot;thirdparty/excanvas/excanvas.js&quot;);G_vmlCanvasManager.init_(document);G_vmlCanvasManager.initElement(this._canvas)}else{dhtmlx.error(&quot;Canvas is not supported in the current browser&quot;)}}return this._canvas},getCanvas:function(c){var a=(this._canvas||this._prepareCanvas()).getContext(c||&quot;2d&quot;);if(!this._webixDevicePixelRatio){this._webixDevicePixelRatio=true;a.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)}return a},_resizeCanvas:function(){if(this._canvas){var a=this._canvas.parentNode.offsetWidth;var c=this._canvas.parentNode.offsetHeight;this._canvas.setAttribute(&quot;width&quot;,a*(window.devicePixelRatio||1));this._canvas.setAttribute(&quot;height&quot;,c*(window.devicePixelRatio||1));this._canvas.style.width=a+&quot;px&quot;;this._canvas.style.height=c+&quot;px&quot;;this._webixDevicePixelRatio=false}},renderText:function(a,m,l,h,c){if(!l){return}var g=dhtmlx.html.create(&quot;DIV&quot;,{&quot;class&quot;:&quot;dhx_canvas_text&quot;+(h?(&quot; &quot;+h):&quot;&quot;),style:&quot;left:&quot;+a+&quot;px; top:&quot;+m+&quot;px;&quot;},l);this._obj.appendChild(g);this._canvas_labels.push(g);if(c){g.style.width=c+&quot;px&quot;}return g},renderTextAt:function(l,q,a,o,h,n,g){var m=this.renderText.call(this,a,o,h,n,g);if(m){if(l){if(l==&quot;middle&quot;){m.style.top=parseInt(o-m.offsetHeight/2,10)+&quot;px&quot;}else{m.style.top=o-m.offsetHeight+&quot;px&quot;}}if(q){if(q==&quot;left&quot;){m.style.left=a-m.offsetWidth+&quot;px&quot;}else{m.style.left=parseInt(a-m.offsetWidth/2,10)+&quot;px&quot;}}}return m},clearCanvas:function(a){var c=[],g;for(g=0;g&lt;this._canvas_labels.length;g++){this._obj.removeChild(this._canvas_labels[g])}this._canvas_labels=[];if(!a&amp;&amp;this._obj._htmlmap){c=this._getMapAreas();while(c.length){c[0].parentNode.removeChild(c[0]);c.splice(0,1)}c=null;if(!this._obj._htmlmap.getElementsByTagName(&quot;AREA&quot;).length){this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap);this._obj._htmlmap=null}}this.getCanvas().clearRect(0,0,this._obj.offsetWidth*(window.devicePixelRatio||1),this._obj.offsetWidth*(window.devicePixelRatio||1))},toggleCanvas:function(){this._toggleCanvas(this._canvas.style.display==&quot;none&quot;)},showCanvas:function(){this._toggleCanvas(true)},hideCanvas:function(){this._toggleCanvas(false)},_toggleCanvas:function(a){var c,g;for(g=0;g&lt;this._canvas_labels.length;g++){this._canvas_labels[g].style.display=(a?&quot;&quot;:&quot;none&quot;)}if(this._obj._htmlmap){c=this._getMapAreas();for(g=0;g&lt;c.length;g++){if(a){c[g].removeAttribute(&quot;disabled&quot;)}else{c[g].setAttribute(&quot;disabled&quot;,&quot;true&quot;)}}}this._canvas.style.display=(a?&quot;&quot;:&quot;none&quot;)},_getMapAreas:function(){var g=[],a,c;a=this._obj._htmlmap.getElementsByTagName(&quot;AREA&quot;);for(c=0;c&lt;a.length;c++){if(a[c].getAttribute(&quot;userdata&quot;)==this._canvas_name){g.push(a[c])}}return g}};dhtmlXChart=function(a){this.name=&quot;Chart&quot;;this.version=&quot;3.0&quot;;if(dhtmlx.assert_enabled()){this._assert()}dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(a,&quot;dhx_chart&quot;);dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);this.data.provideApi(this,true);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.Destruction);dhtmlx.extend(this,dhtmlx.Group);dhtmlx.extend(this,dhtmlx.AutoTooltip);for(var c in dhtmlx.chart){dhtmlx.extend(this,dhtmlx.chart[c])}if(a.preset){this.definePreset(a)}this._parseSettings(a,this.defaults);this._series=[this._settings];this.data.attachEvent(&quot;onStoreUpdated&quot;,dhtmlx.bind(function(){this.ht()},this));this.attachEvent(&quot;onLocateData&quot;,this._switchSerie)};dhtmlXChart.prototype={_id:&quot;dhx_area_id&quot;,on_click:{dhx_chart_legend_item:function(m,n,l){var h=l.getAttribute(&quot;series_id&quot;);if(this.callEvent(&quot;onLegendClick&quot;,[m,h,l])){var g=this._settings;var c=g.legend.values;var a=(c&amp;&amp;(typeof c[h].toggle!=&quot;undefined&quot;))?c[h].toggle:g.legend.toggle;if((typeof h!=&quot;undefined&quot;)&amp;&amp;this._series.length&gt;1){if(a){if(l.className.indexOf(&quot;hidden&quot;)!= -1){this.showSeries(h)}else{this.hideSeries(h)}}}}}},on_dblclick:{},on_mouse_move:{},bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},resize:function(){for(var a in this.canvases){this.canvases[a]._resizeCanvas()}this.ht()},view_setter:function(a){if(!dhtmlx.chart[a]){dhtmlx.error(&quot;Chart type extension is not loaded: &quot;+a)}if(typeof this._settings.offset==&quot;undefined&quot;){this._settings.offset= !(a==&quot;area&quot;||a==&quot;stackedArea&quot;)}if(a==&quot;radar&quot;&amp;&amp; !this._settings.yAxis){this.define(&quot;yAxis&quot;,{})}if(a==&quot;scatter&quot;){if(!this._settings.yAxis){this.define(&quot;yAxis&quot;,{})}if(!this._settings.xAxis){this.define(&quot;xAxis&quot;,{})}}return a},clearCanvas:function(){if(this.canvases&amp;&amp;typeof this.canvases==&quot;object&quot;){for(var a in this.canvases){this.canvases[a].clearCanvas()}}},ht:function(){var g,c,h,l,a;if(!this.callEvent(&quot;onBeforeRender&quot;,[this.data])){return}if(this.canvases&amp;&amp;typeof this.canvases==&quot;object&quot;){for(c in this.canvases){this.canvases[c].clearCanvas()}}else{this.canvases={}}if(this._settings.legend){if(!this.canvases.legend){this.canvases.legend=new dhtmlx.ui.Canvas(this._obj,&quot;legend&quot;)}this._drawLegend(this.data.getRange(),this._obj.offsetWidth)}g=this._getChartBounds(this._obj.offsetWidth,this._obj.offsetHeight);l=new dhtmlx.ui.Map(this._id);a=this._settings;h=this._getChartData();for(c=0;c&lt;this._series.length;c++){this._settings=this._series[c];if(!this.canvases[c]){this.canvases[c]=new dhtmlx.ui.Canvas(this._obj,c,&quot;z-index:&quot;+(2+c))}this[&quot;pvt_render_&quot;+this._settings.view](this.canvases[c].getCanvas(),h,g.start,g.end,c,l)}l.ht(this._obj);this._obj.lastChild.style.zIndex=1000;this._applyBounds(this._obj.lastChild,g);this.callEvent(&quot;onAfterRender&quot;,[]);this._settings=a},_applyBounds:function(g,c){var a={};a.left=c.start.x;a.top=c.start.y;a.width=c.end.x-c.start.x;a.height=c.end.y-c.start.y;for(var h in a){g.style[h]=a[h]+&quot;px&quot;}},_getChartData:function(){var h,n,g,l,m,r,a,o,q,c;l=this.data.getRange();h=(this._settings.view.toLowerCase().indexOf(&quot;barh&quot;)!= -1?&quot;yAxis&quot;:&quot;xAxis&quot;);n=this._settings[h];if(n&amp;&amp;n.units&amp;&amp;(typeof n.units==&quot;object&quot;)){g=n.units;o=[];if(typeof g.start!=&quot;undefined&quot;&amp;&amp;typeof g.end!=&quot;undefined&quot;&amp;&amp;typeof g.next!=&quot;undefined&quot;){a=g.start;while(a&lt;=g.end){o.push(a);a=g.next.call(this,a)}}else{if(Object.prototype.toString.call(g)===&quot;[object Array]&quot;){o=g}}r=[];if(o.length){q=n.value;c={};for(m=0;m&lt;l.length;m++){c[q(l[m])]=m}for(m=0;m&lt;o.length;m++){if(typeof c[o[m]]!=&quot;undefined&quot;){l[c[o[m]]].$unit=o[m];r.push(l[c[o[m]]])}else{r.push({$unit:o[m]})}}}return r}return l},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(a){this.define(&quot;value&quot;,a)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(a){if((typeof(a)!=&quot;function&quot;)&amp;&amp;a&amp;&amp;(a===true)){a=&quot;light&quot;}return a},colormap:{RAINBOW:function(a){var c=Math.floor(this.indexById(a.id)/this.dataCount()*1536);if(c==1536){c-=1}return this._rainbow[Math.floor(c/256)](c%256)}},color_setter:function(a){return this.colormap[a]||dhtmlx.Template.obj_setter(a)},fill_setter:function(a){return((!a||a==0)?false:dhtmlx.Template.obj_setter(a))},definePreset:function(a){this.define(&quot;preset&quot;,a.preset);delete a.preset},preset_setter:function(l){var g,c,h;this.defaults=dhtmlx.extend({},this.defaults);if(typeof dhtmlx.presets.chart[l]==&quot;object&quot;){h=dhtmlx.presets.chart[l];for(g in h){if(typeof h[g]==&quot;object&quot;){if(!this.defaults[g]||typeof this.defaults[g]!=&quot;object&quot;){this.defaults[g]=dhtmlx.extend({},h[g])}else{this.defaults[g]=dhtmlx.extend({},this.defaults[g]);for(c in h[g]){this.defaults[g][c]=h[g][c]}}}else{this.defaults[g]=h[g]}}return l}return false},legend_setter:function(a){if(!a){if(this.legendObj){this.legendObj.innerHTML=&quot;&quot;;this.legendObj=null}return false}if(typeof(a)!=&quot;object&quot;){a={template:a}}this._mergeSettings(a,{width:150,height:18,layout:&quot;y&quot;,align:&quot;left&quot;,valign:&quot;bottom&quot;,template:&quot;&quot;,toggle:(this._settings.view.toLowerCase().indexOf(&quot;stacked&quot;)!= -1?&quot;&quot;:&quot;hide&quot;),marker:{type:&quot;square&quot;,width:15,height:15,radius:3},margin:4,padding:3});a.template=dhtmlx.Template.setter(a.template);return a},defaults:{color:&quot;RAINBOW&quot;,alpha:&quot;1&quot;,label:false,value:&quot;{obj.value}&quot;,padding:{},view:&quot;pie&quot;,lineColor:&quot;#ffffff&quot;,cant:0.5,width:30,labelWidth:100,line:{width:2,color:&quot;#1293f8&quot;},item:{radius:3,borderColor:&quot;#636363&quot;,borderWidth:1,color:&quot;#ffffff&quot;,alpha:1,type:&quot;r&quot;,shadow:false},shadow:true,gradient:false,border:true,labelOffset:20,origin:&quot;auto&quot;},item_setter:function(a){if(typeof(a)!=&quot;object&quot;){a={color:a,borderColor:a}}this._mergeSettings(a,dhtmlx.extend({},this.defaults.item));var g=[&quot;alpha&quot;,&quot;borderColor&quot;,&quot;color&quot;,&quot;radius&quot;];for(var c=0;c&lt;g.length;c++){a[g[c]]=dhtmlx.Template.setter(a[g[c]])}return a},line_setter:function(a){if(typeof(a)!=&quot;object&quot;){a={color:a}}dhtmlx.extend(this.defaults.line,a);a=dhtmlx.extend({},this.defaults.line);a.color=dhtmlx.Template.setter(a.color);return a},padding_setter:function(a){if(typeof(a)!=&quot;object&quot;){a={left:a,right:a,top:a,bottom:a}}this._mergeSettings(a,{left:50,right:20,top:35,bottom:40});return a},xAxis_setter:function(a){if(!a){return false}if(typeof(a)!=&quot;object&quot;){a={template:a}}if(!a.value){a.value=a.template}this._mergeSettings(a,{title:&quot;&quot;,color:&quot;#000000&quot;,lineColor:&quot;#cfcfcf&quot;,template:&quot;{obj}&quot;,value:&quot;{obj}&quot;,lines:true});var c=[&quot;lineColor&quot;,&quot;template&quot;,&quot;lines&quot;,&quot;value&quot;];this._converToTemplate(c,a);this._configXAxis=dhtmlx.extend({},a);return a},yAxis_setter:function(a){this._mergeSettings(a,{title:&quot;&quot;,color:&quot;#000000&quot;,lineColor:&quot;#cfcfcf&quot;,template:&quot;{obj}&quot;,lines:true,bg:&quot;#ffffff&quot;});var c=[&quot;lineColor&quot;,&quot;template&quot;,&quot;lines&quot;,&quot;bg&quot;];this._converToTemplate(c,a);this._configYAxis=dhtmlx.extend({},a);return a},_converToTemplate:function(a,c){for(var g=0;g&lt;a.length;g++){c[a[g]]=dhtmlx.Template.setter(c[a[g]])}},_drawScales:function(l,h,g,n,a,c){var m=0;if(this._settings.yAxis){if(!this.canvases.y){this.canvases.y=new dhtmlx.ui.Canvas(this._obj,&quot;axis_y&quot;)}m=this._drawYAxis(this.canvases.y.getCanvas(),l,h,g,n,a)}if(this._settings.xAxis){if(!this.canvases.x){this.canvases.x=new dhtmlx.ui.Canvas(this._obj,&quot;axis_x&quot;)}this._drawXAxis(this.canvases.x.getCanvas(),l,h,g,c,m)}return m},_drawXAxis:function(v,m,s,r,h,q){var g=s.x-0.5;var u=parseInt((q?q:r.y),10)+0.5;var c=r.x;var n;var a=true;for(var l=0;l&lt;m.length;l++){if(this._settings.offset===true){n=g+h/2+l*h}else{n=(l==m.length-1)?r.x:g+l*h;a= ! !l}n=Math.ceil(n)-0.5;var o=((this._settings.origin!=&quot;auto&quot;)&amp;&amp;(this._settings.view==&quot;bar&quot;)&amp;&amp;(parseFloat(this._settings.value(m[l]))&lt;this._settings.origin));this._drawXAxisLabel(n,u,m[l],a,o);if((this._settings.offset||l)&amp;&amp;this._settings.xAxis.lines.call(this,m[l])){this._drawXAxisLine(v,n,r.y,s.y,m[l])}}this.canvases.x.renderTextAt(true,false,g,r.y+this._settings.padding.bottom-3,this._settings.xAxis.title,&quot;dhx_axis_title_x&quot;,r.x-s.x);this._drawLine(v,g,u,c,u,this._settings.xAxis.color,1);if(!this._settings.xAxis.lines.call(this,{})|| !this._settings.offset){return}this._drawLine(v,c+0.5,r.y,c+0.5,s.y+0.5,this._settings.xAxis.color,0.2)},_drawYAxis:function(x,E,m,l,o,n){var q;var v={};if(!this._settings.yAxis){return}var A=m.x-0.5;var h=l.y;var g=m.y;var w=l.y;if(this._settings.yAxis.step){q=parseFloat(this._settings.yAxis.step)}if(typeof this._configYAxis.step==&quot;undefined&quot;||typeof this._configYAxis.start==&quot;undefined&quot;||typeof this._configYAxis.end==&quot;undefined&quot;){v=this._calculateScale(o,n);o=v.start;n=v.end;q=v.step;this._settings.yAxis.end=n;this._settings.yAxis.start=o}this._setYAxisTitle(m,l);if(q===0){n=o;q=1}var a=(n==o?h-g:(h-g)*q/(n-o));var C=0;for(var y=o;y&lt;=n;y+=q){if(v.fixNum){y=parseFloat((new Number(y)).toFixed(v.fixNum))}var D=Math.floor(h-C*a)+0.5;if(!(y==o&amp;&amp;this._settings.origin==&quot;auto&quot;)&amp;&amp;this._settings.yAxis.lines.call(this,y)){this._drawLine(x,A,D,l.x,D,this._settings.yAxis.lineColor.call(this,y),1)}if(y==this._settings.origin){w=D}var r=y;if(q&lt;1){var s=Math.min(this._log10(q),(o&lt;=0?0:this._log10(o)));var u=Math.pow(10,-s);r=Math.round(y*u)/u;y=r}this.canvases.y.renderText(0,D-5,this._settings.yAxis.template(r.toString()),&quot;dhx_axis_item_y&quot;,m.x-5);C++}this._drawLine(x,A,h+1,A,g,this._settings.yAxis.color,1);return w},_setYAxisTitle:function(g,c){var a=&quot;dhx_axis_title_y&quot;+(dhtmlx._isIE&amp;&amp;dhtmlx._isIE!=9?&quot; dhx_ie_filter&quot;:&quot;&quot;);var h=this.canvases.y.renderTextAt(&quot;middle&quot;,false,0,parseInt((c.y-g.y)/2+g.y,10),this._settings.yAxis.title,a);if(h){h.style.left=(dhtmlx.env.transform?(h.offsetHeight-h.offsetWidth)/2:0)+&quot;px&quot;}},_calculateScale:function(r,c){if(this._settings.origin!=&quot;auto&quot;&amp;&amp;this._settings.origin&lt;r){r=this._settings.origin}var l,h,n;l=((c-r)/8)||1;var g=Math.floor(this._log10(l));var a=Math.pow(10,g);var m=l/a;m=(m&gt;5?10:5);l=parseInt(m,10)*a;if(l&gt;Math.abs(r)){h=(r&lt;0? -l:0)}else{var s=Math.abs(r);var q=Math.floor(this._log10(s));var o=s/Math.pow(10,q);h=Math.ceil(o*10)/10*Math.pow(10,q)-l;if(s&gt;1&amp;&amp;l&gt;0.1){h=Math.ceil(h)}while(r&lt;0?h&lt;=r:h&gt;=r){h-=l}if(r&lt;0){h= -h-2*l}}n=h;while(n&lt;c){n+=l;n=parseFloat((new Number(n)).toFixed(Math.abs(g)))}return{start:h,end:n,step:l,fixNum:Math.abs(g)}},_getLimits:function(c,n){var o,m;var l=((arguments.length&amp;&amp;c==&quot;h&quot;)?this._configXAxis:this._configYAxis);n=n||&quot;value&quot;;if(l&amp;&amp;(typeof l.end!=&quot;undefined&quot;)&amp;&amp;(typeof l.start!=&quot;undefined&quot;)&amp;&amp;l.step){o=parseFloat(l.end);m=parseFloat(l.start)}else{o=this.max(this._series[0][n]);m=(l&amp;&amp;(typeof l.start!=&quot;undefined&quot;))?parseFloat(l.start):this.min(this._series[0][n]);if(this._series.length&gt;1){for(var h=1;h&lt;this._series.length;h++){var a=this.max(this._series[h][n]);var g=this.min(this._series[h][n]);if(a&gt;o){o=a}if(g&lt;m){m=g}}}}return{max:o,min:m}},_log10:function(c){var a=&quot;log&quot;;return Math.floor((Math[a](c)/Math.LN10))},_drawXAxisLabel:function(c,m,l,a,h){if(!this._settings.xAxis){return}var g=this.canvases.x.renderTextAt(h,a,c,m-(h?2:0),this._settings.xAxis.template(l));if(g){g.className+=&quot; dhx_axis_item_x&quot;}},_drawXAxisLine:function(c,a,h,g,l){if(!this._settings.xAxis|| !this._settings.xAxis.lines){return}this._drawLine(c,a,h,a,g,this._settings.xAxis.lineColor.call(this,l),1)},_drawLine:function(a,h,n,g,l,c,m){a.strokeStyle=c;a.lineWidth=m;a.beginPath();a.moveTo(h,n);a.lineTo(g,l);a.stroke();a.lineWidth=1},_getRelativeValue:function(h,l){var g,a;var c=1;if(l!=h){g=l-h}else{g=h}return[g,c]},_rainbow:[function(a){return &quot;#FF&quot;+dhtmlx.math.toHex(a/2,2)+&quot;00&quot;},function(a){return &quot;#FF&quot;+dhtmlx.math.toHex(a/2+128,2)+&quot;00&quot;},function(a){return &quot;#&quot;+dhtmlx.math.toHex(255-a,2)+&quot;FF00&quot;},function(a){return &quot;#00FF&quot;+dhtmlx.math.toHex(a,2)},function(a){return &quot;#00&quot;+dhtmlx.math.toHex(255-a,2)+&quot;FF&quot;},function(a){return &quot;#&quot;+dhtmlx.math.toHex(a,2)+&quot;00FF&quot;}],addSeries:function(c){var a=this._settings;this._settings=dhtmlx.extend({},a);this._parseSettings(c,{});this._series.push(this._settings);this._settings=a},_switchSerie:function(h,a){var g;this._active_serie=a.getAttribute(&quot;userdata&quot;);if(!this._series[this._active_serie]){return}for(var c=0;c&lt;this._series.length;c++){g=this._series[c].tooltip;if(g){g.disable()}}if(!a.getAttribute(&quot;disabled&quot;)){g=this._series[this._active_serie].tooltip;if(g){g.enable()}}},hideSeries:function(a){this.canvases[a].hideCanvas();if(this._settings.legend.values&amp;&amp;this._settings.legend.values[a]){this._settings.legend.values[a].$hidden=true}this._drawLegend()},showSeries:function(a){this.canvases[a].showCanvas();if(this._settings.legend.values&amp;&amp;this._settings.legend.values[a]){delete this._settings.legend.values[a].$hidden}this._drawLegend()},_setBorderStyles:function(a,c){var h,g;g=dhtmlx.math.toRgb(c);h=dhtmlx.math.rgbToHsv(g[0],g[1],g[2]);h[2]/=2;c=&quot;rgb(&quot;+dhtmlx.math.hsvToRgb(h[0],h[1],h[2])+&quot;)&quot;;a.strokeStyle=c;if(a.globalAlpha==1){a.globalAlpha=0.9}},_drawLegend:function(h,c){var l,r,A,s,m,u,a,o=0,n=0,w,q,g,v;h=h||[];c=c||this._obj.offsetWidth;w=this.canvases.legend.getCanvas();r=this._settings.legend;a=(this._settings.legend.layout!=&quot;x&quot;?&quot;width:&quot;+r.width+&quot;px&quot;:&quot;&quot;);if(this.legendObj){this.legendObj.innerHTML=&quot;&quot;;this.legendObj.parentNode.removeChild(this.legendObj)}this.canvases.legend.clearCanvas(true);A=dhtmlx.html.create(&quot;DIV&quot;,{&quot;class&quot;:&quot;dhx_chart_legend&quot;,style:&quot;left:&quot;+o+&quot;px; top:&quot;+n+&quot;px;&quot;+a},&quot;&quot;);if(r.padding){A.style.padding=r.padding+&quot;px&quot;}this.legendObj=A;this._obj.appendChild(A);m=[];if(!r.values){for(l=0;l&lt;h.length;l++){m.push(this._drawLegendText(A,r.template(h[l])))}}else{for(l=0;l&lt;r.values.length;l++){m.push(this._drawLegendText(A,r.values[l].text,(typeof r.values[l].id!=&quot;undefined&quot;?typeof r.values[l].id:l),r.values[l].$hidden))}}u=A.offsetWidth;s=A.offsetHeight;if(u&lt;this._obj.offsetWidth){if(r.layout==&quot;x&quot;&amp;&amp;r.align==&quot;center&quot;){o=(this._obj.offsetWidth-u)/2}if(r.align==&quot;right&quot;){o=this._obj.offsetWidth-u}if(r.margin&amp;&amp;r.align!=&quot;center&quot;){o+=(r.align==&quot;left&quot;?1: -1)*r.margin}}if(s&lt;this._obj.offsetHeight){if(r.valign==&quot;middle&quot;&amp;&amp;r.align!=&quot;center&quot;&amp;&amp;r.layout!=&quot;x&quot;){n=(this._obj.offsetHeight-s)/2}else{if(r.valign==&quot;bottom&quot;){n=this._obj.offsetHeight-s}}if(r.margin&amp;&amp;r.valign!=&quot;middle&quot;){n+=(r.valign==&quot;top&quot;?1: -1)*r.margin}}A.style.left=o+&quot;px&quot;;A.style.top=n+&quot;px&quot;;w.save();for(l=0;l&lt;m.length;l++){v=m[l];if(r.values&amp;&amp;r.values[l].$hidden){g=true;q=(r.values[l].disableColor?r.values[l].disableColor:&quot;#d9d9d9&quot;)}else{g=false;q=(r.values?r.values[l].color:this._settings.color.call(this,h[l]))}this._drawLegendMarker(w,v.offsetLeft+o,v.offsetTop+n,q,v.offsetHeight,g,l)}w.restore();m=null},_drawLegendText:function(a,l,c,h){var g=&quot;&quot;;if(this._settings.legend.layout==&quot;x&quot;){g=&quot;float:left;&quot;}var m=dhtmlx.html.create(&quot;DIV&quot;,{style:g+&quot;padding-left:&quot;+(10+this._settings.legend.marker.width)+&quot;px&quot;,&quot;class&quot;:&quot;dhx_chart_legend_item&quot;+(h?&quot; hidden&quot;:&quot;&quot;)},l);if(arguments.length&gt;2){m.setAttribute(&quot;series_id&quot;,c)}a.appendChild(m);return m},_drawLegendMarker:function(C,u,s,l,A,m,o){var c=[];var n=this._settings.legend.marker;var w=this._settings.legend.values;var r=(w&amp;&amp;w[o].markerType?w[o].markerType:n.type);if(l){C.fillStyle=l;C.strokeStyle=this._getDarkenColor(l,0.75)}C.beginPath();if(r==&quot;round&quot;|| !n.radius){C.lineWidth=n.height;C.lineCap=r;u+=C.lineWidth/2+5;s+=A/2;C.moveTo(u,s);var a=u+n.width-n.height+1;C.lineTo(a,s)}else{if(r==&quot;item&quot;){if(this._settings.line&amp;&amp;this._settings.view!=&quot;scatter&quot;&amp;&amp; !this._settings.disableLines){C.beginPath();C.lineWidth=this._series[o].line.width;C.strokeStyle=m?l:this._series[o].line.color.call(this,{});var g=u+5;var v=s+A/2;C.moveTo(g,v);var a=g+n.width;C.lineTo(a,v);C.stroke()}var h=this._series[o].item;var q=parseInt(h.radius.call(this,{}),10)||0;if(q){C.beginPath();if(m){C.lineWidth=h.borderWidth;C.strokeStyle=l;C.fillStyle=l}else{C.lineWidth=h.borderWidth;C.fillStyle=h.color.call(this,{});C.strokeStyle=h.borderColor.call(this,{});C.globalAlpha=h.alpha.call(this,{})}C.beginPath();u+=n.width/2+5;s+=A/2;this._strokeChartItem(C,u,s,q+1,h.type);C.fill();C.stroke()}C.globalAlpha=1}else{C.lineWidth=1;u+=5;s+=parseInt(A/2-n.height/2,10);c=[[u+n.radius,s+n.radius,n.radius,Math.PI,3*Math.PI/2,false],[u+n.width-n.radius,s],[u+n.width-n.radius,s+n.radius,n.radius,-Math.PI/2,0,false],[u+n.width,s+n.height-n.radius],[u+n.width-n.radius,s+n.height-n.radius,n.radius,0,Math.PI/2,false],[u+n.radius,s+n.height],[u+n.radius,s+n.height-n.radius,n.radius,Math.PI/2,Math.PI,false],[u,s+n.radius]];this._path(C,c)}}C.stroke();C.fill()},_getDarkenColor:function(a,h){var g,c;c=dhtmlx.math.toRgb(a);g=dhtmlx.math.rgbToHsv(c[0],c[1],c[2]);g[2]=g[2]*h;return &quot;rgb(&quot;+dhtmlx.math.hsvToRgb(g[0],g[1],g[2])+&quot;)&quot;},_getChartBounds:function(a,n){var q,g,o,c;q=this._settings.padding.left;g=this._settings.padding.top;o=a-this._settings.padding.right;c=n-this._settings.padding.bottom;if(this._settings.legend){var l=this._settings.legend;var m=this._settings.legend.width;var h=this._settings.legend.height;if(l.layout==&quot;x&quot;){if(l.valign==&quot;center&quot;){if(l.align==&quot;right&quot;){o-=m}else{if(l.align==&quot;left&quot;){q+=m}}}else{if(l.valign==&quot;bottom&quot;){c-=h}else{g+=h}}}else{if(l.align==&quot;right&quot;){o-=m}else{if(l.align==&quot;left&quot;){q+=m}}}}return{start:{x:q,y:g},end:{x:o,y:c}}},_getStackedLimits:function(l){var c,a,m,h,g;if(this._settings.yAxis&amp;&amp;(typeof this._settings.yAxis.end!=&quot;undefined&quot;)&amp;&amp;(typeof this._settings.yAxis.start!=&quot;undefined&quot;)&amp;&amp;this._settings.yAxis.step){m=parseFloat(this._settings.yAxis.end);h=parseFloat(this._settings.yAxis.start)}else{for(c=0;c&lt;l.length;c++){l[c].$sum=0;l[c].$min=Infinity;for(a=0;a&lt;this._series.length;a++){g=parseFloat(this._series[a].value(l[c])||0);if(isNaN(g)){continue}if(this._series[a].view.toLowerCase().indexOf(&quot;stacked&quot;)!= -1){l[c].$sum+=g}if(g&lt;l[c].$min){l[c].$min=g}}}m= -Infinity;h=Infinity;for(c=0;c&lt;l.length;c++){if(l[c].$sum&gt;m){m=l[c].$sum}if(l[c].$min&lt;h){h=l[c].$min}}if(h&gt;0){h=0}}return{max:m,min:h}},_setBarGradient:function(w,c,s,a,q,o,h,g){var r,l,n,m,v,u;if(o==&quot;light&quot;){if(g==&quot;x&quot;){r=w.createLinearGradient(c,s,a,s)}else{r=w.createLinearGradient(c,s,c,q)}u=[[0,&quot;#FFFFFF&quot;],[0.9,h],[1,h]];l=2}else{if(o==&quot;falling&quot;||o==&quot;rising&quot;){if(g==&quot;x&quot;){r=w.createLinearGradient(c,s,a,s)}else{r=w.createLinearGradient(c,s,c,q)}n=dhtmlx.math.toRgb(h);m=dhtmlx.math.rgbToHsv(n[0],n[1],n[2]);m[1]*=1/2;v=&quot;rgb(&quot;+dhtmlx.math.hsvToRgb(m[0],m[1],m[2])+&quot;)&quot;;if(o==&quot;falling&quot;){u=[[0,v],[0.7,h],[1,h]]}else{if(o==&quot;rising&quot;){u=[[0,h],[0.3,h],[1,v]]}}l=0}else{w.globalAlpha=0.37;l=0;if(g==&quot;x&quot;){r=w.createLinearGradient(c,q,c,s)}else{r=w.createLinearGradient(c,s,a,s)}u=[[0,&quot;#9d9d9d&quot;],[0.3,&quot;#e8e8e8&quot;],[0.45,&quot;#ffffff&quot;],[0.55,&quot;#ffffff&quot;],[0.7,&quot;#e8e8e8&quot;],[1,&quot;#9d9d9d&quot;]]}}this._gradient(r,u);return{gradient:r,offset:l}},_getPositionByAngle:function(g,c,l,h){g*=(-1);c=c+Math.cos(g)*h;l=l-Math.sin(g)*h;return{x:c,y:l}},_gradient:function(g,c){for(var a=0;a&lt;c.length;a++){g.addColorStop(c[a][0],c[a][1])}},_path:function(a,g){var c,h;for(c=0;c&lt;g.length;c++){h=(c?&quot;lineTo&quot;:&quot;moveTo&quot;);if(g[c].length&gt;2){h=&quot;arc&quot;}a[h].apply(a,g[c])}},_circle:function(c,a,h,g){c.arc(a,h,g,Math.PI*2,true)},_addMapRect:function(h,l,a,g,c){h.addRect(l,[a[0].x-g.x,a[0].y-g.y,a[1].x-g.x,a[1].y-g.y],c)}};dhtmlx.compat(&quot;layout&quot;);dhtmlx.ui.pager=function(a){this.name=&quot;Pager&quot;;if(dhtmlx.assert_enabled()){this._assert()}dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(a,&quot;dhx_pager&quot;);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.SingleRender);dhtmlx.extend(this,dhtmlx.MouseEvents);this._parseSettings(a,{size:10,page: -1,group:5,count:0,type:&quot;default&quot;});this.data=this._settings;this.refresh()};dhtmlx.ui.pager.prototype={_id:&quot;dhx_p_id&quot;,on_click:{dhx_pager_item:function(a,c){this.select(c)}},select:function(a){switch(a){case &quot;next&quot;:a=this._settings.page+1;break;case &quot;prev&quot;:a=this._settings.page-1;break;case &quot;first&quot;:a=0;break;case &quot;last&quot;:a=this._settings.limit-1;break;default:break}if(a&lt;0){a=0}if(a&gt;=this.data.limit){a=this.data.limit-1}if(this.callEvent(&quot;onBeforePageChange&quot;,[this._settings.page,a])){this.data.page=a*1;this.refresh();this.callEvent(&quot;onAfterPageChange&quot;,[a])}},types:{&quot;default&quot;:{template:dhtmlx.Template.fromHTML(&quot;{common.pages()}&quot;),pages:function(g){var c=&quot;&quot;;if(g.page== -1){return &quot;&quot;}g.min=g.page-Math.round((g.group-1)/2);g.max=g.min+g.group-1;if(g.min&lt;0){g.max+=g.min*(-1);g.min=0}if(g.max&gt;=g.limit){g.min-=Math.min(g.min,g.max-g.limit+1);g.max=g.limit-1}for(var a=(g.min||0);a&lt;=g.max;a++){c+=this.button({id:a,index:(a+1),selected:(a==g.page?&quot;_selected&quot;:&quot;&quot;)})}return c},page:function(a){return a.page+1},first:function(){return this.button({id:&quot;first&quot;,index:&quot; &lt;&lt; &quot;,selected:&quot;&quot;})},last:function(){return this.button({id:&quot;last&quot;,index:&quot; &gt;&gt; &quot;,selected:&quot;&quot;})},prev:function(){return this.button({id:&quot;prev&quot;,index:&quot;&lt;&quot;,selected:&quot;&quot;})},next:function(){return this.button({id:&quot;next&quot;,index:&quot;&gt;&quot;,selected:&quot;&quot;})},button:dhtmlx.Template.fromHTML(&quot;<DIV class="dhx_pager_item{obj.selected}">{obj.index}</DIV>&quot;)}},refresh:function(){var a=this._settings;a.limit=Math.ceil(a.count/a.size);if(a.limit&amp;&amp;a.limit!=a.old_limit){a.page=Math.min(a.limit-1,a.page)}var c=a.page;if(c!= -1&amp;&amp;(c!=a.old_page)||(a.limit!=a.old_limit)){this.ht();this.callEvent(&quot;onRefresh&quot;,[]);a.old_limit=a.limit;a.old_page=a.page}},template_item_start:dhtmlx.Template.fromHTML(&quot;<DIV>&quot;),template_item_end:dhtmlx.Template.fromHTML(&quot;</DIV>&quot;)};dhtmlx.DataProcessor={_dp_init:function(c){var a=&quot;_methods&quot;;c[a]=[&quot;setItemStyle&quot;,&quot;&quot;,&quot;changeId&quot;,&quot;remove&quot;];this.attachEvent(&quot;onAfterAdd&quot;,function(g){c.setUpdated(g,true,&quot;inserted&quot;)});this.data.attachEvent(&quot;onStoreLoad&quot;,dhtmlx.bind(function(h,g){if(h.getUserData){h.getUserData(g,this._userdata)}},this));this.attachEvent(&quot;onBeforeDelete&quot;,function(h){if(c._silent_mode){return true}var g=c.YA(h);if(g==&quot;inserted&quot;){c.setUpdated(h,false);return true}if(g==&quot;deleted&quot;){return false}if(g==&quot;true_deleted&quot;){return true}c.setUpdated(h,true,&quot;deleted&quot;);return false});this.attachEvent(&quot;onAfterEditStop&quot;,function(g){c.setUpdated(g,true,&quot;updated&quot;)});this.attachEvent(&quot;onBindUpdate&quot;,function(g){window.setTimeout(function(){c.setUpdated(g.id,true,&quot;updated&quot;)},1)});a=&quot;fD&quot;;c[a]=function(n,g){var l=this.obj.data.get(n);var m={};for(var h in l){if(h.indexOf(&quot;_&quot;)===0){continue}m[h]=l[h]}return m};a=&quot;_clearUpdateFlag&quot;;c[a]=function(){};this._userdata={};c.attachEvent(&quot;insertCallback&quot;,this._dp_callback);c.attachEvent(&quot;updateCallback&quot;,this._dp_callback);c.attachEvent(&quot;deleteCallback&quot;,function(g,h){this.obj.setUserData(h,this.action_param,&quot;true_deleted&quot;);this.obj.remove(h)});dhtmlx.compat(&quot;dataProcessor&quot;,c)},_dp_callback:function(a,c){this.obj.data.set(c,dhtmlx.DataDriver.xml.getDetails(a.firstChild));this.obj.data.refresh(c)},setItemStyle:function(g,a){var c=this._locateHTML(g);if(c){c.style.cssText+=&quot;;&quot;+a}},changeId:function(c,a){this.data.changeId(c,a);this.refresh()},setUserData:function(g,a,c){if(g){this.data.get(g)[a]=c}else{this._userdata[a]=c}},getUserData:function(c,a){return c?this.data.get(c)[a]:this._userdata[a]}};(function(){var a=&quot;_dp_init&quot;;dhtmlx.DataProcessor[a]=dhtmlx.DataProcessor._dp_init})();dhtmlx.compat.dnd=function(){if(window.dhtmlDragAndDropObject){var o=&quot;_dragged&quot;;var h=dhtmlDragAndDropObject.prototype.eq;dhtmlDragAndDropObject.prototype.eq=function(r,s,q){h.apply(this,arguments);if(!q){var u=dhtmlx.DragControl._drag_context=dhtmlx.DragControl._drag_context||{};if(!u.from){u.from=this.aM}dhtmlx.DragControl._checkLand(r,s,true)}};var c=dhtmlDragAndDropObject.prototype.dc;dhtmlDragAndDropObject.prototype.dc=function(s,q,r){if(!r){if(dhtmlx.DragControl._last){dhtmlx.DragControl._active=n.bh;dhtmlx.DragControl._stopDrag(s,true)}}c.apply(this,arguments)};var n=new dhtmlDragAndDropObject();var l=dhtmlx.DragControl._startDrag;dhtmlx.DragControl._startDrag=function(){l.apply(this,arguments);var u=dhtmlx.DragControl._drag_context;if(!u){return}var s=[];var r=[];for(var q=0;q&lt;u.source.length;q++){s[q]={idd:u.source[q]};r.push(u.source[q])}n.bh={parentNode:{},parentObject:{idd:s,id:(r.length==1?r[0]:r),treeNod:{object:u.from}}};n.bh.parentObject.treeNod[o]=s;n.aM=u.from};var m=dhtmlx.DragControl._checkLand;dhtmlx.DragControl._checkLand=function(r,s,q){m.apply(this,arguments);if(!this._last&amp;&amp; !q){r=n.eq(r,s,true)}};var a=dhtmlx.DragControl._stopDrag;dhtmlx.DragControl._stopDrag=function(r,q){a.apply(this,arguments);if(n.aG&amp;&amp; !q){n.dc(r,false,true)}};var g=dhtmlx.DragControl.getMaster;dhtmlx.DragControl.getMaster=function(r){var s=null;if(r){s=g.apply(this,arguments)}if(!s){s=n.aM;var u=[];var v=s[o];for(var q=0;q&lt;v.length;q++){u.push(v[q].idd||v[q].id)}dhtmlx.DragControl._drag_context.source=u}return s}}};dhtmlx.DataMove={ahY:function(){dhtmlx.assert(this.data,&quot;DataMove :: Component doesn't have DataStore&quot;)},copy:function(c,l,a,h){var g=this.get(c);if(!g){dhtmlx.log(&quot;Warning&quot;,&quot;Incorrect ID in DataMove::copy&quot;);return}if(a){dhtmlx.assert(a.externalData,&quot;DataMove :: External object doesn't support operation&quot;);g=a.externalData(g)}a=a||this;return a.add(a.externalData(g,h),l)},move:function(g,n,c,m){if(g instanceof Array){for(var h=0;h&lt;g.length;h++){var a=(c||this).indexById(this.move(g[h],n,c,dhtmlx.uid()));if(g[h+1]){n=a+(this.indexById(g[h+1])&lt;a?0:1)}}return}zX=g;if(n&lt;0){dhtmlx.log(&quot;Info&quot;,&quot;DataMove::move - moving outside of bounds is ignored&quot;);return}var l=this.get(g);if(!l){dhtmlx.log(&quot;Warning&quot;,&quot;Incorrect ID in DataMove::move&quot;);return}if(!c||c==this){this.data.move(this.indexById(g),n)}else{dhtmlx.assert(c.externalData,&quot;DataMove :: External object doesn't support operation&quot;);zX=c.add(c.externalData(l,m),n);this.remove(g)}return zX},moveUp:function(c,a){return this.move(c,this.indexById(c)-(a||1))},moveDown:function(c,a){return this.moveUp(c,(a||1)* -1)},moveTop:function(a){return this.move(a,0)},moveBottom:function(a){return this.move(a,this.data.dataCount()-1)},externalData:function(a,g){var c=dhtmlx.extend({},a);c.id=g||dhtmlx.uid();c.$selected=c.$template=null;return c}};dhtmlx.DragControl={_drag_masters:dhtmlx.toArray([&quot;dummy&quot;]),addDrop:function(c,g,a){c=dhtmlx.toNode(c);c.dhx_drop=this._getCtrl(g);if(a){c.dhx_master=true}},_getCtrl:function(c){c=c||dhtmlx.DragControl;var a=this._drag_masters.find(c);if(a&lt;0){a=this._drag_masters.length;this._drag_masters.push(c)}return a},addDrag:function(a,c){a=dhtmlx.toNode(a);a.dhx_drag=this._getCtrl(c);dhtmlx.event(a,&quot;mousedown&quot;,this._preStart,a)},_preStart:function(a){if(dhtmlx.DragControl._active){dhtmlx.DragControl._preStartFalse();dhtmlx.DragControl.destroyDrag()}dhtmlx.DragControl._active=this;dhtmlx.DragControl._start_pos={x:a.pageX,y:a.pageY};dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,&quot;mousemove&quot;,dhtmlx.DragControl._startDrag);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,&quot;mouseup&quot;,dhtmlx.DragControl._preStartFalse);dhtmlx.DragControl._dhx_drag_sc=dhtmlx.event(this,&quot;scroll&quot;,dhtmlx.DragControl._preStartFalse);a.cancelBubble=true;return false},_preStartFalse:function(a){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu);dhtmlx.DragControl._dhx_drag_sc=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_sc)},_startDrag:function(a){var c={x:a.pageX,y:a.pageY};if(Math.abs(c.x-dhtmlx.DragControl._start_pos.x)&lt;5&amp;&amp;Math.abs(c.y-dhtmlx.DragControl._start_pos.y)&lt;5){return}dhtmlx.DragControl._preStartFalse();if(!dhtmlx.DragControl.createDrag(a)){return}dhtmlx.DragControl.sendSignal(&quot;start&quot;);dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,&quot;mousemove&quot;,dhtmlx.DragControl._moveDrag);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,&quot;mouseup&quot;,dhtmlx.DragControl._stopDrag);dhtmlx.DragControl._moveDrag(a)},_stopDrag:function(a){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu);if(dhtmlx.DragControl._last){dhtmlx.DragControl.onDrop(dhtmlx.DragControl._active,dhtmlx.DragControl._last,this._landing,a);dhtmlx.DragControl.onDragOut(dhtmlx.DragControl._active,dhtmlx.DragControl._last,null,a)}dhtmlx.DragControl.destroyDrag();dhtmlx.DragControl.sendSignal(&quot;stop&quot;)},_moveDrag:function(a){var c=dhtmlx.html.pos(a);dhtmlx.DragControl.gv.style.top=c.y+dhtmlx.DragControl.top+&quot;px&quot;;dhtmlx.DragControl.gv.style.left=c.x+dhtmlx.DragControl.left+&quot;px&quot;;if(dhtmlx.DragControl._skip){dhtmlx.DragControl._skip=false}else{dhtmlx.DragControl._checkLand((a.srcElement||a.target),a)}a.cancelBubble=true;return false},_checkLand:function(a,c){while(a&amp;&amp;a.tagName!=&quot;BODY&quot;){if(a.dhx_drop){if(this._last&amp;&amp;(this._last!=a||a.dhx_master)){this.onDragOut(this._active,this._last,a,c)}if(!this._last||this._last!=a||a.dhx_master){this._last=null;this._landing=this.onDragIn(dhtmlx.DragControl._active,a,c);if(this._landing){this._last=a}return}return}a=a.parentNode}if(this._last){this._last=this._landing=this.onDragOut(this._active,this._last,null,c)}},sendSignal:function(a){dhtmlx.DragControl.active=(a==&quot;start&quot;)},getMaster:function(a){return this._drag_masters[a.dhx_drag||a.dhx_drop]},getContext:function(a){return this._drag_context},createDrag:function(l){var g=dhtmlx.DragControl._active;var h=this._drag_masters[g.dhx_drag];var c;if(h.onDragCreate){c=h.onDragCreate(g,l);c.style.position=&quot;absolute&quot;;c.style.zIndex=dhtmlx.zIndex.drag;c.onmousemove=dhtmlx.DragControl._skip_mark}else{var m=dhtmlx.DragControl.onDrag(g,l);if(!m){return false}var c=document.createElement(&quot;DIV&quot;);c.innerHTML=m;c.className=&quot;dhx_drag_zone&quot;;c.onmousemove=dhtmlx.DragControl._skip_mark;document.body.appendChild(c)}dhtmlx.DragControl.gv=c;return true},_skip_mark:function(){dhtmlx.DragControl._skip=true},destroyDrag:function(){var c=dhtmlx.DragControl._active;var g=this._drag_masters[c.dhx_drag];if(g&amp;&amp;g.onDragDestroy){g.onDragDestroy(c,dhtmlx.DragControl.gv)}else{dhtmlx.html.remove(dhtmlx.DragControl.gv)}dhtmlx.DragControl._landing=dhtmlx.DragControl._active=dhtmlx.DragControl._last=dhtmlx.DragControl.gv=null},top:5,left:5,onDragIn:function(g,c,h){var a=this._drag_masters[c.dhx_drop];if(a.onDragIn&amp;&amp;a!=this){return a.onDragIn(g,c,h)}c.className=c.className+&quot; dhx_drop_zone&quot;;return c},onDragOut:function(g,c,l,h){var a=this._drag_masters[c.dhx_drop];if(a.onDragOut&amp;&amp;a!=this){return a.onDragOut(g,c,l,h)}c.className=c.className.replace(&quot;dhx_drop_zone&quot;,&quot;&quot;);return null},onDrop:function(g,c,l,h){var a=this._drag_masters[c.dhx_drop];dhtmlx.DragControl._drag_context.from=dhtmlx.DragControl.getMaster(g);if(a.onDrop&amp;&amp;a!=this){return a.onDrop(g,c,l,h)}c.appendChild(g)},onDrag:function(c,g){var a=this._drag_masters[c.dhx_drag];if(a.onDrag&amp;&amp;a!=this){return a.onDrag(c,g)}dhtmlx.DragControl._drag_context={source:c,from:c};return &quot;<DIV style="&quot;+c.style.cssText+&quot;">&quot;+c.innerHTML+&quot;</DIV>&quot;}};dhtmlx.DragItem={ahY:function(){dhtmlx.assert(this.move,&quot;DragItem :: Component doesn't have DataMove interface&quot;);dhtmlx.assert(this.locate,&quot;DragItem :: Component doesn't have RenderStack interface&quot;);dhtmlx.assert(dhtmlx.DragControl,&quot;DragItem :: DragControl is not included&quot;);if(!this._settings||this._settings.drag){dhtmlx.DragItem._initHandlers(this)}else{if(this._settings){this.drag_setter=function(a){if(a){this._initHandlers(this);delete this.drag_setter}return a}}}if(this.dragMarker){this.attachEvent(&quot;onBeforeDragIn&quot;,this.dragMarker);this.attachEvent(&quot;onDragOut&quot;,this.dragMarker)}},_initHandlers:function(a){dhtmlx.DragControl.addDrop(a._obj,a,true);dhtmlx.DragControl.addDrag(a._obj,a)},onDragIn:function(h,g,l){var n=this.locate(l)||null;var c=dhtmlx.DragControl._drag_context;var m=dhtmlx.DragControl.getMaster(h);var a=(this._locateHTML(n)||this._obj);if(a==dhtmlx.DragControl._landing){return a}c.target=n;c.to=m;if(!this.callEvent(&quot;onBeforeDragIn&quot;,[c,l])){c.id=null;return null}dhtmlx.html.addCss(a,&quot;dhx_drag_over&quot;);return a},onDragOut:function(h,g,o,l){var m=this.locate(l)||null;if(o!=this._dataobj){m=null}var c=(this._locateHTML(m)||(o?dhtmlx.DragControl.getMaster(o)._obj:window.undefined));if(c==dhtmlx.DragControl._landing){return null}var a=dhtmlx.DragControl._drag_context;dhtmlx.html.removeCss(dhtmlx.DragControl._landing,&quot;dhx_drag_over&quot;);a.target=a.to=null;this.callEvent(&quot;onDragOut&quot;,[a,l]);return null},onDrop:function(g,c,l,h){var a=dhtmlx.DragControl._drag_context;a.to=this;a.index=a.target?this.indexById(a.target):this.dataCount();a.oO=dhtmlx.uid();if(!this.callEvent(&quot;onBeforeDrop&quot;,[a,h])){return}if(a.from==a.to){this.move(a.source,a.index)}else{if(a.from){a.from.move(a.source,a.index,a.to,a.oO)}else{dhtmlx.error(&quot;Unsopported d-n-d combination&quot;)}}this.callEvent(&quot;onAfterDrop&quot;,[a,h])},onDrag:function(g,l){var m=this.locate(l);var h=[m];if(m){if(this.getSelected){var c=this.getSelected();if(dhtmlx.PowerArray.find.call(c,m)!= -1){h=c}}var a=dhtmlx.DragControl._drag_context={source:h,start:m};a.from=this;if(this.callEvent(&quot;onBeforeDrag&quot;,[a,l])){return a.html||this._toHTML(this.get(m))}}return null}};dhtmlx.EditAbility={ahY:function(a){this._edit_id=null;this._edit_bind=null;dhtmlx.assert(this.data,&quot;EditAbility :: Component doesn't have DataStore&quot;);dhtmlx.assert(this._locateHTML,&quot;EditAbility :: Component doesn't have RenderStack&quot;);this.attachEvent(&quot;onEditKeyPress&quot;,function(g,h,c){if(g==13&amp;&amp; !c){this.xS()}else{if(g==27){this.xS(true)}}});this.attachEvent(&quot;onBeforeRender&quot;,function(){this.xS()})},isEdit:function(){return this._edit_id},edit:function(c){if(this.xS(false,c)){if(!this.callEvent(&quot;onBeforeEditStart&quot;,[c])){return}var a=this.data.get(c);if(a.$template){return}a.$template=&quot;edit&quot;;this.data.refresh(c);this._edit_id=c;this._save_binding(c);this._edit_bind(true,a);this.callEvent(&quot;onAfterEditStart&quot;,[c])}},xS:function(g,l){if(!this._edit_id){return true}if(this._edit_id==l){return false}var a={};if(!g){this._edit_bind(false,a)}else{a=null}if(!this.callEvent(&quot;onBeforeEditStop&quot;,[this._edit_id,a])){return false}var c=this.data.get(this._edit_id);c.$template=null;if(!g){this._edit_bind(false,c)}var h=this._edit_id;this._edit_bind=this._edit_id=null;this.data.refresh(h);this.callEvent(&quot;onAfterEditStop&quot;,[h,a]);return true},_save_binding:function(o){var a=this._locateHTML(o);var g=&quot;&quot;;var m=&quot;&quot;;var l=[];if(a){var h=a.getElementsByTagName(&quot;*&quot;);var n=&quot;&quot;;for(var c=0;c&lt;h.length;c++){if(h[c].nodeType==1&amp;&amp;(n=h[c].getAttribute(&quot;bind&quot;))){g+=&quot;els[&quot;+l.length+&quot;].value=&quot;+n+&quot;;&quot;;m+=n+&quot;=els[&quot;+l.length+&quot;].value;&quot;;l.push(h[c]);h[c].className+=&quot; dhx_allow_selection&quot;;h[c].onselectstart=this._block_native}}h=null}g=Function(&quot;obj&quot;,&quot;els&quot;,g);m=Function(&quot;obj&quot;,&quot;els&quot;,m);this._edit_bind=function(r,q){if(r){g(q,l);if(l.length&amp;&amp;l[0].select){l[0].select()}}else{m(q,l)}}},_block_native:function(a){(a||event).cancelBubble=true;return true}};dhtmlx.SelectionModel={ahY:function(){this._selected=dhtmlx.toArray();dhtmlx.assert(this.data,&quot;SelectionModel :: Component doesn't have DataStore&quot;);this.data.attachEvent(&quot;onStoreUpdated&quot;,dhtmlx.bind(this._data_updated,this));this.data.attachEvent(&quot;onStoreLoad&quot;,dhtmlx.bind(this._data_loaded,this));this.data.attachEvent(&quot;onAfterFilter&quot;,dhtmlx.bind(this._data_filtered,this));this.data.attachEvent(&quot;onIdChange&quot;,dhtmlx.bind(this._id_changed,this))},_id_changed:function(g,a){for(var c=this._selected.length-1;c&gt;=0;c--){if(this._selected[c]==g){this._selected[c]=a}}},_data_filtered:function(){for(var a=this._selected.length-1;a&gt;=0;a--){if(this.data.indexById(this._selected[a])&lt;0){var g=this._selected[a]}var c=this.item(g);if(c){delete c.$selected}this._selected.splice(a,1);this.callEvent(&quot;onSelectChange&quot;,[g])}},_data_updated:function(g,c,a){if(a==&quot;delete&quot;){this._selected.remove(g)}else{if(!this.data.dataCount()&amp;&amp; !this.data._filter_order){this._selected=dhtmlx.toArray()}}},_data_loaded:function(){if(this._settings.select){this.data.Kw(function(a){if(a.$selected){this.select(a.id)}},this)}},_select_mark:function(g,c,a){if(!a&amp;&amp; !this.callEvent(&quot;onBeforeSelect&quot;,[g,c])){return false}this.data.item(g).$selected=c;if(a){a.push(g)}else{if(c){this._selected.push(g)}else{this._selected.remove(g)}this._refresh_selection(g)}return true},select:function(h,g,a){if(!h){return this.adx()}if(h instanceof Array){for(var c=0;c&lt;h.length;c++){this.select(h[c],g,a)}return}if(!this.data.exists(h)){dhtmlx.error(&quot;Incorrect id in select command: &quot;+h);return}if(a&amp;&amp;this._selected.length){return this.adx(this._selected[this._selected.length-1],h)}if(!g&amp;&amp;(this._selected.length!=1||this._selected[0]!=h)){this._silent_selection=true;this.unselectAll();this._silent_selection=false}if(this.isSelected(h)){if(g){this.unselect(h)}return}if(this._select_mark(h,true)){this.callEvent(&quot;onAfterSelect&quot;,[h])}},unselect:function(a){if(!a){return this.unselectAll()}if(!this.isSelected(a)){return}this._select_mark(a,false)},adx:function(h,g){var a;var c=[];if(h||g){a=this.data.getRange(h||null,g||null)}else{a=this.data.getRange()}a.Kw(function(l){var m=this.data.item(l.id);if(!m.$selected){this._selected.push(l.id);this._select_mark(l.id,true,c)}return l.id},this);this._refresh_selection(c)},unselectAll:function(){var a=[];this._selected.Kw(function(c){this._select_mark(c,false,a)},this);this._selected=dhtmlx.toArray();this._refresh_selection(a)},isSelected:function(a){return this._selected.find(a)!= -1},getSelected:function(a){switch(this._selected.length){case 0:return a?[]:&quot;&quot;;case 1:return a?[this._selected[0]]:this._selected[0];default:return([].concat(this._selected))}},_is_mass_selection:function(a){return a.length&gt;100||a.length&gt;this.data.dataCount/2},_refresh_selection:function(c){if(typeof c!=&quot;object&quot;){c=[c]}if(!c.length){return}if(this._is_mass_selection(c)){this.data.refresh()}else{for(var a=0;a&lt;c.length;a++){this.ht(c[a],this.data.item(c[a]),&quot;update&quot;)}}if(!this._silent_selection){this.callEvent(&quot;onSelectChange&quot;,[c])}}};dhtmlx.RenderStack={ahY:function(){dhtmlx.assert(this.data,&quot;RenderStack :: Component doesn't have DataStore&quot;);dhtmlx.assert(dhtmlx.Template,&quot;dhtmlx.Template :: dhtmlx.Template is not accessible&quot;);this.gv=document.createElement(&quot;DIV&quot;)},_toHTML:function(a){dhtmlx.assert((!a.$template||this.type[&quot;template_&quot;+a.$template]),&quot;RenderStack :: Unknown template: &quot;+a.$template);this.callEvent(&quot;onItemRender&quot;,[a]);return this.type._item_start(a,this.type)+(a.$template?this.type[&quot;template_&quot;+a.$template]:this.type.template)(a,this.type)+this.type._item_end},_toHTMLObject:function(a){this.gv.innerHTML=this._toHTML(a);return this.gv.firstChild},_locateHTML:function(a){if(this._htmlmap){return this._htmlmap[a]}this._htmlmap={};var g=this._dataobj.childNodes;for(var c=0;c&lt;g.length;c++){var h=g[c].getAttribute(this._id);if(h){this._htmlmap[h]=g[c]}}return this._locateHTML(a)},locate:function(a){return dhtmlx.html.locate(a,this._id)},show:function(c){var a=this._locateHTML(c);if(a){this._dataobj.scrollTop=a.offsetTop-this._dataobj.offsetTop}},ht:function(m,h,g,l){if(m){var a=this._locateHTML(m);switch(g){case &quot;update&quot;:if(!a){return}var c=this._htmlmap[m]=this._toHTMLObject(h);dhtmlx.html.insertBefore(c,a);dhtmlx.html.remove(a);break;case &quot;delete&quot;:if(!a){return}dhtmlx.html.remove(a);delete this._htmlmap[m];break;case &quot;add&quot;:var c=this._htmlmap[m]=this._toHTMLObject(h);dhtmlx.html.insertBefore(c,this._locateHTML(this.data.next(m)),this._dataobj);break;case &quot;move&quot;:this.ht(m,h,&quot;delete&quot;);this.ht(m,h,&quot;add&quot;);break;default:dhtmlx.error(&quot;Unknown render command: &quot;+g);break}}else{if(this.callEvent(&quot;onBeforeRender&quot;,[this.data])){this._dataobj.innerHTML=this.data.getRange().map(this._toHTML,this).join(&quot;&quot;);this._htmlmap=null}}this.callEvent(&quot;onAfterRender&quot;,[])},pager_setter:function(c){this.attachEvent(&quot;onBeforeRender&quot;,function(){var h=this._settings.pager._settings;if(h.page== -1){return false}this.data.min=h.page*h.size;this.data.max=(h.page+1)*h.size-1;return true});var a=new dhtmlx.ui.pager(c);var g=dhtmlx.bind(function(){this.data.refresh()},this);a.attachEvent(&quot;onRefresh&quot;,g);this.data.attachEvent(&quot;onStoreUpdated&quot;,function(l){var h=this.dataCount();if(h!=a._settings.count){a._settings.count=h;if(a._settings.page== -1){a._settings.page=0}a.refresh()}});return a},height_setter:function(a){if(a==&quot;auto&quot;){this.attachEvent(&quot;onAfterRender&quot;,this._correct_height);dhtmlx.event(window,&quot;resize&quot;,dhtmlx.bind(this._correct_height,this))}return a},_correct_height:function(){this._dataobj.style.overflow=&quot;hidden&quot;;this._dataobj.style.height=&quot;1px&quot;;var a=this._dataobj.scrollHeight;this._dataobj.style.height=a+&quot;px&quot;;if(dhtmlx.aq){var c=this._dataobj.scrollHeight;if(c!=a){this._dataobj.style.height=c+&quot;px&quot;}}this._obj.style.height=this._dataobj.style.height},_getDimension:function(){var a=this.type;var c=(a.border||0)+(a.padding||0)*2+(a.margin||0)*2;return{x:a.width+c,y:a.height+c}},x_count_setter:function(c){var g=this._getDimension();var a=dhtmlx.$customScroll?0:18;this._dataobj.style.width=g.x*c+(this._settings.height!=&quot;auto&quot;?a:0)+&quot;px&quot;;return c},y_count_setter:function(a){var c=this._getDimension();this._dataobj.style.height=c.y*a+&quot;px&quot;;return a}};dhtmlx.VirtualRenderStack={ahY:function(){dhtmlx.assert(this.ht,&quot;VirtualRenderStack :: Object must use RenderStack first&quot;);this._htmlmap={};this._dataobj.style.overflowY=&quot;scroll&quot;;dhtmlx.event(this._dataobj,&quot;scroll&quot;,dhtmlx.bind(this._render_visible_rows,this));dhtmlx.event(window,&quot;resize&quot;,dhtmlx.bind(function(){this.ht()},this));this.data._unrendered_area=[];this.data.getIndexRange=this._getIndexRange},_locateHTML:function(a){return this._htmlmap[a]},show:function(g){vi=this._getVisibleRange();var c=this.data.indexById(g);var a=Math.floor(c/vi._dx)*vi._y;this._dataobj.scrollTop=a},_getIndexRange:function(l,h){if(h!==0){h=Math.min((h||Infinity),this.dataCount()-1)}var a=dhtmlx.toArray();for(var c=(l||0);c&lt;=h;c++){var g=this.item(this.order[c]);if(this.order.length&gt;c){if(!g){this.order[c]=dhtmlx.uid();g={id:this.order[c],$template:&quot;loading&quot;};this._unrendered_area.push(this.order[c])}else{if(g.$template==&quot;loading&quot;){this._unrendered_area.push(this.order[c])}}a.push(g)}}return a},ht:function(m,h,g,l){if(m){var a=this._locateHTML(m);switch(g){case &quot;update&quot;:if(!a){return}var c=this._htmlmap[m]=this._toHTMLObject(h);dhtmlx.html.insertBefore(c,a);dhtmlx.html.remove(a);break;default:this._render_delayed();break}}else{if(this.callEvent(&quot;onBeforeRender&quot;,[this.data])){this._htmlmap={};this._render_visible_rows(null,true);this._wait_for_render=false;this.callEvent(&quot;onAfterRender&quot;,[])}}},_render_delayed:function(){if(this._wait_for_render){return}this._wait_for_render=true;window.setTimeout(dhtmlx.bind(function(){this.ht()},this),1)},_create_placeholder:function(a){var c=document.createElement(&quot;DIV&quot;);c.style.cssText=&quot;height:&quot;+a+&quot;px; width:100%; overflow:hidden;&quot;;return c},_render_visible_rows:function(A,E){this.data._unrendered_area=[];var y=this._getVisibleRange();if(!this._dataobj.firstChild||E){this._dataobj.innerHTML=&quot;&quot;;this._dataobj.appendChild(this._create_placeholder(y._max));this._htmlrows=[this._dataobj.firstChild]}var l=Math.max(y._from,0);var x=(this.data.max||this.data.max===0)?this.data.max:Infinity;while(l&lt;=y._height){while(this._htmlrows[l]&amp;&amp;this._htmlrows[l]._filled&amp;&amp;l&lt;=y._height){l++}if(l&gt;y._height){break}var o=l;while(!this._htmlrows[o]){o--}var a=this._htmlrows[o];var g=l*y._dx+(this.data.min||0);if(g&gt;x){break}var m=Math.min(g+y._dx-1,x);var r=this._create_placeholder(y._y);var n=this.data.getIndexRange(g,m);if(!n.length){break}r.innerHTML=n.map(this._toHTML,this).join(&quot;&quot;);for(var v=0;v&lt;n.length;v++){this._htmlmap[this.data.idByIndex(g+v)]=r.childNodes[v]}var w=parseInt(a.style.height,10);var D=(l-o)*y._y;var u=(w-D-y._y);dhtmlx.html.insertBefore(r,D?a.nextSibling:a,this._dataobj);this._htmlrows[l]=r;r._filled=true;if(D&lt;=0&amp;&amp;u&gt;0){a.style.height=u+&quot;px&quot;;this._htmlrows[l+1]=a}else{if(D&lt;0){dhtmlx.html.remove(a)}else{a.style.height=D+&quot;px&quot;}if(u&gt;0){var q=this._htmlrows[l+1]=this._create_placeholder(u);dhtmlx.html.insertBefore(q,r.nextSibling,this._dataobj)}}l++}if(this.data._unrendered_area.length){var s=this.indexById(this.data._unrendered_area[0]);var c=this.indexById(this.data._unrendered_area.pop())+1;if(c&gt;s){if(!this.callEvent(&quot;onDataRequest&quot;,[s,c-s])){return false}dhtmlx.assert(this.data.feed,&quot;Data feed is missed&quot;);this.data.feed.call(this,s,c-s)}}if(dhtmlx._isIE){var C=this._getVisibleRange();if(C._from!=y._from){this._render_visible_rows()}}},_getVisibleRange:function(){var c=dhtmlx.$customScroll?0:18;var n=this._dataobj.scrollTop;var a=Math.max(this._dataobj.scrollWidth,this._dataobj.offsetWidth)-c;var o=this._dataobj.offsetHeight;var r=this.type;var h=this._getDimension();var s=Math.floor(a/h.x)||1;var g=Math.floor(n/h.y);var q=Math.ceil((o+n)/h.y)-1;var l=this.data.max?(this.data.max-this.data.min):this.data.dataCount();var m=Math.ceil(l/s)*h.y;return{_from:g,_height:q,_top:n,_max:m,_y:h.y,_dx:s}}};dhtmlXDataView=function(a){this.name=&quot;DataView&quot;;this.version=&quot;3.0&quot;;if(dhtmlx.assert_enabled()){this._assert()}dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(a,&quot;dhx_dataview&quot;);dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.RenderStack);dhtmlx.extend(this,dhtmlx.SelectionModel);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.KeyEvents);dhtmlx.extend(this,dhtmlx.EditAbility);dhtmlx.extend(this,dhtmlx.DataMove);dhtmlx.extend(this,dhtmlx.DragItem);dhtmlx.extend(this,dhtmlx.DataProcessor);dhtmlx.extend(this,dhtmlx.AutoTooltip);dhtmlx.extend(this,dhtmlx.Destruction);this.data.attachEvent(&quot;onStoreUpdated&quot;,dhtmlx.bind(function(){this.ht.apply(this,arguments)},this));this._parseSettings(a,{drag:false,edit:false,select:&quot;multiselect&quot;,type:&quot;default&quot;});if(this._settings.height!=&quot;auto&quot;&amp;&amp; !this._settings.renderAll){dhtmlx.extend(this,dhtmlx.VirtualRenderStack)}this.data.provideApi(this,true);if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}};dhtmlXDataView.prototype={bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(g,l){var h=this._locateHTML(g.target);if(this.type.drag_marker){if(this._drag_marker){this._drag_marker.style.backgroundImage=&quot;&quot;;this._drag_marker.style.backgroundRepeat=&quot;&quot;}if(h){h.style.backgroundImage=&quot;url(&quot;+(dhtmlx.image_path||&quot;&quot;)+this.type.drag_marker+&quot;)&quot;;h.style.backgroundRepeat=&quot;no-repeat&quot;;this._drag_marker=h}}if(h&amp;&amp;this._settings.auto_scroll){var a=h.offsetTop;var m=h.offsetHeight;var c=this._obj.scrollTop;var n=this._obj.offsetHeight;if(a-m&gt;=0&amp;&amp;a-m*0.75&lt;c){c=Math.max(a-m,0)}else{if(a+m/0.75&gt;c+n){c=c+m}}this._obj.scrollTop=c}return true},_id:&quot;dhx_f_id&quot;,on_click:{dhx_dataview_item:function(a,c){if(this.xS(false,c)){if(this._settings.select){if(this._settings.select==&quot;multiselect&quot;){this.select(c,a.ctrlKey,a.shiftKey)}else{this.select(c)}}}}},on_dblclick:{dhx_dataview_item:function(a,c){if(this._settings.edit){this.edit(c)}}},on_mouse_move:{},types:{&quot;default&quot;:{css:&quot;default&quot;,template:dhtmlx.Template.fromHTML(&quot;<DIV style="padding:10px; white-space:nowrap; overflow:hidden;">{obj.text}</DIV>&quot;),template_edit:dhtmlx.Template.fromHTML(&quot;<DIV style="padding:10px; white-space:nowrap; overflow:hidden;">&lt;textarea style='width:100%; height:100%;' bind='obj.text'&gt;&lt;/textarea&gt;</DIV>&quot;),template_loading:dhtmlx.Template.fromHTML(&quot;<DIV style="padding:10px; white-space:nowrap; overflow:hidden;">Loading...</DIV>&quot;),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML(&quot;<DIV class="dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}" style="width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;">&quot;),template_item_end:dhtmlx.Template.fromHTML(&quot;</DIV>&quot;)};dhtmlx.compat(&quot;layout&quot;);function xmlPointer(a){this.d=a}xmlPointer.prototype={text:function(){if(!aq){return this.d.xml}var a=new XMLSerializer();return a.serializeToString(this.d)},get:function(a){return this.d.getAttribute(a)},exists:function(){return! !this.d},content:function(){return this.d.firstChild?(this.d.firstChild.wholeText||this.d.firstChild.data):&quot;&quot;},Kw:function(h,n,m,l){var g=this.d.childNodes;var o=new xmlPointer();if(g.length){for(l=l||0;l&lt;g.length;l++){if(g[l].tagName==h){o.d=g[l];if(n.apply(m,[o,l])== -1){return}}}}},get_all:function(){var g={};var c=this.d.attributes;for(var h=0;h&lt;c.length;h++){g[c[h].name]=c[h].value}return g},sub:function(h){var g=this.d.childNodes;var m=new xmlPointer();if(g.length){for(var l=0;l&lt;g.length;l++){if(g[l].tagName==h){m.d=g[l];return m}}}},up:function(a){return new xmlPointer(this.d.parentNode)},set:function(a,c){this.d.setAttribute(a,c)},clone:function(a){return new xmlPointer(this.d)},sub_exists:function(g){var c=this.d.childNodes;if(c.length){for(var h=0;h&lt;c.length;h++){if(c[h].tagName==g){return true}}}return false},through:function(g,n,r,l,s){var o=this.d.childNodes;if(o.length){for(var h=0;h&lt;o.length;h++){if(o[h].tagName==g&amp;&amp;o[h].getAttribute(n)!=null&amp;&amp;o[h].getAttribute(n)!=&quot;&quot;&amp;&amp;(!r||o[h].getAttribute(n)==r)){var m=new xmlPointer(o[h]);l.apply(s,[m,h])}var q=this.d;this.d=o[h];this.through(g,n,r,l,s);this.d=q}}}};function dhtmlXTreeObject(m,h,c,a){if(_isIE){try{document.execCommand(&quot;BackgroundImageCache&quot;,false,true)}catch(l){}}if(typeof(m)!=&quot;object&quot;){this.parentObject=document.getElementById(m)}else{this.parentObject=m}this.parentObject.style.overflow=&quot;hidden&quot;;this._itim_dg=true;this.dlmtr=&quot;,&quot;;this.dropLower=false;this.enableIEImageFix();this.xmlstate=0;this.acE=&quot;tree&quot;;this.smcheck=true;this.width=h;this.height=c;this.fO=a;this.childCalc=null;this.def_img_x=&quot;18px&quot;;this.def_img_y=&quot;18px&quot;;this.def_line_img_x=&quot;18px&quot;;this.def_line_img_y=&quot;24px&quot;;this.jG=new Array();this._selected=new Array();this.style_pointer=&quot;pointer&quot;;this._aimgs=true;this.htmlcA=&quot; [&quot;;this.htmlcB=&quot;]&quot;;this.lWin=window;this.cMenu=0;this.mlitems=0;this.iconURL=&quot;&quot;;this.dadmode=0;this.slowParse=false;this.autoScroll=true;this.hfMode=0;this.nodeCut=new Array();this.XMLsource=0;this.XMLloadingWarning=0;this.gQ={};this._pullSize=0;this.treeLinesOn=true;this.tscheck=false;this.timgen=true;this.dpcpy=false;this._ld_id=null;this._oie_onXLE=[];this.imPath=window.fe||&quot;&quot;;this.checkArray=new Array(&quot;iconUncheckAll.gif&quot;,&quot;iconCheckAll.gif&quot;,&quot;iconCheckGray.gif&quot;,&quot;iconUncheckDis.gif&quot;,&quot;iconCheckDis.gif&quot;,&quot;iconCheckDis.gif&quot;);this.radioArray=new Array(&quot;radio_off.gif&quot;,&quot;radio_on.gif&quot;,&quot;radio_on.gif&quot;,&quot;radio_off.gif&quot;,&quot;radio_on.gif&quot;,&quot;radio_on.gif&quot;);this.lineArray=new Array(&quot;line2.gif&quot;,&quot;line3.gif&quot;,&quot;line4.gif&quot;,&quot;blank.gif&quot;,&quot;blank.gif&quot;,&quot;line1.gif&quot;);this.minusArray=new Array(&quot;minus2.gif&quot;,&quot;minus3.gif&quot;,&quot;minus4.gif&quot;,&quot;minus.gif&quot;,&quot;minus5.gif&quot;);this.plusArray=new Array(&quot;plus2.gif&quot;,&quot;plus3.gif&quot;,&quot;plus4.gif&quot;,&quot;plus.gif&quot;,&quot;plus5.gif&quot;);this.imageArray=new Array(&quot;leaf.gif&quot;,&quot;folderOpen.gif&quot;,&quot;folderClosed.gif&quot;);this.cutImg=new Array(0,0,0);this.cutImage=&quot;but_cut.gif&quot;;dhtmlxEventable(this);this.ae=new dhtmlDragAndDropObject();this.ao=new dhtmlXTreeItemObject(this.fO,&quot;&quot;,0,this);this.ao.ao.childNodes[0].childNodes[0].style.display=&quot;none&quot;;this.ao.ao.childNodes[0].childNodes[0].childNodes[0].className=&quot;hiddenRow&quot;;this.cB=this.eh();this.cB.appendChild(this.ao.ao);if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}if(aq){this.cB.childNodes[0].width=&quot;100%&quot;;this.cB.childNodes[0].style.overflow=&quot;hidden&quot;}var g=this;this.cB.onselectstart=new Function(&quot;return false;&quot;);if(gP){this.cB.oncontextmenu=function(n){return g._doContClick(n||window.event,true)}}this.cB.onmousedown=function(n){return g._doContClick(n||window.event)};this.dF=new ag(this._parseXMLTree,this,true,this.ir);if(_isIE){this.jJ(true)}this.selectionBar=document.createElement(&quot;DIV&quot;);this.selectionBar.className=&quot;selectionBar&quot;;this.selectionBar.innerHTML=&quot; &quot;;this.selectionBar.style.display=&quot;none&quot;;this.cB.appendChild(this.selectionBar);if(window.addEventListener){window.addEventListener(&quot;unload&quot;,function(){try{g.fA()}catch(n){}},false)}if(window.attachEvent){window.attachEvent(&quot;onunload&quot;,function(){try{g.fA()}catch(n){}})}this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path)}if(dhtmlx.skin){this.setSkin(dhtmlx.skin)}return this}dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a};dhtmlXTreeObject.prototype._doContClick=function(n,a){if(!a&amp;&amp;n.button!=2){if(this._acMenu){if(this._acMenu.hideContextMenu){this._acMenu.hideContextMenu()}else{this.cMenu.ES()}}return true}var c=(_isIE?n.srcElement:n.target);while((c)&amp;&amp;(c.tagName!=&quot;BODY&quot;)){if(c.parentObject){break}c=c.parentNode}if((!c)||(!c.parentObject)){return true}var l=c.parentObject;if(!this.callEvent(&quot;onRightClick&quot;,[l.id,n])){(n.srcElement||n.target).oncontextmenu=function(r){(r||event).cancelBubble=true;return false}}this._acMenu=(l.cMenu||this.cMenu);if(this._acMenu){if(!(this.callEvent(&quot;onBeforeContextMenu&quot;,[l.id]))){return true}if(!gP){(n.srcElement||n.target).oncontextmenu=function(r){(r||event).cancelBubble=true;return false}}if(this._acMenu.showContextMenu){var h=window.document.documentElement;var g=window.document.body;var o=new Array((h.scrollLeft||g.scrollLeft),(h.scrollTop||g.scrollTop));if(_isIE){var q=n.clientX+o[0];var m=n.clientY+o[1]}else{var q=n.pageX;var m=n.pageY}this._acMenu.showContextMenu(q-1,m-1);this.contextID=l.id;n.cancelBubble=true;this._acMenu._skip_hide=true}else{c.contextMenuId=l.id;c.contextMenu=this._acMenu;c.a=this._acMenu.vm;c.a(c,n);c.a=null}return false}return true};dhtmlXTreeObject.prototype.enableIEImageFix=function(a){if(!a){this._getImg=function(c){return document.createElement((c==this.fO)?&quot;div&quot;:&quot;img&quot;)};this._setSrc=function(g,c){g.src=c};this._getSrc=function(c){return c.src}}else{this._getImg=function(){var c=document.createElement(&quot;DIV&quot;);c.innerHTML=&quot; &quot;;c.className=&quot;dhx_bg_img_fix&quot;;return c};this._setSrc=function(g,c){g.style.backgroundImage=&quot;url(&quot;+c+&quot;)&quot;};this._getSrc=function(c){var g=c.style.backgroundImage;return g.substr(4,g.length-5).replace(/(^&quot;)|(&quot;$)/g,&quot;&quot;)}}};dhtmlXTreeObject.prototype.fA=function(){for(var c in this.gQ){var g=this.gQ[c];if(!g){continue}g.parentObject=null;g.treeNod=null;g.childNodes=null;g.span=null;g.tr.nodem=null;g.tr=null;g.ao.objBelong=null;g.ao=null;this.gQ[c]=null}this.parentObject.innerHTML=&quot;&quot;;if(this.dF){this.dF.fA()}this.cB.onselectstart=null;this.cB.oncontextmenu=null;this.cB.onmousedown=null;for(var c in this){this[c]=null}};function cObject(){return this}cObject.prototype=new Object;cObject.prototype.clone=function(){function a(){}a.prototype=this;return new a()};function dhtmlXTreeItemObject(m,c,g,a,h,l){this.ao=&quot;&quot;;this.acolor=&quot;&quot;;this.mB=&quot;&quot;;this.tr=0;this.aE=0;this.dH=0;this.dG=0;this.dragSpan=0;this.dragMove=0;this.span=0;this.closeble=1;this.childNodes=new Array();this.userData=new cObject();this.checkstate=0;this.treeNod=a;this.label=c;this.parentObject=g;this.actionHandler=h;this.images=new Array(a.imageArray[0],a.imageArray[1],a.imageArray[2]);this.id=a._globalIdStorageAdd(m,this);if(this.treeNod.checkBoxOff){this.ao=this.treeNod._createItem(1,this,l)}else{this.ao=this.treeNod._createItem(0,this,l)}this.ao.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(c,a){if(this.ak(c,1,1)){c=c+&quot;_&quot;+(new Date()).valueOf();return this._globalIdStorageAdd(c,a)}this.gQ[c]=a;this._pullSize++;return c};dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){if(this.gQ[a]){this._unselectItem(this.gQ[a]);this.gQ[a]=null;this._pullSize--}if((this._locker)&amp;&amp;(this._locker[a])){this._locker[a]=false}};dhtmlXTreeObject.prototype.ak=function(m,a,g,h){var l=this.gQ[m];if(l){if((l.unParsed)&amp;&amp;(!g)){this.reParse(l,0)}if(this.ahK&amp;&amp; !l.ao){this._buildSRND(l,g)}if((h)&amp;&amp;(this._edsbpsA)){for(var c=0;c&lt;this._edsbpsA.length;c++){if(this._edsbpsA[c][2]==m){dhtmlxError.gn(&quot;getItem&quot;,&quot;Requested item still in parsing process.&quot;,m);return null}}}return l}if((this.slowParse)&amp;&amp;(m!=0)&amp;&amp;(!a)){return this.preParse(m)}else{return null}};dhtmlXTreeObject.prototype._getSubItemsXML=function(a){var c=[];a.Kw(&quot;item&quot;,function(g){c.push(g.get(&quot;id&quot;))},this);return c.join(this.dlmtr)};dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(a){this.slowParse=ap(a)};dhtmlXTreeObject.prototype.findXML=function(c,a,g){};dhtmlXTreeObject.prototype._getAllCheckedXML=function(c,a,h){var g=[];if(h==2){c.through(&quot;item&quot;,&quot;checked&quot;,-1,function(l){g.push(l.get(&quot;id&quot;))},this)}if(h==1){c.through(&quot;item&quot;,&quot;id&quot;,null,function(l){if(l.get(&quot;checked&quot;)&amp;&amp;(l.get(&quot;checked&quot;)!= -1)){g.push(l.get(&quot;id&quot;))}},this)}if(h==0){c.through(&quot;item&quot;,&quot;id&quot;,null,function(l){if(!l.get(&quot;checked&quot;)||l.get(&quot;checked&quot;)==0){g.push(l.get(&quot;id&quot;))}},this)}if(g.length){return a+(a?this.dlmtr:&quot;&quot;)+g.join(this.dlmtr)}if(a){return a}else{return &quot;&quot;}};dhtmlXTreeObject.prototype._setSubCheckedXML=function(a,c){var g=a?&quot;1&quot;:&quot;&quot;;c.through(&quot;item&quot;,&quot;id&quot;,null,function(h){if(!h.get(&quot;disabled&quot;)||h.get(&quot;disabled&quot;)==0){h.set(&quot;checked&quot;,g)}},this)};dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(g,a){var h=[];var c=function(l){if(!l.sub_exists(&quot;item&quot;)){h.push(l.get(&quot;id&quot;))}else{l.Kw(&quot;item&quot;,c,this)}};c(g);return h.join(&quot;,&quot;)};dhtmlXTreeObject.prototype._getAllFatItemsXML=function(g,a){var h=[];var c=function(l){if(!l.sub_exists(&quot;item&quot;)){return}h.push(l.get(&quot;id&quot;));l.Kw(&quot;item&quot;,c,this)};c(g);return h.join(&quot;,&quot;)};dhtmlXTreeObject.prototype._getAllSubItemsXML=function(g,c,a){var c=[];a.through(&quot;item&quot;,&quot;id&quot;,null,function(h){c.push(h.get(&quot;id&quot;))},this);return c.join(&quot;,&quot;)};dhtmlXTreeObject.prototype.reParse=function(g){var m=this;if(!this.parsCount){m.callEvent(&quot;onXLS&quot;,[m,g.id])}this.xmlstate=1;var h=g.unParsed;g.unParsed=0;this.XMLloadingWarning=1;var a=this.parsingOn;var o=this.waitUpdateXML;var q=this.parsedArray;this.parsedArray=new Array();this.waitUpdateXML=false;this.parsingOn=g.id;this.parsedArray=new Array();this.setCheckList=&quot;&quot;;this.Aq(h,g.id,2);var r=this.setCheckList.split(this.dlmtr);for(var l=0;l&lt;this.parsedArray.length;l++){g.ao.childNodes[0].appendChild(this.parsedArray[l])}if(h.get(&quot;order&quot;)&amp;&amp;h.get(&quot;order&quot;)!=&quot;none&quot;){this._reorderBranch(g,h.get(&quot;order&quot;),true)}this.oldsmcheck=this.smcheck;this.smcheck=false;for(var c=0;c&lt;r.length;c++){if(r[c]){this.setCheck(r[c],1)}}this.smcheck=this.oldsmcheck;this.parsingOn=a;this.waitUpdateXML=o;this.parsedArray=q;this.XMLloadingWarning=0;this._redrawFrom(this,g);if(this.ahK&amp;&amp; !g._sready){this.prepareSR(g.id)}this.xmlstate=0;return true};dhtmlXTreeObject.prototype.preParse=function(c){if(!c|| !this._p){return null}var a=false;this._p.clone().through(&quot;item&quot;,&quot;id&quot;,c,function(h){this.ak(h.up().get(&quot;id&quot;));return a=true},this);if(a){var g=this.ak(c,true,false);if(!g){dhtmlxError.gn(&quot;getItem&quot;,&quot;The item &quot;+c+&quot; not operable. Seems you have non-unique|incorrect IDs in tree's XML.&quot;,c)}}return g};dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case &quot;none&quot;:return a;break;case &quot;utf8&quot;:return encodeURIComponent(a);break;default:return escape(a);break}};dhtmlXTreeObject.prototype._drawNewTr=function(l,g){var h=document.createElement(&quot;tr&quot;);var c=document.createElement(&quot;td&quot;);var a=document.createElement(&quot;td&quot;);c.appendChild(document.createTextNode(&quot; &quot;));a.colSpan=3;a.appendChild(l);h.appendChild(c);h.appendChild(a);return h};dhtmlXTreeObject.prototype.loadXMLString=function(g,c){var a=this;if(!this.parsCount){this.callEvent(&quot;onXLS&quot;,[a,null])}this.xmlstate=1;if(c){this.dF.aA=c}this.dF.loadXMLString(g)};dhtmlXTreeObject.prototype.loadXML=function(a,g){if(this._datamode&amp;&amp;this._datamode!=&quot;xml&quot;){return this[&quot;load&quot;+this._datamode.toUpperCase()](a,g)}var c=this;if(!this.parsCount){this.callEvent(&quot;onXLS&quot;,[c,this._ld_id])}this._ld_id=null;this.xmlstate=1;this.dF=new ag(this._parseXMLTree,this,true,this.ir);if(g){this.dF.aA=g}this.dF.loadXML(a)};dhtmlXTreeObject.prototype._attachChildNode=function(o,m,h,q,E,D,C,r,g,v,w){if(v&amp;&amp;v.parentObject){o=v.parentObject}if(((o.XMLload==0)&amp;&amp;(this.XMLsource))&amp;&amp;(!this.XMLloadingWarning)){o.XMLload=1;this._loadDynXML(o.id)}var s=o.aE;var F=o.childNodes;if(w&amp;&amp;w.tr.previousSibling){if(w.tr.previousSibling.previousSibling){v=w.tr.previousSibling.nodem}else{r=r.replace(&quot;TOP&quot;,&quot;&quot;)+&quot;,TOP&quot;}}if(v){var l,A;for(l=0;l&lt;s;l++){if(F[l]==v){for(A=s;A!=l;A--){F[1+A]=F[A]}break}}l++;s=l}if(r){var x=r.split(&quot;,&quot;);for(var y=0;y&lt;x.length;y++){switch(x[y]){case &quot;TOP&quot;:if(o.aE&gt;0){v=new Object;v.tr=o.childNodes[0].tr.previousSibling}o._has_top=true;for(l=s;l&gt;0;l--){F[l]=F[l-1]}s=0;break}}}var u;if(!(u=this.gQ[m])||u.span!= -1){u=F[s]=new dhtmlXTreeItemObject(m,h,o,this,q,1);m=F[s].id;o.aE++}if(!u.ao){u.label=h;u.ao=this._createItem((this.checkBoxOff?1:0),u);u.ao.objBelong=u}if(E){u.images[0]=E}if(D){u.images[1]=D}if(C){u.images[2]=C}var c=this._drawNewTr(u.ao);if((this.XMLloadingWarning)||(this._hAdI)){u.ao.parentNode.parentNode.style.display=&quot;none&quot;}if((v)&amp;&amp;v.tr&amp;&amp;(v.tr.nextSibling)){o.ao.childNodes[0].insertBefore(c,v.tr.nextSibling)}else{if(this.parsingOn==o.id){this.parsedArray[this.parsedArray.length]=c}else{o.ao.childNodes[0].appendChild(c)}}if((v)&amp;&amp;(!v.span)){v=null}if(this.XMLsource){if((g)&amp;&amp;(g!=0)){u.XMLload=0}else{u.XMLload=1}}u.tr=c;c.nodem=u;if(o.itemId==0){c.childNodes[0].className=&quot;hiddenRow&quot;}if((o._r_logic)||(this._frbtr)){this._setSrc(u.ao.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0])}if(r){var x=r.split(&quot;,&quot;);for(var y=0;y&lt;x.length;y++){switch(x[y]){case &quot;SELECT&quot;:this.hE(m,false);break;case &quot;CALL&quot;:this.hE(m,true);break;case &quot;CHILD&quot;:u.XMLload=0;break;case &quot;CHECKED&quot;:if(this.XMLloadingWarning){this.setCheckList+=this.dlmtr+m}else{this.setCheck(m,1)}break;case &quot;HCHECKED&quot;:this._setCheck(u,&quot;unsure&quot;);break;case &quot;OPEN&quot;:u.openMe=1;break}}}if(!this.XMLloadingWarning){if((this._getOpenState(o)&lt;0)&amp;&amp;(!this._hAdI)){this.hx(o.id)}if(v){this._correctPlus(v);this._correctLine(v)}this._correctPlus(o);this._correctLine(o);this._correctPlus(u);if(o.aE&gt;=2){this._correctPlus(F[o.aE-2]);this._correctLine(F[o.aE-2])}if(o.aE!=2){this._correctPlus(F[0])}if(this.tscheck){this._correctCheckStates(o)}if(this.BX){if(this.xmlstate==1){var a=this.onXLE;this.onXLE=function(n){this.BX(m);if(a){a(n)}}}else{this.BX(m)}}}return u};dhtmlXTreeObject.prototype.enableContextMenu=function(a){if(a){this.cMenu=a}};dhtmlXTreeObject.prototype.setItemContextMenu=function(m,h){var a=m.toString().split(this.dlmtr);for(var g=0;g&lt;a.length;g++){var c=this.ak(a[g]);if(!c){continue}c.cMenu=h}};dhtmlXTreeObject.prototype.insertNewItem=function(h,o,r,g,n,m,l,c,a){var s=this.ak(h);if(!s){return(-1)}var q=this._attachChildNode(s,o,r,g,n,m,l,c,a);if(!this.gQ[this.fO].XMLload){this.gQ[this.fO].XMLload=1}if((!this.XMLloadingWarning)&amp;&amp;(this.childCalc)){this._fixChildCountLabel(s)}return q};dhtmlXTreeObject.prototype.cH=function(h,o,q,g,n,m,l,c,a){return this.insertNewItem(h,o,q,g,n,m,l,c,a)};dhtmlXTreeObject.prototype._parseXMLTree=function(h,g,o,n,l){var m=new xmlPointer(l.cR(&quot;tree&quot;));h.Aq(m);h._p=m};dhtmlXTreeObject.prototype._parseItem=function(m,r,l,o){var g;if(this.ahK&amp;&amp;(!this.gQ[g=m.get(&quot;id&quot;)]|| !this.gQ[g].span)){this._addItemSRND(r.id,g,m);return}var n=m.get_all();if((typeof(this.waitUpdateXML)==&quot;object&quot;)&amp;&amp;(!this.waitUpdateXML[n.id])){this.Aq(m,n.id,1);return}if((n.text===null)||(typeof(n.text)==&quot;undefined&quot;)){n.text=m.sub(&quot;itemtext&quot;);if(n.text){n.text=n.text.content()}}var u=[];if(n.select){u.push(&quot;SELECT&quot;)}if(n.top){u.push(&quot;TOP&quot;)}if(n.call){this.nodeAskingCall=n.id}if(n.checked== -1){u.push(&quot;HCHECKED&quot;)}else{if(n.checked){u.push(&quot;CHECKED&quot;)}}if(n.open){u.push(&quot;OPEN&quot;)}if(this.waitUpdateXML){if(this.ak(n.id)){var q=this.updateItem(n.id,n.text,n.im0,n.im1,n.im2,n.checked,n.child)}else{if(this.npl==0){u.push(&quot;TOP&quot;)}else{l=r.childNodes[this.npl]}var q=this._attachChildNode(r,n.id,n.text,0,n.im0,n.im1,n.im2,u.join(&quot;,&quot;),n.child,0,l);n.id=q.id;l=null}}else{var q=this._attachChildNode(r,n.id,n.text,0,n.im0,n.im1,n.im2,u.join(&quot;,&quot;),n.child,(o||0),l)}if(n.tooltip){q.span.parentNode.parentNode.title=n.tooltip}if(n.style){if(q.span.style.cssText){q.span.style.cssText+=(&quot;;&quot;+n.style)}else{q.span.setAttribute(&quot;style&quot;,q.span.getAttribute(&quot;style&quot;)+&quot;; &quot;+n.style)}}if(n.radio){q._r_logic=true}if(n.nocheckbox){var s=q.span.parentNode.previousSibling.previousSibling;s.style.display=&quot;none&quot;;q.nocheckbox=true}if(n.disabled){if(n.checked!=null){this._setCheck(q,n.checked)}this.disableCheckbox(q,1)}q._acc=n.child||0;if(this.parserExtension){this.parserExtension._parseExtension.call(this,m,n,(r?r.id:0))}this.setItemColor(q,n.aCol,n.sCol);if(n.locked==&quot;1&quot;){this.lockItem(q.id,true,true)}if((n.imwidth)||(n.imheight)){this.yZ(n.imwidth,n.imheight,q)}if((n.closeable==&quot;0&quot;)||(n.closeable==&quot;1&quot;)){this.setItemCloseable(q,n.closeable)}var h=&quot;&quot;;if(n.topoffset){this.setItemTopOffset(q,n.topoffset)}if((!this.slowParse)||(typeof(this.waitUpdateXML)==&quot;object&quot;)){if(m.sub_exists(&quot;item&quot;)){h=this.Aq(m,n.id,1)}}else{if((!q.aE)&amp;&amp;m.sub_exists(&quot;item&quot;)){q.unParsed=m.clone()}m.Kw(&quot;userdata&quot;,function(a){this.setUserData(n.id,a.get(&quot;name&quot;),a.content())},this)}if(h!=&quot;&quot;){this.nodeAskingCall=h}m.Kw(&quot;userdata&quot;,function(a){this.setUserData(m.get(&quot;id&quot;),a.get(&quot;name&quot;),a.content())},this)};dhtmlXTreeObject.prototype.Aq=function(g,m,a,c){if(this.ahK&amp;&amp; !this.parentObject.offsetHeight){var w=this;return window.setTimeout(function(){w.Aq(g,m,a,c)},100)}if(!g.exists()){return}this.skipLock=true;if(!m){m=g.get(&quot;id&quot;);var u=g.get(&quot;dhx_security&quot;);if(u){dhtmlx.security_key=u}if(g.get(&quot;radio&quot;)){this.ao._r_logic=true}this.parsingOn=m;this.parsedArray=new Array();this.setCheckList=&quot;&quot;;this.nodeAskingCall=&quot;&quot;}var v=this.ak(m);if(!v){return dhtmlxError.gn(&quot;DataStructure&quot;,&quot;XML refers to not existing parent&quot;)}this.parsCount=this.parsCount?(this.parsCount+1):1;this.XMLloadingWarning=1;if((v.aE)&amp;&amp;(!c)&amp;&amp;(!this._edsbps)&amp;&amp;(!v._has_top)){var o=0}else{var o=0}this.npl=0;g.Kw(&quot;item&quot;,function(x,n){v.XMLload=1;this._parseItem(x,v,0,o);if((this._edsbps)&amp;&amp;(this.npl==this._edsbpsC)){this._distributedStart(g,n+1,m,a,v.aE);return-1}this.npl++},this,c);if(!a){g.Kw(&quot;userdata&quot;,function(n){this.setUserData(g.get(&quot;id&quot;),n.get(&quot;name&quot;),n.content())},this);v.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=false;for(var l=v.aE-1;l&gt;=0;l--){if(v.childNodes[l]._dmark){this.deleteItem(v.childNodes[l].id)}}}var r=this.ak(this.parsingOn);for(var l=0;l&lt;this.parsedArray.length;l++){v.ao.childNodes[0].appendChild(this.parsedArray[l])}this.parsedArray=[];this.lastLoadedXMLId=m;this.XMLloadingWarning=0;var s=this.setCheckList.split(this.dlmtr);for(var h=0;h&lt;s.length;h++){if(s[h]){this.setCheck(s[h],1)}}if((this.XMLsource)&amp;&amp;(this.tscheck)&amp;&amp;(this.smcheck)&amp;&amp;(v.id!=this.fO)){if(v.checkstate===0){this._setSubChecked(0,v)}else{if(v.checkstate===1){this._setSubChecked(1,v)}}}this._redrawFrom(this,null,c);if(g.get(&quot;order&quot;)&amp;&amp;g.get(&quot;order&quot;)!=&quot;none&quot;){this._reorderBranch(v,g.get(&quot;order&quot;),true)}if(this.nodeAskingCall!=&quot;&quot;){this.callEvent(&quot;onClick&quot;,[this.nodeAskingCall,this.ah()])}if(this._branchUpdate){this._branchUpdateNext(g)}}if(this.parsCount==1){this.parsingOn=null;if(this.ahK&amp;&amp;v.id!=this.fO){this.prepareSR(v.id);if(this.XMLsource){this.hx(v.id)}}g.through(&quot;item&quot;,&quot;open&quot;,null,function(n){this.hx(n.get(&quot;id&quot;))},this);if((!this._edsbps)||(!this._edsbpsA.length)){var q=this;window.setTimeout(function(){q.callEvent(&quot;onXLE&quot;,[q,m])},1);this.xmlstate=0}this.skipLock=false}this.parsCount--;var q=this;if(this._edsbps){window.setTimeout(function(){q._distributedStep(m)},this._edsbpsD)}if(!a&amp;&amp;this.onXLE){this.onXLE(this,m)}return this.nodeAskingCall};dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.Kw(&quot;item&quot;,function(h){var g=h.get(&quot;id&quot;);if(this.gQ[g]&amp;&amp;(!this.gQ[g].XMLload)){return}this._branchUpdate++;this.smartRefreshItem(h.get(&quot;id&quot;),h)},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(c,g){if((c.nodeType==1)&amp;&amp;(c.tagName==&quot;userdata&quot;)){var a=c.getAttribute(&quot;name&quot;);if((a)&amp;&amp;(c.childNodes[0])){this.setUserData(g,a,c.childNodes[0].data)}}};dhtmlXTreeObject.prototype._redrawFrom=function(o,c,n,g){if(!c){var l=o.ak(o.lastLoadedXMLId);o.lastLoadedXMLId= -1;if(!l){return 0}}else{l=c}var m=0;for(var h=(n?n-1:0);h&lt;l.aE;h++){if((!this._branchUpdate)||(this._getOpenState(l)==1)){if((!c)||(g==1)){l.childNodes[h].ao.parentNode.parentNode.style.display=&quot;&quot;}}if(l.childNodes[h].openMe==1){this._openItem(l.childNodes[h]);l.childNodes[h].openMe=0}o._redrawFrom(o,l.childNodes[h]);if(this.childCalc!=null){if((l.childNodes[h].unParsed)||((!l.childNodes[h].XMLload)&amp;&amp;(this.XMLsource))){if(l.childNodes[h]._acc){l.childNodes[h].span.innerHTML=l.childNodes[h].label+this.htmlcA+l.childNodes[h]._acc+this.htmlcB}else{l.childNodes[h].span.innerHTML=l.childNodes[h].label}}if((l.childNodes[h].childNodes.length)&amp;&amp;(this.childCalc)){if(this.childCalc==1){l.childNodes[h].span.innerHTML=l.childNodes[h].label+this.htmlcA+l.childNodes[h].aE+this.htmlcB}if(this.childCalc==2){var a=l.childNodes[h].aE-(l.childNodes[h].pureChilds||0);if(a){l.childNodes[h].span.innerHTML=l.childNodes[h].label+this.htmlcA+a+this.htmlcB}if(l.pureChilds){l.pureChilds++}else{l.pureChilds=1}}if(this.childCalc==3){l.childNodes[h].span.innerHTML=l.childNodes[h].label+this.htmlcA+l.childNodes[h]._acc+this.htmlcB}if(this.childCalc==4){var a=l.childNodes[h]._acc;if(a){l.childNodes[h].span.innerHTML=l.childNodes[h].label+this.htmlcA+a+this.htmlcB}}}else{if(this.childCalc==4){m++}}m+=l.childNodes[h]._acc;if(this.childCalc==3){m++}}}if((!l.unParsed)&amp;&amp;((l.XMLload)||(!this.XMLsource))){l._acc=m}o._correctLine(l);o._correctPlus(l);if((this.childCalc)&amp;&amp;(!c)){o._fixChildCountLabel(l)}};dhtmlXTreeObject.prototype.eh=function(){var a=document.createElement(&quot;div&quot;);a.className=&quot;containerTableStyle&quot;;a.style.width=this.width;a.style.height=this.height;this.parentObject.appendChild(a);return a};dhtmlXTreeObject.prototype._xcloseAll=function(c){if(c.unParsed){return}if(this.fO!=c.id){if(!c.ao){return}var h=c.ao.childNodes[0].childNodes;var a=h.length;for(var g=1;g&lt;a;g++){h[g].style.display=&quot;none&quot;}this._correctPlus(c)}for(var g=0;g&lt;c.aE;g++){if(c.childNodes[g].aE){this._xcloseAll(c.childNodes[g])}}};dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var c=0;c&lt;a.aE;c++){this._xopenAll(a.childNodes[c])}};dhtmlXTreeObject.prototype._correctPlus=function(c){if(!c.ao){return}var g=c.ao.childNodes[0].childNodes[0].childNodes[0].lastChild;var l=c.ao.childNodes[0].childNodes[0].childNodes[2].childNodes[0];var a=this.lineArray;if((this.XMLsource)&amp;&amp;(!c.XMLload)){var a=this.plusArray;this._setSrc(l,this.iconURL+c.images[2]);if(this._txtimg){return(g.innerHTML=&quot;[+]&quot;)}}else{if((c.aE)||(c.unParsed)){if((c.ao.childNodes[0].childNodes[1])&amp;&amp;(c.ao.childNodes[0].childNodes[1].style.display!=&quot;none&quot;)){if(!c.wsign){var a=this.minusArray}this._setSrc(l,this.iconURL+c.images[1]);if(this._txtimg){return(g.innerHTML=&quot;[-]&quot;)}}else{if(!c.wsign){var a=this.plusArray}this._setSrc(l,this.iconURL+c.images[2]);if(this._txtimg){return(g.innerHTML=&quot;[+]&quot;)}}}else{this._setSrc(l,this.iconURL+c.images[0])}}var h=2;if(!c.treeNod.treeLinesOn){this._setSrc(g,this.imPath+a[3])}else{if(c.parentObject){h=this._getCountStatus(c.id,c.parentObject)}this._setSrc(g,this.imPath+a[h])}};dhtmlXTreeObject.prototype._correctLine=function(c){if(!c.ao){return}var a=c.parentObject;if(a){if((this._getLineStatus(c.id,a)==0)||(!this.treeLinesOn)){for(var g=1;g&lt;=c.aE;g++){if(!c.ao.childNodes[0].childNodes[g]){break}c.ao.childNodes[0].childNodes[g].childNodes[0].style.backgroundImage=&quot;&quot;;c.ao.childNodes[0].childNodes[g].childNodes[0].style.backgroundRepeat=&quot;&quot;}}else{for(var g=1;g&lt;=c.aE;g++){if(!c.ao.childNodes[0].childNodes[g]){break}c.ao.childNodes[0].childNodes[g].childNodes[0].style.backgroundImage=&quot;url(&quot;+this.imPath+this.lineArray[5]+&quot;)&quot;;c.ao.childNodes[0].childNodes[g].childNodes[0].style.backgroundRepeat=&quot;repeat-y&quot;}}}};dhtmlXTreeObject.prototype._getCountStatus=function(c,a){if(a.aE&lt;=1){if(a.id==this.fO){return 4}else{return 0}}if(a.childNodes[0].id==c){if(a.id==this.fO){return 2}else{return 1}}if(a.childNodes[a.aE-1].id==c){return 0}return 1};dhtmlXTreeObject.prototype._getLineStatus=function(c,a){if(a.childNodes[a.aE-1].id==c){return 0}return 1};dhtmlXTreeObject.prototype._HideShow=function(c,l){if((this.XMLsource)&amp;&amp;(!c.XMLload)){if(l==1){return}c.XMLload=1;this._loadDynXML(c.id);return}if(c.unParsed){this.reParse(c)}var h=c.ao.childNodes[0].childNodes;var a=h.length;if(a&gt;1){if(((h[1].style.display!=&quot;none&quot;)||(l==1))&amp;&amp;(l!=2)){this.cB.childNodes[0].border=&quot;1&quot;;this.cB.childNodes[0].border=&quot;0&quot;;nodestyle=&quot;none&quot;}else{nodestyle=&quot;&quot;}for(var g=1;g&lt;a;g++){h[g].style.display=nodestyle}}this._correctPlus(c)};dhtmlXTreeObject.prototype._getOpenState=function(a){if(!a.ao){return 0}var c=a.ao.childNodes[0].childNodes;if(c.length&lt;=1){return 0}if(c[1].style.display!=&quot;none&quot;){return 1}else{return-1}};dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;if(!a.callEvent(&quot;onDblClick&quot;,[this.parentObject.id,a])){return false}if((this.parentObject.closeble)&amp;&amp;(this.parentObject.closeble!=&quot;0&quot;)){a._HideShow(this.parentObject)}else{a._HideShow(this.parentObject,2)}if(a.mR(&quot;onOpenEnd&quot;)){if(!a.xmlstate){a.callEvent(&quot;onOpenEnd&quot;,[this.parentObject.id,a._getOpenState(this.parentObject)])}else{a._oie_onXLE.push(a.onXLE);a.onXLE=a._epnFHe}}return false};dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;if(!a.callEvent(&quot;onOpenStart&quot;,[this.parentObject.id,a._getOpenState(this.parentObject)])){return 0}if((this.parentObject.closeble)&amp;&amp;(this.parentObject.closeble!=&quot;0&quot;)){a._HideShow(this.parentObject)}else{a._HideShow(this.parentObject,2)}if(a.mR(&quot;onOpenEnd&quot;)){if(!a.xmlstate){a.callEvent(&quot;onOpenEnd&quot;,[this.parentObject.id,a._getOpenState(this.parentObject)])}else{a._oie_onXLE.push(a.onXLE);a.onXLE=a._epnFHe}}};dhtmlXTreeObject.prototype._epnFHe=function(c,g,a){if(g!=this.fO){this.callEvent(&quot;onOpenEnd&quot;,[g,c.getOpenState(g)])}c.onXLE=c._oie_onXLE.pop();if(!a&amp;&amp; !c._oie_onXLE.length){if(c.onXLE){c.onXLE(c,g)}}};dhtmlXTreeObject.prototype.onRowClickDown=function(c){c=c||window.event;var a=this.parentObject.treeNod;a._selectItem(this.parentObject,c)};dhtmlXTreeObject.prototype.ah=function(){var c=new Array();for(var a=0;a&lt;this._selected.length;a++){c[a]=this._selected[a].id}return(c.join(this.dlmtr))};dhtmlXTreeObject.prototype._selectItem=function(m,n){if(this.mR(&quot;onSelect&quot;)){this._onSSCFold=this.ah()}if((!this._amsel)||(!n)||((!n.ctrlKey)&amp;&amp;(!n.metaKey)&amp;&amp;(!n.shiftKey))){this._unselectItems()}if((m.i_sel)&amp;&amp;(this._amsel)&amp;&amp;(n)&amp;&amp;(n.ctrlKey||n.metaKey)){this._unselectItem(m)}else{if((!m.i_sel)&amp;&amp;((!this._amselS)||(this._selected.length==0)||(this._selected[0].parentObject==m.parentObject))){if((this._amsel)&amp;&amp;(n)&amp;&amp;(n.shiftKey)&amp;&amp;(this._selected.length!=0)&amp;&amp;(this._selected[this._selected.length-1].parentObject==m.parentObject)){var h=this._getIndex(this._selected[this._selected.length-1]);var g=this._getIndex(m);if(g&lt;h){var q=h;h=g;g=q}for(var l=h;l&lt;=g;l++){if(!m.parentObject.childNodes[l].i_sel){this._markItem(m.parentObject.childNodes[l])}}}else{this._markItem(m)}}}if(this.mR(&quot;onSelect&quot;)){var o=this.ah();if(o!=this._onSSCFold){this.callEvent(&quot;onSelect&quot;,[o])}}};dhtmlXTreeObject.prototype._markItem=function(a){if(a.mB){a.span.style.color=a.mB}a.span.className=&quot;selectedTreeRow&quot;;a.i_sel=true;this._selected[this._selected.length]=a};dhtmlXTreeObject.prototype.akg=function(c){var a=this.ak(c);if(!a){return null}return this._getIndex(a)};dhtmlXTreeObject.prototype._getIndex=function(a){var g=a.parentObject;for(var c=0;c&lt;g.aE;c++){if(g.childNodes[c]==a){return c}}};dhtmlXTreeObject.prototype._unselectItem=function(c){if((c)&amp;&amp;(c.i_sel)){c.span.className=&quot;standartTreeRow&quot;;if(c.acolor){c.span.style.color=c.acolor}c.i_sel=false;for(var a=0;a&lt;this._selected.length;a++){if(!this._selected[a].i_sel){this._selected.splice(a,1);break}}}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a&lt;this._selected.length;a++){var c=this._selected[a];c.span.className=&quot;standartTreeRow&quot;;if(c.acolor){c.span.style.color=c.acolor}c.i_sel=false}this._selected=new Array()};dhtmlXTreeObject.prototype.onRowSelect=function(h,g,m){h=h||window.event;var c=this.parentObject;if(g){c=g.parentObject}var a=c.treeNod;var l=a.ah();if((!h)||(!h.skipUnSel)){a._selectItem(c,h)}if(!m){if(c.actionHandler){c.actionHandler(c.id,l)}else{a.callEvent(&quot;onClick&quot;,[c.id,l])}}};dhtmlXTreeObject.prototype._correctCheckStates=function(l){if(!this.tscheck){return}if(!l){return}if(l.id==this.fO){return}var g=l.childNodes;var c=0;var a=0;if(l.aE==0){return}for(var h=0;h&lt;l.aE;h++){if(g[h].dscheck){continue}if(g[h].checkstate==0){c=1}else{if(g[h].checkstate==1){a=1}else{c=1;a=1;break}}}if((c)&amp;&amp;(a)){this._setCheck(l,&quot;unsure&quot;)}else{if(c){this._setCheck(l,false)}else{this._setCheck(l,true)}}this._correctCheckStates(l.parentObject)};dhtmlXTreeObject.prototype.onCheckBoxClick=function(a){if(!this.treeNod.callEvent(&quot;onBeforeCheck&quot;,[this.parentObject.id,this.parentObject.checkstate])){return}if(this.parentObject.dscheck){return true}if(this.treeNod.tscheck){if(this.parentObject.checkstate==1){this.treeNod._setSubChecked(false,this.parentObject)}else{this.treeNod._setSubChecked(true,this.parentObject)}}else{if(this.parentObject.checkstate==1){this.treeNod._setCheck(this.parentObject,false)}else{this.treeNod._setCheck(this.parentObject,true)}}this.treeNod._correctCheckStates(this.parentObject.parentObject);return this.treeNod.callEvent(&quot;onCheck&quot;,[this.parentObject.id,this.parentObject.checkstate])};dhtmlXTreeObject.prototype._createItem=function(u,s,o){var v=document.createElement(&quot;table&quot;);v.cellSpacing=0;v.cellPadding=0;v.border=0;if(this.hfMode){v.style.tableLayout=&quot;fixed&quot;}v.style.margin=0;v.style.padding=0;var n=document.createElement(&quot;tbody&quot;);var r=document.createElement(&quot;tr&quot;);var h=document.createElement(&quot;td&quot;);h.className=&quot;standartTreeImage&quot;;if(this._txtimg){var l=document.createElement(&quot;div&quot;);h.appendChild(l);l.className=&quot;dhx_tree_textSign&quot;}else{var l=this._getImg(s.id);l.border=&quot;0&quot;;if(l.tagName==&quot;IMG&quot;){l.align=&quot;absmiddle&quot;}h.appendChild(l);l.style.padding=0;l.style.margin=0;l.style.width=this.def_line_img_x;l.style.height=this.def_line_img_y}var g=document.createElement(&quot;td&quot;);var q=this._getImg(this.cBROf?this.fO:s.id);q.checked=0;this._setSrc(q,this.imPath+this.checkArray[0]);q.style.width=&quot;18px&quot;;q.style.height=&quot;18px&quot;;if(!u){g.style.display=&quot;none&quot;}g.appendChild(q);if((!this.cBROf)&amp;&amp;(q.tagName==&quot;IMG&quot;)){q.align=&quot;absmiddle&quot;}q.onclick=this.onCheckBoxClick;q.treeNod=this;q.parentObject=s;if(!window._KHTMLrv){g.width=&quot;20px&quot;}else{g.width=&quot;16px&quot;}var c=document.createElement(&quot;td&quot;);c.className=&quot;standartTreeImage&quot;;var m=this._getImg(this.timgen?s.id:this.fO);m.onmousedown=this._preventNsDrag;m.ondragstart=this._preventNsDrag;m.border=&quot;0&quot;;if(this._aimgs){m.parentObject=s;if(m.tagName==&quot;IMG&quot;){m.align=&quot;absmiddle&quot;}m.onclick=this.onRowSelect}if(!o){this._setSrc(m,this.iconURL+this.imageArray[0])}c.appendChild(m);m.style.padding=0;m.style.margin=0;if(this.timgen){c.style.width=m.style.width=this.def_img_x;m.style.height=this.def_img_y}else{m.style.width=&quot;0px&quot;;m.style.height=&quot;0px&quot;;if(cU||window._KHTMLrv){c.style.display=&quot;none&quot;}}var a=document.createElement(&quot;td&quot;);a.className=&quot;standartTreeRow&quot;;s.span=document.createElement(&quot;span&quot;);s.span.className=&quot;standartTreeRow&quot;;if(this.mlitems){s.span.style.width=this.mlitems;s.span.style.display=&quot;block&quot;}else{a.noWrap=true}if(_isIE&amp;&amp;_isIE&gt;7){a.style.width=&quot;999999px&quot;}else{if(!window._KHTMLrv){a.style.width=&quot;100%&quot;}}s.span.innerHTML=s.label;a.appendChild(s.span);a.parentObject=s;h.parentObject=s;a.onclick=this.onRowSelect;h.onclick=this.onRowClick;a.ondblclick=this.onRowClick2;if(this.ettip){r.title=s.label}if(this.nz){if(this._aimgs){this.ae.dS(c,this);c.parentObject=s}this.ae.dS(a,this)}s.span.style.paddingLeft=&quot;5px&quot;;s.span.style.paddingRight=&quot;5px&quot;;a.style.verticalAlign=&quot;&quot;;a.style.fontSize=&quot;10pt&quot;;a.style.cursor=this.style_pointer;r.appendChild(h);r.appendChild(g);r.appendChild(c);r.appendChild(a);n.appendChild(r);v.appendChild(n);if(this.ehlt||this.mR(&quot;onMouseIn&quot;)||this.mR(&quot;onMouseOut&quot;)){r.onmousemove=this._itemMouseIn;r[(_isIE)?&quot;onmouseleave&quot;:&quot;onmouseout&quot;]=this._itemMouseOut}return v};dhtmlXTreeObject.prototype.setImagePath=function(a){this.imPath=a;this.iconURL=a};dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a};dhtmlXTreeObject.prototype._getLeafCount=function(h){var g=0;for(var c=0;c&lt;h.aE;c++){if(h.childNodes[c].aE==0){g++}}return g};dhtmlXTreeObject.prototype._getChildCounterValue=function(c){var a=this.ak(c);if(!a){return 0}if((a.unParsed)||((!a.XMLload)&amp;&amp;(this.XMLsource))){return a._acc}switch(this.childCalc){case 1:return a.aE;break;case 2:return this._getLeafCount(a);break;case 3:return a._acc;break;case 4:return a._acc;break}};dhtmlXTreeObject.prototype._fixChildCountLabel=function(m,h){if(this.childCalc==null){return}if((m.unParsed)||((!m.XMLload)&amp;&amp;(this.XMLsource))){if(m._acc){m.span.innerHTML=m.label+this.htmlcA+m._acc+this.htmlcB}else{m.span.innerHTML=m.label}return}switch(this.childCalc){case 1:if(m.aE!=0){m.span.innerHTML=m.label+this.htmlcA+m.aE+this.htmlcB}else{m.span.innerHTML=m.label}break;case 2:var l=this._getLeafCount(m);if(l!=0){m.span.innerHTML=m.label+this.htmlcA+l+this.htmlcB}else{m.span.innerHTML=m.label}break;case 3:if(m.aE!=0){var g=0;for(var c=0;c&lt;m.aE;c++){if(!m.childNodes[c]._acc){m.childNodes[c]._acc=0}g+=m.childNodes[c]._acc*1}g+=m.aE*1;m.span.innerHTML=m.label+this.htmlcA+g+this.htmlcB;m._acc=g}else{m.span.innerHTML=m.label;m._acc=0}if((m.parentObject)&amp;&amp;(m.parentObject!=this.ao)){this._fixChildCountLabel(m.parentObject)}break;case 4:if(m.aE!=0){var g=0;for(var c=0;c&lt;m.aE;c++){if(!m.childNodes[c]._acc){m.childNodes[c]._acc=1}g+=m.childNodes[c]._acc*1}m.span.innerHTML=m.label+this.htmlcA+g+this.htmlcB;m._acc=g}else{m.span.innerHTML=m.label;m._acc=1}if((m.parentObject)&amp;&amp;(m.parentObject!=this.ao)){this._fixChildCountLabel(m.parentObject)}break}};dhtmlXTreeObject.prototype.setChildCalcMode=function(a){switch(a){case &quot;child&quot;:this.childCalc=1;break;case &quot;leafs&quot;:this.childCalc=2;break;case &quot;childrec&quot;:this.childCalc=3;break;case &quot;leafsrec&quot;:this.childCalc=4;break;case &quot;disabled&quot;:this.childCalc=null;break;default:this.childCalc=4}};dhtmlXTreeObject.prototype.setChildCalcHTML=function(c,a){this.htmlcA=c;this.htmlcB=a};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent(&quot;onRightClick&quot;,a)};dhtmlXTreeObject.prototype.ck=function(a){this.attachEvent(&quot;onClick&quot;,a)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent(&quot;onSelect&quot;,a)};dhtmlXTreeObject.prototype.eG=function(a){this.XMLsource=a};dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent(&quot;onCheck&quot;,a)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent(&quot;onOpenStart&quot;,a)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent(&quot;onOpenStart&quot;,a)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent(&quot;onOpenEnd&quot;,a)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent(&quot;onDblClick&quot;,a)};dhtmlXTreeObject.prototype.Jo=function(c){var a=this.ak(c);if(!a){return 0}this._xopenAll(a)};dhtmlXTreeObject.prototype.getOpenState=function(c){var a=this.ak(c);if(!a){return &quot;&quot;}return this._getOpenState(a)};dhtmlXTreeObject.prototype.closeAllItems=function(c){if(c===window.undefined){c=this.fO}var a=this.ak(c);if(!a){return 0}this._xcloseAll(a);this.cB.childNodes[0].border=&quot;1&quot;;this.cB.childNodes[0].border=&quot;0&quot;};dhtmlXTreeObject.prototype.setUserData=function(h,c,g){var a=this.ak(h,0,true);if(!a){return}if(c==&quot;hint&quot;){a.ao.childNodes[0].childNodes[0].title=g}if(typeof(a.userData[&quot;t_&quot;+c])==&quot;undefined&quot;){if(!a.PJ){a.PJ=c}else{a.PJ+=&quot;,&quot;+c}}a.userData[&quot;t_&quot;+c]=g};dhtmlXTreeObject.prototype.getUserData=function(g,c){var a=this.ak(g,0,true);if(!a){return}return a.userData[&quot;t_&quot;+c]};dhtmlXTreeObject.prototype.getItemColor=function(g){var a=this.ak(g);if(!a){return 0}var c=new Object();if(a.acolor){c.acolor=a.acolor}if(a.mB){c.mB=a.mB}return c};dhtmlXTreeObject.prototype.setItemColor=function(g,c,h){if((g)&amp;&amp;(g.span)){var a=g}else{var a=this.ak(g)}if(!a){return 0}else{if(a.i_sel){if(h){a.span.style.color=h}}else{if(c){a.span.style.color=c}}if(h){a.mB=h}if(c){a.acolor=c}}};dhtmlXTreeObject.prototype.getItemText=function(c){var a=this.ak(c);if(!a){return 0}return(a.ao.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML)};dhtmlXTreeObject.prototype.getParentId=function(c){var a=this.ak(c);if((!a)||(!a.parentObject)){return &quot;&quot;}return a.parentObject.id};dhtmlXTreeObject.prototype.changeItemId=function(c,g){if(c==g){return}var a=this.ak(c);if(!a){return 0}a.id=g;a.span.contextMenuId=g;this.gQ[g]=this.gQ[c];delete this.gQ[c]};dhtmlXTreeObject.prototype.doCut=function(){if(this.nodeCut){this.clearCut()}this.nodeCut=(new Array()).concat(this._selected);for(var a=0;a&lt;this.nodeCut.length;a++){var c=this.nodeCut[a];c._cimgs=new Array();c._cimgs[0]=c.images[0];c._cimgs[1]=c.images[1];c._cimgs[2]=c.images[2];c.images[0]=c.images[1]=c.images[2]=this.cutImage;this._correctPlus(c)}};dhtmlXTreeObject.prototype.doPaste=function(g){var a=this.ak(g);if(!a){return 0}for(var c=0;c&lt;this.nodeCut.length;c++){if(this._checkPNodes(a,this.nodeCut[c])){continue}this._moveNode(this.nodeCut[c],a)}this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a&lt;this.nodeCut.length;a++){var c=this.nodeCut[a];c.images[0]=c._cimgs[0];c.images[1]=c._cimgs[1];c.images[2]=c._cimgs[2];this._correctPlus(c)}this.nodeCut=new Array()};dhtmlXTreeObject.prototype._moveNode=function(a,c){var m=this.dadmodec;if(m==1){var l=c;if(this.dadmodefix&lt;0){while(true){l=this._getPrevNode(l);if((l== -1)){l=this.ao;break}if((l.tr==0)||(l.tr.style.display==&quot;&quot;)||(!l.parentObject)){break}}var h=l;var g=c}else{if((l.tr)&amp;&amp;(l.tr.nextSibling)&amp;&amp;(l.tr.nextSibling.nodem)&amp;&amp;(this._getOpenState(l)&lt;1)){l=l.tr.nextSibling.nodem}else{l=this._getNextNode(l);if((l== -1)){l=this.ao}}var g=l;var h=c}if(this._getNodeLevel(h,0)&gt;this._getNodeLevel(g,0)){if(!this.dropLower){return this._moveNodeTo(a,h.parentObject)}else{if(g.id!=this.fO){return this._moveNodeTo(a,g.parentObject,g)}else{return this._moveNodeTo(a,this.ao,null)}}}else{return this._moveNodeTo(a,g.parentObject,g)}}else{return this._moveNodeTo(a,c)}};dhtmlXTreeObject.prototype._fixNodesCollection=function(o,m){var c=0;var h=0;var n=o.childNodes;var a=o.aE-1;if(m==n[a]){return}for(var l=0;l&lt;a;l++){if(n[l]==n[a]){n[l]=n[l+1];n[l+1]=n[a]}}for(var l=0;l&lt;a+1;l++){if(c){var g=n[l];n[l]=c;c=g}else{if(n[l]==m){c=n[l];n[l]=n[a]}}}};dhtmlXTreeObject.prototype._recreateBranch=function(m,o,l,a){var c;var q=&quot;&quot;;if(l){for(c=0;c&lt;o.aE;c++){if(o.childNodes[c]==l){break}}if(c!=0){l=o.childNodes[c-1]}else{q=&quot;TOP&quot;;l=&quot;&quot;}}var g=this.BX;this.BX=null;var n=this._attachChildNode(o,m.id,m.label,0,m.images[0],m.images[1],m.images[2],q,0,l);n.PJ=m.PJ;n.userData=m.userData.clone();if(m._attrs){n._attrs={};for(var h in m._attrs){n._attrs[h]=m._attrs[h]}}n.XMLload=m.XMLload;if(g){this.BX=g;this.BX(n.id)}if(m.treeNod.dpcpy){m.treeNod.ak(m.id)}else{n.unParsed=m.unParsed}this._correctPlus(n);for(var c=0;c&lt;m.aE;c++){this._recreateBranch(m.childNodes[c],n,0,1)}if((!a)&amp;&amp;(this.childCalc)){this._redrawFrom(this,o)}return n};dhtmlXTreeObject.prototype._moveNodeTo=function(u,w,s){if(u.treeNod._nonTrivialNode){return u.treeNod._nonTrivialNode(this,w,s,u)}if(this._checkPNodes(w,u)){return false}if(w.acE){var n=(u.treeNod.lWin!=w.lWin)}else{var n=(u.treeNod.lWin!=w.treeNod.lWin)}if(!this.callEvent(&quot;onDrag&quot;,[u.id,w.id,(s?s.id:null),u.treeNod,w.treeNod])){return false}if((w.XMLload==0)&amp;&amp;(this.XMLsource)){w.XMLload=1;this._loadDynXML(w.id)}this.hx(w.id);var g=u.treeNod;var q=u.parentObject.aE;var r=u.parentObject;if((n)||(g.dpcpy)){var h=u.id;u=this._recreateBranch(u,w,s);if(!g.dpcpy){g.deleteItem(h)}}else{var l=w.aE;var v=w.childNodes;if(l==0){w._open=true}g._unselectItem(u);v[l]=u;u.treeNod=w.treeNod;w.aE++;var o=this._drawNewTr(v[l].ao);if(!s){w.ao.childNodes[0].appendChild(o);if(this.dadmode==1){this._fixNodesCollection(w,s)}}else{w.ao.childNodes[0].insertBefore(o,s.tr);this._fixNodesCollection(w,s);v=w.childNodes}}if((!g.dpcpy)&amp;&amp;(!n)){var a=u.tr;if((document.all)&amp;&amp;(navigator.appVersion.search(/MSIE\ 5\.0/gi)!= -1)){window.setTimeout(function(){a.parentNode.removeChild(a)},250)}else{u.parentObject.ao.childNodes[0].removeChild(u.tr)}if((!s)||(w!=u.parentObject)){for(var m=0;m&lt;r.aE;m++){if(r.childNodes[m].id==u.id){r.childNodes[m]=0;break}}}else{r.childNodes[r.aE-1]=0}g._compressChildList(r.aE,r.childNodes);r.aE--}if((!n)&amp;&amp;(!g.dpcpy)){u.tr=o;o.nodem=u;u.parentObject=w;if(g!=w.treeNod){if(u.treeNod._registerBranch(u,g)){return}this._clearStyles(u);this._redrawFrom(this,u.parentObject);if(this.BX){this.BX(u.id)}}this._correctPlus(w);this._correctLine(w);this._correctLine(u);this._correctPlus(u);if(s){this._correctPlus(s)}else{if(w.aE&gt;=2){this._correctPlus(v[w.aE-2]);this._correctLine(v[w.aE-2])}}this._correctPlus(v[w.aE-1]);if(this.tscheck){this._correctCheckStates(w)}if(g.tscheck){g._correctCheckStates(r)}}if(q&gt;1){g._correctPlus(r.childNodes[q-2]);g._correctLine(r.childNodes[q-2])}g._correctPlus(r);g._correctLine(r);this._fixChildCountLabel(w);g._fixChildCountLabel(r);this.callEvent(&quot;onDrop&quot;,[u.id,w.id,(s?s.id:null),g,w.treeNod]);return u.id};dhtmlXTreeObject.prototype._clearStyles=function(a){if(!a.ao){return}var h=a.ao.childNodes[0].childNodes[0].childNodes[1];var c=h.nextSibling.nextSibling;a.span.innerHTML=a.label;a.i_sel=false;if(a._aimgs){this.ae.fG(h.nextSibling)}if(this.checkBoxOff){h.childNodes[0].style.display=&quot;&quot;;h.childNodes[0].onclick=this.onCheckBoxClick;this._setSrc(h.childNodes[0],this.imPath+this.checkArray[a.checkstate])}else{h.style.display=&quot;none&quot;}h.childNodes[0].treeNod=this;this.ae.fG(c);if(this.nz){this.ae.dS(c,this)}if(this._aimgs){this.ae.dS(h.nextSibling,this)}c.childNodes[0].className=&quot;standartTreeRow&quot;;c.onclick=this.onRowSelect;c.ondblclick=this.onRowClick2;h.previousSibling.onclick=this.onRowClick;this._correctLine(a);this._correctPlus(a);for(var g=0;g&lt;a.aE;g++){this._clearStyles(a.childNodes[g])}};dhtmlXTreeObject.prototype._registerBranch=function(c,a){if(a){a._globalIdStorageSub(c.id)}c.id=this._globalIdStorageAdd(c.id,c);c.treeNod=this;for(var g=0;g&lt;c.aE;g++){this._registerBranch(c.childNodes[g],a)}return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=ap(a)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=true;this.attachEvent(&quot;onMouseIn&quot;,a)};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=true;this.attachEvent(&quot;onMouseOut&quot;,a)};dhtmlXTreeObject.prototype.enableMercyDrag=function(a){this.dpcpy=ap(a)};dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=ap(a)};dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=ap(a)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(c,a){this.checkBoxOff=ap(c);this.cBROf=(!(this.checkBoxOff||ap(a)))};dhtmlXTreeObject.prototype.setStdImages=function(a,g,c){this.imageArray[0]=a;this.imageArray[1]=g;this.imageArray[2]=c};dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=ap(a)};dhtmlXTreeObject.prototype.setImageArrays=function(h,a,m,l,g,c){switch(h){case &quot;plus&quot;:this.plusArray[0]=a;this.plusArray[1]=m;this.plusArray[2]=l;this.plusArray[3]=g;this.plusArray[4]=c;break;case &quot;minus&quot;:this.minusArray[0]=a;this.minusArray[1]=m;this.minusArray[2]=l;this.minusArray[3]=g;this.minusArray[4]=c;break}};dhtmlXTreeObject.prototype.hx=function(c){this.skipLock=true;var a=this.ak(c);if(!a){return 0}else{return this._openItem(a)}this.skipLock=false};dhtmlXTreeObject.prototype._openItem=function(a){var c=this._getOpenState(a);if((c&lt;0)||(((this.XMLsource)&amp;&amp;(!a.XMLload)))){if(!this.callEvent(&quot;onOpenStart&quot;,[a.id,c])){return 0}this._HideShow(a,2);if(this.mR(&quot;onOpenEnd&quot;)){if(this.onXLE==this._epnFHe){this._epnFHe(this,a.id,true)}if(!this.xmlstate|| !this.XMLsource){this.callEvent(&quot;onOpenEnd&quot;,[a.id,this._getOpenState(a)])}else{this._oie_onXLE.push(this.onXLE);this.onXLE=this._epnFHe}}}else{if(this.ahK){this._HideShow(a,2)}}if(a.parentObject&amp;&amp; !this._skip_open_parent){this._openItem(a.parentObject)}};dhtmlXTreeObject.prototype.KW=function(c){if(this.fO==c){return 0}this.skipLock=true;var a=this.ak(c);if(!a){return 0}if(a.closeble){this._HideShow(a,1)}this.skipLock=false};dhtmlXTreeObject.prototype.sS=function(c){var a=this.ak(c);if(!a){return 0}return this._getNodeLevel(a,0)};dhtmlXTreeObject.prototype.setItemCloseable=function(g,a){a=ap(a);if((g)&amp;&amp;(g.span)){var c=g}else{var c=this.ak(g)}if(!c){return 0}c.closeble=a};dhtmlXTreeObject.prototype._getNodeLevel=function(a,c){if(a.parentObject){return this._getNodeLevel(a.parentObject,c+1)}return(c)};dhtmlXTreeObject.prototype.hasChildren=function(c){var a=this.ak(c);if(!a){return 0}else{if((this.XMLsource)&amp;&amp;(!a.XMLload)){return true}else{return a.aE}}};dhtmlXTreeObject.prototype._getLeafCount=function(h){var g=0;for(var c=0;c&lt;h.aE;c++){if(h.childNodes[c].aE==0){g++}}return g};dhtmlXTreeObject.prototype.setItemText=function(h,g,c){var a=this.ak(h);if(!a){return 0}a.label=g;a.span.innerHTML=g;if(this.childCalc){this._fixChildCountLabel(a)}a.span.parentNode.parentNode.title=c||&quot;&quot;};dhtmlXTreeObject.prototype.getItemTooltip=function(c){var a=this.ak(c);if(!a){return &quot;&quot;}return(a.span.parentNode.parentNode._dhx_title||a.span.parentNode.parentNode.title||&quot;&quot;)};dhtmlXTreeObject.prototype.refreshItem=function(c){if(!c){c=this.fO}var a=this.ak(c);this.cx(c);this._loadDynXML(c)};dhtmlXTreeObject.prototype.dC=function(h,a,l,g){var c=this.ak(h);if(!c){return 0}c.images[1]=l;c.images[2]=g;c.images[0]=a;this._correctPlus(c)};dhtmlXTreeObject.prototype.setItemImage=function(g,a,h){var c=this.ak(g);if(!c){return 0}if(h){c.images[1]=a;c.images[2]=h}else{c.images[0]=a}this._correctPlus(c)};dhtmlXTreeObject.prototype.Mn=function(g){var a=this.ak(g,0,1);if(!a){return 0}if(a.unParsed){return(this._getSubItemsXML(a.unParsed))}var c=&quot;&quot;;for(i=0;i&lt;a.aE;i++){if(!c){c=&quot;&quot;+a.childNodes[i].id}else{c+=this.dlmtr+a.childNodes[i].id}}return c};dhtmlXTreeObject.prototype._getAllScraggyItems=function(g){var h=&quot;&quot;;for(var c=0;c&lt;g.aE;c++){if((g.childNodes[c].unParsed)||(g.childNodes[c].aE&gt;0)){if(g.childNodes[c].unParsed){var a=this._getAllScraggyItemsXML(g.childNodes[c].unParsed,1)}else{var a=this._getAllScraggyItems(g.childNodes[c])}if(a){if(h){h+=this.dlmtr+a}else{h=a}}}else{if(!h){h=&quot;&quot;+g.childNodes[c].id}else{h+=this.dlmtr+g.childNodes[c].id}}}return h};dhtmlXTreeObject.prototype._getAllFatItems=function(g){var h=&quot;&quot;;for(var c=0;c&lt;g.aE;c++){if((g.childNodes[c].unParsed)||(g.childNodes[c].aE&gt;0)){if(!h){h=&quot;&quot;+g.childNodes[c].id}else{h+=this.dlmtr+g.childNodes[c].id}if(g.childNodes[c].unParsed){var a=this._getAllFatItemsXML(g.childNodes[c].unParsed,1)}else{var a=this._getAllFatItems(g.childNodes[c])}if(a){h+=this.dlmtr+a}}}return h};dhtmlXTreeObject.prototype._getAllSubItems=function(m,l,h){if(h){c=h}else{var c=this.ak(m)}if(!c){return 0}l=&quot;&quot;;for(var g=0;g&lt;c.aE;g++){if(!l){l=&quot;&quot;+c.childNodes[g].id}else{l+=this.dlmtr+c.childNodes[g].id}var a=this._getAllSubItems(0,l,c.childNodes[g]);if(a){l+=this.dlmtr+a}}if(c.unParsed){l=this._getAllSubItemsXML(m,l,c.unParsed)}return l};dhtmlXTreeObject.prototype.hE=function(h,g,c){g=ap(g);var a=this.ak(h);if((!a)||(!a.parentObject)){return 0}if(this.XMLloadingWarning){a.parentObject.openMe=1}else{this._openItem(a.parentObject)}var l=null;if(c){l=new Object;l.ctrlKey=true;if(a.i_sel){l.skipUnSel=true}}if(g){this.onRowSelect(l,a.ao.childNodes[0].childNodes[0].childNodes[3],false)}else{this.onRowSelect(l,a.ao.childNodes[0].childNodes[0].childNodes[3],true)}};dhtmlXTreeObject.prototype.getSelectedItemText=function(){var c=new Array();for(var a=0;a&lt;this._selected.length;a++){c[a]=this._selected[a].span.innerHTML}return(c.join(this.dlmtr))};dhtmlXTreeObject.prototype._compressChildList=function(a,g){a--;for(var c=0;c&lt;a;c++){if(g[c]==0){g[c]=g[c+1];g[c+1]=0}}};dhtmlXTreeObject.prototype._deleteNode=function(n,l,q){if((!l)||(!l.parentObject)){return 0}var a=0;var c=0;if(l.tr.nextSibling){a=l.tr.nextSibling.nodem}if(l.tr.previousSibling){c=l.tr.previousSibling.nodem}var m=l.parentObject;var g=m.aE;var o=m.childNodes;for(var h=0;h&lt;g;h++){if(o[h].id==n){if(!q){m.ao.childNodes[0].removeChild(o[h].tr)}o[h]=0;break}}this._compressChildList(g,o);if(!q){m.aE--}if(a){this._correctPlus(a);this._correctLine(a)}if(c){this._correctPlus(c);this._correctLine(c)}if(this.tscheck){this._correctCheckStates(m)}if(!q){this._globalIdStorageRecSub(l)}};dhtmlXTreeObject.prototype.setCheck=function(g,c){var a=this.ak(g,0,1);if(!a){return}if(c===&quot;unsure&quot;){this._setCheck(a,c)}else{c=ap(c);if((this.tscheck)&amp;&amp;(this.smcheck)){this._setSubChecked(c,a)}else{this._setCheck(a,c)}}if(this.smcheck){this._correctCheckStates(a.parentObject)}};dhtmlXTreeObject.prototype._setCheck=function(a,g){if(!a){return}if(((a.parentObject._r_logic)||(this._frbtr))&amp;&amp;(g)){if(this._frbtrs){if(this._frbtrL){this.setCheck(this._frbtrL.id,0)}this._frbtrL=a}else{for(var c=0;c&lt;a.parentObject.aE;c++){this._setCheck(a.parentObject.childNodes[c],0)}}}var h=a.ao.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(g==&quot;unsure&quot;){a.checkstate=2}else{if(g){a.checkstate=1}else{a.checkstate=0}}if(a.dscheck){a.checkstate=a.dscheck}this._setSrc(h,this.imPath+((a.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[a.checkstate])};dhtmlXTreeObject.prototype.setSubChecked=function(g,c){var a=this.ak(g);this._setSubChecked(c,a);this._correctCheckStates(a.parentObject)};dhtmlXTreeObject.prototype._setSubChecked=function(g,a){g=ap(g);if(!a){return}if(((a.parentObject._r_logic)||(this._frbtr))&amp;&amp;(g)){for(var c=0;c&lt;a.parentObject.aE;c++){this._setSubChecked(0,a.parentObject.childNodes[c])}}if(a.unParsed){this._setSubCheckedXML(g,a.unParsed)}if(a._r_logic||this._frbtr){this._setSubChecked(g,a.childNodes[0])}else{for(var c=0;c&lt;a.aE;c++){this._setSubChecked(g,a.childNodes[c])}}var h=a.ao.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(g){a.checkstate=1}else{a.checkstate=0}if(a.dscheck){a.checkstate=a.dscheck}this._setSrc(h,this.imPath+((a.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[a.checkstate])};dhtmlXTreeObject.prototype.ajT=function(c){var a=this.ak(c);if(!a){return}return a.checkstate};dhtmlXTreeObject.prototype.cx=function(h){var a=this.ak(h);if(!a){return}var c=a.aE;for(var g=0;g&lt;c;g++){this._deleteNode(a.childNodes[0].id,a.childNodes[0])}};dhtmlXTreeObject.prototype.deleteItem=function(g,a){if((!this.ajc)||(this.ajc(g))){var c=this._deleteItem(g,a);if(c){this._fixChildCountLabel(c)}}this.cB.childNodes[0].border=&quot;1&quot;;this.cB.childNodes[0].border=&quot;0&quot;};dhtmlXTreeObject.prototype._deleteItem=function(m,c,l){c=ap(c);var a=this.ak(m);if(!a){return}var g=this.getParentId(m);var h=a.parentObject;this._deleteNode(m,a,l);if(this._editCell&amp;&amp;this._editCell.id==m){this._editCell=null}this._correctPlus(h);this._correctLine(h);if((c)&amp;&amp;(g!=this.fO)){this.hE(g,1)}return h};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var c=0;c&lt;a.aE;c++){this._globalIdStorageRecSub(a.childNodes[c]);this._globalIdStorageSub(a.childNodes[c].id)}this._globalIdStorageSub(a.id);var g=a;g.span=null;g.tr.nodem=null;g.tr=null;g.ao=null};dhtmlXTreeObject.prototype.insertNewNext=function(o,s,r,g,m,l,h,c,a){var n=this.ak(o);if((!n)||(!n.parentObject)){return(0)}var q=this._attachChildNode(0,s,r,g,m,l,h,c,a,n);if((!this.XMLloadingWarning)&amp;&amp;(this.childCalc)){this._fixChildCountLabel(n.parentObject)}return q};dhtmlXTreeObject.prototype.afD=function(g,a){var c=this.ak(g);if((!c)||(a&gt;=c.aE)){return null}return c.childNodes[a].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(g,a){var c=this.ak(g);if((!c)||(a&gt;=c.aE)){return null}return c.childNodes[a].id};dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent(&quot;onDrag&quot;,a)};dhtmlXTreeObject.prototype._clearMove=function(){if(this._lastMark){this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,&quot;&quot;);this._lastMark=null}this.selectionBar.style.display=&quot;none&quot;;this.cB.className=this.cB.className.replace(&quot; selectionBox&quot;,&quot;&quot;)};dhtmlXTreeObject.prototype.enableDragAndDrop=function(c,a){if(c==&quot;temporary_disabled&quot;){this.dADTempOff=false;c=true}else{this.dADTempOff=true}this.nz=ap(c);if(this.nz){this.ae.eH(this.cB,this)}if(arguments.length&gt;1){this._ddronr=(!ap(a))}};dhtmlXTreeObject.prototype._setMove=function(l,g,n){if(l.parentObject.span){var h=dg(l);var c=dg(this.cB)-this.cB.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;if(this.dadmode==2){var m=n-h+(document.body.scrollTop||document.documentElement.scrollTop)-2-l.offsetHeight/2;if((Math.abs(m)-l.offsetHeight/6)&gt;0){this.dadmodec=1;if(m&lt;0){this.dadmodefix=0-l.offsetHeight}}else{this.dadmodec=0}}if(this.dadmodec==0){var a=l.parentObject.span;a.className+=&quot; dragAndDropRow&quot;;this._lastMark=a}else{this._clearMove();this.selectionBar.style.top=(h-c+((parseInt(l.parentObject.span.parentNode.previousSibling.childNodes[0].style.height)||18)-1)+this.dadmodefix)+&quot;px&quot;;this.selectionBar.style.left=&quot;5px&quot;;if(this.cB.offsetWidth&gt;20){this.selectionBar.style.width=(this.cB.offsetWidth-(aq?30:25))+&quot;px&quot;}this.selectionBar.style.display=&quot;&quot;}this._autoScroll(null,h,c)}};dhtmlXTreeObject.prototype._autoScroll=function(g,c,a){if(this.autoScroll){if(g){c=dg(g);a=dg(this.cB)-this.cB.scrollTop}if((c-a-parseInt(this.cB.scrollTop))&gt;(parseInt(this.cB.offsetHeight)-50)){this.cB.scrollTop=parseInt(this.cB.scrollTop)+20}if((c-a)&lt;(parseInt(this.cB.scrollTop)+30)){this.cB.scrollTop=parseInt(this.cB.scrollTop)-20}}};dhtmlXTreeObject.prototype.gL=function(l,h){if(!this.dADTempOff){return null}var g=l.parentObject;if(!this.callEvent(&quot;onBeforeDrag&quot;,[g.id,h])){return null}if(!g.i_sel){this._selectItem(g,h)}this._checkMSelectionLogic();var c=document.createElement(&quot;div&quot;);var m=new Array();if(this._itim_dg){for(var a=0;a&lt;this._selected.length;a++){m[a]=&quot;<TABLE cellspacing="0" cellpadding="0"><TBODY><TR><TD>&lt;img width='18px' height='18px' src='&quot;+this._getSrc(this._selected[a].span.parentNode.previousSibling.childNodes[0])+&quot;'&gt;</TD><TD>&quot;+this._selected[a].span.innerHTML+&quot;</TD></TR></TBODY></TABLE>&quot;}}else{m=this.getSelectedItemText().split(this.dlmtr)}c.innerHTML=m.join(&quot;&quot;);c.style.position=&quot;absolute&quot;;c.className=&quot;dragSpanDiv&quot;;this.jG=(new Array()).concat(this._selected);return c};dhtmlXTreeObject.prototype._focusNode=function(a){var c=dg(a.ao)-dg(this.cB);if((c&gt;(this.cB.offsetHeight-30))||(c&lt;0)){this.cB.scrollTop=c+this.cB.scrollTop}};dhtmlXTreeObject.prototype._preventNsDrag=function(a){if((a)&amp;&amp;(a.preventDefault)){a.preventDefault();return false}return false};dhtmlXTreeObject.prototype.BK=function(n,o,a){if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}if(!a.parentObject){a=this.ao.ao.childNodes[0].childNodes[0].childNodes[1].childNodes[0];this.dadmodec=0}this._clearMove();var m=n.parentObject.treeNod;if((m)&amp;&amp;(m._clearMove)){m._clearMove(&quot;&quot;)}if((!this.dragMove)||(this.dragMove())){if((!m)||(!m._clearMove)||(!m.jG)){var h=new Array(n.parentObject)}else{var h=m.jG}var c=a.parentObject;for(var l=0;l&lt;h.length;l++){var g=this._moveNode(h[l],c);if((this.dadmodec)&amp;&amp;(g!==false)){c=this.ak(g,true,true)}if((g)&amp;&amp;(!this._sADnD)){this.hE(g,0,1)}}}if(m){m.jG=new Array()}};dhtmlXTreeObject.prototype.tY=function(m,h,a,o){if(!this.dADTempOff){return 0}var n=h.parentObject;var c=m.parentObject;if((!c)&amp;&amp;(this._ddronr)){return}if(!this.callEvent(&quot;onDragIn&quot;,[n.id,c?c.id:null,n.treeNod,this])){if(c){this._autoScroll(m)}return 0}if(!c){this.cB.className+=&quot; selectionBox&quot;}else{if(n.childNodes==null){this._setMove(m,a,o);return m}var l=n.treeNod;for(var g=0;g&lt;l.jG.length;g++){if(this._checkPNodes(c,l.jG[g])){this._autoScroll(m);return 0}}this.selectionBar.parentNode.removeChild(this.selectionBar);c.span.parentNode.appendChild(this.selectionBar);this._setMove(m,a,o);if(this._getOpenState(c)&lt;=0){this._autoOpenId=c.id;this._autoOpenTimer=window.setTimeout(new jP(this._autoOpenItem,this),1000)}}return m};dhtmlXTreeObject.prototype._autoOpenItem=function(c,a){a.hx(a._autoOpenId)};dhtmlXTreeObject.prototype.iX=function(a){this._clearMove();if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}};dhtmlXTreeObject.prototype._getNextNode=function(a,c){if((!c)&amp;&amp;(a.aE)){return a.childNodes[0]}if(a==this.ao){return-1}if((a.tr)&amp;&amp;(a.tr.nextSibling)&amp;&amp;(a.tr.nextSibling.nodem)){return a.tr.nextSibling.nodem}return this._getNextNode(a.parentObject,true)};dhtmlXTreeObject.prototype._lastChild=function(a){if(a.aE){return this._lastChild(a.childNodes[a.aE-1])}else{return a}};dhtmlXTreeObject.prototype._getPrevNode=function(a,c){if((a.tr)&amp;&amp;(a.tr.previousSibling)&amp;&amp;(a.tr.previousSibling.nodem)){return this._lastChild(a.tr.previousSibling.nodem)}if(a.parentObject){return a.parentObject}else{return-1}};dhtmlXTreeObject.prototype.findItem=function(a,g,c){var h=this._findNodeByLabel(a,g,(c?this.ao:null));if(h){this.hE(h.id,true);this._focusNode(h);return h.id}else{return null}};dhtmlXTreeObject.prototype.findItemIdByLabel=function(a,g,c){var h=this._findNodeByLabel(a,g,(c?this.ao:null));if(h){return h.id}else{return null}};dhtmlXTreeObject.prototype.findStrInXML=function(c,g,l){if(!c.childNodes&amp;&amp;c.item){return this.findStrInJSON(c,g,l)}if(!c.childNodes){return false}for(var a=0;a&lt;c.childNodes.length;a++){if(c.childNodes[a].nodeType==1){var h=c.childNodes[a].getAttribute(g);if(!h&amp;&amp;c.childNodes[a].tagName==&quot;itemtext&quot;){h=c.childNodes[a].firstChild.data}if((h)&amp;&amp;(h.toLowerCase().search(l)!= -1)){return true}if(this.findStrInXML(c.childNodes[a],g,l)){return true}}}return false};dhtmlXTreeObject.prototype.findStrInJSON=function(c,g,l){for(var a=0;a&lt;c.item.length;a++){var h=c.item[a].text;if((h)&amp;&amp;(h.toLowerCase().search(l)!= -1)){return true}if(c.item[a].item&amp;&amp;this.findStrInJSON(c.item[a],g,l)){return true}}return false};dhtmlXTreeObject.prototype._findNodeByLabel=function(a,l,h){var a=a.replace(new RegExp(&quot;^( )+&quot;),&quot;&quot;).replace(new RegExp(&quot;( )+$&quot;),&quot;&quot;);a=new RegExp(a.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,&quot;\\$1&quot;).replace(/ /gi,&quot;.*&quot;),&quot;gi&quot;);if(!h){h=this._selected[0];if(!h){h=this.ao}}var c=h;if(!l){if((h.unParsed)&amp;&amp;(this.findStrInXML(h.unParsed.d,&quot;text&quot;,a))){this.reParse(h)}h=this._getNextNode(c);if(h== -1){h=this.ao.childNodes[0]}}else{var g=this._getPrevNode(c);if(g== -1){g=this._lastChild(this.ao)}if((g.unParsed)&amp;&amp;(this.findStrInXML(g.unParsed.d,&quot;text&quot;,a))){this.reParse(g);h=this._getPrevNode(c)}else{h=g}if(h== -1){h=this._lastChild(this.ao)}}while((h)&amp;&amp;(h!=c)){if((h.label)&amp;&amp;(h.label.search(a)!= -1)){return(h)}if(!l){if(h== -1){if(c==this.ao){break}h=this.ao.childNodes[0]}if((h.unParsed)&amp;&amp;(this.findStrInXML(h.unParsed.d,&quot;text&quot;,a))){this.reParse(h)}h=this._getNextNode(h);if(h== -1){h=this.ao}}else{var g=this._getPrevNode(h);if(g== -1){g=this._lastChild(this.ao)}if((g.unParsed)&amp;&amp;(this.findStrInXML(g.unParsed.d,&quot;text&quot;,a))){this.reParse(g);h=this._getPrevNode(h)}else{h=g}if(h== -1){h=this._lastChild(this.ao)}}}return null};dhtmlXTreeObject.prototype.moveItem=function(o,c,q,a){var l=this.ak(o);if(!l){return(0)}var m=null;switch(c){case &quot;right&quot;:alert(&quot;Not supported yet&quot;);break;case &quot;item_child&quot;:var g=(a||this).ak(q);if(!g){return(0)}m=(a||this)._moveNodeTo(l,g,0);break;case &quot;item_sibling&quot;:var g=(a||this).ak(q);if(!g){return(0)}m=(a||this)._moveNodeTo(l,g.parentObject,g);break;case &quot;item_sibling_next&quot;:var g=(a||this).ak(q);if(!g){return(0)}if((g.tr)&amp;&amp;(g.tr.nextSibling)&amp;&amp;(g.tr.nextSibling.nodem)){m=(a||this)._moveNodeTo(l,g.parentObject,g.tr.nextSibling.nodem)}else{m=(a||this)._moveNodeTo(l,g.parentObject)}break;case &quot;left&quot;:if(l.parentObject.parentObject){m=this._moveNodeTo(l,l.parentObject.parentObject,l.parentObject)}break;case &quot;up&quot;:var n=this._getPrevNode(l);if((n== -1)||(!n.parentObject)){return null}m=this._moveNodeTo(l,n.parentObject,n);break;case &quot;up_strict&quot;:var n=this._getIndex(l);if(n!=0){m=this._moveNodeTo(l,l.parentObject,l.parentObject.childNodes[n-1])}break;case &quot;down_strict&quot;:var n=this._getIndex(l);var h=l.parentObject.aE-2;if(n==h){m=this._moveNodeTo(l,l.parentObject)}else{if(n&lt;h){m=this._moveNodeTo(l,l.parentObject,l.parentObject.childNodes[n+2])}}break;case &quot;down&quot;:var n=this._getNextNode(this._lastChild(l));if((n== -1)||(!n.parentObject)){return}if(n.parentObject==l.parentObject){var n=this._getNextNode(n)}if(n== -1){m=this._moveNodeTo(l,l.parentObject)}else{if((n== -1)||(!n.parentObject)){return}m=this._moveNodeTo(l,n.parentObject,n)}break}if(_isIE&amp;&amp;_isIE&lt;8){this.cB.childNodes[0].border=&quot;1&quot;;this.cB.childNodes[0].border=&quot;0&quot;}return m};dhtmlXTreeObject.prototype.setDragBehavior=function(c,a){this._sADnD=(!ap(a));switch(c){case &quot;child&quot;:this.dadmode=0;break;case &quot;sibling&quot;:this.dadmode=1;break;case &quot;complex&quot;:this.dadmode=2;break}};dhtmlXTreeObject.prototype._loadDynXML=function(g,c){c=c||this.XMLsource;var a=(new Date()).valueOf();this._ld_id=g;if(this.xmlalb==&quot;function&quot;){if(c){c(this._escape(g))}}else{if(this.xmlalb==&quot;name&quot;){this.loadXML(c+this._escape(g))}else{if(this.xmlalb==&quot;xmlname&quot;){this.loadXML(c+this._escape(g)+&quot;.xml?uid=&quot;+a)}else{this.loadXML(c+jv(c)+&quot;uid=&quot;+a+&quot;&amp;id=&quot;+this._escape(g))}}}};dhtmlXTreeObject.prototype.enableMultiselection=function(c,a){this._amsel=ap(c);this._amselS=ap(a)};dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){var g=new Array();for(var c=0;c&lt;this._selected.length;c++){for(var a=0;a&lt;this._selected.length;a++){if((c!=a)&amp;&amp;(this._checkPNodes(this._selected[a],this._selected[c]))){g[g.length]=this._selected[a]}}}for(var c=0;c&lt;g.length;c++){this._unselectItem(g[c])}};dhtmlXTreeObject.prototype._checkPNodes=function(c,a){if(this._dcheckf){return false}if(a==c){return 1}if(c.parentObject){return this._checkPNodes(c.parentObject,a)}else{return 0}};dhtmlXTreeObject.prototype.disableDropCheck=function(a){this._dcheckf=ap(a)};dhtmlXTreeObject.prototype.enableDistributedParsing=function(g,c,a){this._edsbps=ap(g);this._edsbpsA=new Array();this._edsbpsC=c||10;this._edsbpsD=a||250};dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return(!((!this._edsbpsA)||(!this._edsbpsA.length)))};dhtmlXTreeObject.prototype.getItemParsingState=function(g){var c=this.ak(g,true,true);if(!c){return 0}if(this._edsbpsA){for(var a=0;a&lt;this._edsbpsA.length;a++){if(this._edsbpsA[a][2]==g){return-1}}}return 1};dhtmlXTreeObject.prototype._distributedStart=function(c,l,h,g,a){if(!this._edsbpsA){this._edsbpsA=new Array()}this._edsbpsA[this._edsbpsA.length]=[c,l,h,g,a]};dhtmlXTreeObject.prototype._distributedStep=function(h){var c=this;if((!this._edsbpsA)||(!this._edsbpsA.length)){c.XMLloadingWarning=0;return}var l=this._edsbpsA[0];this.parsedArray=new Array();this.Aq(l[0],l[2],l[3],l[1]);var a=this.ak(l[2]);this._redrawFrom(this,a,l[4],this._getOpenState(a));var g=this.setCheckList.split(this.dlmtr);for(var m=0;m&lt;g.length;m++){if(g[m]){this.setCheck(g[m],1)}}this._edsbpsA=(new Array()).concat(this._edsbpsA.slice(1));if((!this._edsbpsA.length)){window.setTimeout(function(){if(c.onXLE){c.onXLE(c,h)}c.callEvent(&quot;onXLE&quot;,[c,h])},1);c.xmlstate=0}};dhtmlXTreeObject.prototype.enableTextSigns=function(a){this._txtimg=ap(a)};dhtmlXTreeObject.prototype.vq=function(a){this.ir=ap(a);this.dF.hN=this.ir};dhtmlXTreeObject.prototype.jJ=dhtmlXTreeObject.prototype.vq;dhtmlXTreeObject.prototype.disableCheckbox=function(g,c){if(typeof(g)!=&quot;object&quot;){var a=this.ak(g,0,1)}else{var a=g}if(!a){return}a.dscheck=ap(c)?(((a.checkstate||0)%3)+3):((a.checkstate&gt;2)?(a.checkstate-3):a.checkstate);this._setCheck(a);if(a.dscheck&lt;3){a.dscheck=false}};dhtmlXTreeObject.prototype.smartRefreshBranch=function(c,a){this._branchUpdate=1;this.smartRefreshItem(c,a)};dhtmlXTreeObject.prototype.smartRefreshItem=function(h,g){var a=this.ak(h);for(var c=0;c&lt;a.aE;c++){a.childNodes[c]._dmark=true}this.waitUpdateXML=true;if(g&amp;&amp;g.exists){this.Aq(g,h)}else{this._loadDynXML(h,g)}};dhtmlXTreeObject.prototype.refreshItems=function(c,g){var h=c.toString().split(this.dlmtr);this.waitUpdateXML=new Array();for(var a=0;a&lt;h.length;a++){this.waitUpdateXML[h[a]]=true}this.loadXML((g||this.XMLsource)+jv(g||this.XMLsource)+&quot;ids=&quot;+this._escape(c))};dhtmlXTreeObject.prototype.updateItem=function(n,m,h,g,c,l,o){var a=this.ak(n);a.userData=new cObject();if(m){a.label=m}a.images=new Array(h||this.imageArray[0],g||this.imageArray[1],c||this.imageArray[2]);this.setItemText(n,m);if(l){this._setCheck(a,true)}if(o==&quot;1&quot;&amp;&amp; !this.hasChildren(n)){a.XMLload=0}this._correctPlus(a);a._dmark=false;return a};dhtmlXTreeObject.prototype.setDropHandler=function(a){this.attachEvent(&quot;onDrop&quot;,a)};dhtmlXTreeObject.prototype.setOnLoadingStart=function(a){this.attachEvent(&quot;onXLS&quot;,a)};dhtmlXTreeObject.prototype.setOnLoadingEnd=function(a){this.attachEvent(&quot;onXLE&quot;,a)};dhtmlXTreeObject.prototype.aw=function(a){this.xmlalb=a};dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(a){this.smcheck=ap(a)};dhtmlXTreeObject.prototype.getXMLState=function(){return(this.xmlstate==1)};dhtmlXTreeObject.prototype.setItemTopOffset=function(m,h){var g;if(typeof(m)!=&quot;object&quot;){g=this.ak(m)}else{g=m}var l=g.span.parentNode.parentNode;g.span.style.paddingBottom=&quot;1px&quot;;for(var c=0;c&lt;l.childNodes.length;c++){if(c!=0){if(_isIE){l.childNodes[c].style.height=&quot;18px&quot;;l.childNodes[c].style.paddingTop=parseInt(h)+&quot;px&quot;}else{l.childNodes[c].style.height=18+parseInt(h)+&quot;px&quot;}}else{var a=l.childNodes[c].firstChild;if(l.childNodes[c].firstChild.tagName!=&quot;DIV&quot;){a=document.createElement(&quot;DIV&quot;);l.childNodes[c].insertBefore(a,l.childNodes[c].firstChild)}a.style.height=parseInt(h)+&quot;px&quot;;if((g.parentObject.id!=this.fO||g.parentObject.childNodes[0]!=g)&amp;&amp;this.treeLinesOn){a.style.backgroundImage=&quot;url(&quot;+this.imPath+this.lineArray[5]+&quot;)&quot;}a.innerHTML=&quot; &quot;;a.style.overflow=&quot;hidden&quot;;if(parseInt(h)==0){l.childNodes[c].removeChild(a)}}if(!_isIE){l.childNodes[c].style.verticalAlign=&quot;bottom&quot;}if(_isIE){this.cB.childNodes[0].border=&quot;1&quot;;this.cB.childNodes[0].border=&quot;0&quot;}}};dhtmlXTreeObject.prototype.yZ=function(h,c,l){if(l){if((l)&amp;&amp;(l.span)){var a=l}else{var a=this.ak(l)}if(!a){return(0)}var g=a.span.parentNode.previousSibling.childNodes[0];if(h){g.style.width=h;if(window._KHTMLrv){g.parentNode.style.width=h}}if(c){g.style.height=c;if(window._KHTMLrv){g.parentNode.style.height=c}}}else{this.def_img_x=h;this.def_img_y=c}};dhtmlXTreeObject.prototype.getItemImage=function(l,h,c){var g=this.ak(l);if(!g){return &quot;&quot;}var a=g.images[h||0];if(c){a=this.iconURL+a}return a};dhtmlXTreeObject.prototype.enableRadioButtons=function(h,g){if(arguments.length==1){this._frbtr=ap(h);this.checkBoxOff=this.checkBoxOff||this._frbtr;return}var c=this.ak(h);if(!c){return &quot;&quot;}g=ap(g);if((g)&amp;&amp;(!c._r_logic)){c._r_logic=true;for(var a=0;a&lt;c.aE;a++){this._setCheck(c.childNodes[a],c.childNodes[a].checkstate)}}if((!g)&amp;&amp;(c._r_logic)){c._r_logic=false;for(var a=0;a&lt;c.aE;a++){this._setCheck(c.childNodes[a],c.childNodes[a].checkstate)}}};dhtmlXTreeObject.prototype.enableSingleRadioMode=function(a){this._frbtrs=ap(a)};dhtmlXTreeObject.prototype.openOnItemAdded=function(a){this._hAdI= !ap(a)};dhtmlXTreeObject.prototype.openOnItemAdding=function(a){this._hAdI= !ap(a)};dhtmlXTreeObject.prototype.enableMultiLineItems=function(a){if(a===true){this.mlitems=&quot;100%&quot;}else{this.mlitems=a}};dhtmlXTreeObject.prototype.enableAutoTooltips=function(a){this.ettip=ap(a)};dhtmlXTreeObject.prototype.pL=function(a){if(a){this._unselectItem(this.ak(a))}else{this._unselectItems()}};dhtmlXTreeObject.prototype.showItemSign=function(h,c){var a=this.ak(h);if(!a){return 0}var g=a.span.parentNode.previousSibling.previousSibling.previousSibling;if(!ap(c)){this._openItem(a);a.closeble=false;a.wsign=true}else{a.closeble=true;a.wsign=false}this._correctPlus(a)};dhtmlXTreeObject.prototype.showItemCheckbox=function(l,h){if(!l){for(var c in this.gQ){this.showItemCheckbox(this.gQ[c],h)}}if(typeof(l)!=&quot;object&quot;){l=this.ak(l,0,0)}if(!l){return 0}l.nocheckbox= !ap(h);var g=l.span.parentNode.previousSibling.previousSibling.childNodes[0];g.parentNode.style.display=(!l.nocheckbox)?&quot;&quot;:&quot;none&quot;};dhtmlXTreeObject.prototype.setListDelimeter=function(a){this.dlmtr=a};dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a};dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=true;this.ehlta=ap(a)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var c=this.childNodes[3].parentObject;var a=c.treeNod;a.callEvent(&quot;onMouseOut&quot;,[c.id]);if(c.id==a._l_onMSI){a._l_onMSI=null}if(!a.ehlta){return}c.span.className=c.span.className.replace(&quot;_lor&quot;,&quot;&quot;)};dhtmlXTreeObject.prototype._itemMouseIn=function(){var c=this.childNodes[3].parentObject;var a=c.treeNod;if(a._l_onMSI!=c.id){a.callEvent(&quot;onMouseIn&quot;,[c.id])}a._l_onMSI=c.id;if(!a.ehlta){return}c.span.className=c.span.className.replace(&quot;_lor&quot;,&quot;&quot;);c.span.className=c.span.className.replace(/((standart|selected)TreeRow)/,&quot;$1_lor&quot;)};dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=ap(a)};dhtmlXTreeObject.prototype.Jz=function(c){var a=this.ak(c);if(!a){return(0)}this._focusNode(a)};dhtmlXTreeObject.prototype.Fx=function(a){return this._getAllSubItems(a)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.ao)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(g){var h=&quot;&quot;;for(var c=0;c&lt;g.aE;c++){if((g.childNodes[c].unParsed)||(g.childNodes[c].aE&gt;0)){if(g.childNodes[c].unParsed){var a=this._getAllScraggyItemsXML(g.childNodes[c].unParsed,1)}else{var a=this._getAllScraggyItems(g.childNodes[c])}if(a){if(h){h+=this.dlmtr+a}else{h=a}}}else{if(!h){h=&quot;&quot;+g.childNodes[c].id}else{h+=this.dlmtr+g.childNodes[c].id}}}return h};dhtmlXTreeObject.prototype._getAllFatItems=function(g){var h=&quot;&quot;;for(var c=0;c&lt;g.aE;c++){if((g.childNodes[c].unParsed)||(g.childNodes[c].aE&gt;0)){if(!h){h=&quot;&quot;+g.childNodes[c].id}else{h+=this.dlmtr+g.childNodes[c].id}if(g.childNodes[c].unParsed){var a=this._getAllFatItemsXML(g.childNodes[c].unParsed,1)}else{var a=this._getAllFatItems(g.childNodes[c])}if(a){h+=this.dlmtr+a}}}return h};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.ao)};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked(&quot;&quot;,&quot;&quot;,1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(a){if(a){a=this.ak(a)}return this._getAllChecked(a,&quot;&quot;,0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked(&quot;&quot;,&quot;&quot;,2)};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=[this._getAllChecked(&quot;&quot;,&quot;&quot;,1)];var c=this._getAllChecked(&quot;&quot;,&quot;&quot;,2);if(c){a.push(c)}return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(h,g,l){if(!h){h=this.ao}if(h.checkstate==l){if(!h.nocheckbox){if(g){g+=this.dlmtr+h.id}else{g=&quot;&quot;+h.id}}}var a=h.aE;for(var c=0;c&lt;a;c++){g=this._getAllChecked(h.childNodes[c],g,l)}if(h.unParsed){g=this._getAllCheckedXML(h.unParsed,g,l)}if(g){return g}else{return &quot;&quot;}};dhtmlXTreeObject.prototype.setItemStyle=function(h,g,c){var c=c||false;var a=this.ak(h);if(!a){return 0}if(!a.span.style.cssText){a.span.setAttribute(&quot;style&quot;,a.span.getAttribute(&quot;style&quot;)+&quot;; &quot;+g)}else{a.span.style.cssText=c?g:a.span.style.cssText+&quot;;&quot;+g}};dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=ap(a)};dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent(&quot;onDragIn&quot;,a)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=ap(a)};dhtmlXTreeObject.prototype.setSkin=function(a){var c=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,&quot;&quot;);this.parentObject.className=c+&quot; dhxtree_&quot;+a;if(a==&quot;dhx_terrace&quot;||a==&quot;dhx_web&quot;){this.enableTreeLines(false)}};(function(){dhtmlx.extend_api(&quot;dhtmlXTreeObject&quot;,{ahY:function(a){return[a.parent,(a.width||&quot;100%&quot;),(a.height||&quot;100%&quot;),(a.root_id||0)]},auto_save_selection:&quot;enableAutoSavingSelected&quot;,auto_tooltip:&quot;enableAutoTooltips&quot;,checkbox:&quot;enableCheckBoxes&quot;,checkbox_3_state:&quot;enableThreeStateCheckboxes&quot;,checkbox_smart:&quot;enableSmartCheckboxes&quot;,context_menu:&quot;enableContextMenu&quot;,distributed_parsing:&quot;enableDistributedParsing&quot;,drag:&quot;enableDragAndDrop&quot;,drag_copy:&quot;enableMercyDrag&quot;,drag_image:&quot;enableImageDrag&quot;,drag_scroll:&quot;enableDragAndDropScrolling&quot;,editor:&quot;enableItemEditor&quot;,hover:&quot;enableHighlighting&quot;,images:&quot;enableTreeImages&quot;,image_fix:&quot;enableIEImageFix&quot;,image_path:&quot;setImagePath&quot;,lines:&quot;enableTreeLines&quot;,loading_item:&quot;enableLoadingItem&quot;,multiline:&quot;enableMultiLineItems&quot;,multiselect:&quot;enableMultiselection&quot;,navigation:&quot;enableKeyboardNavigation&quot;,radio:&quot;enableRadioButtons&quot;,radio_single:&quot;enableSingleRadioMode&quot;,rtl:&quot;enableRTL&quot;,search:&quot;enableKeySearch&quot;,smart_parsing:&quot;enableSmartXMLParsing&quot;,smart_rendering:&quot;enableSmartRendering&quot;,text_icons:&quot;enableTextSigns&quot;,xml:&quot;loadXML&quot;,skin:&quot;setSkin&quot;},{})})();dhtmlXTreeObject.prototype._dp_init=function(a){a.attachEvent(&quot;insertCallback&quot;,function(h,m,c){var g=this._loader.et(&quot;.//item&quot;,h);var l=g[0].getAttribute(&quot;text&quot;);this.obj.insertNewItem(c,m,l,0,0,0,0,&quot;CHILD&quot;)});a.attachEvent(&quot;updateCallback&quot;,function(h,m,c){var g=this._loader.et(&quot;.//item&quot;,h);var l=g[0].getAttribute(&quot;text&quot;);this.obj.setItemText(m,l);if(this.obj.getParentId(m)!=c){this.obj.moveItem(m,&quot;item_child&quot;,c)}this.setUpdated(m,true,&quot;updated&quot;)});a.attachEvent(&quot;deleteCallback&quot;,function(g,h,c){this.obj.setUserData(h,this.action_param,&quot;true_deleted&quot;);this.obj.deleteItem(h,false)});a._methods=[&quot;setItemStyle&quot;,&quot;&quot;,&quot;changeItemId&quot;,&quot;deleteItem&quot;];this.attachEvent(&quot;onEdit&quot;,function(c,g){if(c==3){a.setUpdated(g,true)}return true});this.attachEvent(&quot;onDrop&quot;,function(m,l,h,g,c){if(g==c){a.setUpdated(m,true)}});this.ajc=function(c){var g=a.YA(c);if(g==&quot;inserted&quot;){a.set_invalid(c,false);a.setUpdated(c,false);return true}if(g==&quot;true_deleted&quot;){a.setUpdated(c,false);return true}a.setUpdated(c,true,&quot;deleted&quot;);return false};this.BX=function(c){a.setUpdated(c,true,&quot;inserted&quot;)};a.fD=function(l){var h={};var m=this.obj.ak(l);var g=m.parentObject;var c=0;for(c=0;c&lt;g.aE;c++){if(g.childNodes[c]==m){break}}h.tr_id=m.id;h.tr_pid=g.id;h.tr_order=c;h.tr_text=m.span.innerHTML;g=(m.PJ||&quot;&quot;).split(&quot;,&quot;);for(c=0;c&lt;g.length;c++){h[g[c]]=m.userData[&quot;t_&quot;+g[c]]}return h}};dhtmlXTreeObject.prototype.makeDraggable=function(c,a){if(typeof(c)!=&quot;object&quot;){c=document.getElementById(c)}ae=new dhtmlDragAndDropObject();dropper=new dhx_dragSomethingInTree();ae.dS(c,dropper);c.aK=null;c.ondragstart=dropper._preventNsDrag;c.onselectstart=new Function(&quot;return false;&quot;);c.parentObject=new Object;c.parentObject.img=c;c.parentObject.treeNod=dropper;dropper._customDrop=a};dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable;dhtmlXTreeObject.prototype.makeAllDraggable=function(c){var g=document.getElementsByTagName(&quot;div&quot;);for(var a=0;a&lt;g.length;a++){if(g[a].getAttribute(&quot;dragInDhtmlXTree&quot;)){this.makeDragable(g[a],c)}}};function dhx_dragSomethingInTree(){this.lWin=window;this.gL=function(c){var a=document.createElement(&quot;div&quot;);a.style.position=&quot;absolute&quot;;a.innerHTML=(c.innerHTML||c.value);a.className=&quot;dragSpanDiv&quot;;return a};this._preventNsDrag=function(a){(a||window.event).cancelBubble=true;if((a)&amp;&amp;(a.preventDefault)){a.preventDefault();return false}return false};this._nonTrivialNode=function(c,g,a,h){if(this._customDrop){return this._customDrop(c,h.img.id,g.id,a?a.id:null)}var l=(h.img.getAttribute(&quot;image&quot;)||&quot;&quot;);var n=h.img.id||&quot;new&quot;;var m=(h.img.getAttribute(&quot;text&quot;)||(_isIE?h.img.innerText:h.img.textContent));c[a?&quot;insertNewNext&quot;:&quot;insertNewItem&quot;](a?a.id:g.id,n,m,&quot;&quot;,l,l,l)}}dhtmlXTreeObject.prototype.enableItemEditor=function(a){this._eItEd=ap(a);if(!this._eItEdFlag){this._edn_click_IE=true;this._edn_dblclick=true;this._ie_aFunc=this.aFunc;this._ie_dblclickFuncHandler=this.dblclickFuncHandler;this.setOnDblClickHandler(function(g,c){if(this._edn_dblclick){this._editItem(g,c)}return true});this.ck(function(g,c){this._stopEditItem(g,c);if((this.ed_hist_clcik==g)&amp;&amp;(this._edn_click_IE)){this._editItem(g,c)}this.ed_hist_clcik=g;return true});this._eItEdFlag=true}};dhtmlXTreeObject.prototype.setOnEditHandler=function(a){this.attachEvent(&quot;onEdit&quot;,a)};dhtmlXTreeObject.prototype.setEditStartAction=function(a,c){this._edn_click_IE=ap(a);this._edn_dblclick=ap(c)};dhtmlXTreeObject.prototype._stopEdit=function(c,m){if(this._editCell){this.dADTempOff=this.dADTempOffEd;if(this._editCell.id!=c){var h=true;if(!m){h=this.callEvent(&quot;onEdit&quot;,[2,this._editCell.id,this,this._editCell.span.childNodes[0].value])}else{h=false;this.callEvent(&quot;onEditCancel&quot;,[this._editCell.id,this._editCell._oldValue])}if(h===true){h=this._editCell.span.childNodes[0].value}else{if(h===false){h=this._editCell._oldValue}}var l=(h!=this._editCell._oldValue);this._editCell.span.innerHTML=h;this._editCell.label=this._editCell.span.innerHTML;var g=this._editCell.i_sel?&quot;selectedTreeRow&quot;:&quot;standartTreeRow&quot;;this._editCell.span.className=g;this._editCell.span.parentNode.className=&quot;standartTreeRow&quot;;this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft=&quot;5px&quot;;this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};var n=this._editCell.id;if(this.childCalc){this._fixChildCountLabel(this._editCell)}this._editCell=null;if(!m){this.callEvent(&quot;onEdit&quot;,[3,n,this,l])}if(this._enblkbrd){this.parentObject.lastChild.focus();this.parentObject.lastChild.focus()}}}};dhtmlXTreeObject.prototype._stopEditItem=function(c,a){this._stopEdit(c)};dhtmlXTreeObject.prototype.xS=function(a){if(this._editCell){this._stopEdit(this._editCell.id+&quot;_non&quot;,a)}};dhtmlXTreeObject.prototype.editItem=function(a){this._editItem(a,this)};dhtmlXTreeObject.prototype._editItem=function(l,a){if(this._eItEd){this._stopEdit();var g=this.ak(l);if(!g){return}var h=this.callEvent(&quot;onEdit&quot;,[0,l,this,g.span.innerHTML]);if(h===true){h=(typeof g.span.innerText!=&quot;undefined&quot;?g.span.innerText:g.span.textContent)}else{if(h===false){return}}this.dADTempOffEd=this.dADTempOff;this.dADTempOff=false;this._editCell=g;g._oldValue=h;g.span.innerHTML=&quot;&lt;input type='text' class='intreeeditRow' /&gt;&quot;;g.span.style.paddingRight=g.span.style.paddingLeft=&quot;0px&quot;;g.span.onclick=g.span.ondblclick=function(m){(m||event).cancelBubble=true};g.span.childNodes[0].value=h;g.span.childNodes[0].onselectstart=function(m){(m||event).cancelBubble=true;return true};g.span.childNodes[0].onmousedown=function(m){(m||event).cancelBubble=true;return true};g.span.childNodes[0].focus();g.span.childNodes[0].focus();g.span.onclick=function(m){(m||event).cancelBubble=true;return false};g.span.className=&quot;&quot;;g.span.parentNode.className=&quot;&quot;;var c=this;g.span.childNodes[0].onkeydown=function(m){if(!m){m=window.event}if(m.keyCode==13){m.cancelBubble=true;c._stopEdit(window.undefined)}else{if(m.keyCode==27){c._stopEdit(window.undefined,true)}}(m||event).cancelBubble=true};this.callEvent(&quot;onEdit&quot;,[1,l,this])}};function jsonPointer(c,a){this.d=c;this.dp=a}jsonPointer.prototype={text:function(){var a=function(l){var h=[];for(var g=0;g&lt;l.length;g++){h.push(&quot;{&quot;+c(l[g])+&quot;}&quot;)}return h.join(&quot;,&quot;)};var c=function(l){var h=[];for(var g in l){if(typeof(l[g])==&quot;object&quot;){if(g.length){h.push('&quot;'+g+'&quot;:['+a(l[g])+&quot;]&quot;)}else{h.push('&quot;'+g+'&quot;:{'+c(l[g])+&quot;}&quot;)}}else{h.push('&quot;'+g+'&quot;:&quot;'+l[g]+'&quot;')}}return h.join(&quot;,&quot;)};return &quot;{&quot;+c(this.d)+&quot;}&quot;},get:function(a){return this.d[a]},exists:function(){return! !this.d},content:function(){return this.d.content},Kw:function(h,n,m){var g=this.d[h];var o=new jsonPointer();if(g){for(var l=0;l&lt;g.length;l++){o.d=g[l];n.apply(m,[o,l])}}},get_all:function(){return this.d},sub:function(a){return new jsonPointer(this.d[a],this.d)},sub_exists:function(a){return! !this.d[a]},each_x:function(h,o,n,m,l){var g=this.d[h];var q=new jsonPointer(0,this.d);if(g){for(l=l||0;l&lt;g.length;l++){if(g[l][o]){q.d=g[l];if(n.apply(m,[q,l])== -1){return}}}}},up:function(a){return new jsonPointer(this.dp,this.d)},set:function(a,c){this.d[a]=c},clone:function(a){return new jsonPointer(this.d,this.dp)},through:function(g,n,r,l,s){var o=this.d[g];if(o.length){for(var h=0;h&lt;o.length;h++){if(o[h][n]!=null&amp;&amp;o[h][n]!=&quot;&quot;&amp;&amp;(!r||o[h][n]==r)){var m=new jsonPointer(o[h],this.d);l.apply(s,[m,h])}var q=this.d;this.d=o[h];if(this.sub_exists(g)){this.through(g,n,r,l,s)}this.d=q}}}};dhtmlXTreeObject.prototype.loadJSArrayFile=function(file,bo){if(!this.parsCount){this.callEvent(&quot;onXLS&quot;,[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var that=this;this.dF=new ag(function(){eval(&quot;var z=&quot;+arguments[4].ai.responseText);that.loadJSArray(z)},this,true,this.ir);if(bo){this.dF.aA=bo}this.dF.loadXML(file)};dhtmlXTreeObject.prototype.loadCSV=function(a,g){if(!this.parsCount){this.callEvent(&quot;onXLS&quot;,[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var c=this;this.dF=new ag(function(){c.loadCSVString(arguments[4].ai.responseText)},this,true,this.ir);if(g){this.dF.aA=g}this.dF.loadXML(a)};dhtmlXTreeObject.prototype.loadJSArray=function(a,h){var m=[];for(var c=0;c&lt;a.length;c++){if(!m[a[c][1]]){m[a[c][1]]=[]}m[a[c][1]].push({id:a[c][0],text:a[c][2]})}var l={id:this.fO};var g=function(q,o){if(m[q.id]){q.item=m[q.id];for(var n=0;n&lt;q.item.length;n++){o(q.item[n],o)}}};g(l,g);this.Fv(l,h)};dhtmlXTreeObject.prototype.loadCSVString=function(a,m){var o=[];var c=a.split(&quot;\n&quot;);for(var h=0;h&lt;c.length;h++){var g=c[h].split(&quot;,&quot;);if(!o[g[1]]){o[g[1]]=[]}o[g[1]].push({id:g[0],text:g[2]})}var n={id:this.fO};var l=function(s,r){if(o[s.id]){s.item=o[s.id];for(var q=0;q&lt;s.item.length;q++){r(s.item[q],r)}}};l(n,l);this.Fv(n,m)};dhtmlXTreeObject.prototype.Fv=function(a,c){if(!this.parsCount){this.callEvent(&quot;onXLS&quot;,[this,null])}this.xmlstate=1;var g=new jsonPointer(a);this.Aq(g);this._p=g;if(c){c()}};dhtmlXTreeObject.prototype.loadJSON=function(file,bo){if(!this.parsCount){this.callEvent(&quot;onXLS&quot;,[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var that=this;this.dF=new ag(function(){try{eval(&quot;var t=&quot;+arguments[4].ai.responseText)}catch(e){dhtmlxError.gn(&quot;LoadXML&quot;,&quot;Incorrect JSON&quot;,[(arguments[4].ai),this]);return}var p=new jsonPointer(t);that.Aq(p);that._p=p},this,true,this.ir);if(bo){this.dF.aA=bo}this.dF.loadXML(file)};dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){var a=['{&quot;id&quot;:&quot;'+this.fO+'&quot;, &quot;item&quot;:['];var g=[];for(var c=0;c&lt;this.ao.aE;c++){g.push(this._serializeItemJSON(this.ao.childNodes[c]))}a.push(g.join(&quot;,&quot;));a.push(&quot;]}&quot;);return a.join(&quot;&quot;)};dhtmlXTreeObject.prototype._serializeItemJSON=function(n){var a=[];if(n.unParsed){return(n.unParsed.text())}if(this._selected.length){var g=this._selected[0].id}else{g=&quot;&quot;}var m=n.span.innerHTML;m=m.replace(/\&quot;/g,'\\&quot;',m);if(!this._xfullXML){a.push('{ &quot;id&quot;:&quot;'+n.id+'&quot;, '+(this._getOpenState(n)==1?' &quot;open&quot;:&quot;1&quot;, ':&quot;&quot;)+(g==n.id?' &quot;select&quot;:&quot;1&quot;,':&quot;&quot;)+' &quot;text&quot;:&quot;'+m+'&quot;'+(((this.XMLsource)&amp;&amp;(n.XMLload==0))?', &quot;child&quot;:&quot;1&quot; ':&quot;&quot;))}else{a.push('{ &quot;id&quot;:&quot;'+n.id+'&quot;, '+(this._getOpenState(n)==1?' &quot;open&quot;:&quot;1&quot;, ':&quot;&quot;)+(g==n.id?' &quot;select&quot;:&quot;1&quot;,':&quot;&quot;)+' &quot;text&quot;:&quot;'+m+'&quot;, &quot;im0&quot;:&quot;'+n.images[0]+'&quot;, &quot;im1&quot;:&quot;'+n.images[1]+'&quot;, &quot;im2&quot;:&quot;'+n.images[2]+'&quot; '+(n.acolor?(', &quot;aCol&quot;:&quot;'+n.acolor+'&quot; '):&quot;&quot;)+(n.mB?(', &quot;sCol&quot;:&quot;'+n.mB+'&quot; '):&quot;&quot;)+(n.checkstate==1?', &quot;checked&quot;:&quot;1&quot; ':(n.checkstate==2?', &quot;checked&quot;:&quot;-1&quot;':&quot;&quot;))+(n.closeable?', &quot;closeable&quot;:&quot;1&quot; ':&quot;&quot;)+(((this.XMLsource)&amp;&amp;(n.XMLload==0))?', &quot;child&quot;:&quot;1&quot; ':&quot;&quot;))}if((this._xuserData)&amp;&amp;(n.PJ)){a.push(', &quot;userdata&quot;:[');var l=n.PJ.split(&quot;,&quot;);var h=[];for(var c=0;c&lt;l.length;c++){h.push('{ &quot;name&quot;:&quot;'+l[c]+'&quot; , &quot;content&quot;:&quot;'+n.userData[&quot;t_&quot;+l[c]]+'&quot; }')}a.push(h.join(&quot;,&quot;));a.push(&quot;]&quot;)}if(n.aE){a.push(', &quot;item&quot;:[');var h=[];for(var c=0;c&lt;n.aE;c++){h.push(this._serializeItemJSON(n.childNodes[c]))}a.push(h.join(&quot;,&quot;));a.push(&quot;]\n&quot;)}a.push(&quot;}\n&quot;);return a.join(&quot;&quot;)};function dhtmlXTreeFromHTML(obj){if(typeof(obj)!=&quot;object&quot;){obj=document.getElementById(obj)}var n=obj;var id=n.id;var vI=&quot;&quot;;for(var j=0;j&lt;obj.childNodes.length;j++){if(obj.childNodes[j].nodeType==&quot;1&quot;){if(obj.childNodes[j].tagName==&quot;XMP&quot;){var cHead=obj.childNodes[j];for(var m=0;m&lt;cHead.childNodes.length;m++){vI+=cHead.childNodes[m].data}}else{if(obj.childNodes[j].tagName.toLowerCase()==&quot;ul&quot;){vI=dhx_li2trees(obj.childNodes[j],new Array(),0)}}break}}obj.innerHTML=&quot;&quot;;var t=new dhtmlXTreeObject(obj,&quot;100%&quot;,&quot;100%&quot;,0);var z_all=new Array();for(b in t){z_all[b.toLowerCase()]=b}var atr=obj.attributes;for(var a=0;a&lt;atr.length;a++){if((atr[a].name.indexOf(&quot;set&quot;)==0)||(atr[a].name.indexOf(&quot;enable&quot;)==0)){var an=atr[a].name;if(!t[an]){an=z_all[atr[a].name]}t[an].apply(t,atr[a].value.split(&quot;,&quot;))}}if(typeof(vI)==&quot;object&quot;){t.XMLloadingWarning=1;for(var i=0;i&lt;vI.length;i++){var n=t.insertNewItem(vI[i][0],vI[i][3],vI[i][1]);if(vI[i][2]){t._setCheck(n,vI[i][2])}}t.XMLloadingWarning=0;t.lastLoadedXMLId=0;t._redrawFrom(t)}else{t.loadXMLString(&quot;&lt;tree id='0'&gt;&quot;+vI+&quot;&lt;/tree&gt;&quot;)}window[id]=t;var oninit=obj.getAttribute(&quot;oninit&quot;);if(oninit){eval(oninit)}return t}function dhx_init_trees(){var c=document.getElementsByTagName(&quot;div&quot;);for(var a=0;a&lt;c.length;a++){if(c[a].className==&quot;dhtmlxTree&quot;){dhtmlXTreeFromHTML(c[a])}}}function dhx_li2trees(s,m,g){for(var n=0;n&lt;s.childNodes.length;n++){var r=s.childNodes[n];if((r.nodeType==1)&amp;&amp;(r.tagName.toLowerCase()==&quot;li&quot;)){var q=&quot;&quot;;var o=null;var a=r.getAttribute(&quot;checked&quot;);for(var l=0;l&lt;r.childNodes.length;l++){var h=r.childNodes[l];if(h.nodeType==3){q+=h.data}else{if(h.tagName.toLowerCase()!=&quot;ul&quot;){q+=dhx_outer_html(h)}else{o=h}}}m[m.length]=[g,q,a,(r.id||(m.length+1))];if(o){m=dhx_li2trees(o,m,(r.id||m.length))}}}return m}function dhx_outer_html(c){if(c.outerHTML){return c.outerHTML}var a=document.createElement(&quot;DIV&quot;);a.appendChild(c.cloneNode(true));a=a.innerHTML;return a}if(window.addEventListener){window.addEventListener(&quot;load&quot;,dhx_init_trees,false)}else{if(window.attachEvent){window.attachEvent(&quot;onload&quot;,dhx_init_trees)}}dhtmlXTreeObject.prototype.parserExtension={_parseExtension:function(h,c,g){this.gQ[c.id]._attrs=c}};dhtmlXTreeObject.prototype.getAttribute=function(g,a){this.ak(g);var c=this.gQ[g]._attrs;return c?c[a]:window.undefined};dhtmlXTreeObject.prototype.setAttribute=function(h,a,g){this.ak(h);var c=(this.gQ[h]._attrs)||{};c[a]=g;this.gQ[h]._attrs=c};dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(g){this._enblkbrd=ap(g);if(this._enblkbrd){if(aq){var c=window.getComputedStyle(this.parentObject,null)[&quot;position&quot;];if((c!=&quot;absolute&quot;)&amp;&amp;(c!=&quot;relative&quot;)){this.parentObject.style.position=&quot;relative&quot;}}this._navKeys=[[&quot;up&quot;,38],[&quot;down&quot;,40],[&quot;open&quot;,39],[&quot;close&quot;,37],[&quot;call&quot;,13],[&quot;edit&quot;,113]];var a=this;var c=document.createElement(&quot;INPUT&quot;);c.className=&quot;a_dhx_hidden_input&quot;;c.autocomplete=&quot;off&quot;;if(window._KHTMLrv){c.style.color=&quot;white&quot;}this.parentObject.appendChild(c);this.parentObject[cU?&quot;onkeypress&quot;:&quot;onkeydown&quot;]=function(h){if(a.callEvent(&quot;onKeyPress&quot;,[(h||window.event).keyCode,(h||window.event)])){return a._onKeyDown(h||window.event)}};this.parentObject.onclick=function(h){if(aq||_isIE){c.select()}if(window._KHTMLrv||cU){c.focus()}}}else{this.parentObject.onkeydown=null}};dhtmlXTreeObject.prototype._onKeyDown=function(g){if(window.globalActiveDHTMLGridObject&amp;&amp;globalActiveDHTMLGridObject.ft){return true}var a=this;for(var c=0;c&lt;this._navKeys.length;c++){if(this._navKeys[c][1]==g.keyCode){this[&quot;_onkey_&quot;+this._navKeys[c][0]].apply(this,[this.ah()]);if(g.preventDefault){g.preventDefault()}(g||event).cancelBubble=true;return false}}if(this._textSearch){return this._searchItemByKey(g)}return true};dhtmlXTreeObject.prototype._onkey_up=function(g){var a=this.ak(g);if(!a){return}var c=this._getPrevVisibleNode(a);if(c.id==this.fO){return}this.Jz(c.id);this.hE(c.id,false)};dhtmlXTreeObject.prototype._onkey_down=function(g){var a=this.ak(g);if(!a){return}var c=this._getNextVisibleNode(a);if(c.id==this.fO){return}this.Jz(c.id);this.hE(c.id,false)};dhtmlXTreeObject.prototype._onkey_open=function(a){this.hx(a)};dhtmlXTreeObject.prototype._onkey_close=function(a){this.KW(a)};dhtmlXTreeObject.prototype._onkey_call=function(a){if(this.xS){this.xS();this.parentObject.lastChild.focus();this.parentObject.lastChild.focus();this.hE(a,true)}else{this.hE(this.ah(),true)}};dhtmlXTreeObject.prototype._onkey_edit=function(a){if(this.editItem){this.editItem(a)}};dhtmlXTreeObject.prototype._getNextVisibleNode=function(a,c){if((!c)&amp;&amp;(this._getOpenState(a)&gt;0)){return a.childNodes[0]}if((a.tr)&amp;&amp;(a.tr.nextSibling)&amp;&amp;(a.tr.nextSibling.nodem)){return a.tr.nextSibling.nodem}if(a.parentObject){return this._getNextVisibleNode(a.parentObject,1)}return a};dhtmlXTreeObject.prototype._getPrevVisibleNode=function(a){if((a.tr)&amp;&amp;(a.tr.previousSibling)&amp;&amp;(a.tr.previousSibling.nodem)){return this._lastVisibleChild(a.tr.previousSibling.nodem)}if(a.parentObject){return a.parentObject}else{return a}};dhtmlXTreeObject.prototype._lastVisibleChild=function(a){if(this._getOpenState(a)&gt;0){return this._lastVisibleChild(a.childNodes[a.aE-1])}else{return a}};dhtmlXTreeObject.prototype._searchItemByKey=function(c){if(c.keyCode==8){this._textSearchString=&quot;&quot;;return true}var a=String.fromCharCode(c.keyCode).toUpperCase();if(a.match(/[A-Z,a-z,0-9\ ]/)){this._textSearchString+=a;this._textSearchInProgress=true;if(!(this.getSelectedItemText()||&quot;&quot;).match(RegExp(&quot;^&quot;+this._textSearchString,&quot;i&quot;))){this.findItem(&quot;^&quot;+this._textSearchString,0)}this._textSearchInProgress=false;if(c.preventDefault){c.preventDefault()}(c||event).cancelBubble=true;return false}return true};dhtmlXTreeObject.prototype.assignKeys=function(a){this._navKeys=a};dhtmlXTreeObject.prototype.enableKeySearch=function(c){this._textSearch=ap(c);if(!this._textSearch){return}this._textSearchString=&quot;&quot;;var a=this;this._markItem2=this._markItem;this._markItem=function(g){if(!a._textSearchInProgress){a._textSearchString=&quot;&quot;}a._markItem2(g)}};dhtmlXTreeObject.prototype.enableLoadingItem=function(a){this.attachEvent(&quot;onXLS&quot;,this._showFakeItem);this.attachEvent(&quot;onXLE&quot;,this._hideFakeItem);this._tfi_text=a||&quot;Loading...&quot;};dhtmlXTreeObject.prototype._showFakeItem=function(a,g){if((g===null)||(this.ak(&quot;fake_load_xml_&quot;+g))){return}var c=this.XMLsource;this.XMLsource=null;this.insertNewItem(g,&quot;fake_load_xml_&quot;+g,this._tfi_text);this.XMLsource=c};dhtmlXTreeObject.prototype._hideFakeItem=function(a,c){if(c===null){return}this.deleteItem(&quot;fake_load_xml_&quot;+c)};dhtmlXTreeObject.prototype.isLocked=function(a){if(!this._locker){this._init_lock()}return(this._locker[a]==true)};dhtmlXTreeObject.prototype._lockItem=function(a,l,c){if(!this._locker){this._init_lock()}if(l){if(this._locker[a.id]==true){return}this._locker[a.id]=true;a.bIm0=a.images[0];a.bIm1=a.images[1];a.bIm2=a.images[2];a.images[0]=this.lico0;a.images[1]=this.lico1;a.images[2]=this.lico2;var h=a.span.parentNode;var g=h.previousSibling;this.ae.fG(h);this.ae.fG(g)}else{if(this._locker[a.id]!=true){return}this._locker[a.id]=false;a.images[0]=a.bIm0;a.images[1]=a.bIm1;a.images[2]=a.bIm2;var h=a.span.parentNode;var g=h.previousSibling;this.ae.dS(h,this);this.ae.dS(g,this)}if(!c){this._correctPlus(a)}};dhtmlXTreeObject.prototype.lockItem=function(g,c){if(!this._locker){this._init_lock()}this._lockOn=false;var a=this.ak(g);this._lockOn=true;this._lockItem(a,ap(c))};dhtmlXTreeObject.prototype.setLockedIcons=function(g,c,a){if(!this._locker){this._init_lock()}this.lico0=g;this.lico1=c;this.lico2=a};dhtmlXTreeObject.prototype._init_lock=function(){this._locker=new Array();this._locker_count=&quot;0&quot;;this._lockOn=true;this._globalIdStorageFindA=this.ak;this.ak=this._lockIdFind;if(this._serializeItem){this._serializeItemA=this._serializeItem;this._serializeItem=this._serializeLockItem;this._serializeTreeA=this.serializeTree;this.serializeTree=this._serializeLockTree}this.setLockedIcons(this.imageArray[0],this.imageArray[1],this.imageArray[2])};dhtmlXTreeObject.prototype._lockIdFind=function(g,a,c){if(!this.skipLock){if((!c)&amp;&amp;(this._lockOn==true)&amp;&amp;(this._locker[g]==true)){return null}}return this._globalIdStorageFindA(g,a,c)};dhtmlXTreeObject.prototype._serializeLockItem=function(a){if(this._locker[a.id]==true){return &quot;&quot;}return this._serializeItemA(a)};dhtmlXTreeObject.prototype._serializeLockTree=function(){var a=this._serializeTreeA();return a.replace(/&lt;item[^&gt;]+locked\=\&quot;1\&quot;[^&gt;]+\/&gt;/g,&quot;&quot;)};dhtmlXTreeObject.prototype._moveNodeToA=dhtmlXTreeObject.prototype._moveNodeTo;dhtmlXTreeObject.prototype._moveNodeTo=function(a,g,c){if((g.treeNod.isLocked)&amp;&amp;(g.treeNod.isLocked(g.id))){return false}return this._moveNodeToA(a,g,c)};dhtmlXTreeObject.prototype.lockTree=function(a){if(ap(a)){this._initTreeLocker()}else{if(this._TreeLocker){this._TreeLocker.parentNode.removeChild(this._TreeLocker);this._TreeLocker=null}}};dhtmlXTreeObject.prototype._initTreeLocker=function(a){if(this._TreeLocker){return}this.parentObject.style.overflow=&quot;hidden&quot;;if(this.parentObject.style.position!=&quot;absolute&quot;){this.parentObject.style.position=&quot;relative&quot;}var c=document.createElement(&quot;div&quot;);c.style.position=&quot;absolute&quot;;c.style.left=&quot;0px&quot;;c.style.top=&quot;0px&quot;;c.className=&quot;dhx_tree_opacity&quot;;c.style.width=this.cB.offsetWidth+&quot;px&quot;;c.style.backgroundColor=&quot;#FFFFFF&quot;;c.style.height=this.cB.offsetHeight+&quot;px&quot;;this._TreeLocker=c;this.parentObject.appendChild(this._TreeLocker)};dhtmlXTreeObject.prototype.enableRTL=function(c){var a=ap(c);if(((a)&amp;&amp;(!this.rtlMode))||((!a)&amp;&amp;(this.rtlMode))){this.rtlMode=a;this._switchToRTL(this.rtlMode)}};dhtmlXTreeObject.prototype._switchToRTL=function(a){if(a){this.cB.className=this._ltr_line=this.lineArray;this._ltr_min=this.minusArray;this._ltr_plus=this.plusArray;this.lineArray=new Array(&quot;line2_rtl.gif&quot;,&quot;line3_rtl.gif&quot;,&quot;line4_rtl.gif&quot;,&quot;blank.gif&quot;,&quot;blank.gif&quot;,&quot;line1_rtl.gif&quot;);this.minusArray=new Array(&quot;minus2_rtl.gif&quot;,&quot;minus3_rtl.gif&quot;,&quot;minus4_rtl.gif&quot;,&quot;minus.gif&quot;,&quot;minus5_rtl.gif&quot;);this.plusArray=new Array(&quot;plus2_rtl.gif&quot;,&quot;plus3_rtl.gif&quot;,&quot;plus4_rtl.gif&quot;,&quot;plus.gif&quot;,&quot;plus5_rtl.gif&quot;);this.cB.className=&quot;containerTableStyleRTL&quot;}else{this.cB.className=&quot;containerTableStyle&quot;;this.lineArray=this._ltr_line;this.minusArray=this._ltr_min;this.plusArray=this._ltr_plus}if(this.ao.aE){this._redrawFrom(this,this.ao)}};dhtmlXTreeObject.prototype.sortTree=function(h,c,g){var a=this.ak(h);if(!a){return false}this._reorderBranch(a,(c.toString().toLowerCase()==&quot;asc&quot;),ap(g))};dhtmlXTreeObject.prototype.setCustomSortFunction=function(a){this._csfunca=a};dhtmlXTreeObject.prototype._reorderBranch=function(o,c,q){var a=[];var n=o.aE;if(!n){return}var l=o.childNodes[0].tr.parentNode;for(var h=0;h&lt;n;h++){a[h]=o.childNodes[h];l.removeChild(a[h].tr)}var g=this;if(c==1){if(this._csfunca){a.sort(function(r,m){return g._csfunca(r.id,m.id)})}else{a.sort(function(r,m){return((r.span.innerHTML.toUpperCase()&gt;m.span.innerHTML.toUpperCase())?1:((r.span.innerHTML.toUpperCase()==m.span.innerHTML.toUpperCase())?0: -1))})}}else{if(this._csfunca){a.sort(function(r,m){return g._csfunca(m.id,r.id)})}else{a.sort(function(r,m){return((r.span.innerHTML.toUpperCase()&lt;m.span.innerHTML.toUpperCase())?1:((r.span.innerHTML.toUpperCase()==m.span.innerHTML.toUpperCase())?0: -1))})}}for(var h=0;h&lt;n;h++){l.appendChild(a[h].tr);o.childNodes[h]=a[h];if((q)&amp;&amp;(a[h].unParsed)){a[h].unParsed.set(&quot;order&quot;,c?1: -1)}else{if((q)&amp;&amp;(a[h].aE)){this._reorderBranch(a[h],c,q)}}}for(var h=0;h&lt;n;h++){this._correctPlus(a[h]);this._correctLine(a[h])}};dhtmlXTreeObject.prototype._reorderXMLBranch=function(n){var o=n.getAttribute(&quot;order&quot;);if(o==&quot;none&quot;){return}var c=(o==1);var l=n.childNodes.length;if(!l){return}var a=new Array();var g=0;for(var h=0;h&lt;l;h++){if(n.childNodes[h].nodeType==1){a[g]=n.childNodes[h];g++}}for(var h=l-1;h!=0;h--){n.removeChild(n.childNodes[h])}if(c){a.sort(function(q,m){return((q.getAttribute(&quot;text&quot;)&gt;m.getAttribute(&quot;text&quot;))?1:((q.getAttribute(&quot;text&quot;)==m.getAttribute(&quot;text&quot;))?0: -1))})}else{a.sort(function(q,m){return((q.getAttribute(&quot;text&quot;)&lt;m.getAttribute(&quot;text&quot;))?1:((q.getAttribute(&quot;text&quot;)==m.getAttribute(&quot;text&quot;))?0: -1))})}for(var h=0;h&lt;g;h++){a[h].setAttribute(&quot;order&quot;,o);n.appendChild(a[h])}n.setAttribute(&quot;order&quot;,&quot;none&quot;)};dhtmlXTreeObject.prototype._serEnts=[[&quot;&amp;&quot;,&quot;&amp;&quot;],[&quot;&lt;&quot;,&quot;&lt;&quot;],[&quot;&gt;&quot;,&quot;&gt;&quot;]];dhtmlXTreeObject.prototype.registerXMLEntity=function(a,c){this._serEnts[this._serEnts.length]=[a,c,new RegExp(a,&quot;g&quot;)]};dhtmlXTreeObject.prototype.fu=function(a,c,l,m,g){this._xuserData=ap(a);this._xfullXML=ap(c);this._dtd=g;this._xescapeEntities=ap(l);if(ap(m)){this._apreUC=&quot;&lt;![CDATA[&quot;;this._apstUC=&quot;]]&gt;&quot;}else{}for(var h=0;h&lt;this._serEnts.length;h++){this._serEnts[h][2]=new RegExp(this._serEnts[h][0],&quot;g&quot;)}};dhtmlXTreeObject.prototype.serializeTree=function(){if(this.xS){this.xS()}this._apreUC=this._apreUC||&quot;&quot;;this._apstUC=this._apstUC||&quot;&quot;;var a='&lt;?xml version=&quot;1.0&quot;?&gt;';if(this._dtd){a+='&lt;!DOCTYPE tree SYSTEM &quot;'+this._dtd+'&quot;&gt;'}a+='&lt;tree id=&quot;'+this.fO+'&quot;&gt;';if((this._xuserData)&amp;&amp;(this.gQ[this.fO].PJ)){var g=this.gQ[this.fO].PJ.split(&quot;,&quot;);for(var c=0;c&lt;g.length;c++){a+='&lt;userdata name=&quot;'+g[c]+'&quot;&gt;'+this._apreUC+this.gQ[this.fO].userData[&quot;t_&quot;+g[c]]+this._apstUC+&quot;&lt;/userdata&gt;&quot;}}for(var c=0;c&lt;this.ao.aE;c++){a+=this._serializeItem(this.ao.childNodes[c])}a+=&quot;&lt;/tree&gt;&quot;;return a};dhtmlXTreeObject.prototype._serializeItem=function(n){if(n.unParsed){if(document.all){return n.unParsed.d.xml}else{var a=new XMLSerializer();return a.serializeToString(n.unParsed.d)}}var c=&quot;&quot;;if(this._selected.length){var h=this._selected[0].id}else{h='&quot;'}var m=n.span.innerHTML;if(this._xescapeEntities){for(var g=0;g&lt;this._serEnts.length;g++){m=m.replace(this._serEnts[g][2],this._serEnts[g][1])}}if(!this._xfullXML){c='&lt;item id=&quot;'+n.id+'&quot; '+(this._getOpenState(n)==1?' open=&quot;1&quot; ':&quot;&quot;)+(h==n.id?' select=&quot;1&quot;':&quot;&quot;)+' text=&quot;'+m+'&quot;'+(((this.XMLsource)&amp;&amp;(n.XMLload==0))?' child=&quot;1&quot; ':&quot;&quot;)+&quot;&gt;&quot;}else{c='&lt;item id=&quot;'+n.id+'&quot; '+(this._getOpenState(n)==1?' open=&quot;1&quot; ':&quot;&quot;)+(h==n.id?' select=&quot;1&quot;':&quot;&quot;)+' text=&quot;'+m+'&quot; im0=&quot;'+n.images[0]+'&quot; im1=&quot;'+n.images[1]+'&quot; im2=&quot;'+n.images[2]+'&quot; '+(n.acolor?('aCol=&quot;'+n.acolor+'&quot; '):&quot;&quot;)+(n.mB?('sCol=&quot;'+n.mB+'&quot; '):&quot;&quot;)+(n.checkstate==1?'checked=&quot;1&quot; ':(n.checkstate==2?'checked=&quot;-1&quot;':&quot;&quot;))+(n.closeable?'closeable=&quot;1&quot; ':&quot;&quot;)+(((this.XMLsource)&amp;&amp;(n.XMLload==0))?' child=&quot;1&quot; ':&quot;&quot;)+&quot;&gt;&quot;}if((this._xuserData)&amp;&amp;(n.PJ)){var l=n.PJ.split(&quot;,&quot;);for(var g=0;g&lt;l.length;g++){c+='&lt;userdata name=&quot;'+l[g]+'&quot;&gt;'+this._apreUC+n.userData[&quot;t_&quot;+l[g]]+this._apstUC+&quot;&lt;/userdata&gt;&quot;}}for(var g=0;g&lt;n.aE;g++){c+=this._serializeItem(n.childNodes[g])}c+=&quot;&lt;/item&gt;&quot;;return c};dhtmlXTreeObject.prototype.saveSelectedItem=function(c,a){c=c||&quot;&quot;;this.setCookie(&quot;treeStateSelected&quot;+c,this.ah(),a)};dhtmlXTreeObject.prototype.restoreSelectedItem=function(a){a=a||&quot;&quot;;var c=this.getCookie(&quot;treeStateSelected&quot;+a);this.hE(c,false)};dhtmlXTreeObject.prototype.enableAutoSavingSelected=function(a,c){this.assMode=ap(a);if((this.assMode)&amp;&amp;(!this.oldOnSelect)){this.oldOnSelect=this.onRowSelect;this.onRowSelect=function(h,g,l){if(!g){g=this}g.parentObject.treeNod.oldOnSelect(h,g,l);if(g.parentObject.treeNod.assMode){g.parentObject.treeNod.saveSelectedItem(g.parentObject.treeNod.assCookieName)}}}this.assCookieName=c};dhtmlXTreeObject.prototype.saveState=function(g,c){var l=this._escape(this.serializeTree());var a=4000;if(l.length&gt;a){if(navigator.appName.indexOf(&quot;Microsoft&quot;)!= -1){return false}this.setCookie(&quot;treeStatex&quot;+g,Math.ceil(l.length/a));for(var h=0;h&lt;Math.ceil(l.length/a);h++){this.setCookie(&quot;treeStatex&quot;+g+&quot;x&quot;+h,l.substr(h*a,a),c)}}else{this.setCookie(&quot;treeStatex&quot;+g,l,c)}var l=this.getCookie(&quot;treeStatex&quot;+g);if(!l){this.setCookie(&quot;treeStatex&quot;+g,&quot;&quot;,c);return false}return true};dhtmlXTreeObject.prototype.loadState=function(a){var h=this.getCookie(&quot;treeStatex&quot;+a);if(!h){return false}if(h.length){if(h.toString().length&lt;4){var g=&quot;&quot;;for(var c=0;c&lt;h;c++){g+=this.getCookie(&quot;treeStatex&quot;+a+&quot;x&quot;+c)}h=g}this.loadXMLString((this.utfesc==&quot;utf8&quot;)?decodeURI(h):unescape(h))}return true};dhtmlXTreeObject.prototype.setCookie=function(c,g,a){var h=c+&quot;=&quot;+g+(a?(&quot;; &quot;+a):&quot;&quot;);document.cookie=h};dhtmlXTreeObject.prototype.getCookie=function(c){var g=c+&quot;=&quot;;if(document.cookie.length&gt;0){var h=document.cookie.indexOf(g);if(h!= -1){h+=g.length;var a=document.cookie.indexOf(&quot;;&quot;,h);if(a== -1){a=document.cookie.length}return document.cookie.substring(h,a)}}};dhtmlXTreeObject.prototype.saveOpenStates=function(c,a){var h=[];for(var g=0;g&lt;this.ao.aE;g++){h=h.concat(this._collectOpenStates(this.ao.childNodes[g]))}h=h.join(this.dlmtr);this.setCookie(&quot;treeOpenStatex&quot;+c,h,a)};dhtmlXTreeObject.prototype.loadOpenStates=function(c){for(var g=0;g&lt;this.ao.aE;g++){this._xcloseAll(this.ao.childNodes[g])}this.cB.childNodes[0].border=&quot;1&quot;;this.cB.childNodes[0].border=&quot;0&quot;;var l=getCookie(&quot;treeOpenStatex&quot;+c);if(l){var a=l.split(this.dlmtr);for(var g=0;g&lt;a.length;g++){var h=this.ak(a[g]);if(h){if((this.XMLsource)&amp;&amp;(!h.XMLload)&amp;&amp;(h.id!=this.fO)){this._delayedLoad(h,&quot;loadOpenStates('&quot;+c+&quot;')&quot;);return}else{this.hx(a[g])}}}}this.callEvent(&quot;onAllOpenDynamic&quot;,[])};dhtmlXTreeObject.prototype._delayedLoad=function(c,a){this.afterLoadMethod=a;this.onLoadReserve=this.onXLE;this.onXLE=this._delayedLoadStep2;this._loadDynXML(c.id)};dhtmlXTreeObject.prototype._delayedLoadStep2=function(tree){tree.onXLE=tree.onLoadReserve;window.setTimeout(function(){dhtmlx.temp=tree;eval(&quot;dhtmlx.temp.&quot;+tree.afterLoadMethod)},100);if(tree.onXLE){tree.onXLE(tree)}tree.callEvent(&quot;onXLE&quot;,[tree])};dhtmlXTreeObject.prototype._collectOpenStates=function(c){var g=[];if(this._getOpenState(c)==1){g.push(c.id);for(var a=0;a&lt;c.aE;a++){g=g.concat(this._collectOpenStates(c.childNodes[a]))}}return g};function setCookie(a,c){document.cookie=a+&quot;=&quot;+c}function getCookie(c){var g=c+&quot;=&quot;;if(document.cookie.length&gt;0){var h=document.cookie.indexOf(g);if(h!= -1){h+=g.length;var a=document.cookie.indexOf(&quot;;&quot;,h);if(a== -1){a=document.cookie.length}return(document.cookie.substring(h,a))}}}dhtmlXTreeObject.prototype.openAllItemsDynamic=function(a){this.ClosedElem=new Array();this.G_node=null;var c=this.ak(a||this.fO);if(c.id!=this.fO&amp;&amp;this.getOpenState(c.id)!=0){this.hx(a)}this._openAllNodeChilds(c,0);if(this.ClosedElem.length&gt;0){this.onLoadReserve=this.onXLE;this.onXLE=this._loadAndOpen;this._loadAndOpen(this)}};dhtmlXTreeObject.prototype._openAllNodeChilds=function(c){if((c.XMLload==0)||(c.unParsed)){this.ClosedElem.push(c)}for(var a=0;a&lt;c.aE;a++){if(this._getOpenState(c.childNodes[a])&lt;0){this._HideShow(c.childNodes[a],2)}if(c.childNodes[a].aE&gt;0){this._openAllNodeChilds(c.childNodes[a])}if((c.childNodes[a].XMLload==0)||(c.childNodes[a].unParsed)){this.ClosedElem.push(c.childNodes[a])}}};dhtmlXTreeObject.prototype._loadAndOpen=function(a){if(a.G_node){a._openItem(a.G_node);a._openAllNodeChilds(a.G_node);a.G_node=null}if(a.ClosedElem.length&gt;0){a.G_node=a.ClosedElem.shift()}if(a.G_node){if(a.G_node.unParsed){a.reParse(a.G_node)}else{window.setTimeout(function(){a._loadDynXML(a.G_node.id)},100)}}else{a.onXLE=a.onLoadReserve;if(a.onXLE){a.onXLE(a)}a.callEvent(&quot;onAllOpenDynamic&quot;,[a])}};dhtmlXTreeObject.prototype.openItemsDynamic=function(c,a){if(this.onXLE==this._stepOpen){return}this._opnItmsDnmcFlg=ap(a);this.onLoadReserve=this.onXLE;this.onXLE=this._stepOpen;this.ClosedElem=c.split(&quot;,&quot;).reverse();this._stepOpen(this)};dhtmlXTreeObject.prototype._stepOpen=function(c){if(!c.ClosedElem.length){c.onXLE=c.onLoadReserve;if(c._opnItmsDnmcFlg){c.hE(c.G_node,true)}if((c.onXLE)&amp;&amp;(arguments[1])){c.onXLE.apply(c,arguments)}c.callEvent(&quot;onOpenDynamicEnd&quot;,[]);return}c.G_node=c.ClosedElem.pop();c.skipLock=true;var a=c.ak(c.G_node);if(a){if(a.XMLload===0){c.hx(c.G_node)}else{c.hx(c.G_node);c._stepOpen(c)}}c.skipLock=false};var globalActiveDHTMLGridObject;String.prototype.PA=function(){return this.replace(/ /g,&quot; &quot;).replace(/(^[ \t]*)|([ \t]*$)/g,&quot;&quot;)};function dhtmlxArray(a){return dhtmlXHeir((a||new Array()),dhtmlxArray._master)}dhtmlxArray._master={bP:function(c){for(var a=0;a&lt;this.length;a++){if(c==this[a]){return a}}return-1},ml:function(g,c){this[this.length]=null;for(var a=this.length-1;a&gt;=g;a--){this[a]=this[a-1]}this[g]=c},aa:function(a){this.splice(a,1)},yk:function(a,g){var c=this[a];this[a]=this[g];this[g]=c}};function dhtmlXGridObject(id){if(_isIE){try{document.execCommand(&quot;BackgroundImageCache&quot;,false,true)}catch(e){}}if(id){if(typeof(id)==&quot;object&quot;){this.aL=id;if(!this.aL.id){this.aL.id=&quot;cgrid2_&quot;+this.uid()}}else{this.aL=document.getElementById(id)}}else{this.aL=document.createElement(&quot;DIV&quot;);this.aL.id=&quot;cgrid2_&quot;+this.uid()}this.aL.innerHTML=&quot;&quot;;dhtmlxEventable(this);var self=this;this.Wr=0;this.fontWidth=7;this.cell=null;this.row=null;this.iconURL=&quot;&quot;;this.editor=null;this.UB=true;this.aP=true;this.combos=new Array(0);this.QL=new Array(0);this.bj={};this.aD=dhtmlxArray();this.am=dhtmlxArray();this._data_cache={};this.XC={};this._ud_enabled=true;this.bA=new ag(this.vj,this,true,this.ir);this._maskArr=[];this.bY=dhtmlxArray();this.bH={};this.vw=this.BN=0;this.aL.className+=&quot; gridbox&quot;;this.aL.style.width=this.aL.getAttribute(&quot;width&quot;)||(window.getComputedStyle?(this.aL.style.width||window.getComputedStyle(this.aL,null)[&quot;width&quot;]):(this.aL.currentStyle?this.aL.currentStyle.width:this.aL.style.width||0))||&quot;100%&quot;;this.aL.style.height=this.aL.getAttribute(&quot;height&quot;)||(window.getComputedStyle?(this.aL.style.height||window.getComputedStyle(this.aL,null)[&quot;height&quot;]):(this.aL.currentStyle?this.aL.currentStyle.height:this.aL.style.height||0))||&quot;100%&quot;;this.aL.style.cursor=&quot;default&quot;;this.aL.onselectstart=function(){return false};var t_creator=function(name){var t=document.createElement(&quot;TABLE&quot;);t.cellSpacing=t.cellPadding=0;t.style.cssText=&quot;width:100%;table-layout:fixed;&quot;;t.className=name.substr(2);return t};this.obj=t_creator(&quot;c_obj&quot;);this.hdr=t_creator(&quot;c_hdr&quot;);this.hdr.style.marginRight=&quot;20px&quot;;this.hdr.style.paddingRight=&quot;20px&quot;;this.HF=document.createElement(&quot;DIV&quot;);this.HF.style.width=&quot;100%&quot;;this.HF.style.overflow=&quot;auto&quot;;this.HF.appendChild(this.obj);this.HF.className=&quot;objbox&quot;;if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}this.kR=document.createElement(&quot;DIV&quot;);this.kR.style.width=&quot;100%&quot;;this.kR.style.height=&quot;25px&quot;;this.kR.style.overflow=&quot;hidden&quot;;this.kR.className=&quot;xhdr&quot;;this.sf=new Array(0);this.gB=document.createElement(&quot;DIV&quot;);this.gB.style.display=&quot;none&quot;;this.kR.appendChild(this.gB);this.kR.appendChild(this.hdr);this.kR.style.position=&quot;relative&quot;;this.aL.appendChild(this.kR);this.aL.appendChild(this.HF);this.aL.grid=this;this.HF.grid=this;this.kR.grid=this;this.obj.grid=this;this.hdr.grid=this;this.cellWidthPX=[];this.cellWidthPC=[];this.fL=this.aL.ajW||&quot;px&quot;;this.gX=this.aL.delimiter||&quot;,&quot;;this.oU=&quot;,&quot;;this.hdrLabels=[];this.columnIds=[];this.columnColor=[];this._hrrar=[];this.cellType=dhtmlxArray();this.cellAlign=[];this.initCellWidth=[];this.fldSort=[];this.ig=(_isIE&amp;&amp;(document.compatMode!=&quot;BackCompat&quot;)?22:20);this.eg=window.fe||&quot;&quot;;this.ft=false;this.oB=true;this.pH=false;this.aW=false;this.cu=0;dhtmlxEvent(window,&quot;unload&quot;,function(){try{if(self.fA){self.fA()}}catch(e){}});this.setSkin=function(name){this.skin_name=name;if(this._imgURL){this.setImagePath(this._imgURL)}var classname=this.aL.className.split(&quot; gridbox&quot;)[0];this.aL.className=classname+&quot; gridbox gridbox_&quot;+name;this.skin_h_correction=0;this.enableAlterCss(&quot;ev_&quot;+name,&quot;odd_&quot;+name,this.gY());this._fixAlterCss();switch(name){case &quot;clear&quot;:this.FD=document.createElement(&quot;DIV&quot;);this.FD.className=&quot;topMumba&quot;;this.FD.innerHTML=&quot;&lt;img style='left:0px'   src='&quot;+this.eg+&quot;skinC_top_left.gif'&gt;&lt;img style='right:20px' src='&quot;+this.eg+&quot;skinC_top_right.gif'&gt;&quot;;this.aL.appendChild(this.FD);this.Gc=document.createElement(&quot;DIV&quot;);this.Gc.className=&quot;bottomMumba&quot;;this.Gc.innerHTML=&quot;&lt;img style='left:0px'   src='&quot;+this.eg+&quot;skinD_bottom_left.gif'&gt;&lt;img style='right:20px' src='&quot;+this.eg+&quot;skinD_bottom_right.gif'&gt;&quot;;this.aL.appendChild(this.Gc);if(this.aL.style.position!=&quot;absolute&quot;){this.aL.style.position=&quot;relative&quot;}this.skin_h_correction=20;break;case &quot;dhx_terrace&quot;:this.ig=33;this.qW=true;break;case &quot;dhx_skyblue&quot;:case &quot;dhx_web&quot;:case &quot;glassy_blue&quot;:case &quot;dhx_black&quot;:case &quot;dhx_blue&quot;:case &quot;modern&quot;:case &quot;light&quot;:this.ig=30;this.qW=true;break;case &quot;xp&quot;:this.qW=true;if((_isIE)&amp;&amp;(document.compatMode!=&quot;BackCompat&quot;)){this.ig=26}else{this.ig=22}break;case &quot;mt&quot;:if((_isIE)&amp;&amp;(document.compatMode!=&quot;BackCompat&quot;)){this.ig=26}else{this.ig=22}break;case &quot;gray&quot;:if((_isIE)&amp;&amp;(document.compatMode!=&quot;BackCompat&quot;)){this.ig=22}break;case &quot;sbdark&quot;:break}if(_isIE&amp;&amp;this.hdr){var d=this.hdr.parentNode;d.removeChild(this.hdr);d.appendChild(this.hdr)}this.setSizes()};if(_isIE){this.vq(true)}if(window.dhtmlDragAndDropObject){this.ae=new dhtmlDragAndDropObject()}this._doOnScroll=function(e,mode){this.callEvent(&quot;onScroll&quot;,[this.HF.scrollLeft,this.HF.scrollTop]);this.BD(e,mode)};this.BD=function(e,mode){this.kR.scrollLeft=this.HF.scrollLeft;if(this.ftr){this.ftr.parentNode.scrollLeft=this.HF.scrollLeft}if(mode){return}if(this.ahK){if(this.ee){window.clearTimeout(this.ee)}this.ee=window.setTimeout(function(){if(self._update_srnd_view){self._update_srnd_view()}},100)}};this.qu=function(obj){obj.appendChild(this.globalBox?this.globalBox:this.aL);this.setSizes()};this.init=function(fl){if((this.gY())&amp;&amp;(!this._h2)){this._h2=new dhtmlxHierarchy();if((this.aC)&amp;&amp;(!this.nh)){this.aC._h2=this._h2}this.kj={eg:null}}if(!this.Oi){return}if(!this.skin_name){this.setSkin(&quot;dhx_skyblue&quot;)}this.editStop();this.Ms=null;this.resized=null;this.ij=this.yH=null;this.cellWidthPX=[];this.cellWidthPC=[];if(this.hdr.rows.length&gt;0){var temp=this.tR;this.clearAll(true);this.tR=temp}var hdrRow=this.hdr.insertRow(0);for(var i=0;i&lt;this.hdrLabels.length;i++){hdrRow.appendChild(document.createElement(&quot;TH&quot;));hdrRow.childNodes[i]._cellIndex=i;hdrRow.childNodes[i].style.height=&quot;0px&quot;}if(_isIE&amp;&amp;_isIE&lt;8&amp;&amp;document.body.style.msTouchAction==this.undefined){hdrRow.style.position=&quot;absolute&quot;}else{hdrRow.style.height=&quot;auto&quot;}var hdrRow=this.hdr.insertRow(cn?2:1);hdrRow.bq=new Array();var kO=0;for(var i=0;i&lt;this.hdrLabels.length;i++){hdrRow.bq[i]=i-kO;if((this.hdrLabels[i]==this.JP)&amp;&amp;(i!=0)){if(cn){hdrRow.insertCell(i-kO)}hdrRow.cells[i-kO-1].colSpan=(hdrRow.cells[i-kO-1].colSpan||1)+1;hdrRow.childNodes[i-kO-1]._cellIndex++;kO++;hdrRow.bq[i]=i-kO;continue}hdrRow.insertCell(i-kO);hdrRow.childNodes[i-kO]._cellIndex=i;hdrRow.childNodes[i-kO]._cellIndexS=i;this.adA(i,this.hdrLabels[i])}if(kO==0){hdrRow.bq=null}this._cCount=this.hdrLabels.length;if(_isIE){window.setTimeout(function(){if(self.setSizes){self.setSizes()}},1)}if(!this.obj.firstChild){this.obj.appendChild(document.createElement(&quot;TBODY&quot;))}var If=this.obj.firstChild;if(!If.firstChild){If.appendChild(document.createElement(&quot;TR&quot;));If=If.firstChild;if(_isIE&amp;&amp;_isIE&lt;8&amp;&amp;document.body.style.msTouchAction==this.undefined){If.style.position=&quot;absolute&quot;}else{If.style.height=&quot;auto&quot;}for(var i=0;i&lt;this.hdrLabels.length;i++){If.appendChild(document.createElement(&quot;TH&quot;));If.childNodes[i].style.height=&quot;0px&quot;}}this._c_order=null;if(this.hu!=true){this.obj.className+=&quot; row20px&quot;}this.gB.style.position=&quot;absolute&quot;;this.gB.style.display=&quot;none&quot;;this.gB.className=&quot;dhxgrid_sort_desc&quot;;this.gB.YR=0;if(this.sB){this.kR.style.display=&quot;none&quot;}else{this.sB=false}if(this.Az){this.FM()}this.attachHeader();this.attachHeader(0,0,&quot;_aFoot&quot;);this.setSizes();if(fl){this.On()}this.obj.scrollTop=0;if(this.nz){this.ae.eH(this.aL,this)}if(this.CV){this.Ve()}if(this.Yz){this.Yz()}};this.setColumnSizes=function(gridWidth){var AG=0;var HD=[];var fix=0;for(var i=0;i&lt;this._cCount;i++){if((this.initCellWidth[i]==&quot;*&quot;)&amp;&amp; !this._hrrar[i]){this.Gd=false;HD.push(i);continue}if(this.fL==&quot;%&quot;){if(typeof this.cellWidthPC[i]==&quot;undefined&quot;){this.cellWidthPC[i]=this.initCellWidth[i]}var cwidth=(gridWidth*this.cellWidthPC[i]/100)||0;if(fix&gt;0.5){cwidth++;fix--}var rwidth=this.cellWidthPX[i]=Math.floor(cwidth);var fix=fix+cwidth-rwidth}else{if(typeof this.cellWidthPX[i]==&quot;undefined&quot;){this.cellWidthPX[i]=this.initCellWidth[i]}}if(!this._hrrar[i]){AG+=this.cellWidthPX[i]*1}}if(HD.length){var ms=Math.floor((gridWidth-AG)/HD.length);if(ms&lt;0){ms=1}for(var i=0;i&lt;HD.length;i++){var next=Math.max((this._drsclmW?(this._drsclmW[HD[i]]||0):0),ms);this.cellWidthPX[HD[i]]=next;AG+=next}if(gridWidth&gt;AG){var last=HD[HD.length-1];this.cellWidthPX[last]=this.cellWidthPX[last]+(gridWidth-AG);AG=gridWidth}this.tZ()}this.obj.style.width=AG+&quot;px&quot;;this.hdr.style.width=AG+&quot;px&quot;;if(this.ftr){this.ftr.style.width=AG+&quot;px&quot;}this.Ue();return AG};this.setSizes=function(){if((!this.hdr.rows[0])){return}var quirks=this.quirks=(_isIE&amp;&amp;document.compatMode==&quot;BackCompat&quot;);var outerBorder=(this.aL.offsetWidth-this.aL.clientWidth)/2;if(!this.dontSetSizes){if(this.globalBox){var splitOuterBorder=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._delta_x&amp;&amp; !this.nh){var ow=this.globalBox.clientWidth;this.globalBox.style.width=this._delta_x;this.aL.style.width=Math.max(0,(this.globalBox.clientWidth+(quirks?splitOuterBorder*2:0))-this.aC.aL.clientWidth)+&quot;px&quot;;if(ow!=this.globalBox.clientWidth){this.aC.rk(this.aC.aL.clientWidth)}}if(this._delta_y&amp;&amp; !this.nh){this.globalBox.style.height=this._delta_y;this.aL.style.overflow=this.aC.aL.style.overflow=&quot;hidden&quot;;this.aL.style.height=this.aC.aL.style.height=this.globalBox.clientHeight+(quirks?splitOuterBorder*2:0)+&quot;px&quot;}}else{if(this._delta_x){if(this.aL.parentNode&amp;&amp;this.aL.parentNode.tagName==&quot;TD&quot;){this.aL.style.width=&quot;1px&quot;;this.aL.style.width=parseInt(this._delta_x)*this.aL.parentNode.clientWidth/100-outerBorder*2+&quot;px&quot;}else{this.aL.style.width=this._delta_x}}if(this._delta_y){this.aL.style.height=this._delta_y}}}window.clearTimeout(this.zY);if(!this.aL.offsetWidth&amp;&amp;(!this.globalBox|| !this.globalBox.offsetWidth)){this.zY=window.setTimeout(function(){if(self.setSizes){self.setSizes()}},250);return}var border_x=((!this._wthB)&amp;&amp;((this.aL.arj||this._delta_x)&amp;&amp;(this.skin_name||&quot;&quot;).indexOf(&quot;dhx&quot;)==0&amp;&amp; !quirks)?2:0);var border_y=((!this._wthB)&amp;&amp;((this.aL.arj||this._delta_y)&amp;&amp;(this.skin_name||&quot;&quot;).indexOf(&quot;dhx&quot;)==0&amp;&amp; !quirks)?2:0);if(this.vw){border_x-=this.vw;border_y-=this.vw}var isVScroll=this.parentGrid?false:(this.HF.scrollHeight&gt;this.HF.offsetHeight);var PS=dhtmlx.$customScroll?0:18;var gridWidth=this.aL.clientWidth-(this.skin_h_correction||0)*(quirks?0:1)-border_x;var gridWidthActive=this.aL.clientWidth-(this.skin_h_correction||0)-border_x;var gridHeight=this.aL.clientHeight-border_y;var AG=this.setColumnSizes(gridWidthActive-(isVScroll?PS:0)-(this._correction_x||0));var isHScroll=this.parentGrid?false:((this.HF.scrollWidth&gt;this.HF.offsetWidth)||(this.HF.style.overflowX==&quot;scroll&quot;));var headerHeight=this.hdr.clientHeight;var footerHeight=this.ftr?this.ftr.clientHeight:0;var Vc=gridWidth;var SQ=gridHeight-headerHeight-footerHeight;if(this.Gd&amp;&amp;this.Gd[0]&amp;&amp;this.Gd[1]==99999){isHScroll=0}if(this.abK){if(this.aic){SQ=this.aL.parentNode.clientHeight-headerHeight-footerHeight}else{SQ=this.obj.offsetHeight+(isHScroll?PS:0)+(this._correction_y||0)}if(this.FF){if(this.aea){SQ=Math.min(this.FF,SQ+headerHeight+footerHeight)-headerHeight-footerHeight}else{SQ=Math.min(this.FF,SQ)}}if(isVScroll&amp;&amp;SQ&gt;=this.obj.scrollHeight+(isHScroll?PS:0)){isVScroll=false;this.setColumnSizes(gridWidthActive-(this._correction_x||0))}}if((this.Gd)&amp;&amp;(this.Gd[0])){if(this.fL==&quot;%&quot;){this.fL=&quot;px&quot;}if(this.aC){AG+=this.aC.aL.clientWidth}var Vc=Math.min(Math.max(AG+(isVScroll?PS:0),this.Gd[2]),this.Gd[1])+(this._correction_x||0);if(this.aC){Vc-=this.aC.aL.clientWidth}}SQ=Math.max(0,SQ);this._ff_size_delta=(this._ff_size_delta==0.1)?0.2:0.1;if(!aq){this._ff_size_delta=0}if(!this.dontSetSizes){this.aL.style.width=Math.max(0,Vc+(quirks?2:0)*outerBorder+this._ff_size_delta)+&quot;px&quot;;this.aL.style.height=SQ+(quirks?2:0)*outerBorder+headerHeight+footerHeight+&quot;px&quot;}this.HF.style.height=SQ+((quirks&amp;&amp; !isVScroll)?2:0)*outerBorder+&quot;px&quot;;this.kR.style.height=headerHeight+&quot;px&quot;;if(SQ!=gridHeight){this.BD(0,!this.ahK)}var ext=this[&quot;setSizes_&quot;+this.skin_name];if(ext){ext.call(this)}this.vo();if(headerHeight!=this.hdr.clientHeight&amp;&amp;this.abK){this.setSizes()}this.callEvent(&quot;onSetSizes&quot;,[])};this.setSizes_clear=function(){var y=this.hdr.offsetHeight;var x=this.aL.offsetWidth;var y2=y+this.HF.offsetHeight;this.FD.style.top=(y||0)+&quot;px&quot;;this.FD.style.width=(x+20)+&quot;px&quot;;this.Gc.style.top=(y2-3)+&quot;px&quot;;this.Gc.style.width=(x+20)+&quot;px&quot;};this.Ue=function(){if((cU)&amp;&amp;(this.ftr)){this.ftr.width=this.HF.scrollWidth+&quot;px&quot;}var l=this._cCount;for(var i=0;i&lt;l;i++){this.hdr.rows[0].cells[i].style.width=this.cellWidthPX[i]+&quot;px&quot;;this.obj.rows[0].childNodes[i].style.width=this.cellWidthPX[i]+&quot;px&quot;;if(this.ftr){this.ftr.rows[0].cells[i].style.width=this.cellWidthPX[i]+&quot;px&quot;}}};this.alX=function(gX){this.gX=gX};this.setInitWidthsP=function(wp){this.fL=&quot;%&quot;;this.initCellWidth=wp.split(this.gX.replace(/px/gi,&quot;&quot;));if(!arguments[1]){this.tZ()}};this.tZ=function(){if(this.nh){return}var el=window;var self=this;dhtmlxEvent(window,&quot;resize&quot;,function(){window.clearTimeout(self.rJ);if(self.tZ){self.rJ=window.setTimeout(function(){if(self.setSizes){self.setSizes()}if(self.aC){self.aC.rk()}},100)}})};this.setInitWidths=function(wp){this.fL=&quot;px&quot;;this.initCellWidth=wp.split(this.gX);if(aq){for(var i=0;i&lt;this.initCellWidth.length;i++){if(this.initCellWidth[i]!=&quot;*&quot;){this.initCellWidth[i]=parseInt(this.initCellWidth[i])}}}};this.enableMultiline=function(state){this.hu=ap(state)};this.enableMultiselect=function(state){this.gN=ap(state)};this.setImagePath=function(path){this._imgURL=path;this.eg=path+&quot;dhxgrid_&quot;+(this.skin_name||&quot;dhx_skyblue&quot;).replace(&quot;dhx_&quot;,&quot;&quot;)+&quot;/&quot;;this.iconTree=this.eg+&quot;tree/&quot;};this.setImagesPath=this.setImagePath;this.setIconPath=function(path){this.iconURL=path};this.setIconsPath=this.setIconPath;this.bX=function(ev){var el=ev.target||ev.srcElement;if(el.tagName!=&quot;TD&quot;){el=this.bw(el,&quot;TD&quot;)}if(!el){return}if((el.tagName==&quot;TD&quot;)&amp;&amp;(this.qZ)&amp;&amp;(!this.qZ[el._cellIndex])){return el.style.cursor=&quot;default&quot;}var check=(ev.layerX||0)+(((!_isIE)&amp;&amp;(ev.target.tagName==&quot;DIV&quot;))?el.offsetLeft:0);if((el.offsetWidth-(ev.offsetX||(parseInt(this.fI(el,this.kR))-check)* -1))&lt;(cU?20:10)){el.style.cursor=&quot;E-resize&quot;}else{el.style.cursor=&quot;default&quot;}if(cU){this.kR.scrollLeft=this.HF.scrollLeft}};this.eJ=function(ev){if(this.resized){this.fN()}this.resized=null;var el=ev.target||ev.srcElement;if(el.tagName!=&quot;TD&quot;){el=this.bw(el,&quot;TD&quot;)}var x=ev.clientX;var afj=this.hdr.offsetWidth;var VI=parseInt(el.offsetWidth);if(el.tagName==&quot;TD&quot;&amp;&amp;el.style.cursor!=&quot;default&quot;){if((this.qZ)&amp;&amp;(!this.qZ[el._cellIndex])){return}self._old_d_mm=document.body.onmousemove;self._old_d_mu=document.body.onmouseup;document.body.onmousemove=function(e){if(self){self.EO(e||window.event,el,VI,x,afj)}};document.body.onmouseup=function(){if(self){self.fN()}}}};this.fN=function(){document.body.onmousemove=self._old_d_mm||&quot;&quot;;document.body.onmouseup=self._old_d_mu||&quot;&quot;;this.setSizes();this.BD(0,1);this.callEvent(&quot;onResizeEnd&quot;,[this])};this.EO=function(ev,el,VI,x,afj){el.style.cursor=&quot;E-resize&quot;;this.resized=el;var yT=VI+(ev.clientX-x);var ash=afj+(ev.clientX-x);if(!(this.callEvent(&quot;onResize&quot;,[el._cellIndex,yT,this]))){return}if(_isIE){this.HF.scrollLeft=this.kR.scrollLeft}if(el.colSpan&gt;1){var YZ=new Array();for(var i=0;i&lt;el.colSpan;i++){YZ[i]=Math.round(yT*this.hdr.rows[0].childNodes[el._cellIndexS+i].offsetWidth/el.offsetWidth)}for(var i=0;i&lt;el.colSpan;i++){this.si(el._cellIndexS+i*1,YZ[i])}}else{this.si(el._cellIndex,yT)}this.BD(0,1);this.setSizes();if(this.aC&amp;&amp;this.Gd){this.aC.rk()}};this.si=function(ind,yT){if(yT&gt;((this._drsclmW&amp;&amp; !this.Hc)?(this._drsclmW[ind]||10):10)){this.obj.rows[0].childNodes[ind].style.width=yT+&quot;px&quot;;this.hdr.rows[0].childNodes[ind].style.width=yT+&quot;px&quot;;if(this.ftr){this.ftr.rows[0].childNodes[ind].style.width=yT+&quot;px&quot;}if(this.fL==&quot;px&quot;){this.cellWidthPX[ind]=yT}else{var gridWidth=parseInt(this.aL.offsetWidth);if(this.HF.scrollHeight&gt;this.HF.offsetHeight){gridWidth-=17}var ais=Math.round(yT/gridWidth*100);this.cellWidthPC[ind]=ais}if(this.gB.style.display!=&quot;none&quot;){this.vo()}}};this.co=function(state,ind,order,row){order=(order||&quot;asc&quot;).toLowerCase();if(!ap(state)){this.gB.style.display=&quot;none&quot;;this.ij=this.yH=null;return}if(order==&quot;asc&quot;){this.gB.className=&quot;dhxgrid_sort_asc&quot;}else{this.gB.className=&quot;dhxgrid_sort_desc&quot;}this.gB.style.display=&quot;&quot;;this.ij=this.hdr.rows[0].childNodes[ind];var r=this.hdr.rows[row||1];if(!r){return}for(var i=0;i&lt;r.childNodes.length;i++){if(r.childNodes[i]._cellIndexS==ind){this.yH=r.childNodes[i];return this.vo()}}return this.co(state,ind,order,(row||1)+1)};this.vo=function(ind,mode,aiE,el){if(this._hrrar&amp;&amp;this._hrrar[this.yH?this.yH._cellIndex:ind]){return}if(!el){if(!ind){var el=this.yH}else{var el=this.hdr.rows[aiE||0].cells[ind]}}if(el!=null){var pos=this.fI(el,this.kR);var wdth=el.offsetWidth;this.gB.style.left=Number(pos[0]+wdth-13)+&quot;px&quot;;this.gB.YR=parseInt(this.gB.style.left);this.gB.style.top=Number(pos[1]+5)+&quot;px&quot;;if((!this.pH)&amp;&amp;(!mode)){this.gB.style.display=&quot;inline&quot;}this.gB.style.left=this.gB.YR+&quot;px&quot;}};this.setActive=function(fl){if(arguments.length==0){var fl=true}if(fl==true){if(globalActiveDHTMLGridObject&amp;&amp;(globalActiveDHTMLGridObject!=this)){globalActiveDHTMLGridObject.editStop();globalActiveDHTMLGridObject.callEvent(&quot;onBlur&quot;,[globalActiveDHTMLGridObject])}globalActiveDHTMLGridObject=this;this.ft=true}else{this.ft=false;this.callEvent(&quot;onBlur&quot;,[this])}};this.aV=function(ev){var nt=0;var el=this.bw(_isIE?ev.srcElement:ev.target,&quot;TD&quot;);if(!el|| !el.parentNode|| !el.parentNode.idd){return}var fl=true;if(this.markedCells){var markMethod=0;if(ev.shiftKey||ev.metaKey){markMethod=1}if(ev.ctrlKey){markMethod=2}this.doMark(el,markMethod);return true}if(this.gN!=false){if(ev.shiftKey&amp;&amp;this.row!=null&amp;&amp;this.bY.length){nt=1}if(ev.ctrlKey||ev.metaKey){nt=2}}this.doClick(el,fl,nt,false)};this._doContClick=function(ev){var el=this.bw(_isIE?ev.srcElement:ev.target,&quot;TD&quot;);if((!el)||(typeof(el.parentNode.idd)==&quot;undefined&quot;)){this.callEvent(&quot;onEmptyClick&quot;,[ev]);return true}if(ev.button==2||(gP&amp;&amp;ev.ctrlKey)){if(!this.callEvent(&quot;onRightClick&quot;,[el.parentNode.idd,el._cellIndex,ev])){var z=function(e){(e||event).cancelBubble=true;return false};(ev.srcElement||ev.target).oncontextmenu=z;return z(ev)}if(this.Gs){if(!(this.callEvent(&quot;onBeforeContextMenu&quot;,[el.parentNode.idd,el._cellIndex,this]))){return true}if(_isIE){ev.srcElement.oncontextmenu=function(){event.cancelBubble=true;return false}}if(this.Gs.showContextMenu){var aat=window.document.documentElement;var aav=window.document.body;var Ek=new Array((aat.scrollLeft||aav.scrollLeft),(aat.scrollTop||aav.scrollTop));if(_isIE){var x=ev.clientX+Ek[0];var y=ev.clientY+Ek[1]}else{var x=ev.pageX;var y=ev.pageY}this.Gs.showContextMenu(x-1,y-1);this.contextID=this.Gs.contextMenuZoneId=el.parentNode.idd+&quot;_&quot;+el._cellIndex;this.Gs._skip_hide=true}else{el.contextMenuId=el.parentNode.idd+&quot;_&quot;+el._cellIndex;el.contextMenu=this.Gs;el.a=this.Gs.vm;el.a(el,ev);el.a=null}ev.cancelBubble=true;return false}}else{if(this.Gs){if(this.Gs.hideContextMenu){this.Gs.hideContextMenu()}else{this.Gs.ES()}}}return true};this.doClick=function(el,fl,nt,show){if(!this.gN){nt=0}var alh=this.row?this.row.idd:0;this.setActive(true);if(!nt){nt=0}if(this.cell!=null){this.cell.className=this.cell.className.replace(/cellselected/g,&quot;&quot;)}if(el.tagName==&quot;TD&quot;){if(this.mR(&quot;onSelectStateChanged&quot;)){var ajG=this.bI()}var GZ=this.row;if(nt==1){var GN=this.am.bP(el.parentNode);var Hm=this.am.bP(this.Ms);if(GN&gt;Hm){var akL=Hm;var end=GN}else{var akL=GN;var end=Hm}for(var i=0;i&lt;this.am.length;i++){if((i&gt;=akL&amp;&amp;i&lt;=end)){if(this.am[i]&amp;&amp;(!this.am[i].kp)){if(this.am[i].className.indexOf(&quot;rowselected&quot;)== -1&amp;&amp;(this.nh||this.callEvent(&quot;onBeforeSelect&quot;,[this.am[i].idd,alh,el._cellIndex]))){this.am[i].className+=&quot; rowselected&quot;;this.bY[this.bY.length]=this.am[i]}}else{this.pL();return this.doClick(el,fl,0,show)}}}}else{if(nt==2){if(el.parentNode.className.indexOf(&quot;rowselected&quot;)!= -1){el.parentNode.className=el.parentNode.className.replace(/rowselected/g,&quot;&quot;);this.bY.aa(this.bY.bP(el.parentNode));var Nt=true;show=false}}}this.editStop();if(typeof(el.parentNode.idd)==&quot;undefined&quot;){return true}if((!Nt)&amp;&amp;(!el.parentNode.kp)){if(this.nh||this.callEvent(&quot;onBeforeSelect&quot;,[el.parentNode.idd,alh,el._cellIndex])){if(this.acg()!=el.parentNode.idd){if(nt==0){this.pL()}this.cell=el;if((GZ==el.parentNode)&amp;&amp;(this.adC)){fl=false}this.row=el.parentNode;this.row.className+=&quot; rowselected&quot;;if(this.bY.bP(this.row)== -1){this.bY[this.bY.length]=this.row}}else{this.cell=el;this.row=el.parentNode}}else{fl=false}}if(this.cell&amp;&amp;this.cell.parentNode.className.indexOf(&quot;rowselected&quot;)!= -1){this.cell.className=this.cell.className.replace(/cellselected/g,&quot;&quot;)+&quot; cellselected&quot;}if(nt!=1){if(!this.row){return}}this.Ms=el.parentNode;var Mj=this.row.idd;var arX=this.cell;if(fl&amp;&amp;typeof(Mj)!=&quot;undefined&quot;&amp;&amp;arX&amp;&amp; !Nt){self.Ti=setTimeout(function(){if(self.callEvent){self.callEvent(&quot;onRowSelect&quot;,[Mj,arX._cellIndex])}},100)}else{this.callEvent(&quot;onRowSelectRSOnly&quot;,[Mj])}if(this.mR(&quot;onSelectStateChanged&quot;)){var adV=this.bI();if(ajG!=adV){this.callEvent(&quot;onSelectStateChanged&quot;,[adV,ajG])}}}this.ft=true;if(show!==false&amp;&amp;this.cell&amp;&amp;this.cell.parentNode.idd){this.HZ(this.cell)}};this.adx=function(){this.pL();var coll=this.aD;if(this.aW){coll=this.am}for(var i=0;i&lt;coll.length;i++){this.render_row(i).className+=&quot; rowselected&quot;}this.bY=dhtmlxArray([].concat(coll));if(this.bY.length){this.row=this.bY[0];this.cell=this.row.cells[0]}if((this.aC)&amp;&amp;(!this.nh)){this.aC.adx()}};this.eQ=function(r,vF,fl,iW,edit,show){if(!fl){fl=false}if(typeof(r)!=&quot;object&quot;){r=this.render_row(r)}if(!r||r== -1){return null}if(r.bq){var c=r.childNodes[r.bq[vF]]}else{var c=r.childNodes[vF]}if(!c){c=r.childNodes[0]}if(!this.markedCells){if(iW){this.doClick(c,fl,3,show)}else{this.doClick(c,fl,0,show)}}else{this.doMark(c,iW?2:0)}if(edit){this.gh()}};this.HZ=function(Tn,aaS){if(this.aW){var newPage=Math.floor(this.getRowIndex(Tn.parentNode.idd)/this.cu)+1;if(newPage!=this.ew){this.changePage(newPage)}}try{if(Tn.offsetHeight){var BZ=Tn.offsetLeft+Tn.offsetWidth+20;var scrollLeft=0;if(BZ&gt;(this.HF.offsetWidth+this.HF.scrollLeft)){if(Tn.offsetLeft&gt;this.HF.scrollLeft){scrollLeft=Tn.offsetLeft-(this.HF.offsetWidth-Tn.offsetWidth)+5}}else{if(Tn.offsetLeft&lt;this.HF.scrollLeft){BZ-=Tn.offsetWidth*2/3;if(BZ&lt;this.HF.scrollLeft){scrollLeft=Tn.offsetLeft-5}}}if((scrollLeft)&amp;&amp;(!aaS)){this.HF.scrollLeft=scrollLeft}}if(!Tn.offsetHeight){var mask=this.nh?this.aC.bj[Tn.parentNode.idd]:Tn.parentNode;BZ=this.aD.bP(mask)*this.ig}else{BZ=Tn.offsetTop}var distancemax=BZ+Tn.offsetHeight+38;if(distancemax&gt;(this.HF.offsetHeight+this.HF.scrollTop)){var scrollTop=BZ}else{if(BZ&lt;this.HF.scrollTop){var scrollTop=BZ-5}}if(scrollTop){this.HF.scrollTop=scrollTop}}catch(er){}};this.gh=function(){if(this.editor&amp;&amp;this.cell==this.editor.cell){return}this.editStop();if((this.oB!=true)||(!this.cell)){return false}var c=this.cell;if(c.parentNode.FG){return false}this.editor=this.cells4(c);if(this.editor!=null){if(this.editor.isDisabled()){this.editor=null;return false}if(this.callEvent(&quot;onEditCell&quot;,[0,this.row.idd,this.cell._cellIndex])!=false&amp;&amp;this.editor.edit){this.EH=(new Date).valueOf();c.className+=&quot; editable&quot;;this.editor.edit();this.callEvent(&quot;onEditCell&quot;,[1,this.row.idd,this.cell._cellIndex])}else{this.editor=null}}};this.editStop=function(mode){if(cU){if(this.EH){if((this.EH*1+50)&gt;(new Date).valueOf()){return}this.EH=null}}if(this.editor&amp;&amp;this.editor!=null){this.editor.cell.className=this.editor.cell.className.replace(&quot;editable&quot;,&quot;&quot;);if(mode){var t=this.editor.val;this.editor.detach();this.editor.setValue(t);this.editor=null;this.callEvent(&quot;onEditCancel&quot;,[this.row.idd,this.cell._cellIndex,t]);return}if(this.editor.detach()){this.cell.hy=true}var g=this.editor;this.editor=null;var z=this.callEvent(&quot;onEditCell&quot;,[2,this.row.idd,this.cell._cellIndex,g.getValue(),g.val]);if((typeof(z)==&quot;string&quot;)||(typeof(z)==&quot;number&quot;)){g[g.hW?&quot;setLabel&quot;:&quot;setValue&quot;](z)}else{if(!z){g[g.hW?&quot;setLabel&quot;:&quot;setValue&quot;](g.val)}}if(this.abK&amp;&amp;this.hu){this.setSizes()}}};this.Yc=function(row,dir,pos){row=this.CE((this.pj?this.am:this.aD).bP(row),dir);if(!row){return null}return row.childNodes[row.bq?row.bq[pos]:pos]};this.Kn=function(mK,dir,i){mK=mK||this.cell;var nU=mK.parentNode;if(this.Wq){i=this.Wq[mK._cellIndex];if(typeof i!=&quot;undefined&quot;){if(i&lt;0){mK=this.Yc(nU,dir,Math.abs(i)-1)}else{mK=nU.childNodes[i]}}}else{var i=mK._cellIndex+dir;if(i&gt;=0&amp;&amp;i&lt;this._cCount){if(nU.bq){i=nU.bq[mK._cellIndex]+dir}mK=nU.childNodes[i]}else{mK=this.Yc(nU,dir,(dir==1?0:(this._cCount-1)))}}if(!mK){if((dir==1)&amp;&amp;this.tabEnd){this.tabEnd.focus();this.tabEnd.focus();this.setActive(false)}if((dir== -1)&amp;&amp;this.tabStart){this.tabStart.focus();this.tabStart.focus();this.setActive(false)}return null}if(mK.style.display!=&quot;none&quot;&amp;&amp;(!this.smartTabOrder|| !this.cells(mK.parentNode.idd,mK._cellIndex).isDisabled())){return mK}return this.Kn(mK,dir)};this.CE=function(ind,dir){var r=this.render_row(ind+dir);if(!r||r== -1){return null}if(r&amp;&amp;r.style.display==&quot;none&quot;){return this.CE(ind+dir,dir)}return r};this.PP=function(dir){if(!this.aD.length){return}var master=this.nh?this.aC:this;var wc=Math.floor((master._r_select||this.getRowIndex(this.row.idd)||0)+(dir)*this.HF.offsetHeight/(this.ig||20));if(wc&lt;0){wc=0}if(wc&gt;=this.aD.length){wc=this.aD.length-1}if(this.ahK&amp;&amp; !this.aD[wc]){this.HF.scrollTop+=Math.floor((dir)*this.HF.offsetHeight/(this.ig||20))*(this.ig||20);if(this.aC){this.aC.HF.scrollTop=this.HF.scrollTop}master._r_select=wc}else{this.eQ(wc,this.cell._cellIndex,true,false,false,(this.hu||this.ahK));if(!this.hu&amp;&amp; !this.ahK&amp;&amp; !this.nh){this.HF.scrollTop=this.dz(this.bB(wc)).offsetTop;if(this.aC){this.aC.HF.scrollTop=this.HF.scrollTop}}master._r_select=null}};this.bQ=function(ev){if(!ev){return true}if((ev.target||ev.srcElement).value!==window.undefined){var zx=(ev.target||ev.srcElement);if((!zx.parentNode)||(zx.parentNode.className.indexOf(&quot;editable&quot;)== -1)){return true}}if((globalActiveDHTMLGridObject)&amp;&amp;(this!=globalActiveDHTMLGridObject)){return globalActiveDHTMLGridObject.bQ(ev)}if(this.ft==false){return true}if(this.Zl){return true}if(!this.callEvent(&quot;onKeyPress&quot;,[ev.keyCode,ev.ctrlKey,ev.shiftKey,ev])){return false}var code=&quot;k&quot;+ev.keyCode+&quot;_&quot;+(ev.ctrlKey?1:0)+&quot;_&quot;+(ev.shiftKey?1:0);if(this.cell){if(this.zf[code]){if(false===this.zf[code].call(this)){return true}if(ev.preventDefault){ev.preventDefault()}ev.cancelBubble=true;return false}if(this.zf.k_other){this.zf.k_other.call(this,ev)}}return true};this.Th=function(r,fl,iW,show){if(typeof(r)!=&quot;object&quot;){r=this.render_row(r)}this.eQ(r,0,fl,iW,false,show)};this.gF=function(ev){var el=this.bw(_isIE?ev.srcElement:ev.target,&quot;TD&quot;);if(el){var cq=el.parentNode.idd;return this.callEvent(&quot;onRowDblClicked&quot;,[cq,el._cellIndex,ev])}};this.FJ=function(e,el){var that=this.grid;el=el||that.bw(_isIE?event.srcElement:e.target,&quot;TD&quot;);if(this.grid.resized==null){if(!(this.grid.callEvent(&quot;onHeaderClick&quot;,[el._cellIndexS,(e||window.event)]))){return false}that.adU(el._cellIndexS,false,el)}this.grid.resized=null};this.Yb=function(){var num=this.bY.length;if(num==0){return}var anb=this.bY;this.bY=dhtmlxArray();for(var i=num-1;i&gt;=0;i--){var node=anb[i];if(!this.deleteRow(node.idd,node)){this.bY[this.bY.length]=node}else{if(node==this.row){var ind=i}}}if(ind){try{if(ind+1&gt;this.am.length){ind--}this.eQ(ind,0,true)}catch(er){this.row=null;this.cell=null}}};this.acg=function(){var UC=new Array(0);var aov={};for(var i=0;i&lt;this.bY.length;i++){var id=this.bY[i].idd;if(aov[id]){continue}UC[UC.length]=id;aov[id]=true}if(UC.length==0){return null}else{return UC.join(this.gX)}};this.iL=function(){if(this.cell!=null){return this.cell._cellIndex}else{return-1}};this.yI=function(ind){return parseInt(this.cellWidthPX[ind])};this.setColWidth=function(ind,value){if(value==&quot;*&quot;){this.initCellWidth[ind]=&quot;*&quot;}else{if(this._hrrar[ind]){return}if(this.fL==&quot;px&quot;){this.cellWidthPX[ind]=parseInt(value)}else{this.cellWidthPC[ind]=parseInt(value)}}this.setSizes()};this.getRowIndex=function(bO){for(var i=0;i&lt;this.aD.length;i++){if(this.aD[i]&amp;&amp;this.aD[i].idd==bO){return i}}return-1};this.bB=function(ind){return this.aD[ind]?this.aD[ind].idd:this.undefined};this.agA=function(ind,bO){this.changeRowId(this.bB(ind),bO)};this.changeRowId=function(qX,vu){if(qX==vu){return}var row=this.bj[qX];row.idd=vu;if(this.bH[qX]){this.bH[vu]=this.bH[qX];this.bH[qX]=null}if(this._h2&amp;&amp;this._h2.get[qX]){this._h2.get[vu]=this._h2.get[qX];this._h2.get[vu].id=vu;delete this._h2.get[qX]}this.bj[qX]=null;this.bj[vu]=row;for(var i=0;i&lt;row.childNodes.length;i++){if(row.childNodes[i].Lq){row.childNodes[i].Lq=this.MB(row.childNodes[i].AB,row.childNodes[i])}}if(this._mat_links&amp;&amp;this._mat_links[qX]){var a=this._mat_links[qX];delete this._mat_links[qX];for(var c in a){for(var i=0;i&lt;a[c].length;i++){this.MB(a[c][i].eN,a[c][i])}}}this.callEvent(&quot;onRowIdChange&quot;,[qX,vu])};this.setColumnIds=function(ids){this.columnIds=ids.split(this.gX)};this.amG=function(ind,id){this.columnIds[ind]=id};this.getColIndexById=function(id){for(var i=0;i&lt;this.columnIds.length;i++){if(this.columnIds[i]==id){return i}}};this.getColumnId=function(agY){return this.columnIds[agY]};this.adE=function(agY,ind,hdr){var z=(hdr||this.hdr).rows[(ind||0)+1];for(var i=0;i&lt;z.cells.length;i++){if(z.cells[i]._cellIndexS==agY){return(_isIE?z.cells[i].innerText:z.cells[i].textContent)}}return &quot;&quot;};this.getColLabel=this.adE;this.getFooterLabel=function(agY,ind){return this.adE(agY,ind,this.ftr)};this.tG=function(bO){var r=this.dz(bO);if(r){r.style.fontWeight=&quot;bold&quot;}};this.setRowTextStyle=function(bO,jp){var r=this.dz(bO);if(!r){return}for(var i=0;i&lt;r.childNodes.length;i++){var yb=r.childNodes[i]._attrs.style||&quot;&quot;;if((this._hrrar)&amp;&amp;(this._hrrar[i])){yb=&quot;display:none;&quot;}if(_isIE){r.childNodes[i].style.cssText=yb+&quot;width:&quot;+r.childNodes[i].style.width+&quot;;&quot;+jp}else{r.childNodes[i].style.cssText=yb+&quot;width:&quot;+r.childNodes[i].style.width+&quot;;&quot;+jp}}};this.EA=function(bO,color){var r=this.dz(bO);for(var i=0;i&lt;r.childNodes.length;i++){r.childNodes[i].bgColor=color}};this.setCellTextStyle=function(bO,ind,jp){var r=this.dz(bO);if(!r){return}var cell=r.childNodes[r.bq?r.bq[ind]:ind];if(!cell){return}var yb=&quot;&quot;;if((this._hrrar)&amp;&amp;(this._hrrar[ind])){yb=&quot;display:none;&quot;}if(_isIE){cell.style.cssText=yb+&quot;width:&quot;+cell.style.width+&quot;;&quot;+jp}else{cell.style.cssText=yb+&quot;width:&quot;+cell.style.width+&quot;;&quot;+jp}};this.rn=function(bO){var r=this.dz(bO);if(r){r.style.fontWeight=&quot;normal&quot;}};this.aai=function(bO){if(this.dz(bO)!=null){return true}else{return false}};this.adG=function(){return this._cCount};this.zs=function(bO){var r=this.dz(bO);if(this.gY()){return this.MN(bO,-1)}var RM=this.am.bP(r);if((r.previousSibling)&amp;&amp;(RM!=0)){r.parentNode.insertBefore(r,r.previousSibling);this.am.yk(RM,RM-1);this.setSizes();var bInd=this.aD.bP(r);this.aD.yk(bInd,bInd-1);if(this.hC){this._fixAlterCss(RM-1)}}};this.uQ=function(bO){var r=this.dz(bO);if(this.gY()){return this.MN(bO,1)}var RM=this.am.bP(r);if(r.nextSibling){this.am.yk(RM,RM+1);if(r.nextSibling.nextSibling){r.parentNode.insertBefore(r,r.nextSibling.nextSibling)}else{r.parentNode.appendChild(r)}this.setSizes();var bInd=this.aD.bP(r);this.aD.yk(bInd,bInd+1);if(this.hC){this._fixAlterCss(RM)}}};this.cf=function(mf){if(!this.combos[mf]){this.combos[mf]=new dhtmlXGridComboObject()}return this.combos[mf]};this.setUserData=function(bO,name,value){if(!bO){bO=&quot;gridglobaluserdata&quot;}if(!this.bH[bO]){this.bH[bO]=new qB()}this.bH[bO].eT(name,value)};this.getUserData=function(bO,name){if(!bO){bO=&quot;gridglobaluserdata&quot;}this.dz(bO);var z=this.bH[bO];return(z?z.get(name):&quot;&quot;)};this.setEditable=function(fl){this.oB=ap(fl)};this.selectRowById=function(bO,ajh,show,call){if(!call){call=false}this.eQ(this.dz(bO),0,call,ajh,false,show)};this.pL=function(){this.editStop();for(var i=0;i&lt;this.bY.length;i++){var r=this.bj[this.bY[i].idd];if(r){r.className=r.className.replace(/rowselected/g,&quot;&quot;)}}this.bY=dhtmlxArray();this.row=null;if(this.cell!=null){this.cell.className=this.cell.className.replace(/cellselected/g,&quot;&quot;);this.cell=null}this.callEvent(&quot;onSelectionCleared&quot;,[])};this.RK=function(from_row_id,zH){var QC=this.dz(from_row_id);if(!this.gY()){for(var i=0;i&lt;QC.cells.length;i++){this.cells(zH,i).setValue(this.cells(from_row_id,i).getValue())}}else{this.DF(QC,from_row_id,zH)}if(!_isIE){this.dz(from_row_id).cells[0].height=QC.cells[0].offsetHeight}};this.setFooterLabel=function(c,label,ind){return this.adA(c,label,ind,this.ftr)};this.adA=function(c,label,ind,hdr){var z=(hdr||this.hdr).rows[ind||1];var col=(z.bq?z.bq[c]:c);if(!z.cells[col]){return}if(!this.pH){var ep=&quot;<DIV class="hdrcell">&quot;;if(label.indexOf(&quot;img:[&quot;)!= -1){var anc=label.replace(/.*\[([^&gt;]+)\].*/,&quot;$1&quot;);label=label.substr(label.indexOf(&quot;]&quot;)+1,label.length);ep+=&quot;&lt;img width='18px' height='18px' align='absmiddle' src='&quot;+anc+&quot;' hspace='2'&gt;&quot;}ep+=label;ep+=&quot;</DIV>&quot;;z.cells[col].innerHTML=ep;if(this.Oi[col]){z.cells[col].style.cssText=this.Oi[col]}}else{z.cells[col].style.textAlign=&quot;left&quot;;z.cells[col].innerHTML=&quot;&lt;img src='&quot;+label+&quot;'&gt;&quot;;var a=new Image();a.src=&quot;&quot;+label.replace(/(\.[a-z]+)/,&quot;.des$1&quot;);this.sf[this.sf.length]=a;var b=new Image();b.src=&quot;&quot;+label.replace(/(\.[a-z]+)/,&quot;.asc$1&quot;);this.sf[this.sf.length]=b}if((label||&quot;&quot;).indexOf(&quot;#&quot;)!= -1){var t=label.match(/(^|{)#([^}]+)(}|$)/);if(t){var tn=&quot;_in_header_&quot;+t[2];if(this[tn]){this[tn]((this.qW?z.cells[col].firstChild:z.cells[col]),col,label.split(t[0]))}}}};this.setColLabel=function(a,b,ind,c){return this.adA(a,b,(ind||0)+1,c)};this.clearAll=function(header){if(!this.obj.rows[0]){return}if(this._h2){this._h2=new dhtmlxHierarchy();if(this.aC){if(this.nh){this._h2=this.aC._h2}else{this.aC._h2=this._h2}}}this.limit=this.LC=0;this.editStop(true);if(this.ee){window.clearTimeout(this.ee)}if(this.ic){this.HF.scrollTop=0;this.limit=this.LC||0;this.CV=true}var len=this.am.length;len=this.obj.rows.length;for(var i=len-1;i&gt;0;i--){var acY=this.obj.rows[i];acY.parentNode.removeChild(acY)}if(header){this._master_row=null;this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(var i=this.hdr.rows.length-1;i&gt;=0;i--){var acY=this.hdr.rows[i];acY.parentNode.removeChild(acY)}if(this.ftr){this.ftr.parentNode.removeChild(this.ftr);this.ftr=null}this._aHead=this.ftr=this.aoX=this._aFoot=null;this.cellType=dhtmlxArray();this._hrrar=[];this.columnIds=[];this.combos=[];this.dA=[];this.QL=[];this.Az=null}this.row=null;this.cell=null;this.am=dhtmlxArray();this.bj={};this.afF=[];this.aD=dhtmlxArray();this.bH=[];this.bY=dhtmlxArray();if(this.aW||this.ahK){this.tR=&quot;&quot;}if(this.aW){this.changePage(1)}if(this.Bf){window.clearTimeout(this.Bf)}if(this.agg){this.enableStableSorting(true)}this._fillers=this.undefined;this.co(false);this.setSizes();this.callEvent(&quot;onClearAll&quot;,[])};this.adU=function(ind,Vj,afe){if(this.iD()==0){return false}var el=this.hdr.rows[0].cells[ind];if(!el){return}if(el.tagName==&quot;TH&quot;&amp;&amp;(this.fldSort.length-1)&gt;=el._cellIndex&amp;&amp;this.fldSort[el._cellIndex]!=&quot;na&quot;){var data=this.xu();var HL=(data[0]==ind&amp;&amp;data[1]==&quot;asc&quot;)?&quot;des&quot;:&quot;asc&quot;;if(!this.callEvent(&quot;onBeforeSorting&quot;,[ind,this.fldSort[ind],HL])){return}this.gB.className=&quot;dhxgrid_sort_&quot;+(HL==&quot;asc&quot;?&quot;asc&quot;:&quot;desc&quot;);if(this.pH){var ahk=this.hdr.rows[1].cells[el._cellIndex].firstChild;if(this.ij!=null){var akm=this.hdr.rows[1].cells[this.ij._cellIndex].firstChild;akm.src=akm.src.replace(/(\.asc\.)|(\.des\.)/,&quot;.&quot;)}ahk.src=ahk.src.replace(/(\.[a-z]+)$/,&quot;.&quot;+HL+&quot;$1&quot;)}this.xK(el._cellIndex,this.fldSort[el._cellIndex],HL);this.ij=el;this.yH=afe;var c=this.hdr.rows[1];var c=afe.parentNode;var aqB=c.bq?c.bq[el._cellIndex]:el._cellIndex;this.vo(false,false,false,afe)}};this.setCustomSorting=function(aQ,col){if(!this._customSorts){this._customSorts=new Array()}this._customSorts[col]=(typeof(aQ)==&quot;string&quot;)?eval(aQ):aQ;this.fldSort[col]=&quot;cus&quot;};this.enableHeaderImages=function(fl){this.pH=fl};this.setHeader=function(Vb,JP,akR){if(typeof(Vb)!=&quot;object&quot;){var UK=this.ZK(Vb)}else{UK=[].concat(Vb)}var VW=new Array(0);var abA=new dhtmlxArray(0);var aaI=new Array(0);var Xr=new Array(0);var abx=new Array(0);for(var i=0;i&lt;UK.length;i++){VW[VW.length]=Math.round(100/UK.length);abA[abA.length]=&quot;ed&quot;;aaI[aaI.length]=&quot;left&quot;;Xr[Xr.length]=&quot;middle&quot;;abx[abx.length]=&quot;na&quot;}this.JP=JP||&quot;#cspan&quot;;this.hdrLabels=UK;this.aoX=VW;if(!this.initCellWidth.length){this.setInitWidthsP(VW.join(this.gX),true)}this.cellType=abA;this.cellAlign=aaI;this.cellVAlign=Xr;this.fldSort=abx;this.Oi=akR||[]};this.ZK=function(str){if(![].push){return str.split(this.gX)}var a=&quot;r&quot;+(new Date()).valueOf();var z=this.gX.replace(/([\|\+\*\^])/g,&quot;\\$1&quot;);return(str||&quot;&quot;).replace(RegExp(z,&quot;g&quot;),a).replace(RegExp(&quot;\\\\&quot;+a,&quot;g&quot;),this.gX).split(a)};this.abv=function(vF){return this.cellType[vF]};this.aii=function(cID){return this.cellType[this.getColIndexById(cID)]};this.setColTypes=function(ajo){this.cellType=dhtmlxArray(ajo.split(this.gX));this.dA=new Array();for(var i=0;i&lt;this.cellType.length;i++){if((this.cellType[i].indexOf(&quot;[&quot;)!= -1)){var z=this.cellType[i].split(/[\[\]]+/g);this.cellType[i]=z[0];this.QL[i]=z[1];if(z[1].indexOf(&quot;=&quot;)==0){this.cellType[i]=&quot;math&quot;;this.dA[i]=z[0]}}if(!window[&quot;eXcell_&quot;+this.cellType[i]]){dhtmlxError.gn(&quot;Configuration&quot;,&quot;Incorrect cell type: &quot;+this.cellType[i],[this,this.cellType[i]])}}};this.setColSorting=function(aiD){this.fldSort=aiD.split(this.gX);var check={str:1,&quot;int&quot;:1,date:1};for(var i=0;i&lt;this.fldSort.length;i++){if((!check[this.fldSort[i]])&amp;&amp;(typeof(window[this.fldSort[i]])==&quot;function&quot;)){if(!this._customSorts){this._customSorts=new Array()}this._customSorts[i]=window[this.fldSort[i]];this.fldSort[i]=&quot;cus&quot;}}};this.setColAlign=function(ZL){this.cellAlign=ZL.split(this.gX);for(var i=0;i&lt;this.cellAlign.length;i++){this.cellAlign[i]=this.cellAlign[i].PA()}};this.setColVAlign=function(valStr){this.cellVAlign=valStr.split(this.gX)};this.setNoHeader=function(fl){this.sB=ap(fl)};this.aqG=function(UD){this.dz(UD);if(this._h2){this.hx(this._h2.get[UD].parent.id)}var c=this.dz(UD).childNodes[0];while(c&amp;&amp;c.style.display==&quot;none&quot;){c=c.nextSibling}if(c){this.HZ(c,true)}};this.mp=function(aeu,aiL,fZ,aet){this.Gz=[aeu,aiL,fZ,fZ,aet];var ZR=[&quot;#&quot;+this.aL.id+&quot; table.hdr td&quot;,&quot;#&quot;+this.aL.id+&quot; table.obj td&quot;,&quot;#&quot;+this.aL.id+&quot; table.obj tr.rowselected td.cellselected&quot;,&quot;#&quot;+this.aL.id+&quot; table.obj td.cellselected&quot;,&quot;#&quot;+this.aL.id+&quot; table.obj tr.rowselected td&quot;];var index=0;while(!_isIE){try{var temp=document.styleSheets[index].cssRules.length}catch(e){index++;continue}break}for(var i=0;i&lt;ZR.length;i++){if(this.Gz[i]){if(_isIE){document.styleSheets[0].addRule(ZR[i],this.Gz[i])}else{document.styleSheets[index].insertRule(ZR[i]+(&quot; { &quot;+this.Gz[i]+&quot; }&quot;),document.styleSheets[index].cssRules.length)}}}};this.setColumnColor=function(arp){this.columnColor=arp.split(this.gX)};this.enableAlterCss=function(alF,alH,aeU,Yf){if(alF||alH){this.attachEvent(&quot;onGridReconstructed&quot;,function(){this._fixAlterCss();if(this.aC){this.aC._fixAlterCss()}})}this.Cw=aeU;this.Vh=Yf;this.hC=alF;this.iI=alH};this._fixAlterCss=function(ind){if(this._h2&amp;&amp;(this.Cw||this.Vh)){return this.ahx(ind)}if(!this.hC&amp;&amp; !this.iI){return}ind=ind||0;var j=ind;for(var i=ind;i&lt;this.am.length;i++){if(!this.am[i]){continue}if(this.am[i].style.display!=&quot;none&quot;){if(this.am[i].te){j=1;continue}if(this.am[i].className.indexOf(&quot;rowselected&quot;)!= -1){if(j%2==1){this.am[i].className=this.iI+&quot; rowselected &quot;+(this.am[i].Vn||&quot;&quot;)}else{this.am[i].className=this.hC+&quot; rowselected &quot;+(this.am[i].Vn||&quot;&quot;)}}else{if(j%2==1){this.am[i].className=this.iI+&quot; &quot;+(this.am[i].Vn||&quot;&quot;)}else{this.am[i].className=this.hC+&quot; &quot;+(this.am[i].Vn||&quot;&quot;)}}j++}}};this.KQ=function(){for(var i=0;i&lt;this.am.length;i++){var row=this.am[i];if(row&amp;&amp;row.childNodes){var cols=row.childNodes.length;for(var j=0;j&lt;cols;j++){row.childNodes[j].hy=false}}}};this.Dk=function(and_added){var res=new Array();this.forEachRow(function(id){var row=this.bj[id];if(row.tagName!=&quot;TR&quot;){return}var cols=row.childNodes.length;if(and_added&amp;&amp;row.adM){res[res.length]=row.idd}else{for(var j=0;j&lt;cols;j++){if(row.childNodes[j].hy){res[res.length]=row.idd;break}}}});return res.join(this.gX)};this.Jb=false;this.Jr=false;this.fu=function(userData,QT,config,GM,GA,MZ){this.Jb=userData;this.Jr=QT;this.Ld=config;this.Zx=GM;this.xq=GA;this.LB=MZ};this.pm=function(list){if(!list){this.nF=null;return}this.nF=(list||&quot;&quot;).split(&quot;,&quot;);for(var i=0;i&lt;this.nF.length;i++){this.nF[i]=ap(this.nF[i])}};this.JS=function(Nv,inner,closed){this.editStop();var out=[];var close=&quot;&lt;/&quot;+this.xml.yU+&quot;&gt;&quot;;if(this.gY()){this._h2.forEachChildF(0,function(el){var temp=this.xO(this.render_row_tree(-1,el.id));out.push(temp);if(temp){return true}else{return false}},this,function(){out.push(close)})}else{for(var i=0;i&lt;this.aD.length;i++){if(this.aD[i]){if(this.Zx&amp;&amp;this.aD[i]._locator){continue}var temp=this.xO(this.render_row(i));out.push(temp);if(temp){out.push(close)}}}}return[out.join(&quot;&quot;)]};this.xO=function(r,i){var out=[];var ra=this.xml.row_attrs;var ca=this.xml.cell_attrs;out.push(&quot;&lt;&quot;+this.xml.yU);out.push(&quot; id='&quot;+r.idd+&quot;'&quot;);if((this.Jr)&amp;&amp;this.bY.bP(r)!= -1){out.push(&quot; selected='1'&quot;)}if(this._h2&amp;&amp;this._h2.get[r.idd].state==&quot;minus&quot;){out.push(&quot; open='1'&quot;)}if(ra.length){for(var i=0;i&lt;ra.length;i++){out.push(&quot; &quot;+ra[i]+&quot;='&quot;+r._attrs[ra[i]]+&quot;'&quot;)}}out.push(&quot;&gt;&quot;);if(this.Jb&amp;&amp;this.bH[r.idd]){vU=this.bH[r.idd].Ln();for(var ii=0;ii&lt;vU.length;ii++){out.push(&quot;&lt;userdata name='&quot;+vU[ii]+&quot;'&gt;&quot;+(this.LB?&quot;&lt;![CDATA[&quot;:&quot;&quot;)+this.bH[r.idd].get(vU[ii])+(this.LB?&quot;]]&gt;&quot;:&quot;&quot;)+&quot;&lt;/userdata&gt;&quot;)}}var xJ=false;for(var jj=0;jj&lt;this._cCount;jj++){if((!this.nF)||(this.nF[jj])){var zx=this.cells3(r,jj);out.push(&quot;&lt;cell&quot;);if(ca.length){for(var i=0;i&lt;ca.length;i++){out.push(&quot; &quot;+ca[i]+&quot;='&quot;+zx.cell._attrs[ca[i]]+&quot;'&quot;)}}wF=zx[this.zt]();if(this.LB){wF=&quot;&lt;![CDATA[&quot;+wF+&quot;]]&gt;&quot;}if((this.CP)&amp;&amp;(zx.cell.colSpan)&amp;&amp;zx.cell.colSpan&gt;1){out.push(' colspan=&quot;'+zx.cell.colSpan+'&quot; ')}if(this.Zx){if(zx.hy()){out.push(' changed=&quot;1&quot;');xJ=true}}else{if((this.xq)&amp;&amp;(zx.hy())){xJ=true}}if(this.Jr&amp;&amp;this.cellType[jj]==&quot;tree&quot;){out.push((this._h2?(&quot; image='&quot;+this._h2.get[r.idd].image+&quot;'&quot;):&quot;&quot;)+&quot;&gt;&quot;+wF+&quot;&lt;/cell&gt;&quot;)}else{out.push(&quot;&gt;&quot;+wF+&quot;&lt;/cell&gt;&quot;)}if((this.CP)&amp;&amp;(zx.cell.colSpan)){for(var u=0;u&lt;zx.cell.colSpan-1;u++){out.push(&quot;&lt;cell/&gt;&quot;);jj++}}}}if((this.xq)&amp;&amp;(!xJ)&amp;&amp;(!r.adM)){return &quot;&quot;}return out.join(&quot;&quot;)};this.Aj=function(){var out=&quot;&lt;head&gt;&quot;;for(var i=0;i&lt;this.hdr.rows[0].cells.length;i++){if(this.nF&amp;&amp; !this.nF[i]){continue}var sort=this.fldSort[i];if(sort==&quot;cus&quot;){sort=this._customSorts[i].toString();sort=sort.replace(/function[\ ]*/,&quot;&quot;).replace(/\([^\f]*/,&quot;&quot;)}out+=&quot;&lt;column width='&quot;+this.yI(i)+&quot;' align='&quot;+this.cellAlign[i]+&quot;' type='&quot;+this.cellType[i]+&quot;' sort='&quot;+(sort||&quot;na&quot;)+&quot;' color='&quot;+this.columnColor[i]+&quot;'&quot;+(this.columnIds[i]?(&quot; id='&quot;+this.columnIds[i]+&quot;'&quot;):&quot;&quot;)+&quot;&gt;&quot;;if(this.LB){out+=&quot;&lt;![CDATA[&quot;+this.wW(i)+&quot;]]&gt;&quot;}else{out+=this.wW(i)}var z=this.cf(i);if(z){for(var j=0;j&lt;z.kk.length;j++){out+=&quot;&lt;option value='&quot;+z.kk[j]+&quot;'&gt;&quot;+z.values[j]+&quot;&lt;/option&gt;&quot;}}out+=&quot;&lt;/column&gt;&quot;}return out+=&quot;&lt;/head&gt;&quot;};this.serialize=function(){var out='&lt;?xml version=&quot;1.0&quot;?&gt;&lt;rows&gt;';if(this.oX){this.zt=&quot;getMathValue&quot;}else{this.zt=&quot;getValue&quot;}if(this.Jb&amp;&amp;this.bH.gridglobaluserdata){var vU=this.bH.gridglobaluserdata.Ln();for(var i=0;i&lt;vU.length;i++){out+=&quot;&lt;userdata name='&quot;+vU[i]+&quot;'&gt;&quot;+this.bH.gridglobaluserdata.get(vU[i])+&quot;&lt;/userdata&gt;&quot;}}if(this.Ld){out+=this.Aj()}out+=this.JS();out+=&quot;&lt;/rows&gt;&quot;;return out};this.fI=function(PN,Bx){if(!Bx){var pos=getOffset(PN);return[pos.left,pos.top]}Bx=Bx||document.body;var dJ=PN;var uW=0;var AP=0;while((dJ)&amp;&amp;(dJ!=Bx)){uW+=dJ.offsetLeft-dJ.scrollLeft;AP+=dJ.offsetTop-dJ.scrollTop;dJ=dJ.offsetParent}if(Bx==document.body){if(_isIE){AP+=document.body.offsetTop||document.documentElement.offsetTop;uW+=document.body.offsetLeft||document.documentElement.offsetLeft}else{if(!aq){uW+=document.body.offsetLeft;AP+=document.body.offsetTop}}}return[uW,AP]};this.bw=function(obj,tag){while(obj&amp;&amp;obj.tagName!=tag&amp;&amp;obj.tagName!=&quot;BODY&quot;){obj=obj.parentNode}return obj};this.HF.onscroll=function(){this.grid._doOnScroll()};this.HF.ontouchend=function(){this.kR.scrollLeft=this.HF.scrollLeft};this.kR.onscroll=function(){if(this._try_header_sync){return}this._try_header_sync=true;if(Math.abs(this.grid.HF.scrollLeft-this.scrollLeft)&gt;1){this.grid.HF.scrollLeft=this.scrollLeft}this._try_header_sync=false};if((!cU)||(pe&gt;8.5)){this.hdr.onmousemove=function(e){this.grid.bX(e||window.event)};this.hdr.onmousedown=function(e){return this.grid.eJ(e||window.event)}}this.obj.onmousemove=this.Xj;this.HF.onclick=function(e){(e||event).cancelBubble=true};this.obj.onclick=function(e){this.grid.aV(e||window.event);if(this.grid.aU){this.grid.gh(e||window.event)}else{this.grid.editStop()}(e||event).cancelBubble=true};if(gP){this.aL.oncontextmenu=function(e){e.cancelBubble=true;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}var that=this.grid;if(that.nh){that=that.aC}return that._doContClick(e||window.event)}}else{this.aL.onmousedown=function(e){return this.grid._doContClick(e||window.event)};this.aL.oncontextmenu=function(e){if(this.grid.Gs){(e||event).cancelBubble=true}return!this.grid.Gs}}this.obj.ondblclick=function(e){if(!this.grid.gF(e||window.event)){return false}if(this.grid.aP){var row=this.grid.bw((_isIE?event.srcElement:e.target),&quot;TR&quot;);if(row==this.grid.row){this.grid.gh(e||window.event)}}(e||event).cancelBubble=true;if(cU){return false}};this.hdr.onclick=this.FJ;this.gB.onclick=function(){self.FJ.apply({grid:self},[null,self.yH])};this.hdr.ondblclick=this.LI;if(!document.body.FO){dhtmlxEvent(document,&quot;keydown&quot;,function(e){if(globalActiveDHTMLGridObject){return globalActiveDHTMLGridObject.bQ(e||window.event)}});document.body.FO=true}dhtmlxEvent(document.body,&quot;click&quot;,function(){if(self.editStop){self.editStop()}if(self.ft){self.setActive(false)}});if(this.aL.style.height.toString().indexOf(&quot;%&quot;)!= -1){this._delta_y=this.aL.style.height}if(this.aL.style.width.toString().indexOf(&quot;%&quot;)!= -1){this._delta_x=this.aL.style.width}if(this._delta_x||this._delta_y){this.tZ()}this.FM=this.abt;this.enableCollSpan=this.enableColSpan;this.Rn=this.enableMultiselect;this.CB=this.enableMultiline;this.iu=this.Yb;this.bI=this.acg;this.wW=this.adE;this.Xu=this.aai;this.So=this.adG;this.dX=this.selectRowById;this.Cs=this.adA;this.jJ=this.vq;this.enableAutoHeigth=this.enableAutoHeight;this.iH=this.uid;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path)}if(dhtmlx.skin){this.setSkin(dhtmlx.skin)}return this}dhtmlXGridObject.prototype={getRowAttribute:function(c,a){return this.dz(c)._attrs[a]},setRowAttribute:function(g,a,c){this.dz(g)._attrs[a]=c},gY:function(){return(this.cellType.bP(&quot;tree&quot;)!= -1)},sO:function(m,g){var c=ap(g);var l=this.dz(m);if(!l){return}if(l.expand===&quot;&quot;){this.collapseKids(l)}if((g)&amp;&amp;(l.style.display!=&quot;none&quot;)){l.style.display=&quot;none&quot;;var h=this.bY.bP(l);if(h!= -1){l.className=l.className.replace(&quot;rowselected&quot;,&quot;&quot;);for(var a=0;a&lt;l.childNodes.length;a++){l.childNodes[a].className=l.childNodes[a].className.replace(/cellselected/g,&quot;&quot;)}this.bY.aa(h)}this.callEvent(&quot;onGridReconstructed&quot;,[])}if((!g)&amp;&amp;(l.style.display==&quot;none&quot;)){l.style.display=&quot;&quot;;this.callEvent(&quot;onGridReconstructed&quot;,[])}this.callEvent(&quot;onRowHide&quot;,[m,g]);this.setSizes()},setColumnHidden:function(g,c){if(!this.hdr.rows.length){if(!this.Az){this.Az=[]}return this.Az[g]=c}if((this.ij)&amp;&amp;(this.ij.cellIndex==g)&amp;&amp;(c)){this.gB.style.display=&quot;none&quot;}var a=ap(c);if(a){if(!this._hrrar){this._hrrar=new Array()}else{if(this._hrrar[g]){return}}this._hrrar[g]=&quot;display:none;&quot;;this.wx(g,&quot;none&quot;)}else{if((!this._hrrar)||(!this._hrrar[g])){return}this._hrrar[g]=&quot;&quot;;this.wx(g,&quot;&quot;)}if((this.ij)&amp;&amp;(this.ij.cellIndex==g)&amp;&amp;(!c)){this.gB.style.display=&quot;inline&quot;}this.vo();this.callEvent(&quot;onColumnHidden&quot;,[g,c])},Fs:function(a){if((this._hrrar)&amp;&amp;(this._hrrar[a])){return true}return false},abt:function(c){if(c){this.Az=c.split(this.gX)}if(this.hdr.rows.length&amp;&amp;this.Az){for(var a=0;a&lt;this.Az.length;a++){this.setColumnHidden(a,this.Az[a])}}},pM:function(o,g,a,c,m){m=m||&quot;_cellIndex&quot;;var n=o.rows.length;for(var l=0;l&lt;n;l++){var q=o.rows[l].childNodes;if(q.length!=this._cCount){for(var h=0;h&lt;q.length;h++){if(q[h][m]==g){q[h].style[a]=c;break}}}else{q[g].style[a]=c}}},wx:function(l,h){var a=l;if(this.hdr.rows[1]&amp;&amp;(this.hdr.rows[1].bq)&amp;&amp;(this.hdr.rows[1].bq[l]!=l)){a=this.hdr.rows[1].bq[l]}if(h==&quot;none&quot;){this.hdr.rows[0].cells[l].uE=this.hdr.rows[0].cells[l].style.width||(this.initCellWidth[l]+&quot;px&quot;);this.hdr.rows[0].cells[l].Ce=this.cellWidthPC[l];this.obj.rows[0].cells[l].style.width=&quot;0px&quot;;var c={rows:[this.obj.rows[0]]};this.forEachRow(function(m){if(this.bj[m].tagName==&quot;TR&quot;){c.rows.push(this.bj[m])}});this.pM(c,l,&quot;display&quot;,&quot;none&quot;);if(this.gY()){this.oj(l,&quot;none&quot;)}if((cU&amp;&amp;pe&lt;9)||cn||(aq)){this.pM(this.hdr,l,&quot;display&quot;,&quot;none&quot;,&quot;_cellIndexS&quot;)}if(this.ftr){this.pM(this.ftr.childNodes[0],l,&quot;display&quot;,&quot;none&quot;)}this.pM(this.hdr,l,&quot;whiteSpace&quot;,&quot;nowrap&quot;,&quot;_cellIndexS&quot;);if(!this.cellWidthPX.length&amp;&amp; !this.cellWidthPC.length){this.cellWidthPX=[].concat(this.initCellWidth)}if(this.cellWidthPX[l]){this.cellWidthPX[l]=0}if(this.cellWidthPC[l]){this.cellWidthPC[l]=0}}else{if(this.hdr.rows[0].cells[l].uE){var g=this.hdr.rows[0].cells[l];if(cU||cn||(aq)){this.pM(this.hdr,l,&quot;display&quot;,&quot;&quot;,&quot;_cellIndexS&quot;)}if(this.ftr){this.pM(this.ftr.childNodes[0],l,&quot;display&quot;,&quot;&quot;)}var c={rows:[this.obj.rows[0]]};this.forEachRow(function(m){if(this.bj[m].tagName==&quot;TR&quot;){c.rows.push(this.bj[m])}});this.pM(c,l,&quot;display&quot;,&quot;&quot;);if(this.gY()){this.oj(l,&quot;&quot;)}this.pM(this.hdr,l,&quot;whiteSpace&quot;,&quot;normal&quot;,&quot;_cellIndexS&quot;);if(g.Ce){this.cellWidthPC[l]=g.Ce}if(g.uE){this.cellWidthPX[l]=parseInt(g.uE)}}}this.setSizes();if((!_isIE)&amp;&amp;(!aq)){this.obj.border=1;this.obj.border=0}},enableColSpan:function(a){this.CP=ap(a)},enableRowsHover:function(c,a){this.Rz(false,true);this.Lk=a;if(ap(c)){if(!this.Qh){this.obj.Io=this.obj.onmousemove;this.obj.onmousemove=this.ff;if(_isIE){this.obj.onmouseleave=this.Rz}else{this.obj.onmouseout=this.Rz}this.Qh=true}}else{if(this.Qh){this.obj.onmousemove=this.obj.Io;if(_isIE){this.obj.onmouseleave=null}else{this.obj.onmouseout=null}this.Qh=false}}},rg:function(c,g,a){this.aU=ap(c);this.aP=ap(g);this.UB=ap(a)},enableLightMouseNavigation:function(a){if(ap(a)){if(!this.UJ){this.aL.age=this.aL.onclick;this.aL.onclick=function(){return true};this.obj.age=this.obj.onclick;this.obj.onclick=function(g){var h=this.grid.bw(g?g.target:event.srcElement,&quot;TD&quot;);if(!h){return}this.grid.editStop();this.grid.doClick(h);this.grid.gh();(g||event).cancelBubble=true};this.obj.KA=this.obj.onmousemove;this.obj.onmousemove=this.Oy;this.UJ=true}}else{if(this.UJ){this.aL.onclick=this.aL.age;this.obj.onclick=this.obj.age;this.obj.onmousemove=this.obj.KA;this.UJ=false}}},Rz:function(g,h){if(h){that=this}else{that=this.grid}if((that.Fr)&amp;&amp;(that.Fr!=h)){for(var a=0;a&lt;that.Fr.childNodes.length;a++){that.Fr.childNodes[a].className=that.Fr.childNodes[a].className.replace(that.Lk,&quot;&quot;)}that.Fr=null}},ff:function(g){var h=this.grid.bw(g?g.target:event.srcElement,&quot;TD&quot;);if(h&amp;&amp;h.parentNode!=this.grid.Fr){this.grid.Rz(0,h);h=h.parentNode;if(!h.idd||h.idd==&quot;__filler__&quot;){return}for(var a=0;a&lt;h.childNodes.length;a++){h.childNodes[a].className+=&quot; &quot;+this.grid.Lk}this.grid.Fr=h}this.Io(g)},Oy:function(a){if(!this.grid.editor){var g=this.grid.bw(a?a.target:event.srcElement,&quot;TD&quot;);if(g.parentNode.idd){this.grid.doClick(g,true,0)}}this.KA(a)},enableDistributedParsing:function(g,a,c){if(ap(g)){this.Hv=a||10;this.Kb=c||250}else{this.Hv=0}},fA:function(){this.editStop(true);if(this.zY){this.zY=window.clearTimeout(this.zY)}this.aL.className=(this.aL.className||&quot;&quot;).replace(/gridbox.*/,&quot;&quot;);if(this.vn){for(var g=0;g&lt;this.vn.length;g++){this.qs.removeChild(this.vn[g])}}var c;this.bA=this.bA.fA();for(var g=0;g&lt;this.am.length;g++){if(this.am[g]){this.am[g].grid=null}}for(g in this.bj){if(this.bj[g]){this.bj[g]=null}}this.am=new dhtmlxArray();this.bj={};this.aL.innerHTML=&quot;&quot;;var h=function(){};this.aL.onclick=this.aL.onmousedown=this.aL.onbeforeactivate=this.aL.onbeforedeactivate=this.aL.onbeforedeactivate=this.aL.onselectstart=h;this.setSizes=this._update_srnd_view=this.callEvent=h;this.aL.grid=this.HF.grid=this.kR.grid=this.obj.grid=this.hdr.grid=null;if(this.aC){this.globalBox.innerHTML=&quot;&quot;;this.aC.setSizes=this.aC._update_srnd_view=this.aC.callEvent=h;this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=h}for(c in this){if((this[c])&amp;&amp;(this[c].yO)){this[c].yO=null}this[c]=null}if(this==globalActiveDHTMLGridObject){globalActiveDHTMLGridObject=null}return null},xu:function(){var a=new Array();if(this.ij){a[0]=this.ij._cellIndex;a[1]=(this.gB.className==&quot;dhxgrid_sort_desc&quot;?&quot;des&quot;:&quot;asc&quot;)}return a},enableAutoHeight:function(g,c,a){this.abK=ap(g);this.aea=ap(a);this.FF=c||null;if(arguments.length==1){this.HF.style.overflowY=g?&quot;hidden&quot;:&quot;auto&quot;}if(c==&quot;auto&quot;){this.FF=null;this.aic=true;this.tZ()}},enableStableSorting:function(a){this.agg=ap(a);this.am.stablesort=function(m){var l=this.length-1;for(var h=0;h&lt;this.length-1;h++){for(var g=0;g&lt;l;g++){if(m(this[g],this[g+1])&gt;0){var c=this[g];this[g]=this[g+1];this[g+1]=c}}l--}}},enableKeyboardSupport:function(a){this.Zl= !ap(a)},enableContextMenu:function(a){this.Gs=a},Tk:function(a){},aja:function(c){this.FB=c.split(&quot;,&quot;);for(var a=0;a&lt;this.FB.length;a++){this.FB[a]=ap(this.FB[a])}},aik:function(c){this.qZ=c.split(&quot;,&quot;);for(var a=0;a&lt;this.qZ.length;a++){this.qZ[a]=ap(this.qZ[a])}},mE:function(a,c){if(arguments.length==2){if(!this._drsclmW){this._drsclmW=new Array()}this._drsclmW[c]=a}else{this._drsclmW=a.split(&quot;,&quot;)}},enableCellIds:function(a){this.ajm=ap(a)},at:function(a,g){var c=this.dz(a);if(c){c.FG=ap(g);if((this.cell)&amp;&amp;(this.cell.parentNode.idd==a)){this.editStop()}}},Vf:function(l){var h=new Array();for(var g=0;g&lt;l.childNodes.length;g++){var c=this.cells3(l,g);h[g]=c.getValue()}return h},setDateFormat:function(c,a){this.RY=c;this._dtmask_inc=a},setNumberFormat:function(o,g,l,n){var h=o.replace(/[^0\,\.]*/g,&quot;&quot;);var a=h.indexOf(&quot;.&quot;);if(a&gt; -1){a=h.length-a-1}var c=h.indexOf(&quot;,&quot;);if(c&gt; -1){c=h.length-a-2-c}if(typeof l!=&quot;string&quot;){l=this.i18n.decimal_separator}if(typeof n!=&quot;string&quot;){n=this.i18n.group_separator}var q=o.split(h)[0];var m=o.split(h)[1];this._maskArr[g]=[a,c,q,m,l,n]},Sl:function(l,h){var c=this._maskArr[h];if(!c){return l}var g=parseFloat(l.toString().replace(/[^0-9]*/g,&quot;&quot;));if(l.toString().substr(0,1)==&quot;-&quot;){g=g* -1}if(c[0]&gt;0){g=g/Math.pow(10,c[0])}return g},PH:function(m,l){var g=this._maskArr[l];if(!g){return m}var n=(parseFloat(m)&lt;0?&quot;-&quot;:&quot;&quot;)+g[2];m=Math.abs(Math.round(parseFloat(m)*Math.pow(10,g[0]&gt;0?g[0]:0))).toString();m=(m.length&lt;g[0]?Math.pow(10,g[0]+1-m.length).toString().substr(1,g[0]+1)+m.toString():m).split(&quot;&quot;).reverse();m[g[0]]=(m[g[0]]||&quot;0&quot;)+g[4];if(g[1]&gt;0){for(var h=(g[0]&gt;0?0:1)+g[0]+g[1];h&lt;m.length;h+=g[1]){m[h]+=g[5]}}return n+m.reverse().join(&quot;&quot;)+g[3]},DV:function(a){for(var h=0;h&lt;a.length;h++){var g=new Array();for(var c=0;c&lt;a[h].childNodes.length;c++){if(a[h].childNodes[c].nodeType==1){g[g.length]=a[h].childNodes[c].firstChild.data}}this[a[h].getAttribute(&quot;command&quot;)].apply(this,g)}},Ov:function(l){var h=this.bA.et(&quot;./head&quot;,l);if(h.length){var m=this.bA.et(&quot;./column&quot;,h[0]);var n=this.bA.et(&quot;./settings&quot;,h[0]);var C=&quot;setInitWidths&quot;;var w=false;if(n[0]){for(var o=0;o&lt;n[0].childNodes.length;o++){switch(n[0].childNodes[o].tagName){case &quot;colwidth&quot;:if(n[0].childNodes[o].firstChild&amp;&amp;n[0].childNodes[o].firstChild.data==&quot;%&quot;){C=&quot;setInitWidthsP&quot;}break;case &quot;splitat&quot;:w=(n[0].childNodes[o].firstChild?n[0].childNodes[o].firstChild.data:false);break}}}this.DV(this.bA.et(&quot;./beforeInit/call&quot;,h[0]));if(m.length&gt;0){if(this.hdr.rows.length&gt;0){this.clearAll(true)}var a=[[],[],[],[],[],[],[],[],[]];var v=[&quot;&quot;,&quot;width&quot;,&quot;type&quot;,&quot;align&quot;,&quot;sort&quot;,&quot;color&quot;,&quot;format&quot;,&quot;hidden&quot;,&quot;id&quot;];var u=[&quot;&quot;,C,&quot;setColTypes&quot;,&quot;setColAlign&quot;,&quot;setColSorting&quot;,&quot;setColumnColor&quot;,&quot;&quot;,&quot;&quot;,&quot;setColumnIds&quot;];for(var A=0;A&lt;m.length;A++){for(var y=1;y&lt;v.length;y++){a[y].push(m[A].getAttribute(v[y]))}a[0].push((m[A].firstChild?m[A].firstChild.data:&quot;&quot;).replace(/^\s*((\s\S)*.+)\s*$/gi,&quot;$1&quot;))}this.setHeader(a[0]);for(var A=0;A&lt;u.length;A++){if(u[A]){this[u[A]](a[A].join(this.gX))}}for(var A=0;A&lt;m.length;A++){if((this.cellType[A].indexOf(&quot;co&quot;)==0)||(this.cellType[A]==&quot;clist&quot;)){var q=this.bA.et(&quot;./option&quot;,m[A]);if(q.length){var x=new Array();if(this.cellType[A]==&quot;clist&quot;){for(var y=0;y&lt;q.length;y++){x[x.length]=q[y].firstChild?q[y].firstChild.data:&quot;&quot;}this.AO(A,x)}else{var D=this.cf(A);for(var y=0;y&lt;q.length;y++){D.eT(q[y].getAttribute(&quot;value&quot;),q[y].firstChild?q[y].firstChild.data:&quot;&quot;)}}}}else{if(a[6][A]){if((this.cellType[A].toLowerCase().indexOf(&quot;calendar&quot;)!= -1)||(this.fldSort[A]==&quot;date&quot;)){this.setDateFormat(a[6][A])}else{this.setNumberFormat(a[6][A],A)}}}}this.init();var g=a[7].join(this.gX);if(this.FM&amp;&amp;g.replace(/,/g,&quot;&quot;)!=&quot;&quot;){this.FM(g)}if((w)&amp;&amp;(this.tT)){this.tT(w)}}this.DV(this.bA.et(&quot;./afterInit/call&quot;,h[0]))}var c=this.bA.et(&quot;//rows/userdata&quot;,l);if(c.length&gt;0){if(!this.bH.gridglobaluserdata){this.bH.gridglobaluserdata=new qB()}for(var y=0;y&lt;c.length;y++){var E=&quot;&quot;;for(var r=0;r&lt;c[y].childNodes.length;r++){E+=c[y].childNodes[r].nodeValue}this.bH.gridglobaluserdata.eT(c[y].getAttribute(&quot;name&quot;),E)}}},aiZ:function(a){var c=new Array();this.forEachRowA(function(h){var g=this.cells(h,a);if(g.changeState&amp;&amp;g.getValue()!=0){c.push(h)}},true);return c.join(&quot;,&quot;)},checkAll:function(){var c=arguments.length?arguments[0]:1;for(var a=0;a&lt;this.adG();a++){if(this.abv(a)==&quot;ch&quot;){this.setCheckedRows(a,c)}}},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(c,a){this.forEachRowA(function(g){if(this.cells(g,c).wI()){this.cells(g,c).setValue(a)}})},Xj:function(l){var m=this.grid.bw(l?l.target:event.srcElement,&quot;TD&quot;);if(!m||((this.grid.editor)&amp;&amp;(this.grid.editor.cell==m))){return true}var h=m.parentNode;if(!h.idd||h.idd==&quot;__filler__&quot;){return}var g=(l?l.target:event.srcElement);if(h.idd==window.unknown){return true}if(!this.grid.callEvent(&quot;onMouseOver&quot;,[h.idd,m._cellIndex,(l||window.event)])){return true}if((this.grid.FB)&amp;&amp;(!this.grid.FB[m._cellIndex])){if(g.title){g.title=&quot;&quot;}return true}if(m._cellIndex&gt;=this.grid._cCount){return}var a=this.grid.cells3(h,m._cellIndex);if(!a|| !a.cell|| !a.cell._attrs){return}if(g.ahi){a.cell.title=&quot;&quot;}if(!a.cell._attrs.title){g.ahi=true}if(a){g.title=a.cell._attrs.title||(a.getTitle?a.getTitle():(a.getValue()||&quot;&quot;).toString().replace(/&lt;[^&gt;]*&gt;/gi,&quot;&quot;))}return true},UH:function(a){if(aq){this.Wr=parseInt(a)}},aau:function(g){var a=[];for(var c=0;c&lt;this.aD.length;c++){if(this.aD[c]){a.push(this.aD[c].idd)}}return a.join(g||this.gX)},Iy:function(){return this.aau()},Oq:function(g,x,h){if(!this.CP){return}var a=this.dz(g);if((a.bq)&amp;&amp;(a.childNodes[a.bq[x]])){var q=a.bq[x];var l=a.childNodes[q];var o=l.colSpan;l.colSpan=1;if((o)&amp;&amp;(o!=1)){for(var u=1;u&lt;o;u++){var w=document.createElement(&quot;TD&quot;);if(l.nextSibling){a.insertBefore(w,l.nextSibling)}else{a.appendChild(w)}a.bq[x+u]=q+u;w._cellIndex=x+u;w.style.textAlign=this.cellAlign[u];w.style.verticalAlign=this.cellVAlign[u];l=w;this.cells3(a,x+u).setValue(&quot;&quot;)}}for(var v=x*1+1*o;v&lt;a.bq.length;v++){a.bq[v]+=(o-1)*1}}if((h)&amp;&amp;(h&gt;1)){if(a.bq){var q=a.bq[x]}else{var q=x;a.bq=new Array();for(var v=0;v&lt;a.childNodes.length;v++){a.bq[v]=v}}a.childNodes[q].colSpan=h;for(var v=1;v&lt;h;v++){a.bq[a.childNodes[q+1]._cellIndex]=q;a.removeChild(a.childNodes[q+1])}var s=a.childNodes[a.bq[x]]._cellIndex;for(var v=s*1+1*h;v&lt;a.bq.length;v++){a.bq[v]-=(h-1)}}},vq:function(a){this.ir=ap(a);this.bA.hN=this.ir},HG:function(a){this.anu=ap(a)},LI:function(g){var c=this.grid;var a=c.bw(_isIE?event.srcElement:g.target,&quot;TD&quot;);if(!c.anu){return false}c.nT(a._cellIndexS)},nT:function(q,c){if(this._hrrar&amp;&amp;this._hrrar[q]){return}this.Hc=true;var g=0;this.si(q,20);for(var n=1;n&lt;this.hdr.rows.length;n++){var s=this.hdr.rows[n];s=s.childNodes[(s.bq)?s.bq[q]:q];if((s)&amp;&amp;((!s.colSpan)||(s.colSpan&lt;2))&amp;&amp;s._cellIndex==q){if((s.childNodes[0])&amp;&amp;(s.childNodes[0].className==&quot;hdrcell&quot;)){s=s.childNodes[0]}g=Math.max(g,s.scrollWidth)}}var h=this.obj.rows.length;var r=0;var v=this.cellType.bP(&quot;tree&quot;);for(var o=1;o&lt;h;o++){var u=this.obj.rows[o];if(!this.bj[u.idd]){continue}if(u.bq&amp;&amp;u.bq[q]!=q|| !u.childNodes[q]){continue}r=(u.childNodes[q].innerText||u.childNodes[q].textContent||&quot;&quot;).length*this.fontWidth;if(this._h2&amp;&amp;q==v){r+=this._h2.get[u.idd].gR*22}if(r&gt;g){g=r}}g+=20+(c||0);this.si(q,g);this.Hc=false;this.setSizes()},gz:function(a,g){g=g||this.hdr;var c=g.rows[a+1];if(c){c.parentNode.removeChild(c)}this.setSizes()},iS:function(a){this.gz(a,this.ftr)},attachHeader:function(a,h,c){if(typeof(a)==&quot;string&quot;){a=this.ZK(a)}if(typeof(h)==&quot;string&quot;){h=h.split(this.gX)}c=c||&quot;_aHead&quot;;if(this.hdr.rows.length){if(a){this.Yw([a,h],this[(c==&quot;_aHead&quot;)?&quot;hdr&quot;:&quot;ftr&quot;])}else{if(this[c]){for(var g=0;g&lt;this[c].length;g++){this.attachHeader.apply(this,this[c][g])}}}}else{if(!this[c]){this[c]=new Array()}this[c][this[c].length]=[a,h,c]}},Yw:function(g,r){if(!r){if(this.aL.style.position!=&quot;absolute&quot;){this.aL.style.position=&quot;relative&quot;}var n=document.createElement(&quot;DIV&quot;);n.className=&quot;c_ftr&quot;.substr(2);this.aL.appendChild(n);var v=document.createElement(&quot;TABLE&quot;);v.cellPadding=v.cellSpacing=0;if(!_isIE||_isIE==8){v.width=&quot;100%&quot;;v.style.paddingRight=&quot;20px&quot;}v.style.marginRight=&quot;20px&quot;;v.style.tableLayout=&quot;fixed&quot;;n.appendChild(v);v.appendChild(document.createElement(&quot;TBODY&quot;));this.ftr=r=v;var m=v.insertRow(0);var a=((this.hdrLabels.length&lt;=1)?g[0].length:this.hdrLabels.length);for(var h=0;h&lt;a;h++){m.appendChild(document.createElement(&quot;TH&quot;));m.childNodes[h]._cellIndex=h}if(_isIE&amp;&amp;_isIE&lt;8){m.style.position=&quot;absolute&quot;}else{m.style.height=&quot;auto&quot;}}var l=g[1];var n=document.createElement(&quot;TR&quot;);r.rows[0].parentNode.appendChild(n);for(var h=0;h&lt;g[0].length;h++){if(g[0][h]==&quot;#cspan&quot;){var o=n.cells[n.cells.length-1];o.colSpan=(o.colSpan||1)+1;continue}if((g[0][h]==&quot;#rspan&quot;)&amp;&amp;(r.rows.length&gt;1)){var y=r.rows.length-2;var x=false;var o=null;while(!x){var o=r.rows[y];for(var c=0;c&lt;o.cells.length;c++){if(o.cells[c]._cellIndex==h){x=c+1;break}}y--}o=o.cells[x-1];o.rowSpan=(o.rowSpan||1)+1;continue}var q=document.createElement(&quot;TD&quot;);q._cellIndex=q._cellIndexS=h;if(this._hrrar&amp;&amp;this._hrrar[h]&amp;&amp; !_isIE){q.style.display=&quot;none&quot;}if(typeof g[0][h]==&quot;object&quot;){q.appendChild(g[0][h])}else{if(this.qW){q.innerHTML=&quot;<DIV class="hdrcell">&quot;+(g[0][h]||&quot; &quot;)+&quot;</DIV>&quot;}else{q.innerHTML=(g[0][h]||&quot; &quot;)}if((g[0][h]||&quot;&quot;).indexOf(&quot;#&quot;)!= -1){var v=g[0][h].match(/(^|{)#([^}]+)(}|$)/);if(v){var s=&quot;_in_header_&quot;+v[2];if(this[s]){this[s]((this.qW?q.firstChild:q),h,g[0][h].split(v[0]))}}}}if(l){q.style.cssText=l[h]}n.appendChild(q)}var u=r;if(cn){if(r.Ze){window.clearTimeout(r.Ze)}r.Ze=window.setTimeout(function(){r.rows[1].style.display=&quot;none&quot;;window.setTimeout(function(){r.rows[1].style.display=&quot;&quot;},1)},500)}},attachFooter:function(a,c){this.attachHeader(a,c,&quot;_aFoot&quot;)},Me:function(g,a,c){this.tW(this.dz(g),a,c)},tW:function(g,h,c){c=c||this.cellType[h];var l=this.cells3(g,h);var a=l.getValue();l.cell.zk=c;var l=this.cells3(g,h);l.setValue(a)},CX:function(g,c){var h=this.bj[g];for(var a=0;a&lt;h.childNodes.length;a++){this.tW(h,a,c)}},IP:function(a,g){for(var c=0;c&lt;this.aD.length;c++){if(this.aD[c]&amp;&amp;this.aD[c].tagName==&quot;TR&quot;){this.tW(this.aD[c],a,g)}}if(this.cellType[a]==&quot;math&quot;){this.dA[c]=g}else{this.cellType[a]=g}},forEachRow:function(g){for(var c in this.bj){if(this.bj[c]&amp;&amp;this.bj[c].idd){g.apply(this,[this.bj[c].idd])}}},forEachRowA:function(g){for(var c=0;c&lt;this.aD.length;c++){if(this.aD[c]){g.call(this,this.render_row(c).idd)}}},amz:function(g,c){var h=this.dz(g);if(!h){return}for(var a=0;a&lt;this._cCount;a++){c(this.cells3(h,a),a)}},enableAutoWidth:function(g,a,c){this.Gd=[ap(g),parseInt(a||99999),parseInt(c||0)];if(arguments.length==1){this.HF.style.overflowX=g?&quot;hidden&quot;:&quot;auto&quot;}},TJ:function(a,h,c,g){if(typeof h==&quot;undefined&quot;){h=true}this.cZ=[true,h,c];this.load(a,g)},OR:function(h){if(this._f_rowsBuffer){this.GF(0,&quot;&quot;)}reset=false;if(window.eXcell_tree){eXcell_tree.prototype.Tw=eXcell_tree.prototype.setValue;eXcell_tree.prototype.setValue=function(u){var s=this.grid._h2.get[this.cell.parentNode.idd];if(s&amp;&amp;this.cell.parentNode.JT){this.setLabel(u)}else{this.Tw(u)}}}var r=this.cellType.bP(&quot;tree&quot;);h.cR(&quot;rows&quot;);var l=h.et(&quot;//rows&quot;)[0].getAttribute(&quot;parent&quot;)||0;var n={};if(this.cZ[2]){if(r!= -1){this._h2.so(l,function(s){n[s.id]=true},this)}else{this.forEachRow(function(s){n[s]=true})}}var q=h.et(&quot;//row&quot;);for(var g=0;g&lt;q.length;g++){var o=q[g];var a=o.getAttribute(&quot;id&quot;);n[a]=false;var l=o.parentNode.getAttribute(&quot;id&quot;)||l;if(this.bj[a]&amp;&amp;this.bj[a].tagName!=&quot;TR&quot;){if(this._h2){this._h2.get[a].buff.data=o}else{this.aD[this.getRowIndex(a)].data=o}this.bj[a]=o}else{if(this.bj[a]){this._process_xml_row(this.bj[a],o,-1);this.jQ(this.bj[a],true)}else{if(this.cZ[1]){var m={idd:a,data:o,_parser:this._process_xml_row,_locator:this._get_xml_data};var c=this.aD.length;if(this.cZ[1]==&quot;top&quot;){this.aD.unshift(m);c=0}else{this.aD.push(m)}if(this._h2){reset=true;(this._h2.add(a,(o.parentNode.getAttribute(&quot;id&quot;)||o.parentNode.getAttribute(&quot;parent&quot;)))).buff=this.aD[this.aD.length-1]}else{if(this.ahK){reset=true}}this.bj[a]=o;o=this.render_row(c);this._insertRowAt(o,c? -1:0)}}}}if(this.cZ[2]){for(a in n){if(n[a]&amp;&amp;this.bj[a]){this.deleteRow(a)}}}this.cZ=null;if(window.eXcell_tree){eXcell_tree.prototype.setValue=eXcell_tree.prototype.Tw}if(reset){this.uR()}if(this._f_rowsBuffer){this._f_rowsBuffer=null;this.EJ()}},getCustomCombo:function(g,c){var a=this.cells(g,c).cell;if(!a._combo){a._combo=new dhtmlXGridComboObject()}return a._combo},aaK:function(c){var h=c.split(this.gX);this.Wq=[];var a=this._cCount||c.length;for(var g=0;g&lt;a;g++){h[g]={c:parseInt(h[g]),ind:g}}h.sort(function(m,l){return(m.c&gt;l.c?1: -1)});for(var g=0;g&lt;a;g++){if(!h[g+1]||(typeof h[g].c==&quot;undefined&quot;)){this.Wq[h[g].ind]=(h[0].ind+1)* -1}else{this.Wq[h[g].ind]=h[g+1].ind}}},i18n:{loading:&quot;Loading&quot;,decimal_separator:&quot;.&quot;,group_separator:&quot;,&quot;},zf:{k13_1_0:function(){var a=this.am.bP(this.row);this.eQ(this.am[a+1],this.cell._cellIndex,true)},k13_0_1:function(){var a=this.am.bP(this.row);this.eQ(this.am[a-1],this.cell._cellIndex,true)},k13_0_0:function(){this.editStop();this.callEvent(&quot;onEnter&quot;,[(this.row?this.row.idd:null),(this.cell?this.cell._cellIndex:null)]);this.QX=true},k9_0_0:function(){this.editStop();if(!this.callEvent(&quot;onTab&quot;,[true])){return true}var a=this.Kn(null,1);if(a){this.eQ(a.parentNode,a._cellIndex,(this.row!=a.parentNode),false,true);this.QX=true}},k9_0_1:function(){this.editStop();if(!this.callEvent(&quot;onTab&quot;,[false])){return false}var a=this.Kn(null,-1);if(a){this.eQ(a.parentNode,a._cellIndex,(this.row!=a.parentNode),false,true);this.QX=true}},k113_0_0:function(){if(this.UB){this.gh()}},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||(a.changeState()===false)){return false}},k27_0_0:function(){this.editStop(true)},k33_0_0:function(){if(this.aW){this.changePage(this.ew-1)}else{this.PP(-1)}},k34_0_0:function(){if(this.aW){this.changePage(this.ew+1)}else{this.PP(1)}},k37_0_0:function(){if(!this.editor&amp;&amp;this.gY()){this.collapseKids(this.row)}else{return false}},k39_0_0:function(){if(!this.editor&amp;&amp;this.gY()){this.expandKids(this.row)}else{return false}},k40_0_0:function(){var c=this.nh?this.aC:this;if(this.editor&amp;&amp;this.editor.combo){this.editor.ar()}else{if(!this.row.idd){return}var a=Math.max((c._r_select||0),this.getRowIndex(this.row.idd));var g=this.CE(a,1);if(g){c._r_select=null;this.eQ(g,this.cell._cellIndex,true);if(c.aW){c.aqG(g.idd)}}else{if(!this.callEvent(&quot;onLastRow&quot;,[])){return false}this.zf.k34_0_0.apply(this,[]);if(this.aW&amp;&amp;this.am[a+1]){this.eQ(a+1,0,true)}}}this.QX=true},k38_0_0:function(){var c=this.nh?this.aC:this;if(this.editor&amp;&amp;this.editor.combo){this.editor.Kc()}else{if(!this.row.idd){return}var a=this.getRowIndex(this.row.idd)+1;if(a!= -1&amp;&amp;(!this.aW||(a!=1))){var g=this.CE(a-1,-1);this.eQ(g,this.cell._cellIndex,true);if(c.aW&amp;&amp;g){c.aqG(g.idd)}}else{this.zf.k33_0_0.apply(this,[])}}this.QX=true}},_build_master_row:function(){var g=document.createElement(&quot;DIV&quot;);var c=[&quot;<TABLE><TBODY><TR>&quot;];for(var a=0;a&lt;this._cCount;a++){c.push(&quot;&quot;)}c.push(&quot;</TR></TBODY></TABLE>&quot;);g.innerHTML=c.join(&quot;&quot;);this._master_row=g.firstChild.rows[0]},uO:function(a){if(!this._master_row){this._build_master_row()}var g=this._master_row.cloneNode(true);for(var c=0;c&lt;g.childNodes.length;c++){g.childNodes[c]._cellIndex=c;if(this.ajm){g.childNodes[c].id=&quot;c_&quot;+a+&quot;_&quot;+c}if(this.nz){this.ae.dS(g.childNodes[c],this)}}g.idd=a;g.grid=this;return g},_process_jsarray_row:function(c,g){c._attrs={};for(var a=0;a&lt;c.childNodes.length;a++){c.childNodes[a]._attrs={}}this.VQ(c,(this._c_order?this.Xb(g):g));return c},_get_jsarray_data:function(c,a){return c[a]},_process_json_row:function(a,c){c=this._c_order?this.Xb(c.data):c.data;return this._process_some_row(a,c)},_process_some_row:function(c,g){c._attrs={};for(var a=0;a&lt;c.childNodes.length;a++){c.childNodes[a]._attrs={}}this.VQ(c,g);return c},_get_json_data:function(c,a){return c.data[a]},_process_js_row:function(g,h){var a=[];for(var c=0;c&lt;this.columnIds.length;c++){a[c]=h[this.columnIds[c]];if(!a[c]&amp;&amp;a[c]!==0){a[c]=&quot;&quot;}}this._process_some_row(g,a);g._attrs=h;return g},_get_js_data:function(c,a){return c[this.columnIds[a]]},_process_csv_row:function(c,g){c._attrs={};for(var a=0;a&lt;c.childNodes.length;a++){c.childNodes[a]._attrs={}}this.VQ(c,(this._c_order?this.Xb(g.split(this.csv.cell)):g.split(this.csv.cell)));return c},_get_csv_data:function(c,a){return c.split(this.csv.cell)[a]},_process_store_row:function(l,h){var a=[];for(var g=0;g&lt;this.columnIds.length;g++){a[g]=h[this.columnIds[g]]}for(var c=0;c&lt;l.childNodes.length;c++){l.childNodes[c]._attrs={}}l._attrs=h;this.VQ(l,a)},_process_xml_row:function(a,m){var u=this.bA.et(this.xml.cell,m);var q=[];a._attrs=this._xml_attrs(m);if(this._ud_enabled){var s=this.bA.et(&quot;./userdata&quot;,m);for(var l=s.length-1;l&gt;=0;l--){var o=&quot;&quot;;for(var g=0;g&lt;s[l].childNodes.length;g++){o+=s[l].childNodes[g].nodeValue}this.setUserData(a.idd,s[l].getAttribute(&quot;name&quot;),o)}}for(var g=0;g&lt;u.length;g++){var h=u[this._c_order?this._c_order[g]:g];if(!h){continue}var c=a.bq?a.bq[g]:g;var n=h.getAttribute(&quot;type&quot;);if(a.childNodes[c]){if(n){a.childNodes[c].zk=n}a.childNodes[c]._attrs=this._xml_attrs(h)}if(!h.getAttribute(&quot;xmlcontent&quot;)){if(h.firstChild){h=h.firstChild.data}else{h=&quot;&quot;}}q.push(h)}for(g&lt;u.length;g&lt;a.childNodes.length;g++){a.childNodes[g]._attrs={}}if(a.parentNode&amp;&amp;a.parentNode.tagName==&quot;row&quot;){a._attrs.parent=a.parentNode.getAttribute(&quot;idd&quot;)}this.VQ(a,q);return a},_get_xml_data:function(c,a){c=c.firstChild;while(true){if(!c){return &quot;&quot;}if(c.tagName==&quot;cell&quot;){a--}if(a&lt;0){break}c=c.nextSibling}return(c.firstChild?c.firstChild.data:&quot;&quot;)},VQ:function(h,m){if(this.editor){this.editStop()}for(var c=0;c&lt;h.childNodes.length;c++){if((c&lt;m.length)||(this.QL[c])){var g=h.childNodes[c]._cellIndex;var l=m[g];var a=this.cells4(h.childNodes[c]);if((this.QL[g])&amp;&amp;((l==&quot;&quot;)||(typeof(l)==&quot;undefined&quot;))){l=this.QL[g]}if(a){a.setValue(l)}}else{h.childNodes[c].innerHTML=&quot; &quot;;h.childNodes[c].mG=true}}return h},jQ:function(m,o){if(m._attrs[&quot;class&quot;]){m.Vn=m.className=m._attrs[&quot;class&quot;]}if(m._attrs.locked){m.FG=true}if(m._attrs.bgColor){m.bgColor=m._attrs.bgColor}var n=0;for(var g=0;g&lt;m.childNodes.length;g++){var q=m.childNodes[g];var l=q._cellIndex;var h=q._attrs.style||m._attrs.style;if(h){q.style.cssText+=&quot;;&quot;+h}if(q._attrs[&quot;class&quot;]){q.className=q._attrs[&quot;class&quot;]}h=q._attrs.align||this.cellAlign[l];if(h){q.align=h}q.vAlign=q._attrs.valign||this.cellVAlign[l];var a=q._attrs.bgColor||this.columnColor[l];if(a){q.bgColor=a}if(q._attrs.colspan&amp;&amp; !o){this.Oq(m.idd,g+n,q._attrs.colspan);n+=(q._attrs.colspan-1)}if(this._hrrar&amp;&amp;this._hrrar[l]&amp;&amp; !o){q.style.display=&quot;none&quot;}}this.callEvent(&quot;onRowCreated&quot;,[m.idd,m,null])},load:function(a,g,c){this.callEvent(&quot;onXLS&quot;,[this]);if(arguments.length==2&amp;&amp;typeof g!=&quot;function&quot;){c=g;g=null}c=c||&quot;xml&quot;;if(!this.tR){this.tR=a}this._data_type=c;this.bA=new ag(this.vj,this,true,this.ir);this.bA.UR=function(m,h,o,n,l){if(!m.callEvent){return}l=m[&quot;_process_&quot;+c](l);if(!m.Bf){m.callEvent(&quot;onXLE&quot;,[m,0,0,l])}if(g){g();g=null}};this.bA.loadXML(a)},loadXMLString:function(g,c){var a=new ag(function(){});a.loadXMLString(g);this.parse(a,c,&quot;xml&quot;)},loadXML:function(a,c){this.load(a,c,&quot;xml&quot;)},parse:function(g,c,a){if(arguments.length==2&amp;&amp;typeof c!=&quot;function&quot;){a=c;c=null}a=a||&quot;xml&quot;;this._data_type=a;g=this[&quot;_process_&quot;+a](g);if(!this.Bf){this.callEvent(&quot;onXLE&quot;,[this,0,0,g])}if(c){c()}},xml:{top:&quot;rows&quot;,row:&quot;./row&quot;,cell:&quot;./cell&quot;,yU:&quot;row&quot;,s_cell:&quot;cell&quot;,row_attrs:[],cell_attrs:[]},csv:{row:&quot;\n&quot;,cell:&quot;,&quot;},_xml_attrs:function(c){var g={};if(c.attributes.length){for(var a=0;a&lt;c.attributes.length;a++){g[c.attributes[a].name]=c.attributes[a].value}}return g},_process_xml:function(l){if(!l.et){var s=new ag(function(){});if(typeof l==&quot;string&quot;){s.loadXMLString(l)}else{if(l.responseXML){s.ai=l}else{s.ai={}}s.ai.responseXML=l}l=s}if(this.cZ){return this.OR(l)}this._parsing=true;var o=l.cR(this.xml.top);if(o.tagName!=this.xml.top){return}var r=o.getAttribute(&quot;dhx_security&quot;);if(r){dhtmlx.security_key=r}this.Ov(o);var u=l.et(this.xml.row,o);var n=parseInt(l.et(&quot;//&quot;+this.xml.top)[0].getAttribute(&quot;pos&quot;)||0);var q=parseInt(l.et(&quot;//&quot;+this.xml.top)[0].getAttribute(&quot;total_count&quot;)||0);var q=Math.min(q,32000000/this.ig);var m=false;if(q&amp;&amp;q!=this.aD.length){if(!this.aD[q-1]){if(this.aD.length){m=true}this.aD[q-1]=null}if(q&lt;this.aD.length){this.aD.splice(q,this.aD.length-q);m=true}}if(this.gY()){return this._process_tree_xml(l)}for(var c=0;c&lt;u.length;c++){if(this.aD[c+n]){continue}var a=u[c].getAttribute(&quot;id&quot;)||(c+n+1);this.aD[c+n]={idd:a,data:u[c],_parser:this._process_xml_row,_locator:this._get_xml_data};this.bj[a]=u[c]}this.callEvent(&quot;onDataReady&quot;,[]);if(m&amp;&amp;this.ahK){var g=this.HF.scrollTop;this._reset_view();this.HF.scrollTop=g}else{this.render_dataset()}this._parsing=false;return l.ai.responseXML?l.ai.responseXML:l.ai},_process_jsarray:function(data){this._parsing=true;if(data&amp;&amp;data.ai){eval(&quot;dhtmlx.temp=&quot;+data.ai.responseText+&quot;;&quot;);data=dhtmlx.temp}for(var i=0;i&lt;data.length;i++){var id=i+1;this.aD.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data});this.bj[id]=data[i]}this.render_dataset();this._parsing=false},_process_csv:function(h){this._parsing=true;if(h.ai){h=h.ai.responseText}h=h.replace(/\r/g,&quot;&quot;);h=h.split(this.csv.row);if(this.KY){this.clearAll();var g=h.splice(0,1)[0].split(this.csv.cell);if(!this.Sz){g.splice(0,1)}this.setHeader(g.join(this.gX));this.init()}for(var c=0;c&lt;h.length;c++){if(!h[c]&amp;&amp;c==h.length-1){continue}if(this.Sz){var l=c+1;this.aD.push({idd:l,data:h[c],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var a=h[c].split(this.csv.cell);var l=a.splice(0,1)[0];this.aD.push({idd:l,data:a,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.bj[l]=h[c]}this.render_dataset();this._parsing=false},_process_js:function(a){return this._process_json(a,&quot;js&quot;)},_process_json:function(data,mode){this._parsing=true;if(data&amp;&amp;data.ai){eval(&quot;dhtmlx.temp=&quot;+data.ai.responseText+&quot;;&quot;);data=dhtmlx.temp}if(mode==&quot;js&quot;){if(data.data){data=data.data}for(var i=0;i&lt;data.length;i++){var row=data[i];var id=row.id||(i+1);this.aD.push({idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data});this.bj[id]=data[i]}}else{for(var i=0;i&lt;data.rows.length;i++){var id=data.rows[i].id;this.aD.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data});this.bj[id]=data.rows[i]}}if(data.dhx_security){dhtmlx.security_key=data.dhx_security}this.render_dataset();this._parsing=false},render_dataset:function(h,a){if(this.ahK){if(this._fillers){return this._update_srnd_view()}a=Math.min((this._get_view_size()+(this._srnd_pr||0)),this.aD.length)}if(this.aW){h=Math.max((h||0),(this.ew-1)*this.cu);a=Math.min(this.ew*this.cu,this.aD.length)}else{h=h||0;a=a||this.aD.length}for(var g=h;g&lt;a;g++){var m=this.render_row(g);if(m== -1){if(this.tR){if(this.callEvent(&quot;onDynXLS&quot;,[g,(this.Cr?this.Cr:(a-g))])){this.load(this.tR+jv(this.tR)+&quot;posStart=&quot;+g+&quot;&amp;count=&quot;+(this.Cr?this.Cr:(a-g)),this._data_type)}}a=g;break}if(!m.parentNode|| !m.parentNode.tagName){this._insertRowAt(m,g);if(m._attrs.selected||m._attrs.select){this.Th(m,m._attrs.call?true:false,true);m._attrs.selected=m._attrs.select=null}}if(this.Hv&amp;&amp;g-h==this.Hv){var l=this;this._context_parsing=this._context_parsing||this._parsing;return this.Bf=window.setTimeout(function(){l.Bf=null;l.render_dataset(g,a);if(!l.Bf){if(l._context_parsing){l.callEvent(&quot;onXLE&quot;,[])}else{l._fixAlterCss()}l.callEvent(&quot;onDistributedEnd&quot;,[]);l._context_parsing=false}},this.Kb)}}if(this.Hv&amp;&amp;g==a){this.callEvent(&quot;onDistributedEnd&quot;,[])}if(this.ahK&amp;&amp; !this._fillers){var c=this.aD.length-a;this._fillers=[];if(this.aC){this.aC._fillers=[]}while(c&gt;0){var o=(_isIE||window.qG)?Math.min(c,50000):c;var n=this._add_filler(a,o);if(n){this._fillers.push(n)}c-=o;a+=o}}this.setSizes()},render_row:function(c){if(!this.aD[c]){return-1}if(this.aD[c]._parser){var a=this.aD[c];if(this.bj[a.idd]&amp;&amp;this.bj[a.idd].tagName==&quot;TR&quot;){return this.aD[c]=this.bj[a.idd]}var g=this.uO(a.idd);this.aD[c]=g;this.bj[a.idd]=g;a._parser.call(this,g,a.data);this.jQ(g);return g}return this.aD[c]},_get_cell_value:function(c,a,g){if(c._locator){if(this._c_order){a=this._c_order[a]}return c._locator.call(this,c.data,a)}return this.cells3(c,a)[g?g:&quot;getValue&quot;]()},xK:function(g,m,c){this.editStop();c=(c||&quot;asc&quot;).toLowerCase();m=(m||this.fldSort[g]);g=g||0;if(this.gY()){this.sT(g,m,c)}else{var a={};var l=this.cellType[g];var n=&quot;getValue&quot;;if(l==&quot;link&quot;){n=&quot;getContent&quot;}if(l==&quot;dhxCalendar&quot;||l==&quot;dhxCalendarA&quot;){n=&quot;getDate&quot;}for(var h=0;h&lt;this.aD.length;h++){a[this.aD[h].idd]=this._get_cell_value(this.aD[h],g,n)}this.vP(g,m,c,a)}this.callEvent(&quot;onAfterSorting&quot;,[g,m,c])},aeo:function(g,m,c,a,l){var h=&quot;sort&quot;;if(this.agg){l.stablesort=this.am.stablesort;h=&quot;stablesort&quot;}if(m.length&gt;4){m=window[m]}if(m==&quot;cus&quot;){var n=this._customSorts[g];l[h](function(q,o){return n(a[q.idd],a[o.idd],c,q.idd,o.idd)})}else{if(typeof(m)==&quot;function&quot;){l[h](function(q,o){return m(a[q.idd],a[o.idd],c,q.idd,o.idd)})}else{if(m==&quot;str&quot;){l[h](function(q,o){if(c==&quot;asc&quot;){return a[q.idd]&gt;a[o.idd]?1:(a[q.idd]&lt;a[o.idd]? -1:0)}else{return a[q.idd]&lt;a[o.idd]?1:(a[q.idd]&gt;a[o.idd]? -1:0)}})}else{if(m==&quot;int&quot;){l[h](function(r,q){var o=parseFloat(a[r.idd]);o=isNaN(o)? -99999999999999:o;var s=parseFloat(a[q.idd]);s=isNaN(s)? -99999999999999:s;if(c==&quot;asc&quot;){return o-s}else{return s-o}})}else{if(m==&quot;date&quot;){l[h](function(r,q){var o=Date.parse(a[r.idd])||(Date.parse(&quot;01/01/1900&quot;));var s=Date.parse(a[q.idd])||(Date.parse(&quot;01/01/1900&quot;));if(c==&quot;asc&quot;){return o-s}else{return s-o}})}}}}}},vP:function(g,h,c,a){this.aeo(g,h,c,a,this.aD);this._reset_view();this.callEvent(&quot;onGridReconstructed&quot;,[])},_reset_view:function(g){if(!this.obj.rows[0]){return}if(this.Fr){this.Rz(0,true)}this.callEvent(&quot;onResetView&quot;,[]);var a=this.obj.rows[0].parentNode;var h=a.removeChild(a.childNodes[0],true);if(cn){for(var c=a.parentNode.childNodes.length-1;c&gt;=0;c--){if(a.parentNode.childNodes[c].tagName==&quot;TR&quot;){a.parentNode.removeChild(a.parentNode.childNodes[c],true)}}}else{if(_isIE){for(var c=a.childNodes.length-1;c&gt;=0;c--){a.childNodes[c].removeNode(true)}}else{a.innerHTML=&quot;&quot;}}a.appendChild(h);this.am=dhtmlxArray();if(this.agg){this.enableStableSorting(true)}this._fillers=this.undefined;if(!g){if(_isIE&amp;&amp;this.ahK){this.render_dataset()}else{this.render_dataset()}}},deleteRow:function(c,h){if(!h){h=this.dz(c)}if(!h){return}this.editStop();if(!this.nh){if(this.callEvent(&quot;onBeforeRowDeleted&quot;,[c])==false){return false}}var a=0;if(this.cellType.bP(&quot;tree&quot;)!= -1&amp;&amp; !this.nh){a=this._h2.get[c].parent.id;this.yE(h)}else{if(h.parentNode){h.parentNode.removeChild(h)}var m=this.am.bP(h);if(m!= -1){this.am.aa(m)}for(var g=0;g&lt;this.aD.length;g++){if(this.aD[g]&amp;&amp;this.aD[g].idd==c){this.aD.aa(g);m=g;break}}}this.bj[c]=null;for(var g=0;g&lt;this.bY.length;g++){if(this.bY[g].idd==c){this.bY.aa(g)}}if(this.ahK){for(var g=0;g&lt;this._fillers.length;g++){var l=this._fillers[g];if(!l){continue}if(l[0]&gt;=m){this._update_fillers(g,0,-1)}else{if(l[0]+l[1]&gt;m){this._update_fillers(g,-1,0)}}}this._update_srnd_view()}if(this.aW){this.changePage()}if(!this.nh){this.callEvent(&quot;onAfterRowDeleted&quot;,[c,a])}this.callEvent(&quot;onGridReconstructed&quot;,[]);if(this.abK){this.setSizes()}return true},ait:function(m,n,c){if(c== -1||typeof c==&quot;undefined&quot;){c=this.aD.length}if(typeof n==&quot;string&quot;){n=n.split(this.gX)}var o=this.uO(m);o._attrs={};for(var g=0;g&lt;o.childNodes.length;g++){o.childNodes[g]._attrs={}}this.bj[o.idd]=o;if(this._h2){this._h2.get[o.idd].buff=o}this.VQ(o,n);this.jQ(o);if(this.WX){this.WX=false;return this.bj[o.idd]=o}if(this.aW){this.aD.ml(c,o);this.bj[o.idd]=o;return o}if(this._fillers){this.am.ml(c,null);this.aD.ml(c,o);if(this.aC){this.aC.am.ml(c,null)}this.bj[o.idd]=o;var q=false;for(var h=0;h&lt;this._fillers.length;h++){var l=this._fillers[h];if(l&amp;&amp;l[0]&lt;=c&amp;&amp;(l[0]+l[1])&gt;=c){l[1]=l[1]+1;var a=l[2].firstChild.style.height=parseInt(l[2].firstChild.style.height)+this.ig+&quot;px&quot;;q=true;if(this.aC){this.aC._fillers[h][1]++;this.aC._fillers[h][2].firstChild.style.height=a}}if(l&amp;&amp;l[0]&gt;c){l[0]=l[0]+1;if(this.aC){this.aC._fillers[h][0]++}}}if(!q){this._fillers.push(this._add_filler(c,1,(c==0?{parentNode:this.obj.rows[0].parentNode,nextSibling:(this.am[1])}:this.am[c-1])))}return o}this.aD.ml(c,o);return this._insertRowAt(o,c)},hY:function(a,h,g){var c=this.ait(a,h,g);if(!this.fX){this.callEvent(&quot;onRowAdded&quot;,[a])}if(this.aW){this.changePage(this.ew)}if(this.ahK){this._update_srnd_view()}c.adM=true;if(this.abK){this.setSizes()}this.callEvent(&quot;onGridReconstructed&quot;,[]);return c},_insertRowAt:function(g,h,c){this.bj[g.idd]=g;if(this.WX){this.WX=false;return g}if((h&lt;0)||((!h)&amp;&amp;(parseInt(h)!==0))){h=this.am.length}else{if(h&gt;this.am.length){h=this.am.length}}if(this.hC){var a=g.className.replace(this.iI,&quot;&quot;);if((this.Cw?this.sS(g.idd):h)%2==1){g.className=a+&quot; &quot;+this.iI+(this.Vh?(&quot; &quot;+this.iI+&quot;_&quot;+this.sS(g.idd)):&quot;&quot;)}else{g.className=a+&quot; &quot;+this.hC+(this.Vh?(&quot; &quot;+this.hC+&quot;_&quot;+this.sS(g.idd)):&quot;&quot;)}}if(!c){if((h==(this.obj.rows.length-1))||(!this.am[h])){if(cn){this.obj.appendChild(g)}else{this.obj.firstChild.appendChild(g)}}else{this.am[h].parentNode.insertBefore(g,this.am[h])}}this.am.ml(h,g);this.callEvent(&quot;onRowInserted&quot;,[g,h]);return g},dz:function(g){var c=this.bj[g];if(c){if(c.tagName!=&quot;TR&quot;){for(var a=0;a&lt;this.aD.length;a++){if(this.aD[a]&amp;&amp;this.aD[a].idd==g){return this.render_row(a)}}if(this._h2){return this.render_row(null,c.idd)}}return c}return null},apX:function(c,a){return this.cells(c,a)},cells:function(h,g){if(arguments.length==0){return this.cells4(this.cell)}else{var l=this.dz(h)}var a=(l.bq?l.childNodes[l.bq[g]]:l.childNodes[g]);if(!a&amp;&amp;l.bq){a=l.firstChild||{}}return this.cells4(a)},amP:function(c,a){return this.cells2(c,a)},cells2:function(h,g){var l=this.render_row(h);var a=(l.bq?l.childNodes[l.bq[g]]:l.childNodes[g]);if(!a&amp;&amp;l.bq){a=l.firstChild||{}}return this.cells4(a)},cells3:function(g,c){var a=(g.bq?g.childNodes[g.bq[c]]:g.childNodes[c]);return this.cells4(a)},cells4:function(a){var c=window[&quot;eXcell_&quot;+(a.zk||this.cellType[a._cellIndex])];if(c){return new c(a)}},adH:function(a,g){var g=g||(a.zk||this.cellType[a._cellIndex]);if(!this.XC[g]){if(!window[&quot;eXcell_&quot;+g]){var c=eXcell_ro}else{var c=window[&quot;eXcell_&quot;+g]}this.XC[g]=new c(a)}this.XC[g].cell=a;return this.XC[g]},dma:function(a){if(!this.XC){this.XC={}}if(a&amp;&amp; !this.abp){this.abp=this.cells4;this.cells4=this.adH}else{if(!a&amp;&amp;this.abp){this.cells4=this.abp;this.abp=null}}},iD:function(){return this.aD.length},enableEditTabOnly:function(a){if(arguments.length&gt;0){this.smartTabOrder=ap(a)}else{this.smartTabOrder=true}},setExternalTabOrder:function(l,a){var c=this;this.tabStart=(typeof(l)==&quot;object&quot;)?l:document.getElementById(l);var g=this.tabStart.onkeydown;this.tabStart.onkeydown=function(n){if(g){g.call(this,n)}var m=(n||window.event);if(m.keyCode==9&amp;&amp; !m.shiftKey){m.cancelBubble=true;c.eQ(0,0,0,0,1);if(c.smartTabOrder&amp;&amp;c.cells2(0,0).isDisabled()){c.zf.k9_0_0.call(c)}this.blur();return false}};if(cU){this.tabStart.onkeypress=this.tabStart.onkeydown}this.tabEnd=(typeof(a)==&quot;object&quot;)?a:document.getElementById(a);var h=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(n){if(h){h.call(this,n)}var m=(n||window.event);if(m.keyCode==9&amp;&amp;m.shiftKey){m.cancelBubble=true;c.eQ((c.iD()-1),(c.So()-1),0,0,1);if(c.smartTabOrder&amp;&amp;c.cells2((c.iD()-1),(c.So()-1)).isDisabled()){c.zf.k9_0_1.call(c)}this.blur();return false}};if(cU){this.tabEnd.onkeypress=this.tabEnd.onkeydown}},uid:function(){if(!this._ui_seed){this._ui_seed=(new Date()).valueOf()}return this._ui_seed++},clearAndLoad:function(){var a=this._pgn_skin;this._pgn_skin=null;this.clearAll();this._pgn_skin=a;this.load.apply(this,arguments)},ajA:function(){if(this.aW){var a=(this.ew-1)*this.cu;return[this.ew,a,Math.min(a+this.cu,this.aD.length),this.aD.length]}return[Math.floor(this.HF.scrollTop/this.ig),Math.ceil(parseInt(this.HF.offsetHeight)/this.ig),this.aD.length]}};(function(){function h(n,o){this[n]=o}function m(n,o){this[n].call(this,o)}function g(n,o){this[n].call(this,o.join(this.gX))}function a(n,r){for(var q=0;q&lt;r.length;q++){if(typeof r[q]==&quot;object&quot;){var s=this.cf(q);for(var o in r[q]){s.eT(o,r[q][o])}}}}function l(n,w,r){var y=1;var v=[];function x(C,A,D){if(!v[A]){v[A]=[]}if(typeof D==&quot;object&quot;){D.toString=function(){return this.text}}v[A][C]=D}for(var s=0;s&lt;w.length;s++){if(typeof(w[s])==&quot;object&quot;&amp;&amp;w[s].length){for(var q=0;q&lt;w[s].length;q++){x(s,q,w[s][q])}}else{x(s,0,w[s])}}for(var s=0;s&lt;v.length;s++){for(var q=0;q&lt;v[0].length;q++){var u=v[s][q];v[s][q]=(u||&quot;&quot;).toString()||&quot; &quot;;if(u&amp;&amp;u.colspan){for(var o=1;o&lt;u.colspan;o++){x(q+o,s,&quot;#cspan&quot;)}}if(u&amp;&amp;u.rowspan){for(var o=1;o&lt;u.rowspan;o++){x(q,s+o,&quot;#rspan&quot;)}}}}this.setHeader(v[0]);for(var s=1;s&lt;v.length;s++){this.attachHeader(v[s])}}var c=[{name:&quot;label&quot;,def:&quot; &quot;,operation:&quot;setHeader&quot;,type:l},{name:&quot;id&quot;,def:&quot;&quot;,operation:&quot;columnIds&quot;,type:h},{name:&quot;width&quot;,def:&quot;*&quot;,operation:&quot;setInitWidths&quot;,type:g},{name:&quot;align&quot;,def:&quot;left&quot;,operation:&quot;cellAlign&quot;,type:h},{name:&quot;valign&quot;,def:&quot;middle&quot;,operation:&quot;cellVAlign&quot;,type:h},{name:&quot;sort&quot;,def:&quot;na&quot;,operation:&quot;fldSort&quot;,type:h},{name:&quot;type&quot;,def:&quot;ro&quot;,operation:&quot;setColTypes&quot;,type:g},{name:&quot;options&quot;,def:&quot;&quot;,operation:&quot;&quot;,type:a}];dhtmlx.extend_api(&quot;dhtmlXGridObject&quot;,{ahY:function(n){return[n.parent]},image_path:&quot;setImagePath&quot;,columns:&quot;columns&quot;,rows:&quot;rows&quot;,headers:&quot;headers&quot;,skin:&quot;setSkin&quot;,smart_rendering:&quot;enableSmartRendering&quot;,css:&quot;enableAlterCss&quot;,auto_height:&quot;enableAutoHeight&quot;,save_hidden:&quot;enableAutoHiddenColumnsSaving&quot;,save_cookie:&quot;enableAutoSaving&quot;,save_size:&quot;enableAutoSizeSaving&quot;,auto_width:&quot;enableAutoWidth&quot;,block_selection:&quot;enableBlockSelection&quot;,csv_id:&quot;enableCSVAutoID&quot;,csv_header:&quot;enableCSVHeader&quot;,cell_ids:&quot;enableCellIds&quot;,colspan:&quot;enableColSpan&quot;,column_move:&quot;enableColumnMove&quot;,context_menu:&quot;enableContextMenu&quot;,distributed:&quot;enableDistributedParsing&quot;,drag:&quot;enableDragAndDrop&quot;,drag_order:&quot;enableDragOrder&quot;,tabulation:&quot;enableEditTabOnly&quot;,header_images:&quot;enableHeaderImages&quot;,header_menu:&quot;enableHeaderMenu&quot;,keymap:&quot;enableKeyboardSupport&quot;,mouse_navigation:&quot;enableLightMouseNavigation&quot;,markers:&quot;enableMarkedCells&quot;,math_editing:&quot;enableMathEditing&quot;,math_serialization:&quot;enableMathSerialization&quot;,drag_copy:&quot;enableMercyDrag&quot;,multiline:&quot;enableMultiline&quot;,multiselect:&quot;enableMultiselect&quot;,save_column_order:&quot;enableOrderSaving&quot;,hover:&quot;enableRowsHover&quot;,rowspan:&quot;enableRowspan&quot;,smart:&quot;enableSmartRendering&quot;,save_sorting:&quot;enableSortingSaving&quot;,stable_sorting:&quot;enableStableSorting&quot;,undo:&quot;enableUndoRedo&quot;,csv_cell:&quot;setCSVDelimiter&quot;,date_format:&quot;setDateFormat&quot;,drag_behavior:&quot;setDragBehavior&quot;,editable:&quot;setEditable&quot;,without_header:&quot;setNoHeader&quot;,submit_changed:&quot;submitOnlyChanged&quot;,submit_serialization:&quot;submitSerialization&quot;,submit_selected:&quot;submitOnlySelected&quot;,submit_id:&quot;submitOnlyRowID&quot;,xml:&quot;load&quot;},{columns:function(s){for(var n=0;n&lt;c.length;n++){var r=[];for(var o=0;o&lt;s.length;o++){r[o]=s[o][c[n].name]||c[n].def}var q=c[n].type||m;q.call(this,c[n].operation,r,s)}this.init()},rows:function(n){},headers:function(o){for(var n=0;n&lt;o.length;n++){this.attachHeader(o[n])}}})})();dhtmlXGridObject.prototype._dp_init=function(a){a.attachEvent(&quot;insertCallback&quot;,function(c,h){if(this.obj._h2){this.obj.hY(h,g,null,parent)}else{this.obj.hY(h,[],0)}var g=this.obj.dz(h);if(g){this.obj._process_xml_row(g,c.firstChild);this.obj.jQ(g)}});a.attachEvent(&quot;updateCallback&quot;,function(c,h){var g=this.obj.dz(h);if(g){this.obj._process_xml_row(g,c.firstChild);this.obj.jQ(g)}});a.attachEvent(&quot;deleteCallback&quot;,function(c,g){this.obj.setUserData(g,this.action_param,&quot;true_deleted&quot;);this.obj.deleteRow(g)});a._methods=[&quot;setRowTextStyle&quot;,&quot;setCellTextStyle&quot;,&quot;changeRowId&quot;,&quot;deleteRow&quot;];this.attachEvent(&quot;onEditCell&quot;,function(h,l,g){if(a._columns&amp;&amp; !a._columns[g]){return true}var c=this.cells(l,g);if(h==1){if(c.wI()){a.setUpdated(l,true)}}else{if(h==2){if(c.hy()){a.setUpdated(l,true)}}}return true});this.attachEvent(&quot;onRowPaste&quot;,function(c){a.setUpdated(c,true)});this.attachEvent(&quot;onUndo&quot;,function(c){a.setUpdated(c,true)});this.attachEvent(&quot;onRowIdChange&quot;,function(h,c){var g=a.iv(h);if(g&lt;a.bE.length){a.bE[g]=c}});this.attachEvent(&quot;onSelectStateChanged&quot;,function(c){if(a.cJ==&quot;row&quot;){a.sendData()}return true});this.attachEvent(&quot;onEnter&quot;,function(g,c){if(a.cJ==&quot;row&quot;){a.sendData()}return true});this.attachEvent(&quot;onBeforeRowDeleted&quot;,function(c){if(!this.bj[c]){return true}if(this.fX&amp;&amp;a.dnd){window.setTimeout(function(){a.setUpdated(c,true)},1);return true}var g=a.YA(c);if(this._h2){this._h2.so(c,function(h){a.setUpdated(h.id,false);a.markRow(h.id,true,&quot;deleted&quot;)},this)}if(g==&quot;inserted&quot;){a.set_invalid(c,false);a.setUpdated(c,false);return true}if(g==&quot;deleted&quot;){return false}if(g==&quot;true_deleted&quot;){a.setUpdated(c,false);return true}a.setUpdated(c,true,&quot;deleted&quot;);return false});this.attachEvent(&quot;onBindUpdate&quot;,function(c){if(typeof c==&quot;object&quot;){c=c.id}a.setUpdated(c,true)});this.attachEvent(&quot;onRowAdded&quot;,function(c){if(this.fX&amp;&amp;a.dnd){return true}a.setUpdated(c,true,&quot;inserted&quot;);return true});a.fD=function(h,u){var n=[];n.gr_id=h;if(this.obj.gY()){n.gr_pid=this.obj.getParentId(h)}var g=this.obj.dz(h);for(var o=0;o&lt;this.obj._cCount;o++){if(this.obj._c_order){var q=this.obj._c_order[o]}else{var q=o}var s=this.obj.cells(g.idd,o);if(this._changed&amp;&amp; !s.hy()){continue}if(this.iO){n[this.obj.getColumnId(o)]=s.getValue()}else{n[&quot;c&quot;+q]=s.getValue()}}var l=this.obj.bH[h];if(l){for(var m=0;m&lt;l.kk.length;m++){if(l.kk[m]&amp;&amp;l.kk[m].indexOf(&quot;__&quot;)!=0){n[l.kk[m]]=l.values[m]}}}var l=this.obj.bH.gridglobaluserdata;if(l){for(var m=0;m&lt;l.kk.length;m++){n[l.kk[m]]=l.values[m]}}return n};a._clearUpdateFlag=function(g){var h=this.obj.dz(g);if(h){for(var c=0;c&lt;this.obj._cCount;c++){this.obj.cells(g,c).cell.hy=false}}};a.aZ=function(m){var l=true;var c=[];for(var h=0;h&lt;this.obj._cCount;h++){if(this.az[h]){var g=this.az[h].call(this.obj,this.obj.cells(m,h).getValue(),m,h);if(typeof g==&quot;string&quot;){this.messages.push(g);l=false}else{l&amp;=g;c[h]= !g}}}if(!l){this.set_invalid(m,&quot;invalid&quot;,c);this.setUpdated(m,false)}return l}};function dhtmlXGridCellObject(a){this.fA=function(){this.cell.obj=null;this.cell=null;this.grid=null;this.base=null;return null};this.cell=a;this.getValue=function(){if((this.cell.firstChild)&amp;&amp;(this.cell.firstChild.tagName==&quot;TEXTAREA&quot;)){return this.cell.firstChild.value}else{return this.cell.innerHTML.PA()}};this.getMathValue=function(){if(this.cell.eN){return this.cell.eN}else{return this.getValue()}};this.getFont=function(){arOut=new Array(3);if(this.cell.style.fontFamily){arOut[0]=this.cell.style.fontFamily}if(this.cell.style.fontWeight==&quot;bold&quot;||this.cell.parentNode.style.fontWeight==&quot;bold&quot;){arOut[1]=&quot;bold&quot;}if(this.cell.style.fontStyle==&quot;italic&quot;||this.cell.parentNode.style.fontWeight==&quot;italic&quot;){arOut[1]+=&quot;italic&quot;}if(this.cell.style.fontSize){arOut[2]=this.cell.style.fontSize}else{arOut[2]=&quot;&quot;}return arOut.join(&quot;-&quot;)};this.getTextColor=function(){if(this.cell.style.color){return this.cell.style.color}else{return &quot;#000000&quot;}};this.getBgColor=function(){if(this.cell.bgColor){return this.cell.bgColor}else{return &quot;#FFFFFF&quot;}};this.getHorAlign=function(){if(this.cell.style.textAlign){return this.cell.style.textAlign}else{if(this.cell.style.textAlign){return this.cell.style.textAlign}else{return &quot;left&quot;}}};this.getWidth=function(){return this.cell.scrollWidth};this.setFont=function(c){fntAr=c.split(&quot;-&quot;);this.cell.style.fontFamily=fntAr[0];this.cell.style.fontSize=fntAr[fntAr.length-1];if(fntAr.length==3){if(/bold/.test(fntAr[1])){this.cell.style.fontWeight=&quot;bold&quot;}if(/italic/.test(fntAr[1])){this.cell.style.fontStyle=&quot;italic&quot;}if(/underline/.test(fntAr[1])){this.cell.style.textDecoration=&quot;underline&quot;}}};this.setTextColor=function(c){this.cell.style.color=c};this.setBgColor=function(c){if(c==&quot;&quot;){c=null}this.cell.bgColor=c};this.setHorAlign=function(c){if(c.length==1){if(c==&quot;c&quot;){this.cell.style.textAlign=&quot;center&quot;}else{if(c==&quot;l&quot;){this.cell.style.textAlign=&quot;left&quot;}else{this.cell.style.textAlign=&quot;right&quot;}}}else{this.cell.style.textAlign=c}};this.hy=function(){if(this.cell.hy){return true}else{return false}};this.wI=function(){var c=this.cell.firstChild;if(c&amp;&amp;c.tagName==&quot;INPUT&quot;){type=c.type;if(type==&quot;radio&quot;||type==&quot;checkbox&quot;){return true}else{return false}}else{return false}};this.isChecked=function(){if(this.wI()){return this.cell.firstChild.checked}};this.isDisabled=function(){return this.cell._disabled};this.Ou=function(c){if(this.wI()){if(c!=&quot;true&quot;&amp;&amp;c!=1){c=false}this.cell.firstChild.checked=c}};this.setDisabled=function(c){if(c!=&quot;true&quot;&amp;&amp;c!=1){c=false}if(this.wI()){this.cell.firstChild.disabled=c;if(this.disabledF){this.disabledF(c)}}this.cell._disabled=c}}dhtmlXGridCellObject.prototype={getAttribute:function(a){return this.cell._attrs[a]},setAttribute:function(a,c){this.cell._attrs[a]=c},getInput:function(){if(this.obj&amp;&amp;(this.obj.tagName==&quot;INPUT&quot;||this.obj.tagName==&quot;TEXTAREA&quot;)){return this.obj}var a=(this.obj||this.cell).getElementsByTagName(&quot;TEXTAREA&quot;);if(!a.length){a=(this.obj||this.cell).getElementsByTagName(&quot;INPUT&quot;)}return a[0]}};dhtmlXGridCellObject.prototype.setValue=function(a){if((typeof(a)!=&quot;number&quot;)&amp;&amp;(!a||a.toString().PA()==&quot;&quot;)){a=&quot; &quot;;this.cell.mG=true}else{this.cell.mG=false}this.dq(a)};dhtmlXGridCellObject.prototype.getTitle=function(){return(_isIE?this.cell.innerText:this.cell.textContent)};dhtmlXGridCellObject.prototype.dq=function(c,a){this.cell.innerHTML=c;this.grid.callEvent(&quot;onCellChanged&quot;,[this.cell.parentNode.idd,this.cell._cellIndex,(arguments.length&gt;1?a:c)])};dhtmlXGridCellObject.prototype.setCTxtValue=function(a){this.cell.innerHTML=&quot;&quot;;this.cell.appendChild(document.createTextNode(a));this.grid.callEvent(&quot;onCellChanged&quot;,[this.cell.parentNode.idd,this.cell._cellIndex,a])};dhtmlXGridCellObject.prototype.setLabel=function(a){this.cell.innerHTML=a};dhtmlXGridCellObject.prototype.getMath=function(){if(this.AB){return this.val}else{return this.getValue()}};function gD(){this.obj=null;this.val=null;this.changeState=function(){return false};this.edit=function(){this.val=this.getValue()};this.detach=function(){return false};this.fI=function(h){var a=h;var g=0;var c=0;while(a.tagName!=&quot;BODY&quot;){g+=a.offsetLeft;c+=a.offsetTop;a=a.offsetParent}return new Array(g,c)}}gD.prototype=new dhtmlXGridCellObject;function eXcell_ed(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){this.cell.CZ=((!this.grid.hu)&amp;&amp;(cn||gP||aq))?&quot;INPUT&quot;:&quot;TEXTAREA&quot;;this.val=this.getValue();this.obj=document.createElement(this.cell.CZ);this.obj.setAttribute(&quot;autocomplete&quot;,&quot;off&quot;);this.obj.style.height=(this.cell.offsetHeight-(_isIE?4:4))+&quot;px&quot;;this.obj.className=&quot;dhx_combo_edit&quot;;this.obj.wrap=&quot;soft&quot;;this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(c){(c||event).cancelBubble=true};this.obj.onmousedown=function(c){(c||event).cancelBubble=true};this.obj.value=this.val;this.cell.innerHTML=&quot;&quot;;this.cell.appendChild(this.obj);this.obj.onselectstart=function(c){if(!c){c=event}c.cancelBubble=true;return true};if(_isIE){this.obj.focus();this.obj.blur()}this.obj.focus()};this.getValue=function(){if((this.cell.firstChild)&amp;&amp;((this.cell.CZ)&amp;&amp;(this.cell.firstChild.tagName==this.cell.CZ))){return this.cell.firstChild.value}if(this.cell.mG){return &quot;&quot;}return this.cell.innerHTML.toString().PA()};this.detach=function(){this.setValue(this.obj.value);return this.val!=this.getValue()}}eXcell_ed.prototype=new gD;function eXcell_edtxt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&amp;&amp;((this.cell.CZ)&amp;&amp;(this.cell.firstChild.tagName==this.cell.CZ))){return this.cell.firstChild.value}if(this.cell.mG){return &quot;&quot;}return(_isIE?this.cell.innerText:this.cell.textContent)};this.setValue=function(c){if(!c||c.toString().PA()==&quot;&quot;){c=&quot; &quot;;this.cell.mG=true}else{this.cell.mG=false}this.setCTxtValue(c)}}eXcell_edtxt.prototype=new eXcell_ed;function eXcell_edn(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&amp;&amp;(this.cell.firstChild.tagName==&quot;TEXTAREA&quot;)){return this.cell.firstChild.value}if(this.cell.mG){return &quot;&quot;}return this.cell._orig_value||this.grid.Sl(this.cell.innerHTML.toString().PA(),this.cell._cellIndex)};this.detach=function(){var c=this.obj.value;this.setValue(c);return this.val!=this.getValue()}}eXcell_edn.prototype=new eXcell_ed;eXcell_edn.prototype.setValue=function(a){if(!a||a.toString().PA()==&quot;&quot;){this.cell.mG=true;return this.dq(&quot; &quot;,0)}else{this.cell.mG=false;this.cell._orig_value=a}this.dq(this.grid.PH(a,this.cell._cellIndex),a)};function eXcell_ch(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.disabledF=function(c){if((c==true)||(c==1)){this.cell.innerHTML=this.cell.innerHTML.replace(&quot;item_chk0.&quot;,&quot;item_chk0_dis.&quot;).replace(&quot;item_chk1.&quot;,&quot;item_chk1_dis.&quot;)}else{this.cell.innerHTML=this.cell.innerHTML.replace(&quot;item_chk0_dis.&quot;,&quot;item_chk0.&quot;).replace(&quot;item_chk1_dis.&quot;,&quot;item_chk1.&quot;)}};this.changeState=function(c){if(c===true&amp;&amp; !this.grid.ft){if(window.globalActiveDHTMLGridObject!=null&amp;&amp;window.globalActiveDHTMLGridObject!=this.grid&amp;&amp;window.globalActiveDHTMLGridObject.ft){window.globalActiveDHTMLGridObject.setActive(false)}this.grid.setActive(true)}if((!this.grid.oB)||(this.cell.parentNode.FG)||(this.isDisabled())){return}if(this.grid.callEvent(&quot;onEditCell&quot;,[0,this.cell.parentNode.idd,this.cell._cellIndex])){this.val=this.getValue();if(this.val==&quot;1&quot;){this.setValue(&quot;0&quot;)}else{this.setValue(&quot;1&quot;)}this.cell.hy=true;this.grid.callEvent(&quot;onEditCell&quot;,[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent(&quot;onCheckbox&quot;,[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!=&quot;1&quot;)]);this.grid.callEvent(&quot;onCheck&quot;,[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!=&quot;1&quot;)])}else{this.editor=null}};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():&quot;0&quot;};this.wI=function(){return true};this.isChecked=function(){if(this.getValue()==&quot;1&quot;){return true}else{return false}};this.Ou=function(c){this.setValue(c.toString())};this.detach=function(){return this.val!=this.getValue()};this.edit=null}eXcell_ch.prototype=new gD;eXcell_ch.prototype.setValue=function(c){this.cell.style.verticalAlign=&quot;middle&quot;;if(c){c=c.toString().PA();if((c==&quot;false&quot;)||(c==&quot;0&quot;)){c=&quot;&quot;}}if(c){c=&quot;1&quot;;this.cell.chstate=&quot;1&quot;}else{c=&quot;0&quot;;this.cell.chstate=&quot;0&quot;}var a=this;this.dq(&quot;&lt;img src='&quot;+this.grid.eg+&quot;item_chk&quot;+c+&quot;.gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '&gt;&quot;,this.cell.chstate)};function eXcell_ra(a){this.base=eXcell_ch;this.base(a);this.grid=a.parentNode.grid;this.disabledF=function(c){if((c==true)||(c==1)){this.cell.innerHTML=this.cell.innerHTML.replace(&quot;radio_chk0.&quot;,&quot;radio_chk0_dis.&quot;).replace(&quot;radio_chk1.&quot;,&quot;radio_chk1_dis.&quot;)}else{this.cell.innerHTML=this.cell.innerHTML.replace(&quot;radio_chk0_dis.&quot;,&quot;radio_chk0.&quot;).replace(&quot;radio_chk1_dis.&quot;,&quot;radio_chk1.&quot;)}};this.changeState=function(c){if(c===false&amp;&amp;this.getValue()==1){return}if((!this.grid.oB)||(this.cell.parentNode.FG)){return}if(this.grid.callEvent(&quot;onEditCell&quot;,[0,this.cell.parentNode.idd,this.cell._cellIndex])!=false){this.val=this.getValue();if(this.val==&quot;1&quot;){this.setValue(&quot;0&quot;)}else{this.setValue(&quot;1&quot;)}this.cell.hy=true;this.grid.callEvent(&quot;onEditCell&quot;,[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent(&quot;onCheckbox&quot;,[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!=&quot;1&quot;)]);this.grid.callEvent(&quot;onCheck&quot;,[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!=&quot;1&quot;)])}else{this.editor=null}};this.edit=null}eXcell_ra.prototype=new eXcell_ch;eXcell_ra.prototype.setValue=function(c){this.cell.style.verticalAlign=&quot;middle&quot;;if(c){c=c.toString().PA();if((c==&quot;false&quot;)||(c==&quot;0&quot;)){c=&quot;&quot;}}if(c){if(!this.grid.afF){this.grid.afF=[]}if(this.grid.afF[this.cell._cellIndex]){var a=this.grid.cells4(this.grid.afF[this.cell._cellIndex]);a.setValue(&quot;0&quot;);if(this.grid.bj[a.cell.parentNode.idd]){this.grid.callEvent(&quot;onEditCell&quot;,[1,a.cell.parentNode.idd,a.cell._cellIndex])}}this.grid.afF[this.cell._cellIndex]=this.cell;c=&quot;1&quot;;this.cell.chstate=&quot;1&quot;}else{c=&quot;0&quot;;this.cell.chstate=&quot;0&quot;}this.dq(&quot;&lt;img src='&quot;+this.grid.eg+&quot;radio_chk&quot;+c+&quot;.gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'&gt;&quot;,this.cell.chstate)};function eXcell_txt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){this.val=this.getValue();this.obj=document.createElement(&quot;TEXTAREA&quot;);this.obj.className=&quot;dhx_textarea&quot;;this.obj.onclick=function(l){(l||event).cancelBubble=true};var g=this.grid.fI(this.cell);this.obj.value=this.val;this.obj.style.display=&quot;&quot;;this.obj.style.textAlign=this.cell.style.textAlign;if(aq){var c=document.createElement(&quot;DIV&quot;);c.appendChild(this.obj);c.style.overflow=&quot;auto&quot;;c.className=&quot;dhx_textarea&quot;;this.obj.style.margin=&quot;0px 0px 0px 0px&quot;;this.obj.style.border=&quot;0px&quot;;this.obj=c}document.body.appendChild(this.obj);if(cU){this.obj.onkeypress=function(l){if(l.keyCode==9){return false}}}this.obj.onkeydown=function(m){var l=(m||event);if(l.keyCode==9){globalActiveDHTMLGridObject.aL.focus();globalActiveDHTMLGridObject.bQ({keyCode:l.keyCode,shiftKey:l.shiftKey,srcElement:&quot;0&quot;});return false}};this.obj.style.left=g[0]+&quot;px&quot;;this.obj.style.top=g[1]+this.cell.offsetHeight+&quot;px&quot;;if(this.cell.offsetWidth&lt;200){var h=200}else{var h=this.cell.offsetWidth}this.obj.style.width=h+(aq?18:16)+&quot;px&quot;;if(aq){this.obj.firstChild.style.width=parseInt(this.obj.style.width)+&quot;px&quot;;this.obj.firstChild.style.height=this.obj.offsetHeight-3+&quot;px&quot;}if(_isIE){this.obj.select();this.obj.value=this.obj.value}if(aq){this.obj.firstChild.focus()}else{this.obj.focus()}};this.detach=function(){var c=&quot;&quot;;if(aq){c=this.obj.firstChild.value}else{c=this.obj.value}if(c==&quot;&quot;){this.cell.mG=true}else{this.cell.mG=false}this.setValue(c);document.body.removeChild(this.obj);this.obj=null;return this.val!=this.getValue()};this.getValue=function(){if(this.obj){if(aq){return this.obj.firstChild.value}else{return this.obj.value}}if(this.cell.mG){return &quot;&quot;}if(typeof this.cell._brval!=&quot;undefined&quot;){return this.cell._brval}if((!this.grid.hu)){return this.cell._brval||this.cell.innerHTML}else{return this.cell._brval||this.cell.innerHTML.replace(/]*&gt;/gi,&quot;\n&quot;).PA()}}}eXcell_txt.prototype=new gD;function eXcell_txttxt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&amp;&amp;(this.cell.firstChild.tagName==&quot;TEXTAREA&quot;)){return this.cell.firstChild.value}if(this.cell.mG){return &quot;&quot;}if((!this.grid.hu)&amp;&amp;this.cell._brval){return this.cell._brval}return(_isIE?this.cell.innerText:this.cell.textContent)};this.setValue=function(c){this.cell._brval=c;if(!c||c.toString().PA()==&quot;&quot;){c=&quot; &quot;;this.cell.mG=true}else{this.cell.mG=false}this.setCTxtValue(c)}}eXcell_txttxt.prototype=new eXcell_txt;eXcell_txt.prototype.setValue=function(a){this.cell._brval=a;if(!a||a.toString().PA()==&quot;&quot;){a=&quot; &quot;;this.cell.mG=true}else{this.cell.mG=false}if((!this.grid.hu)||this.cell.mG){this.dq(a,this.cell._brval)}else{this.dq(a.replace(/\n/g,&quot;&quot;),a)}};function eXcell_co(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.combo=(this.cell._combo||this.grid.cf(this.cell._cellIndex));this.editable=true}this.ar=function(){var c=this.list.options[this.list.selectedIndex+1];if(c){c.selected=true}this.obj.value=this.list.options[this.list.selectedIndex].text;return true};this.Kc=function(){if(this.list.selectedIndex!=0){var c=this.list.options[this.list.selectedIndex-1];if(c){c.selected=true}this.obj.value=this.list.options[this.list.selectedIndex].text}return true};this.edit=function(){this.val=this.getValue();this.text=this.getText().PA();var h=this.grid.fI(this.cell);this.obj=document.createElement(&quot;TEXTAREA&quot;);this.obj.className=&quot;dhx_combo_edit&quot;;this.obj.style.height=(this.cell.offsetHeight-4)+&quot;px&quot;;this.obj.wrap=&quot;soft&quot;;this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(q){(q||event).cancelBubble=true};this.obj.onmousedown=function(q){(q||event).cancelBubble=true};this.obj.value=this.text;this.obj.onselectstart=function(q){if(!q){q=event}q.cancelBubble=true;return true};var m=this;this.obj.onkeyup=function(s){var r=(s||event).keyCode;if(r==38||r==40||r==9){return}var u=this.readonly?String.fromCharCode(r):this.value;var v=m.list.options;for(var q=0;q&lt;v.length;q++){if(v[q].text.indexOf(u)==0){return v[q].selected=true}}};this.list=document.createElement(&quot;SELECT&quot;);this.list.className=&quot;dhx_combo_select&quot;;this.list.style.width=this.cell.offsetWidth+&quot;px&quot;;this.list.style.left=h[0]+&quot;px&quot;;this.list.style.top=h[1]+this.cell.offsetHeight+&quot;px&quot;;this.list.onclick=function(s){var r=s||window.event;var q=r.target||r.srcElement;if(q.tagName==&quot;OPTION&quot;){q=q.parentNode}m.editable=false;m.grid.editStop();r.cancelBubble=true};var c=this.combo.Ln();var l=false;var o=0;for(var g=0;g&lt;c.length;g++){var n=this.combo.get(c[g]);this.list.options[this.list.options.length]=new Option(n,c[g]);if(c[g]==this.val){o=this.list.options.length-1;l=true}}if(l==false){this.list.options[this.list.options.length]=new Option(this.text,this.val===null?&quot;&quot;:this.val);o=this.list.options.length-1}document.body.appendChild(this.list);this.list.size=&quot;6&quot;;this.cstate=1;if(this.editable){this.cell.innerHTML=&quot;&quot;}else{this.obj.style.width=&quot;1px&quot;;this.obj.style.height=&quot;1px&quot;}this.cell.appendChild(this.obj);this.list.options[o].selected=true;if((!aq)||(this.editable)){this.obj.focus();this.obj.focus()}if(!this.editable){this.obj.style.visibility=&quot;hidden&quot;;this.list.focus();this.list.onkeydown=function(q){q=q||window.event;m.grid.setActive(true);if(q.keyCode&lt;30){return m.grid.bQ({target:m.cell,keyCode:q.keyCode,shiftKey:q.shiftKey,ctrlKey:q.ctrlKey})}}}};this.getValue=function(){return((this.cell.combo_value==window.undefined)?&quot;&quot;:this.cell.combo_value)};this.detach=function(){if(this.val!=this.getValue()){this.cell.hy=true}if(this.list.parentNode!=null){if(this.editable){var c=this.list.options[this.list.selectedIndex];if(c&amp;&amp;c.text==this.obj.value){this.setValue(this.list.value)}else{var g=(this.cell._combo||this.grid.cf(this.cell._cellIndex));var h=g.values.bP(this.obj.value);if(h!= -1){this.setValue(g.kk[h])}else{this.setValue(this.cell.combo_value=this.obj.value)}}}else{this.setValue(this.list.value)}}if(this.list.parentNode){this.list.parentNode.removeChild(this.list)}if(this.obj.parentNode){this.obj.parentNode.removeChild(this.obj)}return this.val!=this.getValue()}}eXcell_co.prototype=new gD;eXcell_co.prototype.getText=function(){return this.cell.innerHTML};eXcell_co.prototype.setValue=function(h){if(typeof(h)==&quot;object&quot;){var g=this.grid.bA.et(&quot;./option&quot;,h);if(g.length){this.cell._combo=new dhtmlXGridComboObject()}for(var c=0;c&lt;g.length;c++){this.cell._combo.eT(g[c].getAttribute(&quot;value&quot;),g[c].firstChild?g[c].firstChild.data:&quot;&quot;)}h=h.firstChild.data}if((h||&quot;&quot;).toString().PA()==&quot;&quot;){h=null}this.cell.combo_value=h;if(h!==null){var a=(this.cell._combo||this.grid.cf(this.cell._cellIndex)).get(h);this.dq(a===null?h:a,h)}else{this.dq(&quot; &quot;,h)}};function eXcell_coro(a){this.base=eXcell_co;this.base(a);this.editable=false}eXcell_coro.prototype=new eXcell_co;function eXcell_cotxt(a){this.base=eXcell_co;this.base(a)}eXcell_cotxt.prototype=new eXcell_co;eXcell_cotxt.prototype.getText=function(){return(_isIE?this.cell.innerText:this.cell.textContent)};eXcell_cotxt.prototype.setValue=function(g){if(typeof(g)==&quot;object&quot;){var c=this.grid.bA.et(&quot;./option&quot;,g);if(c.length){this.cell._combo=new dhtmlXGridComboObject()}for(var a=0;a&lt;c.length;a++){this.cell._combo.eT(c[a].getAttribute(&quot;value&quot;),c[a].firstChild?c[a].firstChild.data:&quot;&quot;)}g=g.firstChild.data}if((g||&quot;&quot;).toString().PA()==&quot;&quot;){g=null}if(g!==null){this.setCTxtValue((this.cell._combo||this.grid.cf(this.cell._cellIndex)).get(g)||g,g)}else{this.setCTxtValue(&quot; &quot;,g)}this.cell.combo_value=g};function eXcell_corotxt(a){this.base=eXcell_co;this.base(a);this.editable=false}eXcell_corotxt.prototype=new eXcell_cotxt;function eXcell_cp(a){try{this.cell=a;this.grid=this.cell.parentNode.grid}catch(c){}this.edit=function(){this.val=this.getValue();this.obj=document.createElement(&quot;SPAN&quot;);this.obj.style.border=&quot;1px solid black&quot;;this.obj.style.position=&quot;absolute&quot;;var g=this.grid.fI(this.cell);this.colorPanel(4,this.obj);document.body.appendChild(this.obj);this.obj.style.left=g[0]+&quot;px&quot;;this.obj.style.zIndex=1000;this.obj.style.top=g[1]+this.cell.offsetHeight+&quot;px&quot;};this.toolDNum=function(g){if(g.length==1){g=&quot;0&quot;+g}return g};this.colorPanel=function(s,w){var o=document.createElement(&quot;TABLE&quot;);w.appendChild(o);o.cellSpacing=0;o.editor_obj=this;o.style.cursor=&quot;default&quot;;o.onclick=function(y){var x=y||window.event;var n=x.target||x.srcElement;var r=n.parentNode.parentNode.parentNode.editor_obj;r.setValue(n._bg);r.grid.editStop()};var l=256/s;for(var m=0;m&lt;=(256/l);m++){var g=o.insertRow(m);for(var q=0;q&lt;=(256/l);q++){for(var h=0;h&lt;=(256/l);h++){R=new Number(l*m)-(m==0?0:1);G=new Number(l*q)-(q==0?0:1);B=new Number(l*h)-(h==0?0:1);var v=this.toolDNum(R.toString(16))+&quot;&quot;+this.toolDNum(G.toString(16))+&quot;&quot;+this.toolDNum(B.toString(16));var u=g.insertCell(q);u.width=&quot;10px&quot;;u.innerHTML=&quot; &quot;;u.title=v.toUpperCase();u.style.backgroundColor=&quot;#&quot;+v;u._bg=&quot;#&quot;+v;if(this.val!=null&amp;&amp;&quot;#&quot;+v.toUpperCase()==this.val.toUpperCase()){u.style.border=&quot;2px solid white&quot;}}}}};this.getValue=function(){return this.cell.firstChild._bg||&quot;&quot;};this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))};this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))};this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))};this.detach=function(){if(this.obj.offsetParent!=null){document.body.removeChild(this.obj)}return this.val!=this.getValue()}}eXcell_cp.prototype=new gD;eXcell_cp.prototype.setValue=function(a){this.dq(&quot;<DIV style="width:100%;height:&quot;+((this.grid.hu?this.cell.offsetHeight-2:16))+&quot;;background-color:&quot;+(a||&quot;&quot;)+&quot;;border:0px;"> </DIV>&quot;,a);this.cell.firstChild._bg=a};function eXcell_img(a){try{this.cell=a;this.grid=this.cell.parentNode.grid}catch(c){}this.getValue=function(){if(this.cell.firstChild.tagName==&quot;IMG&quot;){return this.cell.firstChild.src+(this.cell.titFl!=null?&quot;^&quot;+this.cell._brval:&quot;&quot;)}else{if(this.cell.firstChild.tagName==&quot;A&quot;){var g=this.cell.firstChild.firstChild.src+(this.cell.titFl!=null?&quot;^&quot;+this.cell._brval:&quot;&quot;);g+=&quot;^&quot;+this.cell.lnk;if(this.cell.ZE){g+=&quot;^&quot;+this.cell.ZE}return g}}};this.isDisabled=function(){return true}}eXcell_img.prototype=new gD;eXcell_img.prototype.getTitle=function(){return this.cell._brval};eXcell_img.prototype.setValue=function(g){var c=g;if((g||&quot;&quot;).indexOf(&quot;^&quot;)!= -1){var a=g.split(&quot;^&quot;);g=a[0];c=this.cell._attrs.title||a[1];if(a.length&gt;2){this.cell.lnk=a[2];if(a[3]){this.cell.ZE=a[3]}}this.cell.titFl=&quot;1&quot;}this.dq(&quot;&lt;img src='&quot;+this.grid.iconURL+(g||&quot;&quot;).PA()+&quot;' border='0'&gt;&quot;,g);if(this.cell.lnk){this.cell.innerHTML=&quot;&lt;a href='&quot;+this.cell.lnk+&quot;' target='&quot;+this.cell.ZE+&quot;'&gt;&quot;+this.cell.innerHTML+&quot;&lt;/a&gt;&quot;}this.cell._brval=c};function eXcell_price(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){if(this.cell.childNodes.length&gt;1){return this.cell.childNodes[1].innerHTML.toString().PA()}else{return &quot;0&quot;}}}eXcell_price.prototype=new eXcell_ed;eXcell_price.prototype.setValue=function(c){if(isNaN(parseFloat(c))){c=this.val||0}var a=&quot;green&quot;;if(c&lt;0){a=&quot;red&quot;}this.dq(&quot;<SPAN>$</SPAN><SPAN style="padding-right:2px;color:&quot;+a+&quot;;">&quot;+c+&quot;</SPAN>&quot;,c)};function eXcell_dyn(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString().PA()}}eXcell_dyn.prototype=new eXcell_ed;eXcell_dyn.prototype.setValue=function(g){if(!g||isNaN(Number(g))){if(g!==&quot;&quot;){g=0}}if(g&gt;0){var c=&quot;green&quot;;var a=&quot;dyn_up.gif&quot;}else{if(g==0){var c=&quot;black&quot;;var a=&quot;dyn_.gif&quot;}else{var c=&quot;red&quot;;var a=&quot;dyn_down.gif&quot;}}this.dq(&quot;<DIV style="position:relative;padding-right:2px; width:100%;overflow:hidden; white-space:nowrap;">&lt;img src='&quot;+this.grid.eg+&quot;&quot;+a+&quot;' height='15' style='position:absolute;top:0px;left:0px;'&gt;<SPAN style="padding-left:20px; width:100%;color:&quot;+c+&quot;;">&quot;+g+&quot;</SPAN></DIV>&quot;,g)};function eXcell_ro(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell.mG?&quot;&quot;:this.cell.innerHTML.toString().PA()}}eXcell_ro.prototype=new gD;function eXcell_ron(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell.mG?&quot;&quot;:this.grid.Sl(this.cell.innerHTML.toString().PA(),this.cell._cellIndex).toString()}}eXcell_ron.prototype=new gD;eXcell_ron.prototype.setValue=function(a){if(a===0){}else{if(!a||a.toString().PA()==&quot;&quot;){this.dq(&quot; &quot;);return this.cell.mG=true}}this.cell.mG=false;this.dq(a?this.grid.PH(a,this.cell._cellIndex):&quot;0&quot;)};function eXcell_rotxt(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true};this.setValue=function(c){if(!c){c=&quot; &quot;;this.cell.mG=true}else{this.cell.mG=false}this.setCTxtValue(c)};this.getValue=function(){if(this.cell.mG){return &quot;&quot;}return(_isIE?this.cell.innerText:this.cell.textContent)}}eXcell_rotxt.prototype=new gD;function dhtmlXGridComboObject(){this.kk=new dhtmlxArray();this.values=new dhtmlxArray();this.eT=function(c,g){for(var a=0;a&lt;this.kk.length;a++){if(this.kk[a]==c){this.values[a]=g;return true}}this.values[this.values.length]=g;this.kk[this.kk.length]=c};this.get=function(c){for(var a=0;a&lt;this.kk.length;a++){if(this.kk[a]==c){return this.values[a]}}return null};this.clear=function(){this.kk=new dhtmlxArray();this.values=new dhtmlxArray()};this.remove=function(c){for(var a=0;a&lt;this.kk.length;a++){if(this.kk[a]==c){this.kk.aa(a);this.values.aa(a);return true}}};this.size=function(){var a=0;for(var c=0;c&lt;this.kk.length;c++){if(this.kk[c]!=null){a++}}return a};this.Ln=function(){var a=new Array(0);for(var c=0;c&lt;this.kk.length;c++){if(this.kk[c]!=null){a[a.length]=this.kk[c]}}return a};this.save=function(){this.aff=new Array();for(var a=0;a&lt;this.kk.length;a++){this.aff[a]=[this.kk[a],this.values[a]]}};this.restore=function(){if(this.aff){this.kk[a]=new Array();this.values[a]=new Array();for(var a=0;a&lt;this.aff.length;a++){this.kk[a]=this.aff[a][0];this.values[a]=this.aff[a][1]}}};return this}function qB(){this.kk=new dhtmlxArray();this.values=new dhtmlxArray();return this}qB.prototype=new dhtmlXGridComboObject;dhtmlXGridObject.prototype.enableDragAndDrop=function(a){if(a==&quot;temporary_disabled&quot;){this.dADTempOff=false;a=true}else{this.dADTempOff=true}this.nz=ap(a);this._drag_validate=true;if(a){this.HF.ondragstart=function(c){(c||event).cancelBubble=true;return false}}};dhtmlXGridObject.prototype.setDragBehavior=function(a){this.dadmodec=this.dadmodefix=0;switch(a){case &quot;child&quot;:this.dadmode=0;this._sbmod=false;break;case &quot;sibling&quot;:this.dadmode=1;this._sbmod=false;break;case &quot;sibling-next&quot;:this.dadmode=1;this._sbmod=true;break;case &quot;complex&quot;:this.dadmode=2;this._sbmod=false;break;case &quot;complex-next&quot;:this.dadmode=2;this._sbmod=true;break}};dhtmlXGridObject.prototype.enableDragOrder=function(a){this._dndorder=ap(a)};dhtmlXGridObject.prototype._checkParent=function(h,c){var g=this._h2.get[h.idd].parent;if(!g.parent){return}for(var a=0;a&lt;c.length;a++){if(c[a]==g.id){return true}}return this._checkParent(this.bj[g.id],c)};dhtmlXGridObject.prototype.gL=function(g,h){this.editStop();if(window.aj.al){return null}if(!this.dADTempOff){return null}g.parentObject=new Object();g.parentObject.treeNod=this;var o=this.callEvent(&quot;onBeforeDrag&quot;,[g.parentNode.idd,g._cellIndex,h]);if(!o){return null}var l=new Array();l=this.bI();l=(((l)&amp;&amp;(l!=&quot;&quot;))?l.split(this.gX):[]);var m=false;for(var c=0;c&lt;l.length;c++){if(l[c]==g.parentNode.idd){m=true}}if(!m){this.Th(this.bj[g.parentNode.idd],false,h.ctrlKey,false);if(!h.ctrlKey){l=[]}l[this.gN?l.length:0]=g.parentNode.idd}if(this.gY()){for(var c=l.length-1;c&gt;=0;c--){if(this._checkParent(this.bj[l[c]],l)){l.splice(c,1)}}}var q=this;if(l.length&amp;&amp;this._dndorder){l.sort(function(s,r){return(q.bj[s].rowIndex&gt;q.bj[r].rowIndex?1: -1)})}var a=this.bw(_isIE?h.srcElement:h.target,&quot;TD&quot;);if(a){this._dndExtra=a._cellIndex}this.jG=new Array();for(var c=0;c&lt;l.length;c++){if(this.bj[l[c]]){this.jG[this.jG.length]=this.bj[l[c]];this.bj[l[c]].treeNod=this}}g.parentObject.parentNode=g.parentNode;var n=document.createElement(&quot;div&quot;);n.innerHTML=(o!==true?o:this.rowToDragElement(g.parentNode.idd));n.style.position=&quot;absolute&quot;;n.className=&quot;dragSpanDiv&quot;;return n};dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement(&quot;DIV&quot;);this._sdrgc.innerHTML=&quot; &quot;;this._sdrgc.className=&quot;gridDragLine&quot;;this.HF.appendChild(this._sdrgc)};function fX(w,v,u,s,r,q,n,o,m,g){this.source=w||&quot;grid&quot;;this.target=v||&quot;grid&quot;;this.mode=u||&quot;move&quot;;this.dropmode=s||&quot;child&quot;;this.sid=r||0;this.tid=q;this.sobj=n||null;this.tobj=o||null;this.sExtra=m||null;this.tExtra=g||null;return this}fX.prototype.valid=function(){if(this.sobj!=this.tobj){return true}if(this.sid==this.tid){return false}if(this.target==&quot;treeGrid&quot;){var a=this.tid;while(a=this.tobj.getParentId(a)){if(this.sid==a){return false}}}return true};fX.prototype.close=function(){this.sobj=null;this.tobj=null};fX.prototype.copy=function(){return new fX(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra)};fX.prototype.set=function(g,c){this[g]=c;return this};fX.prototype.uid=function(g,c){this.zX=this.sid;while(this.tobj.bj[this.zX]){this.zX=this.zX+((new Date()).valueOf())}return this};fX.prototype.data=function(){if(this.sobj==this.tobj){return this.sobj.Vf(this.sobj.bj[this.sid])}if(this.source==&quot;tree&quot;){return this.tobj.treeToGridElement(this.sobj,this.sid,this.tid)}else{return this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)}};fX.prototype.attrs=function(){if(this.source==&quot;tree&quot;){return{}}else{return this.sobj.bj[this.sid]._attrs}};fX.prototype.bu=function(){if(this.source==&quot;treeGrid&quot;){return this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null}return null};fX.prototype.qc=function(){if(!this.tid){return 0}if(!this.tobj._h2){return 0}if(this.target==&quot;treeGrid&quot;){if(this.dropmode==&quot;child&quot;){return this.tid}else{var c=this.tobj.bj[this.tid];var a=this.tobj._h2.get[c.idd].parent.id;if((this.alfa)&amp;&amp;(this.tobj._sbmod)&amp;&amp;(c.nextSibling)){var g=this.tobj._h2.get[c.nextSibling.idd].parent.id;if(g==this.tid){return this.tid}if(g!=a){return g}}return a}}};fX.prototype.ind=function(){if(this.tid==window.unknown){return this.tobj.aD.length}if(this.target==&quot;treeGrid&quot;){if(this.dropmode==&quot;child&quot;){this.tobj.hx(this.tid)}else{this.tobj.hx(this.tobj.getParentId(this.tid))}}var a=this.tobj.aD.bP(this.tobj.bj[this.tid]);if((this.alfa)&amp;&amp;(this.tobj._sbmod)&amp;&amp;(this.dropmode==&quot;sibling&quot;)){var c=this.tobj.bj[this.tid];if((c.nextSibling)&amp;&amp;(this._h2.get[c.nextSibling.idd].parent.id==this.tid)){return a+1}}return(a+1+((this.target==&quot;treeGrid&quot;&amp;&amp;a&gt;=0&amp;&amp;this.tobj._h2.get[this.tobj.aD[a].idd].state==&quot;minus&quot;)?this.tobj._getOpenLenght(this.tobj.aD[a].idd,0):0))};fX.prototype.img=function(){if((this.target!=&quot;grid&quot;)&amp;&amp;(this.sobj._h2)){return this.sobj.getItemImage(this.sid)}else{return null}};fX.prototype.slist=function(){var c=new Array();for(var a=0;a&lt;this.sid.length;a++){c[c.length]=this.sid[a][(this.source==&quot;tree&quot;)?&quot;id&quot;:&quot;idd&quot;]}return c.join(&quot;,&quot;)};dhtmlXGridObject.prototype.BK=function(s,l,r,u){if(this.nh){return this.aC.BK()}var q=(this.aG);if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}var h=r.parentNode;var g=s.parentObject;if(!h.idd){h.grid=this;this.dadmodefix=0}var o=new fX(0,0,0,((h.grid.dadmode==1||h.grid.dadmodec)?&quot;sibling&quot;:&quot;child&quot;));if(g&amp;&amp;g.childNodes){o.set(&quot;source&quot;,&quot;tree&quot;).set(&quot;sobj&quot;,g.treeNod).set(&quot;sid&quot;,o.sobj.jG)}else{if(!g){return true}if(g.treeNod.gY&amp;&amp;g.treeNod.gY()){o.set(&quot;source&quot;,&quot;treeGrid&quot;)}o.set(&quot;sobj&quot;,g.treeNod).set(&quot;sid&quot;,o.sobj.jG)}if(h.grid.gY()){o.set(&quot;target&quot;,&quot;treeGrid&quot;)}else{o.set(&quot;dropmode&quot;,&quot;sibling&quot;)}o.set(&quot;tobj&quot;,h.grid).set(&quot;tid&quot;,h.idd);if(((o.tobj.dadmode==2)&amp;&amp;(o.tobj.dadmodec==1))&amp;&amp;(o.tobj.dadmodefix&lt;0)){if(o.tobj.obj.rows[1].idd!=o.tid){o.tid=h.previousSibling.idd}else{o.tid=0}}var a=this.bw(u,&quot;TD&quot;);if(a){o.set(&quot;tExtra&quot;,a._cellIndex)}if(a){o.set(&quot;sExtra&quot;,o.sobj._dndExtra)}if(o.sobj.dpcpy){o.set(&quot;mode&quot;,&quot;copy&quot;)}if(o.tobj.nh){o.tobj=o.tobj.aC}if(o.sobj.nh){o.sobj=o.sobj.aC}o.tobj._clearMove();if(g&amp;&amp;g.treeNod&amp;&amp;g.treeNod._nonTrivialRow){g.treeNod._nonTrivialRow(this,o.tid,o.dropmode,g)}else{o.tobj.fX=o;if(!o.tobj.callEvent(&quot;onDrag&quot;,[o.slist(),o.tid,o.sobj,o.tobj,o.sExtra,o.tExtra])){return o.tobj.fX=null}var v=new Array();if(typeof(o.sid)==&quot;object&quot;){var n=o.copy();for(var m=0;m&lt;o.sid.length;m++){if(!n.set(&quot;alfa&quot;,(!m)).set(&quot;sid&quot;,o.sid[m][(o.source==&quot;tree&quot;?&quot;id&quot;:&quot;idd&quot;)]).valid()){continue}n.tobj._dragRoutine(n);if(n.target==&quot;treeGrid&quot;&amp;&amp;n.dropmode==&quot;child&quot;){n.tobj.hx(n.tid)}v[v.length]=n.zX;n.set(&quot;dropmode&quot;,&quot;sibling&quot;).set(&quot;tid&quot;,n.zX)}n.close()}else{o.tobj._dragRoutine(o)}if(o.tobj.laterLink){o.tobj.laterLink()}o.tobj.callEvent(&quot;onDrop&quot;,[o.slist(),o.tid,v.join(&quot;,&quot;),o.sobj,o.tobj,o.sExtra,o.tExtra])}o.tobj.fX=null;o.close()};dhtmlXGridObject.prototype._dragRoutine=function(s){if((s.sobj==s.tobj)&amp;&amp;(s.source==&quot;grid&quot;)&amp;&amp;(s.mode==&quot;move&quot;)&amp;&amp; !this.aC){if(s.sobj._dndProblematic){return}var q=s.sobj.bj[s.sid];var r=s.sobj.am.bP(q);s.sobj.am.aa(s.sobj.am.bP(q));s.sobj.aD.aa(s.sobj.aD.bP(q));s.sobj.aD.ml(s.ind(),q);if(s.tobj.aC){s.tobj.aC.am.aa(r);var u=s.tobj.aC.bj[s.sid];u.parentNode.removeChild(u)}s.sobj._insertRowAt(q,s.ind());s.zX=s.sid;s.sobj.callEvent(&quot;onGridReconstructed&quot;,[]);return}var o;if(this._h2&amp;&amp;typeof s.tid!=&quot;undefined&quot;&amp;&amp;s.dropmode==&quot;sibling&quot;&amp;&amp;(this._sbmod||s.tid)){if(s.alfa&amp;&amp;this._sbmod&amp;&amp;this._h2.get[s.tid].bu.length){this.hx(s.tid);o=s.uid().tobj.addRowBefore(s.zX,s.data(),this._h2.get[s.tid].bu[0].id,s.img(),s.bu())}else{o=s.uid().tobj.addRowAfter(s.zX,s.data(),s.tid,s.img(),s.bu())}}else{o=s.uid().tobj.hY(s.zX,s.data(),s.ind(),s.qc(),s.img(),s.bu())}o._attrs=s.attrs();if(s.source==&quot;tree&quot;){this.callEvent(&quot;onRowAdded&quot;,[s.zX]);var a=s.sobj.ak(s.sid);if(a.aE){var n=s.copy().set(&quot;tid&quot;,s.zX).set(&quot;dropmode&quot;,s.target==&quot;grid&quot;?&quot;sibling&quot;:&quot;child&quot;);for(var h=0;h&lt;a.aE;h++){s.tobj._dragRoutine(n.set(&quot;sid&quot;,a.childNodes[h].id));if(s.mode==&quot;move&quot;){h--}}n.close()}}else{s.tobj._copyUserData(s);this.callEvent(&quot;onRowAdded&quot;,[s.zX]);if((s.source==&quot;treeGrid&quot;)){if(s.sobj==s.tobj){o.cG=s.sobj.bj[s.sid].cG}var m=s.sobj._h2.get[s.sid];if((m)&amp;&amp;(m.bu.length)){var n=s.copy().set(&quot;tid&quot;,s.zX);if(s.target==&quot;grid&quot;){n.set(&quot;dropmode&quot;,&quot;sibling&quot;)}else{n.tobj.hx(s.tid);n.set(&quot;dropmode&quot;,&quot;child&quot;)}var g=m.bu.length;for(var h=0;h&lt;g;h++){s.sobj.render_row_tree(null,m.bu[h].id);s.tobj._dragRoutine(n.set(&quot;sid&quot;,m.bu[h].id));if(g!=m.bu.length){h--;g=m.bu.length}}n.close()}}}if(s.mode==&quot;move&quot;){s.sobj[(s.source==&quot;tree&quot;)?&quot;deleteItem&quot;:&quot;deleteRow&quot;](s.sid);if((s.sobj==s.tobj)&amp;&amp;(!s.tobj.bj[s.sid])){s.tobj.changeRowId(s.zX,s.sid);s.zX=s.sid}}};dhtmlXGridObject.prototype.gridToGrid=function(h,a,g){var l=new Array();for(var c=0;c&lt;a.hdr.rows[0].cells.length;c++){l[c]=a.cells(h,c).getValue()}return l};dhtmlXGridObject.prototype.checkParentLine=function(a,c){if((!this._h2)||(!c)||(!a)){return false}if(a.id==c){return true}else{return this.checkParentLine(a.parent,c)}};dhtmlXGridObject.prototype.tY=function(l,g,c,m){if(!this.dADTempOff){return 0}var a=this.gY();var h=g.parentNode.idd?g.parentNode:g.parentObject;if(this._drag_validate){if(l.parentNode==g.parentNode){return 0}if((a)&amp;&amp;(this==h.grid)&amp;&amp;((this.checkParentLine(this._h2.get[l.parentNode.idd],g.parentNode.idd)))){return 0}}if(!this.callEvent(&quot;onDragIn&quot;,[h.idd||h.id,l.parentNode.idd,h.grid||h.treeNod,(l.grid||l.parentNode.grid)])){return this._setMove(l,c,m,true)}this._setMove(l,c,m);if((a)&amp;&amp;(l.parentNode.expand!=&quot;&quot;)){this._autoOpenTimer=window.setTimeout(new jP(this._autoOpenItem,this),1000);this._autoOpenId=l.parentNode.idd}else{if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}}return l};dhtmlXGridObject.prototype._autoOpenItem=function(a,c){c.hx(c._autoOpenId)};dhtmlXGridObject.prototype.iX=function(c){this._clearMove();var a=c.parentNode.parentObject?c.parentObject.id:c.parentNode.idd;this.callEvent(&quot;onDragOut&quot;,[a]);if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}};dhtmlXGridObject.prototype._setMove=function(m,c,o,l){if(!m.parentNode.idd){return}var g=dg(m);var a=dg(this.HF);if((g-a)&gt;(parseInt(this.HF.offsetHeight)-50)){this.HF.scrollTop=parseInt(this.HF.scrollTop)+20}if((g-a+parseInt(this.HF.scrollTop))&lt;(parseInt(this.HF.scrollTop)+30)){this.HF.scrollTop=parseInt(this.HF.scrollTop)-20}if(l){return 0}if(this.dadmode==2){var n=o-g+(document.body.scrollTop||document.documentElement.scrollTop)-2-m.offsetHeight/2;if((Math.abs(n)-m.offsetHeight/6)&gt;0){this.dadmodec=1;if(n&lt;0){this.dadmodefix= -1}else{this.dadmodefix=1}}else{this.dadmodec=0}}else{this.dadmodec=this.dadmode}if(this.dadmodec){if(!this._sdrgc){this._createSdrgc()}this._sdrgc.style.display=&quot;block&quot;;this._sdrgc.style.top=g-a+parseInt(this.HF.scrollTop)+((this.dadmodefix&gt;=0)?m.offsetHeight:0)+&quot;px&quot;}else{this._llSelD=m;if(m.parentNode.tagName==&quot;TR&quot;){for(var h=0;h&lt;m.parentNode.childNodes.length;h++){var n=m.parentNode.childNodes[h];n._bgCol=n.style.backgroundColor;n.style.backgroundColor=&quot;#FFCCCC&quot;}}}};dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc){this._sdrgc.style.display=&quot;none&quot;}if((this._llSelD)&amp;&amp;(this._llSelD.parentNode.tagName==&quot;TR&quot;)){var c=this._llSelD.parentNode.childNodes;for(var a=0;a&lt;c.length;a++){c[a].style.backgroundColor=c[a]._bgCol}}this._llSelD=null};dhtmlXGridObject.prototype.rowToDragElement=function(a){var c=this.cells(a,0).getValue();return c};dhtmlXGridObject.prototype._copyUserData=function(h){if(!h.tobj.bH[h.zX]||h.tobj!=h.sobj){h.tobj.bH[h.zX]=new qB()}else{return}var g=h.sobj.bH[h.sid];var a=h.tobj.bH[h.zX];if(g){a.kk=a.kk.concat(g.kk);a.values=a.values.concat(g.values)}};dhtmlXGridObject.prototype.moveRow=function(g,h,a,c){switch(h){case &quot;row_sibling&quot;:this.moveRowTo(g,a,&quot;move&quot;,&quot;sibling&quot;,this,c);break;case &quot;up&quot;:this.zs(g);break;case &quot;down&quot;:this.uQ(g);break}};dhtmlXGridObject.prototype._nonTrivialNode=function(s,r,n,o,g){if((s.callEvent)&amp;&amp;(!g)){if(!s.callEvent(&quot;onDrag&quot;,[o.idd,r.id,(n?n.id:null),this,s])){return false}}var q=o.idd;var a=q;while(s.gQ[a]){a+=(new Date()).getMilliseconds().toString()}var l=(this.gY()?this.getItemImage(q):&quot;&quot;);if(n){for(h=0;h&lt;r.aE;h++){if(r.childNodes[h]==n){break}}if(h!=0){n=r.childNodes[h-1]}else{st=&quot;TOP&quot;;n=&quot;&quot;}}var c=s._attachChildNode(r,a,this.gridToTreeElement(s,a,q),&quot;&quot;,l,l,l,&quot;&quot;,&quot;&quot;,n);if(this._h2){var m=this._h2.get[q];if(m.bu.length){for(var h=0;h&lt;m.bu.length;h++){this._nonTrivialNode(s,c,0,this.bj[m.bu[h].id],1);if(!this.dpcpy){h--}}}}if(!this.dpcpy){this.deleteRow(q)}if((s.callEvent)&amp;&amp;(!g)){s.callEvent(&quot;onDrop&quot;,[a,r.id,(n?n.id:null),this,s])}};dhtmlXGridObject.prototype.gridToTreeElement=function(c,g,a){return this.cells(a,0).getValue()};dhtmlXGridObject.prototype.treeToGridElement=function(h,l,a){var c=new Array();var m=this.cellType.bP(&quot;tree&quot;);if(m== -1){m=0}for(var g=0;g&lt;this.So();g++){c[c.length]=(g!=m)?(h.getUserData(l,this.getColumnId(g))||&quot;&quot;):h.getItemText(l)}return c};dhtmlXGridObject.prototype.moveRowTo=function(h,g,n,m,a,l){var o=new fX((a||this).gY()?&quot;treeGrid&quot;:&quot;grid&quot;,(l||this).gY()?&quot;treeGrid&quot;:&quot;grid&quot;,n,m||&quot;sibling&quot;,h,g,a||this,l||this);o.tobj._dragRoutine(o);o.close();return o.zX};dhtmlXGridObject.prototype.enableMercyDrag=function(a){this.dpcpy=ap(a)};dhtmlXGridObject.prototype.toPDF=function(h,r,w,u,o,C){var l={row:this.acg(),col:this.iL()};if(l.row===null||l.col=== -1){l=false}else{var c=this.cells(l.row,l.col).cell;c.parentNode.className=c.parentNode.className.replace(&quot; rowselected&quot;,&quot;&quot;);c.className=c.className.replace(&quot; cellselected&quot;,&quot;&quot;);l.el=c}r=r||&quot;color&quot;;var x=r==&quot;full_color&quot;;var a=this;a.LB=true;if(typeof(C)===&quot;undefined&quot;){this.target=' target=&quot;_blank&quot;'}else{this.target=C}eXcell_ch.prototype.getContent=function(){return this.getValue()};eXcell_ra.prototype.getContent=function(){return this.getValue()};function A(F){var L=[];for(var J=1;J&lt;a.hdr.rows.length;J++){L[J]=[];for(var I=0;I&lt;a._cCount;I++){var N=a.hdr.rows[J].childNodes[I];if(!L[J][I]){L[J][I]=[0,0]}if(N){L[J][N._cellIndexS]=[N.colSpan,N.rowSpan]}}}var K=&quot;&lt;rows profile='&quot;+F+&quot;'&quot;;if(w){K+=&quot; header='&quot;+w+&quot;'&quot;}if(u){K+=&quot; footer='&quot;+u+&quot;'&quot;}K+=&quot;&gt;&lt;head&gt;&quot;+a._serialiseExportConfig(L).replace(/^&lt;head/,&quot;&lt;columns&quot;).replace(/head&gt;$/,&quot;columns&gt;&quot;);for(var J=2;J&lt;a.hdr.rows.length;J++){var D=0;var Q=a.hdr.rows[J];var M=&quot;&quot;;for(var I=0;I&lt;a._cCount;I++){if((a.nF&amp;&amp; !a.nF[I])||(a._hrrar[I]&amp;&amp;(!a.aC||I&gt;=a.aC.hdrLabels.length))){D++;continue}var P=L[J][I];var O=((P[0]&amp;&amp;P[0]&gt;1)?' colspan=&quot;'+P[0]+'&quot; ':&quot;&quot;);if(P[1]&amp;&amp;P[1]&gt;1){O+=' rowspan=&quot;'+P[1]+'&quot; ';D= -1}var E=&quot;&quot;;for(var H=0;H&lt;Q.cells.length;H++){if(Q.cells[H]._cellIndexS==I){if(Q.cells[H].getElementsByTagName(&quot;SELECT&quot;).length){E=&quot;&quot;}else{E=_isIE?Q.cells[H].innerText:Q.cells[H].textContent}E=E.replace(/[ \n\r\t\xA0]+/,&quot; &quot;);break}}if(!E||E==&quot; &quot;){D++}M+=&quot;&lt;column&quot;+O+&quot;&gt;&lt;![CDATA[&quot;+E+&quot;]]&gt;&lt;/column&gt;&quot;}if(D!=a._cCount){K+=&quot;\n&lt;columns&gt;&quot;+M+&quot;&lt;/columns&gt;&quot;}}K+=&quot;&lt;/head&gt;\n&quot;;K+=q();return K}function g(){var D=[];if(o){for(var E=0;E&lt;o.length;E++){D.push(v(a.getRowIndex(o[E])))}}else{for(var E=0;E&lt;a.iD();E++){D.push(v(E))}}return D.join(&quot;\n&quot;)}function q(){var F=[&quot;&lt;foot&gt;&quot;];if(!a.ftr){return &quot;&quot;}for(var H=1;H&lt;a.ftr.rows.length;H++){F.push(&quot;&lt;columns&gt;&quot;);var K=a.ftr.rows[H];for(var E=0;E&lt;a._cCount;E++){if(a.nF&amp;&amp; !a.nF[E]){continue}if(a._hrrar[E]&amp;&amp;(!a.aC||E&gt;=a.aC.hdrLabels.length)){continue}for(var D=0;D&lt;K.cells.length;D++){var J=&quot;&quot;;var I=&quot;&quot;;if(K.cells[D]._cellIndexS==E){J=_isIE?K.cells[D].innerText:K.cells[D].textContent;J=J.replace(/[ \n\r\t\xA0]+/,&quot; &quot;);if(K.cells[D].colSpan&amp;&amp;K.cells[D].colSpan!=1){I=&quot; colspan='&quot;+K.cells[D].colSpan+&quot;' &quot;}if(K.cells[D].rowSpan&amp;&amp;K.cells[D].rowSpan!=1){I=&quot; rowspan='&quot;+K.cells[D].rowSpan+&quot;' &quot;}break}}F.push(&quot;&lt;column&quot;+I+&quot;&gt;&lt;![CDATA[&quot;+J+&quot;]]&gt;&lt;/column&gt;&quot;)}F.push(&quot;&lt;/columns&gt;&quot;)}F.push(&quot;&lt;/foot&gt;&quot;);return F.join(&quot;\n&quot;)}function n(E,D){return(window.getComputedStyle?(window.getComputedStyle(E,null)[D]):(E.currentStyle?E.currentStyle[D]:null))||&quot;&quot;}function v(H){if(!a.aD[H]){return &quot;&quot;}var D=a.render_row(H);if(D.style.display==&quot;none&quot;){return &quot;&quot;}var E=a.gY()?' level=&quot;'+a.sS(D.idd)+'&quot;':&quot;&quot;;var L=&quot;&lt;row&quot;+E+&quot;&gt;&quot;;for(var J=0;J&lt;a._cCount;J++){if(((!a.nF)||(a.nF[J]))&amp;&amp;(!a._hrrar[J]||(a.aC&amp;&amp;J&lt;a.aC.hdrLabels.length))){var P=a.cells(D.idd,J);if(x){var I=n(P.cell,&quot;color&quot;);var O=n(P.cell,&quot;backgroundColor&quot;);var N=n(P.cell,&quot;font-weight&quot;)||n(P.cell,&quot;fontWeight&quot;);var K=n(P.cell,&quot;font-style&quot;)||n(P.cell,&quot;fontStyle&quot;);var M=n(P.cell,&quot;text-align&quot;)||n(P.cell,&quot;textAlign&quot;);var F=n(P.cell,&quot;font-family&quot;)||n(P.cell,&quot;fontFamily&quot;);if(O==&quot;transparent&quot;||O==&quot;rgba(0, 0, 0, 0)&quot;){O=&quot;rgb(255,255,255)&quot;}L+=&quot;&lt;cell bgColor='&quot;+O+&quot;' textColor='&quot;+I+&quot;' bold='&quot;+N+&quot;' italic='&quot;+K+&quot;' align='&quot;+M+&quot;' font='&quot;+F+&quot;'&gt;&quot;}else{L+=&quot;&lt;cell&gt;&quot;}L+=&quot;&lt;![CDATA[&quot;+(P.getContent?P.getContent():P.getTitle())+&quot;]]&gt;&lt;/cell&gt;&quot;}}return L+&quot;&lt;/row&gt;&quot;}function s(){var D=&quot;&lt;/rows&gt;&quot;;return D}var y=document.createElement(&quot;div&quot;);y.style.display=&quot;none&quot;;document.body.appendChild(y);var m=&quot;form_&quot;+a.uid();y.innerHTML='&lt;form id=&quot;'+m+'&quot; method=&quot;post&quot; action=&quot;'+h+'&quot; accept-charset=&quot;utf-8&quot;  enctype=&quot;application/x-www-form-urlencoded&quot;'+this.target+'&gt;&lt;input type=&quot;hidden&quot; name=&quot;grid_xml&quot; id=&quot;grid_xml&quot;/&gt;&lt;/form&gt;';document.getElementById(m).firstChild.value=encodeURIComponent(A(r).replace(&quot;\u2013&quot;,&quot;-&quot;)+g()+s());document.getElementById(m).submit();y.parentNode.removeChild(y);a=null;if(l){l.el.parentNode.className+=&quot; rowselected&quot;;l.el.className+=&quot; cellselected&quot;}l=null};dhtmlXGridObject.prototype._serialiseExportConfig=function(m){function l(r){if(typeof(r)!==&quot;string&quot;){return r}r=r.replace(/&amp;/g,&quot;&amp;&quot;);r=r.replace(/&quot;/g,&quot;&quot;&quot;);r=r.replace(/'/g,&quot;&amp;apos;&quot;);r=r.replace(/&lt;/g,&quot;&lt;&quot;);r=r.replace(/&gt;/g,&quot;&gt;&quot;);return r}var c=&quot;&lt;head&gt;&quot;;for(var g=0;g&lt;this.hdr.rows[0].cells.length;g++){if(this.nF&amp;&amp; !this.nF[g]){continue}if(this._hrrar[g]&amp;&amp;(!this.aC||g&gt;=this.aC.hdrLabels.length)){continue}var h=this.fldSort[g];if(h==&quot;cus&quot;){h=this._customSorts[g].toString();h=h.replace(/function[\ ]*/,&quot;&quot;).replace(/\([^\f]*/,&quot;&quot;)}var q=m[1][g];var n=((q[1]&amp;&amp;q[1]&gt;1)?' rowspan=&quot;'+q[1]+'&quot; ':&quot;&quot;)+((q[0]&amp;&amp;q[0]&gt;1)?' colspan=&quot;'+q[0]+'&quot; ':&quot;&quot;);c+=&quot;&lt;column &quot;+n+&quot; width='&quot;+this.yI(g)+&quot;' align='&quot;+this.cellAlign[g]+&quot;' type='&quot;+this.cellType[g]+&quot;' hidden='&quot;+((this.Fs&amp;&amp;this.Fs(g))?&quot;true&quot;:&quot;false&quot;)+&quot;' sort='&quot;+(h||&quot;na&quot;)+&quot;' color='&quot;+(this.columnColor[g]||&quot;&quot;)+&quot;'&quot;+(this.columnIds[g]?(&quot; id='&quot;+this.columnIds[g]+&quot;'&quot;):&quot;&quot;)+&quot;&gt;&quot;;if(this.LB){c+=&quot;&lt;![CDATA[&quot;+this.wW(g)+&quot;]]&gt;&quot;}else{c+=this.wW(g)}var o=this.combos[g]?this.cf(g):null;if(o){for(var a=0;a&lt;o.kk.length;a++){c+=&quot;&lt;option value='&quot;+l(o.kk[a])+&quot;'&gt;&lt;![CDATA[&quot;+o.values[a]+&quot;]]&gt;&lt;/option&gt;&quot;}}c+=&quot;&lt;/column&gt;&quot;}return c+=&quot;&lt;/head&gt;&quot;};if(window.eXcell_sub_row_grid){window.eXcell_sub_row_grid.prototype.getContent=function(){return &quot;&quot;}}dhtmlXGridObject.prototype.toExcel=function(a,h,n,m,c){if(!document.getElementById(&quot;ifr&quot;)){var l=document.createElement(&quot;iframe&quot;);l.style.display=&quot;none&quot;;l.setAttribute(&quot;name&quot;,&quot;dhx_export_iframe&quot;);l.setAttribute(&quot;src&quot;,&quot;&quot;);l.setAttribute(&quot;id&quot;,&quot;dhx_export_iframe&quot;);document.body.appendChild(l)}var g=' target=&quot;dhx_export_iframe&quot;';this.toPDF(a,h,n,m,c,g)};dhtmlXGridObject.prototype.GF=function(g,h,c){if(this.gY()){return this.filterTreeBy(g,h,c)}if(this._f_rowsBuffer){if(!c){this.aD=dhtmlxArray([].concat(this._f_rowsBuffer));if(this.aC){this.aC.aD=this.aD}}}else{this._f_rowsBuffer=[].concat(this.aD)}if(!this.aD.length){return}var l=true;this.dma(true);if(typeof(g)==&quot;object&quot;){for(var a=0;a&lt;h.length;a++){this._filterA(g[a],h[a])}}else{this._filterA(g,h)}this.dma(false);if(this.aW&amp;&amp;this.aD.length/this.cu&lt;(this.ew-1)){this.changePage(0)}this._reset_view();this.callEvent(&quot;onGridReconstructed&quot;,[])};dhtmlXGridObject.prototype._filterA=function(c,g){if(g==&quot;&quot;){return}var h=true;if(typeof(g)==&quot;function&quot;){h=false}else{g=(g||&quot;&quot;).toString().toLowerCase()}if(!this.aD.length){return}for(var a=this.aD.length-1;a&gt;=0;a--){if(h?(this._get_cell_value(this.aD[a],c).toString().toLowerCase().indexOf(g)== -1):(!g.call(this,this._get_cell_value(this.aD[a],c),this.aD[a].idd))){this.aD.splice(a,1)}}};dhtmlXGridObject.prototype.getFilterElement=function(a){if(!this.filters){return}for(var c=0;c&lt;this.filters.length;c++){if(this.filters[c][1]==a){return(this.filters[c][0].combo||this.filters[c][0])}}return null};dhtmlXGridObject.prototype.collectValues=function(h){var r=this.callEvent(&quot;onCollectValues&quot;,[h]);if(r!==true){return r}if(this.gY()){return this.collectTreeValues(h)}this.dma(true);this._build_m_order();h=this._m_order?this._m_order[h]:h;var o={};var m=[];var g=this._f_rowsBuffer||this.aD;for(var l=0;l&lt;g.length;l++){var a=this._get_cell_value(g[l],h);if(a&amp;&amp;(!g[l].bq||g[l].bq[h]!=g[l].bq[h-1])){o[a]=true}}this.dma(false);var q=(this.combos[h]||(this._col_combos?this._col_combos[h]:false));for(var n in o){if(o[n]===true){if(q){if(q.get&amp;&amp;q.get(n)){n=q.get(n)}else{if(q.acS&amp;&amp;q.acS(n)){n=q.acS(n).text}}}m.push(n)}}return m.sort()};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a&lt;this._c_order.length;a++){this._m_order[this._c_order[a]]=a}}};dhtmlXGridObject.prototype.EJ=function(){var g=[];var c=[];this._build_m_order();for(var h=0;h&lt;this.filters.length;h++){var m=this._m_order?this._m_order[this.filters[h][1]]:this.filters[h][1];if(m&gt;=this._cCount){continue}c.push(m);var n=this.filters[h][0].old_value=this.filters[h][0].value;if(this.filters[h][0]._filter){n=this.filters[h][0]._filter()}var l;if(typeof n!=&quot;function&quot;&amp;&amp;(l=(this.combos[m]||(this._col_combos?this._col_combos[m]:false)))){if(l.values){m=l.values.bP(n);n=(m== -1)?n:l.kk[m]}else{if(l.MV){n=(l.MV(n)?l.MV(n).value:n)}}}g.push(n)}if(!this.callEvent(&quot;onFilterStart&quot;,[c,g])){return}this.GF(c,g);if(this.hC){this._fixAlterCss()}this.callEvent(&quot;onFilterEnd&quot;,[this.filters]);if(this._f_rowsBuffer&amp;&amp;this.aD.length==this._f_rowsBuffer.length){this._f_rowsBuffer=null}};dhtmlXGridObject.prototype.makeFilter=function(l,g,c){if(!this.filters){this.filters=[]}if(typeof(l)!=&quot;object&quot;){l=document.getElementById(l)}if(!l){return}var a=this;if(!l.style.width){l.style.width=&quot;90%&quot;}if(l.tagName==&quot;SELECT&quot;){this.filters.push([l,g]);this._loadSelectOptins(l,g);l.onchange=function(){a.EJ()};if(_isIE){l.style.marginTop=&quot;1px&quot;}this.attachEvent(&quot;onEditCell&quot;,function(n,m,o){this._build_m_order();if(n==2&amp;&amp;this.filters&amp;&amp;(this._m_order?(o==this._m_order[g]):(o==g))){this._loadSelectOptins(l,g)}return true})}else{if(l.tagName==&quot;INPUT&quot;){this.filters.push([l,g]);l.old_value=l.value=&quot;&quot;;l.onkeydown=function(){if(this._timer){window.clearTimeout(this._timer)}this._timer=window.setTimeout(function(){if(l.value!=l.old_value){a.EJ();l.old_value=l.value}},500)}}else{if(l.tagName==&quot;DIV&quot;&amp;&amp;l.className==&quot;combo&quot;){this.filters.push([l,g]);l.style.padding=&quot;0px&quot;;l.style.margin=&quot;0px&quot;;if(!window.fe){window.fe=this.eg}var h=new dhtmlXCombo(l,&quot;_filter&quot;,&quot;90%&quot;);h.filterSelfA=h.Qm;h.Qm=function(){if(this.Nn()==0){this.nQ(&quot;&quot;)}this.filterSelfA.apply(this,arguments);this.du[0].hide(false)};h.fF(true);l.combo=h;l.value=&quot;&quot;;this._loadComboOptins(l,g);h.attachEvent(&quot;onChange&quot;,function(){l.value=h.vL();if(l.value===null){l.value=&quot;&quot;}a.EJ()})}}}if(l.parentNode){l.parentNode.className+=&quot; filter&quot;}this._filters_ready()};dhtmlXGridObject.prototype.findCell=function(m,n,h,l){var l=l||(function(q,o){return o.toString().toLowerCase().indexOf(q)!= -1});if(l===true){l=function(q,o){return o.toString().toLowerCase()==q}}var g=new Array();m=m.toString().toLowerCase();if(typeof h!=&quot;number&quot;){h=h?1:0}if(!this.aD.length){return g}for(var c=(n||0);c&lt;this._cCount;c++){if(this._h2){this._h2.so(0,function(o){if(h&amp;&amp;g.length==h){return g}if(l(m,this._get_cell_value(o.buff,c))){g.push([o.id,c])}},this)}else{for(var a=0;a&lt;this.aD.length;a++){if(l(m,this._get_cell_value(this.aD[a],c))){g.push([this.aD[a].idd,c]);if(h&amp;&amp;g.length==h){return g}}}}if(typeof(n)!=&quot;undefined&quot;){return g}}return g};dhtmlXGridObject.prototype.makeSearch=function(h,g,a){if(typeof(h)!=&quot;object&quot;){h=document.getElementById(h)}if(!h){return}var c=this;if(h.tagName==&quot;INPUT&quot;){h.onkeypress=function(){if(this._timer){window.clearTimeout(this._timer)}this._timer=window.setTimeout(function(){if(h.value==&quot;&quot;){return}var l=c.findCell(h.value,g,true,a);if(l.length){if(c._h2){c.hx(l[0][0])}c.eQ(c.getRowIndex(l[0][0]),(g||0))}},500)}}if(h.parentNode){h.parentNode.className+=&quot; filter&quot;}};dhtmlXGridObject.prototype._loadSelectOptins=function(m,o){var a=this.collectValues(o);var g=m.value;m.innerHTML=&quot;&quot;;m.options[0]=new Option(&quot;&quot;,&quot;&quot;);var n=this._filter_tr?this._filter_tr[o]:null;for(var h=0;h&lt;a.length;h++){m.options[m.options.length]=new Option(n?n(a[h]):a[h],a[h])}m.value=g};dhtmlXGridObject.prototype.setSelectFilterLabel=function(c,a){if(!this._filter_tr){this._filter_tr=[]}this._filter_tr[c]=a};dhtmlXGridObject.prototype._loadComboOptins=function(h,n){if(!h.combo){return}var a=this.collectValues(n);h.combo.clearAll();var m=<A href="/wiki/index.php?title=%22%22,%22_%22&amp;action=edit&amp;redlink=1" class="new" title="&quot;&quot;,&quot; &quot; (page does not exist)">&quot;&quot;,&quot; &quot;</A>;for(var g=0;g&lt;a.length;g++){m.push([a[g],a[g]])}h.combo.addOption(m)};dhtmlXGridObject.prototype.refreshFilters=function(){if(!this.filters){return}for(var a=0;a&lt;this.filters.length;a++){switch(this.filters[a][0].tagName.toLowerCase()){case &quot;input&quot;:break;case &quot;select&quot;:this._loadSelectOptins.apply(this,this.filters[a]);break;case &quot;div&quot;:this._loadComboOptins.apply(this,this.filters[a]);break}}};dhtmlXGridObject.prototype._filters_ready=function(c,a){this.attachEvent(&quot;onXLE&quot;,this.refreshFilters);this.attachEvent(&quot;onRowCreated&quot;,function(l,h){if(this._f_rowsBuffer){for(var g=0;g&lt;this._f_rowsBuffer.length;g++){if(this._f_rowsBuffer[g].idd==l){return this._f_rowsBuffer[g]=h}}}});this.attachEvent(&quot;onClearAll&quot;,function(){this._f_rowsBuffer=null;if(!this.hdr.rows.length){this.filters=[]}});this._filters_ready=function(){}};dhtmlXGridObject.prototype._in_header_text_filter=function(c,a){c.innerHTML=&quot;&lt;input type='text'&gt;&quot;;c.onclick=c.onmousedown=function(g){(g||event).cancelBubble=true;return true};c.onselectstart=function(){return(event.cancelBubble=true)};this.makeFilter(c.firstChild,a)};dhtmlXGridObject.prototype._in_header_text_filter_inc=function(c,a){c.innerHTML=&quot;&lt;input type='text'&gt;&quot;;c.onclick=c.onmousedown=function(g){(g||event).cancelBubble=true;return true};c.onselectstart=function(){return(event.cancelBubble=true)};this.makeFilter(c.firstChild,a);c.firstChild._filter=function(){if(c.firstChild.value==&quot;&quot;){return &quot;&quot;}return function(g){return(g.toString().toLowerCase().indexOf(c.firstChild.value.toLowerCase())==0)}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_select_filter=function(c,a){c.innerHTML=&quot;&lt;select&gt;&lt;/select&gt;&quot;;c.onclick=function(g){(g||event).cancelBubble=true;return false};this.makeFilter(c.firstChild,a)};dhtmlXGridObject.prototype._in_header_select_filter_strict=function(g,c){g.innerHTML=&quot;&lt;select style='width:90%; font-size:8pt; font-family:Tahoma;'&gt;&lt;/select&gt;&quot;;g.onclick=function(h){(h||event).cancelBubble=true;return false};this.makeFilter(g.firstChild,c);var a=this.combos;g.firstChild._filter=function(){var h=g.firstChild.value;if(!h){return &quot;&quot;}if(a[c]){h=a[c].kk[a[c].values.bP(h)]}h=h.toLowerCase();return function(l){return(l.toString().toLowerCase()==h)}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_combo_filter=function(c,a){c.innerHTML=&quot;&quot;;c.onselectstart=function(){return(event.cancelBubble=true)};c.onclick=c.onmousedown=function(g){(g||event).cancelBubble=true;return true};this.makeFilter(c.firstChild,a)};dhtmlXGridObject.prototype._search_common=function(c,a){c.innerHTML=&quot;&lt;input type='text' style='width:90%; '&gt;&quot;;c.onclick=c.onmousedown=function(g){(g||event).cancelBubble=true;return true};c.onselectstart=function(){return(event.cancelBubble=true)}};dhtmlXGridObject.prototype._in_header_text_search=function(g,c,a){this._search_common(g,c);this.makeSearch(g.firstChild,c)};dhtmlXGridObject.prototype._in_header_text_search_strict=function(c,a){this._search_common(c,a);this.makeSearch(c.firstChild,a,true)};dhtmlXGridObject.prototype._in_header_numeric_filter=function(c,a){this._in_header_text_filter.call(this,c,a);c.firstChild._filter=function(){var g=this.value;var l;var n=&quot;==&quot;;var h=parseFloat(g.replace(&quot;=&quot;,&quot;&quot;));var m=null;if(g){if(g.indexOf(&quot;..&quot;)!= -1){g=g.split(&quot;..&quot;);h=parseFloat(g[0]);m=parseFloat(g[1]);return function(o){if(o&gt;=h&amp;&amp;o&lt;=m){return true}return false}}l=g.match(/&gt;=|&lt;=|&gt;|&lt;/);if(l){n=l[0];h=parseFloat(g.replace(n,&quot;&quot;))}return Function(&quot;v&quot;,&quot; if (v &quot;+n+&quot; &quot;+h+&quot; ) return true; return false;&quot;)}return &quot;&quot;}};dhtmlXGridObject.prototype._in_header_master_checkbox=function(h,g,l){h.innerHTML=l[0]+&quot;&lt;input type='checkbox' /&gt;&quot;+l[1];var a=this;h.getElementsByTagName(&quot;input&quot;)[0].onclick=function(m){a._build_m_order();var c=a._m_order?a._m_order[g]:g;var n=this.checked?1:0;a.forEachRowA(function(q){var o=this.cells(q,c);if(o.wI()){o.setValue(n);o.cell.hy=true}this.callEvent(&quot;onEditCell&quot;,[1,q,c,n]);this.callEvent(&quot;onCheckbox&quot;,[q,c,n])});(m||event).cancelBubble=true}};dhtmlXGridObject.prototype._in_header_stat_total=function(g,a,l){var h=function(){var o=0;this._build_m_order();var n=this._m_order?this._m_order[a]:a;for(var m=0;m&lt;this.aD.length;m++){var c=parseFloat(this._get_cell_value(this.aD[m],n));o+=isNaN(c)?0:c}return this._maskArr[n]?this.PH(o,n):(Math.round(o*100)/100)};this._stat_in_header(g,h,a,l,l)};dhtmlXGridObject.prototype._in_header_stat_multi_total=function(l,h,q){var o=q[1].split(&quot;:&quot;);q[1]=&quot;&quot;;for(var g=0;g&lt;o.length;g++){o[g]=parseInt(o[g])}var m=function(){var u=0;for(var s=0;s&lt;this.aD.length;s++){var r=1;for(var c=0;c&lt;o.length;c++){r*=parseFloat(this._get_cell_value(this.aD[s],o[c]))}u+=isNaN(r)?0:r}return this._maskArr[h]?this.PH(u,h):(Math.round(u*100)/100)};var a=[];for(var n=0;n&lt;o.length;n++){a[o[n]]=true}this._stat_in_header(l,m,a,q,q)};dhtmlXGridObject.prototype._in_header_stat_max=function(g,a,l){var h=function(){this._build_m_order();var m=this._m_order?this._m_order[a]:a;var n= -999999999;if(this.iD()==0){return &quot; &quot;}for(var c=0;c&lt;this.aD.length;c++){n=Math.max(n,parseFloat(this._get_cell_value(this.aD[c],m)))}return this._maskArr[a]?this.PH(n,a):n};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._in_header_stat_min=function(g,a,l){var h=function(){this._build_m_order();var m=this._m_order?this._m_order[a]:a;var n=999999999;if(this.iD()==0){return &quot; &quot;}for(var c=0;c&lt;this.aD.length;c++){n=Math.min(n,parseFloat(this._get_cell_value(this.aD[c],m)))}return this._maskArr[a]?this.PH(n,a):n};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._in_header_stat_average=function(g,a,l){var h=function(){this._build_m_order();var n=this._m_order?this._m_order[a]:a;var q=0;var o=0;if(this.iD()==0){return &quot; &quot;}for(var m=0;m&lt;this.aD.length;m++){var c=parseFloat(this._get_cell_value(this.aD[m],n));q+=isNaN(c)?0:c;o++}return this._maskArr[a]?this.PH(q/o,a):(Math.round(q/o*100)/100)};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._in_header_stat_count=function(g,a,l){var h=function(){return this.iD()};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._stat_in_header=function(g,h,a,n){var l=this;var m=function(){this.dma(true);g.innerHTML=(n[0]?n[0]:&quot;&quot;)+h.call(this)+(n[1]?n[1]:&quot;&quot;);this.dma(false);this.callEvent(&quot;onStatReady&quot;,[])};if(!this._stat_events){this._stat_events=[];this.attachEvent(&quot;onClearAll&quot;,function(){if(!this.hdr.rows[1]){for(var o=0;o&lt;this._stat_events.length;o++){for(var c=0;c&lt;4;c++){this.detachEvent(this._stat_events[o][c])}}this._stat_events=[]}})}this._stat_events.push([this.attachEvent(&quot;onGridReconstructed&quot;,m),this.attachEvent(&quot;onXLE&quot;,m),this.attachEvent(&quot;onFilterEnd&quot;,m),this.attachEvent(&quot;onEditCell&quot;,function(c,q,o){if(c==2&amp;&amp;(o==a||(a&amp;&amp;a[o]))){m.call(this)}return true})]);g.innerHTML=&quot;&quot;};dhtmlXGridObject.prototype.loadCSVFile=function(c,a){this.load(c,a,&quot;csv&quot;)};dhtmlXGridObject.prototype.enableCSVAutoID=function(a){this.Sz=ap(a)};dhtmlXGridObject.prototype.enableCSVHeader=function(a){this.KY=ap(a)};dhtmlXGridObject.prototype.setCSVDelimiter=function(a){this.csv.cell=a};dhtmlXGridObject.prototype.Sz=true;dhtmlXGridObject.prototype.loadCSVString=function(a){this.parse(a,&quot;csv&quot;)};dhtmlXGridObject.prototype.serializeToCSV=function(o){this.editStop();if(this.oX){this.zt=&quot;getMathValue&quot;}else{if(this._strictText||o){this.zt=&quot;getTitle&quot;}else{this.zt=&quot;getValue&quot;}}var m=[];if(this.KY){for(var l=1;l&lt;this.hdr.rows.length;l++){var c=[];for(var n=0;n&lt;this._cCount;n++){if((!this.nF)||(this.nF[n])){c.push(this.adE(n,l-1))}}m.push(this.csvParser.str(c,this.csv.cell,this.csv.row))}}var n=0;var h=this.aD.length;for(n;n&lt;h;n++){var g=this._serializeRowToCVS(null,n);if(g!=&quot;&quot;){m.push(g)}}return this.csvParser.block(m,this.csv.row)};dhtmlXGridObject.prototype._serializeRowToCVS=function(a,q,g,n){var o=new Array();if(!a){a=this.render_row(q);if(this.aC&amp;&amp; !this.aC.bj[a.idd]){this.aC.render_row(q)}}if(!this.Sz){o[o.length]=a.idd}g=g||0;n=n||this._cCount;var v=false;var h=g;while(a.childNodes[g]._cellIndex&gt;h&amp;&amp;g){g--}for(var s=g;h&lt;n;s++){if(!a.childNodes[s]){break}var c=a.childNodes[s]._cellIndex;if(((!this.nF)||(this.nF[c]))&amp;&amp;(!this._serialize_visible|| !this._hrrar[c])){var l=a.childNodes[s];var m=this.cells(a.idd,c);while(h!=c){h++;o.push(&quot;&quot;);if(h&gt;=n){break}}if(h&gt;=n){break}h++;if(m.cell){wF=m[this.zt]()}else{wF=&quot;&quot;}if((this.Zx)&amp;&amp;(m.hy())){v=true}o[o.length]=((wF===null)?&quot;&quot;:wF);if(this.CP&amp;&amp;l.colSpan&amp;&amp;l.colSpan&gt;1){l=l.colSpan-1;for(var w=0;w&lt;l;w++){o[o.length]=&quot;&quot;;h++}}}else{h++}}if((this.xq)&amp;&amp;(!v)){return &quot;&quot;}return this.csvParser.str(o,this.csv.cell,this.csv.row)};dhtmlXGridObject.prototype.toClipBoard=function(a){if(window.clipboardData){window.clipboardData.setData(&quot;Text&quot;,a)}else{(new Clipboard()).copy(a)}};dhtmlXGridObject.prototype.fromClipBoard=function(){if(window.clipboardData){return window.clipboardData.getData(&quot;Text&quot;)}else{return(new Clipboard()).paste()}};dhtmlXGridObject.prototype.cellToClipboard=function(g,c){if((!g)||(!c)){if(!this.bY[0]){return}g=this.bY[0].idd;c=this.cell._cellIndex}var a=this.cells(g,c);this.toClipBoard(((a.DB?a.DB():a.getValue())||&quot;&quot;).toString())};dhtmlXGridObject.prototype.updateCellFromClipboard=function(g,c){if((!g)||(!c)){if(!this.bY[0]){return}g=this.bY[0].idd;c=this.cell._cellIndex}var a=this.cells(g,c);a[a.hW?&quot;setLabel&quot;:&quot;setValue&quot;](this.fromClipBoard())};dhtmlXGridObject.prototype.rowToClipboard=function(h){var a=&quot;&quot;;if(this.oX){this.zt=&quot;getMathValue&quot;}else{if(this._strictText){this.zt=&quot;getTitle&quot;}else{this.zt=&quot;getValue&quot;}}this._serialize_visible=true;if(h){a=this._serializeRowToCVS(this.dz(h))}else{var g=[];for(var c=0;c&lt;this.bY.length;c++){g[g.length]=this._serializeRowToCVS(this.bY[c]);a=this.csvParser.block(g,this.csv.row)}}this._serialize_visible=false;this.toClipBoard(a)};dhtmlXGridObject.prototype.updateRowFromClipboard=function(l){var a=this.fromClipBoard();if(!a){return}if(l){var h=this.dz(l)}else{var h=this.bY[0]}if(!h){return}var m=this.csvParser;a=m.unblock(a,this.csv.cell,this.csv.row)[0];if(!this.Sz){a.splice(0,1)}for(var g=0;g&lt;a.length;g++){var c=this.cells3(h,g);c[c.hW?&quot;setLabel&quot;:&quot;setValue&quot;](a[g])}};dhtmlXGridObject.prototype.csvParser={block:function(a,c){return a.join(c)},unblock:function(m,a,l){var h=(m||&quot;&quot;).split(l);for(var c=0;c&lt;h.length;c++){h[c]=(h[c]||&quot;&quot;).split(a)}var g=h.length-1;if(h[g].length==1&amp;&amp;h[g][0]==&quot;&quot;){h.splice(g,1)}return h},str:function(c,a,g){return c.join(a)}};dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('&quot;',&quot;g&quot;),_quote_esc:RegExp('\\\\&quot;',&quot;g&quot;),block:function(a,c){return a.join(c)},unblock:function(o,s,v){var g=[[]];var c=0;if(!o){return g}var q=/^[ ]*&quot;/;var n=/&quot;[ ]*$/;var a=new RegExp(&quot;.*&quot;+v+&quot;.*$&quot;);var l=o.split(s);for(var h=0;h&lt;l.length;h++){if(l[h].match(q)){var u=l[h].replace(q,&quot;&quot;);while(!l[h].match(n)){h++;u+=l[h]}g[c].push(u.replace(n,&quot;&quot;).replace(this._quote_esc,'&quot;'))}else{if(l[h].match(a)){var m=l[h].indexOf(v);g[c].push(l[h].substr(0,m));c++;g[c]=[];l[h]=l[h].substr(m+1);h--}else{if(l[h]||h!=l.length-1){g[c].push(l[h])}}}}var r=g.length-1;if(r&gt;0&amp;&amp; !g[r].length){g.splice(r,1)}return g},str:function(g,a,h){for(var c=0;c&lt;g.length;c++){g[c]='&quot;'+g[c].replace(this._quote,'\\&quot;')+'&quot;'}return g.join(a)}};dhtmlXGridObject.prototype.addRowFromClipboard=function(){var a=this.fromClipBoard();if(!a){return}var g=this.csvParser.unblock(a,this.csv.cell,this.csv.row);for(var c=0;c&lt;g.length;c++){if(g[c]){a=g[c];if(!a.length){continue}if(this.Sz){this.hY(this.iD()+2,a)}else{if(this.bj[a[0]]){a[0]=this.uid()}this.hY(a[0],a.slice(1))}}}};dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())};dhtmlXGridObject.prototype.gridFromClipboard=function(){var a=this.fromClipBoard();if(!a){return}this.loadCSVString(a)};dhtmlXGridObject.prototype.getXLS=function(n){if(!this.xslform){this.xslform=document.createElement(&quot;FORM&quot;);this.xslform.action=(n||&quot;&quot;)+&quot;xls.php&quot;;this.xslform.method=&quot;post&quot;;this.xslform.target=(_isIE?&quot;_blank&quot;:&quot;&quot;);document.body.appendChild(this.xslform);var m=document.createElement(&quot;INPUT&quot;);m.type=&quot;hidden&quot;;m.name=&quot;csv&quot;;this.xslform.appendChild(m);var h=document.createElement(&quot;INPUT&quot;);h.type=&quot;hidden&quot;;h.name=&quot;csv_header&quot;;this.xslform.appendChild(h)}var o=this.serializeToCSV();this.xslform.childNodes[0].value=o;var g=[];var a=this._cCount;for(var c=0;c&lt;a;c++){g.push(this.wW(c))}g=g.join(&quot;,&quot;);this.xslform.childNodes[1].value=g;this.xslform.submit()};dhtmlXGridObject.prototype.printView=function(s,g){var q=&quot;&lt;style&gt;TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }	\n  &lt;/style&gt;&quot;;var C=null;if(this.aC){C=[].concat(this._hrrar);for(var A=0;A&lt;this.aC._cCount;A++){this._hrrar[A]=null}}q+=&quot;&lt;base  href='&quot;+document.location.href+&quot;'&gt;&lt;/base&gt;&quot;;if(!this.parentGrid){q+=(s||&quot;&quot;)}q+='<TABLE width="100%" border="2px" cellpadding="0" cellspacing="0">';var r=Math.max(this.aD.length,this.am.length);var o=this._cCount;var u=this._printWidth();q+='<TBODY><TR class="header_row_1">';for(var A=0;A&lt;o;A++){if(this._hrrar&amp;&amp;this._hrrar[A]){continue}var l=this.hdr.rows[1].cells[this.hdr.rows[1].bq?this.hdr.rows[1].bq[parseInt(A)]:A];var a=(l.colSpan||1);var H=(l.rowSpan||1);for(var y=1;y&lt;a;y++){u[A]+=u[y]}q+='<TD rowspan="'+H+'" width="'+u[A]+'%" style="background-color:lightgrey;" colspan="'+a+'">'+this.wW(A)+&quot;</TD>&quot;;A+=a-1}q+=&quot;</TR>&quot;;for(var A=2;A&lt;this.hdr.rows.length;A++){if(_isIE){q+=&quot;<TR style="background-color:lightgrey" class="header_row_&quot;+A+&quot;">&quot;;var h=this.hdr.rows[A].childNodes;for(var y=0;y&lt;h.length;y++){if(!this._hrrar|| !this._hrrar[h[y]._cellIndex]){q+=h[y].outerHTML}}q+=&quot;</TR>&quot;}else{q+=&quot;<TR class="header_row_&quot;+A+&quot;" style="background-color:lightgrey">&quot;+(this.aC?this.aC.hdr.rows[A].innerHTML:&quot;&quot;)+this.hdr.rows[A].innerHTML+&quot;</TR>&quot;}}for(var A=0;A&lt;r;A++){q+=&quot;<TR>&quot;;if(this.am[A]&amp;&amp;this.am[A].te){q+=this.am[A].innerHTML.replace(/&lt;img[^&gt;]*&gt;/gi,&quot;&quot;)+&quot;</TR>&quot;;continue}if(this.am[A]&amp;&amp;this.am[A].style.display==&quot;none&quot;){continue}var n;if(this.am[A]){n=this.am[A].idd}else{if(this.aD[A]){n=this.aD[A].idd}else{continue}}for(var y=0;y&lt;o;y++){if(this._hrrar&amp;&amp;this._hrrar[y]){continue}if(this.bj[n]&amp;&amp;this.bj[n].tagName==&quot;TR&quot;){var F=this.cells(n,y);if(F._setState){var v=&quot;&quot;}else{if(F.getContent){v=F.getContent()}else{if(F.getImage||F.combo){var v=F.cell.innerHTML}else{var v=F.getValue()}}}}else{var v=this._get_cell_value(this.aD[A],y)}var w=this.columnColor[y]?&quot;background-color:&quot;+this.columnColor[y]+&quot;;&quot;:&quot;&quot;;var x=this.cellAlign[y]?&quot;text-align:&quot;+this.cellAlign[y]+&quot;;&quot;:&quot;&quot;;var D=F.getAttribute(&quot;colspan&quot;);q+='<TR><TD style="'+w+x+'">&quot;+(v===&quot;&quot;?&quot; &quot;:v)+&quot;</TD>&quot;;if(D){y+=D-1}}q+=&quot;&lt;/tr&gt;&quot;;if(this.am[A]&amp;&amp;this.am[A]._expanded){var m=this.cells4(this.am[A]._expanded.ctrl);if(m.getSubGrid){q+='</TR><TR><TD colspan="'+o+'">'+m.getSubGrid().printView()+&quot;</TD></TR>&quot;}else{q+='<TR><TD colspan="'+o+'">'+this.am[A]._expanded.innerHTML+&quot;</TD></TR>&quot;}}}if(this.ftr){for(var A=1;A&lt;this.ftr.childNodes[0].rows.length;A++){q+=&quot;<TR style="background-color:lightgrey">&quot;+((this.aC)?this.aC.ftr.childNodes[0].rows[A].innerHTML:&quot;&quot;)+this.ftr.childNodes[0].rows[A].innerHTML+&quot;</TR>&quot;}}q+=&quot;</TBODY></TABLE>&quot;;if(this.parentGrid){return q}q+=(g||&quot;&quot;);var E=window.open(&quot;&quot;,&quot;_blank&quot;);E.document.write(q);E.document.write(&quot;&lt;script&gt;window.onerror=function(){return true;}&lt;\/script&gt;&quot;);E.document.close();if(this.aC){this._hrrar=C}};dhtmlXGridObject.prototype._printWidth=function(){var l=[];var h=0;for(var g=0;g&lt;this._cCount;g++){var a=this.yI(g);l.push(a);h+=a}var n=[];var c=0;for(var g=0;g&lt;l.length;g++){var m=Math.floor((l[g]/h)*100);c+=m;n.push(m)}n[n.length-1]+=100-c;return n};dhtmlXGridObject.prototype.loadObject=function(a){};dhtmlXGridObject.prototype.loadJSONFile=function(a){};dhtmlXGridObject.prototype.serializeToObject=function(){};dhtmlXGridObject.prototype.serializeToJSON=function(){};if(!window.clipboardData){window.clipboardData={_make:function(){var c=Components.classes[&quot;@mozilla.org/widget/clipboard;1&quot;].createInstance(Components.interfaces.nsIClipboard);if(!c){return null}var a=Components.classes[&quot;@mozilla.org/widget/transferable;1&quot;].createInstance(Components.interfaces.nsITransferable);if(!a){return null}a.addDataFlavor(&quot;text/unicode&quot;);var g=Components.classes[&quot;@mozilla.org/supports-string;1&quot;].createInstance(Components.interfaces.nsISupportsString);this._p=[c,a,g];return true},setData:function(a,h){try{netscape.security.PrivilegeManager.enablePrivilege(&quot;UniversalXPConnect&quot;)}catch(g){dhtmlxError.gn(&quot;Clipboard&quot;,&quot;Access to clipboard denied&quot;,[a,h]);return &quot;&quot;}if(!this._make()){return false}this._p[2].data=h;this._p[1].setTransferData(&quot;text/unicode&quot;,this._p[2],h.length*2);var c=Components.interfaces.nsIClipboard;this._p[0].setData(this._p[1],null,c.kGlobalClipboard)},getData:function(a){try{netscape.security.PrivilegeManager.enablePrivilege(&quot;UniversalXPConnect&quot;)}catch(g){dhtmlxError.gn(&quot;Clipboard&quot;,&quot;Access to clipboard denied&quot;,[a]);return &quot;&quot;}if(!this._make()){return false}this._p[0].getData(this._p[1],this._p[0].kGlobalClipboard);var c=new Object();var h=new Object();try{this._p[1].getTransferData(&quot;text/unicode&quot;,h,c)}catch(g){return &quot;&quot;}if(h){h=h.value.QueryInterface(Components.interfaces.nsISupportsString)}if(h){return h.data.substring(0,c.value/2)}return &quot;&quot;}}}dhtmlXGridObject.prototype.enableBlockSelection=function(g){if(typeof this._bs_mode==&quot;undefined&quot;){var a=this;this.obj.onmousedown=function(h){if(a._bs_mode){a._OnSelectionStart((h||event),this)}return true};this._CSVRowDelimiter=this.csv.row;this.attachEvent(&quot;onResize&quot;,function(){a._HideSelection();return true});this.attachEvent(&quot;onGridReconstructed&quot;,function(){a._HideSelection();return true});this.attachEvent(&quot;onFilterEnd&quot;,this._HideSelection)}if(g===false){this._bs_mode=false;return this._HideSelection()}else{this._bs_mode=true}var c=this._clip_area=document.createElement(&quot;textarea&quot;);c.style.cssText=&quot;position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;&quot;;c.onkeydown=function(h){h=h||event;if(h.keyCode==86&amp;&amp;(h.ctrlKey||h.metaKey)){a.pasteBlockFromClipboard()}};document.body.insertBefore(this._clip_area,document.body.firstChild);dhtmlxEvent(this.aL,&quot;click&quot;,function(){if(!a.editor){a._clip_area.select()}})};dhtmlXGridObject.prototype.forceLabelSelection=function(a){this._strictText=ap(a)};dhtmlXGridObject.prototype.disableBlockSelection=function(){this.obj.onmousedown=null};dhtmlXGridObject.prototype._OnSelectionStart=function(g,h){var c=this;if(g.button==2){return}var l=g.srcElement||g.target;if(this.editor){if(l.tagName&amp;&amp;(l.tagName==&quot;INPUT&quot;||l.tagName==&quot;TEXTAREA&quot;)){return}this.editStop()}c.setActive(true);var n=this.fI(this.obj);var a=g.clientX-n[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0));var m=g.clientY-n[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));this._CreateSelection(a-4,m-4);if(l==this._selectionObj){this._HideSelection();this._startSelectionCell=null}else{while(l&amp;&amp;(!l.tagName||l.tagName.toLowerCase()!=&quot;td&quot;)){l=l.parentNode}this._startSelectionCell=l}if(this._startSelectionCell){if(!this.callEvent(&quot;onBeforeBlockSelected&quot;,[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex])){return this._startSelectionCell=null}}this.obj.onmousedown=null;this.obj[_isIE?&quot;onmouseleave&quot;:&quot;onmouseout&quot;]=function(o){if(c._blsTimer){window.clearTimeout(c._blsTimer)}};this.obj.onmmold=this.obj.onmousemove;this._init_pos=[a,m];this._selectionObj.onmousemove=this.obj.onmousemove=function(o){o=o||g;if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}c._OnSelectionMove(o)};this._oldDMP=document.body.onmouseup;document.body.onmouseup=function(o){o=o||g;c._OnSelectionStop(o,this);return true};this.callEvent(&quot;onBeforeBlockSelection&quot;,[]);document.body.onselectstart=function(){return false}};dhtmlXGridObject.prototype._getCellByPos=function(a,h){a=a;if(this.aC){a+=this.aC.HF.scrollWidth}h=h;var c=0;for(var g=0;g&lt;this.obj.rows.length;g++){h-=this.obj.rows[g].offsetHeight;if(h&lt;=0){c=this.obj.rows[g];break}}if(!c|| !c.idd){return null}for(var g=0;g&lt;this._cCount;g++){a-=this.yI(g);if(a&lt;=0){while(true){if(c.bq&amp;&amp;c.bq[g+1]==c.bq[g]){c=c.previousSibling}else{return this.cells(c.idd,g).cell}}}}return null};dhtmlXGridObject.prototype._OnSelectionMove=function(h){var x=this;this._ShowSelection();var s=this.fI(this.obj);var n=h.clientX-s[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0));var m=h.clientY-s[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if((Math.abs(this._init_pos[0]-n)&lt;5)&amp;&amp;(Math.abs(this._init_pos[1]-m)&lt;5)){return this._HideSelection()}var v=this._endSelectionCell;if(this._startSelectionCell==null){this._endSelectionCell=this._startSelectionCell=this.bw(h.srcElement||h.target,&quot;TD&quot;)}else{if(h.srcElement||h.target){if((h.srcElement||h.target).className==&quot;dhtmlxGrid_selection&quot;){this._endSelectionCell=(this._getCellByPos(n,m)||this._endSelectionCell)}else{var w=this.bw(h.srcElement||h.target,&quot;TD&quot;);if(w.parentNode.idd){this._endSelectionCell=w}}}}if(this._endSelectionCell){if(!this.callEvent(&quot;onBeforeBlockSelected&quot;,[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])){this._endSelectionCell=v}}var l=this.HF.scrollLeft+this.HF.clientWidth;var c=this.HF.scrollTop+this.HF.clientHeight;var q=this.HF.scrollLeft;var o=this.HF.scrollTop;var g=false;if(this._blsTimer){window.clearTimeout(this._blsTimer)}if(n+20&gt;=l){this.HF.scrollLeft=this.HF.scrollLeft+20;g=true}else{if(n-20&lt;q){this.HF.scrollLeft=this.HF.scrollLeft-20;g=true}}if(m+20&gt;=c&amp;&amp; !this.nh){this.HF.scrollTop=this.HF.scrollTop+20;g=true}else{if(m-20&lt;o&amp;&amp; !this.nh){this.HF.scrollTop=this.HF.scrollTop-20;g=true}}this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell);if(g){var u=h.clientX;var r=h.clientY;this._blsTimer=window.setTimeout(function(){x._OnSelectionMove({clientX:u,clientY:r})},100)}};dhtmlXGridObject.prototype._OnSelectionStop=function(c){var a=this;if(this._blsTimer){window.clearTimeout(this._blsTimer)}this.obj.onmousedown=function(h){if(a._bs_mode){a._OnSelectionStart((h||c),this)}return true};this.obj.onmousemove=this.obj.onmmold||null;this._selectionObj.onmousemove=null;document.body.onmouseup=this._oldDMP||null;if(parseInt(this._selectionObj.style.width)&lt;2&amp;&amp;parseInt(this._selectionObj.style.height)&lt;2){this._HideSelection()}else{var g=this.bw(c.srcElement||c.target,&quot;TD&quot;);if((!g)||(!g.parentNode.idd)){g=this._endSelectionCell}while(g&amp;&amp;(!g.tagName||g.tagName.toLowerCase()!=&quot;td&quot;)){g=g.parentNode}if(!g){return this._HideSelection()}this._stopSelectionCell=g;this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell);this.callEvent(&quot;onBlockSelected&quot;,[])}document.body.onselectstart=function(){}};dhtmlXGridObject.prototype._RedrawSelectionPos=function(u,n){var r={};r.LeftTopCol=u._cellIndex;r.LeftTopRow=this.getRowIndex(u.parentNode.idd);r.RightBottomCol=n._cellIndex;r.RightBottomRow=this.getRowIndex(n.parentNode.idd);var h=u.offsetWidth;var g=u.offsetHeight;u=this.fI(u,this.obj);var v=n.offsetWidth;var o=n.offsetHeight;n=this.fI(n,this.obj);if(u[0]&lt;n[0]){var l=u[0];var m=n[0]+v}else{var q=r.RightBottomCol;r.RightBottomCol=r.LeftTopCol;r.LeftTopCol=q;var l=n[0];var m=u[0]+h}if(u[1]&lt;n[1]){var s=u[1];var a=n[1]+o}else{var q=r.RightBottomRow;r.RightBottomRow=r.LeftTopRow;r.LeftTopRow=q;var s=n[1];var a=u[1]+g}var w=m-l;var c=a-s;this._selectionObj.style.left=l+&quot;px&quot;;this._selectionObj.style.top=s+&quot;px&quot;;this._selectionObj.style.width=w+&quot;px&quot;;this._selectionObj.style.height=c+&quot;px&quot;;return r};dhtmlXGridObject.prototype._CreateSelection=function(a,g){if(this._selectionObj==null){var c=document.createElement(&quot;div&quot;);c.style.position=&quot;absolute&quot;;c.style.display=&quot;none&quot;;c.className=&quot;dhtmlxGrid_selection&quot;;this._selectionObj=c;this._selectionObj.onmousedown=function(h){h=h||event;if(h.button==2||(gP&amp;&amp;h.ctrlKey)){return this.parentNode.grid.callEvent(&quot;onBlockRightClick&quot;,[&quot;BLOCK&quot;,h])}};this._selectionObj.oncontextmenu=function(h){(h||event).cancelBubble=true;return false};this.HF.appendChild(this._selectionObj)}this._selectionObj.style.width=&quot;0px&quot;;this._selectionObj.style.height=&quot;0px&quot;;this._selectionObj.style.left=a+&quot;px&quot;;this._selectionObj.style.top=g+&quot;px&quot;;this._selectionObj.startX=a;this._selectionObj.startY=g};dhtmlXGridObject.prototype._ShowSelection=function(){if(this._selectionObj){this._selectionObj.style.display=&quot;&quot;}};dhtmlXGridObject.prototype._HideSelection=function(){if(this._selectionObj){this._selectionObj.style.display=&quot;none&quot;}this._selectionArea=null;this._clip_area.value=&quot;&quot;;this._clip_area.blur()};dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(this._selectionArea!=null){var g=new Array();if(this.oX){this.zt=&quot;getMathValue&quot;}else{if(this._strictText){this.zt=&quot;getTitle&quot;}else{this.zt=&quot;getValue&quot;}}this._serialize_visible=true;for(var a=this._selectionArea.LeftTopRow;a&lt;=this._selectionArea.RightBottomRow;a++){var c=this._serializeRowToCVS(this.aD[a],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);if(!this.Sz){g[g.length]=c.substr(c.indexOf(this.csv.cell)+1)}else{g[g.length]=c}}g=g.join(this._CSVRowDelimiter);this._clip_area.value=g;this._clip_area.select();this._serialize_visible=false}};dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){this._clip_area.select();var a=this;window.setTimeout(function(){a._pasteBlockFromClipboard();a=null},1)};dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var o=this._clip_area.value;if(this._selectionArea!=null){var w=this._selectionArea.LeftTopRow;var a=this._selectionArea.LeftTopCol}else{if(this.cell!=null&amp;&amp; !this.editor){var w=this.getRowIndex(this.cell.parentNode.idd);var a=this.cell._cellIndex}else{return false}}o=this.csvParser.unblock(o,this.csv.cell,this.csv.row);var q=w+o.length;var u=a+o[0].length;if(u&gt;this._cCount){u=this._cCount}var h=0;for(var r=w;r&lt;q;r++){var x=this.render_row(r);if(x== -1){continue}var g=0;for(var m=a;m&lt;u;m++){if(this._hrrar[m]){u=Math.max(u+1,this._cCount);continue}var s=this.cells3(x,m);if(s.isDisabled()){g++;continue}if(this._onEditUndoRedo){this._onEditUndoRedo(2,x.idd,m,o[h][g],s.getValue())}if(s.combo){var v=s.combo.values;for(var c=0;c&lt;v.length;c++){if(o[h][g]==v[c]){s.setValue(s.combo.kk[c]);v=null;break}}if(v!=null&amp;&amp;s.editable){s.setValue(o[h][g++])}else{g++}}else{s[s.hW?&quot;setLabel&quot;:&quot;setValue&quot;](o[h][g++])}s.cell.hy=true}this.callEvent(&quot;onRowPaste&quot;,[x.idd]);h++}};dhtmlXGridObject.prototype.getSelectedBlock=function(){if(this._selectionArea){return this._selectionArea}else{if(this.acg()!==null){return{LeftTopRow:this.acg(),LeftTopCol:this.iL(),RightBottomRow:this.acg(),RightBottomCol:this.iL()}}else{return null}}};dhtmlXGridObject.prototype.enableSmartRendering=function(g,c,a){if(arguments.length&gt;2){if(c&amp;&amp; !this.aD[c-1]){this.aD[c-1]=0}c=a}this.ahK=ap(g);this.ig=this.ig||20;this.Cr=c||0};dhtmlXGridObject.prototype.enablePreRendering=function(a){this._srnd_pr=parseInt(a||50)};dhtmlXGridObject.prototype.forceFullLoading=function(a,l){for(var g=0;g&lt;this.aD.length;g++){if(!this.aD[g]){var h=a||(this.aD.length-g);if(this.callEvent(&quot;onDynXLS&quot;,[g,h])){var c=this;this.load(this.tR+jv(this.tR)+&quot;posStart=&quot;+g+&quot;&amp;count=&quot;+h,function(){window.setTimeout(function(){c.forceFullLoading(a,l)},100)},this._data_type)}return}}if(l){l.call(this)}};dhtmlXGridObject.prototype.setAwaitedRowHeight=function(a){this.ig=parseInt(a)};dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.aL.offsetHeight)/this.ig)+2};dhtmlXGridObject.prototype._add_filler=function(n,a,c,h){if(!a){return null}var m=&quot;__filler__&quot;;var l=this.uO(m);l.firstChild.style.width=&quot;1px&quot;;for(var g=1;g&lt;l.childNodes.length;g++){l.childNodes[g].style.display=&quot;none&quot;}l.firstChild.style.height=a*this.ig+&quot;px&quot;;c=c||this.am[n];if(c&amp;&amp;c.nextSibling){c.parentNode.insertBefore(l,c.nextSibling)}else{if(cn){this.obj.appendChild(l)}else{this.obj.rows[0].parentNode.appendChild(l)}}this.callEvent(&quot;onAddFiller&quot;,[n,a,l,c,h]);return[n,a,l]};dhtmlXGridObject.prototype._update_srnd_view=function(){var m=Math.floor(this.HF.scrollTop/this.ig);var c=m+this._get_view_size();if(this.hu){var n=this.HF.scrollTop;m=0;while(n&gt;0){n-=this.am[m]?this.am[m].offsetHeight:this.ig;m++}c=m+this._get_view_size();if(m&gt;0){m--}}c+=(this._srnd_pr||0);if(c&gt;this.aD.length){c=this.aD.length}for(var h=m;h&lt;c;h++){if(!this.am[h]){var l=this._add_from_buffer(h);if(l== -1){if(this.tR){if(this.Cr&amp;&amp;this.aD[c-1]){var g=this.Cr?this.Cr:(c-h);var a=Math.max(0,c-this.Cr);this._current_load=[a,c-a]}else{this._current_load=[h,(this.Cr?this.Cr:(c-h))]}if(this.callEvent(&quot;onDynXLS&quot;,this._current_load)){this.load(this.tR+jv(this.tR)+&quot;posStart=&quot;+this._current_load[0]+&quot;&amp;count=&quot;+this._current_load[1],this._data_type)}}return}else{if(this._tgle){this._updateLine(this._h2.get[this.aD[h].idd],this.aD[h]);this._updateParentLine(this._h2.get[this.aD[h].idd],this.aD[h])}if(h&amp;&amp;h==(this.nh?this.aC:this)[&quot;_r_select&quot;]){this.eQ(h,this.cell?this.cell._cellIndex:0,true)}}}}if(this.aC&amp;&amp; !this.nh&amp;&amp;this.hu){this.aC.HF.scrollTop=this.HF.scrollTop}};dhtmlXGridObject.prototype._add_from_buffer=function(h){var l=this.render_row(h);if(l== -1){return-1}if(l._attrs.selected||l._attrs.select){this.Th(l,false,true);l._attrs.selected=l._attrs.select=null}if(!this.Cw){if(this.hC&amp;&amp;h%2==0){l.className=this.hC+((l.className.indexOf(&quot;rowselected&quot;)!= -1)?&quot; rowselected &quot;:&quot; &quot;)+(l.Vn||&quot;&quot;)}else{if(this.iI&amp;&amp;h%2==1){l.className=this.iI+((l.className.indexOf(&quot;rowselected&quot;)!= -1)?&quot; rowselected &quot;:&quot; &quot;)+(l.Vn||&quot;&quot;)}}}else{if(this._h2){var a=this._h2.get[l.idd];l.className+=&quot; &quot;+((a.gR%2)?(this.iI+&quot; &quot;+this.iI):(this.hC+&quot; &quot;+this.hC))+&quot;_&quot;+a.gR+(this.bj[a.id].Vn||&quot;&quot;)}}for(var c=0;c&lt;this._fillers.length;c++){var g=this._fillers[c];if(g&amp;&amp;g[0]&lt;=h&amp;&amp;(g[0]+g[1])&gt;h){var m=h-g[0];if(m==0){this._insert_before(h,l,g[2]);this._update_fillers(c,-1,1)}else{if(m==g[1]-1){this._insert_after(h,l,g[2]);this._update_fillers(c,-1,0)}else{this._fillers.push(this._add_filler(h+1,g[1]-m-1,g[2],1));this._insert_after(h,l,g[2]);this._update_fillers(c,-g[1]+m,0)}}return}}};dhtmlXGridObject.prototype._update_fillers=function(g,a,h){var c=this._fillers[g];c[1]=c[1]+a;c[0]=c[0]+h;if(!c[1]){this.callEvent(&quot;onRemoveFiller&quot;,[c[2]]);c[2].parentNode.removeChild(c[2]);this._fillers.splice(g,1)}else{c[2].firstChild.style.height=parseFloat(c[2].firstChild.style.height)+a*this.ig+&quot;px&quot;;this.callEvent(&quot;onUpdateFiller&quot;,[c[2]])}};dhtmlXGridObject.prototype._insert_before=function(c,g,a){a.parentNode.insertBefore(g,a);this.am[c]=g;this.callEvent(&quot;onRowInserted&quot;,[g,null,a,&quot;before&quot;])};dhtmlXGridObject.prototype._insert_after=function(c,g,a){if(a.nextSibling){a.parentNode.insertBefore(g,a.nextSibling)}else{a.parentNode.appendChild(g)}this.am[c]=g;this.callEvent(&quot;onRowInserted&quot;,[g,null,a,&quot;after&quot;])};dhtmlxValidation=function(){};dhtmlxValidation.prototype={trackInput:function(g,h,c,a){dhtmlxEvent(g,&quot;keyup&quot;,function(l){if(dhtmlxValidation._timer){window.clearTimeout(dhtmlxValidation._timer);dhtmlxValidation._timer=null}dhtmlxValidation._timer=window.setTimeout(function(){if(!dhtmlxValidation.checkInput(g,h)){if(!c||c(g,g.value,h)){g.className+=&quot; dhtmlx_live_validation_error&quot;}}else{g.className=g.className.replace(/[ ]*dhtmlx_live_validation_error/g,&quot;&quot;);if(a){a(g,g.value,h)}}},250)})},checkInput:function(a,c){return this.checkValue(a.value,c)},checkValue:function(g,h){if(typeof h==&quot;string&quot;){h=h.split(&quot;,&quot;)}var a=true;for(var c=0;c&lt;h.length;c++){if(!this[&quot;is&quot;+h[c]]){alert(&quot;Incorrect validation rule: &quot;+h[c])}else{a=a&amp;&amp;this[&quot;is&quot;+h[c]](g)}}return a},isEmpty:function(a){return a==&quot;&quot;},isNotEmpty:function(a){return!a==&quot;&quot;},isValidBoolean:function(a){return! !a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return! !a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(a){return! !a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return! !a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return! !a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(c){var a=c.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&amp;&amp; ! !(a[1]&lt;=9999&amp;&amp;a[2]&lt;=12&amp;&amp;a[3]&lt;=31&amp;&amp;a[4]&lt;=59&amp;&amp;a[5]&lt;=59&amp;&amp;a[6]&lt;=59)||false},isValidDate:function(a){var c=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return c&amp;&amp; ! !(c[1]&lt;=9999&amp;&amp;c[2]&lt;=12&amp;&amp;c[3]&lt;=31)||false},isValidTime:function(c){var a=c.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&amp;&amp; ! !(a[1]&lt;=24&amp;&amp;a[2]&lt;=59&amp;&amp;a[3]&lt;=59)||false},isValidIPv4:function(a){var c=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return c&amp;&amp; ! !(c[1]&lt;=255&amp;&amp;c[2]&lt;=255&amp;&amp;c[3]&lt;=255&amp;&amp;c[4]&lt;=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?[\.,\,]?\d+?\s?\$?$/)&amp;&amp;true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&amp;&amp;true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&amp;&amp;true||false}};dhtmlxValidation=new dhtmlxValidation();dhtmlXGridObject.prototype.enableValidation=function(c,a){c=ap(c);if(c){this._validators={data:[]}}else{this._validators=false}if(arguments.length&gt;1){this._validators._live=a}if(!this._validators._event){this._validators._event=this.attachEvent(&quot;onEditCell&quot;,this.validationEvent)}};dhtmlXGridObject.prototype.setColValidators=function(a){if(!this._validators){this.enableValidation(true)}if(typeof a==&quot;string&quot;){a=a.split(this.gX)}this._validators.data=a};dhtmlXGridObject.prototype.validationEvent=function(m,c,h,g,o){var q=this._validators;if(!q){return true}var n=(q.data[h]||this.cells(c,h).getAttribute(&quot;validate&quot;))||&quot;&quot;;if(m==1&amp;&amp;n){var l=this.editor||(this.aC||{}).editor;if(!l){return true}l.cell.className=l.cell.className.replace(/[ ]*dhtmlx_validation_error/g,&quot;&quot;);if(q._live){var a=this;dhtmlxValidation.trackInput(l.getInput(),n,function(r,s,u){return a.callEvent(&quot;onLiveValidationError&quot;,[c,h,s,r,u])},function(r,s,u){return a.callEvent(&quot;onLiveValidationCorrect&quot;,[c,h,s,r,u])})}}if(m==2){this.validateCell(c,h,n,g)}return true};dhtmlXGridObject.prototype.validateCell=function(n,l,m,h){m=m||(this._validators.data[l]||this.cells(n,l).getAttribute(&quot;validate&quot;));h=h||this.cells(n,l).getValue();if(!m){return}var c=this.cells(n,l).cell;var a=true;if(typeof m==&quot;string&quot;){m=m.split(this.gX)}for(var g=0;g&lt;m.length;g++){if(!dhtmlxValidation.checkValue(h,m[g])){if(this.callEvent(&quot;onValidationError&quot;,[n,l,h,m[g]])){c.className+=&quot; dhtmlx_validation_error&quot;}a=false}}if(a){this.callEvent(&quot;onValidationCorrect&quot;,[n,l,h,m]);c.className=c.className.replace(/[ ]*dhtmlx_validation_error/g,&quot;&quot;)}return a};function eXcell_stree(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_trees){return}this._sub=this.grid._sub_trees[a._cellIndex];if(!this._sub){return}this._sub=this._sub[0]}this.getValue=function(){return this.cell.AB};this.setValue=function(c){this.cell.AB=c;c=this._sub.getItemText(this.cell.AB);this.dq((c||&quot; &quot;),c)};this.edit=function(){this._sub.parentObject.style.display=&quot;block&quot;;var g=this.grid.fI(this.cell);this._sub.parentObject.style.top=g[1]+&quot;px&quot;;this._sub.parentObject.style.left=g[0]+&quot;px&quot;;this._sub.parentObject.style.position=&quot;absolute&quot;;var c=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=c};this.detach=function(){this._sub.parentObject.style.display=&quot;none&quot;;if(this.grid._sub_id!=null){var c=this.cell.AB;this.setValue(this._sub.ah());this.grid._sub_id=null;return this.cell.AB!=c}}}eXcell_stree.prototype=new gD;dhtmlXGridObject.prototype.setSubTree=function(a,c){if(!this._sub_trees){this._sub_trees=[]}this._sub_trees[c]=[a];a.parentObject.style.display=&quot;none&quot;;var g=this;a.parentObject.onclick=function(h){(h||window.event).cancelBubble=true;return false};a.ev_onDblClick=null;a.attachEvent(&quot;onDblClick&quot;,function(h){g._sub_id=h;g.editStop();return true});a.adC=true};function eXcell_link(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.isDisabled=function(){return true};this.edit=function(){};this.getValue=function(){if(this.cell.firstChild.getAttribute){var c=this.cell.firstChild.getAttribute(&quot;target&quot;);return this.cell.firstChild.innerHTML+&quot;^&quot;+this.cell.firstChild.getAttribute(&quot;href&quot;)+(c?(&quot;^&quot;+c):&quot;&quot;)}else{return &quot;&quot;}};this.setValue=function(g){if((typeof(g)!=&quot;number&quot;)&amp;&amp;(!g||g.toString().PA()==&quot;&quot;)){this.dq(&quot; &quot;,c);return(this.cell.mG=true)}var c=g.split(&quot;^&quot;);if(c.length==1){c[1]=&quot;&quot;}else{if(c.length&gt;1){c[1]=&quot;href='&quot;+c[1]+&quot;'&quot;;if(c.length==3){c[1]+=&quot; target='&quot;+c[2]+&quot;'&quot;}else{c[1]+=&quot; target='_blank'&quot;}}}this.dq(&quot;&lt;a &quot;+c[1]+&quot; onclick='(_isIE?event:arguments[0]).cancelBubble = true;'&gt;&quot;+c[0]+&quot;&lt;/a&gt;&quot;,c)}}eXcell_link.prototype=new gD;eXcell_link.prototype.getTitle=function(){var a=this.cell.firstChild;return((a&amp;&amp;a.tagName)?a.getAttribute(&quot;href&quot;):&quot;&quot;)};eXcell_link.prototype.getContent=function(){var a=this.cell.firstChild;return((a&amp;&amp;a.tagName)?a.innerHTML:&quot;&quot;)};function eXcell_grid(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_grids){return}this._sub=this.grid._sub_grids[a._cellIndex];if(!this._sub){return}this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return this.cell.val};this.setValue=function(c){this.cell.val=c;if(this._sub.dz(c)){c=this._sub.cells(c,this._sindex);if(c){c=c.getValue()}else{c=&quot;&quot;}}this.dq((c||&quot; &quot;),c)};this.edit=function(){this.val=this.cell.val;this._sub.aL.style.display=&quot;block&quot;;var g=this.grid.fI(this.cell);this._sub.aL.style.top=g[1]+&quot;px&quot;;this._sub.aL.style.left=g[0]+&quot;px&quot;;this._sub.aL.style.position=&quot;absolute&quot;;this._sub.setSizes();var c=this.grid.editStop;this.grid.editStop=function(){};if(this._sub.dz(this.cell.val)){this._sub.dX(this.cell.val)}this._sub.setActive(true);this.grid.editStop=c};this.detach=function(){var c=this.cell.val;this._sub.aL.style.display=&quot;none&quot;;if(this._sub.bI()===null){return false}this.setValue(this._sub.bI());this.grid.setActive(true);return this.cell.val!=c}}eXcell_grid.prototype=new gD;dhtmlXGridObject.prototype.setSubGrid=function(c,a,h){if(!this._sub_grids){this._sub_grids=[]}this._sub_grids[a]=[c,h];c.aL.style.display=&quot;none&quot;;var g=this;c.attachEvent(&quot;onRowSelect&quot;,function(l){g.editStop();return true});c.adC=false};function eXcell_dhxCalendar(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._grid_calendarA){var g=this.grid._grid_calendarA=new dhtmlxCalendarObject();this.grid.callEvent(&quot;onDhxCalendarCreated&quot;,[g]);var c=this.grid;g.attachEvent(&quot;onClick&quot;,function(){this._last_operation_calendar=true;window.setTimeout(function(){c.editStop()},1);return true});var h=function(l){(l||event).cancelBubble=true};dhtmlxEvent(g.base,&quot;click&quot;,h);g=null}}}eXcell_dhxCalendar.prototype=new gD;eXcell_dhxCalendar.prototype.edit=function(){var c=this.grid.fI(this.cell);this.grid._grid_calendarA._show(false,false);this.grid._grid_calendarA.Yy(c[0],c[1]+this.cell.offsetHeight);this.grid._grid_calendarA._last_operation_calendar=false;this.grid.callEvent(&quot;onCalendarShow&quot;,[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.cell._cediton=true;this.val=this.cell.val;this.AB=this.cell.innerHTML;var a=this.grid._grid_calendarA.zv;this.grid._grid_calendarA.zv=function(){};this.grid._grid_calendarA.setDateFormat((this.grid.RY||&quot;%d/%m/%Y&quot;));this.grid._grid_calendarA.setDate(this.val||(new Date()));this.grid._grid_calendarA.zv=a};eXcell_dhxCalendar.prototype.getDate=function(){if(this.cell.val){return this.cell.val}return null};eXcell_dhxCalendar.prototype.getValue=function(){if(this.cell.mG){return &quot;&quot;}if(this.grid._dtmask_inc&amp;&amp;this.cell.val){return this.grid._grid_calendarA.Ul(this.grid._dtmask_inc,this.cell.val).toString()}return this.cell.innerHTML.toString().PA()};eXcell_dhxCalendar.prototype.detach=function(){if(!this.grid._grid_calendarA){return}this.grid._grid_calendarA.hide();if(this.cell._cediton){this.cell._cediton=false}else{return}if(this.grid._grid_calendarA._last_operation_calendar){var g=this.grid._grid_calendarA.Ul((this.grid.RY||&quot;%d/%m/%Y&quot;));var c=this.grid._grid_calendarA.getDate();this.cell.val=new Date(c);this.dq(g,c);this.cell.mG= !g;var a=this.val;this.val=this.AB;return(this.cell.val.valueOf()!=a)}return false};eXcell_dhxCalendar.prototype.setValue=function(a){if(a&amp;&amp;typeof a==&quot;object&quot;){this.cell.val=a;this.cell.mG=false;this.dq(this.grid._grid_calendarA.Ul((this.grid.RY||&quot;%d/%m/%Y&quot;),a).toString(),this.cell.val);return}if(!a||a.toString().PA()==&quot;&quot;){a=&quot;&amp;nbsp&quot;;this.cell.mG=true;this.cell.val=&quot;&quot;}else{this.cell.mG=false;this.cell.val=new Date(this.grid._grid_calendarA.WK((this.grid._dtmask_inc||this.grid.RY||&quot;%d/%m/%Y&quot;),a.toString(),null,true));if(this.grid._dtmask_inc){a=this.grid._grid_calendarA.Ul((this.grid.RY||&quot;%d/%m/%Y&quot;),this.cell.val)}}if((this.cell.val==&quot;NaN&quot;)||(this.cell.val==&quot;Invalid Date&quot;)){this.cell.mG=true;this.cell.val=new Date();this.dq(&quot; &quot;,0)}else{this.dq((a||&quot;&quot;).toString(),this.cell.val)}};function eXcell_dhxCalendarA(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._grid_calendarA){var g=this.grid._grid_calendarA=new dhtmlxCalendarObject();this.grid.callEvent(&quot;onDhxCalendarCreated&quot;,[g]);var c=this.grid;g.attachEvent(&quot;onClick&quot;,function(){this._last_operation_calendar=true;window.setTimeout(function(){c.editStop()},1);return true});var h=function(l){(l||event).cancelBubble=true};dhtmlxEvent(g.base,&quot;click&quot;,h)}}}eXcell_dhxCalendarA.prototype=new gD;eXcell_dhxCalendarA.prototype.edit=function(){var c=this.grid.fI(this.cell);this.grid._grid_calendarA._show(false,false);this.grid._grid_calendarA.Yy(c[0]*1+this.cell.offsetWidth,c[1]*1);this.grid.callEvent(&quot;onCalendarShow&quot;,[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid._grid_calendarA._last_operation_calendar=false;this.cell._cediton=true;this.val=this.cell.val;this.AB=this.cell.innerHTML;var a=this.grid._grid_calendarA.zv;this.grid._grid_calendarA.zv=function(){};this.grid._grid_calendarA.setDateFormat((this.grid.RY||&quot;%d/%m/%Y&quot;));this.grid._grid_calendarA.setDate(this.val);this.grid._grid_calendarA.zv=a;this.cell.CZ=((!this.grid.hu)&amp;&amp;(cn||gP||aq))?&quot;INPUT&quot;:&quot;TEXTAREA&quot;;this.obj=document.createElement(this.cell.CZ);this.obj.style.height=(this.cell.offsetHeight-(_isIE?4:2))+&quot;px&quot;;this.obj.className=&quot;dhx_combo_edit&quot;;this.obj.wrap=&quot;soft&quot;;this.obj.style.textAlign=this.cell.align;this.obj.onclick=function(g){(g||event).cancelBubble=true};this.obj.onmousedown=function(g){(g||event).cancelBubble=true};this.obj.value=this.getValue();this.cell.innerHTML=&quot;&quot;;this.cell.appendChild(this.obj);if(aq){this.obj.style.overflow=&quot;visible&quot;;if((this.grid.hu)&amp;&amp;(this.obj.offsetHeight&gt;=18)&amp;&amp;(this.obj.offsetHeight&lt;40)){this.obj.style.height=&quot;36px&quot;;this.obj.style.overflow=&quot;scroll&quot;}}this.obj.onselectstart=function(g){if(!g){g=event}g.cancelBubble=true;return true};this.obj.focus();this.obj.focus()};eXcell_dhxCalendarA.prototype.getDate=function(){if(this.cell.val){return this.cell.val}return null};eXcell_dhxCalendarA.prototype.getValue=function(){if(this.cell.mG){return &quot;&quot;}if(this.grid._dtmask_inc&amp;&amp;this.cell.val){return this.grid._grid_calendarA.Ul(this.grid._dtmask_inc,this.cell.val).toString()}return this.cell.innerHTML.toString().PA()};eXcell_dhxCalendarA.prototype.detach=function(){if(!this.grid._grid_calendarA){return}this.grid._grid_calendarA.hide();if(this.cell._cediton){this.cell._cediton=false}else{return}if(this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=false;var g=this.grid._grid_calendarA.Ul(this.grid.RY||&quot;%d/%m/%Y&quot;);var c=this.grid._grid_calendarA.getDate();this.cell.val=new Date(c);this.dq(g,c);this.cell.mG= !g;var a=this.val;this.val=this.AB;return(this.cell.val.valueOf()!=(a|&quot;&quot;).valueOf())}this.setValue(this.obj.value);var a=this.val;this.val=this.AB;return(this.cell.val.valueOf()!=(a||&quot;&quot;).valueOf())};eXcell_dhxCalendarA.prototype.setValue=function(a){if(a&amp;&amp;typeof a==&quot;object&quot;){this.cell.val=a;this.cell.mG=false;this.dq(this.grid._grid_calendarA.Ul((this.grid.RY||&quot;%d/%m/%Y&quot;),a).toString(),this.cell.val);return}if(!a||a.toString().PA()==&quot;&quot;){a=&quot;&amp;nbsp&quot;;this.cell.mG=true;this.cell.val=&quot;&quot;}else{this.cell.mG=false;this.cell.val=new Date(this.grid._grid_calendarA.WK((this.grid._dtmask_inc||this.grid.RY||&quot;%d/%m/%Y&quot;),a.toString(),null,true));if(this.grid._dtmask_inc){a=this.grid._grid_calendarA.Ul((this.grid.RY||&quot;%d/%m/%Y&quot;),this.cell.val)}}if((this.cell.val==&quot;NaN&quot;)||(this.cell.val==&quot;Invalid Date&quot;)){this.cell.val=new Date();this.cell.mG=true;this.dq(&quot; &quot;,0)}else{this.dq((a||&quot;&quot;).toString(),this.cell.val)}};function eXcell_cntr(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._ex_cntr_ready&amp;&amp; !this.nh){this.grid._ex_cntr_ready=true;if(this.grid._h2){this.grid.attachEvent(&quot;onOpenEn&quot;,function(g){this.resetCounter(a._cellIndex)})}var c=function(){var g=this;window.setTimeout(function(){if(!g.resetCounter){return}if(g.aC&amp;&amp; !g.nh&amp;&amp;a._cellIndex&lt;g.aC._cCount){g.aC.resetCounter(a._cellIndex)}else{g.resetCounter(a._cellIndex)}},1);return true};this.grid.attachEvent(&quot;onBeforeSorting&quot;,c);this.grid.attachEvent(&quot;onFilterEnd&quot;,c)}this.edit=function(){};this.getValue=function(){return this.cell.innerHTML};this.setValue=function(h){this.cell.style.paddingRight=&quot;2px&quot;;var g=this.cell;window.setTimeout(function(){if(!g.parentNode){return}var l=g.parentNode.rowIndex;if(g.parentNode.grid.ew||l&lt;0||g.parentNode.grid.ahK){l=g.parentNode.grid.aD.bP(g.parentNode)+1}if(l&lt;=0){return}g.innerHTML=l;if(g.parentNode.grid.aC&amp;&amp;g._cellIndex&lt;g.parentNode.grid.aC._cCount&amp;&amp;g.parentNode.grid.aC.bj[g.parentNode.idd]){g.parentNode.grid.aC.cells(g.parentNode.idd,g._cellIndex).dq(l)}g=null},100)}}dhtmlXGridObject.prototype.resetCounter=function(c){if(this.aC&amp;&amp; !this.nh&amp;&amp;c&lt;this.aC._cCount){this.aC.resetCounter(c,this.ew)}var a=arguments[0]||0;if(this.ew){a=(this.ew-1)*this.cu}for(a=0;a&lt;this.aD.length;a++){if(this.aD[a]&amp;&amp;this.aD[a].tagName==&quot;TR&quot;&amp;&amp;this.bj[this.aD[a].idd]){this.bj[this.aD[a].idd].childNodes[c].innerHTML=a+1}}};eXcell_cntr.prototype=new gD;function eXcell_acheck(a){try{this.cell=a;this.grid=this.cell.parentNode.grid;this.cell.obj=this}catch(c){}this.changeState=function(){if((!this.grid.oB)||(this.cell.parentNode.FG)||(this.isDisabled())){return}if(this.grid.callEvent(&quot;onEditCell&quot;,[0,this.cell.parentNode.idd,this.cell._cellIndex])!=false){this.val=this.getValue();if(this.val==&quot;1&quot;){this.setValue(&quot;&lt;checkbox state='false'&gt;&quot;)}else{this.setValue(&quot;&lt;checkbox state='true'&gt;&quot;)}this.cell.hy=true;this.grid.callEvent(&quot;onEditCell&quot;,[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent(&quot;onCheck&quot;,[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!=&quot;1&quot;)]);this.grid.callEvent(&quot;onCheckbox&quot;,[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!=&quot;1&quot;)])}else{this.editor=null}};this.getValue=function(){try{return this.cell.chstate.toString()}catch(g){return null}};this.wI=function(){return true};this.isChecked=function(){if(this.getValue()==&quot;1&quot;){return true}else{return false}};this.Ou=function(g){this.setValue(g.toString())};this.detach=function(){return this.val!=this.getValue()};this.drawCurrentState=function(){if(this.cell.chstate==1){return &quot;<DIV style="cursor:pointer; font-weight:bold; text-align:center;"> Yes</DIV>&quot;}else{return &quot;<DIV style="cursor:pointer; text-align:center;"> No</DIV>&quot;}}}eXcell_acheck.prototype=new gD;eXcell_acheck.prototype.setValue=function(c){c=(c||&quot;&quot;).toString();if(c.indexOf(&quot;1&quot;)!= -1||c.indexOf(&quot;true&quot;)!= -1){c=&quot;1&quot;;this.cell.chstate=&quot;1&quot;}else{c=&quot;0&quot;;this.cell.chstate=&quot;0&quot;}var a=this;this.dq(this.drawCurrentState(),this.cell.chstate)};function eXcell_context(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_context){return}this._sub=this.grid._sub_context[a._cellIndex];if(!this._sub){return}this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(g){this.cell.AB=g;var c=this._sub.itemPull[this._sub.idPrefix+this.cell.AB];g=c?c.title:g;this.dq((g||&quot; &quot;),g)};this.edit=function(){var g=this.grid.fI(this.cell);this._sub.showContextMenu(g[0]+this.cell.offsetWidth,g[1]);var c=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=c};this.detach=function(){if(this.grid._sub_id!=null){var c=this.cell.AB;this.setValue(this.grid._sub_id);this.grid._sub_id=null;return this.cell.AB!=c}this._sub.hideContextMenu()}}eXcell_context.prototype=new gD;dhtmlXGridObject.prototype.setSubContext=function(a,c,h){var g=this;a.attachEvent(&quot;onClick&quot;,function(m,l){g._sub_id=m;g.editStop();a.hideContextMenu();return true});if(!this._sub_context){this._sub_context=[]}this._sub_context[c]=[a,h];a.hideContextMenu()};function dhtmlXGridFromTable(obj,init){if(typeof(obj)!=&quot;object&quot;){obj=document.getElementById(obj)}var w=document.createElement(&quot;DIV&quot;);w.setAttribute(&quot;width&quot;,obj.getAttribute(&quot;gridWidth&quot;)||(obj.offsetWidth?(obj.offsetWidth+&quot;px&quot;):0)||(window.getComputedStyle?window.getComputedStyle(obj,null)[&quot;width&quot;]:(obj.currentStyle?obj.currentStyle.width:0)));w.setAttribute(&quot;height&quot;,obj.getAttribute(&quot;gridHeight&quot;)||(obj.offsetHeight?(obj.offsetHeight+&quot;px&quot;):0)||(window.getComputedStyle?window.getComputedStyle(obj,null)[&quot;height&quot;]:(obj.currentStyle?obj.currentStyle.height:0)));w.className=obj.className;obj.className=&quot;&quot;;if(obj.id){w.id=obj.id}var mr=obj;var drag=obj.getAttribute(&quot;dragAndDrop&quot;);mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute(&quot;name&quot;)||(&quot;name_&quot;+(new Date()).valueOf());var windowf=new dhtmlXGridObject(w);window[f]=windowf;var Xn=mr.getAttribute(&quot;onbeforeinit&quot;);var acs2=mr.getAttribute(&quot;oninit&quot;);if(Xn){eval(Xn)}windowf.setImagePath(windowf.eg||(mr.getAttribute(&quot;imgpath&quot;)||mr.getAttribute(&quot;image_path&quot;)||&quot;&quot;));var skin=mr.getAttribute(&quot;skin&quot;);if(skin){windowf.setSkin(skin)}if(init){init(windowf)}var hrow=mr.rows[0];var za=&quot;&quot;;var zb=&quot;&quot;;var zc=&quot;&quot;;var zd=&quot;&quot;;var ze=&quot;&quot;;for(var i=0;i&lt;hrow.cells.length;i++){za+=(za?&quot;,&quot;:&quot;&quot;)+hrow.cells[i].innerHTML;var width=hrow.cells[i].getAttribute(&quot;width&quot;)||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null)[&quot;width&quot;]:(hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0));zb+=(zb?&quot;,&quot;:&quot;&quot;)+(width==&quot;*&quot;?width:parseInt(width));zc+=(zc?&quot;,&quot;:&quot;&quot;)+(hrow.cells[i].getAttribute(&quot;align&quot;)||&quot;left&quot;);zd+=(zd?&quot;,&quot;:&quot;&quot;)+(hrow.cells[i].getAttribute(&quot;type&quot;)||&quot;ed&quot;);ze+=(ze?&quot;,&quot;:&quot;&quot;)+(hrow.cells[i].getAttribute(&quot;sort&quot;)||&quot;str&quot;);var f_a=hrow.cells[i].getAttribute(&quot;format&quot;);if(f_a){if(hrow.cells[i].getAttribute(&quot;type&quot;).toLowerCase().indexOf(&quot;calendar&quot;)!= -1){windowf.RY=f_a}else{windowf.setNumberFormat(f_a,i)}}}windowf.setHeader(za);windowf.setInitWidths(zb);windowf.setColAlign(zc);windowf.setColTypes(zd);windowf.setColSorting(ze);if(obj.getAttribute(&quot;gridHeight&quot;)==&quot;auto&quot;){windowf.enableAutoHeigth(true)}if(obj.getAttribute(&quot;multiline&quot;)){windowf.enableMultiline(true)}var lmn=mr.getAttribute(&quot;lightnavigation&quot;);if(lmn){windowf.enableLightMouseNavigation(lmn)}var evr=mr.getAttribute(&quot;evenrow&quot;);var uevr=mr.getAttribute(&quot;unevenrow&quot;);if(evr||uevr){windowf.enableAlterCss(evr,uevr)}if(drag){windowf.enableDragAndDrop(true)}windowf.init();if(obj.getAttribute(&quot;split&quot;)){windowf.tT(obj.getAttribute(&quot;split&quot;))}windowf._process_inner_html(mr,1);if(acs2){eval(acs2)}if(obj.parentNode&amp;&amp;obj.parentNode.removeChild){obj.parentNode.removeChild(obj)}return windowf}dhtmlXGridObject.prototype._process_html=function(c){if(c.tagName&amp;&amp;c.tagName==&quot;TABLE&quot;){return this._process_inner_html(c,0)}var a=document.createElement(&quot;DIV&quot;);a.innerHTML=c.ai.responseText;var g=a.getElementsByTagName(&quot;TABLE&quot;)[0];this._process_inner_html(g,0)};dhtmlXGridObject.prototype._process_inner_html=function(g,l){var c=g.rows.length;for(var a=l;a&lt;c;a++){var h=g.rows[a].getAttribute(&quot;id&quot;)||a;this.aD.push({idd:h,data:g.rows[a],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset();this.setSizes()};dhtmlXGridObject.prototype._process_html_row=function(o,l){var n=l.getElementsByTagName(&quot;TD&quot;);var c=[];o._attrs=this._xml_attrs(l);for(var h=0;h&lt;n.length;h++){var m=n[h];var a=m.getAttribute(&quot;type&quot;);if(o.childNodes[h]){if(a){o.childNodes[h].zk=a}o.childNodes[h]._attrs=this._xml_attrs(n[h])}if(m.firstChild){c.push(m.innerHTML)}else{c.push(&quot;&quot;)}if(m.colSpan&gt;1){o.childNodes[h]._attrs.colspan=m.colSpan;for(var g=1;g&lt;m.colSpan;g++){c.push(&quot;&quot;)}}}for(h&lt;n.length;h&lt;o.childNodes.length;h++){o.childNodes[h]._attrs={}}this.VQ(o,(this._c_order?this.Xb(c):c));return o};dhtmlXGridObject.prototype._get_html_data=function(c,a){c=c.firstChild;while(true){if(!c){return &quot;&quot;}if(c.tagName==&quot;TD&quot;){a--}if(a&lt;0){break}c=c.nextSibling}return(c.firstChild?c.firstChild.data:&quot;&quot;)};dhtmlxEvent(window,&quot;load&quot;,function(){var g=document.getElementsByTagName(&quot;table&quot;);for(var c=0;c&lt;g.length;c++){if(g[c].className==&quot;dhtmlxGrid&quot;){dhtmlXGridFromTable(g[c])}}});dhtmlXGridObject.prototype._process_xmlA=function(a){if(!a.et){var g=new ag(function(){});if(typeof a==&quot;string&quot;){g.loadXMLString(a)}else{if(a.responseXML){g.ai=a}else{g.ai={}}g.ai.responseXML=a}a=g}this._parsing=true;var n=a.cR(this.xml.top);this.Ov(n);var m=a.et(this.xml.row,n);var l=parseInt(a.et(&quot;//&quot;+this.xml.top)[0].getAttribute(&quot;pos&quot;)||0);var h=parseInt(a.et(&quot;//&quot;+this.xml.top)[0].getAttribute(&quot;total_count&quot;)||0);if(h&amp;&amp; !this.aD[h-1]){this.aD[h-1]=null}if(this.gY()){this._get_xml_data=this._get_xml_dataA;this._process_xml_row=this._process_xml_rowA;return this._process_tree_xml(a)}for(var c=0;c&lt;m.length;c++){if(this.aD[c+l]){continue}var o=m[c].getAttribute(&quot;id&quot;)||this.uid();this.aD[c+l]={idd:o,data:m[c],_parser:this._process_xml_rowA,_locator:this._get_xml_dataA};this.bj[o]=m[c]}this.render_dataset();this._parsing=false;return a.ai.responseXML?a.ai.responseXML:a.ai};dhtmlXGridObject.prototype._process_xmlB=function(a){if(!a.et){var g=new ag(function(){});if(typeof a==&quot;string&quot;){g.loadXMLString(a)}else{if(a.responseXML){g.ai=a}else{g.ai={}}g.ai.responseXML=a}a=g}this._parsing=true;var n=a.cR(this.xml.top);this.Ov(n);var m=a.et(this.xml.row,n);var l=parseInt(a.et(&quot;//&quot;+this.xml.top)[0].getAttribute(&quot;pos&quot;)||0);var h=parseInt(a.et(&quot;//&quot;+this.xml.top)[0].getAttribute(&quot;total_count&quot;)||0);if(h&amp;&amp; !this.aD[h-1]){this.aD[h-1]=null}if(this.gY()){this._get_xml_data=this._get_xml_dataB;this._process_xml_row=this._process_xml_rowB;return this._process_tree_xml(a)}for(var c=0;c&lt;m.length;c++){if(this.aD[c+l]){continue}var o=m[c].getAttribute(&quot;id&quot;)||this.uid();this.aD[c+l]={idd:o,data:m[c],_parser:this._process_xml_rowB,_locator:this._get_xml_dataB};this.bj[o]=m[c]}this.render_dataset();this._parsing=false;return a.ai.responseXML?a.ai.responseXML:a.ai};dhtmlXGridObject.prototype._process_xml_rowA=function(l,g){var a=[];l._attrs=this._xml_attrs(g);for(var c=0;c&lt;this.columnIds.length;c++){var m=this.columnIds[c];var h=l._attrs[m]||&quot;&quot;;if(l.childNodes[c]){l.childNodes[c]._attrs={}}a.push(h)}this.VQ(l,(this._c_order?this.Xb(a):a));return l};dhtmlXGridObject.prototype._get_xml_dataA=function(c,a){return c.getAttribute(this.getColumnId(a))};dhtmlXGridObject.prototype._process_xml_rowB=function(a,l){var o=[];a._attrs=this._xml_attrs(l);if(this._ud_enabled){var q=this.bA.et(&quot;./userdata&quot;,l);for(var g=q.length-1;g&gt;=0;g--){this.setUserData(q[g].getAttribute(&quot;name&quot;),q[g].firstChild?q[g].firstChild.data:&quot;&quot;)}}for(var n=0;n&lt;l.childNodes.length;n++){var h=l.childNodes[n];if(!h.tagName){continue}var c=this.getColIndexById(h.tagName);if(isNaN(c)){continue}var m=h.getAttribute(&quot;type&quot;);if(m){a.childNodes[c].zk=m}a.childNodes[c]._attrs=this._xml_attrs(h);if(h.getAttribute(&quot;xmlcontent&quot;)){}else{if(h.firstChild){h=h.firstChild.data}else{h=&quot;&quot;}}o[c]=h}for(var g=0;g&lt;a.childNodes.length;g++){if(!a.childNodes[g]._attrs){a.childNodes[g]._attrs={}}}this.VQ(a,(this._c_order?this.Xb(o):o));return a};dhtmlXGridObject.prototype._get_xml_dataB=function(c,a){var g=this.getColumnId(a);c=c.firstChild;while(true){if(!c){return &quot;&quot;}if(c.tagName==g){return(c.firstChild?c.firstChild.data:&quot;&quot;)}c=c.nextSibling}return &quot;&quot;};dhtmlXGridObject.prototype.startFastOperations=function(){this._disF=[&quot;setSizes&quot;,&quot;callEvent&quot;,&quot;_fixAlterCss&quot;,&quot;cells4&quot;,&quot;forEachRow&quot;,&quot;_correctMonolite&quot;];this._disA=[];for(var a=this._disF.length-1;a&gt;=0;a--){this._disA[a]=this[this._disF[a]];this[this._disF[a]]=function(){return true}}this._cellCache=[];this.cells4=function(g){var h=this._cellCache[g._cellIndex];if(!h){h=this._cellCache[g._cellIndex]=this._disA[3].apply(this,[g]);h.fA=function(){return true};h.dq=function(c){h.cell.innerHTML=c}}h.cell=g;h.combo=g._combo||this.combos[g._cellIndex];return h}};dhtmlXGridObject.prototype.stopFastOperations=function(){if(!this._disF){return}for(var a=this._disF.length-1;a&gt;=0;a--){this[this._disF[a]]=this._disA[a]}if(this._correctMonolite){this._correctMonolite()}this.setSizes();this.callEvent(&quot;onGridReconstructed&quot;,[])};dhtmlXGridObject.prototype._in_header_number_filter=function(g,c){this._in_header_text_filter.call(this,g,c);var a=this;g.firstChild._filter=function(){var h=a._get_filters(this.value,&quot;num&quot;);return function(n){var l=h.length&gt;0?false:true;for(var m=0;m&lt;h.length;m++){l=l||h[m](n)}return l}}};dhtmlXGridObject.prototype._in_header_string_filter=function(g,c){this._in_header_text_filter.call(this,g,c);var a=this;g.firstChild._filter=function(){var h=a._get_filters(this.value,&quot;str&quot;);return function(n){var l=h.length&gt;0?false:true;for(var m=0;m&lt;h.length;m++){l=l||h[m](n)}return l}}};dhtmlXGridObject.prototype._get_filters=function(m,g){var a=m.split(&quot;,&quot;);var h=[];for(var c=0;c&lt;a.length;c++){if(a[c]==&quot;&quot;){continue}var l=this[&quot;_get_&quot;+g+&quot;_filter&quot;](a[c]);h.push(l)}return h};dhtmlXGridObject.prototype._get_str_filter=function(c){if(c==&quot;null&quot;||c==&quot;empty&quot;){return new Function(&quot;value&quot;,'if (value == null || value == &quot;&quot;) return true; return false;')}if(c==&quot;!null&quot;||c==&quot;!empty&quot;){return new Function(&quot;value&quot;,'if (value == null || value == &quot;&quot;) return false; return true;')}if(c.substr(0,1)===&quot;!&quot;){var a=c.substr(1);return new Function(&quot;value&quot;,'if (value !== &quot;'+a+'&quot;) return true; return false;')}if(c.substr(0,1)===&quot;~&quot;){var a=c.substr(1);return new Function(&quot;value&quot;,'if (value.indexOf(&quot;'+a+'&quot;) !== -1) return true; return false;')}if(c.substr(0,1)===&quot;^&quot;&amp;&amp;c.substr(c.length-1,1)===&quot;&amp;&quot;){c=&quot;=&quot;+c.substr(1,c.length-2)}if(c.substr(0,1)===&quot;^&quot;){var a=c.substr(1);return new Function(&quot;value&quot;,&quot;if (value.substr(0, &quot;+a.length+') === &quot;'+a+'&quot;) return true; return false;')}if(c.substr(c.length-1,1)===&quot;&amp;&quot;){var a=c.substr(0,c.length-1);return new Function(&quot;value&quot;,&quot;if (value.substr(value.length - &quot;+a.length+') === &quot;'+a+'&quot;) return true; return false;')}if(c.substr(0,1)===&quot;=&quot;){var a=c.substr(1)}else{var a=c}return new Function(&quot;value&quot;,'if (value === &quot;'+a+'&quot;) return true; return false;')};dhtmlXGridObject.prototype._get_num_filter=function(l){if(l==&quot;null&quot;||l==&quot;empty&quot;){return new Function(&quot;value&quot;,'if (value == null || value == &quot;&quot;) return true; return false;')}if(l==&quot;!null&quot;||l==&quot;!empty&quot;){return new Function(&quot;value&quot;,'if (value == null || value == &quot;&quot;) return false; return true;')}var a=l.split(&quot;..&quot;);if(a.length==2){var m=parseFloat(a[0]);var h=parseFloat(a[1]);return new Function(&quot;value&quot;,&quot;if (value &gt;= &quot;+m+&quot; &amp;&amp; value &lt;= &quot;+h+&quot;) return true; return false;&quot;)}var g=l.match(/&lt;&gt;|&gt;=|&lt;=|&gt;|&lt;|=/);if(g){var n=g[0];var c=parseFloat(l.replace(n,&quot;&quot;))}else{var n=&quot;==&quot;;c=parseFloat(l)}if(n==&quot;&lt;&gt;&quot;){n=&quot;!=&quot;}if(n==&quot;=&quot;){n=&quot;==&quot;}return new Function(&quot;value&quot;,&quot; if (value &quot;+n+&quot; &quot;+c+&quot; ) return true; return false;&quot;)};dhtmlXGridObject.prototype.attachHeaderA=dhtmlXGridObject.prototype.attachHeader;dhtmlXGridObject.prototype.attachHeader=function(){this.attachHeaderA.apply(this,arguments);if(this.nh){return true}this.formAutoSubmit();if(typeof(this.FormSubmitOnlyChanged)==&quot;undefined&quot;){this.submitOnlyChanged(true)}if(typeof(this._submitAR)==&quot;undefined&quot;){this.submitAddedRows(true)}var a=this;this._added_rows=[];this._deleted_rows=[];this.attachEvent(&quot;onRowAdded&quot;,function(c){a._added_rows.push(c);a.amz(c,function(g){g.cell.hy=true});return true});this.attachEvent(&quot;onBeforeRowDeleted&quot;,function(c){a._deleted_rows.push(c);return true});this.attachHeader=this.attachHeaderA};dhtmlXGridObject.prototype.formAutoSubmit=function(){this.qs=this.detectParentFormPresent();if(this.qs===false){return false}if(this.formEventAttached){return}this.vn=new Array();var a=this;dhtmlxEvent(this.qs,&quot;submit&quot;,function(){if(a.aL){a.parentFormOnSubmit()}});this.formEventAttached=true};dhtmlXGridObject.prototype.parentFormOnSubmit=function(){this.formCreateInputCollection();if(!this.callEvent(&quot;onBeforeFormSubmit&quot;,[])){return false}};dhtmlXGridObject.prototype.submitOnlyChanged=function(a){this.FormSubmitOnlyChanged=ap(a)};dhtmlXGridObject.prototype.submitColumns=function(a){if(typeof a==&quot;string&quot;){a=a.split(this.gX)}this._submit_cols=a};dhtmlXGridObject.prototype.setFieldName=function(a){a=a.replace(/\{GRID_ID\}/g,&quot;'+a1+'&quot;);a=a.replace(/\{ROW_ID\}/g,&quot;'+a2+'&quot;);a=a.replace(/\{ROW_INDEX\}/g,&quot;'+this.getRowIndex(a2)+'&quot;);a=a.replace(/\{COLUMN_INDEX\}/g,&quot;'+a3+'&quot;);a=a.replace(/\{COLUMN_ID\}/g,&quot;'+this.getColumnId(a3)+'&quot;);this._input_mask=Function(&quot;a1&quot;,&quot;a2&quot;,&quot;a3&quot;,&quot;return '&quot;+a+&quot;';&quot;)};dhtmlXGridObject.prototype.submitSerialization=function(a){this.FormSubmitSerialization=ap(a)};dhtmlXGridObject.prototype.submitAddedRows=function(a){this._submitAR=ap(a)};dhtmlXGridObject.prototype.submitOnlySelected=function(a){this.FormSubmitOnlySelected=ap(a)};dhtmlXGridObject.prototype.submitOnlyRowID=function(a){this.FormSubmitOnlyRowID=ap(a)};dhtmlXGridObject.prototype.createFormInput=function(c,g){var a=document.createElement(&quot;input&quot;);a.type=&quot;hidden&quot;;if(this._input_mask&amp;&amp;(typeof c!=&quot;string&quot;)){a.name=this._input_mask.apply(this,c)}else{a.name=((this.globalBox||this.aL).id||&quot;dhtmlXGrid&quot;)+&quot;_&quot;+c}a.value=g;this.qs.appendChild(a);this.vn.push(a)};dhtmlXGridObject.prototype.createFormInputRow=function(g){var h=(this.globalBox||this.aL).id;for(var c=0;c&lt;this._cCount;c++){var a=this.cells3(g,c);if(((!this.FormSubmitOnlyChanged)||a.hy())&amp;&amp;(!this._submit_cols||this._submit_cols[c])){this.createFormInput(this._input_mask?[h,g.idd,c]:(g.idd+&quot;_&quot;+c),a.getValue())}}};dhtmlXGridObject.prototype.formCreateInputCollection=function(){if(this.qs==false){return false}for(var a=0;a&lt;this.vn.length;a++){this.qs.removeChild(this.vn[a])}this.vn=new Array();if(this.FormSubmitSerialization){this.createFormInput(&quot;serialized&quot;,this.serialize())}else{if(this.FormSubmitOnlySelected){if(this.FormSubmitOnlyRowID){this.createFormInput(&quot;selected&quot;,this.bI())}else{for(var a=0;a&lt;this.bY.length;a++){this.createFormInputRow(this.bY[a])}}}else{if(this._submitAR){if(this._added_rows.length){this.createFormInput(&quot;rowsadded&quot;,this._added_rows.join(&quot;,&quot;))}if(this._deleted_rows.length){this.createFormInput(&quot;rowsdeleted&quot;,this._deleted_rows.join(&quot;,&quot;))}}this.forEachRow(function(c){this.dz(c);this.createFormInputRow(this.bj[c])})}}};dhtmlXGridObject.prototype.detectParentFormPresent=function(){var a=false;var c=this.aL;while(c&amp;&amp;c.tagName&amp;&amp;c!=document.body){if(c.tagName.toLowerCase()==&quot;form&quot;){a=c;break}else{c=c.parentNode}}return a};dhtmlXGridObject.prototype.unGroup=function(){if(!this.pj){return}this._dndProblematic=false;delete this.pj;delete this._gIndex;if(this.aC){this._mirror_rowsCol()}this.forEachRow(function(a){this.bj[a].style.display=&quot;&quot;});this._reset_view();this.callEvent(&quot;onGridReconstructed&quot;,[]);this.callEvent(&quot;onUnGroup&quot;,[])};dhtmlXGridObject.prototype._mirror_rowsCol=function(){this.aC.pj=this.pj;this.aC._gIndex=this._gIndex;this.aD=dhtmlxArray();for(var a=0;a&lt;this.am.length;a++){if(!this.am[a].te){this.aD.push(this.am[a])}}this.aC.aD=dhtmlxArray();for(var a=0;a&lt;this.aC.am.length;a++){if(!this.aC.am[a].te){this.aC.aD.push(this.aC.am[a])}}};dhtmlXGridObject.prototype.groupBy=function(n,h){if(this.pj){this.unGroup()}this._dndProblematic=true;this.pj={};if(!h){h=[&quot;#title&quot;];for(var l=1;l&lt;this._cCount;l++){h.push(&quot;#cspan&quot;)}}this._gmask=document.createElement(&quot;TR&quot;);this._gmask.origin=h;var m,g=0;for(var l=0;l&lt;h.length;l++){if(h[l]==&quot;#cspan&quot;){m.colSpan=(parseInt(m.colSpan)||1)+1}else{m=document.createElement(&quot;TD&quot;);m._cellIndex=l;if(this._hrrar[l]){m.style.display=&quot;none&quot;}m.className=&quot;group_row&quot;;m.innerHTML=&quot; &quot;;if(h[l]==&quot;#title&quot;){this._gmask.ahi=g}else{m.align=this.cellAlign[l]||&quot;left&quot;}this._gmask.appendChild(m);if(h[l].indexOf(&quot;#stat&quot;)==0){this._gmask._math=true;m._counter=[this[&quot;_g_&quot;+h[l].replace(&quot;#&quot;,&quot;&quot;)],l,g]}g++}}for(var c in this.pj){this.pj[c]=this.undefined}this._gIndex=n;if(this.aC&amp;&amp; !this.nh){this.aC.pj=[];this.aC._gIndex=this._gIndex}this.CE=function(q,a){var o=this.am[q+a];if(o&amp;&amp;(o.style.display==&quot;none&quot;||o.te)){return this.CE(q+a,a)}return o};if(!this.__sortRowsBG){this.zf=dhtmlXHeir({},this.zf);this.zf.k38_0_0=function(){if(this.editor&amp;&amp;this.editor.combo){this.editor.Kc()}else{var a=this.row.rowIndex;if(!a){return}var o=this.CE(a-1,-1);if(o){this.eQ(o,this.cell._cellIndex,true)}}};this.zf.k13_1_0=this.zf.k13_0_1=function(){};this.zf.k40_0_0=function(){if(this.editor&amp;&amp;this.editor.combo){this.editor.ar()}else{var a=this.row.rowIndex;if(!a){return}var o=this.CE(a-1,1);if(o){this.eQ(o,this.cell._cellIndex,true)}}};this.attachEvent(&quot;onFilterStart&quot;,function(){if(this.pj){this.pj=this.undefined}return true});this.attachEvent(&quot;onFilterEnd&quot;,function(){if(typeof this._gIndex!=&quot;undefined&quot;){this.groupBy(this._gIndex,this._gmask.origin)}});this.sortRows_bg=this.xK;this.xK=function(q,o,a){if(typeof(this.pj)==&quot;undefined&quot;){return this.sortRows_bg.apply(this,arguments)}this.callEvent(&quot;onBeforeSorting&quot;,[q,(o||&quot;str&quot;),(a||&quot;asc&quot;)])};this.attachEvent(&quot;onBeforeSorting&quot;,function(q,o,a){if(typeof(this.pj)==&quot;undefined&quot;){return true}if(q==this._gIndex){this._sortByGroup(q,o,a)}else{this._sortInGroup(q,o,a)}this.co(true,q,a);if(this.aC){this._mirror_rowsCol();this.aC.pj=[];this.aC._reset_view()}this.co(true,q,a);this.callEvent(&quot;onAfterSorting&quot;,[q,o,a]);return false});this.attachEvent(&quot;onClearAll&quot;,function(){this.unGroup()});this.attachEvent(&quot;onBeforeRowDeleted&quot;,function(q){if(!this.pj){return true}if(!this.bj[q]){return true}var o=this.cells(q,this._gIndex).getValue();if(o===&quot;&quot;){o=&quot; &quot;}var a=this.pj[o];this._dec_group(a);return true});this.attachEvent(&quot;onAfterRowDeleted&quot;,function(a){this.updateGroups()});this.attachEvent(&quot;onCheckbox&quot;,function(q,a,o){this.callEvent(&quot;onEditCell&quot;,[2,q,a,(o?1:0),(o?0:1)])});this.attachEvent(&quot;onXLE&quot;,this.updateGroups);this.attachEvent(&quot;onColumnHidden&quot;,this.hideGroupColumn);this.attachEvent(&quot;onEditCell&quot;,function(C,s,y,x,D){if(!this.pj){return true}if(C==2&amp;&amp;x!=D&amp;&amp;y==this._gIndex){if(D===&quot;&quot;){D=&quot; &quot;}this._dec_group(this.pj[D]);var a=this.bj[s];var A=this.am.bP(a);var v=this._inc_group(x);var w=this.am[v];if(a==w){w=w.nextSibling}var q=a.parentNode;var u=a.rowIndex;q.removeChild(a);if(w){q.insertBefore(a,w)}else{q.appendChild(a)}this.am.ml(v,a);if(v&lt;A){A++}this.am.aa(A,a);this._fixAlterCss()}else{if(C==2&amp;&amp;x!=D){this.updateGroups();this._updateGroupView(this.pj[this.cells(s,this._gIndex).getValue()||&quot; &quot;])}}return true});this.__sortRowsBG=true}this._groupExisting();if(this._hrrar){for(var l=0;l&lt;this._hrrar.length;l++){if(this._hrrar[l]){this.hideGroupColumn(l,true)}}}this.callEvent(&quot;onGroup&quot;,[]);if(this.abK||this.Gd){this.setSizes()}};dhtmlXGridObject.prototype._sortInGroup=function(g,o,h){var q=this._groups_get();q.reverse();for(var m=0;m&lt;q.length;m++){var n=q[m].te._childs;var r={};for(var l=0;l&lt;n.length;l++){var s=this.cells3(n[l],g);r[n[l].idd]=s.getDate?s.getDate():s.getValue()}this.aeo(g,o,h,r,n)}this._groups_put(q);this.setSizes();this.callEvent(&quot;onGridReconstructed&quot;,[])};dhtmlXGridObject.prototype._sortByGroup=function(l,n,g){var c=this._groups_get();var h=[];for(var m=0;m&lt;c.length;m++){c[m].idd=&quot;_sort_&quot;+m;h[&quot;_sort_&quot;+m]=c[m].te.text}this.aeo(l,n,g,h,c);this._groups_put(c);this.callEvent(&quot;onGridReconstructed&quot;,[]);this.setSizes()};dhtmlXGridObject.prototype._inc_group=function(l,g,a){if(l===&quot;&quot;){l=&quot; &quot;}if(!this.pj[l]){this.pj[l]={text:l,row:this._addPseudoRow(),count:0,state:g?&quot;plus&quot;:&quot;minus&quot;}}var h=this.pj[l];h.row.te=h;var c=this.am.bP(h.row)+h.count+1;h.count++;if(!a){this._updateGroupView(h);this.updateGroups()}return c};dhtmlXGridObject.prototype._dec_group=function(a){if(!a){return}a.count--;if(a.count==0){a.row.parentNode.removeChild(a.row);this.am.aa(this.am.bP(a.row));delete this.pj[a.text]}else{this._updateGroupView(a)}if(this.aC&amp;&amp; !this.nh){this.aC._dec_group(this.aC.pj[a.text])}this.updateGroups();return true};dhtmlXGridObject.prototype._insertRowAt_gA=dhtmlXGridObject.prototype._insertRowAt;dhtmlXGridObject.prototype._insertRowAt=function(g,h,c){if(typeof(this.pj)!=&quot;undefined&quot;){if(this.nh){var l=this.aC._bfs_cells(g.idd,this._gIndex).getValue()}else{if(this._bfs_cells3){var l=this._bfs_cells3(g,this._gIndex).getValue()}else{var l=this.cells3(g,this._gIndex).getValue()}}if(!l){l=&quot; &quot;}h=this._inc_group(l,g.style.display==&quot;none&quot;)}var a=this._insertRowAt_gA(g,h,c);if(typeof(this.pj)!=&quot;undefined&quot;){this.expandGroup(l);this._updateGroupView(this.pj[l]);this.updateGroups()}return a};dhtmlXGridObject.prototype._updateGroupView=function(g){if(this.aC&amp;&amp; !this.nh){return g.row.firstChild.innerHTML=&quot; &quot;}var a=this._gmask||this.aC._gmask;var c=&quot;&lt;img style='margin-bottom:-4px' src='&quot;+this.eg+g.state+&quot;.gif'&gt; &quot;;if(this.customGroupFormat){c+=this.customGroupFormat(g.text,g.count)}else{c+=g.text+&quot; ( &quot;+g.count+&quot; ) &quot;}g.row.childNodes[a.ahi].innerHTML=c};dhtmlXGridObject.prototype._addPseudoRow=function(l){var a=this._gmask||this.aC._gmask;var h=a.cloneNode(true);for(var c=0;c&lt;h.childNodes.length;c++){h.childNodes[c]._cellIndex=a.childNodes[c]._cellIndex;if(this.nh){h.childNodes[c].style.display=&quot;&quot;}}var g=this;h.onclick=function(m){if(!g.callEvent(&quot;onGroupClick&quot;,[this.te.text])){return}if(g.aC&amp;&amp;g.nh){g.aC._switchGroupState(g.aC.pj[this.te.text].row)}else{g._switchGroupState(this)}(m||event).cancelBubble=&quot;true&quot;};h.ondblclick=function(m){(m||event).cancelBubble=&quot;true&quot;};if(!l){if(cn){this.obj.appendChild(h)}else{this.obj.firstChild.appendChild(h)}this.am.push(h)}return h};dhtmlXGridObject.prototype._groups_get=function(){var c=[];this._temp_par=this.obj.parentNode;this._temp_par.removeChild(this.obj);var g=[];for(var h=this.am.length-1;h&gt;=0;h--){if(this.am[h].te){this.am[h].te._childs=g;g=[];c.push(this.am[h])}else{g.push(this.am[h])}this.am[h].parentNode.removeChild(this.am[h])}return c};dhtmlXGridObject.prototype._groups_put=function(a){var l=this.am.stablesort;this.am=new dhtmlxArray(0);this.am.stablesort=l;for(var h=0;h&lt;a.length;h++){var g=a[h].te;this.obj.firstChild.appendChild(g.row);this.am.push(g.row);g.row.idd=null;for(var c=0;c&lt;g._childs.length;c++){this.obj.firstChild.appendChild(g._childs[c]);this.am.push(g._childs[c])}delete g._childs}this._temp_par.appendChild(this.obj)};dhtmlXGridObject.prototype._groupExisting=function(c){if(!this.iD()){return}var c=[];this._temp_par=this.obj.parentNode;this._temp_par.removeChild(this.obj);var g=[];var h=this.am.length;for(var l=0;l&lt;h;l++){var n=this.cells4(this.am[l].childNodes[this._gIndex]).getValue();this.am[l].style.display=&quot;&quot;;if(!n){n=&quot; &quot;}if(!this.pj[n]){this.pj[n]={text:n,row:this._addPseudoRow(true),count:0,state:&quot;minus&quot;};var m=this.pj[n];m.row.te=m;this.pj[n]._childs=[];c.push(m.row)}this.pj[n].count++;this.pj[n]._childs.push(this.am[l]);this.am[l].parentNode.removeChild(this.am[l])}for(var l=0;l&lt;c.length;l++){this._updateGroupView(c[l].te)}this._groups_put(c);if(this.aC&amp;&amp; !this.nh){this._mirror_rowsCol();this.aC.pj=[];this.aC._reset_view()}this.callEvent(&quot;onGridReconstructed&quot;,[]);this.updateGroups()};dhtmlXGridObject.prototype._switchGroupState=function(h){var g=h.te;if(this.aC&amp;&amp; !this.nh){g.state=this.aC.pj[h.te.text].row.te.state;this.aC._switchGroupState(this.aC.pj[h.te.text].row)}var c=this.am.bP(g.row)+1;g.state=g.state==&quot;minus&quot;?&quot;plus&quot;:&quot;minus&quot;;var a=g.state==&quot;plus&quot;?&quot;none&quot;:&quot;&quot;;while(this.am[c]&amp;&amp; !this.am[c].te){this.am[c].style.display=a;c++}this._updateGroupView(g);this.callEvent(&quot;onGroupStateChanged&quot;,[g.text,(g.state==&quot;minus&quot;)]);this.setSizes()};dhtmlXGridObject.prototype.expandGroup=function(a){if(this.pj[a].state==&quot;plus&quot;){this._switchGroupState(this.pj[a].row)}};dhtmlXGridObject.prototype.collapseGroup=function(a){if(this.pj[a].state==&quot;minus&quot;){this._switchGroupState(this.pj[a].row)}};dhtmlXGridObject.prototype.expandAllGroups=function(){for(var a in this.pj){if(this.pj[a]&amp;&amp;this.pj[a].state==&quot;plus&quot;){this._switchGroupState(this.pj[a].row)}}};dhtmlXGridObject.prototype.collapseAllGroups=function(){for(var a in this.pj){if(this.pj[a]&amp;&amp;this.pj[a].state==&quot;minus&quot;){this._switchGroupState(this.pj[a].row)}}};dhtmlXGridObject.prototype.hideGroupColumn=function(m,l){if(this.aC){return}var h= -1;var n=this._gmask.childNodes;for(var g=0;g&lt;n.length;g++){if(n[g]._cellIndex==m){h=g;break}}if(h== -1){return}for(var c in this.pj){this.pj[c].row.childNodes[h].style.display=l?&quot;none&quot;:&quot;&quot;}};dhtmlXGridObject.prototype.groupStat=function(c,h,g){g=this[&quot;_g_&quot;+(g||&quot;stat_total&quot;)];var l=0;var a=0;this.forEachRowInGroup(c,function(m){l=g(l,this.cells(m,h).getValue()*1,a);a++});return l};dhtmlXGridObject.prototype.forEachRowInGroup=function(a,h){var l=this.pj[a].row.nextSibling;if(l){while(l&amp;&amp; !l.te){h.call(this,l.idd);l=l.nextSibling}}else{var g=this.pj[a]._childs;if(g){for(var c=0;c&lt;g.length;c++){h.call(this,g[c].idd)}}}};dhtmlXGridObject.prototype.updateGroups=function(){if(!this._gmask|| !this._gmask._math||this._parsing){return}var c=this._gmask.childNodes;for(var a=0;a&lt;c.length;a++){if(c[a]._counter){this._b_processing.apply(this,c[a]._counter)}}};dhtmlXGridObject.prototype._b_processing=function(g,n,m){var o=0,h=0;if(!this.XC[this.cellType[n]]){this.adH({parentNode:{grid:this}},this.cellType[n])}for(var l=this.am.length-1;l&gt;=0;l--){if(!this.am[l].te){o=g(o,this.cells3(this.am[l],n).getValue()*1,h);h++}else{this.adH(this.am[l].childNodes[m],this.cellType[n]).setValue(o);h=o=0}}};dhtmlXGridObject.prototype._g_stat_total=function(h,g,a){return h+g};dhtmlXGridObject.prototype._g_stat_min=function(h,g,a){if(!a){h=Infinity}return Math.min(h,g)};dhtmlXGridObject.prototype._g_stat_max=function(h,g,a){if(!a){h= -Infinity}return Math.max(h,g)};dhtmlXGridObject.prototype._g_stat_average=function(h,g,a){return(h*a+g)/(a+1)};dhtmlXGridObject.prototype._g_stat_count=function(h,g,a){return h++};dhtmlXGridObject.prototype._in_header_collapse=function(l,h,o){var a=l.tagName==&quot;TD&quot;?l:l.parentNode;h=a._cellIndexS;if(!this._column_groups){this._column_groups=[]}var n=o[1].split(&quot;:&quot;);var n=o[1].split(&quot;:&quot;);n=[n.shift(),n.join(&quot;:&quot;)];var m=parseInt(n[0]);l.innerHTML=o[0]+&quot;&lt;img src='&quot;+this.eg+&quot;minus.gif' style='padding-right:10px;height:16px'/&gt;<SPAN style="position:relative; top:-6px;">&quot;+(n[1]||&quot;&quot;)+&quot;<SPAN>&quot;;l.style.paddingBottom=&quot;0px&quot;;var g=this;this._column_groups[h]=l.getElementsByTagName(&quot;IMG&quot;)[0];this._column_groups[h].onclick=function(q){(q||event).cancelBubble=true;this._cstate= !this._cstate;for(var c=h+1;c&lt;(h+m);c++){g.setColumnHidden(c,this._cstate)}if(this._cstate){if(a.colSpan&amp;&amp;a.colSpan&gt;0){a._exp_colspan=a.colSpan;var u=Math.max(1,a.colSpan-m);if(!aq){for(var r=0;r&lt;a.colSpan-u;r++){var s=document.createElement(&quot;TD&quot;);if(a.nextSibling){a.parentNode.insertBefore(s,a.nextSibling)}else{a.parentNode.appendChild(s)}}}a.colSpan=u}g.callEvent(&quot;onColumnCollapse&quot;,[h,this._cstate])}else{if(a._exp_colspan){a.colSpan=a._exp_colspan;if(!aq){for(var r=1;r&lt;a._exp_colspan;r++){a.parentNode.removeChild(a.nextSibling)}}g.callEvent(&quot;onColumnCollapse&quot;,[h,this._cstate])}}this.src=g.eg+(this._cstate?&quot;plus.gif&quot;:&quot;minus.gif&quot;);if(g.gB.style.display!=&quot;none&quot;){g.vo()}}};dhtmlXGridObject.prototype.collapseColumns=function(a){if(!this._column_groups[a]||this._column_groups[a]._cstate){return}this._column_groups[a].onclick({})};dhtmlXGridObject.prototype.expandColumns=function(a){if(!this._column_groups[a]|| !this._column_groups[a]._cstate){return}this._column_groups[a].onclick({})};dhtmlXGridObject.prototype.enableHeaderMenu=function(a){if(typeof a==&quot;string&quot;){a=a.split(&quot;,&quot;)}this._hm_config=a;var c=this;this.attachEvent(&quot;onInit&quot;,function(){this.hdr.oncontextmenu=function(g){return c._doHContClick(g||window.event)};this.startColResizeA=this.eJ;this.eJ=function(g){if(g.button==2||(gP&amp;&amp;g.ctrlKey)){return this._doHContClick(g)}return this.startColResizeA(g)};this._chm_ooc=this.obj.onclick;this._chm_hoc=this.hdr.onclick;this.hdr.onclick=function(g){if(g&amp;&amp;(g.button==2||(gP&amp;&amp;g.ctrlKey))){return false}c._showHContext(false);return c._chm_hoc.apply(this,arguments)};this.obj.onclick=function(){c._showHContext(false);return c._chm_ooc.apply(this,arguments)}});dhtmlxEvent(document.body,&quot;click&quot;,function(){if(c._hContext){c._showHContext(false)}});if(this.hdr.rows.length){this.callEvent(&quot;onInit&quot;,[])}this.enableHeaderMenu=function(){}};dhtmlXGridObject.prototype._doHContClick=function(c){function a(h){if(h.pageX||h.pageY){return{x:h.pageX,y:h.pageY}}var l=((_isIE)&amp;&amp;(document.compatMode!=&quot;BackCompat&quot;))?document.documentElement:document.body;return{x:h.clientX+l.scrollLeft-l.clientLeft,y:h.clientY+l.scrollTop-l.clientTop}}this._createHContext();var g=a(c);this._showHContext(true,g.x,g.y);c[_isIE?&quot;srcElement&quot;:&quot;target&quot;].oncontextmenu=function(h){(h||event).cancelBubble=true;return false};c.cancelBubble=true;if(c.preventDefault){c.preventDefault()}return false};dhtmlXGridObject.prototype._createHContext=function(){if(this._hContext){return this._hContext}var q=document.createElement(&quot;DIV&quot;);q.oncontextmenu=function(a){(a||event).cancelBubble=true;return false};q.onclick=function(a){(a||event).cancelBubble=true;return true};q.className=&quot;dhx_header_cmenu&quot;;q.style.width=q.style.height=&quot;5px&quot;;q.style.display=&quot;none&quot;;var g=[];var h=0;if(this.aC){h=this.aC._cCount}var n=h;for(var h;h&lt;this.hdr.rows[1].cells.length;h++){var r=this.hdr.rows[1].cells[h];if(!this._hm_config||(this._hm_config[h]&amp;&amp;this._hm_config[h]!=&quot;false&quot;)){if(r.firstChild&amp;&amp;r.firstChild.tagName==&quot;DIV&quot;){var o=r.firstChild.innerHTML}else{var o=r.innerHTML}o=o.replace(/&lt;[^&gt;]*&gt;/gi,&quot;&quot;);g.push(&quot;<DIV class="dhx_header_cmenu_item">&lt;input type='checkbox' column='&quot;+n+&quot;' len='&quot;+(r.colSpan||1)+&quot;' checked='true' /&gt;&quot;+o+&quot;</DIV>&quot;)}n+=(r.colSpan||1)}q.innerHTML=g.join(&quot;&quot;);var l=this;var m=function(){var s=this.getAttribute(&quot;column&quot;);if(!this.checked&amp;&amp; !l._checkLast(s)){return this.checked=true}if(l.nh){l=l.aC}for(var a=0;a&lt;this.getAttribute(&quot;len&quot;);a++){l.setColumnHidden((s*1+a*1),!this.checked)}if(this.checked&amp;&amp;l.yI(s)==0){l.nT(s)}};for(var h=0;h&lt;q.childNodes.length;h++){q.childNodes[h].firstChild.onclick=m}document.body.insertBefore(q,document.body.firstChild);this._hContext=q;q.style.position=&quot;absolute&quot;;q.style.zIndex=999;q.style.width=&quot;auto&quot;;q.style.height=&quot;auto&quot;;q.style.display=&quot;block&quot;};dhtmlXGridObject.prototype._checkLast=function(c){for(var a=0;a&lt;this._cCount;a++){if((!this._hrrar|| !this._hrrar[a])&amp;&amp;(a!=c)){return true}}return false};dhtmlXGridObject.prototype._updateHContext=function(){for(var g=0;g&lt;this._hContext.childNodes.length;g++){var h=this._hContext.childNodes[g].firstChild;var a=h.getAttribute(&quot;column&quot;);if(this.Fs(a)||(this.yI(a)==0)){h.checked=false}}};dhtmlXGridObject.prototype._showHContext=function(c,a,g){if(c&amp;&amp;this.enableColumnMove){this._hContext.parentNode.removeChild(this._hContext);this._hContext=null}this._createHContext();this._hContext.style.display=(c?&quot;block&quot;:&quot;none&quot;);if(c){this._updateHContext(true);this._hContext.style.left=a+&quot;px&quot;;this._hContext.style.top=g+&quot;px&quot;}};dhtmlXGridObject.prototype._process_json_row=function(l,m){l._attrs=m;for(var g=0;g&lt;l.childNodes.length;g++){l.childNodes[g]._attrs={}}if(m.userdata){for(var c in m.userdata){this.setUserData(l.idd,c,m.userdata[c])}}m=this._c_order?this.Xb(m.data):m.data;for(var h=0;h&lt;m.length;h++){if(typeof m[h]==&quot;object&quot;&amp;&amp;m[h]!=null){l.childNodes[h]._attrs=m[h];if(m[h].type){l.childNodes[h].zk=m[h].type}m[h]=m[h].value}}this.VQ(l,m);return l};dhtmlXGridObject.prototype._process_js_row=function(m,n){m._attrs=n;for(var h=0;h&lt;m.childNodes.length;h++){m.childNodes[h]._attrs={}}if(n.userdata){for(var g in n.userdata){this.setUserData(m.idd,g,n.userdata[g])}}var c=[];for(var l=0;l&lt;this.columnIds.length;l++){c[l]=n[this.columnIds[l]];if(typeof c[l]==&quot;object&quot;&amp;&amp;c[l]!=null){m.childNodes[l]._attrs=c[l];if(c[l].type){m.childNodes[l].zk=c[l].type}c[l]=c[l].value}if(!c[l]&amp;&amp;c[l]!==0){c[l]=&quot;&quot;}}this.VQ(m,c);return m};dhtmlXGridObject.prototype.updateFromJSON=function(a,h,c,g){if(typeof h==&quot;undefined&quot;){h=true}this.cZ=[true,h,c];this.load(a,g,&quot;json&quot;)},dhtmlXGridObject.prototype._refreshFromJSON=function(g){if(this._f_rowsBuffer){this.GF(0,&quot;&quot;)}reset=false;if(window.eXcell_tree){eXcell_tree.prototype.Tw=eXcell_tree.prototype.setValue;eXcell_tree.prototype.setValue=function(u){var s=this.grid._h2.get[this.cell.parentNode.idd];if(s&amp;&amp;this.cell.parentNode.JT){this.setLabel(u)}else{this.Tw(u)}}}var r=this.cellType.bP(&quot;tree&quot;);var l=g.parent||0;var n={};if(this.cZ[2]){if(r!= -1){this._h2.so(l,function(s){n[s.id]=true},this)}else{this.forEachRow(function(s){n[s]=true})}}var q=g.rows;for(var h=0;h&lt;q.length;h++){var o=q[h];var a=o.id;n[a]=false;if(this.bj[a]&amp;&amp;this.bj[a].tagName!=&quot;TR&quot;){if(this._h2){this._h2.get[a].buff.data=o}else{this.aD[this.getRowIndex(a)].data=o}this.bj[a]=o}else{if(this.bj[a]){this._process_json_row(this.bj[a],o,-1);this.jQ(this.bj[a],true)}else{if(this.cZ[1]){var m={idd:a,data:o,_parser:this._process_json_row,_locator:this._get_json_data};var c=this.aD.length;if(this.cZ[1]==&quot;top&quot;){this.aD.unshift(m);c=0}else{this.aD.push(m)}if(this._h2){reset=true;(this._h2.add(a,l)).buff=this.aD[this.aD.length-1]}this.bj[a]=o;o=this.render_row(c);this._insertRowAt(o,c? -1:0)}}}}if(this.cZ[2]){for(a in n){if(n[a]&amp;&amp;this.bj[a]){this.deleteRow(a)}}}this.cZ=null;if(window.eXcell_tree){eXcell_tree.prototype.setValue=eXcell_tree.prototype.Tw}if(reset){this.uR()}if(this._f_rowsBuffer){this._f_rowsBuffer=null;this.EJ()}},dhtmlXGridObject.prototype._process_js=function(a){return this._process_json(a,&quot;js&quot;)},dhtmlXGridObject.prototype._process_json=function(data,mode){this._parsing=true;try{if(data&amp;&amp;data.ai){eval(&quot;dhtmlx.temp=&quot;+data.ai.responseText+&quot;;&quot;);data=dhtmlx.temp}else{if(typeof data==&quot;string&quot;){eval(&quot;dhtmlx.temp=&quot;+data+&quot;;&quot;);data=dhtmlx.temp}}}catch(e){dhtmlxError.gn(&quot;LoadXML&quot;,&quot;Incorrect JSON&quot;,[(data.ai||data),this]);data={rows:[]}}if(this.cZ){return this._refreshFromJSON(data)}var cr=parseInt(data.pos||0);var total=parseInt(data.total_count||0);var reset=false;if(total){if(!this.aD[total-1]){if(this.aD.length){reset=true}this.aD[total-1]=null}if(total&lt;this.aD.length){this.aD.splice(total,this.aD.length-total);reset=true}}for(var Gb in data){if(Gb!=&quot;rows&quot;){this.setUserData(&quot;&quot;,Gb,data[Gb])}}if(mode==&quot;js&quot;&amp;&amp;data.collections){for(var colkey in data.collections){var index=this.getColIndexById(colkey);var colrecs=data.collections[colkey];if(index!==window.undefined){if(this.cellType[index]==&quot;clist&quot;){colplaindata=[];for(var j=0;j&lt;colrecs.length;j++){colplaindata.push(colrecs[j].label)}this.AO(index,colplaindata)}else{var combo=this.cf(index);for(var j=0;j&lt;colrecs.length;j++){combo.eT(colrecs[j].value,colrecs[j].label)}}}}}if(this.gY()){return this._process_tree_json(data,null,null,mode)}if(mode==&quot;js&quot;){if(data.data){data=data.data}for(var i=0;i&lt;data.length;i++){if(this.aD[i+cr]){continue}var row=data[i];var id=row.id||(i+1);this.aD[i+cr]={idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data};this.bj[id]=data[i]}}else{for(var i=0;i&lt;data.rows.length;i++){if(this.aD[i+cr]){continue}var id=data.rows[i].id;this.aD[i+cr]={idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data};this.bj[id]=data.rows[i]}}if(reset&amp;&amp;this.ahK){var h=this.HF.scrollTop;this._reset_view();this.HF.scrollTop=h}else{this.render_dataset()}this._parsing=false};dhtmlXGridObject.prototype._get_json_data=function(c,a){if(typeof c.data[a]==&quot;object&quot;){return c.data[a].value}else{return c.data[a]}};dhtmlXGridObject.prototype._process_tree_json=function(h,l,c,n){this._parsing=true;var a=false;if(!l){this.render_row=this.render_row_tree;a=true;l=h;c=l.parent||0;if(c==&quot;0&quot;){c=0}if(!this._h2){this._h2=new dhtmlxHierarchy()}if(this.aC){this.aC._h2=this._h2}}if(n==&quot;js&quot;){if(l.data&amp;&amp; !c){h=l.data}if(l.rows){l=l.rows}for(var g=0;g&lt;l.length;g++){var o=l[g].id;var m=this._h2.add(o,c);m.buff={idd:o,data:l[g],_parser:this._process_js_row,_locator:this._get_js_data};if(l[g].open){m.state=&quot;minus&quot;}this.bj[o]=m.buff;this._process_tree_json(l[g],l[g],o,n)}}else{if(l.rows){for(var g=0;g&lt;l.rows.length;g++){var o=l.rows[g].id;var m=this._h2.add(o,c);m.buff={idd:o,data:l.rows[g],_parser:this._process_json_row,_locator:this._get_json_data};if(l.rows[g].open){m.state=&quot;minus&quot;}this.bj[o]=m.buff;this._process_tree_json(l.rows[g],l.rows[g],o,n)}}}if(a){if(c!=0){this._h2.JA(c,&quot;state&quot;,&quot;minus&quot;)}this.cO(this._h2.get[c]);this._h2_to_buff();if(c!=0&amp;&amp;(this.ahK||this.aW)){this.uR()}else{this.render_dataset()}if(this.mI===false){this.forEachRow(function(q){this.render_row_tree(0,q)})}this._parsing=false}};dhtmlXGridObject.prototype.enableMarkedCells=function(a){this.markedRowsArr=new dhtmlxArray(0);this.markedCellsArr=new Array(0);this.lastMarkedRow=null;this.lastMarkedColumn=null;this.markedCells=true;this.lastMarkMethod=0;if(arguments.length&gt;0){if(!ap(a)){this.markedCells=false}}};dhtmlXGridObject.prototype.doMark=function(g,n){var m=g.parentNode.idd;this.setActive(true);if(!m){return}this.editStop();this.cell=g;this.row=g.parentNode;var q=g._cellIndex;if(!n){n=0}if(n==0){this.unmarkAll()}else{if(n==1){if(this.lastMarkedRow){var c=Math.min(this.getRowIndex(m),this.getRowIndex(this.lastMarkedRow));var o=Math.max(this.getRowIndex(m),this.getRowIndex(this.lastMarkedRow));var a=Math.min(q,this.lastMarkedColumn);var r=Math.max(q,this.lastMarkedColumn);for(var l=c;l&lt;o+1;l++){for(var h=a;h&lt;r+1;h++){this.mark(this.bB(l),h,true)}}}}else{if(n==2){if(this.markedRowsArr.bP(m)!= -1){for(var s=0;s&lt;this.markedCellsArr[m].length;s++){if(this.markedCellsArr[m][s]==q){this.mark(m,q,false);return true}}}}}}if(!this.markedCellsArr[m]){this.markedCellsArr[m]=new dhtmlxArray(0)}if(n!=1){this.mark(m,q)}this.HZ(this.cells(m,q).cell);this.lastMarkedRow=m;this.lastMarkedColumn=q;this.lastMarkMethod=n};dhtmlXGridObject.prototype.mark=function(g,c,h){if(arguments.length&gt;2){if(!ap(h)){this.cells(g,c).cell.className=this.cells(g,c).cell.className.replace(/cellselected/g,&quot;&quot;);if(this.markedRowsArr.bP(g)!= -1){var a=this.markedCellsArr[g].bP(c);if(a!= -1){this.markedCellsArr[g].aa(a);if(this.markedCellsArr[g].length==0){this.markedRowsArr.aa(this.markedRowsArr.bP(g))}this.callEvent(&quot;onCellUnMarked&quot;,[g,c])}}return true}}this.cells(g,c).cell.className+=&quot; cellselected&quot;;if(this.markedRowsArr.bP(g)== -1){this.markedRowsArr[this.markedRowsArr.length]=g}if(!this.markedCellsArr[g]){this.markedCellsArr[g]=new dhtmlxArray(0)}if(this.markedCellsArr[g].bP(c)== -1){this.markedCellsArr[g][this.markedCellsArr[g].length]=c;this.callEvent(&quot;onCellMarked&quot;,[g,c])}};dhtmlXGridObject.prototype.unmarkAll=function(){if(this.markedRowsArr){for(var a=0;a&lt;this.markedRowsArr.length;a++){var g=this.markedRowsArr[a];if(this.bj[g]){for(var c=0;c&lt;this.markedCellsArr[g].length;c++){this.callEvent(&quot;onCellUnMarked&quot;,[g,this.markedCellsArr[g][c]]);this.cells(g,this.markedCellsArr[g][c]).cell.className=this.cells(g,this.markedCellsArr[g][c]).cell.className.replace(/cellselected/g,&quot;&quot;)}}}this.markedRowsArr=new dhtmlxArray(0);this.markedCellsArr=new Array(0)}return true};dhtmlXGridObject.prototype.getMarked=function(){var g=new Array();if(this.markedRowsArr){for(var a=0;a&lt;this.markedRowsArr.length;a++){var h=this.markedRowsArr[a];for(var c=0;c&lt;this.markedCellsArr[h].length;c++){g[g.length]=[h,this.markedCellsArr[h][c]]}}}return g};function eXcell_math(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){this.grid.editor=new eXcell_ed(this.cell);this.grid.editor.fix_self=true;this.grid.editor.getValue=this.cell.eN?(function(){return this.cell.eN}):this.getValue;this.grid.editor.setValue=this.setValue;this.grid.editor.edit()};this.isDisabled=function(){return!this.grid._mathEdit};this.setValue=function(c){c=this.grid.MB(c,this.cell,this.fix_self);if(this.grid.dA[this.cell._cellIndex]){this.grid.adH(this.cell,this.grid.dA[this.cell._cellIndex]).setValue(c)}else{this.dq(c);this.cell.mG=false}};this.getValue=function(){if(this.grid.dA[this.cell._cellIndex]){return this.grid.adH(this.cell,this.grid.dA[this.cell._cellIndex]).getValue()}return this.cell.innerHTML}}eXcell_math.prototype=new gD;dhtmlXGridObject.prototype._init_point_bm=dhtmlXGridObject.prototype.Yz;dhtmlXGridObject.prototype.Yz=function(){this._mat_links={};this._aggregators=[];this.attachEvent(&quot;onClearAll&quot;,function(){this._mat_links={};this._aggregators=[]});this.attachEvent(&quot;onCellChanged&quot;,function(m,l){if(this._mat_links[m]){var a=this._mat_links[m][l];if(a){for(var h=0;h&lt;a.length;h++){if(a[h].parentNode){this.adH(a[h]).setValue(this._calcSCL(a[h]))}}}}if(!this._parsing&amp;&amp;this._aggregators[l]){var g=this._h2.get[m].parent.id;if(g!=0){var c=this.cells(g,l);c.setValue(this._calcSCL(c.cell))}}});this.attachEvent(&quot;onAfterRowDeleted&quot;,function(h,c){if(c!=0){if(!this._parsing&amp;&amp;this._aggregators.length){for(var g=0;g&lt;this._aggregators.length;g++){if(this._aggregators[g]){var a=this.cells(c,g);a.setValue(this._calcSCL(a.cell))}}}}return true});this.attachEvent(&quot;onXLE&quot;,function(){for(var a=0;a&lt;this._aggregators.length;a++){if(this._aggregators[a]){this._h2.so(0,function(g){if(g.bu.length!=0){var c=this.cells(g.id,a);c.setValue(this._calcSCL(c.cell))}},this)}}});this.Yz=this._init_point_bm;if(this.Yz){this.Yz()}};dhtmlXGridObject.prototype.enableMathSerialization=function(a){this.oX=ap(a)};dhtmlXGridObject.prototype.setMathRound=function(a){this._roundDl=a;this._roundD=Math.pow(10,a)};dhtmlXGridObject.prototype.enableMathEditing=function(a){this._mathEdit=ap(a)};dhtmlXGridObject.prototype._calcSCL=function(cell){if(!cell.Lq){return this.adH(cell).getValue()}try{dhtmlx.agrid=this;var z=eval(cell.Lq)}catch(e){return(&quot;#SCL&quot;)}if(this._roundD){var pre=Math.abs(z)&lt;1?&quot;0&quot;:&quot;&quot;;if(z&lt;0){pre=&quot;-&quot;+pre}z=Math.round(Math.abs(z)*this._roundD).toString();if(z==0){return 0}if(this._roundDl&gt;0){var n=z.length-this._roundDl;if(n&lt;0){z=(&quot;000000000&quot;+z).substring(9+n);n=0}return(pre+z.substring(0,n)+&quot;.&quot;+z.substring(n,z.length))}return pre+z}return z};dhtmlXGridObject.prototype._countTotal=function(l,c){var a=0;var h=this._h2.get[l];for(var g=0;g&lt;h.bu.length;g++){if(!h.bu[g].buff){return a}if(h.bu[g].buff._parser){this._h2.so(l,function(m){if(m.bu.length==0){a+=parseFloat(this._get_cell_value(m.buff,c),10)}},this);return a}a+=parseFloat(this._get_cell_value(h.bu[g].buff,c),10)}return a};dhtmlXGridObject.prototype.MB=function(g,c,a){if(g===null||g===window.undefined){return g}g=g.toString();if(g.indexOf(&quot;=&quot;)!=0|| !c.parentNode){this._reLink([],c);if(a){c.Lq=c.eN=null}return g}c.eN=g;var m=null;g=g.replace(&quot;=&quot;,&quot;&quot;);if(g.indexOf(&quot;sum&quot;)!= -1){g=g.replace(&quot;sum&quot;,&quot;(dhtmlx.agrid._countTotal('&quot;+c.parentNode.idd+&quot;',&quot;+c._cellIndex+&quot;))&quot;);if(!this._aggregators){this._aggregators=[]}this._aggregators[c._cellIndex]=&quot;sum&quot;;c.Lq=g;return this._parsing?&quot;&quot;:this._calcSCL(c)}if(g.indexOf(&quot;[[&quot;)!= -1){var l=/(\[\[([^\,]*)\,([^\]]*)]\])/g;dhtmlx.agrid=this;m=m||(new Array());g=g.replace(l,function(o,n,r,q){if(r==&quot;-&quot;){r=c.parentNode.idd}if(r.indexOf(&quot;#&quot;)==0){r=dhtmlx.agrid.bB(r.replace(&quot;#&quot;,&quot;&quot;))}m[m.length]=[r,q];return '(parseFloat(dhtmlx.agrid.cells(&quot;'+r+'&quot;,'+q+&quot;).getValue(),10))&quot;})}if(g.indexOf(&quot;:&quot;)!= -1){var l=/:(\w+)/g;dhtmlx.agrid=this;var h=c.parentNode.idd;m=m||(new Array());g=g.replace(l,function(o,n,r,q){m[m.length]=[h,dhtmlx.agrid.getColIndexById(n)];return '(parseFloat(dhtmlx.agrid.cells(&quot;'+h+'&quot;,dhtmlx.agrid.getColIndexById(&quot;'+n+'&quot;)).getValue(),10))'})}else{var l=/c([0-9]+)/g;dhtmlx.agrid=this;var h=c.parentNode.idd;m=m||(new Array());g=g.replace(l,function(o,n,r,q){m[m.length]=[h,n];return '(parseFloat(dhtmlx.agrid.cells(&quot;'+h+'&quot;,'+n+&quot;).getValue(),10))&quot;})}this._reLink(m,c);c.Lq=g;return this._calcSCL(c)};dhtmlXGridObject.prototype._reLink=function(c,a){if(!c.length){return}for(var h=0;h&lt;c.length;h++){if(!this._mat_links[c[h][0]]){this._mat_links[c[h][0]]={}}var g=this._mat_links[c[h][0]];if(!g[c[h][1]]){g[c[h][1]]=[]}g[c[h][1]].push(a)}};if(cn){(function(){var a=String.prototype.replace;String.prototype.replace=function(r,g){if(typeof g!=&quot;function&quot;){return a.apply(this,arguments)}var l=&quot;&quot;+this;var o=g;if(!(r instanceof RegExp)){var n=l.indexOf(r);return(n== -1?l:a.apply(l,[r,o(r,n,l)]))}var c=r;var s=[];var m=c.lastIndex;var q;while((q=c.exec(l))!=null){var n=q.index;var h=q.concat(n,l);s.push(l.slice(m,n),o.apply(null,h).toString());if(!c.global){m+=RegExp.lastMatch.length;break}else{m=c.lastIndex}}s.push(l.slice(m));return s.join(&quot;&quot;)}})()}dhtmlXGridObject.prototype.insertColumn=function(g,o,r,a,n,q,u,c,l){g=parseInt(g);if(g&gt;this._cCount){g=this._cCount}if(!this._cMod){this._cMod=this._cCount}this._processAllArrays(this._cCount,g-1,[(o||&quot; &quot;),(a||100),(r||&quot;ed&quot;),(q||&quot;left&quot;),(u||&quot;&quot;),(n||&quot;na&quot;),(l||&quot;&quot;),&quot;&quot;,this._cMod,(a||100)]);this._processAllRows(&quot;_addColInRow&quot;,g);if(typeof(o)==&quot;object&quot;){for(var m=1;m&lt;this.hdr.rows.length;m++){if(o[m-1]==&quot;#rspan&quot;){var w=m-1;var v=false;var s=null;while(!v){var s=this.hdr.rows[w];for(var h=0;h&lt;s.cells.length;h++){if(s.cells[h]._cellIndex==g){v=h;break}}w--}this.hdr.rows[w+1].cells[h].rowSpan=(this.hdr.rows[w].cells[h].rowSpan||1)+1}else{this.Cs(g,(o[m-1]||&quot; &quot;),m)}}}else{this.Cs(g,(o||&quot; &quot;))}this.hdr.rows[0].cells[g];this._cCount++;this._cMod++;this._master_row=null;this.setSizes()};dhtmlXGridObject.prototype.deleteColumn=function(a){a=parseInt(a);if(this._cCount==0){return}if(!this._cMod){this._cMod=this._cCount}if(a&gt;=this._cCount){return}this._processAllArrays(a,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]);this._processAllRows(&quot;_deleteColInRow&quot;,a);this._cCount--;this._master_row=null;this.setSizes()};dhtmlXGridObject.prototype._processAllRows=function(l,a,c){this[l](this.obj.rows[0],a,c,0);var h=this.hdr.rows.length;for(var g=0;g&lt;h;g++){this[l](this.hdr.rows[g],a,c,g)}if(this.ftr){var h=this.ftr.firstChild.rows.length;for(var g=0;g&lt;h;g++){this[l](this.ftr.firstChild.rows[g],a,c,g)}}this.forEachRow(function(m){if(this.bj[m]&amp;&amp;this.bj[m].tagName==&quot;TR&quot;){this[l](this.bj[m],a,c,-1)}})};dhtmlXGridObject.prototype._processAllArrays=function(r,a,q){var m=[&quot;hdrLabels&quot;,&quot;initCellWidth&quot;,&quot;cellType&quot;,&quot;cellAlign&quot;,&quot;cellVAlign&quot;,&quot;fldSort&quot;,&quot;columnColor&quot;,&quot;_hrrar&quot;,&quot;_c_order&quot;];if(this.cellWidthPX.length){m.push(&quot;cellWidthPX&quot;)}if(this.cellWidthPC.length){m.push(&quot;cellWidthPC&quot;)}if(this._col_combos){m.push(&quot;_col_combos&quot;)}if(this._mCols){m[m.length]=&quot;_mCols&quot;}if(this.columnIds){m[m.length]=&quot;columnIds&quot;}if(this._maskArr){m.push(&quot;_maskArr&quot;)}if(this._drsclmW){m.push(&quot;_drsclmW&quot;)}if(this.afF){m.push(&quot;_RaSeCol&quot;)}if(this._hm_config){m.push(&quot;_hm_config&quot;)}if(this.qZ){m.push(&quot;_drsclmn&quot;)}if(this.clists){m.push(&quot;clists&quot;)}if(this._validators&amp;&amp;this._validators.data){m.push(this._validators.data)}m.push(&quot;combos&quot;);if(this._customSorts){m.push(&quot;_customSorts&quot;)}if(this._aggregators){m.push(&quot;_aggregators&quot;)}var o=(r&lt;=a);if(!this._c_order){this._c_order=new Array();var g=this._cCount;for(var n=0;n&lt;g;n++){this._c_order[n]=n}}for(var n=0;n&lt;m.length;n++){var s=this[m[n]]||m[n];if(s){if(o){var c=s[r];for(var h=r;h&lt;a;h++){s[h]=s[h+1]}s[a]=c}else{var c=s[r];for(var h=r;h&gt;(a+1);h--){s[h]=s[h-1]}s[a+1]=c}if(q){s[a+(o?0:1)]=q[n]}}}};dhtmlXGridObject.prototype.moveColumn=function(a,c){c--;a=parseInt(a);c=parseInt(c);if(c&lt;a){var g=c+1}else{var g=c}if(!this.callEvent(&quot;onBeforeCMove&quot;,[a,g])){return false}if(a==g){return}this.editStop();this._processAllRows(&quot;_moveColInRow&quot;,a,c);this._processAllArrays(a,c);if(this.ij){this.vo(this.ij._cellIndex)}this.callEvent(&quot;onAfterCMove&quot;,[a,g])};dhtmlXGridObject.prototype.Xb=function(c){var g=new Array();for(var a=0;a&lt;this._cCount;a++){var h=c[this._c_order[a]];if(typeof(h)==&quot;undefined&quot;){h=&quot;&quot;}g[a]=h}return g};dhtmlXGridObject.prototype._moveColInRow=function(m,a,g){var n=m.childNodes[a];var l=m.childNodes[g+1];if(!n){return}if(l){m.insertBefore(n,l)}else{m.appendChild(n)}for(var h=0;h&lt;m.childNodes.length;h++){m.childNodes[h]._cellIndex=m.childNodes[h]._cellIndexS=h}};dhtmlXGridObject.prototype._addColInRow=function(o,m,a,h){var l=m;if(o.bq){if(o.bq[m-1]==o.bq[m]|| !o.childNodes[o.bq[m-1]]){for(var g=o.bq.length;g&gt;=m;g--){o.bq[g]=g?(o.bq[g-1]+1):0}o.bq[m]--}else{for(var g=o.bq.length;g&gt;=m;g--){o.bq[g]=g?(o.bq[g-1]+1):0}}var l=o.bq[m]}var q=o.childNodes[l];var n=document.createElement((h)?&quot;TD&quot;:&quot;TH&quot;);if(h){n._attrs={}}else{n.style.width=(parseInt(this.cellWidthPX[m])||&quot;100&quot;)+&quot;px&quot;}if(q){o.insertBefore(n,q)}else{o.appendChild(n)}if(this.nz&amp;&amp;o.idd){this.ae.dS(o.childNodes[l],this)}for(var g=l+1;g&lt;o.childNodes.length;g++){o.childNodes[g]._cellIndex=o.childNodes[g]._cellIndexS=o.childNodes[g]._cellIndex+1}if(o.childNodes[l]){o.childNodes[l]._cellIndex=o.childNodes[l]._cellIndexS=m}if(o.idd||typeof(o.idd)!=&quot;undefined&quot;){this.cells3(o,m).setValue(&quot;&quot;);n.align=this.cellAlign[m];n.style.verticalAlign=this.cellVAlign[m];n.bgColor=this.columnColor[m]}else{if(n.tagName==&quot;TD&quot;){if(!o.idd&amp;&amp;this.qW){n.innerHTML=&quot;<DIV class="hdrcell"> </DIV>&quot;}else{n.innerHTML=&quot; &quot;}}}};dhtmlXGridObject.prototype._deleteColInRow=function(o,n){var g=n;if(o.bq){n=o.bq[n]}var q=o.childNodes[n];if(!q){return}if(q.colSpan&amp;&amp;q.colSpan&gt;1&amp;&amp;q.parentNode.idd){var l=q.colSpan-1;var a=this.cells4(q).getValue();this.Oq(q.parentNode.idd,q._cellIndex,1);if(l&gt;1){var m=q._cellIndex*1;this.Oq(q.parentNode.idd,m+1,l);this.cells(q.parentNode.idd,q._cellIndex*1+1).setValue(a);o.bq.splice(m,1);for(var h=m;h&lt;o.bq.length;h++){o.bq[h]-=1}}}else{if(o.bq){o.bq.splice(g,1);for(var h=g;h&lt;o.bq.length;h++){o.bq[h]--}}}if(q){o.removeChild(q)}for(var h=n;h&lt;o.childNodes.length;h++){o.childNodes[h]._cellIndex=o.childNodes[h]._cellIndexS=o.childNodes[h]._cellIndex-1}};dhtmlXGridObject.prototype.enableColumnMove=function(c,a){this._mCol=ap(c);if(typeof(a)!=&quot;undefined&quot;){this._mCols=a.split(&quot;,&quot;)}if(!this._mmevTrue){dhtmlxEvent(this.hdr,&quot;mousedown&quot;,this._startColumnMove);dhtmlxEvent(document.body,&quot;mousemove&quot;,this._onColumnMove);dhtmlxEvent(document.body,&quot;mouseup&quot;,this._stopColumnMove);this._mmevTrue=true}};dhtmlXGridObject.prototype._startColumnMove=function(h){h=h||event;var g=h.target||h.srcElement;var a=g;while(a.tagName!=&quot;TABLE&quot;){a=a.parentNode}var c=a.grid;if(!c){return}c.setActive();if(!c._mCol||h.button==2){return}g=c.bw(g,&quot;TD&quot;);if(g.style.cursor!=&quot;default&quot;){return true}if((c)&amp;&amp;(!c._colInMove)){c.resized=null;if((!c._mCols)||(c._mCols[g._cellIndex]==&quot;true&quot;)){c._colInMove=g._cellIndex+1}}return true};dhtmlXGridObject.prototype._onColumnMove=function(l){l=l||event;var a=window.globalActiveDHTMLGridObject;if((a)&amp;&amp;(a._colInMove)){if(a._showHContext){a._showHContext(false)}if(typeof(a._colInMove)!=&quot;object&quot;){var m=document.createElement(&quot;DIV&quot;);m._aIndex=(a._colInMove-1);m._bIndex=null;m.innerHTML=a.wW(m._aIndex);m.className=&quot;dhx_dragColDiv&quot;;m.style.position=&quot;absolute&quot;;document.body.appendChild(m);a._colInMove=m}var h=[];h[0]=(document.body.scrollLeft||document.documentElement.scrollLeft);h[1]=(document.body.scrollTop||document.documentElement.scrollTop);a._colInMove.style.left=l.clientX+h[0]+8+&quot;px&quot;;a._colInMove.style.top=l.clientY+h[1]+8+&quot;px&quot;;var c=l.target||l.srcElement;while((c)&amp;&amp;(typeof(c._cellIndexS)==&quot;undefined&quot;)){c=c.parentNode}if(a._colInMove._oldHe){a._colInMove._oldHe.className=a._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,&quot;&quot;);a._colInMove._oldHe=null;a._colInMove._bIndex=null}if(c){if(a.hdr.rows[1].bq){var g=a.hdr.rows[1].cells[a.hdr.rows[1].bq[c._cellIndexS]]}else{var g=a.hdr.rows[1].cells[c._cellIndexS]}var m=l.clientX-(ej(g)-a.kR.scrollLeft);if(m/g.offsetWidth&gt;0.5){g.className+=&quot; columnTargetR&quot;;a._colInMove._bIndex=c._cellIndexS}else{g.className+=&quot; columnTargetL&quot;;a._colInMove._bIndex=c._cellIndexS-1}if(g.offsetLeft&lt;(a.HF.scrollLeft+20)){a.HF.scrollLeft=Math.max(0,g.offsetLeft-20)}if((g.offsetLeft+g.offsetWidth-a.HF.scrollLeft)&gt;(a.HF.offsetWidth-20)){a.HF.scrollLeft=Math.min(a.HF.scrollLeft+g.offsetWidth+20,a.HF.scrollWidth-a.HF.offsetWidth)}a._colInMove._oldHe=g}l.cancelBubble=true;return false}return true};dhtmlXGridObject.prototype._stopColumnMove=function(c){c=c||event;var a=window.globalActiveDHTMLGridObject;if((a)&amp;&amp;(a._colInMove)){if(typeof(a._colInMove)==&quot;object&quot;){a._colInMove.parentNode.removeChild(a._colInMove);if(a._colInMove._bIndex!=null){a.moveColumn(a._colInMove._aIndex,a._colInMove._bIndex+1)}if(a._colInMove._oldHe){a._colInMove._oldHe.className=a._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,&quot;&quot;)}a._colInMove._oldHe=null;a._colInMove.grid=null;a.resized=true}a._colInMove=0}return true};dhtmlXGridObject.prototype.mouseOverHeader=function(c){var a=this;dhtmlxEvent(this.hdr,&quot;mousemove&quot;,function(h){h=h||window.event;var g=h.target||h.srcElement;if(g.tagName!=&quot;TD&quot;){g=a.bw(g,&quot;TD&quot;)}if(g&amp;&amp;(typeof(g._cellIndex)!=&quot;undefined&quot;)){c(g.parentNode.rowIndex,g._cellIndex)}})};dhtmlXGridObject.prototype.mouseOver=function(c){var a=this;dhtmlxEvent(this.obj,&quot;mousemove&quot;,function(h){h=h||window.event;var g=h.target||h.srcElement;if(g.tagName!=&quot;TD&quot;){g=a.bw(g,&quot;TD&quot;)}if(g&amp;&amp;(typeof(g._cellIndex)!=&quot;undefined&quot;)){c(g.parentNode.rowIndex,g._cellIndex)}})};dhtmlXGridObject.prototype.lL=function(m,h,c,l,a,g){this._pgn_parentObj=typeof(l)==&quot;string&quot;?document.getElementById(l):l;this._pgn_recInfoParentObj=typeof(g)==&quot;string&quot;?document.getElementById(g):g;this.aW=m;this.showRecInfo=a;this.cu=parseInt(h);this.ew=1;this.pagesInGroup=parseInt(c);this._init_pgn_events();this.setPagingSkin(&quot;default&quot;)};dhtmlXGridObject.prototype.eG=function(a,c){this.tR=a;this.Cr=c};dhtmlXGridObject.prototype.changePageRelative=function(a){this.changePage(this.ew+a)};dhtmlXGridObject.prototype.changePage=function(a){if(arguments.length==0){a=this.ew||0}a=parseInt(a);a=Math.max(1,Math.min(a,Math.ceil(this.aD.length/this.cu)));if(!this.callEvent(&quot;onBeforePageChanged&quot;,[this.ew,a])){return}this.ew=parseInt(a);this._reset_view();this._fixAlterCss();this.callEvent(&quot;onPageChanged&quot;,this.ajA())};dhtmlXGridObject.prototype.setPagingSkin=function(a){this._pgn_skin=this[&quot;_pgn_&quot;+a];if(a==&quot;toolbar&quot;){this._pgn_skin_tlb=arguments[1]}};dhtmlXGridObject.prototype.setPagingTemplates=function(g,c){this._pgn_templateA=this._pgn_template_compile(g);this._pgn_templateB=this._pgn_template_compile(c);this._page_skin_update()};dhtmlXGridObject.prototype._page_skin_update=function(a){if(!this.pagesInGroup){this.pagesInGroup=Math.ceil(Math.min(5,this.aD.length/this.cu))}var c=Math.ceil(this.aD.length/this.cu);if(c&amp;&amp;c&lt;this.ew){return this.changePage(c)}if(this.aW&amp;&amp;this._pgn_skin){this._pgn_skin.apply(this,this.ajA())}};dhtmlXGridObject.prototype._init_pgn_events=function(a){this.attachEvent(&quot;onXLE&quot;,this._page_skin_update);this.attachEvent(&quot;onClearAll&quot;,this._page_skin_update);this.attachEvent(&quot;onPageChanged&quot;,this._page_skin_update);this.attachEvent(&quot;onGridReconstructed&quot;,this._page_skin_update);this._init_pgn_events=function(){}};dhtmlXGridObject.prototype._pgn_default=function(g,h,a){if(!this.pagingBlock){this.pagingBlock=document.createElement(&quot;DIV&quot;);this.pagingBlock.className=&quot;pagingBlock&quot;;this.recordInfoBlock=document.createElement(&quot;SPAN&quot;);this.recordInfoBlock.className=&quot;recordsInfoBlock&quot;;if(!this._pgn_parentObj){return}this._pgn_parentObj.appendChild(this.pagingBlock);if(this._pgn_recInfoParentObj&amp;&amp;this.showRecInfo){this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock)}if(!this._pgn_templateA){this._pgn_templateA=this._pgn_template_compile(&quot;[prevpages:&lt;: ] [currentpages:, ] [nextpages:&gt;: ]&quot;);this._pgn_templateB=this._pgn_template_compile(&quot;Results <B>[from]-[to]</B> of <B>[total]</B>&quot;)}}var c=this.ajA();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,c);this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,c);this._pgn_template_active(this.pagingBlock);this._pgn_template_active(this.recordInfoBlock);this.callEvent(&quot;onPaging&quot;,[])};dhtmlXGridObject.prototype._pgn_block=function(c){var l=Math.floor((this.ew-1)/this.pagesInGroup)*this.pagesInGroup;var a=Math.min(Math.ceil(this.aD.length/this.cu),l+this.pagesInGroup);var h=[];for(var g=l+1;g&lt;=a;g++){if(g==this.ew){h.push(&quot;&lt;a class='dhx_not_active'&gt;<B>&quot;+g+&quot;</B>&lt;/a&gt;&quot;)}else{h.push(&quot;&lt;a onclick='this.grid.changePage(&quot;+g+&quot;); return false;'&gt;&quot;+g+&quot;&lt;/a&gt;&quot;)}}return h.join(c)};dhtmlXGridObject.prototype._pgn_link=function(h,c,g){if(h==&quot;prevpages&quot;||h==&quot;prev&quot;){if(this.ew==1){return g}return &quot;&lt;a onclick='this.grid.changePageRelative(-1*&quot;+(h==&quot;prev&quot;?&quot;1&quot;:&quot;this.grid.pagesInGroup&quot;)+&quot;); return false;'&gt;&quot;+c+&quot;&lt;/a&gt;&quot;}if(h==&quot;nextpages&quot;||h==&quot;next&quot;){if(this.aD.length/this.cu&lt;=this.ew){return g}if(this.aD.length/(this.cu*(h==&quot;next&quot;?&quot;1&quot;:this.pagesInGroup))&lt;=1){return g}return &quot;&lt;a onclick='this.grid.changePageRelative(&quot;+(h==&quot;next&quot;?&quot;1&quot;:&quot;this.grid.pagesInGroup&quot;)+&quot;); return false;'&gt;&quot;+c+&quot;&lt;/a&gt;&quot;}if(h==&quot;current&quot;){var a=this.ew+(c?parseInt(c):0);if(a&lt;1||Math.ceil(this.aD.length/this.cu)&lt;a){return g}return &quot;&lt;a &quot;+(a==this.ew?&quot;class='dhx_active_page_link' &quot;:&quot;&quot;)+&quot;onclick='this.grid.changePage(&quot;+a+&quot;); return false;'&gt;&quot;+a+&quot;&lt;/a&gt;&quot;}return c};dhtmlXGridObject.prototype._pgn_template_active=function(g){var a=g.getElementsByTagName(&quot;A&quot;);if(a){for(var c=0;c&lt;a.length;c++){a[c].grid=this}}};dhtmlXGridObject.prototype._pgn_template_compile=function(a){a=a.replace(/\[([^\]]*)\]/g,function(g,c){c=c.split(&quot;:&quot;);switch(c[0]){case &quot;from&quot;:return '&quot;+(arguments[1]*1+(arguments[2]*1?1:0))+&quot;';case &quot;total&quot;:return '&quot;+arguments[3]+&quot;';case &quot;to&quot;:return '&quot;+arguments[2]+&quot;';case &quot;current&quot;:case &quot;prev&quot;:case &quot;next&quot;:case &quot;prevpages&quot;:case &quot;nextpages&quot;:return &quot;\&quot;+this._pgn_link('&quot;+c[0]+&quot;','&quot;+c[1]+&quot;','&quot;+c[2]+&quot;')+\&quot;&quot;;case &quot;currentpages&quot;:return &quot;\&quot;+this._pgn_block('&quot;+c[1]+&quot;')+\&quot;&quot;}});return new Function('return &quot;'+a+'&quot;;')};dhtmlXGridObject.prototype.i18n.paging={results:&quot;Results&quot;,records:&quot;Records from &quot;,to:&quot; to &quot;,page:&quot;Page &quot;,perpage:&quot;rows per page&quot;,first:&quot;To first Page&quot;,previous:&quot;Previous Page&quot;,found:&quot;Found records&quot;,next:&quot;Next Page&quot;,last:&quot;To last Page&quot;,of:&quot; of &quot;,notfound:&quot;No Records Found&quot;};dhtmlXGridObject.prototype.setPagingWTMode=function(a,c,g,h){this._WTDef=[a,c,g,h]};dhtmlXGridObject.prototype._pgn_bricks=function(o,a,g){var l=(this.skin_name||&quot;&quot;).split(&quot;_&quot;)[1];var c=&quot;&quot;;if(l==&quot;light&quot;||l==&quot;modern&quot;||l==&quot;skyblue&quot;){c=&quot;_&quot;+l}this.pagerElAr=new Array();this.pagerElAr.pagerCont=document.createElement(&quot;DIV&quot;);this.pagerElAr.pagerBord=document.createElement(&quot;DIV&quot;);this.pagerElAr.pagerLine=document.createElement(&quot;DIV&quot;);this.pagerElAr.pagerBox=document.createElement(&quot;DIV&quot;);this.pagerElAr.pagerInfo=document.createElement(&quot;DIV&quot;);this.pagerElAr.pagerInfoBox=document.createElement(&quot;DIV&quot;);var n=(this.globalBox||this.HF);this.pagerElAr.pagerCont.style.width=n.clientWidth+&quot;px&quot;;this.pagerElAr.pagerCont.style.overflow=&quot;hidden&quot;;this.pagerElAr.pagerCont.style.clear=&quot;both&quot;;this.pagerElAr.pagerBord.className=&quot;dhx_pbox&quot;+c;this.pagerElAr.pagerLine.className=&quot;dhx_pline&quot;+c;this.pagerElAr.pagerBox.style.clear=&quot;both&quot;;this.pagerElAr.pagerInfo.className=&quot;dhx_pager_info&quot;+c;this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord);this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine);this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo);this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox);this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox);this._pgn_parentObj.innerHTML=&quot;&quot;;this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont);if(this.aD.length&gt;0){var m=20;var u=22;if(o&gt;this.pagesInGroup){var r=document.createElement(&quot;DIV&quot;);var q=document.createElement(&quot;DIV&quot;);r.className=&quot;dhx_page&quot;+c;q.innerHTML=&quot;←&quot;;r.appendChild(q);this.pagerElAr.pagerBox.appendChild(r);var s=this;r.pgnum=(Math.ceil(o/this.pagesInGroup)-1)*this.pagesInGroup;r.onclick=function(){s.changePage(this.pgnum)};m+=u}for(var h=1;h&lt;=this.pagesInGroup;h++){var r=document.createElement(&quot;DIV&quot;);var q=document.createElement(&quot;DIV&quot;);r.className=&quot;dhx_page&quot;+c;pageNumber=((Math.ceil(o/this.pagesInGroup)-1)*this.pagesInGroup)+h;if(pageNumber&gt;Math.ceil(this.aD.length/this.cu)){break}q.innerHTML=pageNumber;r.appendChild(q);if(o==pageNumber){r.className+=&quot; dhx_page_active&quot;+c;q.className=&quot;dhx_page_active&quot;+c}else{var s=this;r.pgnum=pageNumber;r.onclick=function(){s.changePage(this.pgnum)}}m+=(parseInt(u/3)*pageNumber.toString().length)+15;q.style.width=(parseInt(u/3)*pageNumber.toString().length)+8+&quot;px&quot;;this.pagerElAr.pagerBox.appendChild(r)}if(Math.ceil(o/this.pagesInGroup)*this.pagesInGroup&lt;Math.ceil(this.aD.length/this.cu)){var r=document.createElement(&quot;DIV&quot;);var q=document.createElement(&quot;DIV&quot;);r.className=&quot;dhx_page&quot;+c;q.innerHTML=&quot;→&quot;;r.appendChild(q);this.pagerElAr.pagerBox.appendChild(r);var s=this;r.pgnum=(Math.ceil(o/this.pagesInGroup)*this.pagesInGroup)+1;r.onclick=function(){s.changePage(this.pgnum)};m+=u}this.pagerElAr.pagerLine.style.width=m+&quot;px&quot;}if(this.aD.length&gt;0&amp;&amp;this.showRecInfo){this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(a+1)+this.i18n.paging.to+g+this.i18n.paging.of+this.aD.length}else{if(this.aD.length==0){this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine);this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound}}this.pagerElAr.pagerBox.appendChild(document.createElement(&quot;SPAN&quot;)).innerHTML=&quot; &quot;;this.pagerElAr.pagerBord.appendChild(document.createElement(&quot;SPAN&quot;)).innerHTML=&quot; &quot;;this.pagerElAr.pagerCont.appendChild(document.createElement(&quot;SPAN&quot;)).innerHTML=&quot; &quot;;this.callEvent(&quot;onPaging&quot;,[])};dhtmlXGridObject.prototype._pgn_toolbar=function(m,n,c){if(!this.aToolBar){this.aToolBar=this._pgn_createToolBar()}var l=Math.ceil(this.aD.length/this.cu);if(this._WTDef[0]){this.aToolBar.enableItem(&quot;right&quot;);this.aToolBar.enableItem(&quot;rightabs&quot;);this.aToolBar.enableItem(&quot;left&quot;);this.aToolBar.enableItem(&quot;leftabs&quot;);if(this.ew&gt;=l){this.aToolBar.disableItem(&quot;right&quot;);this.aToolBar.disableItem(&quot;rightabs&quot;)}if(this.ew==1){this.aToolBar.disableItem(&quot;left&quot;);this.aToolBar.disableItem(&quot;leftabs&quot;)}}if(this._WTDef[2]){var h=this;this.aToolBar.forEachListOption(&quot;pages&quot;,function(o){h.aToolBar.removeListOption(&quot;pages&quot;,o)});var a={dhx_skyblue:4,dhx_web:0,dhx_terrace:14}[this.aToolBar.kZ.skin];for(var g=0;g&lt;l;g++){this.aToolBar.addListOption(&quot;pages&quot;,&quot;pages_&quot;+(g+1),NaN,&quot;button&quot;,&quot;<SPAN style="padding: 0px &quot;+a+&quot;px 0px 0px;">&quot;+this.i18n.paging.page+(g+1)+&quot;</SPAN>&quot;,&quot;paging_page.gif&quot;)}this.aToolBar.setItemText(&quot;pages&quot;,this.i18n.paging.page+m)}if(this._WTDef[1]){if(!this.iD()){this.aToolBar.setItemText(&quot;results&quot;,this.i18n.paging.notfound)}else{this.aToolBar.setItemText(&quot;results&quot;,&quot;<DIV style="width:100%; text-align:center">&quot;+this.i18n.paging.records+(n+1)+this.i18n.paging.to+c+&quot;</DIV>&quot;)}}if(this._WTDef[3]){this.aToolBar.setItemText(&quot;perpagenum&quot;,this.cu.toString()+&quot; &quot;+this.i18n.paging.perpage)}this.callEvent(&quot;onPaging&quot;,[])};dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject({parent:this._pgn_parentObj,skin:(this._pgn_skin_tlb||this.skin_name),icons_path:this.eg});if(!this._WTDef){this.setPagingWTMode(true,true,true,true)}var h=this;this.aToolBar.attachEvent(&quot;onClick&quot;,function(l){l=l.split(&quot;_&quot;);switch(l[0]){case &quot;leftabs&quot;:h.changePage(1);break;case &quot;left&quot;:h.changePage(h.ew-1);break;case &quot;rightabs&quot;:h.changePage(99999);break;case &quot;right&quot;:h.changePage(h.ew+1);break;case &quot;perpagenum&quot;:if(l[1]===this.undefined){return}h.cu=parseInt(l[1]);h.changePage();h.aToolBar.setItemText(&quot;perpagenum&quot;,l[1]+&quot; &quot;+h.i18n.paging.perpage);break;case &quot;pages&quot;:if(l[1]===this.undefined){return}h.changePage(l[1]);h.aToolBar.setItemText(&quot;pages&quot;,h.i18n.paging.page+l[1]);break}});if(this._WTDef[0]){this.aToolBar.addButton(&quot;leftabs&quot;,NaN,null,&quot;ar_left_abs.gif&quot;,&quot;ar_left_abs_dis.gif&quot;);this.aToolBar.addButton(&quot;left&quot;,NaN,null,&quot;ar_left.gif&quot;,&quot;ar_left_dis.gif&quot;)}if(this._WTDef[1]){this.aToolBar.addText(&quot;results&quot;,NaN,this.i18n.paging.results);this.aToolBar.setWidth(&quot;results&quot;,&quot;150&quot;);this.aToolBar.disableItem(&quot;results&quot;)}if(this._WTDef[0]){this.aToolBar.addButton(&quot;right&quot;,NaN,null,&quot;ar_right.gif&quot;,&quot;ar_right_dis.gif&quot;);this.aToolBar.addButton(&quot;rightabs&quot;,NaN,null,&quot;ar_right_abs.gif&quot;,&quot;ar_right_abs_dis.gif&quot;)}if(this._WTDef[2]){if(this.aToolBar.kZ.skin==&quot;dhx_terrace&quot;){this.aToolBar.addSeparator()}this.aToolBar.addButtonSelect(&quot;pages&quot;,NaN,&quot;select page&quot;,[],&quot;paging_pages.gif&quot;,null,false,true)}var a;if(a=this._WTDef[3]){if(this.aToolBar.kZ.skin==&quot;dhx_terrace&quot;){this.aToolBar.addSeparator()}this.aToolBar.addButtonSelect(&quot;perpagenum&quot;,NaN,&quot;select size&quot;,[],&quot;paging_rows.gif&quot;,null,false,true);if(typeof a!=&quot;object&quot;){a=[5,10,15,20,25,30]}var c={dhx_skyblue:4,dhx_web:0,dhx_terrace:18}[this.aToolBar.kZ.skin];for(var g=0;g&lt;a.length;g++){this.aToolBar.addListOption(&quot;perpagenum&quot;,&quot;perpagenum_&quot;+a[g],NaN,&quot;button&quot;,&quot;<SPAN style="padding: 0px &quot;+c+&quot;px 0px 0px;">&quot;+a[g]+&quot; &quot;+this.i18n.paging.perpage+&quot;</SPAN>&quot;,&quot;paging_page.gif&quot;)}}return this.aToolBar};dhtmlXGridObject.prototype.post=function(a,c,h,g){this.callEvent(&quot;onXLS&quot;,[this]);if(arguments.length==3&amp;&amp;typeof h!=&quot;function&quot;){g=h;h=null}g=g||&quot;xml&quot;;c=c||&quot;&quot;;if(!this.tR){this.tR=a}this._data_type=g;this.bA.UR=function(n,l,q,o,m){m=n[&quot;_process_&quot;+g](m);if(!n.Bf){n.callEvent(&quot;onXLE&quot;,[n,0,0,m])}if(h){h();h=null}};this.bA.loadXML(a,true,c)};dhtmlXGridObject.prototype.setRowspan=function(s,v,l){var u=this[this._bfs_cells?&quot;_bfs_cells&quot;:&quot;cells&quot;](s,v).cell;var a=this.bj[s];if(u.rowSpan&amp;&amp;u.rowSpan!=1){var m=a.nextSibling;for(var o=1;o&lt;u.rowSpan;o++){var n=m.childNodes[m.bq[u._cellIndex+1]];var g=document.createElement(&quot;TD&quot;);g.innerHTML=&quot; &quot;;g._cellIndex=u._cellIndex;g.mG=true;if(n){n.parentNode.insertBefore(g,n)}else{m.parentNode.appendChild(g)}this._shiftIndexes(m,u._cellIndex,-1);m=m.nextSibling}}u.rowSpan=l;if(!this._h2){a=a.nextSibling||this.am[this.am.bP(a)+1]}else{a=this.bj[this._h2.get[a.idd].parent.bu[this._h2.get[a.idd].index+1].id]}var h=[];for(var o=1;o&lt;l;o++){var q=null;if(this.aC&amp;&amp; !this.nh){q=this._bfs_cells3(a,v).cell}else{q=this.cells3(a,v).cell}this._shiftIndexes(a,u._cellIndex,1);if(q){q.parentNode.removeChild(q)}h.push(a);if(!this._h2){a=a.nextSibling||this.am[this.am.bP(a)+1]}else{var a=this._h2.get[a.idd].parent.bu[this._h2.get[a.idd].index+1];if(a){a=this.bj[a.id]}}}this.bj[s]._rowSpan=this.bj[s]._rowSpan||{};this.bj[s]._rowSpan[v]=h;if(this.aC&amp;&amp; !this.nh&amp;&amp;v&lt;this.aC._cCount){this.aC.setRowspan(s,v,l)}};dhtmlXGridObject.prototype._shiftIndexes=function(a,h,c){if(!a.bq){a.bq=new Array();for(var g=0;g&lt;a.childNodes.length;g++){a.bq[g]=g}}for(var g=0;g&lt;a.bq.length;g++){if(g&gt;h){a.bq[g]=a.bq[g]-c}}};dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=true;this.enableRowspan=function(){};this.attachEvent(&quot;onAfterSorting&quot;,function(){if(this.ic){return}for(var l=1;l&lt;this.obj.rows.length;l++){if(this.obj.rows[l]._rowSpan){var a=this.obj.rows[l];for(var m in a._rowSpan){var q=a;var c=q._rowSpan[m];for(var g=0;g&lt;c.length;g++){if(q.nextSibling){q.parentNode.insertBefore(c[g],q.nextSibling)}else{q.parentNode.appendChild(c[g])}if(this.aC){var h=this.aC.bj[q.idd];var n=this.aC.bj[c[g].idd];if(h.nextSibling){h.parentNode.insertBefore(n,h.nextSibling)}else{h.parentNode.appendChild(n)}this._correctRowHeight(q.idd)}q=q.nextSibling}}}}var o=this.am.stablesort;this.am=new dhtmlxArray();this.am.stablesort=o;for(var l=1;l&lt;this.obj.rows.length;l++){this.am.push(this.obj.rows[l])}});this.attachEvent(&quot;onXLE&quot;,function(h,g,r,m){for(var n=0;n&lt;this.aD.length;n++){var q=this.render_row(n);var o=q.childNodes;for(var l=0;l&lt;o.length;l++){if(o[l]._attrs.rowspan){this.setRowspan(q.idd,l,o[l]._attrs.rowspan)}}}})};dhtmlXGridObject.prototype._init_point_bspl=dhtmlXGridObject.prototype.Yz;dhtmlXGridObject.prototype.Yz=function(){if(this._split_later){this.tT(this._split_later)}this.Yz=this._init_point_bspl;if(this.Yz){this.Yz()}};dhtmlXGridObject.prototype.tT=function(l){if(!this.obj.rows[0]){return this._split_later=l}l=parseInt(l);var a=document.createElement(&quot;DIV&quot;);this.aL.appendChild(a);var m=document.createElement(&quot;DIV&quot;);this.aL.appendChild(m);for(var q=this.aL.childNodes.length-3;q&gt;=0;q--){m.insertBefore(this.aL.childNodes[q],m.firstChild)}this.aL.style.position=&quot;relative&quot;;this.globalBox=this.aL;this.aL=m;m.grid=this;a.style.cssText+=&quot;border:0px solid red !important;&quot;;m.style.cssText+=&quot;border:0px solid red !important;&quot;;m.style.top=&quot;0px&quot;;m.style.position=&quot;absolute&quot;;a.style.position=&quot;absolute&quot;;a.style.top=&quot;0px&quot;;a.style.left=&quot;0px&quot;;a.style.zIndex=11;m.style.height=a.style.height=this.globalBox.clientHeight;this.aC=new dhtmlXGridObject(a);this.globalBox=this.aC.globalBox=this.globalBox;this.aC.aC=this;this.aC.nh=true;this._treeC=this.cellType.bP(&quot;tree&quot;);this.aC.gX=this.gX;this.aC.customGroupFormat=this.customGroupFormat;this.aC.setImagesPath(this._imgURL);this.aC.iconURL=this.iconURL;this.aC._customSorts=this._customSorts;this.aC.sB=this.sB;this.aC.FB=this.FB;this.aC.Zl=this.Zl;this.aC.clists=this.clists;this.aC.fldSort=new Array();this.aC.gN=this.gN;this.aC.hu=this.hu;if(this.hu||this._erspan){this.attachEvent(&quot;onCellChanged&quot;,this._correctRowHeight);this.attachEvent(&quot;onRowAdded&quot;,this._correctRowHeight);var y=function(){this.forEachRow(function(C){this._correctRowHeight(C)})};this.attachEvent(&quot;onPageChanged&quot;,y);this.attachEvent(&quot;onXLE&quot;,y);this.attachEvent(&quot;onResizeEnd&quot;,y);if(!this.Hv){this.attachEvent(&quot;onAfterSorting&quot;,y)}if(this.ahK){this.attachEvent(&quot;onFilterEnd&quot;,y)}this.attachEvent(&quot;onDistributedEnd&quot;,y)}this.attachEvent(&quot;onGridReconstructed&quot;,function(){this.aC.HF.scrollTop=this.HF.scrollTop});this.aC.loadedKidsHash=this.loadedKidsHash;if(this._h2){this.aC._h2=this._h2}this.aC._dInc=this._dInc;var x=[[],[],[],[],[],[],[]];var o=[&quot;hdrLabels&quot;,&quot;initCellWidth&quot;,&quot;cellType&quot;,&quot;cellAlign&quot;,&quot;cellVAlign&quot;,&quot;fldSort&quot;,&quot;columnColor&quot;];var v=[&quot;setHeader&quot;,&quot;setInitWidths&quot;,&quot;setColTypes&quot;,&quot;setColAlign&quot;,&quot;setColVAlign&quot;,&quot;setColSorting&quot;,&quot;setColumnColor&quot;];this.aC.callEvent=function(){var C=true;this.aC._split_event=true;var D=(arguments[0]==&quot;onScroll&quot;);if(arguments[0]==&quot;onGridReconstructed&quot;||D){this.aC.callEvent.apply(this,arguments)}if(!D){C=this.aC.callEvent.apply(this.aC,arguments)}this.aC._split_event=false;return C};if(this.UJ){this.aC.enableLightMouseNavigation(true)}if(this.__cssEven||this.iI){this.aC.attachEvent(&quot;onGridReconstructed&quot;,function(){this._fixAlterCss()})}this.aC.hC=this.hC;this.aC.iI=this.iI;this.aC.Cw=this.Cw;this.aC.oB=this.oB;this.aC._edtc=this._edtc;if(this.agg){this.aC.enableStableSorting(true)}this.aC.aU=this.aU;this.aC.aP=this.aP;this.aC.UB=this.UB;this.aC._maskArr=this._maskArr;this.aC.RY=this.RY;this.aC.combos=this.combos;var g=0;var s=this.globalBox.offsetWidth;for(var q=0;q&lt;l;q++){for(var n=0;n&lt;o.length;n++){if(this[o[n]]){x[n][q]=this[o[n]][q]}if(typeof x[n][q]==&quot;string&quot;){x[n][q]=x[n][q].replace(new RegExp(&quot;\\&quot;+this.gX,&quot;g&quot;),&quot;\\&quot;+this.gX)}}if(aq){x[1][q]=x[1][q]*1}if(this.fL==&quot;%&quot;){x[1][q]=Math.round(parseInt(this[o[1]][q])*s/100);g+=x[1][q]}else{g+=parseInt(this[o[1]][q])}this.setColumnHidden(q,true)}for(var n=0;n&lt;o.length;n++){var w=x[n].join(this.gX);if(v[n]!=&quot;setHeader&quot;){if(w!=&quot;&quot;){this.aC[v[n]](w)}}else{this.aC[v[n]](w,null,this.Oi)}}this.aC.dA=this.dA;this.aC.qZ=this.qZ;g=Math.min(this.globalBox.offsetWidth,g);m.style.left=g+&quot;px&quot;;a.style.width=g+&quot;px&quot;;m.style.width=Math.max(this.globalBox.offsetWidth-g,0);if(this.CP){this.aC.CP=true}this.aC.init();if(this.nz){this.ae.eH(this.aC.aL,this)}this.aC.HF.style.overflow=&quot;hidden&quot;;if(!dhtmlx.$customScroll){this.aC.HF.style.overflowX=&quot;scroll&quot;}else{this.aC.HF._custom_scroll_mode=&quot;&quot;}this.aC.ig=this.ig||20;this.aC.ahK=this.ahK;var A=this;function u(E){var D=E.wheelDelta/ -40;if(E.wheelDelta===window.undefined){D=E.detail}var C=A.HF;C.scrollTop+=D*40;if(E.preventDefault){E.preventDefault()}}dhtmlxEvent(this.aC.HF,&quot;mousewheel&quot;,u);dhtmlxEvent(this.aC.HF,&quot;DOMMouseScroll&quot;,u);function c(D,C){C.style.whiteSpace=&quot;&quot;;var H=C.nextSibling;var E=C.parentNode;D.parentNode.insertBefore(C,D);if(!H){E.appendChild(D)}else{E.insertBefore(D,H)}var F=D.style.display;D.style.display=C.style.display;C.style.display=F}function h(K,S,L,D){var E=(new Array(l)).join(this.gX);var M=[];if(K==2){for(var I=0;I&lt;l;I++){var C=S[K-1].cells[S[K-1].bq?S[K-1].bq[I]:I];if(C.rowSpan&amp;&amp;C.rowSpan&gt;1){M[C._cellIndex]=C.rowSpan-1;D[K-1].cells[D[K-1].bq?D[K-1].bq[I]:I].rowSpan=C.rowSpan;C.rowSpan=1}}}for(K;K&lt;S.length;K++){this.aC.attachHeader(E,null,L);D=D||this.aC.ftr.childNodes[0].rows;var P=l;var F=0;for(var J=0;J<P>=1.9)||cU){var H=document.createElement(&quot;TD&quot;);if(aq){H.style.display=&quot;none&quot;}S[K].insertBefore(H,S[K].cells[0])}F++;continue}var O=D[K].cells[J-F];var N=S[K].cells[J-(_isIE?0:F)];var Q=N.rowSpan;c(O,N);if(Q&gt;1){M[J]=Q-1;N.rowSpan=Q}if(D[K].cells[J].colSpan&gt;1){S[K].cells[J].colSpan=D[K].cells[J].colSpan;P-=D[K].cells[J].colSpan-1;for(var I=1;I&lt;D[K].cells[J].colSpan;I++){D[K].removeChild(D[K].cells[J+1])}}}}}if(this.hdr.rows.length&gt;2){h.call(this,2,this.hdr.rows,&quot;_aHead&quot;,this.aC.hdr.rows)}if(this.ftr){h.call(this,1,this.ftr.childNodes[0].rows,&quot;_aFoot&quot;);this.aC.ftr.parentNode.style.bottom=(aq?2:1)+&quot;px&quot;}if(this.saveSizeToCookie){this.saveSizeToCookie=function(D,C){if(this.nh){return this.aC.saveSizeToCookie.apply(this.aC,arguments)}if(!D){D=this.aL.id}var F=new Array();var H=&quot;cellWidthPX&quot;;for(var E=0;E&lt;this[H].length;E++){if(E&lt;l){F[E]=this.aC[H][E]}else{F[E]=this[H][E]}}F=F.join(&quot;,&quot;);this.setCookie(D,C,0,F);var F=(this.initCellWidth||(new Array)).join(&quot;,&quot;);this.setCookie(D,C,1,F);return true};this.loadSizeFromCookie=function(C){if(!C){C=this.aL.id}var H=this._getCookie(C,1);if(!H){return}this.initCellWidth=H.split(&quot;,&quot;);var H=this._getCookie(C,0);var I=&quot;cellWidthPX&quot;;this.fL=&quot;px&quot;;var E=0;if((H)&amp;&amp;(H.length)){H=H.split(&quot;,&quot;);for(var D=0;D&lt;H.length;D++){if(D&lt;l){this.aC[I][D]=H[D];E+=H[D]*1}else{this[I][D]=H[D]}}}this.aC.aL.style.width=E+&quot;px&quot;;this.aC.HF.style.width=E+&quot;px&quot;;var F=this.globalBox.childNodes[1];F.style.left=E-(aq?0:0)+&quot;px&quot;;if(this.ftr){this.ftr.style.left=E-(aq?0:0)+&quot;px&quot;}F.style.width=this.globalBox.offsetWidth-E+&quot;px&quot;;this.setSizes();return true};this.aC.onRSE=this.onRSE}this.setCellTextStyleA=this.setCellTextStyle;this.setCellTextStyle=function(D,E,C){if(E&lt;l){this.aC.setCellTextStyle(D,E,C)}this.setCellTextStyleA(D,E,C)};this.setRowTextBoldA=this.tG;this.tG=function(C){this.setRowTextBoldA(C);this.aC.tG(C)};this.setRowColorA=this.EA;this.EA=function(D,C){this.setRowColorA(D,C);this.aC.EA(D,C)};this.setRowHiddenA=this.sO;this.sO=function(D,C){this.setRowHiddenA(D,C);this.aC.sO(D,C)};this.setRowTextNormalA=this.rn;this.rn=function(C){this.setRowTextNormalA(C);this.aC.rn(C)};this.Dk=function(E){var C=new Array();function D(H){for(var F=0;F&lt;H.childNodes.length;F++){if(H.childNodes[F].hy){return C[C.length]=H.idd}}}this.forEachRow(function(I){var H=this.bj[I];var F=this.aC.bj[I];if(H.tagName!=&quot;TR&quot;||F.tagName!=&quot;TR&quot;){return}if(E&amp;&amp;H.adM){C[C.length]=H.idd}else{if(!D(H)){D(F)}}});return C.join(this.gX)};this.setRowTextStyleA=this.setRowTextStyle;this.setRowTextStyle=function(D,C){this.setRowTextStyleA(D,C);if(this.aC.bj[D]){this.aC.setRowTextStyle(D,C)}};this.lockRowA=this.at;this.at=function(D,C){this.lockRowA(D,C);this.aC.at(D,C)};this.yI=function(C){if(C&lt;l){return parseInt(this.aC.cellWidthPX[C])}else{return parseInt(this.cellWidthPX[C])}};this.adE=function(C){return this.aC.adE.apply(((C&lt;l)?this.aC:this),arguments)};this.setColWidthA=this.aC.setColWidthA=this.setColWidth;this.setColWidth=function(C,D){C=C*1;if(C&lt;l){this.aC.setColWidthA(C,D)}else{this.setColWidthA(C,D)}if((C+1)&lt;=l){this.aC.rk(Math.min(this.aC.HF.offsetWidth,this.aC.obj.offsetWidth))}};this.adjustColumnSizeA=this.nT;this.setColumnLabelA=this.adA;this.adA=function(D,C,H,F){var E=this;if(D&lt;l){E=this.aC}return this.setColumnLabelA.apply(E,[D,C,H,F])};this.nT=function(C,D){if(C&lt;l){if(_isIE){this.aC.obj.style.tableLayout=&quot;&quot;}this.aC.nT(C,D);if(_isIE){this.aC.obj.style.tableLayout=&quot;fixed&quot;}this.aC.rk()}else{return this.adjustColumnSizeA(C,D)}};var r=&quot;cells&quot;;this._bfs_cells=this[r];this[r]=function(){if(arguments[1]&lt;l){return this.aC.cells.apply(this.aC,arguments)}else{return this._bfs_cells.apply(this,arguments)}};this._bfs_isColumnHidden=this.Fs;this.Fs=function(){if(parseInt(arguments[0])&lt;l){return this.aC.Fs.apply(this.aC,arguments)}else{return this._bfs_isColumnHidden.apply(this,arguments)}};this._bfs_setColumnHidden=this.setColumnHidden;this.setColumnHidden=function(){if(parseInt(arguments[0])&lt;l){this.aC.setColumnHidden.apply(this.aC,arguments);return this.aC.rk()}else{return this._bfs_setColumnHidden.apply(this,arguments)}};var r=&quot;cells2&quot;;this._bfs_cells2=this[r];this[r]=function(){if(arguments[1]&lt;l){return this.aC.cells2.apply(this.aC,arguments)}else{return this._bfs_cells2.apply(this,arguments)}};var r=&quot;cells3&quot;;this._bfs_cells3=this[r];this[r]=function(D,C){if(arguments[1]&lt;l&amp;&amp;this.aC.bj[arguments[0].idd]){if(this.aC.bj[D.idd]&amp;&amp;this.aC.bj[D.idd].childNodes.length==0){return this._bfs_cells3.apply(this,arguments)}arguments[0]=arguments[0].idd;return this.aC.cells.apply(this.aC,arguments)}else{return this._bfs_cells3.apply(this,arguments)}};var r=&quot;changeRowId&quot;;this._bfs_changeRowId=this[r];this[r]=function(){this._bfs_changeRowId.apply(this,arguments);if(this.aC.bj[arguments[0]]){this.aC.changeRowId.apply(this.aC,arguments)}};this.aC.dz=function(E){var D=this.bj[E];if(!D&amp;&amp;this.aC.bj[E]){D=this.aC.dz(E)}if(D){if(D.tagName!=&quot;TR&quot;){for(var C=0;C&lt;this.aD.length;C++){if(this.aD[C]&amp;&amp;this.aD[C].idd==E){return this.render_row(C)}}if(this._h2){return this.render_row(null,D.idd)}}return D}return null};if(this.collapseKids){this.aC._bfs_collapseKids=this.collapseKids;this.aC.collapseKids=function(){return this.aC.collapseKids.apply(this.aC,[this.aC.bj[arguments[0].idd]])};this[&quot;_bfs_collapseKids&quot;]=this.collapseKids;this[&quot;collapseKids&quot;]=function(){var C=this[&quot;_bfs_collapseKids&quot;].apply(this,arguments);this.aC._h2syncModel();if(!this.Cw){this.aC._fixAlterCss()}};this.aC._bfs_expandKids=this.expandKids;this.aC.expandKids=function(){this.aC.expandKids.apply(this.aC,[this.aC.bj[arguments[0].idd]]);if(!this.Cw){this.aC._fixAlterCss()}};this[&quot;_bfs_expandAll&quot;]=this.expandAll;this[&quot;expandAll&quot;]=function(){this._bfs_expandAll();this.aC._h2syncModel();if(!this.Cw){this.aC._fixAlterCss()}};this[&quot;_bfs_collapseAll&quot;]=this.collapseAll;this[&quot;collapseAll&quot;]=function(){this._bfs_collapseAll();this.aC._h2syncModel();if(!this.Cw){this.aC._fixAlterCss()}};this[&quot;_bfs_expandKids&quot;]=this.expandKids;this[&quot;expandKids&quot;]=function(){var C=this[&quot;_bfs_expandKids&quot;].apply(this,arguments);this.aC._h2syncModel();if(!this.Cw){this.aC._fixAlterCss()}};this.aC._h2syncModel=function(){if(this.aC.aW){this.aC.uR()}else{this.uR()}};this.cO=function(C){return this.aC.cO(C)}}if(this.Qh){this._setRowHoverA=this.aC._setRowHoverA=this.ff;this._unsetRowHoverA=this.aC._unsetRowHoverA=this.Rz;this.ff=this.aC.ff=function(){var C=this.grid;C._setRowHoverA.apply(this,arguments);var D=(_isIE?event.srcElement:arguments[0].target);D=C.aC.bj[C.bw(D,&quot;TD&quot;).parentNode.idd];if(D){C.aC._setRowHoverA.apply(C.aC.obj,[{target:D.childNodes[0]},arguments[1]])}};this.Rz=this.aC.Rz=function(){if(arguments[1]){var C=this}else{var C=this.grid}C._unsetRowHoverA.apply(this,arguments);C.aC._unsetRowHoverA.apply(C.aC.obj,arguments)};this.aC.enableRowsHover(true,this.Lk);this.enableRowsHover(false);this.enableRowsHover(true,this.aC.Lk)}this.cO=function(C){if(!C.update||C.id==0){return}if(this.bj[C.id].imgTag){this.bj[C.id].imgTag.src=this.iconTree+C.state+&quot;.gif&quot;}if(this.aC.bj[C.id]&amp;&amp;this.aC.bj[C.id].imgTag){this.aC.bj[C.id].imgTag.src=this.iconTree+C.state+&quot;.gif&quot;}C.update=false};this.copy_row=function(H){var C=H.cloneNode(true);C.WX=H.WX;var I=l;C._attrs={};C.Vn=H.Vn;if(this.CP){I=0;for(var F=0;(I&lt;C.childNodes.length&amp;&amp;F&lt;l);F+=(C.childNodes[I].colSpan||1)){I++}}while(C.childNodes.length&gt;I){C.removeChild(C.childNodes[C.childNodes.length-1])}var E=I;for(var F=0;F&lt;E;F++){if(this.nz){this.ae.dS(C.childNodes[F],this)}C.childNodes[F].style.display=(this.aC._hrrar?(this.aC._hrrar[F]?&quot;none&quot;:&quot;&quot;):&quot;&quot;);C.childNodes[F]._cellIndex=F;C.childNodes[F].combo_value=arguments[0].childNodes[F].combo_value;C.childNodes[F].mG=arguments[0].childNodes[F].mG;C.childNodes[F].zk=arguments[0].childNodes[F].zk;C.childNodes[F]._brval=arguments[0].childNodes[F]._brval;C.childNodes[F].val=arguments[0].childNodes[F].val;C.childNodes[F]._attrs=arguments[0].childNodes[F]._attrs;C.childNodes[F].chstate=arguments[0].childNodes[F].chstate;if(H._attrs.style){C.childNodes[F].style.cssText+=&quot;;&quot;+H._attrs.style}if(C.childNodes[F].colSpan&gt;1){this.bq=this.aC.bq}}if(this._h2&amp;&amp;this._treeC&lt;l){var D=this._h2.get[arguments[0].idd];C.imgTag=C.childNodes[this._treeC].childNodes[0].childNodes[D.gR];C.JT=C.childNodes[this._treeC].childNodes[0].childNodes[D.gR+2]}C.idd=H.idd;C.grid=this.aC;return C};var r=&quot;_insertRowAt&quot;;this._bfs_insertRowAt=this[r];this[r]=function(){var D=this[&quot;_bfs_insertRowAt&quot;].apply(this,arguments);arguments[0]=this.copy_row(arguments[0]);var C=this.aC._insertRowAt.apply(this.aC,arguments);if(D._fhd){C.parentNode.removeChild(C);this.aC.am.aa(this.aC.am.bP(C));D._fhd=false}return D};this._bfs_setSizes=this.setSizes;this.setSizes=function(){if(this.Hc){return}this._bfs_setSizes(this,arguments);this.sync_headers();if(this.sync_scroll()&amp;&amp;this.abK){this.setSizes()}var C=this.dontSetSizes?(this.aL.offsetHeight+&quot;px&quot;):this.aL.style.height;this.aC.aL.style.height=C;this.aC.HF.style.height=this.HF.style.height;this.aC.kR.style.height=this.kR.style.height;this.aC.HF.scrollTop=this.HF.scrollTop;this.aC.setColumnSizes(this.aC.aL.clientWidth);this.globalBox.style.width=parseInt(this.aL.style.width)+parseInt(this.aC.aL.style.width);if(!this.dontSetSizes){this.globalBox.style.height=C}};this.sync_scroll=this.aC.sync_scroll=function(D){var C=this.HF.style.overflowX;if(this.obj.offsetWidth&lt;=this.HF.offsetWidth){if(!D){return this.aC.sync_scroll(true)}this.HF.style.overflowX=&quot;hidden&quot;;this.aC.HF.style.overflowX=&quot;hidden&quot;}else{if(!dhtmlx.$customScroll){this.HF.style.overflowX=&quot;scroll&quot;;this.aC.HF.style.overflowX=&quot;scroll&quot;}}return C!=this.HF.style.overflowX};this.sync_headers=this.aC.sync_headers=function(){if(this.sB||(this.aC.hdr.scrollHeight==this.hdr.offsetHeight)){return}for(var D=1;D&lt;this.hdr.rows.length;D++){var F=l;while(!this.hdr.rows[D].childNodes[F]){F--}var C=Math.min(this.hdr.rows[D].childNodes[F].scrollHeight+2,this.hdr.rows[D].scrollHeight);var E=this.aC.hdr.rows[D].scrollHeight;if(C!=E){this.aC.hdr.rows[D].style.height=this.hdr.rows[D].style.height=Math.max(C,E)+&quot;px&quot;}if(window._KHTMLrv){this.aC.hdr.rows[D].childNodes[0].style.height=this.hdr.rows[D].childNodes[F].style.height=Math.max(C,E)+&quot;px&quot;}}this.aC.sync_headers};this.aC._bfs_setSizes=this.aC.setSizes;this.aC.setSizes=function(){if(this.aC.Hc){return}this.aC.setSizes()};var r=&quot;_doOnScroll&quot;;this._bfs__doOnScroll=this[r];this[r]=function(){this._bfs__doOnScroll.apply(this,arguments);this.aC.HF.scrollTop=this.HF.scrollTop;this.aC._doOnScroll.apply(this.aC,arguments)};var r=&quot;selectAll&quot;;this._bfs__selectAll=this[r];this[r]=function(){this._bfs__selectAll.apply(this,arguments);this._bfs__selectAll.apply(this.aC,arguments)};var r=&quot;doClick&quot;;this._bfs_doClick=this[r];this[r]=function(){this[&quot;_bfs_doClick&quot;].apply(this,arguments);if(arguments[0].tagName==&quot;TD&quot;){var C=(arguments[0]._cellIndex&gt;=l);if(!arguments[0].parentNode.idd){return}if(!C){arguments[0].className=arguments[0].className.replace(/cellselected/g,&quot;&quot;)}if(!this.aC.bj[arguments[0].parentNode.idd]){this.aC.render_row(this.getRowIndex(arguments[0].parentNode.idd))}arguments[0]=this.aC.cells(arguments[0].parentNode.idd,(C?0:arguments[0]._cellIndex)).cell;if(C){this.aC.cell=null}this.aC._bfs_doClick.apply(this.aC,arguments);if(C){this.aC.cell=this.cell}else{this.cell=this.aC.cell}if(this.aC.Ti){clearTimeout(this.aC.Ti)}if(C){arguments[0].className=arguments[0].className.replace(/cellselected/g,&quot;&quot;);globalActiveDHTMLGridObject=this;this.aC.cell=this.cell}else{this.HF.scrollTop=this.aC.HF.scrollTop}}};this.aC._bfs_doClick=this.aC[r];this.aC[r]=function(){this[&quot;_bfs_doClick&quot;].apply(this,arguments);if(arguments[0].tagName==&quot;TD&quot;){var C=(arguments[0]._cellIndex&lt;l);if(!arguments[0].parentNode.idd){return}arguments[0]=this.aC._bfs_cells(arguments[0].parentNode.idd,(C?l:arguments[0]._cellIndex)).cell;this.aC.cell=null;this.aC._bfs_doClick.apply(this.aC,arguments);this.aC.cell=this.cell;if(this.aC.Ti){clearTimeout(this.aC.Ti)}if(C){arguments[0].className=arguments[0].className.replace(/cellselected/g,&quot;&quot;);globalActiveDHTMLGridObject=this;this.aC.cell=this.cell;this.aC.HF.scrollTop=this.HF.scrollTop}}};this.clearSelectionA=this.pL;this.pL=function(C){if(C){this.aC.pL()}this.clearSelectionA()};this.moveRowUpA=this.zs;this.zs=function(C){if(!this._h2){this.aC.zs(C)}this.moveRowUpA(C);if(this._h2){this.aC._h2syncModel()}};this.moveRowDownA=this.uQ;this.uQ=function(C){if(!this._h2){this.aC.uQ(C)}this.moveRowDownA(C);if(this._h2){this.aC._h2syncModel()}};this.aC.getUserData=function(){return this.aC.getUserData.apply(this.aC,arguments)};this.aC.setUserData=function(){return this.aC.setUserData.apply(this.aC,arguments)};this.getSortingStateA=this.xu;this.xu=function(){var C=this.getSortingStateA();if(C.length!=0){return C}return this.aC.xu()};this.setSortImgStateA=this.aC.setSortImgStateA=this.co;this.co=function(D,C,F,E){this.setSortImgStateA(D,C,F,E);if(C*1&lt;l){this.aC.setSortImgStateA(D,C,F,E);this.setSortImgStateA(false)}else{this.aC.setSortImgStateA(false)}};this.aC.doColResizeA=this.aC.EO;this.aC.EO=function(H,F,E,C,J){var D= -1;var I=0;if(arguments[1]._cellIndex==(l-1)){D=this._initalSplR+(H.clientX-C);if(!this._initalSplF){this._initalSplF=arguments[3]+this.HF.scrollWidth-this.HF.offsetWidth}if(this.HF.scrollWidth==this.HF.offsetWidth&amp;&amp;(this.aC.alter_split_resize||(H.clientX-C)&gt;0)){arguments[3]=(this._initalSplF||arguments[3]);I=this.doColResizeA.apply(this,arguments)}else{I=this.doColResizeA.apply(this,arguments)}}else{if(this.obj.offsetWidth&lt;this.aL.offsetWidth){D=this.obj.offsetWidth}I=this.doColResizeA.apply(this,arguments)}this.rk(D);this.resized=this.aC.resized=1;return I};this.aC.bX=function(E){var D=E.target||E.srcElement;if(D.tagName!=&quot;TD&quot;){D=this.bw(D,&quot;TD&quot;)}if((D.tagName==&quot;TD&quot;)&amp;&amp;(this.qZ)&amp;&amp;(!this.qZ[D._cellIndex])){return}var C=(E.layerX||0)+(((!_isIE)&amp;&amp;(E.target.tagName==&quot;DIV&quot;))?D.offsetLeft:0);var F=parseInt(this.fI(D,this.kR));if(((D.offsetWidth-(E.offsetX||(F-C)* -1))&lt;(cU?20:10))||((this.aL.offsetWidth-(E.offsetX?(E.offsetX+D.offsetLeft):C)+this.HF.scrollLeft-0)&lt;(cU?20:10))){D.style.cursor=&quot;E-resize&quot;}else{D.style.cursor=&quot;default&quot;}if(cU){this.kR.scrollLeft=this.HF.scrollLeft}};this.aC.startColResizeA=this.aC.eJ;this.aC.eJ=function(D){var E=this.startColResizeA(D);this._initalSplR=this.aL.offsetWidth;this._initalSplF=null;if(this.aL.onmousemove){var C=this.aL.parentNode;if(C._aggrid){return E}C._aggrid=C.grid;C.grid=this;this.aL.parentNode.onmousemove=this.aL.onmousemove;this.aL.onmousemove=null}return E};this.aC.stopColResizeA=this.aC.fN;this.aC.fN=function(D){if(this.aL.parentNode.onmousemove){var C=this.aL.parentNode;C.grid=C._aggrid;C._aggrid=null;this.aL.onmousemove=this.aL.parentNode.onmousemove;this.aL.parentNode.onmousemove=null;if(this.obj.offsetWidth&lt;this.aL.offsetWidth){this.rk(this.obj.offsetWidth)}}return this.stopColResizeA(D)};this.doKeyA=this.bQ;this.aC.doKeyA=this.aC.bQ;this.aC.bQ=this.bQ=function(E){if(!E){return true}if(this.Zl){return true}if((E.target||E.srcElement).value!==window.undefined){var C=(E.target||E.srcElement);if((!C.parentNode)||(C.parentNode.className.indexOf(&quot;editable&quot;)== -1)){return true}}switch(E.keyCode){case 9:if(!E.shiftKey){if(this.nh){if((this.cell)&amp;&amp;(this.cell._cellIndex==(l-1))){if(E.preventDefault){E.preventDefault()}var D=l;while(this.aC._hrrar&amp;&amp;this.aC._hrrar[D]){D++}this.aC.eQ(this.aC.getRowIndex(this.cell.parentNode.idd),D,false,false,true);return false}else{var F=this.doKeyA(E)}globalActiveDHTMLGridObject=this;return F}else{if(this.cell){var D=this.cell._cellIndex+1;while(this.am[0].childNodes[D]&amp;&amp;this.am[0].childNodes[D].style.display==&quot;none&quot;){D++}if(D==this.am[0].childNodes.length){if(E.preventDefault){E.preventDefault()}var F=this.aD[this.getRowIndex(this.cell.parentNode.idd)+1];if(F){this.aqG(F.idd);this.aC.eQ(this.aC.getRowIndex(F.idd),0,false,false,true);return false}}}return this.doKeyA(E)}}else{if(this.nh){if((this.cell)&amp;&amp;(this.cell._cellIndex==0)){if(E.preventDefault){E.preventDefault()}var F=this.aC.aD[this.aC.getRowIndex(this.cell.parentNode.idd)-1];if(F){this.aC.aqG(F.idd);var D=this.aC._cCount-1;while(F.childNodes[D].style.display==&quot;none&quot;){D--}this.aC.eQ(this.aC.getRowIndex(F.idd),D,false,false,true)}return false}else{return this.doKeyA(E)}}else{if((this.cell)&amp;&amp;(this.cell._cellIndex==l)){if(E.preventDefault){E.preventDefault()}this.aC.eQ(this.getRowIndex(this.cell.parentNode.idd),l-1,false,false,true);return false}else{return this.doKeyA(E)}}}break}return this.doKeyA(E)};this.editCellA=this.gh;this.gh=function(){if(this.cell&amp;&amp;this.cell.parentNode.grid!=this){return this.aC.gh()}return this.editCellA()};this.deleteRowA=this.deleteRow;this.deleteRow=function(C,D){if(this.deleteRowA(C,D)===false){return false}if(this.aC.bj[C]){this.aC.deleteRow(C)}};this.clearAllA=this.clearAll;this.clearAll=function(){this.clearAllA();this.aC.clearAll()};this.editStopA=this.editStop;this.editStop=function(C){if(this.aC.editor){this.aC.editStop(C)}else{this.editStopA(C)}};this.attachEvent(&quot;onAfterSorting&quot;,function(D,C,E){if(D&gt;=l){this.aC.co(false)}});this.aC.adU=function(D,C,F){this.aC.adU.call(this.aC,D,C,this.aC.hdr.rows[0].cells[D]);if(this.fldSort[D]!=&quot;na&quot;&amp;&amp;this.aC.ij){var E=this.aC.xu()[1];this.aC.co(false);this.co(true,arguments[0],E)}};this.sortTreeRowsA=this.sT;this.aC.sortTreeRowsA=this.aC.sT;this.sT=this.aC.sT=function(E,F,C,D){if(this.nh){return this.aC.sT(E,F,C,D)}this.sortTreeRowsA(E,F,C,D);this.aC._h2syncModel();this.aC.setSortImgStateA(false);this.aC.ij=null};this.aC._fillers=[];this.aC.aD=this.aD;this.attachEvent(&quot;onClearAll&quot;,function(){this.aC.aD=this.aD});this._add_filler_s=this._add_filler;this._add_filler=function(D,C,H,E){if(!this.aC._fillers){this.aC._fillers=[]}if(this.nh|| !E){var F;if(H|| !this.aC._fillers.length){if(H&amp;&amp;H.idd){F=this.aC.bj[H.idd]}else{if(H&amp;&amp;H.nextSibling){F={};F.nextSibling=this.aC.bj[H.nextSibling.idd];F.parentNode=F.nextSibling.parentNode}}this.aC._fillers.push(this.aC._add_filler(D,C,F))}}return this._add_filler_s.apply(this,arguments)};this._add_from_buffer_s=this._add_from_buffer;this._add_from_buffer=function(){var C=this._add_from_buffer_s.apply(this,arguments);if(C!= -1){this.aC._add_from_buffer.apply(this.aC,arguments);if(this.hu){this._correctRowHeight(this.aD[arguments[0]].idd)}}return C};this.aC.render_row=function(C){var D=this.aC.render_row(C);if(D== -1){return-1}if(D){return this.bj[D.idd]=this.bj[D.idd]||this.aC.copy_row(D)}return null};this._reset_view_s=this._reset_view;this._reset_view=function(){this.aC._reset_view(true);this.aC._fillers=[];this._reset_view_s()};this.moveColumn_s=this.moveColumn;this.moveColumn=function(D,C){if(C&gt;=l){return this.moveColumn_s(D,C)}};this.attachEvent(&quot;onCellChanged&quot;,function(H,E,F){if(this._split_event&amp;&amp;E&lt;l&amp;&amp;this.bj[H]){var C=this.aC.bj[H];if(!C){return}if(C.bq){C=C.childNodes[C.bq[E]]}else{C=C.childNodes[E]}var D=this.bj[H].childNodes[E];if(D._treeCell&amp;&amp;D.firstChild.lastChild){D.firstChild.lastChild.innerHTML=F}else{D.innerHTML=C.innerHTML}D.mG=false;D.combo_value=C.combo_value;D.chstate=C.chstate}});this.aC.combos=this.combos;this.setSizes();if(this.aD[0]){this._reset_view()}this.attachEvent(&quot;onXLE&quot;,function(){this.aC.rk()});this.aC.rk()};dhtmlXGridObject.prototype.rk=function(c){c=c||(this.obj.scrollWidth-this.HF.scrollLeft);c=Math.min(this.globalBox.offsetWidth,c);if(c&gt; -1){this.aL.style.width=c+&quot;px&quot;;this.HF.style.width=c+&quot;px&quot;;var h=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;this.aC.aL.style.left=c+&quot;px&quot;;this.aC.aL.style.width=Math.max(0,this.globalBox.offsetWidth-c-(this.quirks?0:2)*h)+&quot;px&quot;;if(this.aC.ftr){this.aC.ftr.parentNode.style.width=this.aC.aL.style.width}if(_isIE){var g=_isIE&amp;&amp; !window.xmlHttpRequest;var h=(this.globalBox.offsetWidth-this.globalBox.clientWidth);this.aC.kR.style.width=this.aC.HF.style.width=Math.max(0,this.globalBox.offsetWidth-(g?h:0)-c)+&quot;px&quot;}}};dhtmlXGridObject.prototype._correctRowHeight=function(q,n){if(!this.bj[q]|| !this.aC.bj[q]){return}var m=this.bj[q].offsetHeight;var g=this.aC.bj[q].offsetHeight;var a=Math.max(m,g);if(!a){return}this.bj[q].style.height=this.aC.bj[q].style.height=a+&quot;px&quot;;if(window._KHTMLrv){var c=this.aC._cCount;var o;while(!o&amp;&amp;c&gt;=0){o=this.bj[q].childNodes[c];c-=1}var l=this.aC.bj[q].firstChild;if(o&amp;&amp;l){o.style.height=l.style.height=a+&quot;px&quot;}}};dhtmlXGridObject.prototype.enableAutoSizeSaving=function(c,a){this.attachEvent(&quot;onResizeEnd&quot;,function(){this.saveSizeToCookie(c,a)})};dhtmlXGridObject.prototype.saveOpenStates=function(c,a){if(!c){c=this.aL.id}var g=[];this._h2.so(0,function(l){if(l.state==&quot;minus&quot;){g.push(l.id)}});var h=&quot;gridOpen&quot;+(c||&quot;&quot;)+&quot;=&quot;+g.join(&quot;|&quot;)+(a?(&quot;; &quot;+a):&quot;&quot;);document.cookie=h};dhtmlXGridObject.prototype.loadOpenStates=function(g,a){var l=this.getCookie(g,&quot;gridOpen&quot;);if(!l){return}l=l.split(&quot;|&quot;);for(var h=0;h&lt;l.length;h++){var c=this.getParentId(l[h]);if(!this.getOpenState(c)){continue}this.hx(l[h])}};dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving=function(c,a){this.attachEvent(&quot;onColumnHidden&quot;,function(){this.saveHiddenColumnsToCookie(c,a)})};dhtmlXGridObject.prototype.enableSortingSaving=function(c,a){this.attachEvent(&quot;onBeforeSorting&quot;,function(){var g=this;window.setTimeout(function(){g.saveSortingToCookie(c,a)},1);return true})};dhtmlXGridObject.prototype.enableOrderSaving=function(c,a){this.attachEvent(&quot;onAfterCMove&quot;,function(){this.saveOrderToCookie(c,a);this.saveSizeToCookie(c,a)})};dhtmlXGridObject.prototype.enableAutoSaving=function(c,a){this.enableOrderSaving(c,a);this.enableAutoSizeSaving(c,a);this.enableSortingSaving(c,a)};dhtmlXGridObject.prototype.saveSizeToCookie=function(c,a){if(this.fL==&quot;px&quot;){var h=this.cellWidthPX.join(&quot;,&quot;)}else{var h=this.cellWidthPC.join(&quot;,&quot;)}var g=(this.initCellWidth||(new Array)).join(&quot;,&quot;);this.setCookie(c,a,0,h);this.setCookie(c,a,1,g)};dhtmlXGridObject.prototype.saveHiddenColumnsToCookie=function(c,a){var h=[].concat(this._hrrar||[]);if(this.aC&amp;&amp;this.aC._hrrar){for(var g=0;g&lt;this.aC._cCount;g++){h[g]=this.aC._hrrar[g]?&quot;1&quot;:&quot;&quot;}}this.setCookie(c,a,4,h.join(&quot;,&quot;).replace(/display:none;/g,&quot;1&quot;))};dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie=function(c){var h=this._getCookie(c,4);var a=(h||&quot;&quot;).split(&quot;,&quot;);for(var g=0;g&lt;this._cCount;g++){this.setColumnHidden(g,(a[g]?true:false))}};dhtmlXGridObject.prototype.saveSortingToCookie=function(c,a){this.setCookie(c,a,2,(this.xu()||[]).join(&quot;,&quot;))};dhtmlXGridObject.prototype.loadSortingFromCookie=function(a){var c=this._getCookie(a,2);c=(c||&quot;&quot;).split(&quot;,&quot;);if(c.length&gt;1&amp;&amp;c[0]&lt;this._cCount){this.xK(c[0],null,c[1]);this.co(true,c[0],c[1])}};dhtmlXGridObject.prototype.saveOrderToCookie=function(g,a){if(!this._c_order){this._c_order=[];var c=this._cCount;for(var h=0;h&lt;c;h++){this._c_order[h]=h}}this.setCookie(g,a,3,((this._c_order||[]).slice(0,this._cCount)).join(&quot;,&quot;));this.saveSortingToCookie()};dhtmlXGridObject.prototype.loadOrderFromCookie=function(c){var l=this._getCookie(c,3);l=(l||&quot;&quot;).split(&quot;,&quot;);if(l.length&gt;1&amp;&amp;l.length&lt;=this._cCount){for(var h=0;h&lt;l.length;h++){if((!this._c_order&amp;&amp;l[h]!=h)||(this._c_order&amp;&amp;l[h]!=this._c_order[h])){var g=l[h];if(this._c_order){for(var a=0;a&lt;this._c_order.length;a++){if(this._c_order[a]==l[h]){g=a;break}}}this.moveColumn(g*1,h)}}}};dhtmlXGridObject.prototype.loadSizeFromCookie=function(a){var g=this._getCookie(a,1);if(g){this.initCellWidth=g.split(&quot;,&quot;)}var g=this._getCookie(a,0);if((g)&amp;&amp;(g.length)){if(!this.aC&amp;&amp;this._hrrar){for(var c=0;c&lt;g.length;c++){if(this._hrrar[c]){g[c]=0}}}if(this.fL==&quot;px&quot;){this.cellWidthPX=g.split(&quot;,&quot;)}else{this.cellWidthPC=g.split(&quot;,&quot;)}}this.setSizes();return true};dhtmlXGridObject.prototype.clearConfigCookie=function(a){if(!a){a=this.aL.id}var c=&quot;gridSettings&quot;+a+&quot;=||||&quot;;document.cookie=c};dhtmlXGridObject.prototype.clearSizeCookie=dhtmlXGridObject.prototype.clearConfigCookie;dhtmlXGridObject.prototype.setCookie=function(c,a,m,h){if(!c){c=this.aL.id}var g=this.getCookie(c);g=(g||&quot;||||&quot;).split(&quot;|&quot;);g[m]=h;var l=&quot;gridSettings&quot;+c+&quot;=&quot;+g.join(&quot;|&quot;).replace(/,/g,&quot;-&quot;)+(a?(&quot;; &quot;+a):&quot;&quot;);document.cookie=l};dhtmlXGridObject.prototype.getCookie=function(c,h){if(!c){c=this.aL.id}c=(h||&quot;gridSettings&quot;)+c;var g=c+&quot;=&quot;;if(document.cookie.length&gt;0){var l=document.cookie.indexOf(g);if(l!= -1){l+=g.length;var a=document.cookie.indexOf(&quot;;&quot;,l);if(a== -1){a=document.cookie.length}return document.cookie.substring(l,a)}}};dhtmlXGridObject.prototype._getCookie=function(a,c){return((this.getCookie(a)||&quot;||||&quot;).replace(/-/g,&quot;,&quot;).split(&quot;|&quot;))[c]};dhtmlXGridObject.prototype.enableUndoRedo=function(){var c=this;var g=function(){return c._onEditUndoRedo.apply(c,arguments)};this.attachEvent(&quot;onEditCell&quot;,g);var a=function(l,h,m){return c._onEditUndoRedo.apply(c,[2,l,h,(m?1:0),(m?0:1)])};this.attachEvent(&quot;onCheckbox&quot;,a);this._IsUndoRedoEnabled=true;this._UndoRedoData=[];this._UndoRedoPos= -1};dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=false;this._UndoRedoData=[];this._UndoRedoPos= -1};dhtmlXGridObject.prototype._onEditUndoRedo=function(g,c,m,h,a){if(this._IsUndoRedoEnabled&amp;&amp;g==2&amp;&amp;a!=h){if(this._UndoRedoPos!== -1&amp;&amp;this._UndoRedoPos!=(this._UndoRedoData.length-1)){this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1)}else{if(this._UndoRedoPos=== -1&amp;&amp;this._UndoRedoData.length&gt;0){this._UndoRedoData=[]}}var l={old_value:a,new_value:h,bO:c,cell_index:m};this._UndoRedoData.push(l);this._UndoRedoPos++}return true};dhtmlXGridObject.prototype.doUndo=function(){if(this._UndoRedoPos=== -1){return false}var a=this._UndoRedoData[this._UndoRedoPos--];var g=this.cells(a.bO,a.cell_index);if(this.abv(a.cell_index)==&quot;tree&quot;){g.setLabel(a.old_value)}else{g.setValue(a.old_value)}this.callEvent(&quot;onUndo&quot;,[a.bO])};dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1){return false}var a=this._UndoRedoData[++this._UndoRedoPos];this.cells(a.bO,a.cell_index).setValue(a.new_value);this.callEvent(&quot;onUndo&quot;,[a.bO])};dhtmlXGridObject.prototype.getRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1){return[]}return this._UndoRedoData.slice(this._UndoRedoPos+1)};dhtmlXGridObject.prototype.getUndo=function(){if(this._UndoRedoPos== -1){return[]}return this._UndoRedoData.slice(0,this._UndoRedoPos+1)};function eXcell_time(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){return this.cell.innerHTML.toString()};this.setValue=function(m){var l=new RegExp(&quot; &quot;,&quot;i&quot;);m=m.replace(l,&quot;:&quot;);if((m==&quot;&quot;)){m=&quot;00:00&quot;}else{var l=new RegExp(&quot;[a-zA-Z]&quot;,&quot;i&quot;);var h=m.match(l);if(h){m=&quot;00:00&quot;}else{var l=new RegExp(&quot;[0-9]+[\\.\\/;\\-,_\\]\\[\\?\\: ][0-9]+&quot;,&quot;i&quot;);var h=m.search(l);if(h!= -1){var l=new RegExp(&quot;[\\./\\;\\-\\,\\_\\]\\[ \\?]&quot;,&quot;i&quot;);m=m.replace(l,&quot;:&quot;)}else{var l=new RegExp(&quot;[^0-9]&quot;,&quot;i&quot;);res1=m.search(l);if(h=m.match(l)){m=&quot;00:00&quot;}else{if(m.length==1){m=&quot;00:0&quot;+m}else{if(parseInt(m)&lt;60){m=&quot;00:&quot;+m}else{if(m.length&lt;5){var g=parseInt(m);var c=Math.floor(g/60);g=g-60*c;var c=c.toString();var g=g.toString();while(c.length&lt;2){c=&quot;0&quot;+c}while(g.length&lt;2){g=&quot;0&quot;+g}m=c+&quot;:&quot;+g}}}}}}}this.cell.innerHTML=m}}eXcell_time.prototype=new eXcell_ed;function eXcell_sub_row(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.getValue=function(){return this.grid.getUserData(this.cell.parentNode.idd,&quot;__sub_row&quot;)};this._setState=function(c,g){(g||this.cell).innerHTML=&quot;&lt;img src='&quot;+this.grid.eg+c+&quot;' width='18' height='18' /&gt;&quot;;(g||this.cell).firstChild.onclick=this.grid._expandMonolite};this.open=function(){this.cell.firstChild.onclick(null,true)};this.close=function(){this.cell.firstChild.onclick(null,false,true)};this.isOpen=function(){return! !this.cell.parentNode._expanded};this.setValue=function(c){if(c){this.grid.setUserData(this.cell.parentNode.idd,&quot;__sub_row&quot;,c)}this._setState(c?&quot;plus.gif&quot;:&quot;blank.gif&quot;)};this.setContent=function(c){if(this.cell.parentNode._expanded){this.cell.parentNode._expanded.innerHTML=c;this.resize()}else{this.cell._previous_content=null;this.setValue(c);this.cell._sub_row_type=null}};this.resize=function(){this.grid._detectHeight(this.cell.parentNode._expanded,this.cell,this.cell.parentNode._expanded.scrollHeight)},this.isDisabled=function(){return true};this.getTitle=function(){return this.grid.getUserData(this.cell.parentNode.idd,&quot;__sub_row&quot;)?&quot;click to expand|collapse&quot;:&quot;&quot;}}eXcell_sub_row.prototype=new gD;function eXcell_sub_row_ajax(a){this.base=eXcell_sub_row;this.base(a);this.setValue=function(c){if(c){this.grid.setUserData(this.cell.parentNode.idd,&quot;__sub_row&quot;,c)}this.cell._sub_row_type=&quot;ajax&quot;;this.cell._previous_content=null;this._setState(c?&quot;plus.gif&quot;:&quot;blank.gif&quot;)}}eXcell_sub_row_ajax.prototype=new eXcell_sub_row;function eXcell_sub_row_grid(a){this.base=eXcell_sub_row;this.base(a);this.setValue=function(c){if(c){this.grid.setUserData(this.cell.parentNode.idd,&quot;__sub_row&quot;,c)}this.cell._sub_row_type=&quot;grid&quot;;this._setState(c?&quot;plus.gif&quot;:&quot;blank.gif&quot;)};this.getSubGrid=function(){if(!a._sub_grid){return null}return a._sub_grid}}eXcell_sub_row_grid.prototype=new eXcell_sub_row;dhtmlXGridObject.prototype._expandMonolite=function(a,u,m){var g=this.parentNode;var v=g.parentNode;var q=v.grid;if(a||window.event){if(!m&amp;&amp; !v._expanded){q.editStop()}(a||event).cancelBubble=true}var s=q.getUserData(v.idd,&quot;__sub_row&quot;);if(!q._sub_row_editor){q._sub_row_editor=new eXcell_sub_row(g)}if(!s){return}if(v._expanded&amp;&amp; !u){q._sub_row_editor._setState(&quot;plus.gif&quot;,g);g._previous_content=v._expanded;q.HF.removeChild(v._expanded);v._expanded=false;v.style.height=(v.oldHeight||20)+&quot;px&quot;;g.style.height=(v.oldHeight||20)+&quot;px&quot;;if(q.aC){q.aC.bj[v.idd].style.height=(v.oldHeight||20)+&quot;px&quot;}for(var l=0;l&lt;v.cells.length;l++){v.cells[l].style.verticalAlign=&quot;middle&quot;;v.cells[l].style.paddingTop=&quot;0px&quot;}delete q._flow[v.idd];q._correctMonolite();v._expanded.ctrl=null}else{if(!v._expanded&amp;&amp; !m){q._sub_row_editor._setState(&quot;minus.gif&quot;,g);v.oldHeight=g.offsetHeight;if(g._previous_content){var r=g._previous_content;r.ctrl=g;q.HF.appendChild(r);q._detectHeight(r,g,parseInt(r.style.height))}else{var r=document.createElement(&quot;DIV&quot;);r.ctrl=g;if(g._sub_row_type){q._sub_row_render[g._sub_row_type](q,r,g,s)}else{r.innerHTML=s}r.style.cssText=&quot;position:absolute; left:0px; top:0px; overflow:auto; font-family:Tahoma; font-size:8pt; margin-top:2px; margin-left:4px;&quot;;r.className=&quot;dhx_sub_row&quot;;q.HF.appendChild(r);q._detectHeight(r,g)}if(!q._flow){q.attachEvent(&quot;onGridReconstructed&quot;,function(){if((this.aW&amp;&amp; !this.parentGrid)||this.ahK){this._collapsMonolite()}else{this._correctMonolite()}});q.attachEvent(&quot;onResizeEnd&quot;,function(){this._correctMonolite(true)});q.attachEvent(&quot;onAfterCMove&quot;,function(){this._correctMonolite(true)});q.attachEvent(&quot;onDrop&quot;,function(){this._correctMonolite(true)});q.attachEvent(&quot;onBeforePageChanged&quot;,function(){this._collapsMonolite();return true});q.attachEvent(&quot;onGroupStateChanged&quot;,function(){this._correctMonolite();return true});q.attachEvent(&quot;onFilterEnd&quot;,function(){this._collapsMonolite()});q.attachEvent(&quot;onUnGroup&quot;,function(){this._collapsMonolite()});q.attachEvent(&quot;onPageChanged&quot;,function(){this._collapsMonolite()});q.attachEvent(&quot;onXLE&quot;,function(){this._collapsMonolite()});q.attachEvent(&quot;onClearAll&quot;,function(){for(var c in this._flow){if(this._flow[c]&amp;&amp;this._flow[c].parentNode){this._flow[c].parentNode.removeChild(this._flow[c])}}this._flow=[]});q.attachEvent(&quot;onEditCell&quot;,function(w,n,x){if((w!==2)&amp;&amp;this._flow[n]&amp;&amp;this.cellType[x]!=&quot;ch&quot;&amp;&amp;this.cellType[x]!=&quot;ra&quot;){this._expandMonolite.apply(this._flow[n].ctrl.firstChild,[0,false,true])}return true});q.attachEvent(&quot;onCellChanged&quot;,function(x,n){if(!this._flow[x]){return}var w=this.cells(x,n).cell;w.style.verticalAlign=&quot;top&quot;;w.style.paddingTop=&quot;3px&quot;});q._flow=[]}q._flow[v.idd]=r;q._correctMonolite();var o=q.ig&gt;30?11:3;if(q.hu){o=0}for(var l=0;l&lt;v.cells.length;l++){v.cells[l].style.verticalAlign=&quot;top&quot;;v.cells[l].style.paddingTop=o+&quot;px&quot;}if(q.aC){var h=q.aC.bj[v.idd];for(var l=0;l&lt;h.cells.length;l++){h.cells[l].style.verticalAlign=&quot;top&quot;;h.cells[l].style.paddingTop=o+&quot;px&quot;}}g.style.paddingTop=(o-1)+&quot;px&quot;;v._expanded=r}}if(q.abK){q.setSizes()}if(q.parentGrid){q.callEvent(&quot;onGridReconstructed&quot;,[])}q.callEvent(&quot;onSubRowOpen&quot;,[v.idd,(! !v._expanded)])};dhtmlXGridObject.prototype._sub_row_render={ajax:function(that,d,td,c){d.innerHTML=&quot;Loading...&quot;;var xml=new ag(function(){d.innerHTML=xml.ai.responseText;var z=xml.ai.responseText.match(/&lt;script[^&gt;]*&gt;([^\f]+?)&lt;\/script&gt;/g);if(z){for(var i=0;i&lt;z.length;i++){eval(z[i].replace(/&lt;([\/]{0,1})s[^&gt;]*&gt;/g,&quot;&quot;))}}that._detectHeight(d,td);that._correctMonolite();that.setUserData(td.parentNode.idd,&quot;__sub_row&quot;,xml.ai.responseText);td._sub_row_type=null;if(that.abK){that.setSizes()}that.callEvent(&quot;onSubAjaxLoad&quot;,[td.parentNode.idd,xml.ai.responseText])},this,true,true);xml.loadXML(c)},grid:function(a,g,l,h){l._sub_grid=new dhtmlXGridObject(g);if(a.skin_name){l._sub_grid.setSkin(a.skin_name)}l._sub_grid.parentGrid=a;l._sub_grid.eg=a.eg;l._sub_grid.iconURL=a.iconURL;l._sub_grid.enableAutoHeight(true);l._sub_grid._delta_x=l._sub_grid._delta_y=null;l._sub_grid.attachEvent(&quot;onGridReconstructed&quot;,function(){a._detectHeight(g,l,l._sub_grid.HF.scrollHeight+l._sub_grid.hdr.offsetHeight+(this.ftr?this.ftr.offsetHeight:0));a._correctMonolite();this.setSizes();if(a.parentGrid){a.callEvent(&quot;onGridReconstructed&quot;,[])}});if(!a.callEvent(&quot;onSubGridCreated&quot;,[l._sub_grid,l.parentNode.idd,l._cellIndex,h])){l._sub_grid.HF.style.overflow=&quot;hidden&quot;;l._sub_row_type=null}else{l._sub_grid.loadXML(h,function(){a._detectHeight(g,l,l._sub_grid.HF.scrollHeight+l._sub_grid.hdr.offsetHeight+(l._sub_grid.ftr?l._sub_grid.ftr.offsetHeight:0));l._sub_grid.HF.style.overflow=&quot;hidden&quot;;a._correctMonolite();l._sub_row_type=null;if(!a.callEvent(&quot;onSubGridLoaded&quot;,[l._sub_grid,l.parentNode.idd,l._cellIndex,h])){return}if(a.abK){a.setSizes()}})}}};dhtmlXGridObject.prototype._detectHeight=function(n,o,c){var a=o.offsetLeft+o.offsetWidth;n.style.left=a+&quot;px&quot;;n.style.width=Math.max(0,o.parentNode.offsetWidth-a-4)+&quot;px&quot;;var c=c||n.scrollHeight;n.style.overflow=&quot;hidden&quot;;n.style.height=c+&quot;px&quot;;var m=o.parentNode;o.parentNode.style.height=(m.oldHeight||20)+3+c*1+&quot;px&quot;;o.style.height=(m.oldHeight||20)+3+c*1+&quot;px&quot;;if(this.aC){var g=this.aC.bj[o.parentNode.idd];g.style.height=(m.oldHeight||20)+3+c*1+&quot;px&quot;}};dhtmlXGridObject.prototype._correctMonolite=function(h){if(this._in_correction){return}this._in_correction=true;for(var g in this._flow){if(this._flow[g]&amp;&amp;this._flow[g].tagName==&quot;DIV&quot;){if(this.bj[g]){if(this.bj[g].style.display==&quot;none&quot;){this.cells4(this._flow[g].ctrl).close();continue}this._flow[g].style.top=this.bj[g].offsetTop+(this.bj[g].oldHeight||20)+&quot;px&quot;;if(h){var c=this._flow[g].ctrl.offsetLeft+this._flow[g].ctrl.offsetWidth;this._flow[g].style.left=c+&quot;px&quot;;this._flow[g].style.width=this.bj[g].offsetWidth-c-4+&quot;px&quot;}}else{this._flow[g].ctrl=null;this.HF.removeChild(this._flow[g]);delete this._flow[g]}}}this._in_correction=false};dhtmlXGridObject.prototype._collapsMonolite=function(){for(var c in this._flow){if(this._flow[c]&amp;&amp;this._flow[c].tagName==&quot;DIV&quot;){if(this.bj[c]){this.cells4(this._flow[c].ctrl).close()}}}};function eXcell_ra_str(a){if(a){this.base=eXcell_ra;this.base(a);this.grid=a.parentNode.grid}}eXcell_ra_str.prototype=new eXcell_ch;eXcell_ra_str.prototype.setValue=function(g){this.cell.style.verticalAlign=&quot;middle&quot;;if(g){g=g.toString().PA();if((g==&quot;false&quot;)||(g==&quot;0&quot;)){g=&quot;&quot;}}if(g){if(this.grid.bj[this.cell.parentNode.idd]){for(var c=0;c&lt;this.grid._cCount;c++){if(c!==this.cell._cellIndex){var a=this.grid.cells(this.cell.parentNode.idd,c);if((a.cell.zk||this.grid.cellType[a.cell._cellIndex])!=&quot;ra_str&quot;){continue}if(a.getValue()){a.setValue(&quot;0&quot;)}}}}g=&quot;1&quot;;this.cell.chstate=&quot;1&quot;}else{g=&quot;0&quot;;this.cell.chstate=&quot;0&quot;}this.dq(&quot;&lt;img src='&quot;+this.grid.eg+&quot;radio_chk&quot;+g+&quot;.gif' onclick='new eXcell_ra_str(this.parentNode).changeState()'&gt;&quot;,this.cell.chstate)};dhtmlXGridObject.prototype._init_point_bcg=dhtmlXGridObject.prototype.Yz;dhtmlXGridObject.prototype.Yz=function(){if(!window.fe){window.fe=this.eg}this._col_combos=[];for(var a=0;a&lt;this._cCount;a++){if(this.cellType[a].indexOf(&quot;combo&quot;)==0){this._col_combos[a]=eXcell_combo.prototype.initCombo.call({grid:this},a)}}if(!this._loading_handler_set){this._loading_handler_set=this.attachEvent(&quot;onXLE&quot;,function(h,g,m,l){eXcell_combo.prototype.fillColumnCombos(this,l);this.detachEvent(this._loading_handler_set);this._loading_handler_set=null})}if(this._init_point_bcg){this._init_point_bcg()}};function eXcell_combo(a){if(!a){return}this.cell=a;this.grid=a.parentNode.grid;this._combo_pre=&quot;&quot;;this.edit=function(){if(!window.fe){window.fe=this.grid.eg}this.val=this.getValue();var c=this.getText();if(this.cell.mG){c=&quot;&quot;}this.cell.innerHTML=&quot;&quot;;if(!this.cell._brval){this.combo=(this.grid.nh?this.grid.aC:this.grid)._col_combos[this.cell._cellIndex]}else{this.combo=this.cell._brval}this.cell.appendChild(this.combo.zZ);this.combo.zZ.style.margin=&quot;0&quot;;this.combo.fK.focus();this.combo.Gl(this.cell.offsetWidth-2);if(!this.combo.cG){if(this.combo.gg(this.cell.combo_value)!= -1){this.combo.dn(this.combo.gg(this.cell.combo_value))}else{if(this.combo.MV(c)){this.combo.dn(this.combo.gg(this.combo.MV(c).value))}else{this.combo.nQ(c)}}}else{this.combo.nQ(c)}this.combo.BJ()};this.selectComboOption=function(g,c){c.dn(c.gg(c.MV(g).value))};this.getValue=function(c){return this.cell.combo_value||&quot;&quot;};this.getText=function(g){var h=this.cell;if(this._combo_pre==&quot;&quot;&amp;&amp;h.childNodes[1]){h=h.childNodes[1]}else{h.childNodes[0].childNodes[1]}return(_isIE?h.innerText:h.textContent)};this.setValue=function(l){if(typeof(l)==&quot;object&quot;){this.cell._brval=this.initCombo();var g=this.cell._cellIndex;var h=this.cell.parentNode.idd;if(!l.firstChild){this.cell.combo_value=&quot; &quot;;this.cell.mG=true}else{this.cell.combo_value=l.firstChild.data}this.setComboOptions(this.cell._brval,l,this.grid,g,h)}else{this.cell.combo_value=l;var c=null;if((c=this.cell._brval)&amp;&amp;(typeof(this.cell._brval)==&quot;object&quot;)){l=(c.acS(l)||{}).text||l}else{if(c=this.grid._col_combos[this.cell._cellIndex]||((this.grid.aC)&amp;&amp;(c=this.grid.aC._col_combos[this.cell._cellIndex]))){l=(c.acS(l)||{}).text||l}}if((l||&quot;&quot;).toString().PA()==&quot;&quot;){l=null}if(l!==null){this.setComboCValue(l)}else{this.setComboCValue(&quot; &quot;,&quot;&quot;);this.cell.mG=true}}};this.detach=function(){this.cell.removeChild(this.combo.zZ);var c=this.cell.combo_value;if(!this.combo.nK()||this.combo.nK().toString().PA()==&quot;&quot;){this.setComboCValue(&quot; &quot;);this.cell.mG=true}else{this.setComboCValue(this.combo.nK().replace(/\&amp;/g,&quot;&amp;&quot;).replace(/&lt;/g,&quot;&lt;&quot;).replace(/&gt;/g,&quot;&gt;&quot;),this.combo.FV());this.cell.mG=false}this.combo._confirmSelect();this.cell.combo_value=this.combo.FV();this.combo.au();this.grid.QX=true;this.grid.setActive(1);return c!=this.cell.combo_value}}eXcell_combo.prototype=new gD;eXcell_combo_v=function(a){var c=new eXcell_combo(a);a.style.paddingLeft=&quot;0px&quot;;a.style.paddingRight=&quot;0px&quot;;c._combo_pre=&quot;&lt;img src='&quot;+(window.fe?window.fe:this.grid.eg)+&quot;combo_select&quot;+(dhtmlx.skin?&quot;_&quot;+dhtmlx.skin:&quot;&quot;)+&quot;.gif' style='position:absolute;z-index:1;top:0px;right:0px;'/&gt;&quot;;return c};eXcell_combo.prototype.initCombo=function(c){var a=document.createElement(&quot;DIV&quot;);var h=this.grid.QL[arguments.length?c:this.cell._cellIndex];var l=new dhtmlXCombo(a,&quot;combo&quot;,0,h);this.grid.QL[arguments.length?c:this.cell._cellIndex]=&quot;&quot;;l.fR.className+=&quot; dhxcombo_in_grid&quot;;var g=this.grid;l.fR.onselectstart=function(){event.cancelBubble=true;return true};l.attachEvent(&quot;onKeyPressed&quot;,function(m){if(m==13||m==27){g.editStop();if(g.aC){g.aC.editStop()}}});dhtmlxEvent(l.dr,&quot;click&quot;,function(){g.editStop();if(g.aC){g.aC.editStop()}});return l};eXcell_combo.prototype.fillColumnCombos=function(g,a){if(!a){return}g.combo_columns=g.combo_columns||[];columns=g.bA.et(&quot;//column&quot;,a);for(var c=0;c&lt;columns.length;c++){if((columns[c].getAttribute(&quot;type&quot;)||&quot;&quot;).indexOf(&quot;combo&quot;)==0){g.combo_columns[g.combo_columns.length]=c;this.setComboOptions(g._col_combos[c],columns[c],g,c)}}};eXcell_combo.prototype.setComboCValue=function(c,a){if(this._combo_pre!=&quot;&quot;){c=&quot;</P><DIV style="width:100%;position:relative;height:100%;overflow:hidden;line-height:20px">&quot;+this._combo_pre+&quot;<SPAN>&quot;+c+&quot;</SPAN></DIV>&quot;}if(arguments.length&gt;1){this.dq(c,a)}else{this.dq(c)}};eXcell_combo.prototype.setComboOptions=function(m,n,g,r,u){if(window.dhx4.s2b(n.getAttribute(&quot;xmlcontent&quot;))){if(!n.getAttribute(&quot;source&quot;)){options=n.childNodes;var a=[];for(var o=0;o&lt;options.length;o++){if(options[o].tagName==&quot;option&quot;){var h=options[o].firstChild?options[o].firstChild.data:&quot;&quot;;a[a.length]=[options[o].getAttribute(&quot;value&quot;),h]}}m.addOption(a);if(arguments.length==4){g.forEachRowA(function(w){var v=g.cells(w,r);if(!v.cell._brval&amp;&amp; !v.cell.zk&amp;&amp;(v.cell._cellIndex==r)){if(v.cell.combo_value==&quot;&quot;){v.setComboCValue(&quot; &quot;,&quot;&quot;)}else{if(!m.acS(v.cell.combo_value)){v.setComboCValue(v.cell.combo_value)}else{v.setComboCValue(m.acS(v.cell.combo_value).text)}}}})}else{var s=(this.cell)?this:g.cells(u,r);if(n.getAttribute(&quot;text&quot;)){if(n.getAttribute(&quot;text&quot;).PA()==&quot;&quot;){s.setComboCValue(&quot; &quot;,&quot;&quot;)}else{s.setComboCValue(n.getAttribute(&quot;text&quot;))}}else{if((!s.cell.combo_value)||(s.cell.combo_value.PA()==&quot;&quot;)){s.setComboCValue(&quot; &quot;,&quot;&quot;)}else{if(!m.acS(s.cell.combo_value)){s.setComboCValue(s.cell.combo_value)}else{s.setComboCValue(m.acS(s.cell.combo_value).text)}}}}}}if(n.getAttribute(&quot;source&quot;)){if(n.getAttribute(&quot;auto&quot;)&amp;&amp;window.dhx4.s2b(n.getAttribute(&quot;auto&quot;))){if(n.getAttribute(&quot;xmlcontent&quot;)){var s=(this.cell)?this:g.cells(u,r);if(n.getAttribute(&quot;text&quot;)){s.setComboCValue(n.getAttribute(&quot;text&quot;))}}else{g.forEachRowA(function(y){var x=g.cells(y,r);if(!x.cell._brval&amp;&amp; !x.cell.zk){var w=x.cell.combo_value.toString();if(w.indexOf(&quot;^&quot;)!= -1){var v=w.split(&quot;^&quot;);x.cell.combo_value=v[0];x.setComboCValue(v[1])}}})}m.fF(true,n.getAttribute(&quot;source&quot;),window.dhx4.s2b(n.getAttribute(&quot;cache&quot;)||true),window.dhx4.s2b(n.getAttribute(&quot;sub&quot;)||false))}else{var q=this;var l=arguments.length;m.load(n.getAttribute(&quot;source&quot;),function(){if(l==4){g.forEachRow(function(x){var w=g.cells(x,r);if(!w.cell._brval&amp;&amp; !w.cell.zk){if(m.acS(w.cell.combo_value)){w.setComboCValue(m.acS(w.cell.combo_value).text)}else{if((w.cell.combo_value||&quot;&quot;).toString().PA()==&quot;&quot;){w.setComboCValue(&quot; &quot;,&quot;&quot;);w.cell.mG=true}else{w.setComboCValue(w.cell.combo_value)}}}})}else{var v=g.cells(u,r);if(m.acS(v.cell.combo_value)){v.setComboCValue(m.acS(v.cell.combo_value).text)}else{v.setComboCValue(v.cell.combo_value)}}})}}if(!n.getAttribute(&quot;auto&quot;)|| !window.dhx4.s2b(n.getAttribute(&quot;auto&quot;))){if(n.getAttribute(&quot;editable&quot;)&amp;&amp; !window.dhx4.s2b(n.getAttribute(&quot;editable&quot;))){m.readonly(true)}if(n.getAttribute(&quot;filter&quot;)&amp;&amp;window.dhx4.s2b(n.getAttribute(&quot;filter&quot;))){m.fF(true)}}};eXcell_combo.prototype.getCellCombo=function(){if(this.cell._brval){return this.cell._brval}this.cell._brval=this.initCombo();return this.cell._brval};eXcell_combo.prototype.refreshCell=function(){this.setValue(this.getValue())};dhtmlXGridObject.prototype.getColumnCombo=function(a){if(this._col_combos&amp;&amp;this._col_combos[a]){return this._col_combos[a]}if(!this._col_combos){this._col_combos=[]}this._col_combos[a]=eXcell_combo.prototype.initCombo.call({grid:this},a);return this._col_combos[a]};dhtmlXGridObject.prototype.refreshComboColumn=function(a){this.forEachRow(function(c){if(this.cells(c,a).refreshCell){this.cells(c,a).refreshCell()}})};function eXcell_clist(a){try{this.cell=a;this.grid=this.cell.parentNode.grid}catch(c){}this.edit=function(){this.val=this.getValue();var h=(this.cell._combo||this.grid.clists[this.cell._cellIndex]);if(!h){return}this.obj=document.createElement(&quot;DIV&quot;);var g=this.val.split(&quot;,&quot;);var q=&quot;&quot;;for(var n=0;n&lt;h.length;n++){var o=false;for(var l=0;l&lt;g.length;l++){if(h[n]==g[l]){o=true}}if(o){q+=&quot;<DIV>&lt;input type='checkbox' id='dhx_clist_&quot;+n+&quot;' checked='true' /&gt;&lt;label for='dhx_clist_&quot;+n+&quot;'&gt;&quot;+h[n]+&quot;&lt;/label&gt;</DIV>&quot;}else{q+=&quot;<DIV>&lt;input type='checkbox' id='dhx_clist_&quot;+n+&quot;'/&gt;&lt;label for='dhx_clist_&quot;+n+&quot;'&gt;&quot;+h[n]+&quot;&lt;/label&gt;</DIV>&quot;}}q+=&quot;<DIV>&lt;input type='button' value='&quot;+(this.grid.applyButtonText||&quot;Apply&quot;)+&quot;' style='width:100px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/&gt;</DIV>&quot;;this.obj.editor=this;this.obj.innerHTML=q;document.body.appendChild(this.obj);this.obj.style.position=&quot;absolute&quot;;this.obj.className=&quot;dhx_clist&quot;;this.obj.onclick=function(r){(r||event).cancelBubble=true;return true};var m=this.grid.fI(this.cell);this.obj.style.left=m[0]+&quot;px&quot;;this.obj.style.top=m[1]+this.cell.offsetHeight+&quot;px&quot;;this.obj.getValue=function(){var s=&quot;&quot;;for(var r=0;r&lt;this.childNodes.length-1;r++){if(this.childNodes[r].childNodes[0].checked){if(s){s+=&quot;,&quot;}s+=this.childNodes[r].childNodes[1].innerHTML}}return s.replace(/&amp;/g,&quot;&amp;&quot;)}};this.getValue=function(){if(this.cell.mG){return &quot;&quot;}return this.cell.innerHTML.toString().PA().replace(/&amp;/g,&quot;&amp;&quot;)};this.detach=function(g){if(this.obj){this.setValue(this.obj.getValue());this.obj.editor=null;this.obj.parentNode.removeChild(this.obj);this.obj=null}return this.val!=this.getValue()}}eXcell_clist.prototype=new gD;eXcell_clist.prototype.setValue=function(g){if(typeof(g)==&quot;object&quot;){var c=this.grid.bA.et(&quot;./option&quot;,g);if(c.length){this.cell._combo=[]}for(var a=0;a&lt;c.length;a++){this.cell._combo.push(c[a].firstChild?c[a].firstChild.data:&quot;&quot;)}g=g.firstChild.data}if(g===&quot;&quot;||g===this.undefined){this.setCTxtValue(&quot; &quot;,g);this.cell.mG=true}else{this.setCTxtValue(g);this.cell.mG=false}};dhtmlXGridObject.prototype.AO=function(a,c){if(!this.clists){this.clists=new Array()}if(typeof(c)!=&quot;object&quot;){c=c.split(&quot;,&quot;)}this.clists[a]=c};function eXcell_calck(a){try{this.cell=a;this.grid=this.cell.parentNode.grid}catch(c){}this.edit=function(){this.val=this.getValue();var g=this.grid.fI(this.cell);this.obj=new calcX(g[0],g[1]+this.cell.offsetHeight,this,this.val)};this.getValue=function(){return this.grid.Sl(this.cell.innerHTML.toString().PA(),this.cell._cellIndex)};this.detach=function(){if(this.obj){this.setValue(this.obj.inputZone.value);this.obj.removeSelf()}this.obj=null;return this.val!=this.getValue()}}eXcell_calck.prototype=new gD;eXcell_calck.prototype.setValue=function(a){if(!a||a.toString().PA()==&quot;&quot;){a=&quot;0&quot;}this.dq(this.grid.PH(a,this.cell._cellIndex),a)};function calcX(left,top,onReturnSub,val){this.top=top||0;this.left=left||0;this.onReturnSub=onReturnSub||null;this.operandA=0;this.operandB=0;this.operatorA=&quot;&quot;;this.state=0;this.dotState=0;this.calckGo=function(){return(eval(this.operandA+&quot;*1&quot;+this.operatorA+this.operandB+&quot;*1&quot;))};this.isNumeric=function(str){return((str.search(/[^1234567890]/gi)== -1)?(true):(false))};this.isOperation=function(str){return((str.search(/[^\+\*\-\/]/gi)== -1)?(true):(false))};this.onCalcKey=function(e){that=this.calk;var z=this.innerHTML;var rZone=that.inputZone;if(((that.state==0)||(that.state==2))&amp;&amp;(that.isNumeric(z))){if(rZone.value!=&quot;0&quot;){rZone.value+=z}else{rZone.value=z}}if((((that.state==0)||(that.state==2))&amp;&amp;(z==&quot;.&quot;))&amp;&amp;(that.dotState==0)){that.dotState=1;rZone.value+=z}if((z==&quot;C&quot;)){rZone.value=0;that.dotState=0;that.state=0}if((that.state==0)&amp;&amp;(that.isOperation(z))){that.operatorA=z;that.operandA=rZone.value;that.state=1}if((that.state==2)&amp;&amp;(that.isOperation(z))){that.operandB=rZone.value;rZone.value=that.calckGo();that.operatorA=z;that.operandA=rZone.value;that.state=1}if((that.state==2)&amp;&amp;(z==&quot;=&quot;)){that.operandB=rZone.value;rZone.value=that.calckGo();that.operatorA=z;that.operandA=rZone.value;that.state=3}if((that.state==1)&amp;&amp;(that.isNumeric(z))){rZone.value=z;that.state=2;that.dotState=0}if((that.state==3)&amp;&amp;(that.isNumeric(z))){rZone.value=z;that.state=0}if((that.state==3)&amp;&amp;(that.isOperation(z))){that.operatorA=z;that.operandA=rZone.value;that.state=1}if(z==&quot;e&quot;){rZone.value=Math.E;if(that.state==1){that.state=2}that.dotState=0}if(z==&quot;p&quot;){rZone.value=Math.PI;if(that.state==1){that.state=2}that.dotState=0}if(z==&quot;Off&quot;){that.topNod.parentNode.removeChild(that.topNod)}if(e||event){(e||event).cancelBubble=true}};this.sendResult=function(){that=this.calk;if(that.state==2){var rZone=that.inputZone;that.operandB=rZone.value;rZone.value=that.calckGo();that.operatorA=z;that.operandA=rZone.value;that.state=3}var z=that.inputZone.value;that.topNod.parentNode.removeChild(that.topNod);that.onReturnSub.grid.editStop(false)};this.removeSelf=function(){if(this.topNod.parentNode){this.topNod.parentNode.removeChild(this.topNod)}};this.keyDown=function(){this.className=&quot;calcPressed&quot;};this.keyUp=function(){this.className=&quot;calcButton&quot;};this.init_table=function(){var table=this.topNod.childNodes[0];if((!table)||(table.tagName!=&quot;TABLE&quot;)){return}for(i=1;i&lt;table.childNodes[0].childNodes.length;i++){for(j=0;j&lt;table.childNodes[0].childNodes[i].childNodes.length;j++){table.childNodes[0].childNodes[i].childNodes[j].onclick=this.onCalcKey;table.childNodes[0].childNodes[i].childNodes[j].onmousedown=this.keyDown;table.childNodes[0].childNodes[i].childNodes[j].onmouseout=this.keyUp;table.childNodes[0].childNodes[i].childNodes[j].onmouseup=this.keyUp;table.childNodes[0].childNodes[i].childNodes[j].calk=this}}this.inputZone=this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0];if(this.onReturnSub){this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].onclick=this.sendResult;this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].calk=this}else{this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].innerHTML=&quot;&quot;}};this.drawSelf=function(){var div=document.createElement(&quot;div&quot;);div.className=&quot;calcTable&quot;;div.style.position=&quot;absolute&quot;;div.style.top=this.top+&quot;px&quot;;div.style.left=this.left+&quot;px&quot;;div.innerHTML=&quot;<TABLE cellspacing="0" id="calc_01" class="calcTable"><TBODY><TR><TD width="100%" style="overflow:hidden;">&lt;input style='width:100%' class='calcInput' value='0' align='right' readonly='true' style='text-align:right'&gt;</TD><TD class="calkSubmit">=</TD></TR></TBODY></TABLE>Offpe/789*456+123-0.C=&quot;;div.onclick=function(e){(e||event).cancelBubble=true};document.body.appendChild(div);this.topNod=div};this.drawSelf();this.init_table();if(val){var rZone=this.inputZone;rZone.value=val*1;this.operandA=val*1;this.state=3}return this}dhtmlXGridObject.prototype.cO=function(a){if(!a.update||a.id==0){return}if(this.bj[a.id].imgTag){this.bj[a.id].imgTag.src=this.iconTree+a.state+&quot;.gif&quot;}a.update=false};dhtmlXGridObject.prototype.doExpand=function(c){this.editStop();var g=c.parentNode.parentNode.parentNode;var a=this._h2.get[g.idd];if(!this.callEvent(&quot;onOpen&quot;,[g.idd,(a.state==&quot;plus&quot;? -1:1)])){return}if(a.state==&quot;plus&quot;){this.expandKids(g)}else{if((a.state==&quot;minus&quot;)&amp;&amp;(!a._closeable)){this.collapseKids(g)}}};function dhtmlxHierarchy(){var a={id:0,bu:[],gR: -1,parent:null,index:0,state:dhtmlXGridObject._emptyLineImg};this.order=[a];this.get={&quot;0&quot;:a};this.swap=function(g,c){var h=g.parent;var l=g.index;h.bu[l]=c;h.bu[c.index]=g;g.index=c.index;c.index=l};this.forEachChildF=function(n,c,l,g){var m=this.get[n];for(var h=0;h&lt;m.bu.length;h++){if(!c.apply((l||this),[m.bu[h]])){continue}if(m.bu[h].bu.length){this.forEachChildF(m.bu[h].id,c,l,g)}if(g){g.call((l||this),m.bu[h])}}};this.so=function(m,c,h){var l=this.get[m];for(var g=0;g&lt;l.bu.length;g++){c.apply((h||this),[l.bu[g]]);if(l.bu[g].bu.length){this.so(l.bu[g].id,c,h)}}};this.JA=function(l,c,h){var g=this.get[l];if(g[c]==h){return}g[c]=h;g.update=true};this.add=function(g,c){return this.addAfter(g,c)};this.addAfter=function(q,o,h,g){var n=this.get[o||0];if(h){var m=this.get[h].index+(g?0:1)}else{var m=n.bu.length}var c={id:q,bu:[],gR:n.gR+1,parent:n,index:m,state:dhtmlXGridObject._emptyLineImg};if(n.state==dhtmlXGridObject._emptyLineImg){this.JA(o,&quot;state&quot;,(o==0?&quot;minus&quot;:&quot;plus&quot;))}if(h){for(var l=m;l&lt;n.bu.length;l++){n.bu[l].index++}n.bu=n.bu.slice(0,m).concat([c]).concat(n.bu.slice(m,n.bu.length))}else{n.bu.push(c)}this.get[q]=c;return c};this.addBefore=function(h,g,c){return this.addAfter(h,g,c,true)};this.remove=function(h){var g=this.get[h||0];for(var c=0;c&lt;g.bu.length;c++){this.deleteAll(g.bu[c].id)}g.bu=[];g.parent.bu=g.parent.bu.slice(0,g.index).concat(g.parent.bu.slice(g.index+1));for(var c=g.index;c&lt;g.parent.bu.length;c++){g.parent.bu[c].index--}delete this.get[h]};this.deleteAll=function(h){var g=this.get[h||0];for(var c=0;c&lt;g.bu.length;c++){this.deleteAll(g.bu[c].id)}g.bu=[];delete this.get[h]};return this}dhtmlXGridObject.prototype._getOpenLenght=function(h,g){var c=this._h2.get[h].bu;g+=c.length;for(var a=0;a&lt;c.length;a++){if(c[a].bu.length&amp;&amp;c[a].state==&quot;minus&quot;){g+=this._getOpenLenght(c[a].id,0)}}return g};dhtmlXGridObject.prototype.collapseKids=function(g){var h=this._h2.get[g.idd];if(h.state!=&quot;minus&quot;){return}if(!this.callEvent(&quot;onOpenStart&quot;,[g.idd,1])){return}var l=g.rowIndex;if(l&lt;0){l=this.am.bP(g)+1}this._h2.JA(h.id,&quot;state&quot;,&quot;plus&quot;);this.cO(h);if(this.ahK||this.aW){this._h2_to_buff();this.uR()}else{var a=this._getOpenLenght(this.am[l-1].idd,0);for(var c=0;c&lt;a;c++){this.am[l+c].parentNode.removeChild(this.am[l+c])}this.am.splice(l,a)}this.callEvent(&quot;onGridReconstructed&quot;,[]);this.setSizes();this._h2_to_buff();this.callEvent(&quot;onOpenEnd&quot;,[g.idd,-1])};dhtmlXGridObject.prototype._massInsert=function(a,g,h,q){var l=[];var o=(cn?this.obj:this.obj.rows[0].parentNode);this._h2_to_buff();if(this.ahK||this.aW){return this.uR()}var n=this._getOpenLenght(a.id,0);for(var m=0;m&lt;n;m++){var c=this.render_row(h+m);if(g){g.parentNode.insertBefore(c,g)}else{o.appendChild(c)}l.push(c)}this.am=dhtmlxArray(this.am.slice(0,h).concat(l).concat(this.am.slice(h)));return a.bu.length+l.length};dhtmlXGridObject.prototype.expandKids=function(c,l){var g=this._h2.get[c.idd];if((!g.bu.length)&amp;&amp;(!g._xml_await)){return}if(g.state!=&quot;plus&quot;){return}if(!g._loading&amp;&amp; !l){if(!this.callEvent(&quot;onOpenStart&quot;,[g.id,-1])){return}}var h=this.getRowIndex(g.id)+1;if(g.bu.length){g._loading=false;this._h2.JA(g.id,&quot;state&quot;,&quot;minus&quot;);this.cO(g);var a=this._massInsert(g,this.am[h],h);this.callEvent(&quot;onGridReconstructed&quot;,[])}else{if(g._xml_await){g._loading=true;if(this.callEvent(&quot;onDynXLS&quot;,[g.id])){this.load(this.kidsXmlFile+&quot;&quot;+(this.kidsXmlFile.indexOf(&quot;?&quot;)!= -1?&quot;&amp;&quot;:&quot;?&quot;)+&quot;id=&quot;+encodeURIComponent(g.id),this._data_type)}}}this.setSizes();if(!g._loading){this.callEvent(&quot;onOpenEnd&quot;,[g.id,1])}this._fixAlterCss()};dhtmlXGridObject.prototype.kidsXmlFile=&quot;&quot;;dhtmlXGridObject.prototype.sT=function(h,l,a){var m=&quot;getValue&quot;;if(this.adH({parentNode:{grid:this}},this.abv(h)).getDate){m=&quot;getDate&quot;;l=&quot;str&quot;}this.forEachRow(function(s){var r=this._h2.get[s];if(!r){return}var q=this._get_cell_value(r.buff,h,m);if(l==&quot;int&quot;){r._sort=parseFloat(q);r._sort=isNaN(r._sort)? -99999999999999:r._sort}else{r._sort=q}});var g=this;var o=1;var n= -1;if(a==&quot;des&quot;){o= -1;n=1}var c=null;if(typeof l==&quot;function&quot;){c=function(r,q){return l(r._sort,q._sort,a,r.id,q.id)}}else{if(l==&quot;cus&quot;){c=function(r,q){return g._customSorts[h](r._sort,q._sort,a,r.id,q.id)}}if(l==&quot;str&quot;){c=function(r,q){return(r._sort&lt;q._sort?n:(r._sort==q._sort?0:o))}}if(l==&quot;int&quot;){c=function(r,q){return(r._sort&lt;q._sort?n:(r._sort==q._sort?0:o))}}if(l==&quot;date&quot;){c=function(r,q){return(Date.parse(new Date(r._sort||&quot;01/01/1900&quot;))-Date.parse(new Date(q._sort||&quot;01/01/1900&quot;)))*o}}}this._sortTreeRows(c,0);this.uR(0,true);this.callEvent(&quot;onGridReconstructed&quot;,[])};dhtmlXGridObject.prototype._sortTreeRows=function(a,h){var c=this._h2.get[h].bu;if(this.am.stablesort){this.am.stablesort.call(c,a)}else{c.sort(a)}for(var g=0;g&lt;c.length;g++){if(c[g].bu.length){this._sortTreeRows(a,c[g].id)}c[g].index=g}};dhtmlXGridObject.prototype.uR=function(g,c){this._h2_to_buff();var a=this.HF.scrollTop;this._reset_view();this.HF.scrollTop=a};dhtmlXGridObject.prototype.ahx=function(){if(!this.nh){this._h2.so(0,function(a){if(a.buff.tagName==&quot;TR&quot;){var c=(this.Cw?(a.gR%2):(a.index%2))?this.iI:this.hC;this.bj[a.id].className=(c+(this.Vh?(&quot; &quot;+c+&quot;_&quot;+a.gR):&quot;&quot;))+&quot; &quot;+(this.bj[a.id].Vn||&quot;&quot;)+((this.bj[a.id].className.indexOf(&quot;rowselected&quot;)!= -1)?&quot; rowselected&quot;:&quot;&quot;)}},this)}};dhtmlXGridObject.prototype.MN=function(c,l){var o=this._h2.get[c];var g=o.parent.bu[o.index+l];if((!g)||(g.parent!=o.parent)){return}var a=[o.state,g.state];this.collapseKids(this.bj[o.id]);this.collapseKids(this.bj[g.id]);var h=this.am.bP(this.bj[c]);var n=this.aD.bP(this.bj[c]);var q=this.obj.rows[0].parentNode.removeChild(this.am[h]);var m=this.am[h+((l==1)?2:l)];if(m){m.parentNode.insertBefore(q,m)}else{this.obj.rows[0].parentNode.appendChild(q)}this.am.yk(h,h+l);this.aD.yk(n,n+l);this._h2.swap(g,o);if(a[0]==&quot;minus&quot;){this.expandKids(this.bj[o.id])}if(a[1]==&quot;minus&quot;){this.expandKids(this.bj[g.id])}this._fixAlterCss(Math.min(h,h+l))};function eXcell_tree(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.isDisabled=function(){return this.cell._disabled||this.grid._edtc};this.edit=function(){if((this.er)||(this.grid._edtc)){return}this.er=this.cell.parentNode.JT;this.val=this.DB();this.cell.CZ=((!this.grid.hu)&amp;&amp;(cn||gP||aq))?&quot;INPUT&quot;:&quot;TEXTAREA&quot;;this.er.innerHTML=&quot;&lt;&quot;+this.cell.CZ+&quot; class='dhx_combo_edit' type='text' style='height:&quot;+(this.cell.offsetHeight-4)+&quot;px;line-height:&quot;+(this.cell.offsetHeight-6)+&quot;px; width:100%; border:0px; margin:0px; padding:0px; overflow:hidden;'&gt;&lt;/&quot;+this.cell.CZ+&quot;&gt;&quot;;this.er.childNodes[0].onmousedown=function(c){(c||event).cancelBubble=true};this.er.childNodes[0].onselectstart=function(c){if(!c){c=event}c.cancelBubble=true;return true};this.er.className+=&quot; editable&quot;;this.er.firstChild.onclick=function(c){(c||event).cancelBubble=true};this.er.firstChild.value=this.val;this.obj=this.er.firstChild;this.er.firstChild.style.width=Math.max(0,this.cell.offsetWidth-this.er.offsetLeft-2)+&quot;px&quot;;this.er.firstChild.focus();if(_isIE){this.er.firstChild.focus()}};this.detach=function(){if(!this.er){return}this.setLabel(this.er.firstChild.value);this.er.className=this.er.className.replace(&quot;editable&quot;,&quot;&quot;);var c=(this.val!=this.er.innerHTML);this.obj=this.er=null;return(c)};this.getValue=function(){return this.DB()};this.hW=function(c){this.cell.parentNode.imgTag.nextSibling.src=this.grid.iconURL+c;this.grid._h2.get[this.cell.parentNode.idd].image=c};this.getImage=function(){return this.grid._h2.get[this.cell.parentNode.idd].image};this.setLabel=function(c){this.setValueA(c)};this.DB=function(c){return this.cell.parentNode.JT.innerHTML}}eXcell_tree.prototype=new gD;eXcell_tree.prototype.setValueA=function(a){this.cell.parentNode.JT.innerHTML=a;this.grid.callEvent(&quot;onCellChanged&quot;,[this.cell.parentNode.idd,this.cell._cellIndex,a])};eXcell_tree.prototype.setValue=function(a){if(this.cell.parentNode.imgTag){return this.setLabel(a)}if((this.grid.kj.iconTree==null)||(this.grid.kj.iconTree!=this.grid.iconTree)){var l={};l.spacer=&quot;&lt;img src='&quot;+this.grid.iconTree+&quot;blank.gif'  align='top' class='space'&gt;&quot;;l.imst=&quot;&lt;img src='&quot;+this.grid.iconTree;l.imsti=&quot;&lt;img style='padding-top:2px;'  src='&quot;+(this.grid.iconURL||this.grid.iconTree);l.imact=&quot;' align='top' onclick='this.&quot;+(cn?&quot;&quot;:&quot;parentNode.&quot;)+&quot;parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'&gt;&quot;;l.plus=l.imst+&quot;plus.gif&quot;+l.imact;l.minus=l.imst+&quot;minus.gif&quot;+l.imact;l.blank=l.imst+&quot;blank.gif&quot;+l.imact;l.start=&quot;<DIV class="treegrid_cell" style="overflow:hidden; white-space : nowrap; line-height:23px; height:&quot;+(_isIE?21:21)+&quot;px;">&quot;;l.itemim=&quot;' align='top' &quot;+(this.grid._img_height?(' height=&quot;'+this.grid._img_height+'&quot;'):&quot;&quot;)+(this.grid._img_width?(' width=&quot;'+this.grid._img_width+'&quot;'):&quot;&quot;)+&quot; &gt;<SPAN id="nodeval">&quot;;l.close=&quot;</SPAN></DIV>&quot;;this.grid.kj=l}var m=this.grid._h2;var l=this.grid.kj;var h=this.cell.parentNode.idd;var n=this.grid._h2.get[h];if(this.grid.kidsXmlFile||this.grid.mI){n.has_kids=(n.has_kids||(this.cell.parentNode._attrs.xmlkids&amp;&amp;(n.state!=&quot;minus&quot;)));n._xml_await= ! !n.has_kids}n.image=n.image||(this.cell._attrs.image||&quot;leaf.gif&quot;);n.label=a;var g=[l.start];for(var c=0;c&lt;n.gR;c++){g.push(l.spacer)}if(n.has_kids){g.push(l.plus);n.state=&quot;plus&quot;}else{g.push(l.imst+n.state+&quot;.gif&quot;+l.imact)}g.push(l.imsti);g.push(n.image);g.push(l.itemim);g.push(n.label);g.push(l.close);this.cell.innerHTML=g.join(&quot;&quot;);this.cell._treeCell=true;this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[n.gR];this.cell.parentNode.JT=this.cell.childNodes[0].childNodes[n.gR+2];if(cn){this.cell.vAlign=&quot;top&quot;}if(n.parent.id!=0&amp;&amp;n.parent.state==&quot;plus&quot;){this.grid.cO(n.parent,false);this.cell.parentNode.WX=true}this.grid.callEvent(&quot;onCellChanged&quot;,[h,this.cell._cellIndex,a])};dhtmlXGridObject.prototype._process_tree_xml=function(l,n,m){this._parsing=true;var g=false;if(!n){this.render_row=this.render_row_tree;g=true;n=l.cR(this.xml.top);m=n.getAttribute(&quot;parent&quot;)||0;if(m==&quot;0&quot;){m=0}if(!this._h2){this._h2=new dhtmlxHierarchy()}if(this.aC){this.aC._h2=this._h2}}var q=l.et(this.xml.row,n);this._open=this._open||[];for(var h=0;h&lt;q.length;h++){var c=q[h].getAttribute(&quot;id&quot;);if(!c){c=this.uid();q[h].setAttribute(&quot;id&quot;,c)}var o=this._h2.add(c,m);o.buff={idd:c,data:q[h],_parser:this._process_xml_row,_locator:this._get_xml_data};if(q[h].getAttribute(&quot;open&quot;)){o.state=&quot;minus&quot;;this._open.push(c)}this.bj[c]=o.buff;this._process_tree_xml(l,q[h],c)}if(g){if(!q.length){this._h2.JA(m,&quot;state&quot;,dhtmlXGridObject._emptyLineImg)}else{if(m!=0&amp;&amp; !this.ahK){this._h2.JA(m,&quot;state&quot;,&quot;minus&quot;)}}for(var h=0;h&lt;this._open.length;h++){var a=this._h2.get[this._open[h]];if(!a.bu.length){a.state=dhtmlXGridObject._emptyLineImg}}this.cO(this._h2.get[m]);this._h2_to_buff();if(m!=0&amp;&amp;this.ahK){this.hx(m)}else{if(this.aW){this.uR()}else{this.render_dataset()}}if(this.kidsXmlFile){for(var h=0;h&lt;this._open.length;h++){var a=this._h2.get[this._open[h]];if(a._xml_await){this.expandKids({idd:a.id})}}}this._open=[];if(this.mI===false){this.forEachRow(function(r){this.render_row_tree(0,r)})}this._parsing=false;if(m!=0&amp;&amp; !this.ahK){this.callEvent(&quot;onOpenEnd&quot;,[m,1])}}return l.ai.responseXML?l.ai.responseXML:l.ai};dhtmlXGridObject.prototype._h2_to_buff=function(c){if(!c){c=this._h2.get[0];this.aD=new dhtmlxArray();if(this.aC&amp;&amp; !this.nh){this.aC.aD=this.aD}}for(var a=0;a&lt;c.bu.length;a++){this.aD.push(c.bu[a].buff);if(c.bu[a].state==&quot;minus&quot;){this._h2_to_buff(c.bu[a])}}};dhtmlXGridObject.prototype.render_row_tree=function(c,h){if(h){var a=this._h2.get[h];a=a?a.buff:a}else{var a=this.aD[c]}if(!a){return-1}if(a._parser){if(this.bj[a.idd]&amp;&amp;this.bj[a.idd].tagName==&quot;TR&quot;){return this._h2.get[a.idd].buff=this.aD[c]=this.bj[a.idd]}var g=this.uO(a.idd);this.bj[a.idd]=g;if(!h){this.aD[c]=g}this._h2.get[a.idd].buff=g;a._parser.call(this,g,a.data);this.jQ(g);return g}return a};dhtmlXGridObject.prototype.yE=function(h,c){if(c){this._h2.so(c.id,function(m){this.yE(null,m);delete this.bj[m.id]},this);return}var l=this.getRowIndex(h.idd);var c=this._h2.get[h.idd];if(l!= -1&amp;&amp;l!==this.undefined){var a=1;if(c&amp;&amp;c.state==&quot;minus&quot;){a+=this._getOpenLenght(c.id,0)}for(var g=0;g&lt;a;g++){if(this.am[g+l]){this.am[g+l].parentNode.removeChild(this.am[g+l])}}if(this.aC){for(var g=0;g&lt;a;g++){if(this.aC.am[g+l]){this.aC.am[g+l].parentNode.removeChild(this.aC.am[g+l])}}if(a&gt;1){this.aC.am.splice(l+1,a-1)}}this.am.splice(l,a);this.aD.splice(l,a)}if(!c){return}this.yE(null,c);delete this.bj[c.id];if(c.parent.bu.length==1){this._h2.JA(c.parent.id,&quot;state&quot;,dhtmlXGridObject._emptyLineImg);this.cO(c.parent)}this._h2.remove(c.id)};dhtmlXGridObject.prototype.hx=function(c){var g=this._h2.get[c||0];var a=this.dz(c||0);if(!a){return}if(g.parent&amp;&amp;g.parent.id!=0){this.hx(g.parent.id)}this.expandKids(a)};dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.hY;dhtmlXGridObject.prototype.hY=function(c,n,l,h,a,o){if(!this._h2){return this._addRowClassic(c,n,l)}h=h||0;var g=this.cellType.bP(&quot;tree&quot;);if(typeof(n)==&quot;string&quot;){n=n.split(this.gX)}var m=this._h2.get[c];if(!m){if(h==0){l=this.aD.length}else{l=this.getRowIndex(h)+1;if(this._h2.get[h].state==&quot;minus&quot;){l+=this._getOpenLenght(h,0)}else{this.WX=true}}}m=m||this._h2.add(c,h);m.image=a;m.has_kids=o;return m.buff=this._addRowClassic(c,n,l)};dhtmlXGridObject.prototype.addRowBefore=function(g,m,h,c,o){var n=this.bj[h];if(!n){return}if(!this._h2){return this.hY(g,m,this.getRowIndex(h))}var a=this._h2.get[h].parent.id;var l=this.getRowIndex(h);if(l== -1){this.WX=true}this._h2.addBefore(g,a,h);return this.hY(g,m,l,this._h2.get[h].parent.id,c,o)};dhtmlXGridObject.prototype.addRowAfter=function(g,m,h,c,o){var n=this.bj[h];if(!n){return}if(!this._h2){return this.hY(g,m,this.getRowIndex(h)+1)}var a=this._h2.get[h].parent.id;var l=this.getRowIndex(h);if(l== -1){this.WX=true}if(this._h2.get[h].state==&quot;minus&quot;){l+=this._getOpenLenght(h,0)+1}else{l++}this._h2.addAfter(g,a,h);return this.hY(g,m,l,a,c,o)};dhtmlXGridObject.prototype.enableSmartXMLParsing=function(a){this.mI=ap(a)};dhtmlXGridObject.prototype.DF=function(a,c,g){var h=this.cellType.bP(&quot;tree&quot;);for(i=0;i&lt;a.cells.length;i++){if(i!=h){this.cells(g,i).setValue(this.cells(c,i).getValue())}else{this.cells(g,i).setValueA(this.cells(c,i).getValue())}}};dhtmlXGridObject.prototype.KW=function(c){var a=this.dz(c);if(!a){return}this.collapseKids(a)};dhtmlXGridObject.prototype.cx=function(a){var c=this._h2.get[a];if(!c){return}while(c.bu.length){this.deleteRow(c.bu[0].id)}};dhtmlXGridObject.prototype.Fx=function(c){var h=[];var g=this._h2.get[c||0];if(g){for(var a=0;a&lt;g.bu.length;a++){h.push(g.bu[a].id);if(g.bu[a].bu.length){h=h.concat(this.Fx(g.bu[a].id).split(this.gX))}}}return h.join(this.gX)};dhtmlXGridObject.prototype.getChildItemIdByIndex=function(c,a){var g=this._h2.get[c||0];if(!g){return null}return(g.bu[a]?g.bu[a].id:null)};dhtmlXGridObject.prototype.getItemText=function(a){return this.cells(a,this.cellType.bP(&quot;tree&quot;)).DB()};dhtmlXGridObject.prototype.getOpenState=function(a){var c=this._h2.get[a||0];if(!c){return}if(c.state==&quot;minus&quot;){return true}return false};dhtmlXGridObject.prototype.getParentId=function(a){var c=this._h2.get[a||0];if((!c)||(!c.parent)){return null}return c.parent.id};dhtmlXGridObject.prototype.Mn=function(c){var h=[];var g=this._h2.get[c||0];if(g){for(var a=0;a&lt;g.bu.length;a++){h.push(g.bu[a].id)}}return h.join(this.gX)};dhtmlXGridObject.prototype.expandAll=function(a){this._renderAllExpand(a||0);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent(&quot;onGridReconstructed&quot;,[]);if(this._redrawLines){this._redrawLines()}};dhtmlXGridObject.prototype._renderAllExpand=function(g){var a=this._h2.get[g].bu;for(var c=0;c&lt;a.length;c++){if(a[c].bu.length){this._h2.JA(a[c].id,&quot;state&quot;,&quot;minus&quot;);this.cO(a[c]);this._renderAllExpand(a[c].id)}}};dhtmlXGridObject.prototype.collapseAll=function(a){this._h2.so((a||0),function(c){if(c&amp;&amp;c.state==&quot;minus&quot;){c.state=&quot;plus&quot;;c.update=true;this.cO(c)}},this);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent(&quot;onGridReconstructed&quot;,[]);if(this._redrawLines){this._redrawLines()}};dhtmlXGridObject.prototype.hasChildren=function(c){var a=this._h2.get[c];if(a&amp;&amp;a.bu.length){return a.bu.length}if(a._xml_await){return-1}return 0};dhtmlXGridObject.prototype.setItemCloseable=function(g,c){var a=this._h2.get[g];if(!a){return}a._closeable=(!ap(c))};dhtmlXGridObject.prototype.setItemText=function(a,c){return this.cells(a,this.cellType.bP(&quot;tree&quot;)).setLabel(c)};dhtmlXGridObject.prototype.setItemImage=function(c,a){this._h2.get[c].image=a;this.bj[c].imgTag.nextSibling.src=(this.iconURL||&quot;&quot;)+a};dhtmlXGridObject.prototype.getItemImage=function(a){this.dz(a);return this._h2.get[a].image};dhtmlXGridObject.prototype.setImageSize=function(c,a){this._img_width=c;this._img_height=a};dhtmlXGridObject.prototype._getRowImage=function(a){return this._h2.get[a.idd].image};dhtmlXGridObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent(&quot;onOpenStart&quot;,a)};dhtmlXGridObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent(&quot;onOpenEnd&quot;,a)};dhtmlXGridObject.prototype.enableTreeCellEdit=function(a){this._edtc= !ap(a)};dhtmlXGridObject.prototype.sS=function(a){var c=this._h2.get[a||0];if(!c){return-1}return c.gR};dhtmlXGridObject.prototype.oj=function(c,a){for(i in this.bj){if((this.bj[i])&amp;&amp;(this.bj[i].childNodes)){this.bj[i].childNodes[c].style.display=a}}};dhtmlXGridObject._emptyLineImg=&quot;blank&quot;;dhtmlXGridObject.prototype._updateLine=function(g,c){c=c||this.bj[g.id];if(!c){return}var a=c.imgTag;if(!a){return}if(g.state==&quot;blank&quot;){return a.src=this.iconTree+&quot;blank.gif&quot;}var h=1;if(g.index==0){if(g.gR==0){if((g.parent.bu.length-1)&gt;g.index){h=3}else{h=1}}else{if((g.parent.bu.length-1)&gt;g.index){h=3}else{h=2}}}else{if((g.parent.bu.length-1)&gt;g.index){h=3}else{h=2}}a.src=this.iconTree+g.state+h+&quot;.gif&quot;};dhtmlXGridObject.prototype._updateParentLine=function(h,g){g=g||this.bj[h.id];if(!g){return}var a=g.imgTag;if(!a){return}for(var c=h.gR;c&gt;0;c--){if(h.id==0){break}a=a.previousSibling;h=h.parent;if((h.parent.bu.length-1)&gt;h.index){a.src=this.iconTree+&quot;line1.gif&quot;}else{a.src=this.iconTree+&quot;blank.gif&quot;}}};dhtmlXGridObject.prototype._renderSortA=dhtmlXGridObject.prototype.uR;dhtmlXGridObject.prototype.uR=function(){this._renderSortA.apply(this,arguments);this._redrawLines(0)};dhtmlXGridObject.prototype._redrawLines=function(a){if(this._tgle){this._h2.so((a||0),function(c){this._updateLine(c);this._updateParentLine(c)},this)}};dhtmlXGridObject.prototype.enableTreeGridLines=function(){dhtmlXGridObject._emptyLineImg=&quot;line&quot;;this.cO=function(c,a){if(a|| !c.update||c.id==0){return}if(this._tgle){this._updateLine(c,this.bj[c.id])}c.update=false};this._tgle=true;this.attachEvent(&quot;onXLE&quot;,function(g,c,h){this._redrawLines(h)});this.attachEvent(&quot;onOpenEnd&quot;,function(a){this._redrawLines(a)});this.attachEvent(&quot;onRowAdded&quot;,function(c){var a=this._h2.get[c];this._updateLine(a);this._updateParentLine(a);if(a.index&lt;(a.parent.bu.length-1)){a=a.parent.bu[a.index+1];this._updateLine(a);this._updateParentLine(a)}else{if(a.index!=0){a=a.parent.bu[a.index-1];this._updateLine(a);this._updateParentLine(a);if(a.bu.length){this._h2.so(a.id,function(g){this._updateParentLine(g)},this)}}}});this.attachEvent(&quot;onOpen&quot;,function(h,c){if(c){var g=this._h2.get[h];for(var a=0;a&lt;g.bu.length;a++){this._updateParentLine(g.bu[a])}}return true});this.attachEvent(&quot;onBeforeRowDeleted&quot;,function(h){var c=this;var g=this._h2.get[h];var a=null;if(g.index!=0){a=g.parent.bu[g.index-1]}g=g.parent;window.setTimeout(function(){g=c._h2.get[g.id];if(!g){return}c._updateLine(g);c._updateParentLine(g);if(a){c._updateLine(a);if(a.state==&quot;minus&quot;){c._h2.so(a.id,function(l){c._updateParentLine(l)},c)}}},1);return true})};dhtmlXGridObject.prototype.setFiltrationLevel=function(g,a,c){this._tr_strfltr=g;this._tr_fltr_c=a;this._tr_fltr_d=c;this.refreshFilters()};dhtmlXGridObject.prototype.filterTreeBy=function(h,l,g){var a=this._h2;if(typeof this._tr_strfltr==&quot;undefined&quot;){this._tr_strfltr= -1}if(this._f_rowsBuffer){if(!g){this._h2=this._f_rowsBuffer;if(this.aC){this.aC._h2=this._h2}}}else{this._f_rowsBuffer=this._h2}var m=true;this.dma(true);this._fbf={};if(typeof(h)==&quot;object&quot;){for(var c=0;c&lt;l.length;c++){this._filterTreeA(h[c],l[c])}}else{this._filterTreeA(h,l)}this._fbf=null;this.dma(false);this._fix_filtered_images(this._h2,a);this.uR();this.callEvent(&quot;onGridReconstructed&quot;,[])};dhtmlXGridObject.prototype._filterTreeA=function(g,q){if(q==&quot;&quot;){return}var n=true;if(typeof(q)==&quot;function&quot;){n=false}else{q=(q||&quot;&quot;).toString().toLowerCase()}var c=function(w,v,u){var x=u.get[w.parent.id];if(!x){x=c(w.parent,v,u)}var u=r.get[w.id];if(!u){u={id:w.id,bu:[],gR:w.gR,parent:x,index:x.bu.length,image:w.image,state:w.state,buff:w.buff,has_kids:w.has_kids,_xml_await:w._xml_await};x.bu.push(u);r.get[u.id]=u}return u};var o=this._fbf;var r=new dhtmlxHierarchy();var a;var l=this._tr_strfltr;var m=this;var h=function(u){for(var s=0;s&lt;u.bu.length;s++){m.temp(u.bu[s])}};switch(l.toString()){case &quot;-2&quot;:a=function(s){if(o[s.id]){return false}h(s);return true};break;case &quot;-1&quot;:a=function(s){return!s.bu.length};break;default:a=function(s){return l==s.gR};break}this.temp=function(s){if(s.id!=0&amp;&amp;a(s)){if(n?(this._get_cell_value(s.buff,g).toString().toLowerCase().indexOf(q)== -1):(!q(this._get_cell_value(s.buff,g),s.id))){o[s.id]=true;if(this._tr_fltr_c){c(s.parent,this._h2,r)}return false}else{c(s,this._h2,r);if(s.bu&amp;&amp;l!= -2){this._h2.so(s.id,function(u){c(u,this._h2,r)},this)}return true}}else{if(this._tr_fltr_d&amp;&amp;this._tr_strfltr&gt;s.gR&amp;&amp;s.id!=0){c(s,this._h2,r)}h(s)}};this.temp(this._h2.get[0]);this._h2=r;if(this.aC){this.aC._h2=this._h2}};dhtmlXGridObject.prototype._fix_filtered_images=function(c,a){c.so(0,function(g){if(!g.bu.length&amp;&amp; !g.has_kids){if(g.state!=dhtmlXGridObject._emptyLineImg){g.state=dhtmlXGridObject._emptyLineImg;g.update=true;this.cO(g)}}else{if(g.buff.tagName==&quot;TR&quot;){var h=a.get[g.id];if(h&amp;&amp;h.state!=dhtmlXGridObject._emptyLineImg){g.state=h.state}g.update=true;this.cO(g)}}},this)};dhtmlXGridObject.prototype.collectTreeValues=function(g){if(typeof this._tr_strfltr==&quot;undefined&quot;){this._tr_strfltr= -1}this.dma(true);this._build_m_order();g=this._m_order?this._m_order[g]:g;var n={};var l=[];var a=this._f_rowsBuffer||this._h2;a.so(0,function(c){if(this._tr_strfltr== -2||(this._tr_strfltr== -1&amp;&amp; !c.bu.length)||(this._tr_strfltr==c.gR)){var o=this._get_cell_value(c.buff,g);if(o){n[o]=true}}},this);this.dma(false);var h=this.combos[g];for(var m in n){if(n[m]===true){l.push(h?(h.get(m)||m):m)}}return l.sort()};dhtmlXGridObject.prototype._in_header_stat_tree_total=function(g,a,l){var h=function(){var m=0;this._build_m_order();var c=this._m_order?this._m_order[a]:a;this._h2.so(0,function(o){var n=parseFloat(this._get_cell_value((o.buff||this.bj[o.id]),c));m+=isNaN(n)?0:n},this);return this._maskArr[a]?this.PH(m,a):(Math.round(m*100)/100)};this._stat_in_header(g,h,a,l,l)};dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf=function(g,a,l){var h=function(){var m=0;this._build_m_order();var c=this._m_order?this._m_order[a]:a;this._h2.so(0,function(o){if(o.bu.length){return}var n=parseFloat(this._get_cell_value((o.buff||this.bj[o.id]),c));m+=isNaN(n)?0:n},this);return this._maskArr[a]?this.PH(m,a):(Math.round(m*100)/100)};this._stat_in_header(g,h,a,l,l)};dhtmlXGridObject.prototype._in_header_stat_tree_multi_total=function(g,a,m){var l=m[1].split(&quot;:&quot;);m[1]=&quot;&quot;;var h=function(){var c=0;this._h2.so(0,function(o){var n=parseFloat(this._get_cell_value((o.buff||this.bj[o.id]),l[0]))*parseFloat(this._get_cell_value((o.buff||this.bj[o.id]),l[1]));c+=isNaN(n)?0:n},this);return this._maskArr[a]?this.PH(c,a):(Math.round(c*100)/100)};this._stat_in_header(g,h,a,m,m)};dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf=function(g,a,m){var l=m[1].split(&quot;:&quot;);m[1]=&quot;&quot;;var h=function(){var c=0;this._h2.so(0,function(o){if(o.bu.length){return}var n=parseFloat(this._get_cell_value((o.buff||this.bj[o.id]),l[0]))*parseFloat(this._get_cell_value((o.buff||this.bj[o.id]),l[1]));c+=isNaN(n)?0:n},this);return this._maskArr[a]?this.PH(c,a):(Math.round(c*100)/100)};this._stat_in_header(g,h,a,m,m)};dhtmlXGridObject.prototype._in_header_stat_tree_max=function(g,a,l){var h=function(){var m= -999999999;this._build_m_order();var c=this._m_order?this._m_order[a]:a;if(this.iD()==0){return &quot;&quot;}this._h2.so(0,function(n){var o=parseFloat(this._get_cell_value((n.buff||this.bj[n.id]),c));if(!isNaN(o)){m=Math.max(m,o)}},this);return this._maskArr[a]?this.PH(m,a):m};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._in_header_stat_tree_min=function(g,a,l){var h=function(){var m=999999999;this._build_m_order();var c=this._m_order?this._m_order[a]:a;if(this.iD()==0){return &quot;&quot;}this._h2.so(0,function(n){var o=parseFloat(this._get_cell_value((n.buff||this.bj[n.id]),c));if(!isNaN(o)){m=Math.min(m,o)}},this);return this._maskArr[a]?this.PH(m,a):m};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._in_header_stat_tree_average=function(g,a,l){var h=function(){var n=0;var m=0;this._build_m_order();var c=this._m_order?this._m_order[a]:a;this._h2.so(0,function(q){var o=parseFloat(this._get_cell_value((q.buff||this.bj[q.id]),c));n+=isNaN(o)?0:o;m++},this);return this._maskArr[a]?this.PH(n,a):(Math.round(n/m*100)/100)};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf=function(g,a,l){var h=function(){var m= -999999999;this._build_m_order();var c=this._m_order?this._m_order[a]:a;if(this.iD()==0){return &quot;&quot;}this._h2.so(0,function(n){if(n.bu.length){return}var o=parseFloat(this._get_cell_value((n.buff||this.bj[n.id]),c));if(!isNaN(o)){m=Math.max(m,o)}},this);return this._maskArr[a]?this.PH(m,a):m};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf=function(g,a,l){var h=function(){var m=999999999;this._build_m_order();var c=this._m_order?this._m_order[a]:a;if(this.iD()==0){return &quot;&quot;}this._h2.so(0,function(n){if(n.bu.length){return}var o=parseFloat(this._get_cell_value((n.buff||this.bj[n.id]),c));if(!isNaN(o)){m=Math.min(m,o)}},this);return this._maskArr[a]?this.PH(m,a):m};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf=function(g,a,l){var h=function(){var n=0;var m=0;this._build_m_order();var c=this._m_order?this._m_order[a]:a;this._h2.so(0,function(q){if(q.bu.length){return}var o=parseFloat(this._get_cell_value((q.buff||this.bj[q.id]),c));n+=isNaN(o)?0:o;m++},this);return this._maskArr[a]?this.PH(n,a):(Math.round(n/m*100)/100)};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._in_header_stat_tree_count=function(g,a,l){var h=function(){var c=0;this._h2.so(0,function(m){c++},this);return c};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf=function(g,a,l){var h=function(){var c=0;this._h2.so(0,function(m){if(!m.bu.length){c++}},this);return c};this._stat_in_header(g,h,a,l)};dhtmlXGridObject.prototype._stat_in_header=function(g,h,a,n){var l=this;var m=function(){this.dma(true);g.innerHTML=(n[0]?n[0]:&quot;&quot;)+h.call(this)+(n[1]?n[1]:&quot;&quot;);this.dma(false);this.callEvent(&quot;onStatReady&quot;,[])};if(!this._stat_events){this._stat_events=[];this.attachEvent(&quot;onClearAll&quot;,function(){if(!this.hdr.rows[1]){for(var o=0;o&lt;this._stat_events.length;o++){for(var c=0;c&lt;4;c++){this.detachEvent(this._stat_events[o][c])}}this._stat_events=[]}})}this._stat_events.push([this.attachEvent(&quot;onGridReconstructed&quot;,m),this.attachEvent(&quot;onXLE&quot;,m),this.attachEvent(&quot;onFilterEnd&quot;,m),this.attachEvent(&quot;onEditCell&quot;,function(c,q,o){if(c==2&amp;&amp;o==a){m.call(this)}return true})]);g.innerHTML=&quot;&quot;};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a&lt;this._c_order.length;a++){this._m_order[this._c_order[a]]=a}}};function dhtmlXForm(l,h,m){this.idef={position:&quot;label-left&quot;,labelWidth:&quot;auto&quot;,labelHeight:&quot;auto&quot;,inputWidth:&quot;auto&quot;,inputHeight:&quot;auto&quot;,labelAlign:&quot;left&quot;,noteWidth:&quot;auto&quot;,offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={&quot;label-left&quot;:&quot;dhxform_item_label_left&quot;,&quot;label-right&quot;:&quot;dhxform_item_label_right&quot;,&quot;label-top&quot;:&quot;dhxform_item_label_top&quot;,&quot;label-bottom&quot;:&quot;dhxform_item_label_bottom&quot;,absolute:&quot;dhxform_item_absolute&quot;};this.align_css={left:&quot;dhxform_label_align_left&quot;,center:&quot;dhxform_label_align_center&quot;,right:&quot;dhxform_label_align_right&quot;};var g=this;this.setSkin=function(a){this.skin=a;this.vI.className=&quot;dhxform_obj_&quot;+this.skin;this.vI.style.fontSize=(a==&quot;dhx_terrace&quot;?&quot;13px&quot;:&quot;12px&quot;);this._updateBlocks();this.forEachItem(function(o){var n=g.getItemType(o);if(typeof(g.items[n])!=&quot;undefined&quot;&amp;&amp;typeof(g.items[n].setSkin)==&quot;function&quot;){g.doWithItem(o,&quot;setSkin&quot;,a)}})};this.skin=(m||window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhx_form&quot;)||&quot;dhx_skyblue&quot;);this.separator=&quot;,&quot;;this.live_validate=false;this.wT=&quot;checkbox&quot;;this._rGroup=&quot;default&quot;;this._idIndex={};this._indexId=[];this.vI=(typeof(l)==&quot;object&quot;?l:document.getElementById(l));if(!l._isNestedForm){this._parentForm=true;this.vI.style.fontSize=(this.skin==&quot;dhx_terrace&quot;?&quot;13px&quot;:&quot;12px&quot;);this.vI.className=&quot;dhxform_obj_&quot;+this.skin;this.setFontSize=function(a){this.vI.style.fontSize=a;this._updateBlocks()};this.getForm=function(){return this};this.vI.onkeypress=function(n){n=(n||event);if(n.keyCode==13){var a=(n.target||n.srcElement);if(typeof(a.tagName)!=&quot;undefined&quot;&amp;&amp;String(a.tagName).toLowerCase()==&quot;textarea&quot;&amp;&amp; !n.ctrlKey){return}g.callEvent(&quot;onEnter&quot;,[])}}}this.b_index=null;this.base=[];this._prepare=function(v,x){if(this.b_index==null){this.b_index=0}else{this.b_index++}var o=null;var n=null;if(x!=null){if(x&lt;0){x=0}var s=0;for(var a=0;a&lt;this.vI.childNodes.length;a++){for(var u=0;u&lt;this.vI.childNodes[a].childNodes.length;u++){if(n==null&amp;&amp;this.vI.childNodes[a].childNodes[u]._isNestedForm!=true){if(s==x){o=this.vI.childNodes[a].nextSibling;n=this.vI.childNodes[a].childNodes[u]}s++}}}}this.base[this.b_index]=document.createElement(&quot;DIV&quot;);this.base[this.b_index].className=&quot;dhxform_base&quot;;if(typeof(v)!=&quot;undefined&quot;){this.base[this.b_index].style.cssText+=&quot; margin-left:&quot;+v+&quot;px!important;&quot;}if(o!=null){this.vI.insertBefore(this.base[this.b_index],o);o=null}else{this.vI.appendChild(this.base[this.b_index])}if(n!=null){while(n!=null){var r=n;n=n.nextSibling;this.base[this.b_index].appendChild(r);r=null}}};this.setSizes=function(){};this._mergeSettings=function(v){var o= -1;var r={type:&quot;settings&quot;};for(var n in this.idef){r[n]=this.idef[n]}for(var s=0;s&lt;v.length;s++){if(typeof(v[s])!=&quot;undefined&quot;&amp;&amp;v[s].type==&quot;settings&quot;){for(var n in v[s]){r[n]=v[s][n]}o=s}}v[o&gt;=0?o:v.length]=r;return v};this._genStr=function(a){var n=&quot;&quot;;var r=&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;;for(var o=0;o&lt;a;o++){n+=r.charAt(Math.floor(Math.random()*r.length))}return n};this.idPrefix=&quot;dhxForm_&quot;+this._genStr(12)+&quot;_&quot;;this._rId=(this._parentForm?this._genStr(12)+&quot;_&quot;:l._rId);this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(F,s,y,v,D,H,C){if(this.items[F]._index){this.getForm()._indexId.push(s);this.getForm()._idIndex[s]={ind:this.getForm()._indexId.length-1}}if(!F){F=this.wT}if(F==&quot;list&quot;&amp;&amp;D!=null&amp;&amp;this.itemPull[this.idPrefix+D]!=null&amp;&amp;typeof(this.itemPull[this.idPrefix+D]._addSubListNode)==&quot;function&quot;){var E=this.itemPull[this.idPrefix+D]._addSubListNode()}else{if(F==&quot;newcolumn&quot;){var E={}}else{var u=this.base[this.b_index];var n=null;if(typeof(H)!=&quot;undefined&quot;&amp;&amp; !isNaN(H)&amp;&amp;F!=&quot;list&quot;){H=Math.max(parseInt(H),0)+1;for(var J=0;J&lt;this.vI.childNodes.length;J++){for(var o=0;o&lt;this.vI.childNodes[J].childNodes.length;o++){if(n==null&amp;&amp;this.vI.childNodes[J].childNodes[o]._isNestedForm!=true){H--;if(H==0){n=this.vI.childNodes[J].childNodes[o];u=this.vI.childNodes[J]}}}}}else{if(F==&quot;list&quot;){for(var I in this.itemPull){if(I==this.idPrefix+s){n=this.itemPull[I].nextSibling;if(this.itemPull[I]._listBase!=null&amp;&amp;this.itemPull[I]._listBase.length&gt;0){n=this.itemPull[I]._listBase[this.itemPull[I]._listBase.length-1]}}}}}var E=document.createElement(&quot;DIV&quot;);if(C==true&amp;&amp;n!=null){n=n.nextSibling}if(n!=null){u.insertBefore(E,n)}else{u.appendChild(E)}}}E._idd=s;E._rId=this._rId;if(typeof(E.style)!=&quot;undefined&quot;){if(typeof(y.offsetLeft)==&quot;undefined&quot;&amp;&amp;this.idef.offsetLeft&gt;0){y.offsetLeft=this.idef.offsetLeft}if(typeof(y.offsetTop)==&quot;undefined&quot;&amp;&amp;this.idef.offsetTop&gt;0){y.offsetTop=this.idef.offsetTop}var x=&quot;&quot;;if(typeof(y.offsetLeft)!=&quot;undefined&quot;){x+=&quot; padding-left:&quot;+y.offsetLeft+&quot;px!important;&quot;}if(typeof(y.offsetTop)!=&quot;undefined&quot;){x+=&quot; padding-top:&quot;+y.offsetTop+&quot;px!important;&quot;}E.style.cssText+=x}if(F==&quot;block&quot;){if(isNaN(y.blockOffset)){y.blockOffset=this.idef.blockOffset}}if(F==&quot;list&quot;){if(typeof(E._ofsNested)==&quot;undefined&quot;){E._ofsNested=this.idef_const.offsetNested}if(v!=null){E._sId=v}var A=this.items[F].ht(E,this.skin);if(!this.itemPull[this.idPrefix+s]._listObj){this.itemPull[this.idPrefix+s]._listObj=[]}if(!this.itemPull[this.idPrefix+s]._list){this.itemPull[this.idPrefix+s]._list=[]}if(!this.itemPull[this.idPrefix+s]._listBase){this.itemPull[this.idPrefix+s]._listBase=[]}(this.itemPull[this.idPrefix+s]._listObj).push(A[0]);(this.itemPull[this.idPrefix+s]._list).push(A[1]);(this.itemPull[this.idPrefix+s]._listBase).push(E);A[1].mR=function(a){return g.mR(a)};A[1].callEvent=function(a,q){return g.callEvent(a,q)};A[1].getForm=function(){return g.getForm()};A[1]._initObj(this._mergeSettings(y));if(E._inBlcok){E.className+=&quot; in_block&quot;}return A[1]}if(F==&quot;newcolumn&quot;){this._prepare(y.offset,H);return}if(F==&quot;label&quot;&amp;&amp;this._ic++ ==0){y._isTopmost=true}y.position=this.apos_css[(!y.position|| !this.apos_css[y.position]?this.idef.position:y.position)];E.className=y.position+(typeof(y.className)==&quot;string&quot;?&quot; &quot;+y.className:&quot;&quot;);if(!y.labelWidth){y.labelWidth=this.idef.labelWidth}if(!y.labelHeight){y.labelHeight=this.idef.labelHeight}if(typeof(y.wrap)!=&quot;undefined&quot;){y.wrap=window.dhx4.s2b(y.wrap)}y.labelAlign=(this.align_css[y.labelAlign]?this.align_css[y.labelAlign]:this.align_css[this.idef.labelAlign]);y.inputWidth=(y.width?y.width:(y.inputWidth?y.inputWidth:this.idef.inputWidth));if(!y.inputHeight){y.inputHeight=this.idef.inputHeight}if(typeof(y.note)!=&quot;undefined&quot;){if(y.note.length!=null&amp;&amp;y.note[0]!=null){y.note=y.note[0]}if(typeof(y.note.width)==&quot;undefined&quot;){y.note.width=this.idef.noteWidth}if(y.note.width==&quot;auto&quot;){y.note.width=y.inputWidth}}E.mR=function(a){return g.mR(a)};E.callEvent=function(a,q){return g.callEvent(a,q)};E.getForm=function(){return g.getForm()};E._autoCheck=function(a){g._autoCheck(a)};if(typeof(y.readonly)==&quot;string&quot;){y.readonly=window.dhx4.s2b(y.readonly)}if(typeof(y.autoStart)==&quot;string&quot;){y.autoStart=window.dhx4.s2b(y.autoStart)}if(typeof(y.autoRemove)==&quot;string&quot;){y.autoRemove=window.dhx4.s2b(y.autoRemove)}if(typeof(y.titleScreen)==&quot;string&quot;){y.titleScreen=window.dhx4.s2b(y.titleScreen)}if(typeof(y.info)==&quot;string&quot;){y.info=window.dhx4.s2b(y.info)}if(typeof(y.hidden)==&quot;string&quot;){y.hidden=window.dhx4.s2b(y.hidden)}if(typeof(y.checked)==&quot;string&quot;){y.checked=window.dhx4.s2b(y.checked)}if(typeof(y.userdata)!=&quot;undefined&quot;){for(var I in y.userdata){this.getForm().setUserData(s,I,y.userdata[I])}}if(y.validate){if(typeof(y.validate!=&quot;undefined&quot;)&amp;&amp;(typeof(y.validate)==&quot;function&quot;||typeof(window[y.validate])==&quot;function&quot;)){E._validate=[y.validate]}else{E._validate=String(y.validate).split(this.separator)}}if(typeof(y.required)!=&quot;undefined&quot;){if(typeof(y.required)==&quot;string&quot;){y.required=window.dhx4.s2b(y.required)}E._required=(y.required==true)}if(E._required){if(!E._validate){E._validate=[]}var r=false;for(o=0;o&lt;E._validate.length;o++){r=(r||(E._validate[o]==&quot;NotEmpty&quot;))}if(!r){E._validate.push(&quot;NotEmpty&quot;)}}E._ll=(y.position==this.apos_css[&quot;label-left&quot;]||y.position==this.apos_css[&quot;label-top&quot;]);this.objPull[this.idPrefix+s]=this.items[F].ht(E,y);this.itemPull[this.idPrefix+s]=E};this._initObj=function(s,o){if(typeof(s.data)!=&quot;undefined&quot;){var u=null;if(typeof(o)!=&quot;undefined&quot;){u=o.match(/(\?|\&amp;)id\=([a-z0-9_\-]*)/i);if(u!=null&amp;&amp;u[0]!=null){u=u[0].split(&quot;=&quot;)[1]}}if(this.callEvent(&quot;onBeforeDataLoad&quot;,[u,window.dhx4._copyObj(s.data)])===true){this.akV=u;this._last_load_data=s;this.setFormData(s.data);this.resetDataProcessor(&quot;updated&quot;)}return}this._prepare();for(var r=0;r&lt;s.length;r++){if(typeof(s[r])!=&quot;undefined&quot;&amp;&amp;s[r].type==&quot;settings&quot;){for(var n in s[r]){this.idef[n]=s[r][n]}}}for(var r=0;r&lt;s.length;r++){this._prepareItem(s[r])}this._autoCheck()};this._prepareItem=function(r,v,q){var o=(r!=null&amp;&amp;r.type!=null?r.type:&quot;&quot;);if(this.items[o]){if(!r.name){r.name=this._genStr(12)}var u=r.name;if(this.objPull[this.idPrefix+u]!=null||o==&quot;radio&quot;){u=this._genStr(12)}var s=r;s.label=s.label||&quot;&quot;;s.value=s.value;s.checked=window.dhx4.s2b(s.checked);s.disabled=window.dhx4.s2b(s.disabled);s.name=s.name||this._genStr(12);s.options=s.options||[];s.rows=s.rows||&quot;none&quot;;s.uid=this._genStr(12);this._addItem(o,u,s,null,null,v,q);v=null;if(this._parentEnabled===false){this._disableItem(u)}for(var n=0;n&lt;s.options.length;n++){if(s.options[n].list!=null){if(!s.options[n].value){s.options[n].value=this._genStr()}var a=this._addItem(&quot;list&quot;,u,s.options[n].list,s.options[n].value,null);a._subSelect=true;a._subSelectId=s.options[n].value}}if(r.list!=null){if(!r.listParent){r.listParent=s.name}var a=this._addItem(&quot;list&quot;,u,r.list,null,r.listParent)}}};this._xmlSubItems={item:&quot;list&quot;,option:&quot;options&quot;,note:&quot;note&quot;,userdata:&quot;_userdata&quot;};this._xmlToObject=function(C,n){if(typeof(n)==&quot;undefined&quot;){n=true}if(n){var E=C.getElementsByTagName(&quot;items&quot;);E=(E!=null&amp;&amp;E[0]!=null?E[0]:null);var o=C.getElementsByTagName(&quot;data&quot;);o=(o!=null&amp;&amp;o[0]!=null?o[0]:null)}else{E=C}var A=(n?[]:{});if(E!=null){for(var s=0;s&lt;E.childNodes.length;s++){if(typeof(E.childNodes[s].tagName)!=&quot;undefined&quot;){var u=E.childNodes[s].tagName;if(this._xmlSubItems[u]!=null){var v=this._xmlSubItems[u];if(typeof(A[v])==&quot;undefined&quot;){A[v]=[]}var y={};for(var J=0;J&lt;E.childNodes[s].attributes.length;J++){var F=E.childNodes[s].attributes[J].name;var D=E.childNodes[s].attributes[J].value;y[F]=D}if(v==&quot;note&quot;){y.text=E.childNodes[s].firstChild.nodeValue}if(v==&quot;_userdata&quot;){y.value=E.childNodes[s].firstChild.nodeValue}var x=this._xmlToObject(E.childNodes[s],false);for(var H in x){if(H==&quot;_userdata&quot;){if(!y.userdata){y.userdata={}}for(var J=0;J&lt;x[H].length;J++){y.userdata[x[H][J].name]=x[H][J].value}}else{y[H]=x[H]}}if(n){A.push(y)}else{A[v].push(y)}}}}}if(o!=null){A={data:{}};for(var s=0;s&lt;o.childNodes.length;s++){if(typeof(o.childNodes[s].tagName)!=&quot;undefined&quot;){var r=o.childNodes[s].tagName;var I=(o.childNodes[s].firstChild!=null?o.childNodes[s].firstChild.nodeValue:&quot;&quot;);A.data[r]=I}}}return A};this._autoCheck=function(u){if(this.FG===true){u=false}else{if(typeof(u)==&quot;undefined&quot;){u=true}}for(var r in this.itemPull){var x=(u&amp;&amp;(this.itemPull[r]._udis!==true));this[x?&quot;_enableItem&quot;:&quot;_disableItem&quot;](this.itemPull[r]._idd);if(this.getForm()._idIndex[this.itemPull[r]._idd]!=null){this.getForm()._idIndex[this.itemPull[r]._idd].enabled=x}var o=(x&amp;&amp;(typeof(this.itemPull[r]._checked)==&quot;boolean&quot;?this.itemPull[r]._checked:true));if(this.itemPull[r]._list){for(var A=0;A&lt;this.itemPull[r]._list.length;A++){var y=true;if(this.itemPull[r]._list[A]._subSelect==true){y=false;var s=this.getItemValue(this.itemPull[r]._idd);if(!(typeof(s)==&quot;object&quot;&amp;&amp;typeof(s.length)==&quot;number&quot;)){s=[s]}for(var n=0;n&lt;s.length;n++){y=(s[n]==this.itemPull[r]._list[A]._subSelectId)||y}this.itemPull[r]._listObj[A][y?&quot;show&quot;:&quot;hide&quot;](this.itemPull[r]._listBase[A])}this.itemPull[r]._list[A]._autoCheck(o&amp;&amp;y)}}}};this.doWithItem=function(r,n,y,x,w,v){if(typeof(r)==&quot;object&quot;){var C=r[0];var A=r[1];var D=null;var u=null;for(var s in this.itemPull){if((this.itemPull[s]._value==A||A===null)&amp;&amp;this.itemPull[s]._group==C){return this.objPull[s][n](this.itemPull[s],y,x,w,v)}if(this.itemPull[s]._list!=null&amp;&amp; !u){for(var o=0;o&lt;this.itemPull[s]._list.length;o++){u=this.itemPull[s]._list[o].doWithItem(r,n,y,x,w)}}}if(u!=null){return u}else{if(n==&quot;getType&quot;){return this.doWithItem(r[0],&quot;getType&quot;)}}}else{if(!this.itemPull[this.idPrefix+r]){var u=null;for(var s in this.itemPull){if(this.itemPull[s]._list&amp;&amp; !u){for(var o=0;o&lt;this.itemPull[s]._list.length;o++){if(u==null){u=this.itemPull[s]._list[o].doWithItem(r,n,y,x,w,v)}}}}return u}else{return this.objPull[this.idPrefix+r][n](this.itemPull[this.idPrefix+r],y,x,w,v)}}};this._removeItem=function(n,a){if(a!=null){n=this.doWithItem([n,a],&quot;destruct&quot;)}else{this.doWithItem(n,&quot;destruct&quot;)}this._clearItemData(n)};this._clearItemData=function(r){if(this.itemPull[this.idPrefix+r]){r=this.idPrefix+r;try{this.objPull[r]=null;this.itemPull[r]=null;delete this.objPull[r];delete this.itemPull[r]}catch(o){}}else{for(var a in this.itemPull){if(this.itemPull[a]._list){for(var n=0;n&lt;this.itemPull[a]._list.length;n++){this.itemPull[a]._list[n]._clearItemData(r)}}}}};this.isItem=function(n,a){if(a!=null){n=[n,a]}return this.doWithItem(n,&quot;isExist&quot;)};this.getItemType=function(n,a){n=[n,(a||null)];return this.doWithItem(n,&quot;getType&quot;)};this.forEachItem=function(o){for(var n in this.objPull){if(this.objPull[n].t==&quot;radio&quot;){o(this.itemPull[n]._group,this.itemPull[n]._value)}else{o(String(n).replace(this.idPrefix,&quot;&quot;))}if(this.itemPull[n]._list){for(var r=0;r&lt;this.itemPull[n]._list.length;r++){this.itemPull[n]._list[r].forEachItem(o)}}}};this.setItemLabel=function(o,a,n){if(n!=null){o=[o,a]}else{n=a}this.doWithItem(o,&quot;setText&quot;,n)};this.getItemLabel=function(n,a){if(a!=null){n=[n,a]}return this.doWithItem(n,&quot;getText&quot;)};this._enableItem=function(a){this.doWithItem(a,&quot;enable&quot;)};this._disableItem=function(a){this.doWithItem(a,&quot;disable&quot;)};this._isItemEnabled=function(a){return this.doWithItem(a,&quot;isEnabled&quot;)};this.checkItem=function(n,a){if(a!=null){n=[n,a]}this.doWithItem(n,&quot;check&quot;);this._autoCheck()};this.uncheckItem=function(n,a){if(a!=null){n=[n,a]}this.doWithItem(n,&quot;unCheck&quot;);this._autoCheck()};this.ajT=function(n,a){if(a!=null){n=[n,a]}return this.doWithItem(n,&quot;isChecked&quot;)};this.getCheckedValue=function(a){return this.doWithItem([a,null],&quot;getChecked&quot;)};this._getRGroup=function(v,u){for(var n in this.itemPull){if(this.itemPull[n]._group==v&amp;&amp;(u==null||this.itemPull[n]._value==u)){return this.itemPull[n]._idd}if(this.itemPull[n]._list!=null){for(var s=0;s&lt;this.itemPull[n]._list.length;s++){var o=this.itemPull[n]._list[s]._getRGroup(v,u);if(o!=null){return o}}}}return null};this.setItemValue=function(n,a){if(this.getItemType(n)==&quot;radio&quot;){if(this._getRGroup(n,a)!=null){this.checkItem(n,a)}else{this.uncheckItem(n,this.getCheckedValue(n))}return null}return this.doWithItem(n,&quot;setValue&quot;,a)};this.getItemValue=function(n,a){if(this.getItemType(n)==&quot;radio&quot;){return this.getCheckedValue(n)}return this.doWithItem(n,&quot;getValue&quot;,a)};this.updateValues=function(){this._updateValues()};this.showItem=function(n,a){if(a!=null){n=[n,a]}this.doWithItem(n,&quot;show&quot;)};this.hideItem=function(n,a){if(a!=null){n=[n,a]}this.doWithItem(n,&quot;hide&quot;)};this.isItemHidden=function(n,a){if(a!=null){n=[n,a]}return this.doWithItem(n,&quot;isHidden&quot;)};this.getOptions=function(a){return this.doWithItem(a,&quot;getOptions&quot;)};this.setItemWidth=function(n,a){this.doWithItem(n,&quot;setWidth&quot;,a)};this.getItemWidth=function(a){return this.doWithItem(a,&quot;getWidth&quot;)};this.setItemHeight=function(n,a){this.doWithItem(n,&quot;setHeight&quot;,a)};this.setItemFocus=function(n,a){if(a!=null){n=[n,a]}this.doWithItem(n,&quot;setFocus&quot;)};this._updateValues=function(){for(var n in this.itemPull){if(this.objPull[n]&amp;&amp;typeof(this.objPull[n].updateValue)==&quot;function&quot;){this.objPull[n].updateValue(this.itemPull[n])}if(this.itemPull[n]._list){for(var o=0;o&lt;this.itemPull[n]._list.length;o++){this.itemPull[n]._list[o]._updateValues()}}}};this._getItemByName=function(u){for(var n in this.itemPull){if(this.itemPull[n]._idd==u){return this.itemPull[n]}if(this.itemPull[n]._list!=null){for(var s=0;s&lt;this.itemPull[n]._list.length;s++){var o=this.itemPull[n]._list[s]._getItemByName(u);if(o!=null){return o}}}}return null};this._resetValidateCss=function(a){a.className=(a.className).replace(a._vcss,&quot;&quot;);a._vcss=null};this.setValidateCss=function(a,q,o){var n=this[this.getItemType(a)==&quot;radio&quot;?&quot;_getRGroup&quot;:&quot;_getItemByName&quot;](a);if(!n){return}if(n._vcss!=null){this._resetValidateCss(n)}n._vcss=(typeof(o)==&quot;string&quot;?o:&quot;validate_&quot;+(q===true?&quot;ok&quot;:&quot;error&quot;));n.className+=&quot; &quot;+n._vcss};this.resetValidateCss=function(o){for(var n in this.itemPull){if(this.itemPull[n]._vcss!=null){this._resetValidateCss(this.itemPull[n])}if(this.itemPull[n]._list!=null){for(var r=0;r&lt;this.itemPull[n]._list.length;r++){this.itemPull[n]._list[r].resetValidateCss()}}}};this.validate=function(n){if(this.callEvent(&quot;onBeforeValidate&quot;,[])==false){return}var a=true;this.forEachItem(function(q,r){if(typeof(r)!=&quot;undefined&quot;){q=[q,r]}var o=g.doWithItem(q,&quot;_validate&quot;);if(typeof(o)!=&quot;boolean&quot;){o=true}a=o&amp;&amp;a});this.callEvent(&quot;onAfterValidate&quot;,[a]);return a};this.validateItem=function(a,n){if(typeof(n)!=&quot;undefined&quot;){a=[a,n]}return this.doWithItem(a,&quot;_validate&quot;)};this.enableLiveValidation=function(a){this.live_validate=(a==true)};this.setReadonly=function(n,a){this.doWithItem(n,&quot;setReadonly&quot;,a)};this.isReadonly=function(a){return this.doWithItem(a,&quot;isReadonly&quot;)};this.getFirstActive=function(n){for(var r=0;r&lt;this._indexId.length;r++){var a=true;if(n==true){var o=this.getItemType(this._indexId[r]);if(!dhtmlXForm.prototype.items[o].setFocus){a=false}}if(a&amp;&amp;this._idIndex[this._indexId[r]].enabled){return this._indexId[r]}}return null};this.setFocusOnFirstActive=function(){var a=this.getFirstActive(true);if(a!=null){this.setItemFocus(a)}};this.enableItem=function(n,a){if(a!=null){n=[n,a]}this.doWithItem(n,&quot;userEnable&quot;);this._autoCheck()};this.disableItem=function(n,a){if(a!=null){n=[n,a]}this.doWithItem(n,&quot;userDisable&quot;);this._autoCheck()};this.isItemEnabled=function(n,a){if(a!=null){n=[n,a]}return this.doWithItem(n,&quot;isUserEnabled&quot;)};this.clear=function(){var n={};this.akV=(new Date()).valueOf();this.resetDataProcessor(&quot;inserted&quot;);for(var o in this.itemPull){var r=this.itemPull[o]._idd;if(this.itemPull[o].wT==&quot;ch&quot;){this.uncheckItem(r)}if(this.itemPull[o].wT in{ta:1,editor:1,calendar:1,pw:1,hd:1}){this.setItemValue(r,&quot;&quot;)}if(this.itemPull[o].wT==&quot;combo&quot;){this.itemPull[o]._apiChange=true;var w=this.cf(r);w.dn(0);w=null;this.itemPull[o]._apiChange=false}if(this.itemPull[o].wT==&quot;se&quot;){var u=this.getOptions(r);if(u.length&gt;0){u[0].selected=true}}if(this.itemPull[o].wT==&quot;ra&quot;){var s=this.itemPull[o]._group;if(!n[s]){this.checkItem(s,this.doWithItem(r,&quot;_getFirstValue&quot;));n[s]=true}}if(this.itemPull[o]._list){for(var v=0;v&lt;this.itemPull[o]._list.length;v++){this.itemPull[o]._list[v].clear()}}if(this[&quot;setFormData_&quot;+this.itemPull[o].wT]){this[&quot;setFormData_&quot;+this.itemPull[o].wT](r,&quot;&quot;)}}n=null;if(this._parentForm){this._autoCheck()}this.resetValidateCss()};this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,&quot;clear&quot;);window.dhx4._eventable(this,&quot;clear&quot;);for(var n in this.objPull){this._removeItem(String(n).replace(this.idPrefix,&quot;&quot;))}if(this._ccTm){window.clearTimeout(this._ccTm)}this._formLS=null;for(var o=0;o&lt;this.base.length;o++){while(this.base[o].childNodes.length&gt;0){this.base[o].removeChild(this.base[o].childNodes[0])}if(this.base[o].parentNode){this.base[o].parentNode.removeChild(this.base[o])}this.base[o]=null}this.base=null;this.vI.onkeypress=null;this.vI.className=&quot;&quot;;this.vI=null;for(var n in this){this[n]=null}g=null};for(var c in this.items){this.items[c].t=c;if(typeof(this.items[c]._index)==&quot;undefined&quot;){this.items[c]._index=true}if(!this.items[c].show){this.items[c].show=function(a){a.style.display=&quot;&quot;;if(a._listObj){for(var n=0;n&lt;a._listObj.length;n++){a._listObj[n].show(a._listBase[n])}}}}if(!this.items[c].hide){this.items[c].hide=function(a){a.style.display=&quot;none&quot;;if(a._listObj){for(var n=0;n&lt;a._listObj.length;n++){a._listObj[n].hide(a._listBase[n])}}}}if(!this.items[c].isHidden){this.items[c].isHidden=function(a){return(a.style.display==&quot;none&quot;)}}if(!this.items[c].userEnable){this.items[c].userEnable=function(a){a._udis=false}}if(!this.items[c].userDisable){this.items[c].userDisable=function(a){a._udis=true}}if(!this.items[c].isUserEnabled){this.items[c].isUserEnabled=function(a){return(a._udis!==true)}}if(!this.items[c].getType){this.items[c].getType=function(){return this.t}}if(!this.items[c].isExist){this.items[c].isExist=function(){return true}}if(!this.items[c]._validate){this.items[c]._validate=function(o){if(!o._validate|| !o._enabled){return true}if(o.wT==&quot;ch&quot;){var w=(this.isChecked(o)?this.getValue(o):0)}else{var w=this.getValue(o)}var n=true;for(var u=0;u&lt;o._validate.length;u++){var a=&quot;is&quot;+o._validate[u];if((w==null||w.length==0)&amp;&amp;a!=&quot;isNotEmpty&quot;&amp;&amp;o.wT!=&quot;container&quot;){}else{var s=dhtmlxValidation[a];if(o.wT==&quot;container&quot;&amp;&amp;typeof(s)==&quot;function&quot;){s=function(){return true}}if(typeof(s)!=&quot;function&quot;&amp;&amp;typeof(o._validate[u])==&quot;function&quot;){s=o._validate[u]}if(typeof(s)!=&quot;function&quot;&amp;&amp;typeof(window[o._validate[u]])==&quot;function&quot;){s=window[o._validate[u]]}n=((typeof(s)==&quot;function&quot;?s(w,o._idd):new RegExp(o._validate[u]).test(w))&amp;&amp;n);s=null}}if(!(o.callEvent(&quot;onValidate&quot;+(n?&quot;Success&quot;:&quot;Error&quot;),[o._idd,w,n])===false)){o.getForm().setValidateCss(o._idd,n)}return n}}}this.FG=false;this._doLock=function(n){var a=(n===true?true:false);if(this.FG==a){return}else{this.FG=a}this._autoCheck(!this.FG)};this.lock=function(){this._doLock(true)};this.unlock=function(){this._doLock(false)};this.isLocked=function(){return this.FG};this.setNumberFormat=function(q,n,a,o){return this.doWithItem(q,&quot;setNumberFormat&quot;,n,a,o)};window.dhx4._enableDataLoading(this,&quot;_initObj&quot;,&quot;_xmlToObject&quot;,&quot;items&quot;,{struct:true,data:true});window.dhx4._eventable(this);this.attachEvent(&quot;_onButtonClick&quot;,function(a,n){this.callEvent(&quot;onButtonClick&quot;,[a,n])});this._updateBlocks=function(){this.forEachItem(function(a){if(g.getItemType(a)==&quot;block&quot;||g.getItemType(a)==&quot;combo&quot;){g.doWithItem(a,&quot;_setCss&quot;,g.skin,g.vI.style.fontSize)}})};this._isObj=function(a){return(a!=null&amp;&amp;typeof(a)==&quot;object&quot;&amp;&amp;typeof(a.length)==&quot;undefined&quot;)};this._copyObj=function(q){if(this._isObj(q)){var o={};for(var n in q){if(typeof(q[n])==&quot;object&quot;&amp;&amp;q[n]!=null){o[n]=this._copyObj(q[n])}else{o[n]=q[n]}}}else{var o=[];for(var n=0;n&lt;q.length;n++){if(typeof(q[n])==&quot;object&quot;&amp;&amp;q[n]!=null){o[n]=this._copyObj(q[n])}else{o[n]=q[n]}}}return o};if(h!=null&amp;&amp;typeof(h)==&quot;object&quot;){this._initObj(this._copyObj(h))}if(this._parentForm){this._updateBlocks()}this._ccActive=false;this._ccTm=null;return this}dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,&quot;getInput&quot;)};dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,&quot;getSelect&quot;)};dhtmlXForm.prototype.items={};dhtmlXForm.prototype.items.checkbox={ht:function(a,c){a.wT=&quot;ch&quot;;a._enabled=true;a._checked=false;a._value=(typeof(c.value)==&quot;undefined&quot;?null:String(c.value));a._ro=(c.readonly==true);if(c._autoInputWidth!==false){c.inputWidth=14}this.doAddLabel(a,c);this.doAddInput(a,c,&quot;INPUT&quot;,&quot;TEXT&quot;,true,true,&quot;dhxform_textarea&quot;);a.childNodes[a._ll?1:0].className+=&quot; dhxform_img_node&quot;;var g=document.createElement(&quot;DIV&quot;);g.className=&quot;dhxform_img chbx0&quot;;a.appendChild(g);if(!isNaN(c.inputLeft)){a.childNodes[a._ll?1:0].style.left=parseInt(c.inputLeft)+&quot;px&quot;}if(!isNaN(c.inputTop)){a.childNodes[a._ll?1:0].style.top=parseInt(c.inputTop)+&quot;px&quot;}a.childNodes[a._ll?1:0].appendChild(g);a.childNodes[a._ll?1:0].firstChild.value=String(c.value);a._updateImgNode=function(l,m){var h=l.childNodes[l._ll?1:0].lastChild;h.className=(m?&quot;dhxform_actv_c&quot;:&quot;dhxform_img&quot;)+&quot; &quot;+(l._checked?&quot;chbx1&quot;:&quot;chbx0&quot;);l=h=null};a._doOnFocus=function(h){h.getForm().callEvent(&quot;onFocus&quot;,[h._idd])};a._doOnBlur=function(h){h.getForm().callEvent(&quot;onBlur&quot;,[h._idd])};a._doOnKeyUpDown=function(l,h){this.callEvent(l,[this.childNodes[this._ll?0:1].childNodes[0],h,this._idd])};if(c.checked==true){this.check(a)}if(c.hidden==true){this.hide(a)}if(c.disabled==true){this.userDisable(a)}this.doAttachEvents(a);return this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a)},doAddLabel:function(c,g){var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhxform_label &quot;+g.labelAlign;if(g.wrap==true){a.style.whiteSpace=&quot;normal&quot;}if(c._ll){c.insertBefore(a,c.firstChild)}else{c.appendChild(a)}if(typeof(g.tooltip)!=&quot;undefined&quot;){a.title=g.tooltip}a.innerHTML=&quot;<DIV class="dhxform_label_nav_link">&quot;+g.label+(g.info?&quot;<SPAN class="dhxform_info">[?]</SPAN>&quot;:&quot;&quot;)+(c._required?&quot;<SPAN class="dhxform_item_required">*</SPAN>&quot;:&quot;&quot;)+&quot;</DIV>&quot;;if(!isNaN(g.labelWidth)){a.firstChild.style.width=parseInt(g.labelWidth)+&quot;px&quot;}if(!isNaN(g.labelHeight)){a.firstChild.style.height=parseInt(g.labelHeight)+&quot;px&quot;}if(!isNaN(g.labelLeft)){a.style.left=parseInt(g.labelLeft)+&quot;px&quot;}if(!isNaN(g.labelTop)){a.style.top=parseInt(g.labelTop)+&quot;px&quot;}},doAddInput:function(y,h,c,q,r,l,m){var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhxform_control&quot;;if(y._ll){y.appendChild(a)}else{y.insertBefore(a,y.firstChild)}var x=document.createElement(c);x.className=m;x.name=y._idd;x._idd=y._idd;x.id=h.uid;if(typeof(q)==&quot;string&quot;){x.type=q}if(c==&quot;INPUT&quot;||c==&quot;TEXTAREA&quot;){x.onkeyup=function(u){u=u||event;y.callEvent(&quot;onKeyUp&quot;,[this,u,this._idd])};x.onkeydown=function(u){u=u||event;y.callEvent(&quot;onKeyDown&quot;,[this,u,this._idd])}}a.appendChild(x);if(h.readonly){this.setReadonly(y,true)}if(h.hidden==true){this.hide(y)}if(h.disabled==true){this.userDisable(y)}if(r){if(!isNaN(h.inputLeft)){a.style.left=parseInt(h.inputLeft)+&quot;px&quot;}if(!isNaN(h.inputTop)){a.style.top=parseInt(h.inputTop)+&quot;px&quot;}}var v=&quot;&quot;;var n=false;if(l){if(!isNaN(h.inputWidth)){v+=&quot;width:&quot;+parseInt(h.inputWidth)+&quot;px;&quot;;n=true}if(!isNaN(h.inputHeight)){v+=&quot;height:&quot;+parseInt(h.inputHeight)+&quot;px;&quot;}}if(typeof(h.style)==&quot;string&quot;){v+=h.style}x.style.cssText=v;if(h.maxLength){x.setAttribute(&quot;maxLength&quot;,h.maxLength)}if(h.connector){x.setAttribute(&quot;connector&quot;,h.connector)}if(n&amp;&amp;{input:1,password:1,select:1,calendar:1,colorpicker:1}[this.t]){if(dhtmlXForm.prototype.items[this.t]._dim==null){var s=parseInt(x.style.width);var g=(dhx4.isFF||dhx4.isIE?x.offsetWidth:x.clientWidth);dhtmlXForm.prototype.items[this.t]._dim=g-s}x.style.width=parseInt(x.style.width)-dhtmlXForm.prototype.items[this.t]._dim+&quot;px&quot;}if(typeof(h.note)==&quot;object&quot;){var o=document.createElement(&quot;DIV&quot;);o.className=&quot;dhxform_note&quot;;o.style.width=(isNaN(h.note.width)?x.offsetWidth:parseInt(h.note.width))+&quot;px&quot;;o._w=h.note.width;o.innerHTML=h.note.text;a.appendChild(o);o=null}},doUnloadNestedLists:function(a){if(!a._list){return}for(var c=0;c&lt;a._list.length;c++){a._list[c].unload();a._list[c]=null;a._listObj[c]=null;a._listBase[c].parentNode.removeChild(a._listBase[c]);a._listBase[c]=null}a._list=null;a._listObj=null;a._listBase=null},doDestruct:function(a){a.callEvent=null;a.mR=null;a.getForm=null;a._autoCheck=null;a._checked=null;a._enabled=null;a._idd=null;a.wT=null;a._value=null;a._group=null;a.onselectstart=null;a.childNodes[a._ll?1:0].onmousedown=null;a.childNodes[a._ll?1:0].ontouchstart=null;a.childNodes[a._ll?0:1].onmousedown=null;a.childNodes[a._ll?0:1].ontouchstart=null;a.childNodes[a._ll?0:1].childNodes[0].onfocus=null;a.childNodes[a._ll?0:1].childNodes[0].onblur=null;a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null;a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null;a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null;a.childNodes[a._ll?0:1].childNodes[0].onmousedown=null;a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null;a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);while(a.childNodes.length&gt;0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAttachEvents:function(c){var a=this;c.childNodes[c._ll?1:0][window.dhx4.isIPad?&quot;ontouchstart&quot;:&quot;onmousedown&quot;]=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}var g=(h.target||h.srcElement);if(!this.parentNode._enabled||this.parentNode._ro||(typeof(g.className)!=&quot;undefined&quot;&amp;&amp;g.className==&quot;dhxform_note&quot;)){h.cancelBubble=true;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false}a.doClick(this.parentNode)};c.childNodes[c._ll?0:1].childNodes[0][window.dhx4.isIPad?&quot;ontouchstart&quot;:&quot;onmousedown&quot;]=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}if(!this.parentNode.parentNode._enabled){h.cancelBubble=true;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false}var g=h.target||h.srcElement;if(typeof(g.className)!=&quot;undefined&quot;&amp;&amp;g.className==&quot;dhxform_info&quot;){this.parentNode.parentNode.callEvent(&quot;onInfo&quot;,[this.parentNode.parentNode._idd]);h.cancelBubble=true;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false}a.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();if(!a._enabled||a._ro){return}if(a.mR(&quot;onBeforeChange&quot;)){if(a.callEvent(&quot;onBeforeChange&quot;,[a._idd,a._value,a._checked])!==true){return}}this.Ou(a,!a._checked);a._autoCheck();a.callEvent(&quot;onChange&quot;,[a._idd,a._value,a._checked])},doCheckValue:function(a){if(a._checked&amp;&amp;a._enabled){a.childNodes[a._ll?1:0].firstChild.name=String(a._idd);a.childNodes[a._ll?1:0].firstChild.value=this.getValue(a)}else{a.childNodes[a._ll?1:0].firstChild.name=&quot;&quot;;a.childNodes[a._ll?1:0].firstChild.value=&quot;&quot;}},Ou:function(a,c){a._checked=(c===true?true:false);a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,&quot;&quot;)+(a._checked?&quot; chbx1&quot;:&quot; chbx0&quot;);this.doCheckValue(a)},check:function(a){this.Ou(a,true)},unCheck:function(a){this.Ou(a,false)},isChecked:function(a){return a._checked},enable:function(a){if(String(a.className).search(&quot;disabled&quot;)&gt;=0){a.className=String(a.className).replace(/disabled/gi,&quot;&quot;)}a._enabled=true;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0;a.childNodes[a._ll?0:1].childNodes[0].removeAttribute(&quot;disabled&quot;);this.doCheckValue(a)},disable:function(a){if(String(a.className).search(&quot;disabled&quot;)&lt;0){a.className+=&quot; disabled&quot;}a._enabled=false;a.childNodes[a._ll?0:1].childNodes[0].tabIndex= -1;a.childNodes[a._ll?0:1].childNodes[0].setAttribute(&quot;disabled&quot;,&quot;true&quot;);this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,c){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=c+(a._required?&quot;<SPAN class="dhxform_item_required">*</SPAN>&quot;:&quot;&quot;)},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<SPAN>[^&lt;]*&lt;\/span&gt;/g,&quot;&quot;)},setValue:function(a,c){this.Ou(a,(c===true||parseInt(c)==1||c==&quot;true&quot;||a._value===c))},getValue:function(a,c){if(c==&quot;realvalue&quot;){return a._value}return((typeof(a._value)==&quot;undefined&quot;||a._value==null)?(a._checked?1:0):a._value)},setReadonly:function(a,c){a._ro=(c===true)},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}};dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},ht:function(g,h,c){g.wT=&quot;ra&quot;;g._enabled=true;g._checked=false;g._group=h.name;g._value=h.value;g._uid=c;g._ro=(h.readonly==true);g._rName=g._rId+g._group;this.r[g._idd]=g;h.inputWidth=14;this.doAddLabel(g,h);this.doAddInput(g,h,&quot;INPUT&quot;,&quot;TEXT&quot;,true,true,&quot;dhxform_textarea&quot;);g.childNodes[g._ll?1:0].className+=&quot; dhxform_img_node&quot;;var l=document.createElement(&quot;DIV&quot;);l.className=&quot;dhxform_img rdbt0&quot;;g.appendChild(l);if(!isNaN(h.inputLeft)){g.childNodes[g._ll?1:0].style.left=parseInt(h.inputLeft)+&quot;px&quot;}if(!isNaN(h.inputTop)){g.childNodes[g._ll?1:0].style.top=parseInt(h.inputTop)+&quot;px&quot;}g.childNodes[g._ll?1:0].appendChild(l);g.childNodes[g._ll?1:0].firstChild.name=&quot;&quot;;g.childNodes[g._ll?1:0].firstChild.value=&quot;&quot;;g._updateImgNode=function(n,o){var m=n.childNodes[n._ll?1:0].lastChild;m.className=(o?&quot;dhxform_actv_r&quot;:&quot;dhxform_img&quot;)+&quot; &quot;+(n._checked?&quot;rdbt1&quot;:&quot;rdbt0&quot;);n=m=null};g._doOnFocus=function(m){m.getForm().callEvent(&quot;onFocus&quot;,[m._group,m._value])};g._doOnBlur=function(m){m.getForm().callEvent(&quot;onBlur&quot;,[m._group,m._value])};g._doOnKeyUpDown=function(n,m){this.callEvent(n,[this.childNodes[this._ll?0:1].childNodes[0],m,this._group,this._value])};if(this.input[g._rName]==null){var a=document.createElement(&quot;INPUT&quot;);a.type=&quot;HIDDEN&quot;;a.name=h.name;a.firstValue=g._value;g.appendChild(a);this.input[g._rName]=a}if(!this.firstValue[g._rName]){this.firstValue[g._rName]=h.value}if(h.checked==true){this.check(g)}if(h.hidden==true){this.hide(g)}if(h.disabled==true){this.userDisable(g)}this.doAttachEvents(g);return this},destruct:function(h,l){if(h.lastChild==this.input[h._rName]){var g=false;for(var c in this.r){if(!g&amp;&amp;this.r[c]._group==h._group&amp;&amp;this.r[c]._idd!=h._idd){this.r[c].appendChild(this.input[h._rName]);g=true}}if(!g){this.input[h._rName].parentNode.removeChild(this.input[h._rName]);this.input[h._rName]=null;this.firstValue[h._rName]=null}}var m=h._idd;h._doOnFocus=h._doOnBlur=h._updateImgNode=null;this.doUnloadNestedLists(h);this.doDestruct(h);return m},doClick:function(c){c.childNodes[c._ll?0:1].childNodes[0].focus();if(!(c._enabled&amp;&amp; !c._checked)){return}if(c._ro){return}var a=[c._group,c._value,true];if(c.mR(&quot;onBeforeChange&quot;)){if(c.callEvent(&quot;onBeforeChange&quot;,a)!==true){return}}this.Ou(c,true);c.getForm()._autoCheck();c.callEvent(&quot;onChange&quot;,a)},doCheckValue:function(g){var h=null;for(var c in this.r){if(this.r[c]._checked&amp;&amp;this.r[c]._group==g._group&amp;&amp;this.r[c]._rId==g._rId){h=this.r[c]._value}}if(h!=null&amp;&amp;this.r[c]._enabled){this.input[g._rName].name=String(g._group);this.input[g._rName].value=h}else{this.input[g._rName].name=&quot;&quot;;this.input[g._rName].value=&quot;&quot;}this.input[g._rName]._value=h},Ou:function(l,m){m=(m===true);for(var c in this.r){if(this.r[c]._group==l._group&amp;&amp;this.r[c]._rId==l._rId){var h=false;if(this.r[c]._idd==l._idd){if(this.r[c]._checked!=m){this.r[c]._checked=m;h=true}}else{if(this.r[c]._checked){this.r[c]._checked=false;h=true}}if(h){var g=this.r[c].childNodes[this.r[c]._ll?1:0].childNodes[1];g.className=g.className.replace(/rdbt[0-1]{1}/gi,&quot;&quot;)+(this.r[c]._checked?&quot; rdbt1&quot;:&quot; rdbt0&quot;);g=null}}}this.doCheckValue(l)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},_getId:function(a){return a._idd},setValue:function(a,c){}};(function(){for(var c in{doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1}){dhtmlXForm.prototype.items.radio[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.select={ht:function(a,c){a.wT=&quot;se&quot;;a._enabled=true;a._value=null;a._newValue=null;if(window.dhx4.isFF||window.dhx4.isIE&amp;&amp;typeof(c.inputWidth)==&quot;number&quot;){c.inputWidth=Number(c.inputWidth)}this.doAddLabel(a,c);this.doAddInput(a,c,&quot;SELECT&quot;,null,true,true,&quot;dhxform_select&quot;);this.doAttachEvents(a);this.doLoadOpts(a,c);if(c.connector!=null){this.doLoadOptsConnector(a,c.connector)}if(typeof(c.value)!=&quot;undefined&quot;&amp;&amp;c.value!=null){this.setValue(a,c.value)}return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.mR=null;a.getForm=null;a._autoCheck=null;a._enabled=null;a._idd=null;a.wT=null;a._value=null;a._newValue=null;a.onselectstart=null;a.childNodes[a._ll?1:0].childNodes[0].onclick=null;a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a.childNodes[a._ll?1:0].childNodes[0].onfocus=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null;a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);while(a.childNodes.length&gt;0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAddLabel:function(c,g){var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhxform_label &quot;+g.labelAlign;a.innerHTML=&quot;&lt;label for='&quot;+g.uid+&quot;'&gt;&quot;+g.label+(g.info?&quot;<SPAN class="dhxform_info">[?]</SPAN>&quot;:&quot;&quot;)+(c._required?&quot;<SPAN class="dhxform_item_required">*</SPAN>&quot;:&quot;&quot;)+&quot;&lt;/label&gt;&quot;;if(g.wrap==true){a.style.whiteSpace=&quot;normal&quot;}if(typeof(g.tooltip)!=&quot;undefined&quot;){a.title=g.tooltip}c.appendChild(a);if(typeof(g.label)==&quot;undefined&quot;||g.label==null||g.label.length==0){a.style.display=&quot;none&quot;}if(!isNaN(g.labelWidth)){a.style.width=parseInt(g.labelWidth)+&quot;px&quot;}if(!isNaN(g.labelHeight)){a.style.height=parseInt(g.labelHeight)+&quot;px&quot;}if(!isNaN(g.labelLeft)){a.style.left=parseInt(g.labelLeft)+&quot;px&quot;}if(!isNaN(g.labelTop)){a.style.top=parseInt(g.labelTop)+&quot;px&quot;}if(g.info){a.onclick=function(l){l=l||event;var h=l.target||l.srcElement;if(typeof(h.className)!=&quot;undefined&quot;&amp;&amp;h.className==&quot;dhxform_info&quot;){this.parentNode.callEvent(&quot;onInfo&quot;,[this.parentNode._idd]);l.cancelBubble=true;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false}}}},doAttachEvents:function(g){var a=g.childNodes[g._ll?1:0].childNodes[0];var c=this;a.onclick=function(){c.doOnChange(this);c.doValidate(this.parentNode.parentNode)};a.onkeydown=function(h){h=h||event;c.doOnChange(this);c.doValidate(this.parentNode.parentNode);this.parentNode.parentNode.callEvent(&quot;onKeyDown&quot;,[this,h,this.parentNode.parentNode._idd])};a.onchange=function(){c.doOnChange(this);c.doValidate(this.parentNode.parentNode)};a.onkeyup=function(h){h=h||event;this.parentNode.parentNode.callEvent(&quot;onKeyUp&quot;,[this,h,this.parentNode.parentNode._idd])};a=null;this.doAttachChangeLS(g)},doAttachChangeLS:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];a.onfocus=function(){var g=this.parentNode.parentNode;g.getForm()._ccActivate(g._idd,this,g.getForm().getItemValue(g._idd,true));g.getForm().callEvent(&quot;onFocus&quot;,[g._idd]);g=null};a.onblur=function(){var g=this.parentNode.parentNode;g.getForm()._ccDeactivate(g._idd);g.getForm().callEvent(&quot;onBlur&quot;,[g._idd]);g=null};a=null},doValidate:function(a){if(a.getForm().live_validate){this._validate(a)}},doLoadOpts:function(n,l,r){var o=n.childNodes[n._ll?1:0].childNodes[0];var a=l.options;var h=false;for(var c=0;c&lt;a.length;c++){var m=a[c].text||a[c].label;if(!m||typeof(m)==&quot;undefined&quot;){m=&quot;&quot;}var g=new Option(m,a[c].value);if(typeof(a[c].img_src)==&quot;string&quot;){g.setAttribute(&quot;img_src&quot;,a[c].img_src)}o.options.add(g);if(typeof(a[c].selected)!=&quot;undefined&quot;&amp;&amp;window.dhx4.s2b(a[c].selected)==true){g.selected=true;n._value=a[c].value;h=true}if(typeof(a[c].checked)!=&quot;undefined&quot;&amp;&amp;window.dhx4.s2b(a[c].checked)==true){g.setAttribute(&quot;checked&quot;,&quot;1&quot;)}if(typeof(a[c].img)!=&quot;undefined&quot;){g.setAttribute(&quot;img&quot;,a[c].img)}if(typeof(a[c].img_dis)!=&quot;undefined&quot;){g.setAttribute(&quot;img_dis&quot;,a[c].img_dis)}}if(!h&amp;&amp;o.selectedIndex&gt;=0){n._value=o.options[o.selectedIndex].value}if(r===true){n.callEvent(&quot;onOptionsLoaded&quot;,[n._idd])}this._checkNoteWidth(n)},doLoadOptsConnector:function(g,a){var c=this;g._connector_working=true;window.dhx4.ajax.get(a,function(n){n=n.ai.responseXML;if(n==null){return}var h=n.getElementsByTagName(&quot;data&quot;);if(h==null||h[0]==null){return}h=h[0];var m=[];for(var o=0;o&lt;h.childNodes.length;o++){if(typeof(h.childNodes[o].tagName)!=&quot;undefined&quot;&amp;&amp;String(h.childNodes[o].tagName).toLowerCase()==&quot;item&quot;){var l=h.childNodes[o];m.push({label:l.getAttribute(&quot;label&quot;),value:l.getAttribute(&quot;value&quot;),selected:(l.getAttribute(&quot;selected&quot;)!=null)});l=null}}c.doLoadOpts(g,{options:m},true);g._connector_working=false;if(g._connector_value!=null){c.setValue(g,g._connector_value);g._connector_value=null}c=g=null})},doOnChange:function(g){var a=g.parentNode.parentNode;a._newValue=(g.selectedIndex&gt;=0?g.options[g.selectedIndex].value:null);if(a._newValue!=a._value){if(a.mR(&quot;onBeforeChange&quot;)){if(a.callEvent(&quot;onBeforeChange&quot;,[a._idd,a._value,a._newValue])!==true){for(var c=0;c&lt;g.options.length;c++){if(g.options[c].value==a._value){g.options[c].selected=true}}return}}a._value=a._newValue;a.callEvent(&quot;onChange&quot;,[a._idd,a._value])}a._autoCheck()},setText:function(a,c){if(!c){c=&quot;&quot;}a.childNodes[a._ll?0:1].childNodes[0].innerHTML=c+(a._required?&quot;<SPAN class="dhxform_item_required">*</SPAN>&quot;:&quot;&quot;);a.childNodes[a._ll?0:1].style.display=(c.length==0||c==null?&quot;none&quot;:&quot;&quot;)},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<SPAN>[^&lt;]*&lt;\/span&gt;/g,&quot;&quot;)},enable:function(a){if(String(a.className).search(&quot;disabled&quot;)&gt;=0){a.className=String(a.className).replace(/disabled/gi,&quot;&quot;)}a._enabled=true;a.childNodes[a._ll?1:0].childNodes[0].removeAttribute(&quot;disabled&quot;)},disable:function(a){if(String(a.className).search(&quot;disabled&quot;)&lt;0){a.className+=&quot; disabled&quot;}a._enabled=false;a.childNodes[a._ll?1:0].childNodes[0].setAttribute(&quot;disabled&quot;,true)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(c,h){if(c._connector_working){c._connector_value=h;return}var a=this.getOptions(c);for(var g=0;g&lt;a.length;g++){if(a[g].value==h){a[g].selected=true;c._value=a[g].value}}if(c._list!=null&amp;&amp;c._list.length&gt;0){c.getForm()._autoCheck()}c.getForm()._ccReload(c._idd,c._value)},getValue:function(g){var a= -1;var c=this.getOptions(g);for(var h=0;h&lt;c.length;h++){if(c[h].selected){a=c[h].value}}return a},setWidth:function(c,a){c.childNodes[c._ll?1:0].childNodes[0].style.width=a+&quot;px&quot;},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(c){var a;if(c.childNodes[c._ll?1:0].childNodes[1]!=null){a=c.childNodes[c._ll?1:0].childNodes[1];if(a.className!=null&amp;&amp;a.className.search(/dhxform_note/gi)&gt;=0&amp;&amp;a._w==&quot;auto&quot;){a.style.width=c.childNodes[c._ll?1:0].childNodes[0].offsetWidth+&quot;px&quot;}}a=null}};(function(){for(var c in{doAddInput:1,doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.select[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(h,m,n){var c=h.childNodes[h._ll?1:0].childNodes[0];c.multiple=true;if(!isNaN(m.size)){c.size=Number(m.size)}h._value=[];h._newValue=[];var g=m.options;for(var l=0;l&lt;g.length;l++){var a=new Option(g[l].text||g[l].label,g[l].value);c.options.add(a);if(g[l].selected==true||g[l].selected==&quot;true&quot;){a.selected=true;h._value.push(g[l].value)}}if(n===true){h.callEvent(&quot;onOptionsLoaded&quot;,[h._idd])}this._checkNoteWidth(h)},doAttachEvents:function(g){var a=g.childNodes[g._ll?1:0].childNodes[0];var c=this;a.onfocus=function(){c.doOnChange(this);var h=this.parentNode.parentNode;h.getForm().callEvent(&quot;onFocus&quot;,[h._idd]);h=null};a.onblur=function(){c.doOnChange(this);var h=this.parentNode.parentNode;h.getForm().callEvent(&quot;onBlur&quot;,[h._idd]);h=null};a.onclick=function(){c.doOnChange(this);var h=this.parentNode.parentNode;h._autoCheck();h=null}},doOnChange:function(h){var c=h.parentNode.parentNode;c._newValue=[];for(var g=0;g&lt;h.options.length;g++){if(h.options[g].selected){c._newValue.push(h.options[g].value)}}if((c._value).sort().toString()!=(c._newValue).sort().toString()){if(c.mR(&quot;onBeforeChange&quot;)){if(c.callEvent(&quot;onBeforeChange&quot;,[c._idd,c._value,c._newValue])!==true){var a={};for(var g=0;g&lt;c._value.length;g++){a[c._value[g]]=true}for(var g=0;g&lt;h.options.length;g++){h.options[g].selected=(a[h.options[g].value]==true)}a=null;return}}c._value=[];for(var g=0;g&lt;c._newValue.length;g++){c._value.push(c._newValue[g])}c.callEvent(&quot;onChange&quot;,[c._idd,c._value])}c._autoCheck()},setValue:function(g,l){var a={};if(typeof(l)==&quot;string&quot;){l=l.split(&quot;,&quot;)}if(typeof(l)!=&quot;object&quot;){l=[l]}for(var h=0;h&lt;l.length;h++){a[l[h]]=true}var c=this.getOptions(g);for(var h=0;h&lt;c.length;h++){c[h].selected=(a[c[h].value]==true)}g._autoCheck()},getValue:function(g){var a=[];var c=this.getOptions(g);for(var h=0;h&lt;c.length;h++){if(c[h].selected){a.push(c[h].value)}}return a}};(function(){for(var c in dhtmlXForm.prototype.items.select){if(!dhtmlXForm.prototype.items.multiselect[c]){dhtmlXForm.prototype.items.multiselect[c]=dhtmlXForm.prototype.items.select[c]}}})();dhtmlXForm.prototype.items.input={ht:function(m,n){var l=(!isNaN(n.rows));m.wT=&quot;ta&quot;;m._enabled=true;this.doAddLabel(m,n);this.doAddInput(m,n,(l?&quot;TEXTAREA&quot;:&quot;INPUT&quot;),(l?null:&quot;TEXT&quot;),true,true,&quot;dhxform_textarea&quot;);this.doAttachEvents(m);if(l){m.childNodes[m._ll?1:0].childNodes[0].rows=Number(n.rows)+(window.dhx4.isIE6?1:0)}if(typeof(n.numberFormat)!=&quot;undefined&quot;){var h,g=null,o=null;if(typeof(n.numberFormat)!=&quot;string&quot;){h=n.numberFormat[0];g=n.numberFormat[1]||null;o=n.numberFormat[2]||null}else{h=n.numberFormat;if(typeof(n.groupSep)==&quot;string&quot;){g=n.groupSep}if(typeof(n.decSep)==&quot;string&quot;){o=n.decSep}}this.setNumberFormat(m,h,g,o,false)}this.setValue(m,n.value);return this},doAttachEvents:function(c){var a=this;if(c.wT==&quot;ta&quot;||c.wT==&quot;se&quot;||c.wT==&quot;pw&quot;){c.childNodes[c._ll?1:0].childNodes[0].onfocus=function(){var g=this.parentNode.parentNode;if(g._df!=null){this.value=g._value||&quot;&quot;}g.getForm()._ccActivate(g._idd,this,this.value);g.getForm().callEvent(&quot;onFocus&quot;,[g._idd]);g=null}}c.childNodes[c._ll?1:0].childNodes[0].onblur=function(){var g=this.parentNode.parentNode;g.getForm()._ccDeactivate(g._idd);a.updateValue(g,true);if(g.getForm().live_validate){a._validate(g)}g.getForm().callEvent(&quot;onBlur&quot;,[g._idd]);g=null}},updateValue:function(g,a){var h=g.childNodes[g._ll?1:0].childNodes[0].value;if(!a&amp;&amp;g._df!=null&amp;&amp;h==this._getFmtValue(g,h)){return}var c=this;if(g._value!=h){if(g.mR(&quot;onBeforeChange&quot;)){if(g.callEvent(&quot;onBeforeChange&quot;,[g._idd,g._value,h])!==true){if(g._df!=null){c.setValue(g,g._value)}else{g.childNodes[g._ll?1:0].childNodes[0].value=g._value}return}}if(g._df!=null){c.setValue(g,h)}else{g._value=h}g.callEvent(&quot;onChange&quot;,[g._idd,h]);return}if(g._df!=null){this.setValue(g,g._value)}},setValue:function(g,h){g._value=(typeof(h)!=&quot;undefined&quot;&amp;&amp;h!=null?h:&quot;&quot;);var c=(String(g._value)||&quot;&quot;);var a=g.childNodes[g._ll?1:0].childNodes[0];if(g._df!=null&amp;&amp;typeof(this._getFmtValue)==&quot;function&quot;){c=this._getFmtValue(g,c)}if(a.value!=c){a.value=c;g.getForm()._ccReload(g._idd,c)}a=null},getValue:function(a){var c=a.getForm();if(c._formLS&amp;&amp;c._formLS[a._idd]!=null){this.updateValue(a)}c=null;return(typeof(a._value)!=&quot;undefined&quot;&amp;&amp;a._value!=null?a._value:&quot;&quot;)},setReadonly:function(a,c){a._ro=(c===true);if(a._ro){a.childNodes[a._ll?1:0].childNodes[0].setAttribute(&quot;readOnly&quot;,&quot;true&quot;)}else{a.childNodes[a._ll?1:0].childNodes[0].removeAttribute(&quot;readOnly&quot;)}},isReadonly:function(a){if(!a._ro){a._ro=false}return a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(l,n,h,o,c){if(typeof(c)!=&quot;boolean&quot;){c=true}if(n==&quot;&quot;){l._df=null;if(c){this.setValue(l,l._value)}return true}if(typeof(n)!=&quot;string&quot;){return}var a=n.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(a==null||a.length!=4){return false}l._df={i_len:false,i_sep:(typeof(h)==&quot;string&quot;?h:&quot;,&quot;),d_len:false,d_sep:(typeof(o)==&quot;string&quot;?o:&quot;.&quot;),s_bef:(typeof(a[1])==&quot;string&quot;?a[1]:&quot;&quot;),s_aft:(typeof(a[3])==&quot;string&quot;?a[3]:&quot;&quot;)};var m=a[2].split(&quot;.&quot;);if(m[1]!=null){l._df.d_len=m[1].length}var g=m[0].split(&quot;,&quot;);if(g.length&gt;1){l._df.i_len=g[g.length-1].length}if(c){this.setValue(l,l._value)}return true},_getFmtValue:function(item,v){var r=v.match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&amp;&amp;r.length==5){var v0=&quot;&quot;;if(r[1]!=null){v0+=r[1]}v0+=item._df.s_bef;if(item._df.i_len!==false){var i=0;var v1=&quot;&quot;;for(var q=r[2].length-1;q&gt;=0;q--){v1=&quot;&quot;+r[2].charAt(q)+v1;if(++i==item._df.i_len&amp;&amp;q&gt;0){v1=item._df.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(item._df.d_len!==false){if(r[4]==null){r[4]=&quot;&quot;}while(r[4].length&lt;item._df.d_len){r[4]+=&quot;0&quot;}eval(&quot;dhx4.temp = new RegExp(/\\d{&quot;+item._df.d_len+&quot;}/);&quot;);var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=item._df.d_sep+t1}dhx4.temp=t1=null}v0+=item._df.s_aft;return v0}return v}};(function(){for(var c in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1}){dhtmlXForm.prototype.items.input[c]=dhtmlXForm.prototype.items.select[c]}})();dhtmlXForm.prototype.items.password={ht:function(a,c){a.wT=&quot;pw&quot;;a._enabled=true;this.doAddLabel(a,c);this.doAddInput(a,c,&quot;INPUT&quot;,&quot;PASSWORD&quot;,true,true,&quot;dhxform_textarea&quot;);this.doAttachEvents(a);this.setValue(a,c.value);return this}};(function(){for(var c in{doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.password[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.file={ht:function(a,c){a.wT=&quot;fl&quot;;a._enabled=true;this.doAddLabel(a,c);this.doAddInput(a,c,&quot;INPUT&quot;,&quot;FILE&quot;,true,false,&quot;dhxform_textarea&quot;);a.childNodes[a._ll?1:0].childNodes[0].onchange=function(){a.callEvent(&quot;onChange&quot;,[a._idd,this.value])};return this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}};(function(){for(var c in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.file[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.label={_index:false,ht:function(c,g){c.wT=&quot;lb&quot;;c._enabled=true;c._checked=true;var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhxform_txt_label2&quot;+(g._isTopmost?&quot; topmost&quot;:&quot;&quot;);a.innerHTML=g.label;c.appendChild(a);if(g.hidden==true){this.hide(c)}if(g.disabled==true){this.userDisable(c)}if(!isNaN(g.labelWidth)){a.style.width=parseInt(g.labelWidth)+&quot;px&quot;}if(!isNaN(g.labelHeight)){a.style.height=parseInt(g.labelHeight)+&quot;px&quot;}if(!isNaN(g.labelLeft)){a.style.left=parseInt(g.labelLeft)+&quot;px&quot;}if(!isNaN(g.labelTop)){a.style.top=parseInt(g.labelTop)+&quot;px&quot;}return this},destruct:function(a){this.doUnloadNestedLists(a);a._autoCheck=null;a._enabled=null;a.wT=null;a.callEvent=null;a.mR=null;a.getForm=null;a.onselectstart=null;a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search(&quot;disabled&quot;)&gt;=0){a.className=String(a.className).replace(/disabled/gi,&quot;&quot;)}a._enabled=true},disable:function(a){if(String(a.className).search(&quot;disabled&quot;)&lt;0){a.className+=&quot; disabled&quot;}a._enabled=false},setText:function(a,c){a.firstChild.innerHTML=c},getText:function(a){return a.firstChild.innerHTML}};(function(){for(var c in{doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.label[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.button={ht:function(g,h){g.wT=&quot;bt&quot;;g._enabled=true;g._name=h.name;g.className=String(g.className).replace(&quot;item_label_top&quot;,&quot;item_label_left&quot;).replace(&quot;item_label_right&quot;,&quot;item_label_left&quot;);if(!isNaN(h.width)){var a=Math.max(h.width,10)}var c=(typeof(a)!=&quot;undefined&quot;);g._doOnKeyUpDown=function(m,l){this.callEvent(m,[this.childNodes[0].childNodes[0],l,this._idd])};g.innerHTML='<DIV class="dhxform_btn" dir="ltr"><DIV class="dhxform_btn_txt">&quot;+h.value+&quot;</DIV></DIV>&quot;;if(!isNaN(h.inputLeft)){g.childNodes[0].style.left=parseInt(h.inputLeft)+&quot;px&quot;}if(!isNaN(h.inputTop)){g.childNodes[0].style.top=parseInt(h.inputTop)+&quot;px&quot;}if(h.hidden==true){this.hide(g)}if(h.disabled==true){this.userDisable(g)}if(typeof(h.tooltip)!=&quot;undefined&quot;){g.firstChild.title=h.tooltip}g.onselectstart=function(l){l=l||event;l.cancelBubble=true;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};g.firstChild.onselectstart=function(l){l=l||event;l.cancelBubble=true;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};g.firstChild.onkeypress=function(l){l=l||event;if((l.keyCode==32||l.charCode==32||l.keyCode==13||l.charCode==13)&amp;&amp; !this.parentNode._busy){this.parentNode._busy=true;l.cancelBubble=true;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}_dhxForm_doClick(this.childNodes[0],[&quot;mousedown&quot;,&quot;mouseup&quot;]);return false}};g.firstChild.ontouchstart=function(){e=e||event;e.preventDefault();if(!this.parentNode._busy){this.parentNode._busy=true;_dhxForm_doClick(this.childNodes[0],[&quot;mousedown&quot;,&quot;mouseup&quot;])}};g.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)};g.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],&quot;mouseout&quot;);this.parentNode._doOnBlur(this.parentNode)};g.firstChild.onkeyup=function(l){this.parentNode._doOnKeyUpDown(&quot;onKeyUp&quot;,l||event)};g.firstChild.onkeydown=function(l){this.parentNode._doOnKeyUpDown(&quot;onKeyDown&quot;,l||event)};g.firstChild.onmouseover=function(){var l=this.parentNode;if(!l._enabled){return}this._isOver=true;this.className=&quot;dhxform_btn dhxform_btn_over&quot;;l=null};g.firstChild.onmouseout=function(){var l=this.parentNode;if(!l._enabled){return}this.className=&quot;dhxform_btn&quot;;this._allowClick=false;this._pressed=false;this._isOver=false;l=null};g.firstChild.onmousedown=function(){if(this._pressed){return}var l=this.parentNode;if(!l._enabled){return}this.className=&quot;dhxform_btn dhxform_btn_pressed&quot;;this._allowClick=true;this._pressed=true;l=null};g.firstChild.onmouseup=function(){if(!this._pressed){return}var l=this.parentNode;if(!l._enabled){return}l._busy=false;this.className=&quot;dhxform_btn&quot;+(this._isOver?&quot; dhxform_btn_over&quot;:&quot;&quot;);if(this._pressed&amp;&amp;this._allowClick){l.callEvent(&quot;_onButtonClick&quot;,[l._name,l._cmd])}this._allowClick=false;this._pressed=false;l=null};g._doOnFocus=function(l){l.getForm().callEvent(&quot;onFocus&quot;,[l._idd])};g._doOnBlur=function(l){l.getForm().callEvent(&quot;onBlur&quot;,[l._idd])};return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.mR=null;a.getForm=null;a._autoCheck=null;a.wT=null;a._enabled=null;a._cmd=null;a._name=null;a._doOnFocus=null;a._doOnBlur=null;a._doOnKeyUpDown=null;a.onselectstart=null;a.firstChild.onselectstart=null;a.firstChild.onkeypress=null;a.firstChild.ontouchstart=null;a.firstChild.onfocus=null;a.firstChild.onblur=null;a.firstChild.onkeyup=null;a.firstChild.onkeydown=null;a.firstChild.onmouseover=null;a.firstChild.onmouseout=null;a.firstChild.onmousedown=null;a.firstChild.onmouseup=null;while(a.childNodes.length&gt;0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search(&quot;disabled&quot;)&gt;=0){a.className=String(a.className).replace(/disabled/gi,&quot;&quot;)}a._enabled=true;a.childNodes[0].removeAttribute(&quot;disabled&quot;);a.childNodes[0].setAttribute(&quot;role&quot;,&quot;link&quot;);a.childNodes[0].setAttribute(&quot;tabIndex&quot;,&quot;0&quot;)},disable:function(a){if(String(a.className).search(&quot;disabled&quot;)&lt;0){a.className+=&quot; disabled&quot;}a._enabled=false;a.childNodes[0].setAttribute(&quot;disabled&quot;,&quot;true&quot;);a.childNodes[0].removeAttribute(&quot;role&quot;);a.childNodes[0].removeAttribute(&quot;tabIndex&quot;)},setText:function(a,c){a.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML=c},getText:function(a){return a.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML},setFocus:function(a){a.childNodes[0].focus()}};(function(){for(var c in{doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.button[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.hidden={_index:false,ht:function(c,g){c.style.display=&quot;none&quot;;c._name=g.name;c.wT=&quot;hd&quot;;c._enabled=true;var a=document.createElement(&quot;INPUT&quot;);a.type=&quot;HIDDEN&quot;;a.name=g.name;a.value=(g.value||&quot;&quot;);c.appendChild(a);return this},destruct:function(a){this.doUnloadNestedLists(a);while(a.childNodes.length&gt;0){a.removeChild(a.childNodes[0])}a._autoCheck=null;a._name=null;a.wT=null;a._enabled=null;a.onselectstart=null;a.callEvent=null;a.mR=null;a.getForm=null;a.parentNode.removeChild(a);a=null},enable:function(a){a._enabled=true;a.childNodes[0].setAttribute(&quot;name&quot;,a._name)},disable:function(a){a._enabled=false;a.childNodes[0].removeAttribute(&quot;name&quot;)},show:function(){},hide:function(){},isHidden:function(){return true},setValue:function(a,c){a.childNodes[0].value=c},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}};(function(){for(var c in{doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.hidden[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.list={_index:false,ht:function(a,c){a.wT=&quot;list&quot;;a._enabled=true;a._isNestedForm=true;a.style.paddingLeft=a._ofsNested+&quot;px&quot;;a.className=&quot;dhxform_base_nested&quot;+(a._custom_css||&quot;&quot;);return[this,new dhtmlXForm(a,null,c)]},destruct:function(a){}};dhtmlXForm.prototype.items.fieldset={_index:false,ht:function(c,h){c.wT=&quot;fs&quot;;if(typeof(parseInt(h.inputWidth))==&quot;number&quot;){}c._width=h.width;c._enabled=true;c._checked=true;c.className=&quot;fs_&quot;+h.position+(typeof(h.className)==&quot;string&quot;?&quot; &quot;+h.className:&quot;&quot;);var g=document.createElement(&quot;FIELDSET&quot;);g.className=&quot;dhxform_fs&quot;;var l=String(h.labelAlign).replace(&quot;align_&quot;,&quot;&quot;);g.innerHTML=&quot;&lt;legend class='fs_legend' align='&quot;+l+&quot;' style='text-align:&quot;+l+&quot;'&gt;&quot;+h.label+&quot;&lt;/legend&gt;&quot;;c.appendChild(g);if(!isNaN(h.inputLeft)){g.style.left=parseInt(h.inputLeft)+&quot;px&quot;}if(!isNaN(h.inputTop)){g.style.top=parseInt(h.inputTop)+&quot;px&quot;}if(h.inputWidth!=&quot;auto&quot;){if(!isNaN(h.inputWidth)){g.style.width=parseInt(h.inputWidth)+&quot;px&quot;;var a=parseInt(g.style.width);if(g.offsetWidth&gt;a){g.style.width=a+(a-g.offsetWidth)+&quot;px&quot;}}}c._addSubListNode=function(){var m=document.createElement(&quot;DIV&quot;);m._custom_css=&quot; dhxform_fs_nested&quot;;this.childNodes[0].appendChild(m);return m};if(h.hidden==true){this.hide(c)}if(h.disabled==true){this.userDisable(c)}return this},destruct:function(a){this.doUnloadNestedLists(a);a._checked=null;a._enabled=null;a._idd=null;a.wT=null;a._width=null;a.onselectstart=null;a._addSubListNode=null;a._autoCheck=null;a.callEvent=null;a.mR=null;a.getForm=null;while(a.childNodes.length&gt;0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,c){a.childNodes[0].childNodes[0].innerHTML=c},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=true;if(String(a.className).search(&quot;disabled&quot;)&gt;=0){a.className=String(a.className).replace(/disabled/gi,&quot;&quot;)}},disable:function(a){a._enabled=false;if(String(a.className).search(&quot;disabled&quot;)&lt;0){a.className+=&quot; disabled&quot;}},setWidth:function(c,a){c.childNodes[0].style.width=a+&quot;px&quot;;c._width=a},getWidth:function(a){return a._width}};(function(){for(var c in{doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.fieldset[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.block={_index:false,ht:function(c,g){c.wT=&quot;bl&quot;;c._width=g.width;c._enabled=true;c._checked=true;c.className=&quot;block_&quot;+g.position+(typeof(g.className)==&quot;string&quot;?&quot; &quot;+g.className:&quot;&quot;);var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhxform_obj_&quot;+c.getForm().skin+&quot; dhxform_block&quot;;a.style.fontSize=c.getForm().vI.style.fontSize;if(g.style){a.style.cssText=g.style}if(typeof(g.id)!=&quot;undefined&quot;){a.id=g.id}c.appendChild(a);if(!isNaN(g.inputLeft)){a.style.left=parseInt(g.inputLeft)+&quot;px&quot;}if(!isNaN(g.inputTop)){a.style.top=parseInt(g.inputTop)+&quot;px&quot;}if(g.inputWidth!=&quot;auto&quot;){if(!isNaN(g.inputWidth)){a.style.width=parseInt(g.inputWidth)+&quot;px&quot;}}if(!isNaN(g.blockOffset)){c._ofsNested=g.blockOffset}c._addSubListNode=function(){var h=document.createElement(&quot;DIV&quot;);h._inBlcok=true;if(typeof(this._ofsNested)!=&quot;undefined&quot;){h._ofsNested=this._ofsNested}this.childNodes[0].appendChild(h);return h};if(g.hidden==true){this.hide(c)}if(g.disabled==true){this.userDisable(c)}return this},_setCss:function(a,g,c){a.firstChild.className=&quot;dhxform_obj_&quot;+g+&quot; dhxform_block&quot;;a.firstChild.style.fontSize=c}};(function(){for(var c in{enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1}){dhtmlXForm.prototype.items.block[c]=dhtmlXForm.prototype.items.fieldset[c]}})();dhtmlXForm.prototype.items.newcolumn={_index:false};dhtmlXForm.prototype.items.template={ht:function(c,g){var a=(!isNaN(g.rows));c.wT=&quot;tp&quot;;c._enabled=true;if(g.format){if(typeof(g.format)==&quot;function&quot;){c.format=g.format}if(typeof(window[g.format])==&quot;function&quot;){c.format=window[g.format]}}if(!c.format){c.format=function(h,l){return l}}this.doAddLabel(c,g);this.doAddInput(c,g,&quot;DIV&quot;,null,true,true,&quot;dhxform_item_template&quot;);c._value=(g.value||&quot;&quot;);c.childNodes[1].childNodes[0].innerHTML=c.format(c._idd,c._value);return this},setValue:function(a,c){a._value=c;a.childNodes[1].childNodes[0].innerHTML=a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){if(String(a.className).search(&quot;disabled&quot;)&gt;=0){a.className=String(a.className).replace(/disabled/gi,&quot;&quot;)}a._enabled=true},disable:function(a){if(String(a.className).search(&quot;disabled&quot;)&lt;0){a.className+=&quot; disabled&quot;}a._enabled=false}};(function(){for(var c in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.template[c]=dhtmlXForm.prototype.items.select[c]}})();dhtmlXForm.prototype._ulToObject=function(l,r){var m=[];for(var c=0;c&lt;l.childNodes.length;c++){if(String(l.childNodes[c].tagName||&quot;&quot;).toLowerCase()==&quot;li&quot;){var g={};var u=l.childNodes[c];for(var s=0;s&lt;r.length;s++){if(u.getAttribute(r[s])!=null){g[String(r[s]).replace(&quot;ftype&quot;,&quot;type&quot;)]=u.getAttribute(r[s])}}if(!g.label){try{g.label=u.firstChild.nodeValue}catch(o){}}var h=u.getElementsByTagName(&quot;UL&quot;);if(h[0]!=null){g[(g.type==&quot;select&quot;?&quot;options&quot;:&quot;list&quot;)]=dhtmlXForm.prototype._ulToObject(h[0],r)}for(var s=0;s&lt;u.childNodes.length;s++){if(String(u.childNodes[s].tagName||&quot;&quot;).toLowerCase()==&quot;userdata&quot;){if(!g.userdata){g.userdata={}}g.userdata[u.childNodes[s].getAttribute(&quot;name&quot;)]=u.childNodes[s].firstChild.nodeValue}}m[m.length]=g}if(String(l.childNodes[c].tagName||&quot;&quot;).toLowerCase()==&quot;div&quot;){var g={};g.type=&quot;label&quot;;try{g.label=l.childNodes[c].firstChild.nodeValue}catch(o){}m[m.length]=g}}return m};dhtmlXForm.prototype.setUserData=function(l,g,h,a){if(typeof(a)!=&quot;undefined&quot;){var c=this.doWithItem([l,g],&quot;_getId&quot;);if(c!=null){l=c;g=h;h=a}}if(!this._userdata){this._userdata={}}this._userdata[l]=(this._userdata[l]||{});this._userdata[l][g]=h};dhtmlXForm.prototype.getUserData=function(h,g,a){if(typeof(a)!=&quot;undefined&quot;){var c=this.doWithItem([h,g],&quot;_getId&quot;);if(c!=null){h=c;g=a}}if(this._userdata!=null&amp;&amp;typeof(this._userdata[h])!=&quot;undefined&quot;&amp;&amp;typeof(this._userdata[h][g])!=&quot;undefined&quot;){return this._userdata[h][g]}return &quot;&quot;};dhtmlXForm.prototype.setRTL=function(a){this._rtl=(a===true?true:false);if(this._rtl){if(String(this.vI).search(/dhxform_rtl/gi)&lt;0){this.vI.className+=&quot; dhxform_rtl&quot;}}else{if(String(this.vI).search(/dhxform_rtl/gi)&gt;=0){this.vI.className=String(this.vI.className).replace(/dhxform_rtl/gi,&quot;&quot;)}}};_dhxForm_doClick=function(h,c){if(typeof(c)==&quot;object&quot;){var a=c[1];c=c[0]}if(document.createEvent){var g=document.createEvent(&quot;MouseEvents&quot;);g.initEvent(c,true,false);h.dispatchEvent(g)}else{if(document.createEventObject){var g=document.createEventObject();g.button=1;h.fireEvent(&quot;on&quot;+c,g)}}if(a){window.setTimeout(function(){_dhxForm_doClick(h,a)},100)}};dhtmlXForm.prototype.setFormData=function(g){for(var c in g){var h=this.getItemType(c);switch(h){case &quot;checkbox&quot;:this[g[c]==true||parseInt(g[c])==1||g[c]==&quot;true&quot;||g[c]==this.getItemValue(c,&quot;realvalue&quot;)?&quot;checkItem&quot;:&quot;uncheckItem&quot;](c);break;case &quot;radio&quot;:this.checkItem(c,g[c]);break;case &quot;input&quot;:case &quot;textarea&quot;:case &quot;password&quot;:case &quot;select&quot;:case &quot;multiselect&quot;:case &quot;hidden&quot;:case &quot;template&quot;:case &quot;combo&quot;:case &quot;calendar&quot;:case &quot;colorpicker&quot;:case &quot;editor&quot;:this.setItemValue(c,g[c]);break;default:if(this[&quot;setFormData_&quot;+h]){this[&quot;setFormData_&quot;+h](c,g[c])}else{if(!this.hId){this.hId=this._genStr(12)}this.setUserData(this.hId,c,g[c])}break}}};dhtmlXForm.prototype.getFormData=function(w,m){var c={};var s=this;for(var v in this.itemPull){var o=this.itemPull[v]._idd;var x=this.itemPull[v].wT;if(x==&quot;ch&quot;){c[o]=(this.ajT(o)?this.getItemValue(o):0)}if(x==&quot;ra&quot;&amp;&amp; !c[this.itemPull[v]._group]){c[this.itemPull[v]._group]=this.getCheckedValue(this.itemPull[v]._group)}if(x in{se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}){c[o]=this.getItemValue(o,w)}if(this[&quot;getFormData_&quot;+x]){c[o]=this[&quot;getFormData_&quot;+x](o)}if(x==&quot;up&quot;){var l=this.getItemValue(o);for(var h in l){c[h]=l[h]}}if(this.itemPull[v]._list){for(var g=0;g&lt;this.itemPull[v]._list.length;g++){var n=this.itemPull[v]._list[g].getFormData(w,m);for(var u in n){c[u]=n[u]}}}}if(!m&amp;&amp;this.hId&amp;&amp;this._userdata[this.hId]){for(var v in this._userdata[this.hId]){if(!c[v]){c[v]=this._userdata[this.hId][v]}}}return c};dhtmlXForm.prototype.adjustParentSize=function(){var l=0;var h= -1;for(var m=0;m&lt;this.base.length;m++){l+=this.base[m].firstChild.offsetWidth;if(this.base[m].offsetHeight&gt;h){h=this.base[m].offsetHeight}}var g=false;try{g=(this.vI.parentNode.parentNode.parentNode.parentNode._isCell==true);if(g){var a=this.vI.parentNode.parentNode.parentNode.parentNode}}catch(n){}if(g&amp;&amp;typeof(a)!=&quot;undefined&quot;){if(l&gt;0){a.setWidth(l+10)}if(h&gt;0){a.setHeight(h+a.firstChild.firstChild.offsetHeight+5)}g=a=null;return}var c=false;try{c=(this.vI.parentNode.parentNode.parentNode._isWindow==true);if(c){var o=this.vI.parentNode.parentNode;if(typeof(o.callEvent)==&quot;function&quot;){this.vI.style.display=&quot;none&quot;;o.callEvent(&quot;_setCellSize&quot;,[l+15,h+15]);this.vI.style.display=&quot;&quot;}}}catch(n){}};dhtmlXForm.prototype.reset=function(){if(this.callEvent(&quot;onBeforeReset&quot;,[this.akV,this.getFormData()])){if(this._last_load_data){this.setFormData(this._last_load_data)}this.callEvent(&quot;onAfterReset&quot;,[this.akV])}};dhtmlXForm.prototype.send=function(c,n,o,h){if(typeof n==&quot;function&quot;){o=n;n=&quot;post&quot;}else{n=(n==&quot;get&quot;?&quot;get&quot;:&quot;post&quot;)}if(h!==true&amp;&amp; !this.validate()){return}var m=this.getFormData(true);var l=[];for(var g in m){l.push(g+&quot;=&quot;+encodeURIComponent(m[g]))}var a=function(q){if(o){o.call(this,q,q.ai.responseText)}};if(n==&quot;get&quot;){window.dhx4.ajax.get(c+(c.indexOf(&quot;?&quot;)== -1?&quot;?&quot;:&quot;&amp;&quot;)+l.join(&quot;&amp;&quot;),a)}else{window.dhx4.ajax.post(c,l.join(&quot;&amp;&quot;),a)}};dhtmlXForm.prototype.save=function(a,c){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(c,a){this.akV=a};dhtmlXForm.prototype._dp_init=function(a){a._methods=[&quot;dummy&quot;,&quot;dummy&quot;,&quot;_changeFormId&quot;,&quot;dummy&quot;];a.fD=function(h,c){var g=this.obj.getFormData(true);g[this.action_param]=this.obj.getUserData(h,this.action_param);return g};a._clearUpdateFlag=function(){};a.attachEvent(&quot;onAfterUpdate&quot;,function(g,h,l,c){if(h==&quot;inserted&quot;||h==&quot;updated&quot;){this.obj.resetDataProcessor(&quot;updated&quot;);this.obj._last_load_data=this.obj.getFormData(true)}this.obj.callEvent(&quot;onAfterSave&quot;,[this.obj.akV,c]);return true});a.aH=false;a.JI(&quot;POST&quot;,true);this.dp=a;this.akV=(new Date()).valueOf();this.resetDataProcessor(&quot;inserted&quot;);this.save=function(){if(!this.callEvent(&quot;onBeforeSave&quot;,[this.akV,this.getFormData()])){return}if(!this.validate()){return}a.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(a){if(!this.dp){return}this.dp.bE=[];this.dp._in_progress=[];this.dp.setUpdated(this.akV,true,a)};dhtmlXForm.prototype._ccActivate=function(g,a,c){if(!this._formLS){this._formLS={}}if(!this._formLS[g]){this._formLS[g]={input:a,value:c}}if(!this._ccActive){this._ccActive=true;this._ccDo()}a=null};dhtmlXForm.prototype._ccDeactivate=function(a){if(this._ccTm){window.clearTimeout(this._ccTm)}this._ccActive=false;if(this._formLS!=null&amp;&amp;this._formLS[a]!=null){this._formLS[a].input=null;this._formLS[a]=null;delete this._formLS[a]}};dhtmlXForm.prototype._ccDo=function(){if(this._ccTm){window.clearTimeout(this._ccTm)}for(var c in this._formLS){var l=this._formLS[c].input;if(String(l.tagName).toLowerCase()==&quot;select&quot;){var g=&quot;&quot;;if(l.selectedIndex&gt;=0&amp;&amp;l.selectedIndex&lt;l.options.length){g=l.options[l.selectedIndex].value}}else{var g=l.value}if(g!=this._formLS[c].value){this._formLS[c].value=g;this.callEvent(&quot;onInputChange&quot;,[l._idd,g,this])}l=null}if(this._ccActive){var h=this;this._ccTm=window.setTimeout(function(){h._ccDo();h=null},100)}};dhtmlXForm.prototype._ccReload=function(c,a){if(this._formLS&amp;&amp;this._formLS[c]){this._formLS[c].value=a}};dhtmlXForm.prototype._autoload=function(){var c=[&quot;ftype&quot;,&quot;name&quot;,&quot;value&quot;,&quot;label&quot;,&quot;check&quot;,&quot;checked&quot;,&quot;disabled&quot;,&quot;text&quot;,&quot;rows&quot;,&quot;select&quot;,&quot;selected&quot;,&quot;width&quot;,&quot;style&quot;,&quot;className&quot;,&quot;labelWidth&quot;,&quot;labelHeight&quot;,&quot;labelLeft&quot;,&quot;labelTop&quot;,&quot;inputWidth&quot;,&quot;inputHeight&quot;,&quot;inputLeft&quot;,&quot;inputTop&quot;,&quot;position&quot;,&quot;size&quot;];var g=document.getElementsByTagName(&quot;UL&quot;);var h=[];for(var n=0;n&lt;g.length;n++){if(g[n].className==&quot;dhtmlxForm&quot;){var m=document.createElement(&quot;DIV&quot;);h[h.length]={nodeUL:g[n],nodeForm:m,data:dhtmlXForm.prototype._ulToObject(g[n],c),name:(g[n].getAttribute(&quot;name&quot;)||null)}}}for(var n=0;n&lt;h.length;n++){h[n].nodeUL.parentNode.insertBefore(h[n].nodeForm,h[n].nodeUL);var o=new dhtmlXForm(h[n].nodeForm,h[n].data);if(h[n].name!==null){window[h[n].name]=o}var l=(h[n].nodeUL.getAttribute(&quot;oninit&quot;)||null);h[n].nodeUL.parentNode.removeChild(h[n].nodeUL);h[n].nodeUL=null;h[n].nodeForm=null;h[n].data=null;h[n]=null;if(l){if(typeof(l)==&quot;function&quot;){l()}else{if(typeof(window[l])==&quot;function&quot;){window[l]()}}}}if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;load&quot;,dhtmlXForm.prototype._autoload,false)}else{window.detachEvent(&quot;onload&quot;,dhtmlXForm.prototype._autoload)}};if(typeof(window.addEventListener)==&quot;function&quot;){window.addEventListener(&quot;load&quot;,dhtmlXForm.prototype._autoload,false)}else{window.attachEvent(&quot;onload&quot;,dhtmlXForm.prototype._autoload)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==&quot;&quot;},isNotEmpty:function(a){return(a instanceof Array?a.length&gt;0: !a==&quot;&quot;)},isValidBoolean:function(a){return! !a.match(/^(0|1|true|false)$/)},isValidEmail:function(a){return! !a.match(/(^[a-z]([a-z0-9_\.]*)@([a-z_\.]*)([.][a-z]{3})$)|(^[a-z]([a-z_\.]*)@([a-z_\-\.]*)(\.[a-z]{2,3})$)/i)},isValidInteger:function(a){return! !a.match(/(^-?\d+$)/)},isValidNumeric:function(a){return! !a.match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return! !a.match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(c){var a=c.match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&amp;&amp; ! !(a[1]&lt;=9999&amp;&amp;a[2]&lt;=12&amp;&amp;a[3]&lt;=31&amp;&amp;a[4]&lt;=59&amp;&amp;a[5]&lt;=59&amp;&amp;a[6]&lt;=59)||false},isValidDate:function(a){var c=a.match(/^(\d{4})-(\d{2})-(\d{2})$/);return c&amp;&amp; ! !(c[1]&lt;=9999&amp;&amp;c[2]&lt;=12&amp;&amp;c[3]&lt;=31)||false},isValidTime:function(c){var a=c.match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&amp;&amp; ! !(a[1]&lt;=24&amp;&amp;a[2]&lt;=59&amp;&amp;a[3]&lt;=59)||false},isValidIPv4:function(a){var c=a.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return c&amp;&amp; ! !(c[1]&lt;=255&amp;&amp;c[2]&lt;=255&amp;&amp;c[3]&lt;=255&amp;&amp;c[4]&lt;=255)||false},isValidCurrency:function(a){return a.match(/^\$?\s?\d+?[\.,\,]?\d+?\s?\$?$/)&amp;&amp;true||false},isValidSSN:function(a){return a.match(/^\d{3}\-?\d{2}\-?\d{4}$/)&amp;&amp;true||false},isValidSIN:function(a){return a.match(/^\d{9}$/)&amp;&amp;true||false}};dhtmlxValidation=new dhtmlxValidation()}dhtmlXForm.prototype.dL=function(g,a,m,h){var c=null;if(g instanceof Array){c=g[1];g=g[0]}var l=null;if(g!=null){var l=this._getParentForm(g,c);if(l!=null){if(l.item._list==null){if(!a.listParent){a.listParent=l.item._idd}l.form._addItem(&quot;list&quot;,l.item._idd,[a],null,l.item._idd,m,h)}else{l.item._list[0].dL(null,a,m,h)}l.form=l.item=null;l=null;this._autoCheck();return}}this._prepareItem(a,m,h);this._autoCheck()};dhtmlXForm.prototype.removeItem=function(c,a){this._removeItem(c,a)};dhtmlXForm.prototype.removeColumn=function(n,m,h,g){var r=null;if(n instanceof Array){r=n[1];n=n[0]}if(n!=null){var l=this._getParentForm(n,r);if(l!=null){if(l.item._list!=null&amp;&amp;l.item._list[0]!=null){l.item._list[0].removeColumn(null,m,h,g)}l.form=l.item=null;l=null}return}m=Math.min(Math.max(m,0),this.vI.childNodes.length-1);if(this.vI.childNodes.length==1){if(h==true){this._removeItemsInColumn(this.vI.childNodes[m])}}else{if(h==true){this._removeItemsInColumn(this.vI.childNodes[m])}else{if(!g){var a=m-1;if(a&lt;0){a=m+1}}else{var a=m+1;if(a&gt;this.vI.childNodes.length-1){a=m-1}}while(this.vI.childNodes[m].childNodes.length&gt;0){this.vI.childNodes[a].appendChild(this.vI.childNodes[m].childNodes[0])}}var o=[];for(var c=0;c&lt;this.base.length;c++){if(this.vI.childNodes[m]!=this.base[c]){o.push(this.base[c])}}this.base=o;this.vI.removeChild(this.vI.childNodes[m]);this.b_index--;o=null}};dhtmlXForm.prototype.getColumnNode=function(g,c){var h=null;var a=null;if(g instanceof Array){a=g[1];g=g[0]}if(g!=null){var l=this._getParentForm(g,a);if(l!=null){if(l.item._list!=null&amp;&amp;l.item._list[0]!=null&amp;&amp;h==null){h=l.item._list[0].getColumnNode(null,c)}l.form=l.item=null;l=null}return h}if(c&lt;0||c&gt;this.vI.childNodes.length-1){return null}return this.vI.childNodes[c]};dhtmlXForm.prototype._removeItemsInColumn=function(h){var a=[];for(var g=0;g&lt;h.childNodes.length;g++){var c=h.childNodes[g];if(c._idd!=null&amp;&amp;c.wT!=null){a.push([c._idd,(c.wT==&quot;ra&quot;?c._value:null)])}c=null}for(var g=0;g&lt;a.length;g++){this.removeItem(a[g][0],a[g][1])}};dhtmlXForm.prototype._getParentForm=function(m,l){if(this.itemPull[this.idPrefix+m]!=null){return{form:this,item:this.itemPull[this.idPrefix+m]}}for(var c in this.itemPull){if(this.itemPull[c].wT==&quot;ra&quot;&amp;&amp;this.itemPull[c]._group==m&amp;&amp;this.itemPull[c]._value==l){return{form:this,item:this.itemPull[c]}}}var h=null;for(var c in this.itemPull){if(!h&amp;&amp;this.itemPull[c]._list!=null){for(var g=0;g&lt;this.itemPull[c]._list.length;g++){if(!h){h=this.itemPull[c]._list[g]._getParentForm(m,l)}}}}return h};(function(){for(var c in dhtmlXForm.prototype.items){if(!dhtmlXForm.prototype.items[c]._getItemNode){dhtmlXForm.prototype.items[c]._getItemNode=function(a){return a}}}})();dhtmlXForm.prototype._getItemNode=function(c,a){if(a!=null){c=[c,a]}return this.doWithItem(c,&quot;_getItemNode&quot;)};dhtmlXForm.prototype.setRequired=function(o,m,l){if(typeof(l)==&quot;undefined&quot;){l=m}else{o=[o,m]}var g=this._getItemNode(o);if(!g){return}l=window.dhx4.s2b(l);g._required=(l==true);if(g._required){if(!g._validate){g._validate=[]}var c=false;for(var h=0;h&lt;g._validate.length;h++){c=(g._validate[h]==&quot;NotEmpty&quot;||c)}if(!c){g._validate.push(&quot;NotEmpty&quot;)}var n=g.childNodes[g._ll?0:1].childNodes[0];if(!(n.lastChild&amp;&amp;n.lastChild.className&amp;&amp;n.lastChild.className.search(/required/)&gt;=0)){var a=document.createElement(&quot;SPAN&quot;);a.className=&quot;dhxform_item_required&quot;;a.innerHTML=&quot;*&quot;;n.appendChild(a);a=n=null}}else{if(g._validate!=null){var c=g._validate;g._validate=[];for(var h=0;h&lt;c.length;h++){if(c[h]!=&quot;NotEmpty&quot;){g._validate.push(c[h])}}if(g._validate.length==0){g._validate=null}}var n=g.childNodes[g._ll?0:1].childNodes[0];if(n.lastChild&amp;&amp;n.lastChild.className&amp;&amp;n.lastChild.className.search(/required/)&gt;=0){n.removeChild(n.lastChild);n=null}}this._resetValidateCss(g);g=null};dhtmlXForm.prototype.setNote=function(l,g,a){if(typeof(a)==&quot;undefined&quot;){a=g}else{l=[l,g]}var c=this._getItemNode(l);if(!c){return}var h=this._getNoteNode(c);if(!h){if(!a.width){a.width=c.childNodes[c._ll?1:0].childNodes[0].offsetWidth}h=document.createElement(&quot;DIV&quot;);h.className=&quot;dhxform_note&quot;;if({ch:1,ra:1}[c.wT]){c.childNodes[c._ll?1:0].insertBefore(h,c.childNodes[c._ll?1:0].lastChild)}else{c.childNodes[c._ll?1:0].appendChild(h)}}h.innerHTML=a.text;if(a.width!=null){h.style.width=a.width+&quot;px&quot;;h._w=a.width}h=null};dhtmlXForm.prototype.clearNote=function(h,c){if(typeof(c)!=&quot;undefined&quot;){h=[h,c]}var a=this._getItemNode(h);if(!a){return}var g=this._getNoteNode(a);if(g!=null){g.parentNode.removeChild(g);g=null}};dhtmlXForm.prototype._getNoteNode=function(a){var g=null;for(var c=0;c&lt;a.childNodes[a._ll?1:0].childNodes.length;c++){if(String(a.childNodes[a._ll?1:0].childNodes[c].className).search(/dhxform_note/)&gt;=0){g=a.childNodes[a._ll?1:0].childNodes[c]}}a=null;return g};dhtmlXForm.prototype.setValidation=function(m,h,l){if(typeof(note)==&quot;undefined&quot;){l=h}else{m=[m,h]}var c=this._getItemNode(m);if(!c){return}if(c._validate!=null){for(var g=0;g&lt;c._validate.length;g++){c._validate[g]=null}}c._validate=[];if(typeof(l)==&quot;function&quot;||typeof(window[l])==&quot;function&quot;){c._validate=[l]}else{c._validate=String(l).split(this.separator)}if(c._required){var a=false;for(var g=0;g&lt;c._validate.length;g++){a=(c._validate[g]==&quot;NotEmpty&quot;||a)}if(!a){c._validate.push(&quot;NotEmpty&quot;)}}c=null};dhtmlXForm.prototype.clearValidation=function(h,g){if(typeof(g)!=&quot;undefined&quot;){h=[h,g]}var a=this._getItemNode(h);if(!a){return}if(a._validate!=null){for(var c=0;c&lt;a._validate.length;c++){a._validate[c]=null}}a._validate=a._required?[&quot;NotEmpty&quot;]:null;a=null};dhtmlXForm.prototype.reloadOptions=function(a,m){var c=this.getItemType(a);if(!{select:1,multiselect:1,combo:1}[c]){return}if(c==&quot;select&quot;||c==&quot;multiselect&quot;){var h=this.getOptions(a);while(h.length&gt;0){h.remove(0)}h.length=0;h=null;if(typeof(m)==&quot;string&quot;){this.doWithItem(a,&quot;doLoadOptsConnector&quot;,m)}else{if(m instanceof Array){this.doWithItem(a,&quot;doLoadOpts&quot;,{options:m})}}}if(c==&quot;combo&quot;){var n=this.cf(a);n.clearAll();n.Um(&quot;&quot;);if(typeof(m)==&quot;string&quot;){this.doWithItem(a,&quot;doLoadOptsConnector&quot;,m)}else{if(m instanceof Array){var g=null;for(var l=0;l&lt;m.length;l++){if(window.dhx4.s2b(m[l].selected)){g=m[l].value}}n.addOption(m);if(g!=null){this.setItemValue(a,g)}n=null}}}};dhtmlXForm.prototype.setTooltip=function(m,l,h){if(typeof(h)==&quot;undefined&quot;){h=l}else{m=[m,l]}var c=this._getItemNode(m);if(!c){return}var a=null;if(c.childNodes.length==1){a=c.childNodes[0]}else{for(var g=0;g&lt;c.childNodes.length;g++){if(c.childNodes[g].className!=null&amp;&amp;c.childNodes[g].className.search(&quot;dhxform_label&quot;)&gt;=0){a=c.childNodes[g]}}}if(a!=null){if(h==null||h.length==0){a.removeAttribute(&quot;title&quot;)}else{a.title=h}}a=null};dhtmlXForm.prototype.saveBackup=function(){if(!this._backup){this._backup={};this._backupId=new Date().getTime()}this._backup[++this._backupId]=this.getFormData();return this._backupId};dhtmlXForm.prototype.restoreBackup=function(a){if(this._backup!=null&amp;&amp;this._backup[a]!=null){this.setFormData(this._backup[a])}};dhtmlXForm.prototype.clearBackup=function(a){if(this._backup!=null&amp;&amp;this._backup[a]!=null){this._backup[a]=null;delete this._backup[a]}};dhtmlXForm.prototype.items.combo={ht:function(c,g){c.wT=&quot;combo&quot;;c._enabled=true;c._value=null;c._newValue=null;this.doAddLabel(c,g);this.doAddInput(c,g,&quot;SELECT&quot;,null,true,true,&quot;dhxform_select&quot;);this.doAttachEvents(c);this.doLoadOpts(c,g);c.onselectstart=function(h){return true};c.childNodes[c._ll?1:0].childNodes[0].setAttribute(&quot;mode&quot;,g.comboType||&quot;&quot;);if(g.comboImagePath){c.childNodes[c._ll?1:0].childNodes[0].setAttribute(&quot;imagePath&quot;,g.comboImagePath)}if(g.comboDefaultImage){c.childNodes[c._ll?1:0].childNodes[0].setAttribute(&quot;defaultImage&quot;,g.comboDefaultImage)}if(g.comboDefaultImageDis){c.childNodes[c._ll?1:0].childNodes[0].setAttribute(&quot;defaultImageDis&quot;,g.comboDefaultImageDis)}c._combo=new dhtmlXComboFromSelect(c.childNodes[c._ll?1:0].childNodes[0]);c._combo.setSkin(c.getForm().skin);c._combo._currentComboValue=c._combo.vL();c._combo.getInput().id=g.uid;var a=this;c._combo.attachEvent(&quot;onChange&quot;,function(){a.doOnChange(this)});if(g.connector){this.doLoadOptsConnector(c,g.connector)}if(g.filtering){c._combo.fF(true)}else{if(g.serverFiltering){c._combo.fF(true,g.serverFiltering,g.filterCache,g.filterSubLoad)}}if(g.readonly==true){this.setReadonly(c,true)}if(g.style){c._combo.fK.style.cssText+=g.style}c._combo.attachEvent(&quot;onFocus&quot;,function(){var h=this.vI.parentNode.parentNode;var l=h.getForm();if(l.skin==&quot;dhx_terrace&quot;&amp;&amp;this.vI.className.search(/combo_in_focus/)&lt;0){this.vI.className+=&quot; combo_in_focus&quot;}l.callEvent(&quot;onFocus&quot;,[h._idd]);l=h=null});c._combo.attachEvent(&quot;onBlur&quot;,function(){var h=this.vI.parentNode.parentNode;var l=h.getForm();if(l.skin==&quot;dhx_terrace&quot;&amp;&amp;this.vI.className.search(/combo_in_focus/)&gt;=0){this.vI.className=this.vI.className.replace(/\s{0,}combo_in_focus/gi,&quot;&quot;)}l.callEvent(&quot;onBlur&quot;,[h._idd]);l=h=null});return this},destruct:function(a){a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a._combo._currentComboValue=null;a._combo.unload();a._combo=null;a._apiChange=null;this.arG(a);a=null},doAttachEvents:function(c){var a=this;c.childNodes[c._ll?1:0].childNodes[0].onchange=function(){a.doOnChange(this);a.doValidate(this.zZ.parentNode.parentNode)}},doValidate:function(a){if(a.getForm().hot_validate){this._validate(a)}},doOnChange:function(c){var a=c.base.parentNode.parentNode.parentNode;if(a._apiChange){return}c._newComboValue=c.vL();if(c._newComboValue!=c._currentComboValue){if(a.mR(&quot;onBeforeChange&quot;)){if(a.callEvent(&quot;onBeforeChange&quot;,[a._idd,c._currentComboValue,c._newComboValue])!==true){window.setTimeout(function(){c.Um(c._currentComboValue)},1);return false}}c._currentComboValue=c._newComboValue;a.callEvent(&quot;onChange&quot;,[a._idd,c._currentComboValue])}a._autoCheck(a._enabled)},doLoadOptsConnector:function(h,a){var g=this;var c=h;h._connector_working=true;h._apiChange=true;h._combo.load(a,function(){c.callEvent(&quot;onOptionsLoaded&quot;,[c._idd]);c._connector_working=false;if(c._connector_value!=null){g.setValue(c,c._connector_value);c._connector_value=null}c._apiChange=false;g=c=null})},enable:function(a){if(String(a.className).search(&quot;disabled&quot;)&gt;=0){a.className=String(a.className).replace(/disabled/gi,&quot;&quot;)}a._enabled=true;a._combo.enable()},disable:function(a){if(String(a.className).search(&quot;disabled&quot;)&lt;0){a.className+=&quot; disabled&quot;}a._enabled=false;a._combo.disable()},cf:function(a){return a._combo},setValue:function(a,c){if(a._connector_working){a._connector_value=c;return}a._apiChange=true;a._combo.Um(c);a._combo._currentComboValue=a._combo.FV();a._apiChange=false},getValue:function(a){return a._combo.FV()},setWidth:function(c,a){c.childNodes[c._ll?1:0].childNodes[0].style.width=a+&quot;px&quot;},setReadonly:function(a,c){if(!a._combo){return}a._combo_ro=c;a._combo.readonly(a._combo_ro)},isReadonly:function(a,c){return a._combo_ro||false},setFocus:function(a){if(a._enabled){a._combo.setFocus()}},_setCss:function(a,g,c){a._combo.setFontSize(c,c)}};(function(){for(var c in{doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1}){dhtmlXForm.prototype.items.combo[c]=dhtmlXForm.prototype.items.select[c]}})();dhtmlXForm.prototype.items.combo.arG=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.cf=function(a){return this.doWithItem(a,&quot;cf&quot;)};dhtmlXForm.prototype.items.calendar={ht:function(g,l){var c=this;g.wT=&quot;calendar&quot;;g._enabled=true;var m=navigator.userAgent;var a=(m.indexOf(&quot;MSIE 6.0&quot;)&gt;=0||m.indexOf(&quot;MSIE 7.0&quot;)&gt;=0||m.indexOf(&quot;MSIE 8.0&quot;)&gt;=0);this.doAddLabel(g,l);this.doAddInput(g,l,&quot;INPUT&quot;,&quot;TEXT&quot;,true,true,&quot;dhxform_textarea calendar&quot;);this.doAttachChangeLS(g);if(a){g.childNodes[g._ll?1:0].childNodes[0].onfocus2=g.childNodes[g._ll?1:0].childNodes[0].onfocus;g.childNodes[g._ll?1:0].childNodes[0].onfocus=function(){if(this._skipOnFocus==true){this._skipOnFocus=false;return}this.onfocus2.apply(this,arguments)}}g.childNodes[g._ll?1:0].childNodes[0]._idd=g._idd;g.childNodes[g._ll?1:0].childNodes[0].onblur=function(){var n=this.parentNode.parentNode;if(n.asz.base._formMouseDown){n.asz.base._formMouseDown=false;this._skipOnFocus=true;this.focus();this.value=this.value;n=null;return true}n.getForm()._ccDeactivate(n._idd);c.checkEnteredValue(this.parentNode.parentNode);n.getForm().callEvent(&quot;onBlur&quot;,[n._idd]);n=null};g._f=(l.dateFormat||null);g._f0=(l.serverDateFormat||g._f);var h=g.getForm();g.asz=new dhtmlXCalendarObject(g.childNodes[g._ll?1:0].childNodes[0],l.skin||h.skin||&quot;dhx_skyblue&quot;);g.asz._nullInInput=true;g.asz.enableListener(g.childNodes[g._ll?1:0].childNodes[0]);if(g._f!=null){g.asz.setDateFormat(g._f)}if(!window.dhx4.s2b(l.enableTime)){g.asz.hideTime()}if(window.dhx4.s2b(l.showWeekNumbers)){g.asz.showWeekNumbers()}if(!isNaN(l.weekStart)){g.asz.setWeekStartDay(l.weekStart)}if(typeof(l.calendarPosition)!=&quot;undefined&quot;){g.asz.Yy(l.calendarPosition)}if(l.minutesInterval!=null){g.asz.setMinutesInterval(l.minutesInterval)}g.asz._itemIdd=g._idd;g.asz.attachEvent(&quot;onBeforeChange&quot;,function(n){if(g._value!=n){if(g.mR(&quot;onBeforeChange&quot;)){if(g.callEvent(&quot;onBeforeChange&quot;,[g._idd,g._value,n])!==true){return false}}g._value=n;c.setValue(g,n,false);g.callEvent(&quot;onChange&quot;,[this._itemIdd,g._value])}return true});if(a){g.asz.base.onmousedown=function(){this._formMouseDown=true;return false}}this.setValue(g,l.value);h=null;return this},getCalendar:function(a){return a.asz},setSkin:function(a,c){a.asz.setSkin(c)},setValue:function(c,g,a){if(!g||g==null||typeof(g)==&quot;undefined&quot;||g==&quot;&quot;){c._value=null;c.childNodes[c._ll?1:0].childNodes[0].value=&quot;&quot;}else{c._value=(g instanceof Date?g:c.asz._strToDate(g,c._f0||c.asz._dateFormat));c.childNodes[c._ll?1:0].childNodes[0].value=c.asz._dateToStr(c._value,c._f||c.asz._dateFormat)}if(a!==false){c.asz.setDate(c._value)}},getValue:function(c,a){var g=c.asz.getDate();if(a===true&amp;&amp;g==null){return &quot;&quot;}return(a===true?c.asz._dateToStr(g,c._f0||c.asz._dateFormat):g)},setDateFormat:function(c,a,g){c._f=a;c._f0=(g||c._f);c.asz.setDateFormat(c._f);this.setValue(c,this.getValue(c))},destruct:function(a){a.asz.disableListener(a.childNodes[a._ll?1:0].childNodes[0]);a.asz.unload();a.asz=null;try{delete a.asz}catch(c){}a._f=null;try{delete a._f}catch(c){}a._f0=null;try{delete a._f0}catch(c){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;this.arG(a);a=null},checkEnteredValue:function(a){this.setValue(a,a.asz.getDate())}};(function(){for(var c in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.calendar[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.calendar.arG=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getCalendar=function(a){return this.doWithItem(a,&quot;getCalendar&quot;)};dhtmlXForm.prototype.setCalendarDateFormat=function(c,a,g){this.doWithItem(c,&quot;setDateFormat&quot;,a,g)};dhtmlXForm.prototype.items.btn2state={Ou:function(a,c){a._checked=(c===true?true:false);a.childNodes[a._ll?1:0].lastChild.className=&quot;dhxform_img &quot;+a._cssName+&quot;_&quot;+(a._checked?&quot;1&quot;:&quot;0&quot;);this.doCheckValue(a)}};(function(){for(var c in dhtmlXForm.prototype.items.checkbox){if(!dhtmlXForm.prototype.items.btn2state[c]){dhtmlXForm.prototype.items.btn2state[c]=dhtmlXForm.prototype.items.checkbox[c]}}})();dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.ht;dhtmlXForm.prototype.items.btn2state.ht=function(a,c){c._autoInputWidth=false;this.render2(a,c);a.wT=&quot;btn2state&quot;;a._cssName=(typeof(c.cssName)==&quot;undefined&quot;?&quot;btn2state&quot;:c.cssName);a._updateImgNode=function(){};a._doOnFocus=function(){a.getForm().callEvent(&quot;onFocus&quot;,[a._idd])};a._doOnBlur=function(){a.getForm().callEvent(&quot;onBlur&quot;,[a._idd])};a._doOnKeyUpDown=function(h,g,l){this.callEvent(h,[this.childNodes[this._ll?0:1].childNodes[0],g,this._idd])};this.Ou(a,a._checked);return this};dhtmlXForm.prototype.setFormData_btn2state=function(a,c){this[c==true||parseInt(c)==1||c==&quot;true&quot;||c==this.getItemValue(a)?&quot;checkItem&quot;:&quot;uncheckItem&quot;](a)};dhtmlXForm.prototype.getFormData_btn2state=function(a){return(this.ajT(a)?this.getItemValue(a):0)};dhtmlXForm.prototype.items.colorpicker={colorpicker:{},ht:function(g,h){var c=this;g.wT=&quot;colorpicker&quot;;g._enabled=true;this.doAddLabel(g,h);this.doAddInput(g,h,&quot;INPUT&quot;,&quot;TEXT&quot;,true,true,&quot;dhxform_textarea&quot;);g._value=(h.value||&quot;&quot;);g.childNodes[g._ll?1:0].childNodes[0].value=g._value;var a={input:g.childNodes[g._ll?1:0].childNodes[0],custom_colors:(window.dhx4.s2b(h.enableCustomColors)==true),skin:g.getForm().skin};this.colorpicker[g._idd]=new dhtmlXColorPicker(a);this.colorpicker[g._idd]._nodes[0].valueColor=null;this.colorpicker[g._idd].base.className+=&quot; dhtmlxcp_in_form&quot;;if(typeof(h.customColors)!=&quot;undefined&quot;){this.colorpicker[g._idd].setCustomColors(h.customColors)}this.colorpicker[g._idd].attachEvent(&quot;onSelect&quot;,function(l){if(g._value!=l){if(g.mR(&quot;onBeforeChange&quot;)){if(g.callEvent(&quot;onBeforeChange&quot;,[g._idd,g._value,l])!==true){g.childNodes[g._ll?1:0].childNodes[0].value=g._value;return}}g._value=l;c.setValue(g,l);g.callEvent(&quot;onChange&quot;,[g._idd,g._value])}});this.colorpicker[g._idd].attachEvent(&quot;onHide&quot;,function(l){var m=g.childNodes[g._ll?1:0].childNodes[0];if(m.value!=g._value){m.value=g._value}m=null});g.childNodes[g._ll?1:0].childNodes[0]._idd=g._idd;return this},getColorPicker:function(a){return this.colorpicker[a._idd]},destruct:function(a){if(this.colorpicker[a._idd].unload){this.colorpicker[a._idd].unload()}this.colorpicker[a._idd]=null;try{delete this.colorpicker[a._idd]}catch(c){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;this.arG(a);a=null},setSkin:function(a,c){this.colorpicker[a._idd].setSkin(c)}};(function(){for(var c in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.colorpicker[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.colorpicker.arG=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(a){return this.doWithItem(a,&quot;getColorPicker&quot;)};dhtmlXForm.prototype.items.container={ht:function(a,c){a.wT=&quot;container&quot;;a._enabled=true;this.doAddLabel(a,c);this.doAddInput(a,c,&quot;DIV&quot;,null,true,true,&quot;dhxform_container&quot;);return this},getContainer:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},enable:function(a){a._enabled=true;if(String(a.className).search(&quot;disabled&quot;)&gt;=0){a.className=String(a.className).replace(/disabled/gi,&quot;&quot;)}a.callEvent(&quot;onEnable&quot;,[a._idd])},disable:function(a){a._enabled=false;if(String(a.className).search(&quot;disabled&quot;)&lt;0){a.className+=&quot; disabled&quot;}a.callEvent(&quot;onDisable&quot;,[a._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(a){return this.doWithItem(a,&quot;getContainer&quot;)};(function(){for(var c in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.container[c]){dhtmlXForm.prototype.items.container[c]=dhtmlXForm.prototype.items.input[c]}}})();dhtmlXForm.prototype.items.editor={editor:{},ht:function(g,h){var a=(!isNaN(h.rows));g.wT=&quot;editor&quot;;g._enabled=true;this.doAddLabel(g,h);this.doAddInput(g,h,&quot;DIV&quot;,null,true,true,&quot;dhxform_item_template&quot;);g._value=(h.value||&quot;&quot;);var c=this;this.editor[g._idd]=new dhtmlXEditor({parent:g.childNodes[g._ll?1:0].childNodes[0],content:g._value});this.editor[g._idd].attachEvent(&quot;onAccess&quot;,function(m,n){g.callEvent(&quot;_onBeforeEditorAccess&quot;,[]);_dhxForm_doClick(document.body,&quot;click&quot;);if(m==&quot;blur&quot;){c.doOnBlur(g,this);g.callEvent(&quot;onBlur&quot;,[g._idd]);if(g.getForm().skin==&quot;dhx_terrace&quot;){var l=g.childNodes[g._ll?1:0].className;if(l.indexOf(&quot;dhxeditor_focus&quot;)&gt;=0){g.childNodes[g._ll?1:0].className=(l).replace(/\s{0,}dhxeditor_focus/gi,&quot;&quot;)}}}else{g.callEvent(&quot;onEditorAccess&quot;,[g._idd,m,n,this,g.getForm()]);g.callEvent(&quot;onFocus&quot;,[g._idd]);if(g.getForm().skin==&quot;dhx_terrace&quot;){var l=g.childNodes[g._ll?1:0].className;if(l.indexOf(&quot;dhxeditor_focus&quot;)== -1){g.childNodes[g._ll?1:0].className+=&quot; dhxeditor_focus&quot;}}}});this.editor[g._idd].attachEvent(&quot;onToolbarClick&quot;,function(l){g.callEvent(&quot;onEditorToolbarClick&quot;,[g._idd,l,this,g.getForm()])});if(h.readonly){this.setReadonly(g,true)}g.childNodes[g._ll?0:1].childNodes[0].removeAttribute(&quot;for&quot;);g.childNodes[g._ll?0:1].childNodes[0].onclick=function(){c.editor[g._idd]._focus()};return this},doOnBlur:function(g,c){var a=c.getContent();if(g._value!=a){if(g.mR(&quot;onBeforeChange&quot;)){if(g.callEvent(&quot;onBeforeChange&quot;,[g._idd,g._value,a])!==true){c.setContent(g._value);return}}g._value=a;g.callEvent(&quot;onChange&quot;,[g._idd,a])}},setValue:function(a,c){if(a._value==c){return}a._value=c;this.editor[a._idd].setContent(a._value)},getValue:function(a){a._value=this.editor[a._idd].getContent();return a._value},enable:function(a){this.editor[a._idd].setReadonly(false);this.doEn(a)},disable:function(a){this.editor[a._idd].setReadonly(true);this.doDis(a)},setReadonly:function(a,c){this.editor[a._idd].setReadonly(c)},getEditor:function(a){return(this.editor[a._idd]||null)},destruct:function(a){a.childNodes[a._ll?0:1].childNodes[0].onclick=null;this.editor[a._idd].unload();this.editor[a._idd]=null;this.arG(a);a=null},setFocus:function(a){this.editor[a._idd]._focus()}};(function(){for(var c in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1}){dhtmlXForm.prototype.items.editor[c]=dhtmlXForm.prototype.items.template[c]}})();dhtmlXForm.prototype.items.editor.arG=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(a){return this.doWithItem(a,&quot;getEditor&quot;)};dhtmlXForm.prototype.items.upload={ht:function(c,g){c.wT=&quot;up&quot;;c._enabled=true;c._checked=true;c.className=g.position+(typeof(g.className)==&quot;string&quot;?&quot; &quot;+g.className:&quot;&quot;);var a=document.createElement(&quot;DIV&quot;);c.appendChild(a);if(!isNaN(g.inputLeft)){c.style.left=parseInt(g.inputLeft)+&quot;px&quot;}if(!isNaN(g.inputTop)){c.style.top=parseInt(g.inputTop)+&quot;px&quot;}if(g.inputWidth!=&quot;auto&quot;){if(!isNaN(g.inputWidth)){a.style.width=parseInt(g.inputWidth)+&quot;px&quot;}}c._uploader=new dhtmlXFileUploader(a,g.swfPath||&quot;&quot;,g.swfUrl||&quot;&quot;,g.mode||null,g.swfLogs,g.slXap||&quot;&quot;,g.slUrl||&quot;&quot;,g.slLogs||&quot;&quot;,g.multiple);c._uploader.setURL(g.url||&quot;&quot;);c._uploader.callEvent=c.callEvent;if(typeof(g.autoStart)!=&quot;undefined&quot;){c._uploader.setAutoStart(g.autoStart)}if(typeof(g.autoRemove)!=&quot;undefined&quot;){c._uploader.setAutoRemove(g.autoRemove)}if(typeof(g.titleScreen)!=&quot;undefined&quot;){c._uploader.enableTitleScreen(g.titleScreen)}if(typeof(g.titleText)!=&quot;undefined&quot;){c._uploader.setTitleText(g.titleText)}if(g.hidden==true){this.hide(c)}if(g.disabled==true){this.userDisable(c)}if(!(g.inputHeight==&quot;auto&quot;||parseInt(g.inputHeight)==NaN)){c._uploader.p_files.style.height=parseInt(g.inputHeight)+&quot;px&quot;}return this},destruct:function(a){this.doUnloadNestedLists(a);a._uploader.callEvent=null;a._uploader.unload();a._uploader=null;a._checked=null;a._enabled=null;a._idd=null;a.wT=null;a.onselectstart=null;a._autoCheck=null;a.callEvent=null;a.mR=null;a.getForm=null;while(a.childNodes.length&gt;0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,c){},getText:function(a){},enable:function(a){a._enabled=true;if(String(a.className).search(&quot;disabled&quot;)&gt;=0){a.className=String(a.className).replace(/disabled/gi,&quot;&quot;)}a._uploader.enable()},disable:function(a){a._enabled=false;if(String(a.className).search(&quot;disabled&quot;)&lt;0){a.className+=&quot; disabled&quot;}a._uploader.disable()},setWidth:function(c,a){c.childNodes[0].style.width=a+&quot;px&quot;;c._width=a},getWidth:function(a){return a._width||parseInt(a.childNodes[0].style.width)},setValue:function(a){a._uploader.clear()},getValue:function(m){var h=m._uploader.getData();var l={};var g=0;for(var c in h){l[m._idd+&quot;_r_&quot;+g]=h[c].realName;l[m._idd+&quot;_s_&quot;+g]=h[c].serverName;g++}l[m._idd+&quot;_count&quot;]=g;return l},getUploader:function(a){return a._uploader},getStatus:function(a){return a._uploader.getStatus()}};(function(){for(var c in{doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.upload[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.setFormData_upload=function(a){this.doWithItem(a,&quot;setValue&quot;)};dhtmlXForm.prototype.getUploader=function(a){return this.doWithItem(a,&quot;getUploader&quot;)};dhtmlXForm.prototype.getUploaderStatus=function(a){return this.doWithItem(a,&quot;getStatus&quot;)};function dhtmlXFileUploader(p,swfPath,swfUrl,mode,swfLogs,slXap,slUrl,slLogs,multiple){var that=this;if(typeof(mode)==&quot;string&quot;&amp;&amp;typeof(this[mode])==&quot;function&quot;){this.engine=mode}else{this.engine=&quot;html4&quot;;var k=null;if(typeof(window.FormData)!=&quot;undefined&quot;&amp;&amp;typeof(window.XMLHttpRequest)!=&quot;undefined&quot;){k=new XMLHttpRequest();if(typeof(k.upload)==&quot;undefined&quot;){k=null}}if(k!=null){this.engine=&quot;html5&quot;}else{if(typeof(window.swfobject)!=&quot;undefined&quot;||k===false){var k=swfobject.getFlashPlayerVersion();if(k.major&gt;=10){this.engine=&quot;flash&quot;}}else{this._sl_v=this.getSLVersion();if(this._sl_v){this.engine=&quot;sl&quot;}}}k=null}if(typeof(p)==&quot;string&quot;){p=document.getElementById(p)}this._upload_mp=(typeof(multiple)!=&quot;undefined&quot;?multiple==true:true);this._upload_dnd=true;this._swf_file_url=swfPath||&quot;&quot;;this._swf_upolad_url=swfUrl||&quot;&quot;;this._swf_logs=swfLogs;this._sl_xap=slXap;this._sl_upload_url=slUrl;this._sl_logs=slLogs;this.p=document.createElement(&quot;DIV&quot;);this.p.className+=&quot; dhx_file_uploader&quot;;p.appendChild(this.p);this.p_files=document.createElement(&quot;DIV&quot;);this.p_files.className=&quot;dhx_upload_files&quot;;this.p.appendChild(this.p_files);this.p_controls=document.createElement(&quot;DIV&quot;);this.p_controls.className=&quot;dhx_upload_controls&quot;;this.p.appendChild(this.p_controls);this._files={};this._items={};this._data={};this._autoStart=false;this._autoRemove=false;this._titleScreen=true;this._enabled=true;this._uploaded_count=0;this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:&quot;Browse&quot;},upload:{onclick:function(){if(!that._enabled){return}if(!that._uploading){that._uploadStart()}},tooltip:&quot;Upload&quot;},cancel:{onclick:function(){if(!that._enabled){return}that._uploadStop();that._switchButton(false)},tooltip:&quot;Stop&quot;},clear:{onclick:function(){if(!that._enabled){return}that.clear()},tooltip:&quot;Clear list&quot;}};this.buttons={};for(var a in this.b_opts){var k=document.createElement(&quot;DIV&quot;);k.innerHTML=&quot; &quot;;k.className=&quot;dhx_file_uploader_button button_&quot;+a;k.onclick=this.b_opts[a].onclick;if(this.b_opts[a].tooltip){k.title=this.b_opts[a].tooltip}this.p_controls.appendChild(k);this.buttons[a]=k;k=null}this.buttons.cancel.style.display=&quot;none&quot;};this._readableSize=function(t){var i=false;var b=[&quot;b&quot;,&quot;Kb&quot;,&quot;Mb&quot;,&quot;Gb&quot;,&quot;Tb&quot;,&quot;Pb&quot;,&quot;Eb&quot;];for(var q=0;q<B>1024){t=t/1024}else{if(i===false){i=q}}}if(i===false){i=b.length-1}return Math.round(t*100)/100+&quot; &quot;+b[i]};this._beforeAddFileToList=function(name,size){return(this.callEvent(&quot;onBeforeFileAdd&quot;,[name,size])===true)};this._addFileToList=function(id,name,size,state,progress){this._checkTitleScreen();var t=document.createElement(&quot;DIV&quot;);t._idd=id;t.className=&quot;dhx_file dhx_file_&quot;+state;t.innerHTML=&quot;<DIV class="dhx_file_param dhx_file_name"> </DIV><DIV class="dhx_file_param dhx_file_progress">&quot;+progress+&quot;%</DIV><DIV class="dhx_file_param dhx_file_delete" title="Remove from list"> </DIV>&quot;;this.p_files.appendChild(t);t.childNodes[0].style.width=t.offsetWidth-127+&quot;px&quot;;this._items[id]=t;this._updateFileNameSize(id);t.childNodes[2].onclick=function(){if(!that._enabled){return}var id=this.parentNode._idd;that._removeFileFromQueue(id)};this.callEvent(&quot;onFileAdd&quot;,[name])};this._removeFileFromList=function(id){if(!this._items[id]){return}this._items[id].childNodes[2].onclick=null;this._items[id].parentNode.removeChild(this._items[id]);this._items[id]=null;delete this._items[id];if(this._data[id]){this._data[id]=null;delete this._data[id]}this._checkTitleScreen()};this._updateFileNameSize=function(id){this._items[id].childNodes[0].innerHTML=this._files[id].name+(!isNaN(this._files[id].size)?&quot; (&quot;+this._readableSize(this._files[id].size)+&quot;)&quot;:&quot; &quot;);this._items[id].childNodes[0].title=this._files[id].name+(!isNaN(this._files[id].size)?&quot; (&quot;+this._readableSize(this._files[id].size)+&quot;)&quot;:&quot;&quot;)};this._updateFileInList=function(id,state,progress){if(!this._items[id]){return}this._items[id].className=&quot;dhx_file dhx_file_&quot;+state;this._updateProgress(id,state,progress);this._updateFileNameSize(id)};this._updateProgress=function(id,state,progress){if(state==&quot;uploading&quot;&amp;&amp;progress&lt;100&amp;&amp;this._progress_type==&quot;loader&quot;){this._items[id].childNodes[1].className=&quot;dhx_file_param dhx_file_uploading&quot;;this._items[id].childNodes[1].innerHTML=&quot; &quot;}else{this._items[id].childNodes[1].className=&quot;dhx_file_param dhx_file_progress&quot;;this._items[id].childNodes[1].innerHTML=progress+&quot;%&quot;}this._updateFileNameSize(id)};this._removeFilesByState=function(state){for(var a in this._files){if(state===true||this._files[a].state==state){this._removeFileFromQueue(a)}}};this._switchButton=function(state){if(state==true){this.buttons.upload.style.display=&quot;none&quot;;this.buttons.cancel.style.display=&quot;&quot;}else{var t=this._uploaded_count;this.buttons.upload.style.display=&quot;&quot;;this.buttons.cancel.style.display=&quot;none&quot;;this._uploaded_count=0;if(t&gt;0){this.callEvent(&quot;onUploadComplete&quot;,[t])}}};this._uploadStart=function(){this._switchButton(true);if(!this._uploading){for(var a in this._files){if(this._files[a].state==&quot;fail&quot;){this._files[a].state=&quot;added&quot;;this._updateFileInList(a,&quot;added&quot;,0)}}}this._uploading=true;var t=false;for(var a in this._files){if(!t&amp;&amp;[this._files[a].state]==&quot;added&quot;){t=true;this._files[a].state=&quot;uploading&quot;;this._updateFileInList(a,&quot;uploading&quot;,0);this._doUploadFile(a)}}if(!t){this._uploading=false;this._switchButton(false)}};this._onUploadSuccess=function(id,serverName,r,extra){if(typeof(r)!=&quot;undefined&quot;&amp;&amp;this.engine==&quot;flash&quot;){dhx4.temp=null;try{eval(&quot;dhx4.temp=&quot;+r.data)}catch(e){dhx4.temp=null}var t=dhx4.temp;dhx4.temp=null;if(t!=null&amp;&amp;t.state==true&amp;&amp;t.name!=null){serverName=t.name;if(t.extra!=null){extra=t.extra}}else{this._onUploadFail(id,(t!=null&amp;&amp;t.extra!=null?t.extra:null));return}}this._uploaded_count++;this._data[id]={realName:this._files[id].name,serverName:serverName};this._files[id].state=&quot;uploaded&quot;;this._updateFileInList(id,&quot;uploaded&quot;,100);this.callEvent(&quot;onUploadFile&quot;,[this._files[id].name,serverName,extra]);if(this._autoRemove){this._removeFileFromQueue(id)}if(this._uploading){this._uploadStart()}};this._onUploadFail=function(id,extra){this._files[id].state=&quot;fail&quot;;this._updateFileInList(id,&quot;fail&quot;,0);this.callEvent(&quot;onUploadFail&quot;,[this._files[id].name,extra]);if(this._uploading){this._uploadStart()}};this._onUploadAbort=function(id){this._uploading=false;this._files[id].state=&quot;added&quot;;this._updateFileInList(id,&quot;added&quot;,0);this.callEvent(&quot;onUploadCancel&quot;,[this._files[id].name])};this._checkTitleScreen=function(){var k=0;for(var a in this._files){k++}if(k==0&amp;&amp;this.p.className.search(&quot;dhx_file_uploader_title&quot;)&lt;0&amp;&amp;this._titleScreen){this.p.className+=&quot; dhx_file_uploader_title&quot;;this.buttons.info.innerHTML=this._titleText;this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+&quot;px&quot;}if((k&gt;0|| !this._titleScreen)&amp;&amp;this.p.className.search(&quot;dhx_file_uploader_title&quot;)&gt;=0){this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,&quot;&quot;);this.buttons.info.innerHTML=&quot;&quot;}};this.callEvent=function(){};this.upload=function(){if(!this._uploading){this._uploadStart()}};this.setAutoStart=function(state){this._autoStart=(state==true)};this.setAutoRemove=function(state){this._autoRemove=(state==true)};this.enableTitleScreen=function(state){this._titleScreen=(state==true);this._checkTitleScreen()};this.setTitleText=function(text){this._titleText=text;if(this.p.className.search(&quot;dhx_file_uploader_title&quot;)&gt;=0){this.buttons.info.innerHTML=this._titleText}};this.setURL=function(url){this._url=url};this.setSWFURL=function(url){this._swf_upolad_url=url};this.enable=function(){this._enabled=true;this.p_files.className=&quot;dhx_upload_files&quot;;this.p_controls.className=&quot;dhx_upload_controls&quot;};this.disable=function(){this._enabled=false;this.p_files.className=&quot;dhx_upload_files dhx_uploader_dis&quot;;this.p_controls.className=&quot;dhx_upload_controls dhx_uploader_dis&quot;};this.getStatus=function(){var t=0;for(var a in this._files){if(this._files[a].state!=&quot;uploaded&quot;){return-1}t=1}return t};this.getData=function(){return this._data};this.clear=function(){if(this.callEvent(&quot;onBeforeClear&quot;,[])!==true){return}if(this._uploading){that._uploadStop()}that._switchButton(false);that._removeFilesByState(true);this.callEvent(&quot;onClear&quot;,[])};this.unload=function(){this._removeFilesByState(true);this._data=null;this._files=null;this._items=null;this._unloadEngine();for(var a in this.buttons){this.buttons[a].onclick=null;this.buttons[a].parentNode.removeChild(this.buttons[a]);this.buttons[a]=null;delete this.buttons[a]}this.buttons=null;for(var a in this.b_opts){this.b_opts[a].onclick=null;this.b_opts[a]=null;delete this.b_opts[a]}this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_files.parentNode.removeChild(this.p_files);this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,&quot;&quot;).replace(/dhx_file_uploader/gi,&quot;&quot;);for(var a in this){this[a]=null}that=a=null};var e=new this[this.engine]();for(var a in e){this[a]=e[a];e[a]=null}a=e=p=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUploader.prototype.html5=function(){};dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var c=this;this.buttons.browse.onclick=function(){if(c._enabled){c.f.click()}};this._progress_type=&quot;percentage&quot;;var a=window.navigator.userAgent;if(a.match(/Windows/gi)!=null&amp;&amp;a.match(/AppleWebKit/gi)!=null&amp;&amp;a.match(/Safari/gi)!=null){if(a.match(/Version\/5\.1\.5/gi)){this._upload_mp=false}if(a.match(/Version\/5\.1[^\.\d{1,}]/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.1/gi)){this._upload_mp=false;this._upload_dnd=false}if(a.match(/Version\/5\.1\.2/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.7/gi)){this._upload_mp=false}}this._addFileInput();if(this._upload_dnd){this.p.ondragenter=function(g){if(!g.dataTransfer){return}g.stopPropagation();g.preventDefault()};this.p.ondragover=function(g){if(!g.dataTransfer){return}g.stopPropagation();g.preventDefault()};this.p.ondrop=function(g){if(!g.dataTransfer){return}g.stopPropagation();g.preventDefault();if(c._enabled){c._parseFilesInInput(g.dataTransfer.files)}};this._titleText=&quot;Drag-n-Drop files here orclick to select files for upload.&quot;}else{this._titleText=&quot;Click to select files for upload.&quot;}},_addFileInput:function(){if(this.f!=null){this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null}var a=this;this.f=document.createElement(&quot;INPUT&quot;);this.f.type=&quot;file&quot;;if(this._upload_mp){this.f.multiple=&quot;1&quot;}this.f.className=&quot;dhx_uploader_input&quot;;this.p_controls.appendChild(this.f);this.f.onchange=function(){a._parseFilesInInput(this.files);if(window.dhx4.isOpera){a._addFileInput()}else{this.value=&quot;&quot;}}},_doUploadFile:function(id){var that=this;if(!this._loader){this._loader=new XMLHttpRequest();this._loader.upload.onprogress=function(e){if(that._files[this._idd].state==&quot;uploading&quot;){that._updateFileInList(this._idd,&quot;uploading&quot;,Math.round(e.loaded*100/e.total))}};this._loader.onload=function(e){dhx4.temp=null;try{eval(&quot;dhx4.temp=&quot;+this.responseText)}catch(e){}var r=dhx4.temp;dhx4.temp=null;if(typeof(r)==&quot;object&quot;&amp;&amp;r!=null&amp;&amp;typeof(r.state)!=&quot;undefined&quot;&amp;&amp;r.state==true){that._onUploadSuccess(this.upload._idd,r.name,null,r.extra);r=null}else{that._onUploadFail(this.upload._idd,(r!=null&amp;&amp;r.extra!=null?r.extra:null))}};this._loader.onerror=function(e){that._onUploadFail(this.upload._idd)};this._loader.onabort=function(e){that._onUploadAbort(this.upload._idd)}}this._loader.upload._idd=id;var form=new FormData();form.append(&quot;file&quot;,this._files[id].file);this._loader.open(&quot;POST&quot;,this._url+(String(this._url).indexOf(&quot;?&quot;)&lt;0?&quot;?&quot;:&quot;&amp;&quot;)+&quot;mode=html5&amp;dhxr&quot;+new Date().getTime(),true);this._loader.setRequestHeader(&quot;X-Requested-With&quot;,&quot;XMLHttpRequest&quot;);this._loader.send(form)},_uploadStop:function(){if(!this._uploading|| !this._loader){return}this._loader.abort()},_parseFilesInInput:function(c){for(var a=0;a&lt;c.length;a++){this._addFileToQueue(c[a])}},_addFileToQueue:function(a){if(!this._beforeAddFileToList(a.name,a.size)){return}var c=(a._idd||window.dhx4.newId());this._files[c]={file:a,name:a.name,size:a.size,state:&quot;added&quot;};this._addFileToList(c,a.name,a.size,&quot;added&quot;,0);if(this._autoStart&amp;&amp; !this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(h){if(!this._files[h]){return}var c=this._files[h].name;var g=(this._data!=null&amp;&amp;this._data[h]!=null?this._data[h].serverName:null);if(this.callEvent(&quot;onBeforeFileRemove&quot;,[c,g])!==true){return}var a=false;if(this._uploading&amp;&amp;h==this._loader.upload._idd&amp;&amp;this._files[h].state==&quot;uploading&quot;){this._uploadStop();a=true}this._files[h].file=null;this._files[h].name=null;this._files[h].size=null;this._files[h].state=null;this._files[h]=null;delete this._files[h];this._removeFileFromList(h);this.callEvent(&quot;onFileRemove&quot;,[c,g]);if(a){this._uploadStart()}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;if(this._loader){this._loader.upload.onprogress=null;this._loader.onload=null;this._loader.onerror=null;this._loader.onabort=null;this._loader.upload._idd=null;this._loader=null}this._initEngine=null;this._doUploadFile=null;this._uploadStop=null;this._parseFilesInInput=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type=&quot;loader&quot;;this._titleText=&quot;Click buttonto select files for upload.&quot;},_addForm:function(){var a=this;var g=window.dhx4.newId();if(!this.k){this.k=document.createElement(&quot;DIV&quot;);this.k.className=&quot;dhx_file_form_cont&quot;;this.buttons.browse.appendChild(this.k);this.fr_name=&quot;dhx_file_&quot;+window.dhx4.newId();this.k.innerHTML='&lt;iframe name=&quot;'+this.fr_name+'&quot; style=&quot;height:0px;width:0px;&quot; frameBorder=&quot;0&quot;&gt;&lt;/iframe&gt;';this.fr=this.k.firstChild;if(window.navigator.userAgent.indexOf(&quot;MSIE&quot;)&gt;=0){this.fr.onreadystatechange=function(){if(this.readyState==&quot;complete&quot;){a._onLoad()}}}else{this.fr.onload=function(){a._onLoad()}}}var c=document.createElement(&quot;DIV&quot;);c.innerHTML=&quot;&lt;form method='POST' enctype='multipart/form-data' target='&quot;+this.fr_name+&quot;' class='dhx_file_form' name='dhx_file_form_&quot;+window.dhx4.newId()+&quot;'&gt;&lt;input type='hidden' name='mode' value='html4'&gt;&lt;input type='hidden' name='uid' value='&quot;+g+&quot;'&gt;&lt;input type='file' name='file' class='dhx_file_input'&gt;&lt;/form&gt;&quot;;this.k.appendChild(c);c.firstChild.lastChild._idd=g;c.firstChild.lastChild.onchange=function(){if(!a._beforeAddFileToList(this.value,null)){return}a._addFileToQueue(this);this.onchange=null;this.parentNode.parentNode.style.display=&quot;none&quot;;a._addForm()};c=null},_onLoad:function(){if(this._uploading){dhx4.temp=null;try{eval(&quot;dhx4.temp=&quot;+this.fr.contentWindow.document.body.innerHTML)}catch(e){}var r=dhx4.temp;dhx4.temp=null;if(typeof(r)==&quot;object&quot;&amp;&amp;r!=null){if(typeof(r.state)!=&quot;undefined&quot;){if(r.state==&quot;cancelled&quot;){this._onUploadAbort(this.fr._idd);r=null;return}else{if(r.state==true){if(typeof(r.size)!=&quot;undefined&quot;&amp;&amp; !isNaN(r.size)){this._files[this.fr._idd].size=r.size}this._onUploadSuccess(this.fr._idd,r.name,null,r.extra);r=null;return}}}}this._onUploadFail(this.fr._idd,(r!=null&amp;&amp;r.extra!=null?r.extra:null))}},_addFileToQueue:function(c){var a=c.value.match(/[^\\\/]*$/g);if(a[0]!=null){a=a[0]}else{a=c.value}this._files[c._idd]={name:a,form:c.parentNode,node:c.parentNode.parentNode,input:c,state:&quot;added&quot;};this._addFileToList(c._idd,c.value,false,&quot;added&quot;,0);if(this._autoStart&amp;&amp; !this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(g){var a=this._files[g].name;var c=(this._data!=null&amp;&amp;this._data[g]!=null?this._data[g].serverName:null);if(this.callEvent(&quot;onBeforeFileRemove&quot;,[a,c])!==true){return}this._files[g].input.onchange=null;this._files[g].form.removeChild(this._files[g].input);this._files[g].node.removeChild(this._files[g].form);this._files[g].node.parentNode.removeChild(this._files[g].node);this._files[g].input=null;this._files[g].name=null;this._files[g].form=null;this._files[g].node=null;this._files[g].size=null;this._files[g].state=null;this._files[g]=null;delete this._files[g];this._removeFileFromList(g);this.callEvent(&quot;onFileRemove&quot;,[a,c])},_doUploadFile:function(a){this.fr._idd=a;this._files[a].form.action=this._url;this._files[a].form.submit()},_uploadStop:function(){if(!this._uploading){return}this.fr.contentWindow.location.href=(this._url)+(this._url.indexOf(&quot;?&quot;)&lt;0?&quot;?&quot;:&quot;&amp;&quot;)+&quot;mode=html4&amp;action=cancel&amp;dhxr&quot;+new Date().getTime()},_unloadEngine:function(){if(this.k){this.fr_name=null;this.fr.onreadystatechange=null;this.fr.onload=null;this.fr.parentNode.removeChild(this.fr);this.fr=null;this.k.firstChild.firstChild.lastChild.onchange=null;this.k.parentNode.removeChild(this.k);this.k=null}this._initEngine=null;this._addForm=null;this._onLoad=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){if(!window.dhtmlXFileUploaderSWFObjects){window.dhtmlXFileUploaderSWFObjects={items:{},callEvent:function(l,g,h){return window.dhtmlXFileUploaderSWFObjects.items[l].uploader[g].apply(window.dhtmlXFileUploaderSWFObjects.items[l].uploader,h)}}}var c=this;this._swf_obj_id=&quot;dhtmlXFileUploaderSWFObject_&quot;+window.dhx4.newId();this._swf_file_url=this._swf_file_url+(this._swf_file_url.indexOf(&quot;?&quot;)&gt;=0?&quot;&amp;&quot;:&quot;?&quot;)+&quot;dhxr&quot;+new Date().getTime();this.buttons.browse.innerHTML=&quot;&quot;;swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,&quot;100%&quot;,&quot;100%&quot;,&quot;9&quot;,null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:&quot;transparent&quot;});var a=swfobject.getFlashPlayerVersion();this._titleText=&quot;Engine successfuly initedFlash Player: &quot;+a.major+&quot;.&quot;+a.minor+&quot;.&quot;+a.release;this._progress_type=&quot;percentage&quot;;window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(a,c){return(this.callEvent(&quot;onBeforeFileAdd&quot;,[a,c])===true)},_addFileToQueue:function(h,c,g){if(window.dhx4.isIE){var a=document.createElement(&quot;INPUT&quot;);a.type=&quot;TEXT&quot;;a.style.position=&quot;absolute&quot;;a.style.left=&quot;0px&quot;;a.style.top=window.dhx4.absTop(this.buttons.browse)+&quot;px&quot;;a.style.width=&quot;10px&quot;;document.body.appendChild(a);a.focus();document.body.removeChild(a);a=null}this._files[h]={name:c,size:g,state:&quot;added&quot;};this._addFileToList(h,c,g,&quot;added&quot;,0);if(this._autoStart&amp;&amp; !this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(h){if(!this._files[h]){return}var c=this._files[h].name;var g=(this._data!=null&amp;&amp;this._data[h]!=null?this._data[h].serverName:null);if(this.callEvent(&quot;onBeforeFileRemove&quot;,[c,g])!==true){return}var a=false;if(this._uploading&amp;&amp;this._files[h].state==&quot;uploading&quot;){this._uploadStop();a=true}swfobject.getObjectById(this._swf_obj_id).removeFileById(h);this._files[h].name=null;this._files[h].size=null;this._files[h].state=null;this._files[h]=null;delete this._files[h];this._removeFileFromList(h);this.callEvent(&quot;onFileRemove&quot;,[c,g]);if(a){this._uploadStart()}},_doUploadFile:function(a){swfobject.getObjectById(this._swf_obj_id).upload(a,this._swf_upolad_url)},_uploadStop:function(g){for(var c in this._files){if(this._files[c].state==&quot;uploading&quot;){swfobject.getObjectById(this._swf_obj_id).uploadStop(c)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]){window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id=null;window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader=null;window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=null;delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]}this._swf_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.sl=function(){};dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){if(typeof(this._sl_v)==&quot;undefined&quot;){this._sl_v=this.getSLVersion()}if(!window.dhtmlXFileUploaderSLObjects){window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(g,a,c){window.dhtmlXFileUploaderSLObjects.items[g].uploader[a].apply(window.dhtmlXFileUploaderSLObjects.items[g].uploader,c)}}}this._sl_obj_id=&quot;dhtmlXFileUploaderSLObject_&quot;+window.dhx4.newId();if(this._sl_v!=false){this._titleText=&quot;Engine successfuly initedSilverlight version: &quot;+this._sl_v[0]+&quot;.&quot;+this._sl_v[1];this.buttons.browse.innerHTML='<DIV style="width:100%;height:100%;">&lt;object data=&quot;data:application/x-silverlight-2,&quot; type=&quot;application/x-silverlight-2&quot; width=&quot;100%&quot; height=&quot;100%&quot; id=&quot;'+this._sl_obj_id+'&quot;&gt;&lt;param name=&quot;source&quot; value=&quot;'+this._sl_xap+'&quot;/&gt;&lt;param name=&quot;background&quot; value=&quot;Transparent&quot;/&gt;&lt;param name=&quot;windowless&quot; value=&quot;true&quot;/&gt;&lt;param name=&quot;initParams&quot; value=&quot;SLID='+this._sl_obj_id+&quot;,LOGS=&quot;+this._sl_logs+'&quot;/&gt;&lt;param name=&quot;minRuntimeVersion&quot; value=&quot;5.0&quot;/&gt;&lt;/object&gt;</DIV>'}else{this._titleText=&quot;Silverlight plugin not foundor version less than 4.0&quot;;this.buttons.browse.style.cursor=&quot;wait&quot;;this.buttons.browse.title=&quot;&quot;}this._progress_type=&quot;percentage&quot;;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(g,a,c){this._files[g]={name:a,size:c,state:&quot;added&quot;};this._addFileToList(g,a,c,&quot;added&quot;,0);if(this._autoStart&amp;&amp; !this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(c){if(!this._files[c]){return}var a=false;if(this._uploading&amp;&amp;this._files[c].state==&quot;uploading&quot;){this._uploadStop();a=true}document.getElementById([this._sl_obj_id]).Content.a.removeFileById(c);this._files[c].name=null;this._files[c].size=null;this._files[c].state=null;this._files[c]=null;delete this._files[c];this._removeFileFromList(c);if(a){this._uploadStart()}},_doUploadFile:function(a){document.getElementById(this._sl_obj_id).Content.a.upload(a,this._sl_upload_url,&quot;&amp;mode=sl&amp;dhxr&quot;+new Date().getTime())},_uploadStop:function(g){this._uploading=false;for(var c in this._files){if(this._files[c].state==&quot;uploading&quot;){document.getElementById(this._sl_obj_id).Content.a.uploadStop(c)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null;delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]}this._sl_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.setSLURL=function(a){this._sl_upload_url=a};dhtmlXFileUploader.prototype.getSLVersion=function(){var a=false;if(window.dhx4.isIE){try{var c=new ActiveXObject(&quot;AgControl.AgControl&quot;);if(c!=null){var l=4,h=0;while(c.isVersionSupported([l,h].join(&quot;.&quot;))){a=[l,h];if(++h&gt;9){l++;h=0}}}c=null}catch(g){}}else{if(navigator.plugins[&quot;Silverlight Plug-In&quot;]!=null){a=navigator.plugins[&quot;Silverlight Plug-In&quot;].description.split(&quot;.&quot;)}}return a};function dhtmlXAccordion(l,n){var h=this;var g=window.dhx4.transDetect();this.kZ={skin:(n||window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhxacc&quot;)||&quot;dhx_skyblue&quot;),icons_path:&quot;&quot;,multi_mode:false,last_opened:null,on_active_id:null,on_active_click:false,size_changed:true,def_height:90,total_count:0,hiden_count:0,base_w:null,fs_mode:false,fs_tm:null,fs_base_ofs:{w:2,h:2}};this.kZ.tr={Nq:g.transProp,ev:g.transEv,height_open:&quot;height 0.2s cubic-bezier(0.25,0.1,0.25,1)&quot;,height_close:&quot;height 0.18s cubic-bezier(0.25,0.1,0.25,1)&quot;,op_open:&quot;opacity 0.16s ease-in&quot;,op_close:&quot;opacity 0.2s ease-out&quot;,op_v_open:&quot;1&quot;,op_v_close:&quot;0.4&quot;,dnd_top:&quot;top 0.16s&quot;};this.ofs={m:{},s:{},def:{m:{left:0,right:0,first:0,between:8},s:{left:0,right:0,first:0,between: -1,last:0}},base:{s:{},m:{}},skin:{dhx_web:{s:{between:3},m:{between:3}},dhx_terrace:{m:{between:12,left:0,right:0}}}};if(navigator.userAgent.indexOf(&quot;MSIE&quot;)&gt;=0||navigator.userAgent.indexOf(&quot;Trident&quot;)&gt;=0){this.kZ.tr.height_open=this.kZ.tr.height_close}else{this.kZ.tr.height_open=this.kZ.tr.height_close}var m=null;if(typeof(l)==&quot;object&quot;&amp;&amp; !l.tagName){m={};for(var c in l){m[c]=l[c];l[c]=null}l=m.parent;m.parent=null}if(l==document.body){document.documentElement.className+=&quot; dhxacc_fullscreen&quot;;document.body.className+=&quot; dhxacc_fullscreen&quot;;this.kZ.fs_mode=true;this.base=document.createElement(&quot;DIV&quot;);this.base.className=&quot;dhxacc_base_&quot;+this.kZ.skin;this.base.style.position=&quot;absolute&quot;;this.base.style.left=this.kZ.fs_base_ofs.w+&quot;px&quot;;this.base.style.top=this.kZ.fs_base_ofs.h+&quot;px&quot;;document.body.appendChild(this.base)}else{this.base=(typeof(l)==&quot;string&quot;?document.getElementById(l):l);l=null;this.base.className+=&quot; dhxacc_base_&quot;+this.kZ.skin;while(this.base.childNodes.length&gt;0){this.base.removeChild(this.base.lastChild)}}if(this.base._ofs!=null){for(var o in this.ofs.base){if(this.base._ofs[o]!=null){for(var c in this.base._ofs[o]){this.ofs.base[o][c]=this.base._ofs[o][c]}}}}this._applyOffsets=function(){for(var v in this.ofs.def){var s=this.ofs.def[v];var u=(this.ofs.skin[this.kZ.skin]!=null&amp;&amp;this.ofs.skin[this.kZ.skin][v]!=null?this.ofs.skin[this.kZ.skin][v]:null);var r=(this.base._ofs!=null?this.base._ofs[v]:null);for(var q in s){if(u!=null&amp;&amp;u[q]!=null){this.ofs[v][q]=u[q]}else{if(r!=null&amp;&amp;r[q]!=null){this.ofs[v][q]=r[q]}else{this.ofs[v][q]=s[q]}}}}};this._applyOffsets();this.t={};this.dL=function(x,w,r,q,v){if(x==null){x=&quot;a&quot;+window.dhx4.newId()}while(this.t[x]!=null){x=&quot;a&quot;+window.dhx4.newId()}var a=new dhtmlXAccordionCell(x,this);a.kZ.skin=this.kZ.skin;a.setText(w);if(v!=null){a.setIcon(v)}a.cell._accId=x;a.cell.childNodes[a.kZ.idx.hdr].onselectstart=function(y){y=y||event;if(y.preventDefault){y.preventDefault()}else{y.returnValue=false}return false};a.cell.childNodes[a.kZ.idx.hdr].onclick=function(A){A=A||event;if(A.preventDefault){A.preventDefault()}else{A.returnValue=false}if(h._dnd!=null&amp;&amp;h._dnd.ofs==true){return}var y=(A.target||A.srcElement);var C=null;while(y._accId!=this&amp;&amp;C==null){if(y._accId!=null){C=y._accId}else{y=y.parentNode}}if(C!=null){h._hdrClick(C)}};this.t[x]={cell:a};this.kZ.total_count++;if(this.kZ.multi_mode){if(typeof(r)==&quot;undefined&quot;){r=true}this.base.appendChild(a.cell);a.kZ.opened=(r==true);if(typeof(q)==&quot;undefined&quot;||q==null||q==&quot;*&quot;){if(q==&quot;*&quot;){a.kZ.h_auto=true}q=this.kZ.def_height}else{q=Math.max(parseInt(q),30)}a._setSize(this.ofs.m.left,0,this.kZ.base_w||this._getAvailItemWidth(),a.kZ.opened?q:a._getHdrHeight());a.cell.style.marginTop=(a.cell==this.base.firstChild?this.ofs.m.first:this.ofs.m.between)+&quot;px&quot;;if(r!=true){a.kZ.size.h=q;a._adjustCell();a.cell.className+=&quot; dhx_cell_closed&quot;}this._adjustOpened();if(this._dnd!=null){this._dndAttachEvent(x)}}else{r=(this.kZ.last_opened==null?true:window.dhx4.s2b(r));var u=this._updateCellsHeight();if(this.kZ.last_opened!=null){if(r){this._closeItem(this.kZ.last_opened,false)}else{var s=this.t[this.kZ.last_opened].cell;s._setSize(s.kZ.size.x,s.kZ.size.y,s.kZ.size.w,u);s=null}}this.base.appendChild(a.cell);a.kZ.opened=r;a.cell.style.marginTop=String(a.cell==this.base.firstChild?this.ofs.s.first:this.ofs.s.between)+&quot;px&quot;;a._setSize(this.ofs.s.left,0,this.kZ.base_w||this._getAvailItemWidth(),r?u:a._getHdrHeight());if(r){this.kZ.last_opened=x}else{a.kZ.size.h=u;a._adjustCell();a.cell.className+=&quot; dhx_cell_closed&quot;}}a=null;return this.t[x].cell};this.removeItem=function(a){if(!this.t[a]){return}if(this.kZ.last_opened==a){this.kZ.last_opened=null}if(this.kZ.on_active_id==a){this.kZ.on_active_id=null}if(this._dnd!=null){this._dndClearCell(a)}this.kZ.total_count--;if(!this.kZ.multi_mode&amp;&amp; !this.t[a].cell.kZ.visible){this.kZ.hiden_count--}this.t[a].cell._unload();this.t[a].cell=null;this.t[a]=null;delete this.t[a];if(!this.kZ.unloading){if(!this.kZ.multi_mode){this._updateCellsMargin()}this.setSizes()}};this.cells=function(a){return this.t[a].cell};this.enableMultiMode=function(a,q){this.kZ.multi_mode=true;if(!isNaN(q)){this.kZ.def_height=q}if(a==&quot;auto&quot;||a==&quot;scroll&quot;){this.base.style.overflowX=&quot;hidden&quot;;this.base.style.overflowY=a}else{this.base.style.overflow=&quot;visible&quot;}};this.forEachItem=function(r){for(var q in this.t){if(typeof(r)==&quot;function&quot;){r.apply(this,[this.t[q].cell])}else{if(typeof(r)==&quot;string&quot;&amp;&amp;typeof(window[r])==&quot;function&quot;){window[r].apply(this,[this.t[q].cell])}}}};this._openItem=function(q,a){if(typeof(a)==&quot;undefined&quot;){a=true}if(this.t[q].cell.kZ.opened==false){if(this.kZ.multi_mode){this.t[q].cell._open(a)}else{if(this.kZ.tr.Nq==false){if(this.kZ.last_opened!=null){this.t[this.kZ.last_opened].cell._close(false)}this.t[q].cell._open(false);this.kZ.last_opened=q}else{this.kZ.on_active_id=q;this.t[q].cell._open(a);if(this.kZ.last_opened!=null){this.t[this.kZ.last_opened].cell._close(a)}this.kZ.last_opened=q}}}};this._closeItem=function(q,a){if(typeof(a)==&quot;undefined&quot;){a=true}if(this.t[q].cell.kZ.opened==true){this.t[q].cell._close(a);this.kZ.last_opened=null}};this._adjustOpened=function(){if(this.kZ.multi_mode==true){if(this._openCache==null){var u=this._getDynData();for(var r in u){this.t[r].cell.kZ.size.h=u[r];this.t[r].cell.cell.style.height=u[r]+&quot;px&quot;}}else{var v=false;for(var r in this._openCache){v=(v||this._openCache[r])}if(v==true){return}this._openCache=this._openId=null}var q=this._getAvailItemWidth();for(var r in this.t){var s=true;if(q==this.t[r].cell.kZ.size.w&amp;&amp;(this._openMode==&quot;close&quot;||this.t[r].cell.kZ.opened==false)){s=false}if(s){this.t[r].cell._setWidth(q)}}this._openMode=null}else{if(this.kZ.last_opened!=null){var w=this.kZ.last_opened;this.t[w].cell._setSize(this.t[w].cell.kZ.size.x,this.t[w].cell.kZ.size.y,this.t[w].cell.kZ.size.w,this.t[w].cell.kZ.size.h)}}};this._getDynData=function(E,D){if(typeof(E)==&quot;undefined&quot;||E==null){E={}}if(typeof(D)==&quot;undefined&quot;||D==null){D={}}var x={};var C=0;var w=0;var u=0;for(var r=0;r&lt;this.base.childNodes.length;r++){var s=this.base.childNodes[r]._accId;var H=this.t[s].cell;if(H.kZ.visible==true){var y=this.ofs.m[u==0?&quot;first&quot;:&quot;between&quot;];if(E[s]==true||D[s]==true||(H.kZ.opened==true&amp;&amp;H.kZ.h_auto==true)){if(D[s]==true){var A=H._getHdrHeight();x[s]=A;w+=A+y}else{if(H.kZ.h_auto==true){x[s]=true;w+=y;C++}else{if(E[s]==true){x[s]=H.kZ.size.h;w+=H.kZ.size.h+y}}}}else{w+=H.cell.offsetHeight+y}u++}H=null}if(C&gt;0){var v=this.base.offsetHeight-w;var w=Math.floor(v/C);for(var F in x){if(x[F]==true){if(C&gt;1){v-=w}else{w=v}x[F]=w;C--}}}return x};this._adjustBase=function(){if(this.kZ.fs_mode){this.base.style.width=document.body.offsetWidth-this.kZ.fs_base_ofs.w*2+&quot;px&quot;;this.base.style.height=document.body.offsetHeight-this.kZ.fs_base_ofs.h*2+&quot;px&quot;}};this.setSizes=function(){this._adjustBase();if(this.kZ.multi_mode==true){this._adjustOpened()}else{this.kZ.base_w=null;var r=this._updateCellsHeight();for(var q in this.t){this.t[q].cell._setSize(this.ofs.s.left,0,this.kZ.base_w||this._getAvailItemWidth(),this.t[q].cell.kZ.opened?r:this.t[q].cell._getHdrHeight());if(!this.t[q].cell.kZ.opened){this.t[q].cell.kZ.size.h=r;this.t[q].cell._adjustCell()}}this.kZ.size_changed=true}};this.setSkin=function(r){this.base.className=String(this.base.className).replace(new RegExp(&quot;\\s{1,}dhxacc_base_&quot;+this.kZ.skin+&quot;\\s{0,}$&quot;),&quot; dhxacc_base_&quot;+r);this.kZ.skin=r;for(var q in this.t){this.t[q].cell.kZ.cells_cont=null;this.t[q].cell.kZ.skin=this.kZ.skin}this._applyOffsets();this._updateCellsMargin();this.setSizes()};this.setIconsPath=function(a){this.kZ.icons_path=a};this._getAvailItemWidth=function(){var q=this.ofs[(this.kZ.multi_mode?&quot;m&quot;:&quot;s&quot;)];var a=Math.max(this.base.clientWidth-q.left-q.right,10);this.kZ.base_w=a;q=null;return a};this._updateCellsHeight=function(){if(this.kZ.multi_mode==true){return}var s=this.kZ.total_count-this.kZ.hiden_count;var u=this.base.offsetHeight-this.ofs.s.last;if(s==0){return u}var w=false;for(var v=0;v&lt;this.base.childNodes.length;v++){if(w==false){var x=this.base.childNodes[v]._accId;if(this.t[x].cell.kZ.visible){u-=this.t[x].cell._getHdrHeight()*(s-1);w=true}}}u-=(s-1)*this.ofs.s.between+this.ofs.s.first;for(var r in this.t){if(this.t[r].cell.kZ.size!=null){this.t[r].cell.kZ.size.h=u;this.t[r].cell._adjustCell()}}return u};this._updateCellsMargin=function(){var a=0;for(var r=0;r&lt;this.base.childNodes.length;r++){var s=this.base.childNodes[r]._accId;if(this.t[s].cell.kZ.visible){this.t[s].cell.cell.style.marginTop=String(this.ofs[this.kZ.multi_mode?&quot;m&quot;:&quot;s&quot;][a++ ==0?&quot;first&quot;:&quot;between&quot;])+&quot;px&quot;}}};this._hdrClick=function(q){if(!this.kZ.multi_mode&amp;&amp;this.t[q].cell.kZ.opened){return}var a=this.t[q].cell.kZ.opened;if(this.callEvent(&quot;onBeforeActive&quot;,[q,(a?false:true)])!==true){return}this.kZ.on_active_click=true;this[a?&quot;_closeItem&quot;:&quot;_openItem&quot;](q);if(this.kZ.multi_mode&amp;&amp;this.kZ.tr.Nq==false){this._adjustOpened()}};this.unload=function(){this.kZ.unloading=true;for(var q in this.t){this.removeItem(q)}this.t=null;if(typeof(this._unloadDND)==&quot;function&quot;){this._unloadDND()}if(this.kZ.fs_mode){if(this.kZ.fs_tm){window.clearTimeout(this.kZ.fs_tm)}if(window.addEventListener){window.removeEventListener(&quot;resize&quot;,this._doOnResizeStart,false)}else{window.detachEvent(&quot;onresize&quot;,this._doOnResizeStart)}this._doOnResizeStart=null;this._doOnResizeEnd=null;this.kZ.fs_tm=null}if(this.dhxWins){this.dhxWins.unload();this.dhxWins=null}window.dhx4._eventable(this,&quot;clear&quot;);window.dhx4._enableDataLoading(this,null,null,null,&quot;clear&quot;);this.base.className=String(this.base.className).replace(new RegExp(&quot;\\s{1,}dhxacc_base_&quot;+this.kZ.skin+&quot;\\s{0,}$&quot;),&quot;&quot;);this.base=null;this.ofs=this.kZ=null;for(var q in this){this[q]=null}h=null};this.setOffset=function(a){this.ofs.s.between=a;this.ofs.m.between=a;this._updateCellsMargin();this.setSizes()};this._initObj=function(r){if(r.skin!=null){this.setSkin(r.skin)}if(window.dhx4.s2b(r.multi_mode)){this.enableMultiMode()}if(r.icons_path!=null){this.setIconsPath(r.icons_path)}if(r.icon_path!=null){this.setIconsPath(r.icon_path)}if(r.items!=null){for(var a=0;a&lt;r.items.length;a++){this.dL(r.items[a].id,r.items[a].text,r.items[a].open,r.items[a].height,r.items[a].icon||r.items[a].img)}}if(window.dhx4.s2b(r.dnd)==true&amp;&amp;typeof(this.enableDND)==&quot;function&quot;){this.enableDND()}};this._xmlToObj=function(v){var s={items:[]};var a=v.getElementsByTagName(&quot;accordion&quot;)[0];if(a.getAttribute(&quot;skin&quot;)!=null){s.skin=a.getAttribute(&quot;skin&quot;)}if(a.getAttribute(&quot;mode&quot;)==&quot;multi&quot;){s.multi_mode=true}if(a.getAttribute(&quot;multiMode&quot;)!=null){s.multi_mode=window.dhx4.s2b(a.getAttribute(&quot;multiMode&quot;))}if(a.getAttribute(&quot;iconsPath&quot;)!=null){s.icons_path=a.getAttribute(&quot;iconsPath&quot;)}for(var u=0;u&lt;a.childNodes.length;u++){var w=a.childNodes[u];if(typeof(w.tagName)!=&quot;undefined&quot;&amp;&amp;String(w.tagName).toLowerCase()==&quot;cell&quot;){var r={};if(w.getAttribute(&quot;id&quot;)!=null){r.id=w.getAttribute(&quot;id&quot;)}if(w.getAttribute(&quot;icon&quot;)!=null){r.icon=w.getAttribute(&quot;icon&quot;)}if(w.getAttribute(&quot;height&quot;)!=null){r.height=w.getAttribute(&quot;height&quot;)}if(w.getAttribute(&quot;open&quot;)!=null){r.open=window.dhx4.s2b(w.getAttribute(&quot;open&quot;))}r.text=w.firstChild.nodeValue;s.items.push(r)}w=null}return s};window.dhx4._enableDataLoading(this,&quot;_initObj&quot;,&quot;_xmlToObj&quot;,&quot;accordion&quot;,{struct:true});window.dhx4._eventable(this);this._callMainEvent=function(q,a){return this.callEvent(q,a)};this.attachEvent(&quot;onActive&quot;,function(a){if(this.t[a].cell.dataObj!=null&amp;&amp;this.t[a].cell.dataType==&quot;editor&quot;){this.t[a].cell.dataObj._prepareContent(true)}if(this.t[a].cell.kZ.opened==true){this.t[a].cell._adjustProgress()}});if(this.kZ.fs_mode){this._adjustBase();this.kZ.fs_tm=null;this._doOnResizeStart=function(){if(h.kZ.fs_tm){window.clearTimeout(h.kZ.fs_tm)}h.kZ.fs_tm=window.setTimeout(h._doOnResizeEnd,200)};this._doOnResizeEnd=function(){h.setSizes()};if(window.addEventListener){window.addEventListener(&quot;resize&quot;,this._doOnResizeStart,false)}else{window.attachEvent(&quot;onresize&quot;,this._doOnResizeStart)}}if(typeof(window.dhtmlXWindows)==&quot;function&quot;){this.dhxWins=new dhtmlXWindows();this.dhxWins.setSkin(this.kZ.skin)}if(m!=null){this._initObj(m);m=null}return this}function dhtmlXAccordionCell(h,g){dhtmlXCellObject.apply(this,[h,&quot;_acc&quot;]);this.acc=g;this.kZ.visible=true;this.kZ.docked=true;this.attachEvent(&quot;_onCellUnload&quot;,function(){this._trDetachEv();this._unloadDocking();this.acc=null;this.cell._accObj=null;this.cell.childNodes[this.kZ.idx.hdr].onselectstart=null;this.cell.childNodes[this.kZ.idx.hdr].onclick=null;this._initHeader=null;this._getHdrHeight=null;this._setWidth=null;this._adjustCell=null;this._open=null;this._close=null;this._isOpened=null;this._trInitEv=null;this._trAttachEv=null;this._trDetachEv=null;this._trOnEnd=null;this._onActiveCall=null;this.setText=null;this.getText=null;this.setIcon=null;this.clearIcon=null;this.show=null;this.hide=null;this.Yi=null;this.setHeight=null;this.moveOnTop=null});this.attachEvent(&quot;_onContentLoaded&quot;,function(){this.acc._callMainEvent(&quot;onContentLoaded&quot;,arguments)});this._initHeader();this.kZ.tr={};for(var c in this.acc.kZ.tr){this.kZ.tr[c]=this.acc.kZ.tr[c]}if(this.kZ.tr.Nq!=false){this.attachEvent(&quot;_onIdxUpdated&quot;,function(){this._cellSetOpacity((this.kZ.opened?&quot;open&quot;:&quot;close&quot;),false)})}this.open=function(){this.acc._openItem(this._idd)};this.close=function(){this.acc._closeItem(this._idd)};this._setWidth=function(a){if(a!=this.kZ.size.w){this.kZ.size.w=a;this.cell.style.width=a+&quot;px&quot;}this._adjustCell()};this._adjustCell=function(){this._adjustCont();if(this.dataObj!=null&amp;&amp;typeof(this.dataObj.setSizes)==&quot;function&quot;){this.dataObj.setSizes()}};this._initDocking();return this}dhtmlXAccordionCell.prototype=new dhtmlXCellObject();dhtmlXAccordionCell.prototype._initHeader=function(){var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhx_cell_hdr&quot;;a.innerHTML=&quot;&quot;;this.cell.insertBefore(a,this.cell.childNodes[this.kZ.idx.vI]);a=null;this.kZ.ofs_nodes.t._getHdrHeight=&quot;func&quot;;this.kZ.hdr={visible:true};this.kZ.idx_data.hdr=&quot;dhx_cell_hdr&quot;;this._updateIdx()};dhtmlXAccordionCell.prototype._getHdrHeight=function(){return this.cell.childNodes[this.kZ.idx.hdr].offsetHeight};dhtmlXAccordionCell.prototype.setText=function(a){this.kZ.text=a;this.cell.childNodes[this.kZ.idx.hdr].firstChild.innerHTML=&quot;<SPAN>&quot;+a+&quot;</SPAN>&quot;};dhtmlXAccordionCell.prototype.getText=function(){return this.kZ.text};dhtmlXAccordionCell.prototype.setIcon=function(g){var c=this.cell.childNodes[this.kZ.idx.hdr];if(c.firstChild.className!=&quot;dhx_cell_hdr_icon&quot;){c.firstChild.className+=&quot; dhx_cell_hdr_icon&quot;;var a=document.createElement(&quot;IMG&quot;);a.className=&quot;dhx_cell_hdr_icon&quot;;c.insertBefore(a,c.firstChild);a=null}c.firstChild.src=this.acc.kZ.icons_path+g;c=null};dhtmlXAccordionCell.prototype.clearIcon=function(){var a=this.cell.childNodes[this.kZ.idx.hdr];if(a.firstChild.className==&quot;dhx_cell_hdr_icon&quot;){a.removeChild(a.firstChild);a.firstChild.className=String(a.firstChild.className).replace(/\s{1,}dhx_cell_hdr_icon/gi,&quot;&quot;)}a=null};dhtmlXAccordionCell.prototype._open=function(c){var l={};if(this.acc.kZ.multi_mode){var h={};h[this._idd]=true;l=this.acc._getDynData(h);this.acc._openId=this._idd;this.acc._openCache={};this.acc._openMode=&quot;open&quot;}else{l[this._idd]=this.kZ.size.h}for(var g in l){if(this.acc._openCache!=null){this.acc._openCache[g]=true}var m=this.acc.t[g].cell;m.cell.className=String(m.cell.className).replace(/\s{1,}dhx_cell_closed/gi,&quot;&quot;);m.kZ.opened=true;m._trInitEv(&quot;open&quot;,c);m.kZ.size.h=l[g];m.cell.style.height=m.kZ.size.h+&quot;px&quot;;m=null}if(this.kZ.tr.Nq==false){this.acc._openId=this.acc._openCache=this.acc._openMode=null;this._onActiveCall(true)}};dhtmlXAccordionCell.prototype._close=function(c){var h={};if(this.acc.kZ.multi_mode){var l={};l[this._idd]=true;h=this.acc._getDynData(null,l);this.acc._openId=this._idd;this.acc._openCache={};this.acc._openMode=&quot;close&quot;}else{h[this._idd]=this._getHdrHeight()}for(var g in h){var m=this.acc.t[g].cell;if(this.acc._openCache!=null){this.acc._openCache[g]=true}if(g==this._idd){m.cell.className+=&quot; dhx_cell_closed&quot;;m.kZ.opened=false;m._trInitEv(&quot;close&quot;,c)}else{m.kZ.size.h=h[g];m._adjustCell();m._trInitEv(&quot;open&quot;,c)}m.cell.style.height=h[g]+&quot;px&quot;;m=null}if(this.kZ.tr.Nq==false){this.acc._openId=this.acc._openCache=this.acc._openMode=null;this._onActiveCall(false)}};dhtmlXAccordionCell.prototype.isOpened=function(){return(this.kZ.opened==true)};dhtmlXAccordionCell.prototype._trInitEv=function(c,a){if(this.kZ.tr.Nq==false){return}this._trAttachEv();if(!this.cell._accObj){this.cell._accObj=this.acc}if(a){this.cell.style[this.kZ.tr.Nq]=this.kZ.tr[&quot;height_&quot;+c]}this._cellSetOpacity(c,a)};dhtmlXAccordionCell.prototype._trAttachEv=function(){if(!this.kZ.tr.ev_attached){this.cell._trProp=this.kZ.tr.Nq;this.cell.addEventListener(this.kZ.tr.ev,this._trOnEnd,false);this.kZ.tr.ev_attached=true}};dhtmlXAccordionCell.prototype._trDetachEv=function(){if(this.kZ.tr.ev_attached){this.cell.addEventListener(this.kZ.tr.ev,this._trOnEnd,false);this.kZ.tr.ev_attached=false}};dhtmlXAccordionCell.prototype._trOnEnd=function(a){if(a.stopPropagation){a.stopPropagation()}if(a.propertyName==&quot;height&quot;){this.style[this._trProp]=&quot;&quot;;if(this._accObj.kZ.multi_mode){if(this._accObj._openCache!=null){this._accObj._openCache[this._accId]=false}this._accObj._adjustOpened()}if(this._accObj.kZ.on_active_click==true){if(this._accObj.kZ.multi_mode){this._accObj._callMainEvent(&quot;onActive&quot;,[this._accId,this._accObj.t[this._accId].cell.kZ.opened]);this._accObj.kZ.on_active_click=false}else{this._accObj._callMainEvent(&quot;onActive&quot;,[this._accObj.kZ.on_active_id,true]);this._accObj.kZ.on_active_id=null;this._accObj.kZ.on_active_click=false}}this._accObj=null}};dhtmlXAccordionCell.prototype._cellSetOpacity=function(h,c){for(var g in this.kZ.idx){if({hdr:true,pr1:true,pr2:true}[g]!=true){if(c){this.cell.childNodes[this.kZ.idx[g]].style[this.kZ.tr.Nq]=this.kZ.tr[&quot;op_&quot;+h]}this.cell.childNodes[this.kZ.idx[g]].style.opacity=this.kZ.tr[&quot;op_v_&quot;+h]}}};dhtmlXAccordionCell.prototype._onActiveCall=function(a){if(this.acc.kZ.on_active_click==false){return}if(this.acc.kZ.multi_mode==true){this.acc._callMainEvent(&quot;onActive&quot;,[this._idd,this.kZ.opened]);this.acc.kZ.on_active_click=false}else{if(a==true){this.acc._callMainEvent(&quot;onActive&quot;,[this._idd,true]);this.acc.kZ.on_active_click=false}}};dhtmlXAccordionCell.prototype.show=function(){if(this.kZ.visible){return}if(this.kZ.docked==false){this.dock();return}this.cell.style.display=&quot;&quot;;this.kZ.visible=true;if(!this.acc.kZ.multi_mode){this.acc.kZ.hiden_count--;this.acc._updateCellsHeight();this.acc._updateCellsMargin()}if(this.acc.kZ.size_changed){this.acc.setSizes();this.acc.kZ.size_changed=false}else{this.acc._adjustOpened()}};dhtmlXAccordionCell.prototype.hide=function(){if(!this.kZ.visible){return}if(!this.acc.kZ.multi_mode&amp;&amp;this.kZ.opened){this._close(false);this.acc.kZ.last_opened=null}this.cell.style.display=&quot;none&quot;;this.kZ.visible=false;if(!this.acc.kZ.multi_mode){this.acc.kZ.hiden_count++;this.acc._updateCellsHeight();this.acc._updateCellsMargin()}this.acc._adjustOpened()};dhtmlXAccordionCell.prototype.Yi=function(){return(this.kZ.visible==true)};dhtmlXAccordionCell.prototype.setHeight=function(a){if(!this.acc.kZ.multi_mode){return}if(a==&quot;*&quot;){this.kZ.h_auto=true}else{this.kZ.h_auto=false;this.kZ.size.h=a}if(this.kZ.opened){if(a!=&quot;*&quot;){this.cell.style.height=a+&quot;px&quot;}this.acc._adjustOpened()}};dhtmlXAccordionCell.prototype.moveOnTop=function(){if(this.cell.parentNode.firstChild==this.cell){return}this.cell.parentNode.insertBefore(this.cell,this.cell.parentNode.firstChild);this.acc._updateCellsMargin()};dhtmlXAccordionCell.prototype._initDocking=function(){var a=this;this.dock=function(){if(this.acc.dhxWins==null||this.kZ.docked==true){return}var c=this.acc.dhxWins.window(this._idd);c.close();this._attachFromCell(c);this.kZ.docked=true;this.show();if(this.kZ.dock_opened){this.open()}c=null;this.acc._callMainEvent(&quot;onDock&quot;,[this._idd])};this.undock=function(c,n,l,m){if(this.acc.dhxWins==null||this.kZ.docked==false){return}this.kZ.dock_opened=this.kZ.opened;if(this.acc.dhxWins.window(this._idd)!=null){var g=this.acc.dhxWins.window(this._idd);g.show()}else{if(c==null){c=20}if(n==null){n=20}if(l==null){l=320}if(m==null){m=200}var g=this.acc.dhxWins.createWindow(this._idd,c,n,l,m);g.button(&quot;close&quot;).hide();g.addUserButton(&quot;dock&quot;,99,&quot;Dock&quot;);g.button(&quot;dock&quot;).show();g.button(&quot;dock&quot;).attachEvent(&quot;onClick&quot;,this._doOnDockClick);g.setText(this.getText());g.attachEvent(&quot;onClose&quot;,this._doOnDockWinClose)}this.kZ.docked=false;this.hide();g._attachFromCell(this);g=null;this.acc._callMainEvent(&quot;onUnDock&quot;,[this._idd])};this._doOnDockClick=function(){a.dock()};this._doOnDockWinClose=function(c){c.hide();return false};this._unloadDocking=function(){a=null}};dhtmlXAccordion.prototype.enableDND=function(){if(this.kZ.multi_mode==false||this._dnd!=null){return}var g=this;this._dnd={tr_count:0,tr_items:{}};this._dndAttachEvent=function(h){var a=this.t[h].cell;if(a.kZ.dnd_inited!=true){if(typeof(window.addEventListener)==&quot;function&quot;){a.cell.childNodes[a.kZ.idx.hdr].addEventListener(&quot;mousedown&quot;,this._dndOnMouseDown,false)}else{a.cell.childNodes[a.kZ.idx.hdr].attachEvent(&quot;onmousedown&quot;,this._dndOnMouseDown)}a.kZ.dnd_inited=true}a=null};this._dndDetachEvent=function(h){var a=this.t[h].cell;if(a.kZ.dnd_inited==true){if(typeof(window.addEventListener)==&quot;function&quot;){a.cell.childNodes[a.kZ.idx.hdr].removeEventListener(&quot;mousedown&quot;,this._dndOnMouseDown,false)}else{a.cell.childNodes[a.kZ.idx.hdr].detachEvent(&quot;onmousedown&quot;,this._dndOnMouseDown)}a.kZ.dnd_inited=false}a=null};this._dndOnMouseDown=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}var a=(h.target||h.srcElement);while(a!=null&amp;&amp;a.parentNode!=g.base){a=a.parentNode}if(a!=null){g._dndDragStart(h,a)}a=null};this._dndDragStart=function(m,h){if(this._dnd.tr_waiting==true){return}this._dnd.dragObj=h;this._dnd.dy=m.clientY;var a=0;for(var l=0;l&lt;this._dnd.dragObj.parentNode.childNodes.length;l++){this._dnd.dragObj.parentNode.childNodes[l]._ind=l;if(this._dnd.dragObj.parentNode.childNodes[l]==this._dnd.dragObj){this._dnd.dragObj._k0=a;if(l&gt;0){this._dnd.dragObj._k0+=this.ofs.m.between-this.ofs.m.first}a=0}else{a+=this._dnd.dragObj.parentNode.childNodes[l].offsetHeight+parseInt(this._dnd.dragObj.parentNode.childNodes[l].style.marginTop)}}this._dnd.dragObj._k1=a;this._dnd.h=this._dnd.dragObj.offsetHeight;this._dnd.ofs=false};this._dndDoDrag=function(v){if(!this._dnd.dragObj){return}if(this._dnd.tr_waiting==true){return}var n=v.clientY-this._dnd.dy;if(this._dnd.ofs==false&amp;&amp;Math.abs(n)&gt;5){this._dnd.dragObj.className+=&quot; acc_cell_dragged&quot;;this._dnd.ofs=true}if(n&lt;0){if(n&lt; -this._dnd.dragObj._k0){n= -this._dnd.dragObj._k0}}else{if(n&gt;this._dnd.dragObj._k1){n=this._dnd.dragObj._k1}}this._dnd.dragObj.style.top=n+&quot;px&quot;;var u=v.clientY-this._dnd.dy;var m=0;var h=0;for(var o=this._dnd.dragObj._ind+1;o&lt;=this._dnd.dragObj.parentNode.lastChild._ind;o++){var a=this._dnd.dragObj.parentNode.childNodes[o].offsetHeight;if(u&gt;m+a*2/3){h++}m+=a}var l=this._dnd.dragObj.nextSibling;var o=0;while(l!=null){if(++o&lt;=h&amp;&amp;l!=null){if(!l._ontop){if(l._tm){window.clearTimeout(l._tm)}this._dndAnim(l,false,parseInt(l.style.top||0),-this._dnd.h-this.ofs.m.between);l._ontop=true}}else{if(l._ontop){if(l._tm){window.clearTimeout(l._tm)}this._dndAnim(l,true,parseInt(l.style.top||0),0);l._ontop=false}}l=l.nextSibling}var u=this._dnd.dy-v.clientY;var m=0;var h=0;for(var o=this._dnd.dragObj._ind-1;o&gt;=this._dnd.dragObj.parentNode.firstChild._ind;o--){var a=this._dnd.dragObj.parentNode.childNodes[o].offsetHeight;if(u&gt;m+a*2/3){h++}m+=a}var l=this._dnd.dragObj.previousSibling;var o=0;while(l!=null){if(++o&lt;=h&amp;&amp;l!=null){if(!l._onbottom){if(l._tm){window.clearTimeout(l._tm)}this._dndAnim(l,true,parseInt(l.style.top||0),this._dnd.h+this.ofs.m.between);l._onbottom=true}}else{if(l._onbottom){if(l._tm){window.clearTimeout(l._tm)}this._dndAnim(l,false,parseInt(l.style.top),0);l._onbottom=false}}l=l.previousSibling}};this._dndDragStop=function(r,n){if(n){}else{if(this._dnd.tr_count&gt;0){this._dnd.tr_waiting=true;return}}if(!this._dnd.dragObj){return}this._dnd.dragObj.className=String(this._dnd.dragObj.className).replace(/\s{0,}acc_cell_dragged/gi,&quot;&quot;);this._dnd.dragObj.style.top=&quot;0px&quot;;var o=false;for(var m=0;m&lt;this._dnd.dragObj.parentNode.childNodes.length;m++){var l=this._dnd.dragObj.parentNode.childNodes[m];if(l!=this._dnd.dragObj){if(l._tm){window.clearTimeout(l._tm)}l.style.top=&quot;0px&quot;;if(l._ontop&amp;&amp;((l.nextSibling!=null&amp;&amp;l.nextSibling._ontop!=true)|| !l.nextSibling)){o=(l.nextSibling||null)}if(l._onbottom&amp;&amp;((l.previousSibling!=null&amp;&amp;l.previousSibling._onbottom!=true)|| !l.previousSibling)){o=l}}l=null}for(var m=0;m&lt;this._dnd.dragObj.parentNode.childNodes.length;m++){this._dnd.dragObj.parentNode.childNodes[m]._ontop=null;this._dnd.dragObj.parentNode.childNodes[m]._onbottom=null}if(o!==false){if(o==null){this._dnd.dragObj.parentNode.appendChild(this._dnd.dragObj)}else{this._dnd.dragObj.parentNode.insertBefore(this._dnd.dragObj,o)}}var u=this._dnd.dragObj._accId;var h=this._dnd.dragObj._ind;var a=h;for(var m=0;m&lt;this._dnd.dragObj.parentNode.childNodes.length;m++){if(this._dnd.dragObj.parentNode.childNodes[m]==this._dnd.dragObj){a=m}}this._dnd.dragObj=null;this._dnd.tr_waiting=false;this._updateCellsMargin();if(h!=a){this.setSizes();this.callEvent(&quot;onDrop&quot;,[u,h,a])}};this._dndAnim=function(n,a,m,l){if(this.kZ.tr.Nq!=false){if(!n._dnd_ev){n._dnd_ev=true;n._dnd_tr_prop=this.kZ.tr.Nq;n.addEventListener(this.kZ.tr.ev,this._dndOnTrEnd,false)}if(this._dnd.tr_items[n._accId]!=true){this._dnd.tr_items[n._accId]=true;this._dnd.tr_count++}n.style[this.kZ.tr.Nq]=this.kZ.tr.dnd_top;n.style.top=l+&quot;px&quot;;return}var h=false;if(a){m+=5;if(m&gt;=l){m=l;h=true}}else{m-=5;if(m&lt;=l){m=l;h=true}}n.style.top=m+&quot;px&quot;;if(n._tm){window.clearTimeout(n._tm)}if(!h){n._tm=window.setTimeout(function(){g._dndAnim(n,a,m,l)},5)}else{n._tm=null}};this._dndOnTrEnd=function(a){if(a.stopPropagation){a.stopPropagation()}if(a.propertyName==&quot;top&quot;){if(g._dnd.tr_items[this._accId]==true){g._dnd.tr_count--;g._dnd.tr_items[this._accId]=false}this.style[this._dnd_tr_prop]=&quot;&quot;;if(g._dnd.tr_count==0&amp;&amp;g._dnd.tr_waiting==true){g._dndDragStop(null,true)}}};this._dndOnMouseMove=function(a){g._dndDoDrag(a||event)};this._dndOnMouseUp=function(a){g._dndDragStop(a||event)};if(window.addEventListener){document.body.addEventListener(&quot;mousemove&quot;,this._dndOnMouseMove,false);document.body.addEventListener(&quot;mouseup&quot;,this._dndOnMouseUp,false)}else{document.body.attachEvent(&quot;onmousemove&quot;,this._dndOnMouseMove,false);document.body.attachEvent(&quot;onmouseup&quot;,this._dndOnMouseUp,false)}this._dndClearCell=function(a){if(this.t[a].cell.cell._dnd_ev){this.t[a].cell.cell.addEventListener(this.kZ.tr.ev,this._dndOnTrEnd,false)}this._dndDetachEvent(a)};this._unloadDND=function(){if(typeof(window.addEventListener)==&quot;function&quot;){document.body.removeEventListener(&quot;mousemove&quot;,this._dndOnMouseMove,false);document.body.removeEventListener(&quot;mouseup&quot;,this._dndOnMouseUp,false)}else{document.body.detachEvent(&quot;onmousemove&quot;,this._dndOnMouseMove,false);document.body.detachEvent(&quot;onmouseup&quot;,this._dndOnMouseUp,false)}for(var h in this){if(String(h).indexOf(&quot;_dnd&quot;)==0&amp;&amp;typeof(this[h])==&quot;function&quot;){this[h]=null}}this._dnd=null;g=null};for(var c in this.t){this._dndAttachEvent(c)}};function dhtmlXLayoutObject(g,o,w){var u=null;if(g!=null&amp;&amp;typeof(g)==&quot;object&quot;&amp;&amp;typeof(g.tagName)==&quot;undefined&quot;&amp;&amp;g._isCell!=true){u={};if(g.autosize!=null){u.autosize=g.autosize}if(g.cells!=null){u.cells=g.cells}if(g.aiw!=null){o=g.aiw}if(g.skin!=null){w=g.skin}if(g.offsets!=null){u.offsets=g.offsets}g=g.parent}if(g==document.body){this.base=g}else{if(typeof(g)==&quot;string&quot;){this.base=document.getElementById(g)}else{if(g._isCell==true){var m=g.attachLayout({aiw:o,skin:w});return m}this.base=g}}if(this.base!=document.body){while(this.base.childNodes.length&gt;0){this.base.removeChild(this.base.lastChild)}}this.cdata={};this.kZ={skin:(w||window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhxlayout&quot;)||&quot;dhx_skyblue&quot;),hh:20,progress:false,autosize:&quot;b&quot;,nextCell:{a:&quot;b&quot;,b:&quot;a&quot;},ofs:{t:0,b:0,l:0,r:0},ofs_nodes:{t:{},b:{}},inited:false,b_size:{w: -1,h: -1}};this.kZ.sw=this._detectSW();if(true||this.base._isParentCell!==true){this.base.className+=&quot; dhxlayout_base_&quot;+this.kZ.skin}if(this.base==document.body){var h={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8}};this.kZ.ofs=(h[this.kZ.skin]!=null?h[this.kZ.skin]:h.dhx_skyblue)}if(u!=null&amp;&amp;u.offsets!=null){this.setOffsets(u.offsets)}else{if(this.base._ofs!=null){this.setOffsets(this.base._ofs);this.base._ofs=null;delete this.base._ofs}}this.dataNodes={};var n=this;this._getLayout=function(){return this};this.mainInst=(g._layoutMainInst!=null?g._layoutMainInst:null);this._getMainInst=function(){if(this.mainInst!=null){return this.mainInst._getMainInst()}return this};this.ahY=function(A){var y=(typeof(A)==&quot;string&quot;?this.tplData[A]:A);this.kZ.mode=y.mode;if(this.kZ.mode==&quot;c&quot;){this.cdata.a=new dhtmlXLayoutCell(&quot;a&quot;,this)}else{this.cdata.a=new dhtmlXLayoutCell(&quot;a&quot;,this);this.cdata.b=new dhtmlXLayoutCell(&quot;b&quot;,this)}for(var x in this.cdata){this.base.appendChild(this.cdata[x].cell);this.cdata[x].kZ.init={w:0.5,h:0.5}}if(this.kZ.mode!=&quot;c&quot;){var q=this._getMainInst();if(q.kZ.sep_idx==null){q.kZ.sep_idx=1}else{q.kZ.sep_idx++}this.sep=new dhtmlXLayoutSepObject(this.kZ.mode,q.kZ.sep_idx);this.base.appendChild(this.sep.sep);this.sep._getLayout=function(){return n._getLayout()};q=null}if(y.cells!=null){for(var x in y.cells){if(y.cells[x].width!=null){this.cdata[x].kZ.init.w=y.cells[x].width}if(y.cells[x].height!=null){this.cdata[x].kZ.init.h=y.cells[x].height}if(y.cells[x].name!=null){this.cdata[x].kZ.name=y.cells[x].name;this.cdata[x].setText(y.cells[x].name)}if(y.cells[x].fsize!=null){this.cdata[x].kZ.fsize=y.cells[x].fsize}}}this.setSizes();for(var x in this.cdata){this.cdata[x].kZ.init={}}if(y.cells!=null){for(var x in y.cells){if(y.cells[x].layout!=null){this.cdata[x].dataNested=true;this.cdata[x]._layoutMainInst=this;this.cdata[x].attachLayout({aiw:y.cells[x].layout});this.cdata[x]._layoutMainInst=null}}}};this.setSizes=function(N,C,M,E){var q=(this.kZ.inited==true&amp;&amp;this._getMainInst()==this&amp;&amp;this.mR(&quot;onResizeFinish&quot;)==true?{}:false);var S=this.kZ.ofs.t;for(var U in this.kZ.ofs_nodes.t){S+=(this.kZ.ofs_nodes.t[U]==true?this.dataNodes[U].offsetHeight:0)}var A=this.kZ.ofs.b;for(var U in this.kZ.ofs_nodes.b){A+=(this.kZ.ofs_nodes.b[U]==true?this.dataNodes[U].offsetHeight:0)}var K=this.kZ.ofs.l;var J=this.kZ.ofs.r;var x=this.base.offsetWidth;var D=this.base.offsetHeight;if(this.kZ.mode==&quot;c&quot;){var H=J;var F=S;var I=x-K-J;var Q=D-S-A;this.cdata.a._setSize(H,F,I,Q,N,M,E);this.callEvent(&quot;_onSetSizes&quot;,[]);return}if(typeof(C)==&quot;undefined&quot;){var L=(this.kZ.mode==&quot;v&quot;?&quot;w&quot;:&quot;h&quot;);C=this.kZ.autosize;if(this.cdata.a.kZ.collapsed){C=&quot;b&quot;}else{if(this.cdata.b.kZ.collapsed){C=&quot;a&quot;}else{if(N==&quot;a&quot;||N==&quot;b&quot;){C=this.kZ.nextCell[N]}}}}else{}if(this.kZ.mode==&quot;v&quot;){if(C==&quot;a&quot;){if(this.cdata.b.kZ.init.w!=null){var T=Math.round(x*this.cdata.b.kZ.init.w-this.kZ.sw/2)-J}else{var T=this.cdata.b.kZ.size.w}var P=x-T-J;var O=S;var y=D-S-A;var H=K;var F=O;var I=P-H-this.kZ.sw;var Q=y}else{var H=K;var F=S;if(this.cdata.a.kZ.init.w!=null){var I=Math.round(x*this.cdata.a.kZ.init.w-this.kZ.sw/2)-H}else{var I=this.cdata.a.kZ.size.w}var Q=D-F-A;var P=H+I+this.kZ.sw;var O=F;var T=x-P-J;var y=Q}this.cdata.a._setSize(H,F,I,Q,N,M,E);this.cdata.b._setSize(P,O,T,y,N,M,E);this.sep._setSize(H+I,F,this.kZ.sw,Q)}else{if(C==&quot;a&quot;){if(this.cdata.b.kZ.init.h!=null){var y=Math.round((D-S)*this.cdata.b.kZ.init.h-this.kZ.sw/2)}else{var y=this.cdata.b.kZ.size.h}var P=K;var O=D-A-y;var T=x-P-J;var H=P;var F=S;var I=T;var Q=O-F-this.kZ.sw}else{var H=K;var F=S;var I=x-H-J;if(this.cdata.a.kZ.init.h!=null){var Q=Math.round((D-S)*this.cdata.a.kZ.init.h-this.kZ.sw/2)}else{var Q=this.cdata.a.kZ.size.h}var P=H;var O=F+Q+this.kZ.sw;var T=I;var y=D-O-A}this.cdata.a._setSize(H,F,I,Q,N,M,E);this.cdata.b._setSize(P,O,T,y,N,M,E);this.sep._setSize(H,F+Q,I,this.kZ.sw)}this.callEvent(&quot;_onSetSizes&quot;,[]);if(q&amp;&amp;(!(this.kZ.b_size.w==x&amp;&amp;this.kZ.b_size.h==D))){this._callMainEvent(&quot;onResizeFinish&quot;,[])}this.kZ.b_size={w:x,h:D}};this._getAvailWidth=function(){var A=[];for(var E=0;E&lt;this.kZ.as_cells.h.length;E++){var x=this.cells(this.kZ.as_cells.h[E]);var C=x.layout;var y=C.kZ.autosize;if(x.kZ.collapsed){x=C.cdata[C.kZ.nextCell[x._idd]];y=C.kZ.nextCell[y]}A.push(Math.max(0,x.getWidth()-x._getMinWidth(y)));C=x=null}var D=(A.length&gt;0?Math.min.apply(window,A):0);return this.base.offsetWidth-D};this._getAvailHeight=function(){var C=[];for(var E=0;E&lt;this.kZ.as_cells.v.length;E++){var x=this.cells(this.kZ.as_cells.v[E]);var A=x.layout;var y=A.kZ.autosize;if(x.kZ.collapsed){x=A.cdata[A.kZ.nextCell[x._idd]];y=A.kZ.nextCell[y]}C.push(Math.max(0,x.getHeight()-x._getHdrHeight()-x._getMinHeight(y)));A=x=null}var D=Math.min.apply(window,C);return this.base.offsetHeight-D};this.setSkin=function(a){this.base.className=this.base.className.replace(new RegExp(&quot;dhxlayout_dhx_&quot;+this.kZ.skin,&quot;gi&quot;),&quot;dhxlayout_dhx_&quot;+a);this.kZ.skin=a};this.unload=function(){this.kZ.unloading=true;this.mainInst=null;this._mtbUnload();this.gz();this.iS();window.dhx4._eventable(this,&quot;clear&quot;);var y=new RegExp(&quot;s{0,}dhxlayout_base_&quot;+this.kZ.skin,&quot;gi&quot;);this.base.className=this.base.className.replace(y,&quot;&quot;);if(this.items!=null){for(var A=0;A&lt;this.items.length;A++){this.items[A]=null}this.items=null}if(this.kZ.fs_mode==true){if(window.addEventListener){window.removeEventListener(&quot;resize&quot;,this._doOnResizeStart,false)}else{window.detachEvent(&quot;onresize&quot;,this._doOnResizeStart)}}if(this.dhxWins!=null){this.dhxWins.unload();this.dhxWins=null}if(this.sep!=null){this.sep._unload();this.sep=null}for(var x in this.cdata){this.cdata[x]._unload()}this.base=null;for(var x in this){this[x]=null}n=null};this._getWindowMinDimension=function(y){var a=n._getAvailWidth()+7+7;var x=n._getAvailHeight()+7+31;var q={w:Math.max(a,200),h:Math.max(x,140)};y=null;return q};if(this.base==document.body){this.kZ.fs_mode=true;this._tmTime=null;this._doOnResizeStart=function(){window.clearTimeout(n._tmTime);n._tmTime=window.setTimeout(n._doOnResizeEnd,200)};this._doOnResizeEnd=function(){n.setSizes()};if(window.addEventListener){window.addEventListener(&quot;resize&quot;,this._doOnResizeStart,false)}else{window.attachEvent(&quot;onresize&quot;,this._doOnResizeStart)}}window.dhx4._eventable(this);this._callMainEvent=function(q,a){return this.callEvent(q,a)};this.ahY(o||&quot;3E&quot;);var r=this._availAutoSize[o];if(r!=null){this.kZ.aiw=o;this.setAutoSize(r.h[r.h.length-1],r.v[r.v.length-1])}if(typeof(window.dhtmlXWindows)==&quot;function&quot;){this.dhxWins=new dhtmlXWindows();this.dhxWins.setSkin(this.kZ.skin)}this.kZ.inited=true;if(this==this._getMainInst()){var s=0;this.items=[];this.forEachItem(function(a){n.items.push(a);a.kZ.index=s++})}if(this==this._getMainInst()&amp;&amp;u!=null){if(u.autosize!=null){this.setAutoSize.apply(this,u.autosize)}if(u.cells!=null){for(var c=0;c&lt;u.cells.length;c++){var l=u.cells[c];var v=this.cells(l.id);if(l.width){v.setWidth(l.width)}if(l.height){v.setHeight(l.height)}if(l.text){v.setText(l.text)}if(l.collapsed_text){v.setCollapsedText(l.collapsed_text)}if(l.collapse){v.collapse()}if(l.fix_size){v.fixSize(l.fix_size[0],l.fix_size[1])}if(typeof(l.header)!=&quot;undefined&quot;&amp;&amp;window.dhx4.s2b(l.header)==false){v.hideHeader()}}}}u=null;return this}dhtmlXLayoutObject.prototype.cells=function(h){for(var c in this.cdata){if(this.cdata[c].kZ.name==h){return this.cdata[c]}if(this.cdata[c].dataType==&quot;layout&quot;&amp;&amp;this.cdata[c].dataNested==true&amp;&amp;this.cdata[c].dataObj!=null){var g=this.cdata[c].dataObj.cells(h);if(g!=null){return g}}}return null};dhtmlXLayoutObject.prototype.forEachItem=function(h,g){if(typeof(h)!=&quot;function&quot;){return}if(typeof(g)==&quot;undefined&quot;){g=this}for(var c in this.cdata){if(typeof(this.cdata[c].kZ.name)!=&quot;undefined&quot;){h.apply(g,[this.cdata[c]])}if(this.cdata[c].dataType==&quot;layout&quot;&amp;&amp;this.cdata[c].dataNested==true&amp;&amp;this.cdata[c].dataObj!=null){this.cdata[c].dataObj.forEachItem(h,g)}}g=null};dhtmlXLayoutObject.prototype._forEachSep=function(h,g){if(typeof(h)!=&quot;function&quot;){return}if(typeof(g)==&quot;undefined&quot;){g=this}if(this.sep!=null){h.apply(g,[this.sep])}for(var c in this.cdata){if(this.cdata[c].dataType==&quot;layout&quot;&amp;&amp;this.cdata[c].dataNested==true&amp;&amp;this.cdata[c].dataObj!=null){this.cdata[c].dataObj._forEachSep(h,g)}}g=null};dhtmlXLayoutObject.prototype.setOffsets=function(l){var h=false;for(var c in l){var g=c.charAt(0);if(typeof(this.kZ.ofs[g])!=&quot;undefined&quot;&amp;&amp; !isNaN(l[c])){this.kZ.ofs[g]=parseInt(l[c]);h=true}}if(typeof(this.setSizes)==&quot;function&quot;&amp;&amp;h==true){this.setSizes()}};dhtmlXLayoutObject.prototype._detectSW=function(){if(dhtmlXLayoutObject.prototype._confGlob.sw==null){dhtmlXLayoutObject.prototype._confGlob.sw={}}if(dhtmlXLayoutObject.prototype._confGlob.sw[this.kZ.skin]==null){var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhxlayout_sep_sw_&quot;+this.kZ.skin;if(document.body.firstChild!=null){document.body.insertBefore(a,document.body.firstChild)}else{document.body.appendChild(a)}dhtmlXLayoutObject.prototype._confGlob.sw[this.kZ.skin]=a.offsetWidth;document.body.removeChild(a);a=null}return dhtmlXLayoutObject.prototype._confGlob.sw[this.kZ.skin]};dhtmlXLayoutObject.prototype._confGlob={};dhtmlXLayoutObject.prototype.attachHeader=function(c,a){if(this.dataNodes.haObj!=null){return}if(typeof(c)!=&quot;object&quot;){c=document.getElementById(c)}this.dataNodes.haObj=document.createElement(&quot;DIV&quot;);this.dataNodes.haObj.className=&quot;dhxlayout_hdr_attached&quot;;this.dataNodes.haObj.style.height=(a||c.offsetHeight)+&quot;px&quot;;this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cdata.a.cell);this.dataNodes.haObj.appendChild(c);c.style.visibility=&quot;visible&quot;;c=null;this.dataNodes.haEv=this.attachEvent(&quot;_onSetSizes&quot;,function(){this.dataNodes.haObj.style.left=this.kZ.ofs.l+&quot;px&quot;;this.dataNodes.haObj.style.marginTop=this.kZ.ofs.t+&quot;px&quot;;this.dataNodes.haObj.style.width=this.base.offsetWidth-this.kZ.ofs.l-this.kZ.ofs.r+&quot;px&quot;});this.kZ.ofs_nodes.t.haObj=true;this.setSizes()};dhtmlXLayoutObject.prototype.gz=function(){if(!this.dataNodes.haObj){return}while(this.dataNodes.haObj.childNodes.length&gt;0){this.dataNodes.haObj.lastChild.style.visibility=&quot;hidden&quot;;document.body.appendChild(this.dataNodes.haObj.lastChild)}this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.kZ.ofs_nodes.t.haObj=false;delete this.dataNodes.haEv;delete this.dataNodes.haObj;if(!this.kZ.unloading){this.setSizes()}};dhtmlXLayoutObject.prototype.attachFooter=function(g,a){if(this.dataNodes.faObj!=null){return}if(typeof(g)!=&quot;object&quot;){g=document.getElementById(g)}this.dataNodes.faObj=document.createElement(&quot;DIV&quot;);this.dataNodes.faObj.className=&quot;dhxlayout_ftr_attached&quot;;this.dataNodes.faObj.style.height=(a||g.offsetHeight)+&quot;px&quot;;var c=(this.sbObj||this.sep.sep);if(this.base.lastChild==c){this.base.appendChild(this.dataNodes.faObj)}else{this.base.insertBefore(this.dataNodes.faObj,c.nextSibling)}this.dataNodes.faEv=this.attachEvent(&quot;_onSetSizes&quot;,function(){this.dataNodes.faObj.style.left=this.kZ.ofs.l+&quot;px&quot;;this.dataNodes.faObj.style.bottom=this.kZ.ofs.t+&quot;px&quot;;this.dataNodes.faObj.style.width=this.base.offsetWidth-this.kZ.ofs.l-this.kZ.ofs.r+&quot;px&quot;});this.dataNodes.faObj.appendChild(g);g.style.visibility=&quot;visible&quot;;c=g=null;this.kZ.ofs_nodes.b.faObj=true;this.setSizes()};dhtmlXLayoutObject.prototype.iS=function(){if(!this.dataNodes.faObj){return}while(this.dataNodes.faObj.childNodes.length&gt;0){this.dataNodes.faObj.lastChild.style.visibility=&quot;hidden&quot;;document.body.appendChild(this.dataNodes.faObj.lastChild)}this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.kZ.ofs_nodes.b.faObj=false;delete this.dataNodes.faEv;delete this.dataNodes.faObj;if(!this.kZ.unloading){this.setSizes()}};dhtmlXLayoutObject.prototype.attachMenu=function(a){if(this.dataNodes.menu!=null){return}this.dataNodes.menuObj=document.createElement(&quot;DIV&quot;);this.dataNodes.menuObj.className=&quot;dhxlayout_menu&quot;;this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cdata.a.cell);if(typeof(a)!=&quot;object&quot;||a==null){a={}}a.skin=this.kZ.skin;a.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(a);this.dataNodes.menuEv=this.attachEvent(&quot;_onSetSizes&quot;,function(){if(this.dataNodes.menuObj.style.display==&quot;none&quot;){return}this.dataNodes.menuObj.style.left=this.kZ.ofs.l+&quot;px&quot;;this.dataNodes.menuObj.style.marginTop=(this.dataNodes.haObj!=null?0:this.kZ.ofs.t)+&quot;px&quot;;this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.kZ.ofs.l-this.kZ.ofs.r+&quot;px&quot;});this.kZ.ofs_nodes.t.menuObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.menu};dhtmlXLayoutObject.prototype.detachMenu=function(){if(this.dataNodes.menu==null){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj);this.dataNodes.menuObj=null;this.detachEvent(this.dataNodes.menuEv);this.dataNodes.menuEv=null;delete this.dataNodes.menu;delete this.dataNodes.menuObj;delete this.dataNodes.menuEv;this.kZ.ofs_nodes.t.menuObj=false;if(!this.kZ.unloading){this.setSizes()}};dhtmlXLayoutObject.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&amp;&amp;this.dataNodes.toolbar==null)){return}this.dataNodes.toolbarObj=document.createElement(&quot;DIV&quot;);this.dataNodes.toolbarObj.className=&quot;dhxlayout_toolbar&quot;;this.base.insertBefore(this.dataNodes.toolbarObj,this.cdata.a.cell);this.dataNodes.toolbarObj.appendChild(document.createElement(&quot;DIV&quot;));if(typeof(a)!=&quot;object&quot;||a==null){a={}}a.skin=this.kZ.skin;a.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this.dataNodes.toolbarEv=this.attachEvent(&quot;_onSetSizes&quot;,function(){if(this.dataNodes.toolbarObj.style.display==&quot;none&quot;){return}this.dataNodes.toolbarObj.style.left=this.kZ.ofs.l+&quot;px&quot;;this.dataNodes.toolbarObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.kZ.ofs.t)+&quot;px&quot;;this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.kZ.ofs.l-this.kZ.ofs.r+&quot;px&quot;});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent(&quot;_onIconSizeChange&quot;,function(){this._masterCell.setSizes()});this.kZ.ofs_nodes.t.toolbarObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.toolbar};dhtmlXLayoutObject.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj);this.dataNodes.toolbarObj=null;this.detachEvent(this.dataNodes.toolbarEv);this.dataNodes.toolbarEv=null;this.kZ.ofs_nodes.t.toolbarObj=false;delete this.dataNodes.toolbar;delete this.dataNodes.toolbarObj;delete this.dataNodes.toolbarEv;if(!this.kZ.unloading){this.setSizes()}};dhtmlXLayoutObject.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&amp;&amp;this.dataNodes.toolbar==null)){return}this.dataNodes.ribbonObj=document.createElement(&quot;DIV&quot;);this.dataNodes.ribbonObj.className=&quot;dhxlayout_ribbon&quot;;this.base.insertBefore(this.dataNodes.ribbonObj,this.cdata.a.cell);this.dataNodes.ribbonObj.appendChild(document.createElement(&quot;DIV&quot;));if(typeof(a)!=&quot;object&quot;||a==null){a={}}a.skin=this.kZ.skin;a.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);this.dataNodes.ribbonEv=this.attachEvent(&quot;_onSetSizes&quot;,function(){if(this.dataNodes.ribbonObj.style.display==&quot;none&quot;){return}this.dataNodes.ribbonObj.style.left=this.kZ.ofs.l+&quot;px&quot;;this.dataNodes.ribbonObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.kZ.ofs.t)+&quot;px&quot;;this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.kZ.ofs.l-this.kZ.ofs.r+&quot;px&quot;;this.dataNodes.ribbon.setSizes()});this.kZ.ofs_nodes.t.ribbonObj=true;var c=this;this.dataNodes.ribbon.attachEvent(&quot;_onHeightChanged&quot;,function(){c.setSizes()});this.setSizes();a.parnt=null;a=null;return this.dataNodes.ribbon};dhtmlXLayoutObject.prototype.detachRibbon=function(){if(this.dataNodes.ribbon==null){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj);this.dataNodes.ribbonObj=null;this.detachEvent(this.dataNodes.ribbonEv);this.dataNodes.ribbonEv=null;this.kZ.ofs_nodes.t.ribbonObj=false;delete this.dataNodes.ribbon;delete this.dataNodes.ribbonObj;delete this.dataNodes.ribbonEv;if(!this.kZ.unloading){this.setSizes()}};dhtmlXLayoutObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sbObj){return}if(typeof(a)==&quot;undefined&quot;){a={}}this.dataNodes.sbObj=document.createElement(&quot;DIV&quot;);this.dataNodes.sbObj.className=&quot;dhxlayout_statusbar&quot;;if(this.dataNodes.faObj!=null){this.base.insertBefore(this.dataNodes.sbObj,this.dataNodes.faObj)}else{if(this.sep==null||this.base.lastChild==this.sep.sep){this.base.appendChild(this.dataNodes.sbObj)}else{this.base.insertBefore(this.dataNodes.sbObj,this.sep.sep.nextSibling)}}this.dataNodes.sbObj.innerHTML=&quot;<DIV class="dhxcont_statusbar">&quot;+(typeof(a.text)==&quot;string&quot;&amp;&amp;a.text.length&gt;0?a.text:&quot; &quot;)+&quot;</DIV>&quot;;if(typeof(a.height)==&quot;number&quot;){this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+&quot;px&quot;}this.dataNodes.sbObj.setText=function(c){this.childNodes[0].innerHTML=c};this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sbObj.onselectstart=function(c){return false};this.dataNodes.sbEv=this.attachEvent(&quot;_onSetSizes&quot;,function(){if(this.dataNodes.sbObj.style.display==&quot;none&quot;){return}this.dataNodes.sbObj.style.left=this.kZ.ofs.l+&quot;px&quot;;this.dataNodes.sbObj.style.bottom=(this.dataNodes.faObj!=null?this.dataNodes.faObj.offsetHeight:0)+this.kZ.ofs.t+&quot;px&quot;;this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.kZ.ofs.l-this.kZ.ofs.r+&quot;px&quot;});this.kZ.ofs_nodes.b.sbObj=true;this.setSizes();return this.dataNodes.sbObj};dhtmlXLayoutObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sbObj){return}this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null;this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj);this.dataNodes.sbObj=null;this.detachEvent(this.dataNodes.sbEv);this.dataNodes.sbEv=null;this.kZ.ofs_nodes.b.sbObj=false;delete this.dataNodes.sb;delete this.dataNodes.sbObj;delete this.dataNodes.sbEv;if(!this.kZ.unloading){this.setSizes()}};dhtmlXLayoutObject.prototype.showMenu=function(){this._mtbShowHide(&quot;menuObj&quot;,&quot;&quot;)};dhtmlXLayoutObject.prototype.hideMenu=function(){this._mtbShowHide(&quot;menuObj&quot;,&quot;none&quot;)};dhtmlXLayoutObject.prototype.showToolbar=function(){this._mtbShowHide(&quot;toolbarObj&quot;,&quot;&quot;)};dhtmlXLayoutObject.prototype.hideToolbar=function(){this._mtbShowHide(&quot;toolbarObj&quot;,&quot;none&quot;)};dhtmlXLayoutObject.prototype.showRibbon=function(){this._mtbShowHide(&quot;ribbonObj&quot;,&quot;&quot;)};dhtmlXLayoutObject.prototype.hideRibbon=function(){this._mtbShowHide(&quot;ribbonObj&quot;,&quot;none&quot;)};dhtmlXLayoutObject.prototype.showStatusBar=function(){this._mtbShowHide(&quot;sbObj&quot;,&quot;&quot;)};dhtmlXLayoutObject.prototype.hideStatusBar=function(){this._mtbShowHide(&quot;sbObj&quot;,&quot;none&quot;)};dhtmlXLayoutObject.prototype._mtbShowHide=function(c,a){if(this.dataNodes[c]==null){return}this.dataNodes[c].style.display=a;this.setSizes()};dhtmlXLayoutObject.prototype._mtbUnload=function(c,a){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXLayoutObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXLayoutObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXLayoutObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXLayoutObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXLayoutObject.prototype.progressOn=function(){if(this.kZ.progress){return}this.kZ.progress=true;var c=document.createElement(&quot;DIV&quot;);c.className=&quot;dhxlayout_progress&quot;;this.base.appendChild(c);var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhxlayout_progress_img&quot;;this.base.appendChild(a);c=a=null};dhtmlXLayoutObject.prototype.progressOff=function(){if(!this.kZ.progress){return}this.base.removeChild(this.base.lastChild);this.base.removeChild(this.base.lastChild);this.kZ.progress=false};dhtmlXLayoutObject.prototype.listPatterns=function(){var g=[];for(var c in this.tplData){g.push(c)}return g};dhtmlXLayoutObject.prototype.listAutoSizes=function(){var h=(this.kZ.as_cells!=null?(this.kZ.as_cells.h).join(&quot;;&quot;):&quot;&quot;);var g=(this.kZ.as_cells!=null?(this.kZ.as_cells.v).join(&quot;;&quot;):&quot;&quot;);var c=this._availAutoSize[this.kZ.aiw].h;var a=this._availAutoSize[this.kZ.aiw].v;return[h,g,c,a]};dhtmlXLayoutObject.prototype._getCellsNames=function(h){var l={};if(this.cdata[h].kZ.name!=null){l[this.cdata[h].kZ.name]=true}if(this.cdata[h].dataType==&quot;layout&quot;&amp;&amp;this.cdata[h].dataObj!=null&amp;&amp;this.cdata[h].dataObj.mainInst==this){var c=this.cdata[h].dataObj._getCellsNames(&quot;a&quot;);var m=this.cdata[h].dataObj._getCellsNames(&quot;b&quot;);for(var g in c){l[g]=c[g]}for(var g in m){l[g]=m[g]}}return l};dhtmlXLayoutObject.prototype.setAutoSize=function(c,r,u){if(u!==true){var w=this.listAutoSizes();if(w[0]==c&amp;&amp;w[1]==r){return}var o=false;var n=false;for(var g=0;g&lt;w[2].length;g++){o=o||w[2][g]==c}for(var g=0;g&lt;w[3].length;g++){n=n||w[3][g]==r}if(!o|| !n){return}}this.kZ.as_cells={h:c.split(&quot;;&quot;),v:r.split(&quot;;&quot;)};var h=(this.kZ.mode==&quot;v&quot;?&quot;h&quot;:&quot;v&quot;);for(var v in this.cdata){var l=this._getCellsNames(v);var x=false;for(var g=0;g&lt;this.kZ.as_cells[h].length;g++){x=x||l[this.kZ.as_cells[h][g]]}if(x){this.kZ.autosize=v}if(this.cdata[v].dataType==&quot;layout&quot;&amp;&amp;this.cdata[v].dataObj!=null){this.cdata[v].dataObj.setAutoSize(c,r,true)}}};dhtmlXLayoutObject.prototype.tplData={&quot;1C&quot;:{mode:&quot;c&quot;,cells:{a:{name:&quot;a&quot;}}},&quot;2E&quot;:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,fsize:{v:1}},b:{name:&quot;b&quot;,fsize:{v:1}}}},&quot;2U&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,fsize:{h:1}},b:{name:&quot;b&quot;,fsize:{h:1}}}},&quot;3E&quot;:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/3,fsize:{v:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,fsize:{v:[1,2]}},b:{name:&quot;c&quot;,fsize:{v:2}}}}}}},&quot;3W&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,width:1/3,fsize:{h:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:[1,2]}},b:{name:&quot;c&quot;,fsize:{h:2}}}}}}},&quot;3J&quot;:{mode:&quot;v&quot;,cells:{a:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,fsize:{h:1,v:2}},b:{name:&quot;c&quot;,fsize:{h:1,v:2}}}}},b:{name:&quot;b&quot;,fsize:{h:1}}}},&quot;3L&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,fsize:{h:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:1,v:2}},b:{name:&quot;c&quot;,fsize:{h:1,v:2}}}}}}},&quot;3T&quot;:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,fsize:{v:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:2,v:1}},b:{name:&quot;c&quot;,fsize:{h:2,v:1}}}}}}},&quot;3U&quot;:{mode:&quot;h&quot;,cells:{a:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,fsize:{h:2,v:1}},b:{name:&quot;b&quot;,fsize:{h:2,v:1}}}}},b:{name:&quot;c&quot;,fsize:{v:1}}}},&quot;4H&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,width:1/3,fsize:{h:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:[1,2],v:3}},b:{name:&quot;c&quot;,fsize:{h:[1,2],v:3}}}}},b:{name:&quot;d&quot;,fsize:{h:2}}}}}}},&quot;4I&quot;:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/3,fsize:{v:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:3,v:[1,2]}},b:{name:&quot;c&quot;,fsize:{h:3,v:[1,2]}}}}},b:{name:&quot;d&quot;,fsize:{v:2}}}}}}},&quot;4T&quot;:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,fsize:{v:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;c&quot;,fsize:{h:[2,3],v:1}},b:{name:&quot;d&quot;,fsize:{h:3,v:1}}}}}}}}}},&quot;4U&quot;:{mode:&quot;h&quot;,cells:{a:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:[2,3],v:1}},b:{name:&quot;c&quot;,fsize:{h:3,v:1}}}}}}}},b:{name:&quot;d&quot;,fsize:{v:1}}}},&quot;4E&quot;:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/4,fsize:{v:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,height:1/3,fsize:{v:[1,2]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,fsize:{v:[2,3]}},b:{name:&quot;d&quot;,fsize:{v:3}}}}}}}}}},&quot;4W&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,width:1/4,fsize:{h:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,width:1/3,fsize:{h:[1,2]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;c&quot;,fsize:{h:[2,3]}},b:{name:&quot;d&quot;,fsize:{h:3}}}}}}}}}},&quot;4A&quot;:{mode:&quot;v&quot;,cells:{a:{width:1/3,layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,fsize:{h:1,v:2}},b:{name:&quot;b&quot;,fsize:{h:1,v:2}}}}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;c&quot;,fsize:{h:[1,3]}},b:{name:&quot;d&quot;,fsize:{h:3}}}}}}},&quot;4L&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,width:1/3,fsize:{h:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:[1,2]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,fsize:{h:2,v:3}},b:{name:&quot;d&quot;,fsize:{h:2,v:3}}}}}}}}}},&quot;4J&quot;:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/3,fsize:{v:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,fsize:{v:[1,2]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;c&quot;,fsize:{h:3,v:2}},b:{name:&quot;d&quot;,fsize:{h:3,v:2}}}}}}}}}},&quot;4F&quot;:{mode:&quot;h&quot;,cells:{a:{height:1/3,layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,fsize:{h:2,v:1}},b:{name:&quot;b&quot;,fsize:{h:2,v:1}}}}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,fsize:{v:[1,3]}},b:{name:&quot;d&quot;,fsize:{v:3}}}}}}},&quot;4G&quot;:{mode:&quot;v&quot;,cells:{a:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:1,v:[2,3]}},b:{name:&quot;c&quot;,fsize:{h:1,v:3}}}}}}}},b:{name:&quot;d&quot;,fsize:{h:1}}}},&quot;4C&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,fsize:{h:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,fsize:{h:1,v:[2,3]}},b:{name:&quot;d&quot;,fsize:{h:1,v:3}}}}}}}}}},&quot;5H&quot;:{mode:&quot;v&quot;,cells:{a:{width:1/3,name:&quot;a&quot;,fsize:{h:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,height:1/3,fsize:{h:[1,2],v:3}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,fsize:{h:[1,2],v:[3,4]}},b:{name:&quot;d&quot;,fsize:{h:[1,2],v:4}}}}}}}},b:{name:&quot;e&quot;,fsize:{h:2}}}}}}},&quot;5I&quot;:{mode:&quot;h&quot;,cells:{a:{height:1/3,name:&quot;a&quot;,fsize:{v:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,width:1/3,fsize:{h:3,v:[1,2]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;c&quot;,fsize:{h:[3,4],v:[1,2]}},b:{name:&quot;d&quot;,fsize:{h:4,v:[1,2]}}}}}}}},b:{name:&quot;e&quot;,fsize:{v:2}}}}}}},&quot;5U&quot;:{mode:&quot;h&quot;,cells:{a:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,width:1/4,fsize:{h:2,v:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,width:1/3,fsize:{h:[2,3],v:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;c&quot;,fsize:{h:[3,4],v:1}},b:{name:&quot;d&quot;,fsize:{h:4,v:1}}}}}}}}}}},b:{name:&quot;e&quot;,fsize:{v:1}}}},&quot;5E&quot;:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/5,fsize:{v:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,height:1/4,fsize:{v:[1,2]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,height:1/3,fsize:{v:[2,3]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;d&quot;,fsize:{v:[3,4]}},b:{name:&quot;e&quot;,fsize:{v:4}}}}}}}}}}}}},&quot;5W&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,width:1/5,fsize:{h:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,width:1/4,fsize:{h:[1,2]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;c&quot;,width:1/3,fsize:{h:[2,3]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;d&quot;,fsize:{h:[3,4]}},b:{name:&quot;e&quot;,fsize:{h:4}}}}}}}}}}}}},&quot;5K&quot;:{mode:&quot;v&quot;,cells:{a:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:1,v:[2,3]}},b:{name:&quot;c&quot;,fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;d&quot;,fsize:{h:1,v:4}},b:{name:&quot;e&quot;,fsize:{h:1,v:4}}}}}}},&quot;5S&quot;:{mode:&quot;v&quot;,cells:{a:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,fsize:{h:1,v:2}},b:{name:&quot;b&quot;,fsize:{h:1,v:2}}}}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;d&quot;,fsize:{h:1,v:[3,2]}},b:{name:&quot;e&quot;,fsize:{h:1,v:4}}}}}}}}}},&quot;5G&quot;:{mode:&quot;v&quot;,cells:{a:{width:1/3,layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:1,v:[2,3]}},b:{name:&quot;c&quot;,fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;d&quot;,fsize:{h:[1,4]}},b:{name:&quot;e&quot;,fsize:{h:4}}}}}}},&quot;5C&quot;:{mode:&quot;v&quot;,cells:{a:{width:2/3,layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,fsize:{h:2}},b:{name:&quot;b&quot;,fsize:{h:[2,1]}}}}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;d&quot;,fsize:{h:1,v:[3,4]}},b:{name:&quot;e&quot;,fsize:{h:1,v:4}}}}}}}}}},&quot;6H&quot;:{mode:&quot;v&quot;,cells:{a:{width:1/3,name:&quot;a&quot;,fsize:{h:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,height:1/4,fsize:{h:[1,2],v:3}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,height:1/3,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;d&quot;,fsize:{h:[1,2],v:[4,5]}},b:{name:&quot;e&quot;,fsize:{h:[1,2],v:5}}}}}}}}}}},b:{name:&quot;f&quot;,fsize:{h:2}}}}}}},&quot;6I&quot;:{mode:&quot;h&quot;,cells:{a:{height:1/3,name:&quot;a&quot;,fsize:{v:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,width:1/4,fsize:{h:3,v:[1,2]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;c&quot;,width:1/3,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;d&quot;,fsize:{h:[4,5],v:[1,2]}},b:{name:&quot;e&quot;,fsize:{h:5,v:[1,2]}}}}}}}}}}},b:{name:&quot;f&quot;,fsize:{v:2}}}}}}},&quot;6A&quot;:{mode:&quot;v&quot;,cells:{a:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/5,fsize:{h:1,v:2}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,height:1/4,fsize:{h:1,v:[2,3]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;d&quot;,fsize:{h:1,v:[4,5]}},b:{name:&quot;e&quot;,fsize:{h:1,v:5}}}}}}}}}}}}}},b:{name:&quot;f&quot;,fsize:{h:1}}}},&quot;6C&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,fsize:{h:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,height:1/5,fsize:{h:1,v:2}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,height:1/4,fsize:{h:1,v:[2,3]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;d&quot;,height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;e&quot;,fsize:{h:1,v:[4,5]}},b:{name:&quot;f&quot;,fsize:{h:1,v:5}}}}}}}}}}}}}}}},&quot;6J&quot;:{mode:&quot;v&quot;,cells:{a:{width:1/3,layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/4,fsize:{h:1,v:2}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,height:1/3,fsize:{h:1,v:[2,3]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,fsize:{h:1,v:[3,4]}},b:{name:&quot;d&quot;,fsize:{h:1,v:4}}}}}}}}}}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;e&quot;,fsize:{h:[1,5]}},b:{name:&quot;f&quot;,fsize:{h:5}}}}}}},&quot;6E&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,width:1/3,fsize:{h:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,fsize:{h:[1,2]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,height:1/4,fsize:{h:2,v:3}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;d&quot;,height:1/3,fsize:{h:2,v:[3,4]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;e&quot;,fsize:{h:2,v:[4,5]}},b:{name:&quot;f&quot;,fsize:{h:2,v:5}}}}}}}}}}}}}}}},&quot;6W&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,width:1/6,fsize:{h:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,width:1/5,fsize:{h:[1,2]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;c&quot;,width:1/4,fsize:{h:[2,3]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;d&quot;,width:1/3,fsize:{h:[3,4]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;e&quot;,fsize:{h:[4,5]}},b:{name:&quot;f&quot;,fsize:{h:5}}}}}}}}}}}}}}}},&quot;7H&quot;:{mode:&quot;v&quot;,cells:{a:{name:&quot;a&quot;,width:1/3,fsize:{h:1}},b:{layout:{mode:&quot;v&quot;,cells:{a:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;b&quot;,height:1/5,fsize:{h:[1,2],v:3}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;c&quot;,height:1/4,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;d&quot;,height:1/3,fsize:{h:[1,2],v:[4,5]}},b:{layout:{mode:&quot;h&quot;,cells:{a:{name:&quot;e&quot;,fsize:{h:[1,2],v:[5,6]}},b:{name:&quot;f&quot;,fsize:{h:[1,2],v:6}}}}}}}}}}}}}},b:{name:&quot;g&quot;,fsize:{h:2}}}}}}},&quot;7I&quot;:{mode:&quot;h&quot;,cells:{a:{name:&quot;a&quot;,height:1/3,fsize:{v:1}},b:{layout:{mode:&quot;h&quot;,cells:{a:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;b&quot;,width:1/5,fsize:{h:3,v:[1,2]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;c&quot;,width:1/4,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;d&quot;,width:1/3,fsize:{h:[4,5],v:[1,2]}},b:{layout:{mode:&quot;v&quot;,cells:{a:{name:&quot;e&quot;,fsize:{h:[5,6],v:[1,2]}},b:{name:&quot;f&quot;,fsize:{h:6,v:[1,2]}}}}}}}}}}}}}},b:{name:&quot;g&quot;,fsize:{v:2}}}}}}}};dhtmlXLayoutObject.prototype._availAutoSize={&quot;1C&quot;:{h:[&quot;a&quot;],v:[&quot;a&quot;]},&quot;2E&quot;:{h:[&quot;a;b&quot;],v:[&quot;a&quot;,&quot;b&quot;]},&quot;2U&quot;:{h:[&quot;a&quot;,&quot;b&quot;],v:[&quot;a;b&quot;]},&quot;3E&quot;:{h:[&quot;a;b;c&quot;],v:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]},&quot;3W&quot;:{h:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;],v:[&quot;a;b;c&quot;]},&quot;3J&quot;:{h:[&quot;a;c&quot;,&quot;b&quot;],v:[&quot;a;b&quot;,&quot;b;c&quot;]},&quot;3L&quot;:{h:[&quot;a&quot;,&quot;b;c&quot;],v:[&quot;a;b&quot;,&quot;a;c&quot;]},&quot;3T&quot;:{h:[&quot;a;b&quot;,&quot;a;c&quot;],v:[&quot;a&quot;,&quot;b;c&quot;]},&quot;3U&quot;:{h:[&quot;a;c&quot;,&quot;b;c&quot;],v:[&quot;a;b&quot;,&quot;c&quot;]},&quot;4H&quot;:{h:[&quot;a&quot;,&quot;b;c&quot;,&quot;d&quot;],v:[&quot;a;b;d&quot;,&quot;a;c;d&quot;]},&quot;4I&quot;:{h:[&quot;a;b;d&quot;,&quot;a;c;d&quot;],v:[&quot;a&quot;,&quot;b;c&quot;,&quot;d&quot;]},&quot;4T&quot;:{h:[&quot;a;b&quot;,&quot;a;c&quot;,&quot;a;d&quot;],v:[&quot;a&quot;,&quot;b;c;d&quot;]},&quot;4U&quot;:{h:[&quot;a;d&quot;,&quot;b;d&quot;,&quot;c;d&quot;],v:[&quot;a;b;c&quot;,&quot;d&quot;]},&quot;4E&quot;:{h:[&quot;a;b;c;d&quot;],v:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;]},&quot;4W&quot;:{h:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;],v:[&quot;a;b;c;d&quot;]},&quot;4A&quot;:{h:[&quot;a;b&quot;,&quot;c&quot;,&quot;d&quot;],v:[&quot;a;c;d&quot;,&quot;b;c;d&quot;]},&quot;4L&quot;:{h:[&quot;a&quot;,&quot;b&quot;,&quot;c;d&quot;],v:[&quot;a;b;c&quot;,&quot;a;b;d&quot;]},&quot;4J&quot;:{h:[&quot;a;b;c&quot;,&quot;a;b;d&quot;],v:[&quot;a&quot;,&quot;b&quot;,&quot;c;d&quot;]},&quot;4F&quot;:{h:[&quot;a;c;d&quot;,&quot;b;c;d&quot;],v:[&quot;a;b&quot;,&quot;c&quot;,&quot;d&quot;]},&quot;4G&quot;:{h:[&quot;a;b;c&quot;,&quot;d&quot;],v:[&quot;a;d&quot;,&quot;b;d&quot;,&quot;c;d&quot;]},&quot;4C&quot;:{h:[&quot;a&quot;,&quot;b;c;d&quot;],v:[&quot;a;b&quot;,&quot;a;c&quot;,&quot;a;d&quot;]},&quot;5H&quot;:{h:[&quot;a&quot;,&quot;b;c;d&quot;,&quot;e&quot;],v:[&quot;a;b;e&quot;,&quot;a;c;e&quot;,&quot;a;d;e&quot;]},&quot;5I&quot;:{h:[&quot;a;b;e&quot;,&quot;a;c;e&quot;,&quot;a;d;e&quot;],v:[&quot;a&quot;,&quot;b;c;d&quot;,&quot;e&quot;]},&quot;5U&quot;:{h:[&quot;a;e&quot;,&quot;b;e&quot;,&quot;c;e&quot;,&quot;d;e&quot;],v:[&quot;a;b;c;d&quot;,&quot;e&quot;]},&quot;5E&quot;:{h:[&quot;a;b;c;d;e&quot;],v:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,&quot;e&quot;]},&quot;5W&quot;:{h:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,&quot;e&quot;],v:[&quot;a;b;c;d;e&quot;]},&quot;5K&quot;:{h:[&quot;a;b;c&quot;,&quot;d;e&quot;],v:[&quot;a;d&quot;,&quot;b;d&quot;,&quot;c;d&quot;,&quot;a;e&quot;,&quot;b;e&quot;,&quot;c;e&quot;]},&quot;5S&quot;:{h:[&quot;a;b&quot;,&quot;c;d;e&quot;],v:[&quot;a;c&quot;,&quot;a;d&quot;,&quot;a;e&quot;,&quot;b;c&quot;,&quot;b;d&quot;,&quot;b;e&quot;]},&quot;5G&quot;:{h:[&quot;a;b;c&quot;,&quot;d&quot;,&quot;e&quot;],v:[&quot;a;d;e&quot;,&quot;b;d;e&quot;,&quot;c;d;e&quot;]},&quot;5C&quot;:{h:[&quot;a&quot;,&quot;b&quot;,&quot;c;d;e&quot;],v:[&quot;a;b;c&quot;,&quot;a;b;d&quot;,&quot;a;b;e&quot;]},&quot;6H&quot;:{h:[&quot;a&quot;,&quot;b;c;d;e&quot;,&quot;f&quot;],v:[&quot;a;b;f&quot;,&quot;a;c;f&quot;,&quot;a;d;f&quot;,&quot;a;e;f&quot;]},&quot;6I&quot;:{h:[&quot;a;b;f&quot;,&quot;a;c;f&quot;,&quot;a;d;f&quot;,&quot;a;e;f&quot;],v:[&quot;a&quot;,&quot;b;c;d;e&quot;,&quot;f&quot;]},&quot;6A&quot;:{h:[&quot;a;b;c;d;e&quot;,&quot;f&quot;],v:[&quot;a;f&quot;,&quot;b;f&quot;,&quot;c;f&quot;,&quot;d;f&quot;,&quot;e;f&quot;]},&quot;6C&quot;:{h:[&quot;a&quot;,&quot;b;c;d;e;f&quot;],v:[&quot;a;b&quot;,&quot;a;c&quot;,&quot;a;d&quot;,&quot;a;e&quot;,&quot;a;f&quot;]},&quot;6J&quot;:{h:[&quot;a;b;c;d&quot;,&quot;e&quot;,&quot;f&quot;],v:[&quot;a;e;f&quot;,&quot;b;e;f&quot;,&quot;c;e;f&quot;,&quot;d;e;f&quot;]},&quot;6E&quot;:{h:[&quot;a&quot;,&quot;b&quot;,&quot;c;d;e;f&quot;],v:[&quot;a;b;c&quot;,&quot;a;b;d&quot;,&quot;a;b;e&quot;,&quot;a;b;f&quot;]},&quot;6W&quot;:{h:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,&quot;e&quot;,&quot;f&quot;],v:[&quot;a;b;c;d;e;f&quot;]},&quot;7H&quot;:{h:[&quot;a&quot;,&quot;b;c;d;e;f&quot;,&quot;g&quot;],v:[&quot;a;b;g&quot;,&quot;a;c;g&quot;,&quot;a;d;g&quot;,&quot;a;e;g&quot;,&quot;a;f;g&quot;]},&quot;7I&quot;:{h:[&quot;a;b;g&quot;,&quot;a;c;g&quot;,&quot;a;d;g&quot;,&quot;a;e;g&quot;,&quot;a;f;g&quot;],v:[&quot;a&quot;,&quot;b;c;d;e;f&quot;,&quot;g&quot;]}};function dhtmlXLayoutSepObject(g,a){var c=this;this.kZ={mode:g,idx:a,blocked:false,locked:false};this._isLayoutSep=true;this.sep=document.createElement(&quot;DIV&quot;);this.sep.className=&quot;dhxlayout_sep&quot;;this._btnLeft=(window.dhx4.isIE&amp;&amp; !window.addEventListener?1:0);if(window.dhx4.isIE){this.sep.onselectstart=function(){return false}}this.sep.className=&quot;dhxlayout_sep dhxlayout_sep_resize_&quot;+this.kZ.mode;this._setSize=function(l,o,m,n){this.sep.style.left=l+&quot;px&quot;;this.sep.style.top=o+&quot;px&quot;;this.sep.style.width=m+&quot;px&quot;;this.sep.style.height=n+&quot;px&quot;};this._lockSep=function(h){this.kZ.locked=(h==true);this._blockSep()};this._blockSep=function(){var h=this._getLayout();var l=h.cdata.a.kZ.collapsed||h.cdata.b.kZ.collapsed||this.kZ.locked;h=null;if(this.kZ.blocked==l){return}this.sep.className=&quot;dhxlayout_sep&quot;+(l?&quot;&quot;:&quot; dhxlayout_sep_resize_&quot;+this.kZ.mode);this.kZ.blocked=l};this._beforeResize=function(l){if(this.kZ.blocked){return}if(this.kZ.resize!=null&amp;&amp;this.kZ.resize.active==true){return}if(l.button!==this._btnLeft){return}var h=this._getLayout();this.kZ.resize={sx:l.clientX,sy:l.clientY,tx:l.layerX,ty:l.layerY,sep_x:parseInt(this.sep.style.left),sep_y:parseInt(this.sep.style.top),min_wa:h.cdata.a._getAvailWidth(&quot;a&quot;),min_wb:h.cdata.b._getAvailWidth(&quot;b&quot;),min_ha:h.cdata.a._getAvailHeight(&quot;a&quot;),min_hb:h.cdata.b._getAvailHeight(&quot;b&quot;)};this.kZ.resize.nx=this.kZ.resize.sep_x;this.kZ.resize.ny=this.kZ.resize.sep_y;if(window.addEventListener){document.body.addEventListener(&quot;mousemove&quot;,this._doOnMouseMove,false);document.body.addEventListener(&quot;mouseup&quot;,this._doOnMouseUp,false)}else{document.body.attachEvent(&quot;onmousemove&quot;,this._doOnMouseMove);document.body.attachEvent(&quot;onmouseup&quot;,this._doOnMouseUp)}h=null};this._onResize=function(l){if(!this.kZ.resize.active){this._initResizeArea();this.kZ.resize.active=true}if(this.kZ.mode==&quot;v&quot;){var h=this.kZ.resize.sx-l.clientX;this.kZ.resize.nx=this.kZ.resize.sep_x-h;if(this.kZ.resize.nx&gt;this.kZ.resize.sep_x+this.kZ.resize.min_wb){this.kZ.resize.nx=this.kZ.resize.sep_x+this.kZ.resize.min_wb}else{if(this.kZ.resize.nx&lt;this.kZ.resize.sep_x-this.kZ.resize.min_wa){this.kZ.resize.nx=this.kZ.resize.sep_x-this.kZ.resize.min_wa}}this.r_sep.style.left=this.kZ.resize.nx+&quot;px&quot;}else{var h=this.kZ.resize.sy-l.clientY;this.kZ.resize.ny=this.kZ.resize.sep_y-h;if(this.kZ.resize.ny&gt;this.kZ.resize.sep_y+this.kZ.resize.min_hb){this.kZ.resize.ny=this.kZ.resize.sep_y+this.kZ.resize.min_hb}else{if(this.kZ.resize.ny&lt;this.kZ.resize.sep_y-this.kZ.resize.min_ha){this.kZ.resize.ny=this.kZ.resize.sep_y-this.kZ.resize.min_ha}}this.r_sep.style.top=this.kZ.resize.ny+&quot;px&quot;}};this._afterResize=function(r){if(window.addEventListener){document.body.removeEventListener(&quot;mousemove&quot;,this._doOnMouseMove,false);document.body.removeEventListener(&quot;mouseup&quot;,this._doOnMouseUp,false)}else{document.body.detachEvent(&quot;onmousemove&quot;,this._doOnMouseMove);document.body.detachEvent(&quot;onmouseup&quot;,this._doOnMouseUp)}if(!this.kZ.resize.active){this.kZ.resize=null;return}if(r.button!==this._btnLeft){return}var n=this._getLayout();var l=n._getMainInst();var o=(l.mR(&quot;onPanelResizeFinish&quot;)==true?{}:false);if(o!==false){l.forEachItem(function(s){o[s.kZ.name]={w:s.kZ.size.w,h:s.kZ.size.h};s=null})}var m=this.kZ.resize.nx-this.kZ.resize.sep_x;var h=this.kZ.resize.ny-this.kZ.resize.sep_y;n.cdata.a._setSize(n.cdata.a.kZ.size.x,n.cdata.a.kZ.size.y,n.cdata.a.kZ.size.w+m,n.cdata.a.kZ.size.h+h,&quot;a&quot;);n.cdata.b._setSize(n.cdata.b.kZ.size.x+m,n.cdata.b.kZ.size.y+h,n.cdata.b.kZ.size.w-m,n.cdata.b.kZ.size.h-h,&quot;b&quot;);this._setSize(parseInt(this.r_sep.style.left),parseInt(this.r_sep.style.top),parseInt(this.r_sep.style.width),parseInt(this.r_sep.style.height));if(window.dhx4.isIE){var q=this;window.setTimeout(function(){q._removeResizeArea();q=null},1)}else{this._removeResizeArea()}if(o!==false){var q=[];l.forEachItem(function(s){var u=o[s.kZ.name];if(!(u.w==s.kZ.size.w&amp;&amp;u.h==s.kZ.size.h)){q.push(s.kZ.name)}s=null});l._callMainEvent(&quot;onPanelResizeFinish&quot;,[q])}l=n=null;this.kZ.resize.active=false;this.kZ.resize=null};this._initResizeArea=function(){if(!this.r_sep){this.r_sep=document.createElement(&quot;DIV&quot;);this.r_sep.className=&quot;dhxlayout_resize_sep&quot;;this.r_sep.style.left=this.sep.style.left;this.r_sep.style.top=this.sep.style.top;this.r_sep.style.width=this.sep.style.width;this.r_sep.style.height=this.sep.style.height;this.sep.parentNode.appendChild(this.r_sep);if(window.dhx4.isIE){this.r_sep.onselectstart=function(){return false}}}if(!this.r_area){this.r_area=document.createElement(&quot;DIV&quot;);this.r_area.className=&quot;dhxlayout_resize_area&quot;;this.sep.parentNode.appendChild(this.r_area);if(window.dhx4.isIE){this.r_area.onselectstart=function(){return false}}if(this.kZ.mode==&quot;v&quot;){var l=parseInt(this.r_sep.style.left)-this.kZ.resize.min_wa;var o=parseInt(this.r_sep.style.top);var m=this.kZ.resize.min_wa+this.kZ.resize.min_wb+parseInt(this.r_sep.style.width);var n=parseInt(this.r_sep.style.height)}else{var l=parseInt(this.r_sep.style.left);var o=parseInt(this.r_sep.style.top)-this.kZ.resize.min_ha;var m=parseInt(this.r_sep.style.width);var n=this.kZ.resize.min_ha+this.kZ.resize.min_hb+parseInt(this.r_sep.style.height)}this.r_area.style.left=l+&quot;px&quot;;this.r_area.style.top=o+&quot;px&quot;;if(!dhtmlXLayoutObject.prototype._confGlob.reszieCover){dhtmlXLayoutObject.prototype._confGlob.reszieCover={};this.r_area.style.width=m+&quot;px&quot;;this.r_area.style.height=n+&quot;px&quot;;dhtmlXLayoutObject.prototype._confGlob.reszieCover.w=parseInt(this.r_area.style.width)-this.r_area.offsetWidth;dhtmlXLayoutObject.prototype._confGlob.reszieCover.h=parseInt(this.r_area.style.height)-this.r_area.offsetHeight}this.r_area.style.width=m+dhtmlXLayoutObject.prototype._confGlob.reszieCover.w+&quot;px&quot;;this.r_area.style.height=n+dhtmlXLayoutObject.prototype._confGlob.reszieCover.h+&quot;px&quot;}document.body.className+=&quot; dhxlayout_resize_&quot;+this.kZ.mode};this._removeResizeArea=function(){this.r_sep.onselectstart=null;this.r_sep.parentNode.removeChild(this.r_sep);this.r_sep=null;this.r_area.onselectstart=null;this.r_area.parentNode.removeChild(this.r_area);this.r_area=null;document.body.className=String(document.body.className).replace(/\s{0,}dhxlayout_resize_[vh]/gi,&quot;&quot;)};this._doOnMouseDown=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.cancelBubble=true}c._beforeResize(h)};this._doOnMouseMove=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.cancelBubble=true}c._onResize(h)};this._doOnMouseUp=function(h){h=h||event;c._afterResize(h)};if(typeof(window.addEventListener)==&quot;function&quot;){this.sep.addEventListener(&quot;mousedown&quot;,this._doOnMouseDown,false)}else{this.sep.attachEvent(&quot;onmousedown&quot;,this._doOnMouseDown)}this._unload=function(){if(typeof(window.addEventListener)==&quot;function&quot;){this.sep.removeEventListener(&quot;mousedown&quot;,this._doOnMouseDown,false)}else{this.sep.detachEvent(&quot;onmousedown&quot;,this._doOnMouseDown)}this.sep.parentNode.removeChild(this.sep);this.sep=null;for(var h in this){this[h]=null}c=null};return this}window.dhtmlXLayoutCell=function(h,g){dhtmlXCellObject.apply(this,[h,&quot;_layout&quot;]);var c=this;this.layout=g;this.kZ.skin=this.layout.kZ.skin;this.kZ.mode=this.layout.kZ.mode;this.kZ.collapsed=false;this.kZ.fixed={w:false,h:false};this.kZ.docked=true;this.attachEvent(&quot;_onCellUnload&quot;,function(){this.cell.childNodes[this.kZ.idx.hdr].ondblclick=null;this._unloadDocking();this.layout=null;c=null});this._hdrInit();this.cell.childNodes[this.kZ.idx.hdr].ondblclick=function(){var l=c.layout._getMainInst();l._callMainEvent(&quot;onDblClick&quot;,[c.kZ.name]);l=null};this.attachEvent(&quot;_onContentLoaded&quot;,function(){var l=this.layout._getMainInst();l._callMainEvent(&quot;onContentLoaded&quot;,[this.kZ.name]);l=null});if(this.kZ.mode!=&quot;c&quot;){var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhxlayout_arrow dhxlayout_arrow_&quot;+this.kZ.mode+this._idd;this.cell.childNodes[this.kZ.idx.hdr].appendChild(a);a.onclick=function(l){if(c.kZ.collapsed){c.expand()}else{c.collapse()}};a=null}this._initDocking();return this};dhtmlXLayoutCell.prototype=new dhtmlXCellObject();dhtmlXLayoutCell.prototype.getId=function(){return this.kZ.name};dhtmlXLayoutCell.prototype._initDocking=function(){var a=this;this.dock=function(){var g=this.layout._getMainInst();if(g.dhxWins==null||this.kZ.docked){g=null;return}var c=this.layout.dhxWins.window(this.kZ.name);c.close();this._attachFromCell(c);this.kZ.docked=true;if(!this.kZ.dock_collapsed){this.expand()}g._callMainEvent(&quot;onDock&quot;,[this.kZ.name]);g=c=null};this.undock=function(c,o,m,n){var l=this.layout._getMainInst();if(l.dhxWins==null||this.kZ.docked==false){l=null;return}this.kZ.dock_collapsed=this.kZ.collapsed;if(!this.kZ.collapsed){this.collapse()}if(l.dhxWins.window(this.kZ.name)!=null){var g=l.dhxWins.window(this.kZ.name);g.show()}else{if(c==null){c=20}if(o==null){o=20}if(m==null){m=320}if(n==null){n=200}var g=l.dhxWins.createWindow(this.kZ.name,c,o,m,n);g.button(&quot;close&quot;).hide();g.addUserButton(&quot;dock&quot;,99,&quot;Dock&quot;);g.button(&quot;dock&quot;).show();g.button(&quot;dock&quot;).attachEvent(&quot;onClick&quot;,this._doOnDockClick);g.setText(this.getText());g.attachEvent(&quot;onClose&quot;,this._doOnDockWinClose)}this.kZ.docked=false;g._attachFromCell(this);l._callMainEvent(&quot;onUnDock&quot;,[this.kZ.name]);l=g=null};this._doOnDockClick=function(){a.dock()};this._doOnDockWinClose=function(c){c.hide();return false};this._unloadDocking=function(){a=null}};dhtmlXLayoutCell.prototype._hdrInit=function(){var c=&quot;&quot;;if(window.dhx4.isIE){if(navigator.userAgent.indexOf(&quot;MSIE 8.0&quot;)!= -1){c=&quot; dhx_cell_hdr_text_ie8&quot;}else{if(navigator.userAgent.indexOf(&quot;MSIE 7.0&quot;)!= -1){c=&quot; dhx_cell_hdr_text_ie7&quot;}else{if(navigator.userAgent.indexOf(&quot;MSIE 6.0&quot;)!= -1){c=&quot; dhx_cell_hdr_text_ie6&quot;}}}}else{if(window.dhx4.isChrome){c=&quot; dhx_cell_hdr_text_chrome&quot;}}var a=document.createElement(&quot;DIV&quot;);a.className=&quot;dhx_cell_hdr&quot;;a.innerHTML=&quot;&quot;;this.cell.insertBefore(a,this.cell.childNodes[this.kZ.idx.vI]);a=null;this.kZ.ofs_nodes.t._getHdrHeight=&quot;func&quot;;this.kZ.hdr={visible:true};this.kZ.idx_data.hdr=&quot;dhx_cell_hdr&quot;;this._updateIdx();this.attachEvent(&quot;_onSetSize&quot;,this._hdrOnSetSize);this.attachEvent(&quot;_onBorderChange&quot;,this._hdrOnBorderChange);this.attachEvent(&quot;_onViewSave&quot;,this._hdrOnViewSave);this.attachEvent(&quot;_onViewRestore&quot;,this._hdrOnViewRestore)};dhtmlXLayoutCell.prototype.showHeader=function(a){if(this.kZ.hdr.visible||this.kZ.collapsed){return}if(this.kZ.hdr.w_saved&gt;this._getAvailWidth()||this.kZ.hdr.h_saved&gt;this._getAvailHeight()){return}this.kZ.hdr.w_saved=this.kZ.hdr.h_saved=null;this.kZ.hdr.visible=true;this.cell.childNodes[this.kZ.idx.hdr].className=&quot;dhx_cell_hdr&quot;;if(a!==true){this._adjustCont(this._idd)}};dhtmlXLayoutCell.prototype.hideHeader=function(a){if(!this.kZ.hdr.visible||this.kZ.collapsed){return}this.kZ.hdr.w_saved=this._getMinWidth();this.kZ.hdr.h_saved=this._getMinHeight();this.kZ.hdr.visible=false;this.cell.childNodes[this.kZ.idx.hdr].className=&quot;dhx_cell_hdr dhx_cell_hdr_hidden&quot;;this._hdrUpdBorder();this._mtbUpdBorder();if(a!==true){this._adjustCont(this._idd)}};dhtmlXLayoutCell.prototype.isHeaderVisible=function(){return(this.kZ.hdr.visible==true)};dhtmlXLayoutCell.prototype.showArrow=function(){this.cell.childNodes[this.kZ.idx.hdr].childNodes[1].style.display=&quot;&quot;};dhtmlXLayoutCell.prototype.hideArrow=function(){this.cell.childNodes[this.kZ.idx.hdr].childNodes[1].style.display=&quot;none&quot;};dhtmlXLayoutCell.prototype.isArrowVisible=function(){return(this.cell.childNodes[this.kZ.idx.hdr].childNodes[1].style.display==&quot;&quot;)};dhtmlXLayoutCell.prototype.setText=function(a){this.kZ.hdr.text=a;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getText=function(){return this.kZ.hdr.text};dhtmlXLayoutCell.prototype.setCollapsedText=function(a){this.kZ.hdr.text_collapsed=a;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getCollapsedText=function(){return(this.kZ.hdr.text_collapsed!=null?this.kZ.hdr.text_collapsed:this.kZ.hdr.text)};dhtmlXLayoutCell.prototype._hdrUpdText=function(){var a=(this.kZ.collapsed==true&amp;&amp;this.kZ.hdr.text_collapsed!=null?this.kZ.hdr.text_collapsed:this.kZ.hdr.text);this.cell.childNodes[this.kZ.idx.hdr].firstChild.innerHTML=&quot;<SPAN>&quot;+a+&quot;</SPAN>&quot;};dhtmlXLayoutCell.prototype._hdrUpdBorder=function(){if(this.kZ.borders==true){this.cell.childNodes[this.kZ.idx.hdr].className=&quot;dhx_cell_hdr&quot;+(this.kZ.hdr.visible?&quot;&quot;:&quot; dhx_cell_hdr_hidden&quot;)}else{if(!this.kZ.hdr.visible){this.cell.childNodes[this.kZ.idx.hdr].className=&quot;dhx_cell_hdr dhx_cell_hdr_hidden_no_borders&quot;}}};dhtmlXLayoutCell.prototype._hdrOnSetSize=function(){if(this.kZ.collapsed&amp;&amp;this.kZ.mode==&quot;v&quot;){this._fitHdr()}};dhtmlXLayoutCell.prototype._hdrOnBorderChange=function(){this.hideHeader(true);this._hdrUpdBorder()};dhtmlXLayoutCell.prototype._hdrOnViewSave=function(a){this.views[a].hdr_vis=this.kZ.hdr.visible};dhtmlXLayoutCell.prototype._hdrOnViewRestore=function(a){if(this.kZ.hdr.visible!=this.views[a].hdr_vis){this[this.views[a].hdr_vis?&quot;showHeader&quot;:&quot;hideHeader&quot;](true)}this.views[a].hdr_vis=null;delete this.views[a].hdr_vis};dhtmlXLayoutCell.prototype._getHdrHeight=function(a){if(this.kZ.collapsed&amp;&amp;this.kZ.mode==&quot;v&quot;&amp;&amp;a!==true){return 27}return this.cell.childNodes[this.kZ.idx.hdr].offsetHeight};dhtmlXLayoutCell.prototype._fitHdr=function(){if(this.kZ.collapsed){if(typeof(dhtmlXLayoutObject.prototype._confGlob.hdrColH)==&quot;undefined&quot;){this.cell.childNodes[this.kZ.idx.hdr].style.height=this.cell.offsetHeight+&quot;px&quot;;dhtmlXLayoutObject.prototype._confGlob.hdrColH=parseInt(this.cell.childNodes[this.kZ.idx.hdr].style.height)-this._getHdrHeight(true)}this.cell.childNodes[this.kZ.idx.hdr].style.height=this.cell.offsetHeight+dhtmlXLayoutObject.prototype._confGlob.hdrColH+&quot;px&quot;}else{this.cell.childNodes[this.kZ.idx.hdr].style.height=null}};dhtmlXLayoutCell.prototype.expand=function(n){if(!this.kZ.collapsed){return true}var g=this.layout;if(this.kZ.mode==&quot;v&quot;){var m=(n?g.kZ.hh:g.cdata[g.kZ.nextCell[this._idd]]._getMinWidth(this._idd));var h=g.base.offsetWidth-g.kZ.sw;if(m+this.kZ.size.w_avl&gt;h){g=null;return false}}else{var l=(n?g.kZ.hh:g.cdata[g.kZ.nextCell[this._idd]]._getMinHeight(this._idd)+g.cdata[g.kZ.nextCell[this._idd]]._getHdrHeight());var c=g.base.offsetHeight-g.kZ.sw;if(l+this.kZ.size.h_avl&gt;c){g=null;return false}}if(this.kZ.docked==false){this.dock();return}this.cell.className=String(this.cell.className).replace(/\s{0,}dhxlayout_collapsed_[hv]/gi,&quot;&quot;);this.kZ.collapsed=false;if(this.kZ.mode==&quot;v&quot;){this.kZ.size.w=Math.min(h-m,this.kZ.size.w_saved);this.kZ.size.w_saved=this.kZ.size.w_avl=null}else{this.kZ.size.h=Math.min(c-l,this.kZ.size.h_saved);this.kZ.size.h_saved=this.kZ.size.h_avl=null}if(this.kZ.mode==&quot;v&quot;){this._fitHdr()}g.setSizes(g.kZ.nextCell[this._idd],g.kZ.nextCell[this._idd],n==true,&quot;expand&quot;);g.sep._blockSep();g=null;this._hdrUpdText();var a=this.layout._getMainInst();a._callMainEvent(&quot;onExpand&quot;,[this.kZ.name]);a=null;return true};dhtmlXLayoutCell.prototype.collapse=function(){if(this.kZ.collapsed){return false}var c=this.layout;if(c.cdata[c.kZ.nextCell[this._idd]].expand(true)==false){return false}if(this.kZ.mode==&quot;v&quot;){this.kZ.size.w_saved=this.kZ.size.w;this.kZ.size.w_avl=this._getMinWidth(this._idd)}else{this.kZ.size.h_saved=this.kZ.size.h;this.kZ.size.h_avl=this._getMinHeight(this._idd)+this._getHdrHeight()}this.cell.className+=&quot; dhxlayout_collapsed_&quot;+this.kZ.mode;this.kZ.collapsed=true;if(this.kZ.mode==&quot;v&quot;){this.kZ.size.w=c.kZ.hh}else{this.kZ.size.h=this._getHdrHeight()}c.setSizes(c.kZ.nextCell[this._idd],c.kZ.nextCell[this._idd],false,&quot;collapse&quot;);c.sep._blockSep();c=null;this._hdrUpdText();var a=this.layout._getMainInst();a._callMainEvent(&quot;onCollapse&quot;,[this.kZ.name]);a=null;return true};dhtmlXLayoutCell.prototype.isCollapsed=function(){return(this.kZ.collapsed==true)};dhtmlXLayoutCell.prototype._getMinWidth=function(c){if(this.dataType==&quot;layout&quot;&amp;&amp;this.dataObj!=null){if(this.dataObj.kZ.mode==&quot;v&quot;){var a=c;if(this.dataObj.cdata[a].kZ.collapsed){a=this.dataObj.kZ.nextCell[a]}return this.dataObj.cdata[a]._getMinWidth(c)+this.dataObj.cdata[this.dataObj.kZ.nextCell[a]]._getWidth()+this.dataObj.kZ.sw}else{return Math.max(this.dataObj.cdata.a._getMinWidth(c),this.dataObj.cdata.b._getMinWidth(c))}}return 26};dhtmlXLayoutCell.prototype._getMinHeight=function(g){var c=26;if(this.kZ.idx.menu!=null){c+=this.cell.childNodes[this.kZ.idx.menu].offsetHeight}if(this.dataType==&quot;layout&quot;&amp;&amp;this.dataObj!=null){if(this.dataObj.kZ.mode==&quot;h&quot;){var a=g;if(this.dataObj.cdata[a].kZ.collapsed){a=this.dataObj.kZ.nextCell[a]}return this.dataObj.cdata[a]._getMinHeight(g)+this.dataObj.cdata[a]._getHdrHeight()+this.dataObj.cdata[this.dataObj.kZ.nextCell[a]]._getHeight()+this.dataObj.kZ.sw}else{return Math.max(this.dataObj.cdata.a._getMinHeight(g)+this.dataObj.cdata.a._getHdrHeight(),this.dataObj.cdata.b._getMinHeight(g)+this.dataObj.cdata.b._getHdrHeight())}}return c};dhtmlXLayoutCell.prototype._getAvailWidth=function(g){if(this.dataType==&quot;layout&quot;&amp;&amp;this.dataObj!=null){if(this.dataObj.kZ.mode==&quot;v&quot;){var a=(this.dataObj.cdata.a.kZ.collapsed==true);var c=(this.dataObj.cdata.b.kZ.collapsed==true);if(g==&quot;a&quot;){return this.dataObj.cdata[c?&quot;a&quot;:&quot;b&quot;]._getAvailWidth(g)}else{return this.dataObj.cdata[a?&quot;b&quot;:&quot;a&quot;]._getAvailWidth(g)}}else{return Math.min(this.dataObj.cdata.a._getAvailWidth(g),this.dataObj.cdata.b._getAvailWidth(g))}}return this.cell.offsetWidth-this._getMinWidth()};dhtmlXLayoutCell.prototype._getAvailHeight=function(h){if(this.dataType==&quot;layout&quot;&amp;&amp;this.dataObj!=null){if(this.dataObj.kZ.mode==&quot;h&quot;){var c=(this.dataObj.cdata.a.kZ.collapsed==true);var g=(this.dataObj.cdata.b.kZ.collapsed==true);if(h==&quot;a&quot;){return this.dataObj.cdata[g?&quot;a&quot;:&quot;b&quot;]._getAvailHeight(h)}else{return this.dataObj.cdata[c?&quot;b&quot;:&quot;a&quot;]._getAvailHeight(h)}}else{return Math.min(this.dataObj.cdata.a._getAvailHeight(h),this.dataObj.cdata.b._getAvailHeight(h))}}var a=this._getHdrHeight();if(this.kZ.mode==&quot;v&quot;&amp;&amp;this.kZ.collapsed){a=this.kZ.hh}return this.cell.offsetHeight-a-this._getMinHeight()};dhtmlXLayoutCell.prototype.setWidth=function(c){if(this.kZ.mode==&quot;v&quot;){if(this.kZ.collapsed){return}var g=this.layout;var h=g.cdata[g.kZ.nextCell[this._idd]];if(h.kZ.collapsed){c=c+g.kZ.sw+h._getWidth();p=g=h=null;return}var a=this._getMinWidth(this._idd);var l=g.base.offsetWidth-h._getMinWidth(this._idd)-g.kZ.sw;c=Math.max(a,Math.min(c,l));this.kZ.size.w=c;g.setSizes(h._idd,h._idd);g=h=null}else{}};dhtmlXLayoutCell.prototype.setHeight=function(o){if(this.kZ.mode==&quot;h&quot;){if(this.kZ.collapsed){return}var l=this.layout;var n=l.cdata[l.kZ.nextCell[this._idd]];if(n.kZ.collapsed){o=o+l.kZ.sw+n._getHeight();var q=this._getParentLayout();if(q!=null){for(var c in q.cdata){if(q.cdata[c].dataObj==l){q.cdata[c].setHeight(o)}}}q=l=n=null;return}var m=this._getMinHeight(this._idd)+this._getHdrHeight();var g=l.base.offsetHeight-n._getMinHeight(this._idd)-n._getHdrHeight()-l.kZ.sw;o=Math.max(m,Math.min(o,g));this.kZ.size.h=o;l.setSizes(n._idd,n._idd);l=n=null}else{var q=this._getParentLayout();if(q==null){return}var l=this.layout;var n=l.cdata[l.kZ.nextCell[this._idd]];for(var c in q.cdata){if(q.cdata[c].dataObj==l){q.cdata[c].setHeight(o)}}q=l=null}};dhtmlXLayoutCell.prototype.getWidth=function(){return this.kZ.size.w};dhtmlXLayoutCell.prototype.getHeight=function(){return this.kZ.size.h};dhtmlXLayoutCell.prototype.fixSize=function(c,l){this.kZ.fixed.w=window.dhx4.s2b(c);this.kZ.fixed.h=window.dhx4.s2b(l);var a=this.layout._getMainInst();var g={};a.forEachItem(function(h){if(h.kZ.fsize!=null){var r=h.getId();var o={h:(h.kZ.fixed.w==true),v:(h.kZ.fixed.h==true)};for(var m in o){if(o[m]==true&amp;&amp;h.kZ.fsize[m]!=null){if(!(h.kZ.fsize[m]instanceof Array)){h.kZ.fsize[m]=[h.kZ.fsize[m]]}for(var n=0;n&lt;h.kZ.fsize[m].length;n++){g[h.kZ.fsize[m][n]]=true}}}}h=null});a._forEachSep(function(h){h._lockSep(g[h.kZ.idx]==true);h=null});a=null};function dhtmlXTabBar(c,l){var g=this;this.kZ={skin:(window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhxtabbar&quot;)||&quot;dhx_skyblue&quot;),fullScreen:false,fullScreenResize:false,lastActive:null,closeButton:false,align:&quot;left&quot;,tabsMode:(l==&quot;bottom&quot;?&quot;bottom&quot;:&quot;top&quot;),contZone:true,transSpeed:&quot;0.15s&quot;,baseOfs:{w:2,h:2},tabsOfs:1,tabsTop:0,autoload:{}};var h;if(c!=null&amp;&amp;typeof(c)==&quot;object&quot;&amp;&amp;typeof(c.tagName)==&quot;undefined&quot;){h=c.parent;if(typeof(c.skin)!=&quot;undefined&quot;){this.kZ.skin=c.skin}if(typeof(c.mode)!=&quot;undefined&quot;){this.kZ.tabsMode=(c.mode==&quot;bottom&quot;?&quot;bottom&quot;:&quot;top&quot;)}if(typeof(c.align)!=&quot;undefined&quot;){this.kZ.align=(c.align==&quot;right&quot;?&quot;right&quot;:&quot;left&quot;)}if(typeof(c.close_button)!=&quot;undefined&quot;){this.kZ.closeButton=window.dhx4.s2b(c.close_button)}if(typeof(c.content_zone)!=&quot;undefined&quot;){this.kZ.contZone=window.dhx4.s2b(c.content_zone)}if(typeof(c.xml)!=&quot;undefined&quot;){this.kZ.autoload.xml=c.xml}if(typeof(c.json)!=&quot;undefined&quot;){this.kZ.autoload.xml=c.json}if(typeof(c.tabs)!=&quot;undefined&quot;){this.kZ.autoload.tabs=c.tabs}if(typeof(c.onload)!=&quot;undefined&quot;){this.kZ.autoload.tabs=c.tabs}}else{h=c}if(h==document.body){document.documentElement.className+=&quot; dhxtabbar_fullscreen&quot;;document.body.className+=&quot; dhxtabbar_fullscreen&quot;;this.kZ.fullScreen=true;this.base=document.createElement(&quot;DIV&quot;);this.base.className=&quot;dhxtabbar_base_&quot;+this.kZ.skin;this.base.style.position=&quot;absolute&quot;;this.base.style.left=this.kZ.baseOfs.w+&quot;px&quot;;this.base.style.top=this.kZ.baseOfs.h+&quot;px&quot;;document.body.appendChild(this.base)}else{this.base=(typeof(h)==&quot;string&quot;?document.getElementById(h):h);h=null;this.base.className+=&quot; dhxtabbar_base_&quot;+this.kZ.skin}if(this.base._ofs!=null&amp;&amp;this.base._ofs.t!=null){this.kZ.tabsTop=this.base._ofs.t}this.tabsMode=document.createElement(&quot;DIV&quot;);this.tabsMode.className=&quot;dhxtabbar_tabs_&quot;+this.kZ.tabsMode;this.base.appendChild(this.tabsMode);this.tabsArea=document.createElement(&quot;DIV&quot;);this.tabsArea.className=&quot;dhxtabbar_tabs dhxtabbar_tabs_&quot;+this.kZ.tabsMode;this.tabsArea.innerHTML=&quot;&quot;;if(this.kZ.tabsMode==&quot;top&quot;){this.tabsArea.style.top=this.kZ.tabsTop+&quot;px&quot;}this.tabsMode.appendChild(this.tabsArea);this.tabsArea.childNodes[1].childNodes[0].style[this.kZ.align]=&quot;0px&quot;;this.tabsArea.childNodes[0].onclick=function(){if(g.kZ.align==&quot;left&quot;){g._moveTabs(1)}else{g._moveTabs(-1)}};this.tabsArea.childNodes[2].onclick=function(){if(g.kZ.align==&quot;left&quot;){g._moveTabs(-1)}else{g._moveTabs(1)}};this._onTabsAreaClick=function(m){return this._callMainEvent(&quot;onTabClose&quot;,[m])};this.tabsArea.onclick=function(n){n=n||event;var m=(n.target||n.srcElement);while(m!=null){if(typeof(m._tabCloseId)!=&quot;undefined&quot;){if(g._onTabsAreaClick(m._tabCloseId)!==true){return}g.t[m._tabCloseId].kZ.remove=true;g._hideTab(m._tabCloseId);m=null}else{if(typeof(m._tabId)!=&quot;undefined&quot;){g._doOnClick(m._tabId);m=null}}if(m!=null){m=m.parentNode;if(m==this){m=null}}}};this.tabsArea.onselectstart=function(m){m=m||event;if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}};this._doOnClick=function(m){this.callEvent(&quot;onTabClick&quot;,[m,this.kZ.lastActive]);if(this.t[m].kZ.enabled){this.dP(m)}};this.t={};this.hG=function(m,v,o,s,r,w){if(typeof(w)!=&quot;boolean&quot;){w=(this.kZ.closeButton==true)}r=window.dhx4.s2b(r);var q=document.createElement(&quot;DIV&quot;);q.className=&quot;dhxtabbar_tab&quot;;q.innerHTML=&quot;<DIV class="dhxtabbar_tab_text&quot;+(w?&quot; dhxtabbar_tab_text_close&quot;:&quot;&quot;)+&quot;">&quot;+v+&quot;</DIV>&quot;+(w?&quot;&quot;:&quot;&quot;);q._tabId=m;if(w){q.childNodes[1]._tabCloseId=m}var n=this.tabsArea.childNodes[1].firstChild;if(s!=null&amp;&amp;s+1&gt;0&amp;&amp;s+1&lt;n.childNodes.length){n.insertBefore(q,n.childNodes[s+1])}else{n.appendChild(q)}var x=false;if(typeof(o)==&quot;undefined&quot;||o==null){o=this._getLabelWidth(v,w);x=true}else{o=parseInt(o)}q.style.width=o+&quot;px&quot;;var u=new dhtmlXTabBarCell(m,this);this.tabsMode.appendChild(u.cell);this.t[m]={tab:q,cell:u,kZ:{text:v,visible:true,active:false,enabled:true,close:w,width:o,autowidth:x}};n=u=null;if(r){this.dP(m)}else{this._adjustCell(m)}};this.setSizes=function(){if(this.kZ.fullScreen){this.base.style.width=document.body.offsetWidth-this.kZ.baseOfs.w*2+&quot;px&quot;;this.base.style.height=document.body.offsetHeight-this.kZ.baseOfs.h*2+&quot;px&quot;}if(this.kZ.tabsAreaOfs==null){this.tabsArea.style.width=this.base.offsetWidth+&quot;px&quot;;this.kZ.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth}this.tabsArea.style.width=this.base.offsetWidth+this.kZ.tabsAreaOfs+&quot;px&quot;;this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+&quot;px&quot;;this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.offsetWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+1+&quot;px&quot;;this._adjustCell(this.kZ.lastActive);this._adjustTabs()};this._adjustCell=function(q){if(!this.kZ.contZone||q==null){return}var o=(this.kZ.tabsMode==&quot;top&quot;?this.tabsArea.offsetHeight:0)+this.kZ.tabsTop;var n=this.base.offsetHeight-this.tabsArea.offsetHeight-this.kZ.tabsTop;var m=this.t[q].cell.dataType;if(this.kZ.skin==&quot;dhx_skyblue&quot;&amp;&amp;(m==&quot;layout&quot;||m==&quot;tabbar&quot;||m==&quot;acc&quot;)){if(this.kZ.tabsMode==&quot;top&quot;){o=o-1}n=n+1}if(q!=this.kZ.lastActive){o= -5000;this.t[q].cell.cell.style.visibility=&quot;hidden&quot;;this.t[q].cell.cell.style.zIndex=0}this.t[q].cell._setSize(0,o,this.base.offsetWidth,n)};this.setTabsMode=function(m){this.kZ.tabsMode=(m==&quot;bottom&quot;?&quot;bottom&quot;:&quot;top&quot;);this.tabsMode.className=&quot;dhxtabbar_tabs_&quot;+this.kZ.tabsMode;this.setSizes()};this._tabCss=function(r,o){var m=this.t[r].kZ.active;var q= !this.t[r].kZ.enabled;var n= !this.t[r].kZ.visible;return &quot;dhxtabbar_tab&quot;+(n?&quot; dhxtabbar_tab_hidden&quot;:(m||q?&quot; dhxtabbar_tab&quot;+(m?&quot;_actv&quot;:&quot;&quot;)+(q?&quot;_dis&quot;:&quot;&quot;):&quot;&quot;))};this._getLabelWidth=function(o,n){if(!this.tabsTextTest){this.tabsTextTest=document.createElement(&quot;SPAN&quot;);this.tabsTextTest.className=&quot;dhxtabbar_tabs_text_test_&quot;+this.kZ.skin}document.body.appendChild(this.tabsTextTest);this.tabsTextTest.innerHTML=o;var m=this.tabsTextTest.offsetWidth;m+=(this.kZ.skin==&quot;dhx_terrace&quot;?44:35);m+=(n?(this.kZ.skin==&quot;dhx_terrace&quot;?14:9):0);document.body.removeChild(this.tabsTextTest);return m};this._adjustTabs=function(){var s=this.tabsArea.childNodes[1];if(s.offsetWidth&lt;5){s=null;return}var m=parseInt(s.childNodes[0].style[this.kZ.align]);var o=null;for(var r=0;r&lt;s.childNodes[0].childNodes.length;r++){var u=s.childNodes[0].childNodes[r]._tabId;if(u!=null&amp;&amp;this.t[u].kZ.visible){var n=this.t[u].tab.offsetWidth-this.kZ.tabsOfs;if(this.t[u].kZ.active){if(m&lt;0||s.offsetWidth&lt;n){o={d:1,id:u}}else{if(m+n&gt;s.offsetWidth){o={d: -1,id:u}}}}m+=n}}if(o!=null){this._moveTabs(o.d,o.id)}else{if(s.offsetWidth&gt;m+1){s.childNodes[0].style[this.kZ.align]=Math.min(0,parseInt(s.childNodes[0].style[this.kZ.align])+(s.offsetWidth-m))+&quot;px&quot;}}s=o=null};this._moveTabs=function(y,r){var o=this.tabsArea.childNodes[1].childNodes[0];var v=0;var A=[];var D=null;for(var m=0;m&lt;o.childNodes.length;m++){var n=o.childNodes[m]._tabId;if(n!=null&amp;&amp;this.t[n].kZ.visible){A.push({id:n,w:this.t[n].tab.offsetWidth-this.kZ.tabsOfs,ind:v});if(n==r){D=v}v++}}var C=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.kZ.align]);var u=this.tabsArea.offsetWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth;var w=null;var s=null;for(var m=0;m&lt;A.length;m++){A[m].x=C;if(w==null&amp;&amp;C&gt;=0&amp;&amp;C+A[m].w&gt;0){w=A[m]}if(C&lt;u&amp;&amp;C+A[m].w&lt;=u){s=A[m]}C+=A[m].w}if(D!=null){var E=A[D]}else{var E=null;if(y&gt;0){if(w==null){if(A.length&gt;0){E=A[A.length-1]}}else{if(w.ind&gt;0&amp;&amp;A.length&gt;=w.ind){E=A[w.ind-1]}}}else{if(s==null){if(A.length&gt;0){E=A[0]}}else{if(A.length&gt;s.ind){E=A[s.ind+1]}}}}if(E!=null){if(y&gt;0){if(C&lt;u){o.style[this.kZ.align]=Math.min(0,parseInt(o.style[this.kZ.align])+(u-C))+&quot;px&quot;}else{o.style[this.kZ.align]=parseInt(o.style[this.kZ.align])-E.x+&quot;px&quot;}}else{o.style[this.kZ.align]=parseInt(o.style[this.kZ.align])-E.x+u-E.w+&quot;px&quot;}}o=E=A=null};this._getNextVisible=function(n,m){return this._getNearVisible(n,m,&quot;next&quot;)};this._getPrevVisible=function(n,m){return this._getNearVisible(n,m,&quot;previous&quot;)};this._getFirstVisible=function(){return this._getNearVisible(null,false,&quot;first&quot;)};this._getNearVisible=function(s,o,r){if(r==&quot;first&quot;){var q=this.tabsArea.childNodes[1].childNodes[0].childNodes[1];r=&quot;next&quot;}else{if(s==null||this.t[s]==null){return(o?this._getFirstVisible():null)}var q=this.t[s].tab[r+&quot;Sibling&quot;]}var n=null;while(q!=null&amp;&amp;n==null){var m=q._tabId;if(m!=null&amp;&amp;n==null&amp;&amp;this.t[m].kZ.visible){n=m}else{q=q[r+&quot;Sibling&quot;]}}q=null;return n};this._showTab=function(n,m){if(!this.t[n]||this.t[n].kZ.visible||this.t[n].kZ.transActv){return}if(this.kZ.transProp!==false){this.t[n].kZ.transActv=true;this.t[n].kZ.transMode=&quot;show&quot;;this.t[n].kZ.transProp=this.kZ.transProp;this.t[n].kZ.transActvId=(m?n:null);if(!this.t[n].kZ.transEv){this.t[n].tab.addEventListener(this.kZ.transEv,this._doOnTrEnd);this.t[n].kZ.transEv=true}this.t[n].kZ.visible=true;this.t[n].tab.className=this._tabCss(n);this.t[n].tab.style[this.kZ.transProp]=this.kZ.transValueWidth;this.t[n].tab.style.width=this.t[n].kZ.width+&quot;px&quot;}else{this.t[n].kZ.visible=true;this.t[n].tab.style.display=&quot;&quot;;if(m){this.dP(n)}else{this._adjustTabs()}}};this._hideTab=function(s,m){if(!this.t[s]|| !this.t[s].kZ.visible||this.t[s].kZ.transActv){return}var n=false;if(this.kZ.lastActive==s){this.kZ.lastActive=null;this.t[s].kZ.active=false;this.t[s].tab.className=this._tabCss(s);n=true}var q=this._getPrevVisible(s);var o=this._getNextVisible(s);var r=(n&amp;&amp;m!==false?(m==true?null:m)||o||q:null);if(this.kZ.transProp!==false){this.t[s].kZ.transActv=true;this.t[s].kZ.transMode=&quot;hide&quot;;this.t[s].kZ.transProp=this.kZ.transProp;this.t[s].kZ.transActvId=r;this.t[s].kZ.visible=false;if(!this.t[s].kZ.transEv){this.t[s].tab.addEventListener(this.kZ.transEv,this._doOnTrEnd);this.t[s].kZ.transEv=true}this.t[s].tab.style.visibility=&quot;hidden&quot;;this.t[s].tab.className=g._tabCss(s);this.t[s].tab.style[this.kZ.transProp]=this.kZ.transValueWidth;this.t[s].tab.style.width=&quot;0px&quot;}else{this.t[s].tab.style.display=&quot;none&quot;;this.t[s].kZ.visible=false;if(this.kZ.contZone){this.t[s].cell.cell.style.visibility=&quot;hidden&quot;;this.t[s].cell.cell.style.top=&quot;-5000px&quot;}if(r!=null){this.dP(r)}this._adjustTabs();if(this.t[s].kZ.remove){this._removeTab(s)}}};this._isTabVisible=function(m){return(this.t[m].kZ.visible==true)};this._doOnTrEnd=function(){var o=this._tabId;if(g.t[o]==null){return}var m=g.t[o];var n=m.kZ.transActvId;if(m.kZ.transMode==&quot;hide&quot;){if(m.kZ.remove){g._removeTab(o)}else{m.tab.style[m.kZ.transProp]=&quot;&quot;;if(g.kZ.contZone){m.cell.cell.style.visibility=&quot;hidden&quot;;m.cell.cell.style.top=&quot;-5000px&quot;}m.kZ.transActv=false}}else{if(m.kZ.transMode==&quot;show&quot;){m.tab.style[m.kZ.transProp]=&quot;&quot;;m.tab.style.visibility=&quot;visible&quot;;m.kZ.transMode=null;m.kZ.transActv=false}}if(n!=null){g.dP(n)}else{g._adjustTabs()}m=null};this.enableTabCloseButton=function(m){this.kZ.closeButton=window.dhx4.s2b(m)};this.unload=function(){this.clearAll();this.t=null;if(this.kZ.fullScreen){if(window.addEventListener){window.removeEventListener(&quot;resize&quot;,this._doOnResizeStart,false)}else{window.detachEvent(&quot;onresize&quot;,this._doOnResizeStart)}this._doOnResizeStart=null;this._doOnResizeEnd=null}if(this.tabsTextTest!=null){if(this.tabsTextTest.parentNode){this.tabsTextTest.parentNode.removeChild(this.tabsTextTest)}this.tabsTextTest=null}window.dhx4._eventable(this,&quot;clear&quot;);window.dhx4._enableDataLoading(this,null,null,null,&quot;clear&quot;);this.tabsArea.childNodes[0].onclick=null;this.tabsArea.childNodes[2].onclick=null;this.tabsArea.onclick=null;this.tabsArea.onselectstart=null;this.tabsArea.parentNode.removeChild(this.tabsArea);this.tabsArea=null;this.tabsMode.parentNode.removeChild(this.tabsMode);this.tabsMode=null;if(this.kZ.fullScreen){this.base.parentNode.removeChild(this.base);document.documentElement.className=document.documentElement.className.replace(&quot;dhxtabbar_fullscreen&quot;,&quot;&quot;);document.body.className=document.body.className.replace(&quot;dhxtabbar_fullscreen&quot;,&quot;&quot;)}else{this.base.className=this.base.className.replace(&quot;dhxtabbar_base_&quot;+this.kZ.skin,&quot;&quot;)}this.base=null;for(var m in this){this[m]=null}g=null};this.enableContentZone=function(m){this.kZ.contZone=(m==true)};this.setSkin=function(n){this.base.className=this.base.className.replace(new RegExp(&quot;dhxtabbar_base_&quot;+this.kZ.skin),&quot;dhxtabbar_base_&quot;+n);this.kZ.skin=n;if(this.tabsTextTest!=null){this.tabsTextTest.className=&quot;dhxtabbar_tabs_text_test_&quot;+this.kZ.skin}for(var m in this.t){this.t[m].cell._resetSizeState();if(this.t[m].kZ.autowidth==true){this.t[m].kZ.width=this._getLabelWidth(this.t[m].kZ.text,this.t[m].kZ.close);if(this.t[m].kZ.visible){this.t[m].tab.style.width=this.t[m].kZ.width+&quot;px&quot;}}}this.kZ.tabsAreaOfs=null;this._fixTabsOfs();this.setSizes()};this.setAlign=function(m){m=(m==&quot;left&quot;?&quot;left&quot;:&quot;right&quot;);if(m==this.kZ.align){this.tabsArea.childNodes[1].childNodes[0].style[this.kZ.align]=&quot;0px&quot;;return}if(this.kZ.transProp!==false){this.tabsArea.childNodes[1].childNodes[0].style[this.kZ.transProp]=&quot;&quot;}this.tabsArea.childNodes[1].childNodes[0].style[this.kZ.align]=&quot;&quot;;this.kZ.align=m;this.tabsArea.childNodes[1].childNodes[0].className=&quot;dhxtabbar_tabs_cont_&quot;+this.kZ.align;this.tabsArea.childNodes[1].childNodes[0].style[this.kZ.align]=&quot;0px&quot;;if(this.kZ.transProp!==false){this.kZ.transValuePos=this.kZ.align+&quot; &quot;+this.kZ.transSpeed;this.tabsArea.childNodes[1].childNodes[0].style[this.kZ.transProp]=this.kZ.transValuePos}};this._initObj=function(o){this.clearAll();if(o.settings!=null){if(o.settings.skin!=null){this.setSkin(o.settings.skin)}if(o.settings.closeButton!=null){this.enableTabCloseButton(window.dhx4.s2b(o.settings.closeButton))}if(o.settings.align!=null){this.setAlign(o.settings.align)}}if(o.tabs!=null){for(var n=0;n&lt;o.tabs.length;n++){var m=o.tabs[n];if(typeof(m.id)==&quot;undefined&quot;){m.id=window.dhx4.newId()}if(!isNaN(parseInt(m.width))){m.width=parseInt(m.width)}else{m.width=null}this.hG(m.id,m.text||m.label||&quot;&quot;,m.width,m.index,window.dhx4.s2b(m.selected)||window.dhx4.s2b(m.active),m.close);if(m.content!=null){this.cells(m.id).attachHTMLString(m.content)}if(m.href!=null){this.cells(m.id).attachURL(m.href)}if(typeof(m.enabled)!=&quot;undefined&quot;&amp;&amp;window.dhx4.s2b(m.enabled)==false){this.tabs(m.id).disable()}else{if(typeof(m.disabled)!=&quot;undefined&quot;&amp;&amp;window.dhx4.s2b(m.disabled)==true){this.tabs(m.id).disable()}}}}};this._xmlToObj=function(u){var s={settings:{},tabs:[]};var m=u.getElementsByTagName(&quot;tabbar&quot;)[0];if(m!=null){for(var v in{skin:1,align:1,closeButton:1}){if(m.getAttribute(v)!=null){s.settings[v]=m.getAttribute(v)}}var y=m.getElementsByTagName(&quot;tab&quot;);for(var n=0;n&lt;y.length;n++){var o={text:(y[n].firstChild.nodeValue||&quot;&quot;)};for(var v in{id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1}){if(y[n].getAttribute(v)!=null){o[v]=y[n].getAttribute(v)}}var A=y[n].getElementsByTagName(&quot;content&quot;)[0];if(A!=null){o.content=&quot;&quot;;for(var x=0;x&lt;A.childNodes.length;x++){o.content+=(A.childNodes[x].nodeValue||&quot;&quot;)}}s.tabs.push(o)}}return s};dhx4._enableDataLoading(this,&quot;_initObj&quot;,&quot;_xmlToObj&quot;,&quot;tabbar&quot;,{struct:true});var a=window.dhx4.transDetect();this.kZ.transProp=a.transProp;this.kZ.transEv=a.transEv;this.kZ.transValueWidth=&quot;width &quot;+this.kZ.transSpeed;a=null;if(this.kZ.transProp!==false){this.kZ.transValuePos=this.kZ.align+&quot; &quot;+this.kZ.transSpeed;this.tabsArea.childNodes[1].childNodes[0].style[this.kZ.transProp]=this.kZ.transValuePos}this._initFullScreenResize=function(){if(this.kZ.fullScreenResize){return}this.kZ.tmResize=null;this._doOnResizeStart=function(){window.clearTimeout(g.kZ.tmResize);g.kZ.tmResize=window.setTimeout(g._doOnResizeEnd,200)};this._doOnResizeEnd=function(){g.setSizes()};if(window.addEventListener){window.addEventListener(&quot;resize&quot;,this._doOnResizeStart,false)}else{window.attachEvent(&quot;onresize&quot;,this._doOnResizeStart)}this.kZ.fullScreenResize=true};if(this.kZ.fullScreen){this._initFullScreenResize()}this._callMainEvent=function(n,m){return this.callEvent(n,m)};window.dhx4._eventable(this);if(this.kZ.autoload.json!=null){this.loadStruct(this.kZ.autoload.json,this.kZ.autoload.onload)}else{if(this.kZ.autoload.xml!=null){this.loadStruct(this.kZ.autoload.xml,this.kZ.autoload.onload)}else{if(this.kZ.autoload.tabs!=null){this.loadStruct({tabs:this.kZ.autoload.tabs})}}}this._fixTabsOfs();this.setSizes();return this}dhtmlXTabBar.prototype._fixTabsOfs=function(a){};dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(a){if(this.t[a]){return this.t[a].cell}return null};dhtmlXTabBar.prototype.getAllTabs=function(){var g=[];for(var c in this.t){g.push(c)}return g};dhtmlXTabBar.prototype.dP=function(c,a){if(!this.t[c]|| !this.t[c].kZ.visible||this.t[c].kZ.active){return}if(typeof(a)==&quot;undefined&quot;){a=true}if(a==true&amp;&amp;this.callEvent(&quot;onSelect&quot;,[c,this.kZ.lastActive])!==true){return}this.setTabInActive();this.t[c].kZ.active=true;if(this.kZ.contZone){this.t[c].cell.cell.style.visibility=&quot;visible&quot;;this.t[c].cell.cell.style.top=&quot;0px&quot;;this.t[c].cell.cell.style.zIndex=1}this.t[c].tab.className=this._tabCss(c);this.kZ.lastActive=c;this.setSizes()};dhtmlXTabBar.prototype.setTabInActive=function(){if(this.kZ.lastActive&amp;&amp;this.t[this.kZ.lastActive]){this.t[this.kZ.lastActive].kZ.active=false;if(this.kZ.contZone){this.t[this.kZ.lastActive].cell.cell.style.visibility=&quot;hidden&quot;;this.t[this.kZ.lastActive].cell.cell.style.top=&quot;-5000px&quot;;this.t[this.kZ.lastActive].cell.cell.style.zIndex=0}this.t[this.kZ.lastActive].tab.className=this._tabCss(this.kZ.lastActive);this.kZ.lastActive=null}};dhtmlXTabBar.prototype._isTabActive=function(a){return(a==this.kZ.lastActive&amp;&amp;this.kZ.lastActive!=null)};dhtmlXTabBar.prototype.wX=function(){return this.kZ.lastActive};dhtmlXTabBar.prototype.uK=function(){var a=this._getNextVisible(this.kZ.lastActive,true);if(a!=null){this.dP(a)}};dhtmlXTabBar.prototype.yK=function(){var a=this._getPrevVisible(this.kZ.lastActive,true);if(a!=null){this.dP(a)}};dhtmlXTabBar.prototype._enableTab=function(c,a){if(!this.t[c]||this.t[c].kZ.enabled){return}this.t[c].kZ.enabled=true;this.t[c].tab.className=this._tabCss(c);if(a==true){this.dP(c)}};dhtmlXTabBar.prototype._disableTab=function(c,a){if(!this.t[c]|| !this.t[c].kZ.enabled){return}this.t[c].kZ.enabled=false;this.t[c].tab.className=this._tabCss(c);if(a!==false&amp;&amp;this.kZ.lastActive==c){if(a==true){a=this._getNextVisible(c)||this._getPrevVisible(c)}this.dP(a)}};dhtmlXTabBar.prototype._isTabEnabled=function(a){return(this.t[a]!=null&amp;&amp;this.t[a].kZ.enabled==true)};dhtmlXTabBar.prototype._setTabText=function(h,g,c){if(!this.t[h]){return}var a=false;if(typeof(c)==&quot;undefined&quot;||c==null){c=this._getLabelWidth(g,this.t[h].kZ.close);a=true}this.t[h].tab.style.width=c+&quot;px&quot;;this.t[h].tab.childNodes[0].innerHTML=g;this.t[h].kZ.text=g;this.t[h].kZ.width=c;this.t[h].kZ.autowidth=a};dhtmlXTabBar.prototype._getTabText=function(a){if(!this.t[a]){return null}return this.t[a].kZ.text};dhtmlXTabBar.prototype._removeTab=function(o,g,m){if(!this.t[o]){return}if(m!=true&amp;&amp;this.t[o].kZ.remove!=true){this.t[o].kZ.remove=true;this._hideTab(o,g);return}if(typeof(g)==&quot;undefined&quot;){g=true}var h=this._getNextVisible(o);var l=this._getPrevVisible(o);if(this.t[o].kZ.transEv==true){this.t[o].tab.removeEventListener(this.kZ.transEv,this._doOnTrEnd);this.t[o].kZ.transEv=false}for(var c in this.t[o].kZ){this.t[o].kZ[c]=null}this.t[o].kZ=null;delete this.t[o].kZ;this.t[o].cell._unload();this.t[o].cell=null;this.t[o].tab.parentNode.removeChild(this.t[o].tab);this.t[o].tab=null;this.t[o]=null;delete this.t[o];if(this.kZ.lastActive==o&amp;&amp;g!=false){this.kZ.lastActive=null;var n=(g==true?(h||l||this._getFirstVisible()):g);if(n!=null){this.dP(n)}}else{if(m!=true){this._adjustTabs()}}};dhtmlXTabBar.prototype.clearAll=function(){for(var c in this.t){this._removeTab(c,false,true)}this.tabsArea.childNodes[1].childNodes[0].style[this.kZ.align]=&quot;0px&quot;};dhtmlXTabBar.prototype.moveTab=function(g,a){if(!this.t[g]||a&lt;0){return}a+=1;var c=this.tabsArea.childNodes[1].firstChild;if(c.childNodes[a]!=this.t[g].tab){c.removeChild(this.t[g].tab);if(a&gt;=c.childNodes.length){c.appendChild(this.t[g].tab)}else{c.insertBefore(this.t[g].tab,c.childNodes[a])}}c=null};dhtmlXTabBar.prototype._getIndex=function(h){var a= -1;var g=this.tabsArea.childNodes[1].firstChild;for(var c=1;c&lt;g.childNodes.length;c++){if(g.childNodes[c]._tabId==h){a=c-1}}g=null;return a};dhtmlXTabBar.prototype.getNumberOfTabs=function(h){if(h!==true){return this.tabsArea.childNodes[1].firstChild.childNodes.length}var g=this.tabsArea.childNodes[1].firstChild;var a=0;for(var c=0;c&lt;g.childNodes.length;c++){var l=g.childNodes[c]._tabId;if(l!=null&amp;&amp;this.t[l].kZ.visible){a++}}g=null;return a};dhtmlXTabBar.prototype.amz=dhtmlXTabBar.prototype.forEachTab=function(g){for(var c in this.t){g.apply(window,[this.t[c].cell])}};dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFullScreenResize()};window.dhtmlXTabBarCell=function(h,g){dhtmlXCellObject.apply(this,[h,&quot;_tabbar&quot;]);this.tabbar=g;this.kZ.skin=this.tabbar.kZ.skin;this.kZ.tabbar_funcs={show:&quot;_showTab&quot;,hide:&quot;_hideTab&quot;,Yi:&quot;_isTabVisible&quot;,enable:&quot;_enableTab&quot;,disable:&quot;_disableTab&quot;,isEnabled:&quot;_isTabEnabled&quot;,getIndex:&quot;_getIndex&quot;,getText:&quot;_getTabText&quot;,setText:&quot;_setTabText&quot;,setActive:&quot;dP&quot;,ft:&quot;_isTabActive&quot;,close:&quot;_removeTab&quot;};this._tabbarCall=function(a){return function(){var l=[this._idd];for(var m=0;m&lt;arguments.length;m++){l.push(arguments[m])}return this.tabbar[a].apply(this.tabbar,l)}};for(var c in this.kZ.tabbar_funcs){this[c]=this._tabbarCall(this.kZ.tabbar_funcs[c])}this.attachEvent(&quot;_onCellUnload&quot;,function(){this.tabbar=null;for(var l in this.kZ.tabbar_funcs){this[l]=null;this.kZ.tabbar_funcs[l]=null}this.kZ.tabbar_funcs=null});this.attachEvent(&quot;_onContentLoaded&quot;,function(){this.tabbar._callMainEvent(&quot;onContentLoaded&quot;,arguments);this.tabbar._callMainEvent(&quot;onTabContentLoaded&quot;,arguments)});this.attachEvent(&quot;_onContentAttach&quot;,function(){this.tabbar._adjustCell(this.tabbar.kZ.lastActive)})};window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject();function dhtmlXTabBarInitFromHTML(){var z=document.getElementsByTagName(&quot;div&quot;);for(var i=0;i&lt;z.length;i++){if(z[i].className.indexOf(&quot;dhtmlxTabBar&quot;)!= -1){var kZ={settings:{},tabs:[]};var n=z[i];var id=n.id;n.className=&quot;&quot;;var k=new Array();for(var j=0;j&lt;n.childNodes.length;j++){if(n.childNodes[j].tagName&amp;&amp;n.childNodes[j].tagName!=&quot;!&quot;){k[k.length]=n.childNodes[j]}}var skin=n.getAttribute(&quot;skin&quot;);if(skin!=null){kZ.settings.skin=skin}var w=new dhtmlXTabBar({parent:id,mode:n.getAttribute(&quot;mode&quot;)});window[id]=w;Xn=n.getAttribute(&quot;onbeforeinit&quot;);if(Xn){eval(Xn)}align=n.getAttribute(&quot;align&quot;);if(align){kZ.settings.align=align}var vI={};for(var j=0;j&lt;k.length;j++){var m=k[j];var tab={id:m.id,text:m.getAttribute(&quot;name&quot;),width:m.getAttribute(&quot;width&quot;),selected:m.getAttribute(&quot;selected&quot;),active:m.getAttribute(&quot;active&quot;),close:m.getAttribute(&quot;close&quot;)};var href=m.getAttribute(&quot;href&quot;);if(href){vI[m.id]={href:href}}else{vI[m.id]={vI:m}}kZ.tabs.push(tab)}w.loadStruct(kZ);for(var a in vI){if(vI[a].href){w.cells(a).attachURL(vI[a].href);vI[a].href=null}else{w.cells(a).attachObject(vI[a].vI);if(vI[a].vI.style.display==&quot;none&quot;){vI[a].vI.style.display=&quot;&quot;}vI[a].vI=null}vI[a]=null}var selId=n.getAttribute(&quot;select&quot;);if(selId!=null){w.tabs(selId).setActive()}else{if(w.wX()==null){var v=w._getFirstVisible();if(v!=null){w.cells(v).setActive()}}}Xn=n.getAttribute(&quot;oninit&quot;);if(Xn){eval(Xn)}}}if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;load&quot;,dhtmlXTabBarInitFromHTML,false)}else{window.detachEvent(&quot;onload&quot;,dhtmlXTabBarInitFromHTML)}}if(typeof(window.addEventListener)==&quot;function&quot;){window.addEventListener(&quot;load&quot;,dhtmlXTabBarInitFromHTML,false)}else{window.attachEvent(&quot;onload&quot;,dhtmlXTabBarInitFromHTML)}function dhtmlXWindows(o){var m=this;var h={};if(typeof(o)!=&quot;undefined&quot;){for(var g in o){h[g]=o[g]}}o=null;this.kZ={skin:window.dhx4.skin||(typeof(dhtmlx)!=&quot;undefined&quot;?dhtmlx.skin:null)||window.dhx4.skinDetect(&quot;dhxwins&quot;)||&quot;dhx_skyblue&quot;,vp_pos_ofs:20,vp_custom:false,ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:&quot;minmax&quot;,dblclick_active:false,dblclick_ev:(navigator.userAgent.indexOf(&quot;MSIE 6.0&quot;)&gt;=0||navigator.userAgent.indexOf(&quot;MSIE 7.0&quot;)&gt;=0||navigator.userAgent.indexOf(&quot;MSIE 8.0&quot;)&gt;=0),fr_cover:(navigator.userAgent.indexOf(&quot;MSIE 6.0&quot;)&gt;=0)};var c=window.dhx4.transDetect();this.kZ.tr={Nq:c.transProp,ev:c.transEv,height_open:&quot;height 0.2s cubic-bezier(0.25,0.1,0.25,1)&quot;,height_close:&quot;height 0.18s cubic-bezier(0.25,0.1,0.25,1)&quot;,op_open:&quot;opacity 0.16s ease-in&quot;,op_close:&quot;opacity 0.2s ease-out&quot;,op_v_open:&quot;1&quot;,op_v_close:&quot;0.4&quot;};if(!h.viewport){this.attachViewportTo(document.body)}else{if(h.viewport.object!=null){this.attachViewportTo(h.viewport.object)}else{if(h.viewport.left!=null&amp;&amp;h.viewport.top!=null&amp;&amp;h.viewport.width!=null&amp;&amp;h.viewport.height!=null){this.setViewport(h.viewport.left,h.viewport.top,h.viewport.width,h.viewport.height,h.viewport.parent)}else{this.attachViewportTo(document.body)}}}this.w={};this.createWindow=function(s,H,E,u,J){var q={};if(arguments.length==1&amp;&amp;typeof(s)==&quot;object&quot;){q=s}else{q.id=s;q.left=H;q.top=E;q.width=u;q.height=J;if(typeof(q.id)==&quot;undefined&quot;||q.id==null){q.id=window.dhx4.newId()}while(this.w[q.id]!=null){q.id=window.dhx4.newId()}}if(q.left==null){q.left=0}if(q.top==null){q.top=0}q.move=(q.move!=null&amp;&amp;window.dhx4.s2b(q.move)==false?false:(q.deny_move!=null&amp;&amp;window.dhx4.s2b(q.deny_move)==true?false:true));q.park=(q.park!=null&amp;&amp;window.dhx4.s2b(q.park)==false?false:(q.deny_park!=null&amp;&amp;window.dhx4.s2b(q.deny_park)==true?false:true));q.resize=(q.resize!=null&amp;&amp;window.dhx4.s2b(q.resize)==false?false:(q.deny_resize!=null&amp;&amp;window.dhx4.s2b(q.deny_resize)==true?false:true));q.keep_in_viewport=(q.keep_in_viewport!=null&amp;&amp;window.dhx4.s2b(q.keep_in_viewport));q.modal=(q.modal!=null&amp;&amp;window.dhx4.s2b(q.modal));q.center=(q.center!=null&amp;&amp;window.dhx4.s2b(q.center));q.text=(q.text!=null?q.text:(q.caption!=null?q.caption:&quot;dhtmlxWindow&quot;));q.header=(!(q.header!=null&amp;&amp;window.dhx4.s2b(q.header)==false));var K=document.createElement(&quot;DIV&quot;);K.className=&quot;dhxwin_active&quot;;K.style.viosibility=&quot;hidden&quot;;this.vp.appendChild(K);K._isWindow=true;K._idd=q.id;var A=document.createElement(&quot;DIV&quot;);A.className=&quot;dhxwin_hdr&quot;;A.style.zIndex=0;A.innerHTML=&quot;<DIV class="dhxwin_text"><DIV class="dhxwin_text_inside">&quot;+q.text+&quot;</DIV></DIV>&quot;;K.appendChild(A);A.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};A.oncontextmenu=function(a){a=a||event;a.cancelBubble=true;return false};A._isWinHdr=true;A.firstChild._isWinIcon=true;var v=document.createElement(&quot;DIV&quot;);v.className=&quot;dhxwin_brd&quot;;K.appendChild(v);var D=document.createElement(&quot;DIV&quot;);D.className=&quot;dhxwin_fr_cover&quot;;D.innerHTML=&quot;&lt;iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'&gt;&lt;/iframe&gt;&quot;;K.appendChild(D);this.w[q.id]={win:K,hdr:A,brd:v,fr_cover:D,b:{},kZ:{z_id:window.dhx4.newId(),actv:false,modal:false,maxed:false,parked:false,sticked:false,visible:true,header:true,text:q.text,keep_in_vp:q.keep_in_viewport,allow_move:q.move,allow_park:q.park,allow_resize:q.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var w={help:{title:&quot;Help&quot;,visible:false},stick:{title:&quot;Stick&quot;,visible:false},park:{title:&quot;Park&quot;,visible:true},minmax:{title:&quot;Min/Max&quot;,visible:true},close:{title:&quot;Close&quot;,visible:true}};for(var F in w){var C=new dhtmlXWindowsButton(this,q.id,F,w[F].title,false);if(w[F].visible==false){C.hide()}A.lastChild.appendChild(C.button);this.w[q.id].b[F]=C;C=null}this._winAdjustTitle(q.id);this.w[q.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[q.id].kZ.z_id);var I=new dhtmlXWindowsCell(q.id,this);this.w[q.id].win.insertBefore(I.cell,D);this.w[q.id].cell=I;if(typeof(window.addEventListener)==&quot;function&quot;){this.w[q.id].win.addEventListener(&quot;mousedown&quot;,this._winOnMouseDown,false);this.w[q.id].win.addEventListener(&quot;mouseup&quot;,this._winOnMouseDown,false);if(this.kZ.dblclick_ev){this.w[q.id].win.addEventListener(&quot;dblclick&quot;,this._winOnMouseDown,false)}}else{this.w[q.id].win.attachEvent(&quot;onmousedown&quot;,this._winOnMouseDown);this.w[q.id].win.attachEvent(&quot;onmouseup&quot;,this._winOnMouseDown);if(this.kZ.dblclick_ev){this.w[q.id].win.attachEvent(&quot;ondblclick&quot;,this._winOnMouseDown)}}this._winInitFRM(q.id);this._winSetPosition(q.id,q.left,q.top);this._winSetSize(q.id,q.width,q.height);this._winMakeActive(q.id);if(q.center==true){this.w[q.id].cell.center()}if(q.modal==true){this.w[q.id].cell.setModal(true)}if(q.header==false){this.w[q.id].cell.hideHeader()}f=K=A=v=D=I=null;return this.w[q.id].cell};this._winOnMouseDown=function(r){r=r||event;var a=r.target||r.srcElement;var q={press_type:r.type};while(a!=null&amp;&amp;a._isWindow!=true){if(typeof(a.className)!=&quot;undefined&quot;&amp;&amp;q.mode==null){if(typeof(a._buttonName)!=&quot;undefined&quot;){q.mode=&quot;button&quot;;q.button_name=a._buttonName}else{if(a._isWinHdr==true){q.mode=&quot;hdr&quot;}else{if(a._isWinIcon==true){q.mode=&quot;icon&quot;}}}}a=a.parentNode}if(q.mode==null){q.mode=&quot;win&quot;}q.id=(a!=null&amp;&amp;a._isWindow==true?a._idd:null);a=null;if(q.id!=null){m.callEvent(&quot;_winMouseDown&quot;,[r,q])}};this._winOnParkTrans=function(q){if(q.stopPropagation){q.stopPropagation()}var a=m.w[this._idd];if(q.propertyName==&quot;opacity&quot;){m._winCellClearOpacity(this._idd)}if(q.propertyName==&quot;height&quot;&amp;&amp;a.kZ.tr_mode==&quot;park&quot;){if(a.kZ.tr_mode==&quot;park&quot;){a.win.style[m.kZ.tr.Nq]=&quot;&quot;;if(!a.kZ.parked){m._winAdjustCell(this._idd);m._callMainEvent(&quot;onParkDown&quot;,this._idd);if(a.kZ.keep_in_vp){m._winAdjustPosition(this._idd,a.kZ.x,a.kZ.y)}}else{a.hdr.style.zIndex=3;m._callMainEvent(&quot;onParkUp&quot;,this._idd)}}}a=null};this.unload=function(){this.kZ.unloading=true;if(this._dndInitModule){this._dndUnloadModule()}for(var q in this.w){this._winClose(q)}this.w=null;if(this.cm!=null&amp;&amp;typeof(this._unloadContextMenu)==&quot;function&quot;){this._unloadContextMenu()}window.dhx4._eventable(this,&quot;clear&quot;);this.attachViewportTo(null);for(var q in this.kZ){this.kZ[q]=null;delete this.kZ[q]}for(var q in this){this[q]=null}m=q=null};window.dhx4._eventable(this);this.attachEvent(&quot;_winMouseDown&quot;,this._winMouseDownHandler);if(this._dndInitModule){this._dndInitModule()}if(h.wins!=null){for(var n=0;n&lt;h.wins.length;n++){var l=h.wins[n];this.createWindow(l)}}h=null;return this}dhtmlXWindows.prototype.forEachWindow=function(g){for(var c in this.w){g.apply(window,[this.w[c].cell])}};dhtmlXWindows.prototype.window=function(a){if(this.w[a]!=null){return this.w[a].cell}return null};dhtmlXWindows.prototype.isWindow=function(a){return(this.w[a]!=null)};dhtmlXWindows.prototype.findByText=function(h){var g=[];for(var c in this.w){if((this.w[c].cell.getText()).indexOf(String(h))&gt;=0){g.push(this.w[c])}}return g};dhtmlXWindows.prototype.setSkin=function(g){if(g==this.kZ.skin){return}if(this.vp!=null){this.vp.className=String(this.vp.className).replace(&quot;dhxwins_vp_&quot;+this.kZ.skin,&quot; dhxwins_vp_&quot;+g)}for(var c in this.w){this.w[c].cell._resetSizeState();this._winAdjustCell(c);this._winAdjustTitle(c)}this.kZ.skin=g};dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(false)};dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(true)};dhtmlXWindows.prototype._getTopBottomWin=function(l){var h=null;for(var c in this.w){if(this.w[c].kZ.visible){var g=false;if(h!=null){g=h.z&gt;this.w[c].win.style.zIndex;if(l){g= !g}}if(h==null||g){h={id:c,z:this.w[c].win.style.zIndex}}}}return(h?h.id:null)};dhtmlXWindows.prototype._winMakeActive=function(g,l){if(g!=null&amp;&amp;l!==true&amp;&amp;this.w[g].kZ.actv==true){return}var x=[];var r=[{name:&quot;modal&quot;,value:true},{name:&quot;sticked&quot;,value:true},{name:&quot;sticked&quot;,value:false}];var o={};for(var c=0;c&lt;r.length;c++){var n=r[c].name;var h=r[c].value;var y=[];for(var u in this.w){var v=this.w[u];if(o[u]==null&amp;&amp;v.kZ[n]===h&amp;&amp;v.kZ.visible==true){if(g!=u){window.dhx4.zim.clear(v.kZ.z_id);y.push([u,Number(v.win.style.zIndex)]);o[u]=true}}v=null}y.sort(function(w,q){return(w[1]&lt;q[1]?1: -1)});if(g!=null&amp;&amp;this.w[g].kZ[n]===h&amp;&amp;o[g]==null){window.dhx4.zim.clear(this.w[g].kZ.z_id);var m=[[g,Number(this.w[g].win.style.zIndex)]];y=m.concat(y);o[g]=true}x=x.concat(y)}for(var c=x.length-1;c&gt;=0;c--){var u=x[c][0];var v=this.w[u];v.win.style.zIndex=window.dhx4.zim.reserve(v.kZ.z_id);if(v.kZ.modal&amp;&amp;this.mcover!=null){for(var s in this.mcover){this.mcover[s].style.zIndex=v.win.style.zIndex}}this._winAdjustFRMZIndex(u);if(g==null&amp;&amp;c==0){g=u}v.kZ.actv=(g==u);v.win.className=(v.kZ.actv?&quot;dhxwin_active&quot;:&quot;dhxwin_inactive&quot;);v=null}if(g!=null&amp;&amp;this.kZ.last_active!=g){this._callMainEvent(&quot;onFocus&quot;,g)}this.kZ.last_active=g};dhtmlXWindows.prototype.attachViewportTo=function(g){if(this.kZ.vp_custom){while(this.vp.childNodes.length&gt;0){this.vp.removeChild(this.vp.lastChild)}this.vp.parentNode.removeChild(this.vp);this.vp=null}else{if(this.vp!=null){this.vp.className=String(this.vp.className).replace(new RegExp(&quot;\\s{1,}dhxwins_vp_&quot;+this.kZ.skin),&quot;&quot;)}}if(g==null){this.vp=null}else{this.vp=(typeof(g)==&quot;string&quot;?document.getElementById(g):g);this.vp.className+=&quot; dhxwins_vp_&quot;+this.kZ.skin;g=null;for(var c in this.w){this.vp.appendChild(this.w[c].win)}this.kZ.vp_custom=false}if(this.vp==document.body){document.body.style.position=&quot;static&quot;}};dhtmlXWindows.prototype.setViewport=function(c,m,h,a,l){var g=document.createElement(&quot;DIV&quot;);g.style.position=&quot;absolute&quot;;g.style.left=c+&quot;px&quot;;g.style.top=m+&quot;px&quot;;g.style.width=h+&quot;px&quot;;g.style.height=a+&quot;px&quot;;if(typeof(l)==&quot;undefined&quot;||l==null){l=document.body}else{if(typeof(l)==&quot;string&quot;){l=document.getElementById(l)}}l.appendChild(g);this.attachViewportTo(g);this.kZ.vp_custom=true;l=g=null};dhtmlXWindows.prototype._winSetPosition=function(h,a,g){var c=this.w[h];if(c.kZ.maxed){c.kZ.lastMX+=(a-c.kZ.x);c.kZ.lastMY+=(g-c.kZ.y)}c.kZ.x=a;c.kZ.y=g;c.win.style.left=c.kZ.x+&quot;px&quot;;c.win.style.top=c.kZ.y+&quot;px&quot;;this._winAdjustFRMPosition(h);c=null};dhtmlXWindows.prototype._winAdjustPosition=function(n,c,m){var g=this.w[n];if(typeof(c)==&quot;undefined&quot;){c=g.kZ.x}if(typeof(m)==&quot;undefined&quot;){m=g.kZ.y}var a=(g.kZ.keep_in_vp?0: -g.kZ.w+this.kZ.vp_pos_ofs);var l=(g.kZ.keep_in_vp?this.vp.clientWidth-g.kZ.w:this.vp.clientWidth-this.kZ.vp_pos_ofs);if(c&lt;a){c=a}else{if(c&gt;l){c=l}}var h=(g.kZ.keep_in_vp?this.vp.clientHeight-g.kZ.h:this.vp.clientHeight-this.kZ.vp_pos_ofs);if(m&lt;0){m=0}else{if(m&gt;h){m=h}}if(c!=g.kZ.x||m!=g.kZ.y){this._winSetPosition(n,c,m)}g=null};dhtmlXWindows.prototype._winSetSize=function(o,m,g,n,c){var h=this.w[o];var a=(m!=null?m:h.kZ.w);var l=(g!=null?g:h.kZ.h);if(this.kZ.ofs_w==null){h.win.style.width=a+&quot;px&quot;;h.win.style.height=l+&quot;px&quot;;this.kZ.ofs_w=h.win.offsetWidth-a;this.kZ.ofs_h=h.win.offsetHeight-l}if(h.kZ.min_w!=null&amp;&amp;a&lt;h.kZ.min_w){a=h.kZ.min_w}if(h.kZ.max_w!=null&amp;&amp;a&gt;h.kZ.max_w){a=h.kZ.max_w}if(!h.kZ.parked&amp;&amp;h.kZ.min_h!=null&amp;&amp;l&lt;h.kZ.min_h){l=h.kZ.min_h}if(h.kZ.max_h!=null&amp;&amp;l&gt;h.kZ.max_h){l=h.kZ.max_h}if(h.kZ.keep_in_vp){if(a&gt;this.vp.clientWidth){a=this.vp.clientWidth}if(l&gt;this.vp.clientHeight){l=this.vp.clientHeight}}h.win.style.width=a-this.kZ.ofs_w+&quot;px&quot;;h.win.style.height=l-this.kZ.ofs_h+&quot;px&quot;;h.kZ.w=a;h.kZ.h=l;this._winAdjustFRMSize(o);if(c){this._winAdjustPosition(o,h.kZ.x,h.kZ.y)}if(!h.kZ.parked&amp;&amp;n!=true){this._winAdjustCell(o)}h=null};dhtmlXWindows.prototype._winMinmax=function(l,g){if(typeof(g)!=&quot;undefined&quot;&amp;&amp;this.w[l].kZ.maxed==g){return}if(this.w[l].kZ.allow_resize==false){return}var c=this.w[l];if(c.kZ.parked){this._winPark(l,false)}if(c.kZ.maxed){this._winSetSize(l,c.kZ.lastMW,c.kZ.lastMH);this._winAdjustPosition(l,c.kZ.lastMX,c.kZ.lastMY);c.kZ.maxed=false}else{var a=0;var h=0;if(c.kZ.max_w!=null){a=c.kZ.x+Math.round(c.kZ.w-c.kZ.max_w)/2}if(c.kZ.max_h!=null){h=Math.max(c.kZ.y+Math.round(c.kZ.h-c.kZ.max_h)/2,0)}c.kZ.lastMX=c.kZ.x;c.kZ.lastMY=c.kZ.y;c.kZ.lastMW=c.kZ.w;c.kZ.lastMH=c.kZ.h;this._winSetSize(l,this.vp.clientWidth,this.vp.clientHeight);this._winAdjustPosition(l,a,h);c.kZ.maxed=true}c.b.minmax.setCss(c.kZ.maxed?&quot;minmaxed&quot;:&quot;minmax&quot;);if(c.kZ.maxed){this._callMainEvent(&quot;onMaximize&quot;,l)}else{this._callMainEvent(&quot;onMinimize&quot;,l)}c=null};dhtmlXWindows.prototype._winShow=function(c,a){if(this.w[c].kZ.visible==true){return}this.w[c].win.style.display=&quot;&quot;;this.w[c].kZ.visible=true;if(a==true||this.kZ.last_active==null){this._winMakeActive(c,true)}this._callMainEvent(&quot;onShow&quot;,c)};dhtmlXWindows.prototype._winHide=function(c,a){if(this.w[c].kZ.visible==false){return}this.w[c].win.style.display=&quot;none&quot;;this.w[c].kZ.visible=false;if(this.w[c].kZ.actv){this.w[c].kZ.actv=false;this.w[c].win.className=&quot;dhxwin_inactive&quot;;this._winMakeActive(null,true)}this._callMainEvent(&quot;onHide&quot;,c)};dhtmlXWindows.prototype._winPark=function(g,a){if(this.w[g].kZ.allow_park==false){return}if(this.w[g].kZ.header==false){return}var c=this.w[g];if(a==true&amp;&amp;this.kZ.tr.Nq!==false){c.win.style[this.kZ.tr.Nq]=this.kZ.tr[c.kZ.parked?&quot;height_open&quot;:&quot;height_close&quot;];if(!c.kZ.tr_ev){c.win.addEventListener(this.kZ.tr.ev,this._winOnParkTrans,false);c.kZ.tr_ev=true}}if(c.kZ.parked){c.hdr.className=String(c.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,&quot;&quot;);c.hdr.style.zIndex=0;c.kZ.parked=false;c.kZ.tr_mode=&quot;park&quot;;this._winCellSetOpacity(g,&quot;open&quot;,a);this._winSetSize(g,c.kZ.w,c.kZ.lastPH,(a==true&amp;&amp;this.kZ.tr.Nq!==false));if(!(a==true&amp;&amp;this.kZ.tr.Nq!==false)){this._callMainEvent(&quot;onParkDown&quot;,g);if(c.kZ.keep_in_vp){this._winAdjustPosition(g,c.kZ.x,c.kZ.y)}}}else{c.kZ.lastPH=c.kZ.h;c.hdr.className+=&quot; dhxwin_hdr_parked&quot;;if(a==false||this.kZ.tr.Nq==false){c.hdr.style.zIndex=3}c.kZ.parked=true;c.kZ.tr_mode=&quot;park&quot;;this._winCellSetOpacity(g,&quot;close&quot;,a);this._winSetSize(g,c.kZ.w,c.hdr.offsetHeight+this.kZ.ofs_h,(a==true&amp;&amp;this.kZ.tr.Nq!==false));if(!(a==true&amp;&amp;this.kZ.tr.Nq!==false)){this._callMainEvent(&quot;onParkUp&quot;,g)}}c=null};dhtmlXWindows.prototype._winCellSetOpacity=function(n,m,g,l){var c=this.w[n].cell;for(var h in c.kZ.idx){if({pr1:true,pr2:true}[h]!=true){if(g==true&amp;&amp;this.kZ.tr.Nq!=false){c.cell.childNodes[c.kZ.idx[h]].style[this.kZ.tr.Nq]=this.kZ.tr[&quot;op_&quot;+m]}c.cell.childNodes[c.kZ.idx[h]].style.opacity=this.kZ.tr[&quot;op_v_&quot;+m]}}c=null};dhtmlXWindows.prototype._winCellClearOpacity=function(h){var c=this.w[h].cell;for(var g in c.kZ.idx){if({pr1:true,pr2:true}[g]!=true){if(this.kZ.tr.Nq!=false){c.cell.childNodes[c.kZ.idx[g]].style[this.kZ.tr.Nq]=&quot;&quot;}}}c=null};dhtmlXWindows.prototype._winStick=function(c,a){if(typeof(a)!=&quot;undefined&quot;&amp;&amp;this.w[c].kZ.sticked==a){return}this.w[c].kZ.sticked= !this.w[c].kZ.sticked;this.w[c].b.stick.setCss(this.w[c].kZ.sticked?&quot;sticked&quot;:&quot;stick&quot;);this._winMakeActive(this.kZ.last_active,true);if(this.w[c].kZ.sticked){this._callMainEvent(&quot;onStick&quot;,c)}else{this._callMainEvent(&quot;onUnStick&quot;,c)}};dhtmlXWindows.prototype._winClose=function(h){if(this._callMainEvent(&quot;onClose&quot;,h)!==true&amp;&amp;this.kZ.unloading!=true){return}var g=this.w[h];if(g.kZ.fs_mode){g.cell.setToFullScreen(false)}if(g.kZ.modal){this._winSetModal(h,false)}window.dhx4.zim.clear(g.kZ.z_id);if(this.cm!=null&amp;&amp;this.cm.icon[h]!=null){this._detachContextMenu(&quot;icon&quot;,h,null)}if(typeof(window.addEventListener)==&quot;function&quot;){g.win.removeEventListener(&quot;mousedown&quot;,this._winOnMouseDown,false);if(this.kZ.dblclick_ev){g.win.removeEventListener(&quot;dblclick&quot;,this._winOnMouseDown,false)}}else{g.win.detachEvent(&quot;onmousedown&quot;,this._winOnMouseDown);if(this.kZ.dblclick_ev){g.win.attachEvent(&quot;ondblclick&quot;,this._winOnMouseDown)}}for(var c in g.b){this._winRemoveButton(h,c,true)}g.b=null;g.cell._unload();g.cell=null;g.brd.parentNode.removeChild(g.brd);g.brd=null;if(g.fr_cover!=null){g.fr_cover.parentNode.removeChild(g.fr_cover);g.fr_cover=null}if(g.fr_m_cover!=null){g.fr_m_cover.parentNode.removeChild(g.fr_m_cover);g.fr_m_cover=null}g.hdr._isWinHdr=true;g.hdr.firstChild._isWinIcon=true;g.hdr.onselectstart=null;g.hdr.parentNode.removeChild(g.hdr);g.hdr=null;for(var c in g.kZ){g.kZ[c]=null;delete g.kZ[c]}g.kZ=null;g.win._idd=null;g.win._isWindow=null;g.win.parentNode.removeChild(g.win);g.win=null;g=null;this.w[h]=null;delete this.w[h];if(!this.kZ.unloading){this._winMakeActive(null,true)}};dhtmlXWindows.prototype._winSetModal=function(n,h,m){if(this.w[n].kZ.modal==h){return}if(typeof(m)==&quot;undefined&quot;){m=true}var g=this.w[n];if(h==true&amp;&amp;g.kZ.modal==false){if(this.kZ.last_modal!=null){this._winSetModal(this.kZ.last_modal,false,false)}if(this.mcover==null){var l=document.createElement(&quot;DIV&quot;);l.className=&quot;dhxwins_mcover&quot;;this.vp.insertBefore(l,g.fr_m_cover||g.win);this.mcover={d:l};if(this.kZ.fr_cover){this.mcover.f=document.createElement(&quot;IFRAME&quot;);this.mcover.f.className=&quot;dhxwins_mcover&quot;;this.mcover.f.border=0;this.mcover.f.frameBorder=0;this.vp.insertBefore(this.mcover.f,l)}l=null}else{if(this.mcover.d.nextSibling!=(g.fr_m_cover||g.win)){this.vp.insertBefore(this.mcover.d,g.fr_m_cover||g.win);if(this.mcover.f!=null){this.vp.insertBefore(this.mcover.f,this.mcover.d)}}}g.kZ.modal=true;this.kZ.last_modal=n;this._winMakeActive(n,true)}else{if(h==false&amp;&amp;g.kZ.modal==true){g.kZ.modal=false;this.kZ.last_modal=null;if(m&amp;&amp;this.mcover!=null){for(var c in this.mcover){this.vp.removeChild(this.mcover[c]);this.mcover[c]=null}this.mcover=null}}}g=null};dhtmlXWindows.prototype._winMouseDownHandler=function(g,c){var a=g.target||g.srcElement;if(g.button&gt;=2){return}if(c.mode==&quot;button&quot;){if(c.press_type==&quot;mousedown&quot;){this.kZ.button_last=c.button_name}else{if(c.press_type==&quot;mouseup&quot;&amp;&amp;c.button_name==this.kZ.button_last){this.kZ.button_last=null;if(this._winButtonClick(c.id,c.button_name,g)!==true){return}}}}if((c.press_type==&quot;mousedown&quot;||c.press_type==&quot;dblclick&quot;)&amp;&amp;c.mode==&quot;hdr&quot;){this.kZ.dblclick_active=false;if(this.kZ.dblclick_ev==true){if(c.press_type==&quot;dblclick&quot;){this.kZ.dblclick_active=true}}else{if(this.kZ.dblclick_last==null){this.kZ.dblclick_last=new Date().getTime();this.dblclick_id=c.id}else{var a=new Date().getTime();if(this.kZ.dblclick_last+this.kZ.dblclick_tm&gt;a&amp;&amp;this.dblclick_id==c.id){this.kZ.dblclick_active=true;this.kZ.dblclick_last=null;this.dblclick_id=null}else{this.kZ.dblclick_last=a;this.dblclick_id=c.id}}}if(this.kZ.dblclick_active){this._winDoHeaderDblClick(c.id);return}}if(c.press_type==&quot;mousedown&quot;){this._winMakeActive(c.id)}};dhtmlXWindows.prototype._winDoHeaderDblClick=function(a){if(this.kZ.dblclick_mode==&quot;minmax&quot;){this._winMinmax(a);return}if(this.kZ.dblclick_mode==&quot;park&quot;){this._winPark(a,true);return}if(typeof(this.kZ.dblclick_mode)==&quot;function&quot;){this.kZ.dblclick_mode.apply(window,[a]);return}if(typeof(window[this.kZ.dblclick_mode])==&quot;function&quot;){window[this.kZ.dblclick_mode].apply(window,[a]);return}};dhtmlXWindows.prototype._winAdjustCell=function(c){var r=this.w[c];var q=1;var o=(r.kZ.header?r.hdr.offsetHeight:1);var h=r.win.clientWidth-2;var s=r.win.clientHeight-o-1;r.brd.style.left=q+&quot;px&quot;;r.brd.style.top=o+&quot;px&quot;;if(r.kZ.brd==null){r.brd.style.width=h+&quot;px&quot;;r.brd.style.height=s+&quot;px&quot;;r.kZ.brd={w:h-r.brd.offsetWidth,h:s-r.brd.offsetHeight}}r.brd.style.width=h+r.kZ.brd.w+&quot;px&quot;;r.brd.style.height=s+r.kZ.brd.h+&quot;px&quot;;var g=5;var a=1+g;var n=(r.kZ.header?o:o+g);var l=r.brd.clientWidth;var m=r.brd.clientHeight;r.cell._setSize(a,n,l,m);r.fr_cover.style.left=a+&quot;px&quot;;r.fr_cover.style.top=n+&quot;px&quot;;r.fr_cover.style.width=l+&quot;px&quot;;r.fr_cover.style.height=m+&quot;px&quot;;r=null};dhtmlXWindows.prototype._winAdjustTitle=function(h){var a=this.w[h].hdr.childNodes[0];var g=this.w[h].hdr.childNodes[1];var c=this.w[h].hdr.childNodes[2];g.style.paddingLeft=a.offsetWidth+12+&quot;px&quot;;g.style.paddingRight=c.offsetWidth+10+&quot;px&quot;;g=c=a=null};dhtmlXWindows.prototype._callMainEvent=function(c,h){var a=this.w[h];if(a.cell.mR(c)){var g=a.cell._callMainEvent(c,[a.cell])}else{var g=this.callEvent(c,[a.cell])}a=null;return g};dhtmlXWindows.prototype._winInitFRM=function(g){if(this.kZ.fr_cover!=true){return}var a=this.w[g];var c=document.createElement(&quot;IFRAME&quot;);c.className=&quot;dhxwin_main_fr_cover&quot;;c.border=0;c.frameBorder=0;c.style.zIndex=a.win.style.zIndex;a.win.parentNode.insertBefore(c,a.win);a.fr_m_cover=c;c=null};dhtmlXWindows.prototype._winAdjustFRMSize=function(c){var a=this.w[c];if(a.fr_m_cover!=null){a.fr_m_cover.style.width=a.kZ.w+&quot;px&quot;;a.fr_m_cover.style.height=a.kZ.h+&quot;px&quot;}a=null};dhtmlXWindows.prototype._winAdjustFRMPosition=function(c){var a=this.w[c];if(a.fr_m_cover!=null){a.fr_m_cover.style.left=a.win.style.left;a.fr_m_cover.style.top=a.win.style.top}a=null};dhtmlXWindows.prototype._winAdjustFRMZIndex=function(c){var a=this.w[c];if(a.fr_m_cover!=null){a.fr_m_cover.style.zIndex=a.win.style.zIndex}a=null};function dhtmlXWindowsCell(l,h){dhtmlXCellObject.apply(this,[l,&quot;_wins&quot;]);this.wins=h;this.cell._winId=l;this.kZ.skin=this.wins.kZ.skin;this.attachEvent(&quot;_onCellUnload&quot;,function(){if(this._unloadResize){this._unloadResize()}window.dhx4._eventable(this.cell,&quot;clear&quot;);this.cell._winId=null;this.wins=null;this.setText=null;this.getText=null;this.allowMove=null;this.denyMove=null;this.isMovable=null;this.allowResize=null;this.denyResize=null;this.isResizable=null;this.maximize=null;this.minimize=null;this.isMaximized=null;this.Yy=null;this.fI=null;this.adjustPosition=null;this.park=null;this.isParked=null;this.allowPark=null;this.denyPark=null;this.isParkable=null;this.show=null;this.hide=null;this.isHidden=null;this.stick=null;this.unstick=null;this.isSticked=null;this.setDimension=null;this.getDimension=null;this.setMinDimension=null;this.getMinDimension=null;this.setMaxDimension=null;this.getMaxDimension=null;this.keepInViewport=null;this.center=null;this.centerOnScreen=null;this.bringToTop=null;this.bringToBottom=null;this.isOnTop=null;this.isOnBottom=null;this.showHeader=null;this.hideHeader=null;this.setModal=null;this.isModal=null;this.close=null;this._adjustByCont=null;this.button=null;this.addUserButton=null;this.removeUserButton=null;g=null});this.attachEvent(&quot;_onContentLoaded&quot;,function(){this.wins._callMainEvent(&quot;onContentLoaded&quot;,this._idd)});this.attachEvent(&quot;_onContentMouseDown&quot;,function(m,a){this.wins.callEvent(&quot;_winMouseDown&quot;,[a,{id:m,mode:&quot;win&quot;}])});this._callMainEvent=function(m,a){return this.callEvent(m,a)};this.kZ.tr={};for(var c in this.wins.kZ.tr){this.kZ.tr[c]=this.wins.kZ.tr[c]}if(this.kZ.tr.Nq!=false){}if(this._initResize){this._initResize()}window.dhx4._eventable(this.cell);var g=this;this.cell.attachEvent(&quot;_setCellSize&quot;,function(a,o){var m=g.wins.w[this._winId].kZ.w-g.kZ.size.w;var n=g.wins.w[this._winId].kZ.h-g.kZ.size.h;g.setDimension(a+m,o+n)});return this}dhtmlXWindowsCell.prototype=new dhtmlXCellObject();dhtmlXWindowsCell.prototype.setText=function(a){this.wins.w[this._idd].kZ.text=a;this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=a};dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].kZ.text};dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].kZ.allow_move=true};dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].kZ.allow_move=false};dhtmlXWindowsCell.prototype.isMovable=function(){return(this.wins.w[this._idd].kZ.allow_move==true)};dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].kZ.allow_resize=true;this.wins.w[this._idd].b.minmax.enable()};dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].kZ.allow_resize=false;this.wins.w[this._idd].b.minmax.disable()};dhtmlXWindowsCell.prototype.isResizable=function(){return(this.wins.w[this._idd].kZ.allow_resize==true)};dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,true)};dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,false)};dhtmlXWindowsCell.prototype.isMaximized=function(){return(this.wins.w[this._idd].kZ.maxed==true)};dhtmlXWindowsCell.prototype.Yy=function(a,c){this.wins._winSetPosition(this._idd,a,c)};dhtmlXWindowsCell.prototype.fI=function(){var a=this.wins.w[this._idd];var c=[a.kZ.x,a.kZ.y];a=null;return c};dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)};dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,true)};dhtmlXWindowsCell.prototype.isParked=function(){return(this.wins.w[this._idd].kZ.parked==true)};dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].kZ.allow_park=true;this.wins.w[this._idd].b.park.enable()};dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].kZ.allow_park=false;this.wins.w[this._idd].b.park.disable()};dhtmlXWindowsCell.prototype.isParkable=function(){return(this.wins.w[this._idd].kZ.allow_park==true)};dhtmlXWindowsCell.prototype.show=function(a){this.wins._winShow(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)};dhtmlXWindowsCell.prototype.isHidden=function(){return(this.wins.w[this._idd].kZ.visible!=true)};dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,true)};dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,false)};dhtmlXWindowsCell.prototype.isSticked=function(){return(this.wins.w[this._idd].kZ.sticked==true)};dhtmlXWindowsCell.prototype.setDimension=function(g,a){var c=this.wins.w[this._idd];if(c.kZ.parked){this.wins._winPark(this._idd,false)}if(c.kZ.maxed){if(g!=null){c.kZ.lastMW=g}if(a!=null){c.kZ.lastMH=a}this.wins._winMinmax(this._idd)}else{this.wins._winSetSize(this._idd,g,a,false,true)}c=null};dhtmlXWindowsCell.prototype.getDimension=function(){var a=this.wins.w[this._idd];var c=[a.kZ.w,a.kZ.h];a=null;return c};dhtmlXWindowsCell.prototype.setMinDimension=function(g,a){var c=this.wins.w[this._idd];c.kZ.min_w=g;c.kZ.min_h=a;this.wins._winSetSize(this._idd,c.kZ.w,c.kZ.h);c=null};dhtmlXWindowsCell.prototype.getMinDimension=function(){var a=this.wins.w[this._idd];var c=[a.kZ.min_w,a.kZ.min_h];a=null;return c};dhtmlXWindowsCell.prototype.setMaxDimension=function(g,a){var c=this.wins.w[this._idd];c.kZ.max_w=g;c.kZ.max_h=a;this.wins._winSetSize(this._idd,c.kZ.w,c.kZ.h);c=null};dhtmlXWindowsCell.prototype.getMaxDimension=function(){var a=this.wins.w[this._idd];var c=[a.kZ.max_w,a.kZ.max_h];a=null;return c};dhtmlXWindowsCell.prototype.keepInViewport=function(a){this.wins.w[this._idd].kZ.keep_in_vp=window.dhx4.s2b(a)};dhtmlXWindowsCell.prototype.center=function(){var g=this.wins.vp;var c=this.wins.w[this._idd];var a=Math.round((g.clientWidth-c.kZ.w)/2);var h=Math.round((g.clientHeight-c.kZ.h)/2);this.wins._winSetPosition(this._idd,a,h);g=c=null};dhtmlXWindowsCell.prototype.centerOnScreen=function(){var c=this.wins.w[this._idd];var m=window.dhx4.screenDim();var l=window.dhx4.absLeft(this.wins.vp);var h=window.dhx4.absTop(this.wins.vp);var g=this.wins.vp.parentNode;while(g!=null){if(g.scrollLeft){l=l-g.scrollLeft}if(g.scrollTop){h=h-g.scrollTop}g=g.parentNode}var a=Math.round((m.right-m.left-c.kZ.w)/2);var n=Math.round((m.bottom-m.top-c.kZ.h)/2);this.wins._winAdjustPosition(this._idd,a-l,n-h);d=c=null};dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,true)};dhtmlXWindowsCell.prototype.bringToBottom=function(){var a=(this.wins.w[this._idd].kZ.actv?null:this.wins.kZ.last_active);window.dhx4.zim.clear(this.wins.w[this._idd].kZ.z_id);this.wins.w[this._idd].win.style.zIndex=0;this.wins._winMakeActive(a,true)};dhtmlXWindowsCell.prototype.isOnTop=function(){return(this.wins.w[this._idd].kZ.actv==true)};dhtmlXWindowsCell.prototype.isOnBottom=function(){var g={id:null,z: +Infinity};for(var c in this.wins.w){if(this.wins.w[c].kZ.visible&amp;&amp;this.wins.w[c].win.style.zIndex&lt;g.z){g.id=c;g.z=this.wins.w[c].win.style.zIndex}}return(g.id==this._idd)};dhtmlXWindowsCell.prototype.showHeader=function(){var a=this.wins.w[this._idd];if(a.kZ.header==false){a.hdr.className=String(a.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,&quot;&quot;);a.brd.className=String(a.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,&quot;&quot;);this.kZ.cells_cont=null;a.kZ.brd=null;a.kZ.header=true;this.wins._winAdjustCell(this._idd)}a=null};dhtmlXWindowsCell.prototype.hideHeader=function(){var a=this.wins.w[this._idd];if(a.kZ.header==true){if(a.kZ.parked){this.wins._winPark(this._idd,false)}a.hdr.className+=&quot; dhxwin_hdr_hidden&quot;;a.brd.className+=&quot; dhxwin_hdr_hidden&quot;;this.kZ.cells_cont=null;a.kZ.brd=null;a.kZ.header=false;this.wins._winAdjustCell(this._idd)}a=null};dhtmlXWindowsCell.prototype.setModal=function(a){this.wins._winSetModal(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.isModal=function(){return(this.wins.w[this._idd].kZ.modal==true)};dhtmlXWindowsCell.prototype._adjustByCont=function(a,c){a+=this.wins.w[this._idd].kZ.w-this.kZ.size.w;c+=this.wins.w[this._idd].kZ.h-this.kZ.size.h;this.wins._winSetSize(this._idd,a,c)};dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)};dhtmlXWindowsCell.prototype.setIconCss=function(a){this.wins.w[this._idd].hdr.firstChild.className=&quot;dhxwin_icon &quot;+a;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.setToFullScreen=function(c){c=window.dhx4.s2b(c);var a=this.wins.w[this._idd];if(a.kZ.fs_mode==c){a=null;return}if(this.wins.fsn==null){this.wins.fsn=document.createElement(&quot;DIV&quot;);this.wins.fsn.className=this.wins.vp.className+&quot; dhxwins_vp_fs&quot;;document.body.appendChild(this.wins.fsn)}if(c){this.wins.fsn.appendChild(a.win);this.maximize();this.hideHeader()}else{this.wins.vp.appendChild(a.win);this.minimize();this.showHeader();if(this.wins.fsn.childNodes.length==0){this.wins.fsn.parentNode.removeChild(this.wins.fsn);this.wins.fsn=null}}a.kZ.fs_mode=c;a=null};dhtmlXWindowsCell.prototype.button=function(a){if(a==&quot;minmax1&quot;||a==&quot;minmax2&quot;){a=&quot;minmax&quot;}return this.wins.w[this._idd].b[a]};dhtmlXWindowsCell.prototype.addUserButton=function(o,m,g){var a=new dhtmlXWindowsButton(this.wins,this._idd,o,g,true);var l=null;var c=this.wins.w[this._idd].hdr.lastChild;if(isNaN(m)){m=0}else{if(m&lt;0){m=0}}if(c.childNodes[m]!=null){l=c.childNodes[m]}if(l!=null){c.insertBefore(a.button,l)}else{c.appendChild(a.button)}this.wins.w[this._idd].b[o]=a;a=l=c=null;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.removeUserButton=function(a){if(this.wins.w[this._idd].b[a]==null||this.wins.w[this._idd].b[a].kZ.custom!=true){return}this.wins._winRemoveButton(this._idd,a)};window.dhtmlXWindowsButton=function(l,c,a,h,g){this.kZ={wins:l,winId:c,name:a,enabled:true,visible:true,custom:true};this.button=document.createElement(&quot;DIV&quot;);this.button._buttonName=a;this.button.title=h;this.enable=function(){this.kZ.enabled=true;this.setCss(this.kZ.css)};this.disable=function(){this.kZ.enabled=false;this.setCss(this.kZ.css)};this.isEnabled=function(){return(this.kZ.enabled==true)};this.show=function(){this.button.style.display=&quot;&quot;;this.kZ.visible=true;this.kZ.wins._winAdjustTitle(this.kZ.winId)};this.hide=function(){this.button.style.display=&quot;none&quot;;this.kZ.visible=false;this.kZ.wins._winAdjustTitle(this.kZ.winId)};this.isHidden=function(){return(this.kZ.visible==false)};this.setCss=function(n){this.kZ.css=n;var m=(this.kZ.enabled?&quot;&quot;:&quot;_dis&quot;);this.button.className=&quot;dhxwin_button&quot;+m+&quot; dhxwin_button_&quot;+this.kZ.css+m};this._doOnClick=function(m){return this.callEvent(&quot;onClick&quot;,[this.kZ.wins.w[this.kZ.winId].cell,this])};this.unload=function(m){dhx4._eventable(this,&quot;clear&quot;);this.button._buttonName=null;this.button.parentNode.removeChild(this.button);if(this.kZ.wins.cm!=null&amp;&amp;this.kZ.wins.cm.button[this.kZ.winId]!=null&amp;&amp;this.kZ.wins.cm.button[this.kZ.winId][this.kZ.name]!=null){this.kZ.wins._detachContextMenu(&quot;button&quot;,this.kZ.winId,this.kZ.name)}this.button=null;this.enable=null;this.disable=null;this.isEnabled=null;this.show=null;this.hide=null;this.isHidden=null;this.setCss=null;this.unload=null;if(m!=true){this.kZ.wins._winAdjustTitle(this.kZ.winId)}this.kZ.wins=null;this.kZ.winId=null;this.kZ=null};this.setCss(a);dhx4._eventable(this);return this};dhtmlXWindows.prototype._winButtonClick=function(g,a,c){if(!this.w[g].b[a].isEnabled()){return true}if(this.w[g].b[a]._doOnClick()!==true){return}if(a==&quot;help&quot;){this._callMainEvent(&quot;onHelp&quot;,g)}if(a==&quot;park&quot;){this._winPark(g,true)}if(a==&quot;minmax&quot;){this._winMinmax(g)}if(a==&quot;stick&quot;){this._winStick(g);return false}if(a==&quot;close&quot;){this._winClose(g);return false}return true};dhtmlXWindows.prototype._winRemoveButton=function(g,a,c){this.w[g].b[a].unload(c);this.w[g].b[a]=null;delete this.w[g].b[a]};dhtmlXWindows.prototype._dndInitModule=function(){var a=this;this._dndOnMouseDown=function(h,l){if(a.kZ.dblclick_active){return}if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}a.kZ.dnd={id:l,x:h.clientX,y:h.clientY,ready:true,css:false,tr:null,mode:&quot;def&quot;,moved:false};if(a.w[l].kZ.keep_in_vp){a.kZ.dnd.minX=0;a.kZ.dnd.maxX=a.vp.clientWidth-a.w[l].kZ.w;a.kZ.dnd.minY=0;a.kZ.dnd.maxY=a.vp.clientHeight-a.w[l].kZ.h}else{a.kZ.dnd.minX= -a.w[l].kZ.w+a.kZ.vp_pos_ofs;a.kZ.dnd.maxX=a.vp.clientWidth-a.kZ.vp_pos_ofs;a.kZ.dnd.minY=0;a.kZ.dnd.maxY=a.vp.clientHeight-a.kZ.vp_pos_ofs}var c=[&quot;MozTransform&quot;,&quot;WebkitTransform&quot;,&quot;OTransform&quot;,&quot;msTransform&quot;,&quot;transform&quot;];for(var g=0;g&lt;c.length;g++){if(document.documentElement.style[c[g]]!=null&amp;&amp;a.kZ.dnd.tr==null){a.kZ.dnd.tr=c[g];a.kZ.dnd.mode=&quot;tr&quot;}}if(a.kZ.dnd.mode==&quot;tr&quot;){a.w[l].win.style[a.kZ.dnd.tr]=&quot;translate(0px,0px)&quot;}a._dndInitEvents()};this._dndOnMouseMove=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}var h=a.kZ.dnd;var g=a.w[h.id];if(!h.css){g.win.className+=&quot; dhxwin_dnd&quot;;g.fr_cover.className+=&quot; dhxwin_fr_cover_dnd&quot;;a.vp.className+=&quot; dhxwins_vp_dnd&quot;;h.css=true}var c=l.clientX-h.x;var m=l.clientY-h.y;h.newX=g.kZ.x+c;h.newY=g.kZ.y+m;if(h.mode==&quot;tr&quot;){h.newX=Math.min(Math.max(h.newX,h.minX),h.maxX);c=h.newX-g.kZ.x;h.newY=Math.min(Math.max(h.newY,h.minY),h.maxY);m=h.newY-g.kZ.y;g.win.style[h.tr]=&quot;translate(&quot;+c+&quot;px,&quot;+m+&quot;px)&quot;}else{if(h.newX&lt;h.minX||h.newX&gt;h.maxX){h.newX=Math.min(Math.max(h.newX,h.minX),h.maxX)}else{h.x=l.clientX}if(h.newY&lt;h.minY||h.newY&gt;h.maxY){h.newY=Math.min(Math.max(h.newY,h.minY),h.maxY)}else{h.y=l.clientY}a._winSetPosition(h.id,h.newX,h.newY)}h.moved=true;g=h=null};this._dndOnMouseUp=function(){if(a.kZ.dnd!=null){var g=a.kZ.dnd;var c=a.w[g.id];if(g.newX!=null){if(g.mode==&quot;tr&quot;){a._winSetPosition(g.id,g.newX,g.newY);c.win.style[g.tr]=&quot;translate(0px,0px)&quot;}}if(g.css){c.win.className=String(c.win.className).replace(/\s{0,}dhxwin_dnd/gi,&quot;&quot;);c.fr_cover.className=String(c.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,&quot;&quot;);a.vp.className=String(a.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,&quot;&quot;)}a._dndUnloadEvents();if(g.moved){a._callMainEvent(&quot;onMoveFinish&quot;,g.id)}c=g=a.kZ.dnd=null}};this._dndOnSelectStart=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};this._dndInitEvents=function(){if(typeof(window.addEventListener)==&quot;function&quot;){window.addEventListener(&quot;mousemove&quot;,this._dndOnMouseMove,false);window.addEventListener(&quot;mouseup&quot;,this._dndOnMouseUp,false);window.addEventListener(&quot;selectstart&quot;,this._dndOnSelectStart,false)}else{document.body.attachEvent(&quot;onmousemove&quot;,this._dndOnMouseMove);document.body.attachEvent(&quot;onmouseup&quot;,this._dndOnMouseUp);document.body.attachEvent(&quot;onselectstart&quot;,this._dndOnSelectStart)}};this._dndUnloadEvents=function(){if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;mousemove&quot;,this._dndOnMouseMove,false);window.removeEventListener(&quot;mouseup&quot;,this._dndOnMouseUp,false);window.removeEventListener(&quot;selectstart&quot;,this._dndOnSelectStart,false)}else{document.body.detachEvent(&quot;onmousemove&quot;,this._dndOnMouseMove);document.body.detachEvent(&quot;onmouseup&quot;,this._dndOnMouseUp);document.body.detachEvent(&quot;onselectstart&quot;,this._dndOnSelectStart)}};this._dndUnloadModule=function(){this.detachEvent(this.kZ.dnd_evid);this.kZ.dnd_evid=null;this._dndOnMouseDown=null;this._dndOnMouseMove=null;this._dndOnMouseUp=null;this._dndOnSelectStart=null;this._dndInitEvents=null;this._dndUnloadEvents=null;this._dndInitModule=null;this._dndUnloadModule=null;a=null};this.kZ.dnd_evid=this.attachEvent(&quot;_winMouseDown&quot;,function(g,c){if(g.button&gt;=2){return}if(!(c.mode==&quot;hdr&quot;&amp;&amp;g.type==&quot;mousedown&quot;&amp;&amp;this.w[c.id].kZ.allow_move==true)){return}if(this.w[c.id].kZ.maxed&amp;&amp;this.w[c.id].kZ.max_w==null&amp;&amp;this.w[c.id].kZ.max_h==null){return}if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}this._dndOnMouseDown(g,c.id);return false})};dhtmlXWindowsCell.prototype._initResize=function(){var a=this;var c=navigator.userAgent;this.kZ.resize={b_width:6,c_type:(c.indexOf(&quot;MSIE 10.0&quot;)&gt;0||c.indexOf(&quot;MSIE 9.0&quot;)&gt;0||c.indexOf(&quot;MSIE 8.0&quot;)&gt;0||c.indexOf(&quot;MSIE 7.0&quot;)&gt;0||c.indexOf(&quot;MSIE 6.0&quot;)&gt;0)};this._rOnCellMouseMove=function(n){if(a.wins.kZ.resize_actv==true||a.wins.w[a._idd].kZ.allow_resize==false||a.kZ.progress==true||a.wins.w[a._idd].kZ.maxed==true||a.wins.w[a._idd].kZ.fs_mode==true){var l=a.wins.w[a._idd].brd;if(l.style.cursor!=&quot;default&quot;){l.style.cursor=&quot;default&quot;}l=null;return}n=n||event;var v=a.wins.w[a._idd].brd;var g=a.kZ.resize;var q=(a.wins.w[a._idd].kZ.header==false);var s=n.clientX;var o=n.clientY;var h=window.dhx4.absLeft(v);var u=window.dhx4.absTop(v);var m=&quot;&quot;;if(s&lt;=h+g.b_width){m=&quot;w&quot;}else{if(s&gt;=h+v.offsetWidth-g.b_width){m=&quot;e&quot;}}if(o&gt;=u+v.offsetHeight-g.b_width){m=&quot;s&quot;+m}else{if(q&amp;&amp;o&lt;=u+g.b_width){m=&quot;n&quot;+m}}if(m==&quot;&quot;){m=false}if(g.mode!=m){g.mode=m;if(m==false){v.style.cursor=&quot;default&quot;}else{v.style.cursor=m+&quot;-resize&quot;}}v=g=null};this._rOnCellMouseDown=function(m){if(a.kZ.resize.mode==false){return}if(a.kZ.progress==true){return}if(a.wins.w[a._idd].kZ.allow_resize==false){return}if(a.wins.w[a._idd].kZ.fs_mode==true){return}if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}var g=a.wins.w[a._idd];var l=a.kZ.resize;a.wins.kZ.resize_actv=true;l.min_w=g.kZ.min_w;l.min_h=g.kZ.min_h;l.max_w=g.kZ.max_w|| +Infinity;l.max_h=g.kZ.max_h|| +Infinity;if(g.cell.dataType==&quot;layout&quot;&amp;&amp;g.cell.dataObj!=null&amp;&amp;typeof(g.cell.dataObj._getWindowMinDimension)==&quot;function&quot;){var h=g.cell.dataObj._getWindowMinDimension(g.cell);l.min_w=Math.max(h.w,l.min_w);l.min_h=Math.max(h.h,l.min_h)}l.vp_l=a.wins.kZ.vp_pos_ofs;l.vp_r=a.wins.vp.clientWidth-a.wins.kZ.vp_pos_ofs;l.vp_b=a.wins.vp.clientHeight-a.wins.kZ.vp_pos_ofs;l.x=m.clientX;l.y=m.clientY;if(typeof(window.addEventListener)==&quot;function&quot;){window.addEventListener(&quot;mousemove&quot;,a._rOnWinMouseMove,false);window.addEventListener(&quot;mouseup&quot;,a._rOnWinMouseUp,false);window.addEventListener(&quot;selectstart&quot;,a._rOnSelectStart,false)}else{document.body.attachEvent(&quot;onmousemove&quot;,a._rOnWinMouseMove);document.body.attachEvent(&quot;onmouseup&quot;,a._rOnWinMouseUp);document.body.attachEvent(&quot;onselectstart&quot;,a._rOnSelectStart)}l.resized=false;l.vp_cursor=a.wins.vp.style.cursor;a.wins.vp.style.cursor=l.mode+&quot;-resize&quot;;g=l=null};this._rOnWinMouseMove=function(m){m=m||event;var h=a.wins.w[a._idd];var l=a.kZ.resize;if(!l.resized){h.fr_cover.className+=&quot; dhxwin_fr_cover_resize&quot;;l.resized=true}var g=m.clientX-l.x;var n=m.clientY-l.y;if(l.mode.indexOf(&quot;e&quot;)&gt;=0){l.rw=Math.min(Math.max(h.kZ.w+g,l.min_w),l.max_w);l.rx=null;if(h.kZ.x+l.rw&lt;l.vp_l){l.rw=l.vp_l-h.kZ.x}else{if(h.kZ.x+l.rw&gt;a.wins.vp.clientWidth){l.rw=a.wins.vp.clientWidth-h.kZ.x}}}else{if(l.mode.indexOf(&quot;w&quot;)&gt;=0){l.rw=Math.min(Math.max(h.kZ.w-g,l.min_w),l.max_w);l.rx=h.kZ.x+h.kZ.w-l.rw;if(l.rx&lt;0){l.rw=l.rw+l.rx;l.rx=0}else{if(l.rx&gt;l.vp_r){l.rw=l.rw-l.vp_r;l.rx=l.vp_r}}}}if(l.mode.indexOf(&quot;s&quot;)&gt;=0){l.rh=Math.min(Math.max(h.kZ.h+n,l.min_h),l.max_h);l.ry=null;if(h.kZ.y+l.rh&gt;a.wins.vp.clientHeight){l.rh=a.wins.vp.clientHeight-h.kZ.y}}else{if(l.mode.indexOf(&quot;n&quot;)&gt;=0){l.rh=Math.min(Math.max(h.kZ.h-n,l.min_h),l.max_h);l.ry=h.kZ.y+h.kZ.h-l.rh;if(l.ry&lt;0){l.rh=l.rh+l.ry;l.ry=0}else{if(l.ry&gt;l.vp_b){l.rh=l.rh-l.vp_b;l.ry=l.vp_b}}}}a._rAdjustSizer();h=l=null};this._rOnWinMouseUp=function(){var h=a.kZ.resize;var g=a.wins.w[a._idd];a.wins.kZ.resize_actv=false;a.wins.vp.style.cursor=h.vp_cursor;g.fr_cover.className=String(g.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,&quot;&quot;);if(h.resized){a.wins._winSetSize(a._idd,h.rw,h.rh);if(h.rx==null){h.rx=g.kZ.x}if(h.ry==null){h.ry=g.kZ.y}if(h.rx!=g.kZ.x||h.ry!=g.kZ.y){a.wins._winSetPosition(a._idd,h.rx,h.ry)}}if(h.obj!=null){h.obj.parentNode.removeChild(h.obj);h.obj=null}if(h.objFR!=null){h.objFR.parentNode.removeChild(h.objFR);h.objFR=null}if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;mousemove&quot;,a._rOnWinMouseMove,false);window.removeEventListener(&quot;mouseup&quot;,a._rOnWinMouseUp,false);window.removeEventListener(&quot;selectstart&quot;,a._rOnSelectStart,false)}else{document.body.detachEvent(&quot;onmousemove&quot;,a._rOnWinMouseMove);document.body.detachEvent(&quot;onmouseup&quot;,a._rOnWinMouseUp);document.body.detachEvent(&quot;onselectstart&quot;,a._rOnSelectStart)}if(h.resized){if(a.dataType==&quot;layout&quot;&amp;&amp;a.dataObj!=null){a.dataObj.callEvent(&quot;onResize&quot;,[])}a.wins._callMainEvent(&quot;onResizeFinish&quot;,a._idd)}h.mode=&quot;&quot;;g=h=null};this._rOnSelectStart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false};this._rInitSizer=function(){var h=a.kZ.resize;var g=a.wins.w[a._idd];h.obj=document.createElement(&quot;DIV&quot;);h.obj.className=&quot;dhxwin_resize&quot;;h.obj.style.zIndex=g.win.style.zIndex;h.obj.style.cursor=h.mode+&quot;-resize&quot;;a.wins.vp.appendChild(h.obj);if(a.wins.kZ.fr_cover==true){h.objFR=document.createElement(&quot;IFRAME&quot;);h.objFR.className=&quot;dhxwin_resize_fr_cover&quot;;h.objFR.style.zIndex=h.obj.style.zIndex;a.wins.vp.insertBefore(h.objFR,h.obj)}h.rx=g.kZ.x;h.ry=g.kZ.y;h.rw=g.kZ.w;h.rh=g.kZ.h;h=null};this._rAdjustSizer=function(){var g=a.kZ.resize;if(!g.obj){this._rInitSizer()}g.obj.style.width=g.rw+&quot;px&quot;;g.obj.style.height=g.rh+&quot;px&quot;;if(g.rx!=null){g.obj.style.left=g.rx+&quot;px&quot;}if(g.ry!=null){g.obj.style.top=g.ry+&quot;px&quot;}if(g.objFR!=null){g.objFR.style.width=g.obj.style.width;g.objFR.style.height=g.obj.style.height;if(g.rx!=null){g.objFR.style.left=g.obj.style.left}if(g.ry!=null){g.objFR.style.top=g.obj.style.top}}g=null};if(typeof(window.addEventListener)==&quot;function&quot;){this.wins.w[this._idd].brd.addEventListener(&quot;mousemove&quot;,this._rOnCellMouseMove,false);this.wins.w[this._idd].brd.addEventListener(&quot;mousedown&quot;,this._rOnCellMouseDown,false)}else{this.wins.w[this._idd].brd.attachEvent(&quot;onmousemove&quot;,this._rOnCellMouseMove);this.wins.w[this._idd].brd.attachEvent(&quot;onmousedown&quot;,this._rOnCellMouseDown)}this._unloadResize=function(){if(typeof(window.addEventListener)==&quot;function&quot;){this.wins.w[this._idd].brd.removeEventListener(&quot;mousemove&quot;,this._rOnCellMouseMove,false);this.wins.w[this._idd].brd.removeEventListener(&quot;mousedown&quot;,this._rOnCellMouseDown,false)}else{this.wins.w[this._idd].brd.detachEvent(&quot;onmousemove&quot;,this._rOnCellMouseMove);this.wins.w[this._idd].brd.detachEvent(&quot;onmousedown&quot;,this._rOnCellMouseDown)}this._initResize=null;this._rOnCellMouseMove=null;this._rOnCellMouseDown=null;this._rOnWinMouseMove=null;this._rOnWinMouseUp=null;this._rOnSelectStart=null;this._rInitSizer=null;this._rAdjustSizer=null;this._unloadResize=null;this.kZ.resize=null;a=null}};dhtmlXWindows.prototype.attachContextMenu=function(a){return this._renderContextMenu(&quot;icon&quot;,null,null,a)};dhtmlXWindows.prototype.getContextMenu=function(){if(this.cm!=null&amp;&amp;this.cm.global!=null){return this.cm.global}return null};dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu(&quot;icon&quot;,null,null)};dhtmlXWindowsCell.prototype.attachContextMenu=function(a){return this.wins._renderContextMenu(&quot;icon&quot;,this._idd,null,a)};dhtmlXWindowsCell.prototype.getContextMenu=function(){if(this.wins.cm!=null&amp;&amp;this.wins.cm.icon[this._idd]!=null){return this.wins.cm.icon[this._idd]}return null};dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu(&quot;icon&quot;,this._idd,null)};dhtmlXWindowsButton.prototype.attachContextMenu=function(a){return this.kZ.wins._renderContextMenu(&quot;button&quot;,this.kZ.winId,this.kZ.name,a)};dhtmlXWindowsButton.prototype.getContextMenu=function(){if(this.kZ.wins.cm==null||this.kZ.wins.cm.button[this.kZ.winId]==null){return null}if(this.kZ.wins.cm.button[this.kZ.winId][this.kZ.name]!=null){return this.kZ.wins.cm.button[this.kZ.winId][this.kZ.name]}return null};dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.kZ.wins._detachContextMenu(&quot;button&quot;,this.kZ.winId,this.kZ.name)};dhtmlXWindows.prototype._renderContextMenu=function(n,m,g,c){var h=this;var a=false;if(this.cm==null){this.cm={global:null,icon:{},button:{}};a=true}if(m==null){if(this.cm.global!=null){return}}else{if(n==&quot;icon&quot;){if(this.cm.icon[m]!=null){return}}else{if(n==&quot;button&quot;){if(this.cm.button[m]!=null&amp;&amp;this.cm.button[m][g]!=null){return}}}}if(c==null){c={}}c.parent=null;c.context=true;var l=new dhtmlXMenuObject(c);l.setAutoHideMode(false);l.attachEvent(&quot;onShow&quot;,function(){this.kZ.wins_menu_open=true});l.attachEvent(&quot;onHide&quot;,function(){this.kZ.wins_menu_open=false;h.kZ.opened_menu=null});if(m==null){this.cm.global=l}else{if(n==&quot;icon&quot;){this.cm.icon[m]=l}else{if(n==&quot;button&quot;){if(this.cm.button[m]==null){this.cm.button[m]={}}this.cm.button[m][g]=l}}}if(a){this._showContextMenu=function(s,r){if(s.button&gt;=2){return}if(r.mode==&quot;icon&quot;&amp;&amp;r.id!=null&amp;&amp;r.press_type==&quot;mousedown&quot;){var u=this.cm.icon[r.id]||this.cm.global;if(u==null){return}s.cancelBubble=true;var q=this.w[r.id].hdr.firstChild;if(u.kZ.wins_menu_open&amp;&amp;this.kZ.opened_menu==r.id){u.hideContextMenu()}else{this._hideContextMenu();u.showContextMenu(window.dhx4.absLeft(q),window.dhx4.absTop(q)+q.offsetHeight);this.kZ.opened_menu=r.id}u=q=null}if(r.mode==&quot;button&quot;&amp;&amp;r.id!=null&amp;&amp;r.press_type==&quot;mousedown&quot;){if(this.cm.button[r.id]==null||this.cm.button[r.id][r.button_name]==null){return}s.cancelBubble=true;this.kZ.button_last=null;var u=this.cm.button[r.id][r.button_name];var o=this.w[r.id].b[r.button_name].button;if(u.kZ.wins_menu_open&amp;&amp;this.kZ.opened_menu==r.id){u.hideContextMenu()}else{this._hideContextMenu();u.showContextMenu(window.dhx4.absLeft(o),window.dhx4.absTop(o)+o.offsetHeight);this.kZ.opened_menu=r.id}u=o=null}};this._hideContextMenu=function(u){if(u!=null){u=u||event;if(u.type==&quot;keydown&quot;&amp;&amp;u.keyCode!=27){return}var s=u.target||u.srcElement;var q=true;while(s!=null&amp;&amp;q==true){if(s.className!=null&amp;&amp;s.className.search(/SubLevelArea_Polygon/)&gt;=0){q=false}else{s=s.parentNode}}}if(q||u==null){if(h.cm.global!=null){h.cm.global.hideContextMenu()}for(var r in h.cm.icon){if(h.cm.icon[r]!=null){h.cm.icon[r].hideContextMenu()}}for(var r in h.cm.button){for(var o in h.cm.button[r]){if(h.cm.button[r][o]!=null){h.cm.button[r][o].hideContextMenu()}}}}};this._detachContextMenu=function(r,q,o){if(this.cm==null){return}if(q==null){if(this.cm.global!=null){this.cm.global.unload();this.cm.global=null}}else{if(r==&quot;icon&quot;){if(this.cm.icon[q]!=null){this.cm.icon[q].unload();this.cm.icon[q]=null}}else{if(r==&quot;button&quot;){if(this.cm.button[q]!=null&amp;&amp;this.cm.button[q][o]!=null){this.cm.button[q][o].unload();this.cm.button[q][o]=null}}}}};this.attachEvent(&quot;_winMouseDown&quot;,this._showContextMenu);if(typeof(window.addEventListener)==&quot;function&quot;){window.addEventListener(&quot;mousedown&quot;,this._hideContextMenu,false);window.addEventListener(&quot;keydown&quot;,this._hideContextMenu,false)}else{document.body.attachEvent(&quot;onmousedown&quot;,this._hideContextMenu);document.body.attachEvent(&quot;onkeydown&quot;,this._hideContextMenu)}this._unloadContextMenu=function(){this._detachContextMenu(&quot;icon&quot;,null,null);this.cm=null;if(typeof(window.addEventListener)==&quot;function&quot;){window.removeEventListener(&quot;mousedown&quot;,this._hideContextMenu,false);window.removeEventListener(&quot;keydown&quot;,this._hideContextMenu,false)}else{document.body.detachEvent(&quot;onmousedown&quot;,this._hideContextMenu);document.body.detachEvent(&quot;onkeydown&quot;,this._hideContextMenu)}h=null}}return l};if(!window.dhx){dhx={}}dhx.assert=function(c,a){if(!c){dhx.assert_error(a)}};dhx.assert_error=function(message){dhx.log(&quot;error&quot;,message);if(dhx.message&amp;&amp;typeof message==&quot;string&quot;){dhx.message({type:&quot;debug&quot;,text:message,expire: -1})}if(dhx.debug!==false){eval(&quot;debugger;&quot;)}};dhx.assert_core_ready=function(){if(window.dhx_on_core_ready){dhx_on_core_ready()}};dhx.version=&quot;3.0&quot;;dhx.codebase=&quot;./&quot;;dhx.name=&quot;Core&quot;;dhx.clone=function(c){var a=dhx.clone._function;a.prototype=c;return new a()};dhx.clone._function=function(){};dhx.extend=function(g,c,a){dhx.assert(g,&quot;Invalid mixing target&quot;);dhx.assert(c,&quot;Invalid mixing source&quot;);if(g._dhx_proto_wait){dhx.PowerArray.insertAt.call(g._dhx_proto_wait,c,1);return g}for(var h in c){if(!g[h]||a){g[h]=c[h]}}if(c.defaults){dhx.extend(g.defaults,c.defaults)}if(c.$init){c.$init.call(g)}return g};dhx.copy=function(a){dhx.assert(a,&quot;Invalid mixing target&quot;);if(arguments.length&gt;1){var c=arguments[0];a=arguments[1]}else{var c=(dhx.isArray(a)?[]:{})}for(var g in a){if(a[g]&amp;&amp;typeof a[g]==&quot;object&quot;&amp;&amp; !dhx.isDate(a[g])){c[g]=(dhx.isArray(a[g])?[]:{});dhx.copy(c[g],a[g])}else{c[g]=a[g]}}return c};dhx.single=function(g){var a=null;var c=function(h){if(!a){a=new g({})}if(a._reinit){a._reinit.apply(a,arguments)}return a};return c};dhx.protoUI=function(){if(dhx.debug_proto){dhx.log(&quot;UI registered: &quot;+arguments[0].name)}var g=arguments;var a=g[0].name;var c=function(l){if(!c){return dhx.ui[a].prototype}var n=c._dhx_proto_wait;if(n){var m=[n[0]];for(var h=1;h&lt;n.length;h++){m[h]=n[h];if(m[h]._dhx_proto_wait){m[h]=m[h].call(dhx,m[h].name)}if(m[h].prototype&amp;&amp;m[h].prototype.name){dhx.ui[m[h].prototype.name]=m[h]}}dhx.ui[a]=dhx.proto.apply(dhx,m);if(c._dhx_type_wait){for(var h=0;h&lt;c._dhx_type_wait.length;h++){dhx.Type(dhx.ui[a],c._dhx_type_wait[h])}}c=n=null}if(this!=dhx){return new dhx.ui[a](l)}else{return dhx.ui[a]}};c._dhx_proto_wait=Array.prototype.slice.call(arguments,0);return dhx.ui[a]=c};dhx.proto=function(){if(dhx.debug_proto){dhx.log(&quot;Proto chain:&quot;+arguments[0].name+&quot;[&quot;+arguments.length+&quot;]&quot;)}var m=arguments;var l=m[0];var c= ! !l.$init;var o=[];dhx.assert(l,&quot;Invalid mixing target&quot;);for(var h=m.length-1;h&gt;0;h--){dhx.assert(m[h],&quot;Invalid mixing source&quot;);if(typeof m[h]==&quot;function&quot;){m[h]=m[h].prototype}if(m[h].$init){o.push(m[h].$init)}if(m[h].defaults){var g=m[h].defaults;if(!l.defaults){l.defaults={}}for(var a in g){if(dhx.isUndefined(l.defaults[a])){l.defaults[a]=g[a]}}}if(m[h].type&amp;&amp;l.type){for(var a in m[h].type){if(!l.type[a]){l.type[a]=m[h].type[a]}}}for(var n in m[h]){if(!l[n]){l[n]=m[h][n]}}}if(c){o.push(l.$init)}l.$init=function(){for(var r=0;r&lt;o.length;r++){o[r].apply(this,arguments)}};var q=function(r){this.$ready=[];dhx.assert(this.$init,&quot;object without init method&quot;);this.$init(r);if(this._parseSettings){this._parseSettings(r,this.defaults)}for(var s=0;s&lt;this.$ready.length;s++){this.$ready[s].call(this)}};q.prototype=l;l=m=null;return q};dhx.bind=function(c,a){return function(){return c.apply(a,arguments)}};dhx.require=function(c,o,n){if(typeof c!=&quot;string&quot;){var m=c.length||0;var l=o;if(!m){for(var a in c){m++}o=function(){m--;if(m===0){l.apply(this,arguments)}};for(var a in c){dhx.require(a,o,n)}}else{o=function(){if(m){m--;dhx.require(c[c.length-m-1],o,n)}else{return l.apply(this,arguments)}};o()}return}if(dhx._modules[c]!==true){if(c.substr(-4)==&quot;.css&quot;){var h=dhx.html.create(&quot;LINK&quot;,{type:&quot;text/css&quot;,rel:&quot;stylesheet&quot;,href:dhx.codebase+c});document.head.appendChild(h);if(o){o.call(n||window)}return}var g=arguments[4];if(!o){dhx.exec(dhx.ajax().sync().get(dhx.codebase+c).responseText);dhx._modules[c]=true}else{if(!dhx._modules[c]){dhx._modules[c]=<A href="/wiki/index.php?title=O,n&amp;action=edit&amp;redlink=1" class="new" title="O,n (page does not exist)">o,n</A>;dhx.ajax(dhx.codebase+c,function(s){dhx.exec(s);var r=dhx._modules[c];dhx._modules[c]=true;for(var q=0;q&lt;r.length;q++){r[q][0].call(r[q][1]||window,!q)}})}else{dhx._modules[c].push([o,n])}}}};dhx._modules={};dhx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhx.wrap=function(c,a){if(!c){return a}return function(){var g=c.apply(this,arguments);a.apply(this,arguments);return g}};dhx.isUndefined=function(c){return typeof c==&quot;undefined&quot;};dhx.amY=function(h,c,g,a){return window.setTimeout(function(){var l=h.apply(c,(g||[]));h=c=g=null;return l},a||1)};dhx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhx.toNode=function(a){if(typeof a==&quot;string&quot;){return document.getElementById(a)}return a};dhx.toArray=function(a){return dhx.extend((a||[]),dhx.PowerArray,true)};dhx.toFunctor=function(str){return(typeof(str)==&quot;string&quot;)?eval(str):str};dhx.isArray=function(a){return Array.isArray?Array.isArray(a):(Object.prototype.toString.call(a)===&quot;[object Array]&quot;)};dhx.isDate=function(a){return a instanceof Date};dhx._events={};dhx.event=function(h,g,a,c){h=dhx.toNode(h);var l=dhx.uid();if(c){a=dhx.bind(a,c)}dhx._events[l]=[h,g,a];if(h.addEventListener){h.addEventListener(g,a,false)}else{if(h.attachEvent){h.attachEvent(&quot;on&quot;+g,a)}}return l};dhx.eventRemove=function(c){if(!c){return}dhx.assert(this._events[c],&quot;Removing non-existing event&quot;);var a=dhx._events[c];if(a[0].removeEventListener){a[0].removeEventListener(a[1],a[2],false)}else{if(a[0].detachEvent){a[0].detachEvent(&quot;on&quot;+a[1],a[2])}}delete this._events[c]};dhx.log=function(c,g,a){if(arguments.length==1){g=c;c=&quot;log&quot;}if(window.console&amp;&amp;console.log){c=c.toLowerCase();if(window.console[c]){window.console[c](g||&quot;unknown error&quot;)}else{window.console.log(c+&quot;: &quot;+g)}if(a){window.console.log(a)}}};dhx.log_full_time=function(a){dhx._start_time_log=new Date();dhx.log(&quot;Timing start [&quot;+a+&quot;]&quot;);window.setTimeout(function(){var c=new Date();dhx.log(&quot;Timing end [&quot;+a+&quot;]:&quot;+(c.valueOf()-dhx._start_time_log.valueOf())/1000+&quot;s&quot;)},1)};dhx.log_time=function(a){var g=&quot;_start_time_log&quot;+a;if(!dhx[g]){dhx[g]=new Date();dhx.log(&quot;Info&quot;,&quot;Timing start [&quot;+a+&quot;]&quot;)}else{var c=new Date();dhx.log(&quot;Info&quot;,&quot;Timing end [&quot;+a+&quot;]:&quot;+(c.valueOf()-dhx[g].valueOf())/1000+&quot;s&quot;);dhx[g]=null}};dhx.debug_code=function(a){a.call(dhx)};dhx.EventSystem={$init:function(){if(!this._evs_events){this._evs_events={};this._evs_handlers={};this._evs_map={}}},blockEvent:function(){this._evs_events._block=true},unblockEvent:function(){this._evs_events._block=false},mapEvent:function(a){dhx.extend(this._evs_map,a,true)},on_setter:function(a){if(a){for(var c in a){if(typeof a[c]==&quot;function&quot;){this.attachEvent(c,a[c])}}}},callEvent:function(g,l){if(this._evs_events._block){return true}g=g.toLowerCase();var h=this._evs_events[g.toLowerCase()];var a=true;if(dhx.debug){dhx.log(&quot;info&quot;,&quot;[&quot;+this.name+&quot;] event:&quot;+g,l)}if(h){for(var c=0;c&lt;h.length;c++){if(h[c].apply(this,(l||[]))===false){a=false}}}if(this._evs_map[g]&amp;&amp; !this._evs_map[g].callEvent(g,l)){a=false}return a},attachEvent:function(c,a,h){dhx.assert(a,&quot;Invalid event handler for &quot;+c);c=c.toLowerCase();h=h||dhx.uid();a=dhx.toFunctor(a);var g=this._evs_events[c]||dhx.toArray();g.push(a);this._evs_events[c]=g;this._evs_handlers[h]={f:a,t:c};return h},detachEvent:function(h){if(!this._evs_handlers[h]){return}var c=this._evs_handlers[h].t;var a=this._evs_handlers[h].f;var g=this._evs_events[c];g.remove(a);delete this._evs_handlers[h]},hasEvent:function(a){a=a.toLowerCase();return this._evs_events[a]?true:false}};dhx.extend(dhx,dhx.EventSystem);dhx.PowerArray={removeAt:function(c,a){if(c&gt;=0){this.splice(c,(a||1))}},remove:function(a){this.removeAt(this.find(a))},insertAt:function(c,g){if(!g&amp;&amp;g!==0){this.push(c)}else{var a=this.splice(g,(this.length-g));this[g]=c;this.push.apply(this,a)}},find:function(c){for(var a=0;a&lt;this.length;a++){if(c==this[a]){return a}}return-1},Kw:function(a,g){for(var c=0;c&lt;this.length;c++){a.call((g||this),this[c])}},map:function(a,g){for(var c=0;c&lt;this.length;c++){this[c]=a.call((g||this),this[c])}return this},filter:function(a,g){for(var c=0;c&lt;this.length;c++){if(!a.call((g||this),this[c])){this.splice(c,1);c--}}return this}};dhx.env={};(function(){if(navigator.userAgent.indexOf(&quot;Mobile&quot;)!= -1){dhx.env.mobile=true}if(dhx.env.mobile||navigator.userAgent.indexOf(&quot;iPad&quot;)!= -1||navigator.userAgent.indexOf(&quot;Android&quot;)!= -1){dhx.env.touch=true}if(navigator.userAgent.indexOf(&quot;Opera&quot;)!= -1){dhx.env.isOpera=true}else{dhx.env.isIE= ! !document.all;dhx.env.isFF= !document.all;dhx.env.isWebKit=(navigator.userAgent.indexOf(&quot;KHTML&quot;)!= -1);dhx.env.isSafari=dhx.env.isWebKit&amp;&amp;(navigator.userAgent.indexOf(&quot;Mac&quot;)!= -1)}if(navigator.userAgent.toLowerCase().indexOf(&quot;android&quot;)!= -1){dhx.env.isAndroid=true}dhx.env.transform=false;dhx.env.transition=false;var g={};g.uY=[&quot;transform&quot;,&quot;transition&quot;];g.transform=[&quot;transform&quot;,&quot;WebkitTransform&quot;,&quot;MozTransform&quot;,&quot;OTransform&quot;,&quot;msTransform&quot;];g.transition=[&quot;transition&quot;,&quot;WebkitTransition&quot;,&quot;MozTransition&quot;,&quot;OTransition&quot;,&quot;msTransition&quot;];var n=document.createElement(&quot;DIV&quot;);for(var l=0;l&lt;g.uY.length;l++){var h=g[g.uY[l]];for(var c=0;c&lt;h.length;c++){if(typeof n.style[h[c]]!=&quot;undefined&quot;){dhx.env[g.uY[l]]=h[c];break}}}n.style[dhx.env.transform]=&quot;translate3d(0,0,0)&quot;;dhx.env.translate=(n.style[dhx.env.transform])?&quot;translate3d&quot;:&quot;translate&quot;;var m=&quot;&quot;;var a=false;if(dhx.env.isOpera){m=&quot;-o-&quot;;a=&quot;O&quot;}if(dhx.env.isFF){m=&quot;-Moz-&quot;}if(dhx.env.isWebKit){m=&quot;-webkit-&quot;}if(dhx.env.isIE){m=&quot;-ms-&quot;}dhx.env.transformCSSPrefix=m;dhx.env.transformPrefix=a||(dhx.env.transformCSSPrefix.replace(/-/gi,&quot;&quot;));dhx.env.transitionEnd=((dhx.env.transformCSSPrefix==&quot;-Moz-&quot;)?&quot;transitionend&quot;:(dhx.env.transformPrefix+&quot;TransitionEnd&quot;))})();dhx.env.svg=(function(){return document.implementation.hasFeature(&quot;<A href="http://www.w3.org/TR/SVG11/feature#BasicStructure" class="external free" rel="nofollow">http://www.w3.org/TR/SVG11/feature#BasicStructure</A>&quot;,&quot;1.1&quot;)})();dhx.html={_native_on_selectstart:0,denySelect:function(){if(!dhx._native_on_selectstart){dhx._native_on_selectstart=document.onselectstart}document.onselectstart=dhx.html.aoZ},allowSelect:function(){if(dhx._native_on_selectstart!==0){document.onselectstart=dhx._native_on_selectstart||null}dhx._native_on_selectstart=0},index:function(c){var a=0;while(c=c.previousSibling){a++}return a},_style_cache:{},createCss:function(g){var h=&quot;&quot;;for(var c in g){h+=c+&quot;:&quot;+g[c]+&quot;;&quot;}var a=this._style_cache[h];if(!a){a=&quot;s&quot;+dhx.uid();this.addStyle(&quot;.&quot;+a+&quot;{&quot;+h+&quot;}&quot;);this._style_cache[h]=a}return a},addStyle:function(c){var a=document.createElement(&quot;style&quot;);a.setAttribute(&quot;type&quot;,&quot;text/css&quot;);a.setAttribute(&quot;media&quot;,&quot;screen&quot;);if(a.styleSheet){a.styleSheet.cssText=c}else{a.appendChild(document.createTextNode(c))}document.getElementsByTagName(&quot;head&quot;)[0].appendChild(a)},create:function(c,a,g){a=a||{};var h=document.createElement(c);for(var l in a){h.setAttribute(l,a[l])}if(a.style){h.style.cssText=a.style}if(a[&quot;class&quot;]){h.className=a[&quot;class&quot;]}if(g){h.innerHTML=g}return h},getValue:function(a){a=dhx.toNode(a);if(!a){return &quot;&quot;}return dhx.isUndefined(a.value)?a.innerHTML:a.value},remove:function(c){if(c instanceof Array){for(var a=0;a&lt;c.length;a++){this.remove(c[a])}}else{if(c&amp;&amp;c.parentNode){c.parentNode.removeChild(c)}}},insertBefore:function(c,g,a){if(!c){return}if(g&amp;&amp;g.parentNode){g.parentNode.insertBefore(c,g)}else{a.appendChild(c)}},locate:function(c,h){if(c.tagName){var a=c}else{c=c||event;var a=c.target||c.srcElement}while(a){if(a.getAttribute){var g=a.getAttribute(h);if(g){return g}}a=a.parentNode}return null},offset:function(h){if(h.getBoundingClientRect){var n=h.getBoundingClientRect();var o=document.body;var c=document.documentElement;var a=window.pageYOffset||c.scrollTop||o.scrollTop;var l=window.pageXOffset||c.scrollLeft||o.scrollLeft;var m=c.clientTop||o.clientTop||0;var q=c.clientLeft||o.clientLeft||0;var r=n.top+a-m;var g=n.left+l-q;return{y:Math.round(r),x:Math.round(g)}}else{var r=0,g=0;while(h){r=r+parseInt(h.offsetTop,10);g=g+parseInt(h.offsetLeft,10);h=h.offsetParent}return{y:r,x:g}}},posRelative:function(a){a=a||event;if(!dhx.isUndefined(a.offsetX)){return{x:a.offsetX,y:a.offsetY}}else{return{x:a.layerX,y:a.layerY}}},pos:function(a){a=a||event;if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}var c=((dhx.env.isIE)&amp;&amp;(document.compatMode!=&quot;BackCompat&quot;))?document.documentElement:document.body;return{x:a.clientX+c.scrollLeft-c.clientLeft,y:a.clientY+c.scrollTop-c.clientTop}},preventEvent:function(a){if(a&amp;&amp;a.preventDefault){a.preventDefault()}return dhx.html.aoZ(a)},aoZ:function(a){(a||event).cancelBubble=true;return false},addCss:function(c,a){c.className+=&quot; &quot;+a},removeCss:function(c,a){c.className=c.className.replace(RegExp(&quot; &quot;+a,&quot;g&quot;),&quot;&quot;)}};dhx.ready=function(a){if(this._ready){a.call()}else{this._ready_code.push(a)}};dhx._ready_code=[];(function(){var a=document.getElementsByTagName(&quot;SCRIPT&quot;);dhx.assert(a.length,&quot;Can't locate codebase&quot;);if(a.length){a=(a[a.length-1].getAttribute(&quot;src&quot;)||&quot;&quot;).split(&quot;/&quot;);a.splice(a.length-1,1);dhx.codebase=a.slice(0,a.length).join(&quot;/&quot;)+&quot;/&quot;}dhx.event(window,&quot;load&quot;,function(){dhx.callEvent(&quot;onReady&quot;,[]);dhx.amY(function(){dhx._ready=true;for(var c=0;c&lt;dhx._ready_code.length;c++){dhx._ready_code[c].call()}dhx._ready_code=[]})})})();dhx.locale=dhx.locale||{};dhx.assert_core_ready();dhx.ready(function(){dhx.event(document.body,&quot;click&quot;,function(a){dhx.callEvent(&quot;onClick&quot;,[a||event])})});(function(){var g={};var c=new RegExp(&quot;(\\r\\n|\\n)&quot;,&quot;g&quot;);var a=new RegExp('(\\&quot;)',&quot;g&quot;);dhx.Template=function(l){if(typeof l==&quot;function&quot;){return l}if(g[l]){return g[l]}l=(l||&quot;&quot;).toString();if(l.indexOf(&quot;-&gt;&quot;)!= -1){l=l.split(&quot;-&gt;&quot;);switch(l[0]){case &quot;html&quot;:l=dhx.html.getValue(l[1]);break;case &quot;http&quot;:l=new dhx.ajax().sync().get(l[1],{uid:dhx.uid()}).responseText;break;default:break}}l=(l||&quot;&quot;).toString();l=l.replace(c,&quot;\\n&quot;);l=l.replace(a,'\\&quot;');l=l.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'&quot;+(obj.$1?&quot;$2&quot;:&quot;$3&quot;)+&quot;');l=l.replace(/\{common\.([^}\(]*)\}/g,&quot;\&quot;+(common.$1||<I>)+\&quot;&quot;);l=l.replace(/\{common\.([^\}\(]*)\(\)\}/g,'&quot;+(common.$1?common.$1.apply(this, arguments):&quot;&quot;)+&quot;');l=l.replace(/\{obj\.([^}]*)\}/g,'&quot;+(obj.$1)+&quot;');l=l.replace(&quot;{obj}&quot;,'&quot;+obj+&quot;');l=l.replace(/#([^#'&quot;;, ]+)#/gi,'&quot;+(obj.$1)+&quot;');try{g[l]=Function(&quot;obj&quot;,&quot;common&quot;,'return &quot;'+l+'&quot;;')}catch(h){dhx.assert_error(&quot;Invalid template:&quot;+l)}return g[l]};dhx.Template.empty=function(){return &quot;&quot;};dhx.Template.bind=function(h){return dhx.bind(dhx.Template(h),this)};dhx.Type=function(o,n){if(o._dhx_proto_wait){if(!o._dhx_type_wait){o._dhx_type_wait=[]}o._dhx_type_wait.push(n);return}if(typeof o==&quot;function&quot;){o=o.prototype}if(!o.types){o.types={&quot;default&quot;:o.type};o.type.name=&quot;default&quot;}var h=n.name;var m=o.type;if(h){m=o.types[h]=dhx.clone(n.baseType?o.types[n.baseType]:o.type)}for(var l in n){if(l.indexOf(&quot;template&quot;)===0){m[l]=dhx.Template(n[l])}else{m[l]=n[l]}}return h}})();dhx.Settings={$init:function(){this._settings=this.config={}},define:function(c,a){if(typeof c==&quot;object&quot;){return this._parseSeetingColl(c)}return this._define(c,a)},_define:function(c,a){var g=this[c+&quot;_setter&quot;];return this._settings[c]=g?g.call(this,a,c):a},_parseSeetingColl:function(g){if(g){for(var c in g){this._define(c,g[c])}}},_parseSettings:function(g,a){var c={};if(a){c=dhx.extend(c,a)}if(typeof g==&quot;object&quot;&amp;&amp; !g.tagName){dhx.extend(c,g,true)}this._parseSeetingColl(c)},_mergeSettings:function(a,g){for(var c in g){switch(typeof a[c]){case &quot;object&quot;:a[c]=this._mergeSettings((a[c]||{}),g[c]);break;case &quot;undefined&quot;:a[c]=g[c];break;default:break}}return a},debug_freid_c_id:true,debug_freid_a_name:true};dhx.ajax=function(a,c,g){if(arguments.length!==0){var h=new dhx.ajax();if(g){h.master=g}return h.get(a,null,c)}if(!this.getXHR){return new dhx.ajax()}return this};dhx.ajax.count=0;dhx.ajax.prototype={master:null,getXHR:function(){if(dhx.env.isIE){return new ActiveXObject(&quot;Microsoft.xmlHTTP&quot;)}else{return new XMLHttpRequest()}},send:function(l,q,n){var c=this.getXHR();if(!dhx.isArray(n)){n=[n]}if(typeof q==&quot;object&quot;){var m=[];for(var g in q){var o=q[g];if(o===null||o===dhx.undefined){o=&quot;&quot;}m.push(g+&quot;=&quot;+encodeURIComponent(o))}q=m.join(&quot;&amp;&quot;)}if(q&amp;&amp;this.request===&quot;GET&quot;){l=l+(l.indexOf(&quot;?&quot;)!= -1?&quot;&amp;&quot;:&quot;?&quot;)+q;q=null}c.open(this.request,l,!this._sync);if(this.request===&quot;POST&quot;){c.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;)}var h=this;c.onreadystatechange=function(){if(!c.readyState||c.readyState==4){if(dhx.debug_time){dhx.log_full_time(&quot;data_loading&quot;)}dhx.ajax.count++;if(n&amp;&amp;h){for(var a=0;a&lt;n.length;a++){if(n[a]){var r=(n[a].success||n[a]);if(c.status&gt;=400||(!c.status&amp;&amp; !c.responseText)){r=n[a].error}if(r){r.call((h.master||h),c.responseText,c.responseXML,c)}}}}if(h){h.master=null}n=h=null}};c.send(q||null);return c},get:function(a,g,c){if(arguments.length==2){c=g;g=null}this.request=&quot;GET&quot;;return this.send(a,g,c)},post:function(a,g,c){this.request=&quot;POST&quot;;return this.send(a,g,c)},eT:function(a,g,c){this.request=&quot;PUT&quot;;return this.send(a,g,c)},del:function(a,g,c){this.request=&quot;DELETE&quot;;return this.send(a,g,c)},sync:function(){this._sync=true;return this},bind:function(a){this.master=a;return this}};dhx.send=function(g,c,n,m){var h=dhx.html.create(&quot;FORM&quot;,{target:(m||&quot;_self&quot;),action:g,method:(n||&quot;POST&quot;)},&quot;&quot;);for(var a in c){var l=dhx.html.create(&quot;INPUT&quot;,{type:&quot;hidden&quot;,name:a,value:c[a]},&quot;&quot;);h.appendChild(l)}h.style.display=&quot;none&quot;;document.body.appendChild(h);h.submit();document.body.removeChild(h)};dhx.AtomDataLoader={$init:function(a){this.data={};if(a){this._settings.datatype=a.datatype||&quot;json&quot;;this.$ready.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(a){if(!this._ready_for_data){return a}this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data){return a}this.parse(a,this._settings.datatype);return true},debug_freid_c_datatype:true,debug_freid_c_dataFeed:true,load:function(a,c){if(a.$proxy){a.load(this,typeof c==&quot;string&quot;?c:&quot;json&quot;);return}this.callEvent(&quot;onXLS&quot;,[]);if(typeof c==&quot;string&quot;){this.data.driver=dhx.DataDriver[c];c=arguments[2]}else{if(!this.data.driver){this.data.driver=dhx.DataDriver.json}}var g=[{success:this._onLoad,error:this._onLoadError}];if(c){if(dhx.isArray(c)){g.push.apply(g,c)}else{g.push(c)}}return dhx.ajax(a,g,this)},parse:function(c,a){this.callEvent(&quot;onXLS&quot;,[]);this.data.driver=dhx.DataDriver[a||&quot;json&quot;];this._onLoad(c,null)},_onLoad:function(n,c,a,g){var l=this.data.driver;var h=l.toObject(n,c);if(h){var m=l.getRecords(h)[0];this.data=(l?l.getDetails(m):n)}else{this._onLoadError(n,c,a)}this.callEvent(&quot;onXLE&quot;,[])},_onLoadError:function(g,a,c){this.callEvent(&quot;onXLE&quot;,[]);this.callEvent(&quot;onLoadError&quot;,arguments);dhx.callEvent(&quot;onLoadError&quot;,[g,a,c,this])},_check_data_feed:function(c){if(!this._settings.dataFeed||this._ignore_feed|| !c){return true}var a=this._settings.dataFeed;if(typeof a==&quot;function&quot;){return a.call(this,(c.id||c),c)}a=a+(a.indexOf(&quot;?&quot;)== -1?&quot;?&quot;:&quot;&amp;&quot;)+&quot;action=get&amp;id=&quot;+encodeURIComponent(c.id||c);this.callEvent(&quot;onXLS&quot;,[]);dhx.ajax(a,function(m,h,g){this._ignore_feed=true;var l=dhx.DataDriver.toObject(m,h);if(l){this.setValues(l.getDetails(l.getRecords()[0]))}else{this._onLoadError(m,h,g)}this._ignore_feed=false;this.callEvent(&quot;onXLE&quot;,[])},this);return false}};dhx.DataDriver={};dhx.DataDriver.json={toObject:function(data){if(!data){data=&quot;[]&quot;}if(typeof data==&quot;string&quot;){try{eval(&quot;dhx.temp=&quot;+data)}catch(e){dhx.assert_error(e);return null}data=dhx.temp}if(data.data){var t=data.data.config={};for(var Gb in data){if(Gb!=&quot;data&quot;){t[Gb]=data[Gb]}}data=data.data}return data},getRecords:function(a){if(a&amp;&amp; !dhx.isArray(a)){return[a]}return a},getDetails:function(a){if(typeof a==&quot;string&quot;){return{id:dhx.uid(),value:a}}return a},getInfo:function(c){var a=c.config;if(!a){return{}}return{_size:(a.total_count||0),_from:(a.pos||0),_parent:(a.parent||0),_config:(a.config),_key:(a.dhx_security)}},child:&quot;data&quot;};dhx.DataDriver.html={toObject:function(c){if(typeof c==&quot;string&quot;){var a=null;if(c.indexOf(&quot;&lt;&quot;)== -1){a=dhx.toNode(c)}if(!a){a=document.createElement(&quot;DIV&quot;);a.innerHTML=c}return a.getElementsByTagName(this.tag)}return c},getRecords:function(c){var g=[];for(var a=0;a&lt;c.childNodes.length;a++){var h=c.childNodes[a];if(h.nodeType==1){g.push(h)}}return g},getDetails:function(a){return dhx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:&quot;LI&quot;};dhx.DataDriver.jsarray={toObject:function(data){if(typeof data==&quot;string&quot;){eval(&quot;dhx.temp=&quot;+data);return dhx.temp}return data},getRecords:function(a){return a},getDetails:function(g){var a={};for(var c=0;c&lt;g.length;c++){a[&quot;data&quot;+c]=g[c]}return a},getInfo:function(a){return{_size:0,_from:0}}};dhx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(g){g=this.stringToArray(g);var a={};for(var c=0;c&lt;g.length;c++){a[&quot;data&quot;+c]=g[c]}return a},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(c){c=c.split(this.cell);for(var a=0;a&lt;c.length;a++){c[a]=c[a].replace(/^[ \t\n\r]*(\&quot;|)/g,&quot;&quot;).replace(/(\&quot;|)[ \t\n\r]*$/g,&quot;&quot;)}return c},row:&quot;\n&quot;,cell:&quot;,&quot;};dhx.DataDriver.xml={_isValidXML:function(a){if(!a|| !a.documentElement){return null}if(a.getElementsByTagName(&quot;parsererror&quot;).length){return null}return a},toObject:function(g,a){if(this._isValidXML(c)){return c}if(typeof g==&quot;string&quot;){var c=this.fromString(g.replace(/^[\s]+/,&quot;&quot;))}else{c=g}if(this._isValidXML(c)){return c}return null},getRecords:function(a){return this.xpath(a,this.records)},records:&quot;/*/item&quot;,child:&quot;item&quot;,config:&quot;/*/config&quot;,getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(c){var a=this.xpath(c,this.config);if(a.length){a=this.assignTypes(this.tagToObject(a[0],{}))}else{a=null}return{_size:(c.documentElement.getAttribute(&quot;total_count&quot;)||0),_from:(c.documentElement.getAttribute(&quot;pos&quot;)||0),_parent:(c.documentElement.getAttribute(&quot;parent&quot;)||0),_config:a,_key:(c.documentElement.getAttribute(&quot;dhx_security&quot;)||null)}},xpath:function(h,q){if(window.XPathResult){var g=h;if(h.nodeName.indexOf(&quot;document&quot;)== -1){h=h.ownerDocument}var n=[];var c=h.evaluate(q,g,null,XPathResult.ANY_TYPE,null);var o=c.iterateNext();while(o){n.push(o);o=c.iterateNext()}return n}else{var m=true;try{if(typeof(h.selectNodes)==&quot;undefined&quot;){m=false}}catch(l){}if(m){return h.selectNodes(q)}else{var a=q.split(&quot;/&quot;).pop();return h.getElementsByTagName(a)}}},assignTypes:function(c){for(var a in c){var g=c[a];if(typeof g==&quot;object&quot;){this.assignTypes(g)}else{if(typeof g==&quot;string&quot;){if(g===&quot;&quot;){continue}if(g==&quot;true&quot;){c[a]=true}else{if(g==&quot;false&quot;){c[a]=false}else{if(g==g*1){c[a]=c[a]*1}}}}}}return c},tagToObject:function(g,q){q=q||{};var l=false;var h=g.attributes;if(h&amp;&amp;h.length){for(var n=0;n&lt;h.length;n++){q[h[n].name]=h[n].value}l=true}var c=g.childNodes;var o={};for(var n=0;n&lt;c.length;n++){if(c[n].nodeType==1){var m=c[n].tagName;if(typeof q[m]!=&quot;undefined&quot;){if(!dhx.isArray(q[m])){q[m]=[q[m]]}q[m].push(this.tagToObject(c[n],{}))}else{q[c[n].tagName]=this.tagToObject(c[n],{})}l=true}}if(!l){return this.nodeValue(g)}q.value=q.value||this.nodeValue(g);return q},nodeValue:function(a){if(a.firstChild){return a.firstChild.data}return &quot;&quot;},fromString:function(g){try{if(window.DOMParser){return(new DOMParser()).parseFromString(g,&quot;text/xml&quot;)}if(window.ActiveXObject){var a=new ActiveXObject(&quot;Microsoft.xmlDOM&quot;);a.loadXML(g);return a}}catch(c){dhx.assert_error(c);return null}dhx.assert_error(&quot;Load from xml string is not supported&quot;)}};dhx.debug_code(function(){dhx.debug_load_event=dhx.attachEvent(&quot;onLoadError&quot;,function(l,c,h,a){var g=&quot;Data loading error, check console for details&quot;;if(l.indexOf(&quot;&lt;?php&quot;)===0){g=&quot;PHP support missed&quot;}else{if(l.indexOf(&quot;DHX_ERROR:&quot;)===0){g=l.replace(&quot;DHX_ERROR:&quot;,&quot;&quot;)}}if(dhx.message){dhx.message({type:&quot;debug&quot;,text:g,expire: -1})}if(window.console){console.log(&quot;Data loading error&quot;);console.log(&quot;Object:&quot;,a);console.log(&quot;Response:&quot;,l);console.log(&quot;XHTTP:&quot;,h)}});dhx.ready(function(){var a=document.location.href;if(a.indexOf(&quot;file:&quot;)===0){if(dhx.message){dhx.message({type:&quot;error&quot;,text:&quot;Please open sample by http,not as file://&quot;,expire: -1})}else{window.alert(&quot;Please open sample by http, not as file://&quot;)}}})});dhx.DataLoader=dhx.proto({$init:function(a){a=a||&quot;&quot;;this._ajax_queue=dhx.toArray();this.data=new dhx.DataStore();this.data.attachEvent(&quot;onClearAll&quot;,dhx.bind(this._call_onclearall,this));this.data.attachEvent(&quot;onServerConfig&quot;,dhx.bind(this._call_on_config,this));this.data.feed=this._feed},_feed:function(g,a,c){if(this._load_count){return this._load_count=[g,a,c]}else{this._load_count=true}this._feed_last=[g,a];this._feed_common.call(this,g,a,c)},_feed_common:function(h,c,g){var a=this.data.url;if(h&lt;0){h=0}this.load(a+((a.indexOf(&quot;?&quot;)== -1)?&quot;?&quot;:&quot;&amp;&quot;)+(this.dataCount()?(&quot;continue=true&amp;&quot;):&quot;&quot;)+&quot;start=&quot;+h+&quot;&amp;count=&quot;+c,[this._feed_callback,g])},_feed_callback:function(){var a=this._load_count;var c=this._feed_last;this._load_count=false;if(typeof a==&quot;object&quot;&amp;&amp;(a[0]!=c[0]||a[1]!=c[1])){this.data.feed.apply(this,a)}},load:function(a,c){var g=dhx.AtomDataLoader.load.apply(this,arguments);this._ajax_queue.push(g);if(!this.data.url){this.data.url=a}},loadNext:function(g,l,h,c,a){if(this._settings.datathrottle&amp;&amp; !a){if(this._throttle_request){window.clearTimeout(this._throttle_request)}this._throttle_request=dhx.amY(function(){this.loadNext(g,l,h,c,true)},this,0,this._settings.datathrottle);return}if(!l&amp;&amp;l!==0){l=this.dataCount()}this.data.url=this.data.url||c;if(this.callEvent(&quot;onDataRequest&quot;,[l,g,h,c])&amp;&amp;this.data.url){this.data.feed.call(this,l,g,h)}},_maybe_loading_already:function(c,g){var a=this._feed_last;if(this._load_count&amp;&amp;a){if(a[0]&lt;=g&amp;&amp;(a[1]+a[0]&gt;=c+g)){return true}}return false},_onLoad:function(h,c,a){this._ajax_queue.remove(a);var g=this.data.driver.toObject(h,c);if(g){this.data.Aq(g)}else{return this._onLoadError(h,c,a)}this._call_onready();this.callEvent(&quot;onXLE&quot;,[])},removeMissed_setter:function(a){return this.data._removeMissed=a},scheme_setter:function(a){this.data.scheme(a)},dataFeed_setter:function(a){this.data.attachEvent(&quot;onBeforeFilter&quot;,dhx.bind(function(n,m){if(this._settings.dataFeed){var l={};if(!n&amp;&amp; !m){return}if(typeof n==&quot;function&quot;){if(!m){return}n(m,l)}else{l={text:m}}this.clearAll();var c=this._settings.dataFeed;var h=[];if(typeof c==&quot;function&quot;){return c.call(this,m,l)}for(var g in l){h.push(&quot;dhx_filter[&quot;+g+&quot;]=&quot;+encodeURIComponent(l[g]))}this.load(c+(c.indexOf(&quot;?&quot;)&lt;0?&quot;?&quot;:&quot;&amp;&quot;)+h.join(&quot;&amp;&quot;),this._settings.datatype);return false}},this));return a},debug_freid_c_ready:true,debug_freid_c_datathrottle:true,_call_onready:function(){if(this._settings.ready&amp;&amp; !this._ready_was_used){var a=dhx.toFunctor(this._settings.ready);if(a){dhx.amY(a,this,arguments)}this._ready_was_used=true}},_call_onclearall:function(){for(var a=0;a&lt;this._ajax_queue.length;a++){this._ajax_queue[a].abort()}this._ajax_queue=dhx.toArray()},_call_on_config:function(a){this._parseSeetingColl(a)}},dhx.AtomDataLoader);dhx.DataStore=function(){this.name=&quot;DataStore&quot;;dhx.extend(this,dhx.EventSystem);this.setDriver(&quot;json&quot;);this.pull={};this.order=dhx.toArray();this._marks={}};dhx.DataStore.prototype={setDriver:function(a){dhx.assert(dhx.DataDriver[a],&quot;incorrect DataDriver&quot;);this.driver=dhx.DataDriver[a]},Aq:function(g,a){this.callEvent(&quot;onParse&quot;,[this.driver,g]);if(this._filter_order){this.filter()}var h=this.driver.getInfo(g);if(h._key){dhx.securityKey=h._key}if(h._config){this.callEvent(&quot;onServerConfig&quot;,[h._config])}var c=this.driver.getRecords(g);this._inner_parse(h,c);if(this._scheme_group&amp;&amp;this._group_processing){this._group_processing(this._scheme_group)}if(this._scheme_sort){this.blockEvent();this.sort(this._scheme_sort);this.unblockEvent()}this.callEvent(&quot;onStoreLoad&quot;,[this.driver,g]);this.refresh()},_inner_parse:function(c,n){var q=(c._from||0)*1;var m=true;var o=false;if(q===0&amp;&amp;this.order[0]){if(this._removeMissed){o={};for(var h=0;h&lt;this.order.length;h++){o[this.order[h]]=true}}m=false;q=this.order.length}var g=0;for(var h=0;h&lt;n.length;h++){var r=this.driver.getDetails(n[h]);var a=this.id(r);if(!this.pull[a]){this.order[g+q]=a;g++}else{if(m&amp;&amp;this.order[g+q]){g++}}if(this.pull[a]){dhx.extend(this.pull[a],r,true);if(this._scheme_update){this._scheme_update(this.pull[a])}if(o){delete o[a]}}else{this.pull[a]=r;if(this._scheme_init){this._scheme_init(r)}}}if(o){this.blockEvent();for(var l in o){this.remove(l)}this.unblockEvent()}if(!this.order[c._size-1]){this.order[c._size-1]=dhx.undefined}},id:function(a){return a.id||(a.id=dhx.uid())},changeId:function(c,a){if(this.pull[c]){this.pull[a]=this.pull[c]}this.pull[a].id=a;this.order[this.order.find(c)]=a;if(this._filter_order){this._filter_order[this._filter_order.find(c)]=a}if(this._marks[c]){this._marks[a]=this._marks[c];delete this._marks[c]}this.callEvent(&quot;onIdChange&quot;,[c,a]);if(this._render_change_id){this._render_change_id(c,a)}delete this.pull[c]},item:function(a){return this.pull[a]},update:function(c,a){if(dhx.isUndefined(a)){a=this.item(c)}if(this._scheme_update){this._scheme_update(a)}if(this.callEvent(&quot;onBeforeUpdate&quot;,[c,a])===false){return false}this.pull[c]=a;this.callEvent(&quot;onStoreUpdated&quot;,[c,a,&quot;update&quot;])},refresh:function(a){if(this._skip_refresh){return}if(a){this.callEvent(&quot;onStoreUpdated&quot;,[a,this.pull[a],&quot;paint&quot;])}else{this.callEvent(&quot;onStoreUpdated&quot;,[null,null,null])}},silent:function(c,a){this._skip_refresh=true;c.call(a||this);this._skip_refresh=false},getRange:function(h,g){if(h){h=this.indexById(h)}else{h=(this.$min||this.startOffset)||0}if(g){g=this.indexById(g)}else{g=Math.min(((this.$max||this.endOffset)||Infinity),(this.dataCount()-1));if(g&lt;0){g=0}}if(h&gt;g){var c=g;g=h;h=c}return this.getIndexRange(h,g)},getIndexRange:function(h,g){g=Math.min((g||Infinity),this.dataCount()-1);var a=dhx.toArray();for(var c=(h||0);c&lt;=g;c++){a.push(this.item(this.order[c]))}return a},dataCount:function(){return this.order.length},exists:function(a){return! !(this.pull[a])},move:function(a,h){dhx.assert(a&gt;=0&amp;&amp;h&gt;=0,&quot;DataStore::move&quot;,&quot;Incorrect indexes&quot;);var g=this.idByIndex(a);var c=this.item(g);this.order.removeAt(a);this.order.insertAt(g,Math.min(this.order.length,h));this.callEvent(&quot;onStoreUpdated&quot;,[g,c,&quot;move&quot;])},scheme:function(a){this._scheme={};this._scheme_init=a.$init;this._scheme_update=a.$update;this._scheme_serialize=a.$serialize;this._scheme_group=a.$group;this._scheme_sort=a.$sort;for(var c in a){if(c.substr(0,1)!=&quot;$&quot;){this._scheme[c]=a[c]}}},sync:function(h,g,a){if(typeof h==&quot;string&quot;){h=$$(&quot;source&quot;)}if(typeof g!=&quot;function&quot;){a=g;g=null}if(dhx.debug_bind){this.debug_sync_master=h;dhx.log(&quot;[sync] &quot;+this.debug_bind_master.name+&quot;@&quot;+this.debug_bind_master._settings.id+&quot; &lt;= &quot;+this.debug_sync_master.name+&quot;@&quot;+this.debug_sync_master._settings.id)}this._backbone_source=false;if(h.name!=&quot;DataStore&quot;){if(h.data&amp;&amp;h.data.name==&quot;DataStore&quot;){h=h.data}else{this._backbone_source=true}}var c=dhx.bind(function(o,l,n){if(this._backbone_source){if(!o){return}if(o.indexOf(&quot;change&quot;)===0){if(o==&quot;change&quot;){this.pull[l.id]=l.attributes;this.refresh(l.id);return}else{return}}if(o==&quot;reset&quot;){n=l}this.order=[];this.pull={};this._filter_order=null;for(var m=0;m&lt;n.models.length;m++){var q=n.models[m].id;this.order.push(q);this.pull[q]=n.models[m].attributes}}else{this._filter_order=null;this.order=dhx.toArray([].concat(h.order));this.pull=h.pull}if(g){this.silent(g)}if(this._on_sync){this._on_sync()}if(dhx.debug_bind){dhx.log(&quot;[sync:request] &quot;+this.debug_sync_master.name+&quot;@&quot;+this.debug_sync_master._settings.id+&quot; &lt;= &quot;+this.debug_bind_master.name+&quot;@&quot;+this.debug_bind_master._settings.id)}this.callEvent(&quot;onSyncApply&quot;,[]);if(!a){this.refresh()}else{a=false}},this);if(this._backbone_source){h.bind(&quot;all&quot;,c)}else{this._sync_events=[h.attachEvent(&quot;onStoreUpdated&quot;,c),h.attachEvent(&quot;onIdChange&quot;,dhx.bind(function(l,m){this.changeId(l,m)},this))]}c()},add:function(m,c){if(this._scheme){for(var g in this._scheme){if(dhx.isUndefined(m[g])){m[g]=this._scheme[g]}}}if(this._scheme_init){this._scheme_init(m)}var n=this.id(m);var a=arguments[2]||this.order;var l=a.length;if(dhx.isUndefined(c)||c&lt;0){c=l}if(c&gt;l){dhx.log(&quot;Warning&quot;,&quot;DataStore:add&quot;,&quot;Index of out of bounds&quot;);c=Math.min(a.length,c)}if(this.callEvent(&quot;onBeforeAdd&quot;,[n,m,c])===false){return false}dhx.assert(!this.exists(n),&quot;Not unique ID&quot;);this.pull[n]=m;a.insertAt(n,c);if(this._filter_order){var h=this._filter_order.length;if(!c&amp;&amp;this.order.length){h=0}this._filter_order.insertAt(n,h)}this.callEvent(&quot;onAfterAdd&quot;,[n,c]);this.callEvent(&quot;onStoreUpdated&quot;,[n,m,&quot;add&quot;]);return n},remove:function(g){if(dhx.isArray(g)){for(var a=0;a&lt;g.length;a++){this.remove(g[a])}return}if(this.callEvent(&quot;onBeforeDelete&quot;,[g])===false){return false}dhx.assert(this.exists(g),&quot;Not existing ID in remove command&quot;+g);var c=this.item(g);this.order.remove(g);if(this._filter_order){this._filter_order.remove(g)}delete this.pull[g];if(this._marks[g]){delete this._marks[g]}this.callEvent(&quot;onAfterDelete&quot;,[g]);this.callEvent(&quot;onStoreUpdated&quot;,[g,c,&quot;delete&quot;])},clearAll:function(){this.pull={};this.order=dhx.toArray();this._filter_order=this.url=null;this.callEvent(&quot;onClearAll&quot;,[]);this.refresh()},idByIndex:function(a){if(a&gt;=this.order.length||a&lt;0){dhx.log(&quot;Warning&quot;,&quot;DataStore::idByIndex Incorrect index&quot;)}return this.order[a]},indexById:function(c){var a=this.order.find(c);if(!this.pull[c]){dhx.log(&quot;Warning&quot;,&quot;DataStore::indexById Non-existing ID: &quot;+c)}return a},next:function(c,a){return this.order[this.indexById(c)+(a||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(c,a){return this.order[this.indexById(c)-(a||1)]},sort:function(l,c,a){var g=l;if(typeof l==&quot;function&quot;){g={as:l,dir:c}}else{if(typeof l==&quot;string&quot;){g={by:l.replace(/#/g,&quot;&quot;),dir:c,as:a}}}var h=[g.by,g.dir,g.as];if(!this.callEvent(&quot;onBeforeSort&quot;,h)){return}this._sort_core(g);this.refresh();this.callEvent(&quot;onAfterSort&quot;,h)},_sort_core:function(a){if(this.order.length){var g=this._sort._create(a);var c=this.getRange(this.first(),this.last());c.sort(g);this.order=c.map(function(h){dhx.assert(h,&quot;Client sorting can't be used with dynamic loading&quot;);return this.id(h)},this)}},_filter_reset:function(a){if(this._filter_order&amp;&amp; !a){this.order=this._filter_order;delete this._filter_order}},_filter_core:function(g,l,c){var h=dhx.toArray();for(var a=0;a&lt;this.order.length;a++){var m=this.order[a];if(g(this.item(m),l)){h.push(m)}}if(!c|| !this._filter_order){this._filter_order=this.order}this.order=h},filter:function(h,g,a){if(!this.callEvent(&quot;onBeforeFilter&quot;,[h,g])){return}this._filter_reset(a);if(!this.order.length){return}if(h){var c=h;g=g||&quot;&quot;;if(typeof h==&quot;string&quot;){h=h.replace(/#/g,&quot;&quot;);if(typeof g==&quot;function&quot;){c=function(l){return g(l[h])}}else{g=g.toString().toLowerCase();c=function(m,l){dhx.assert(m,&quot;Client side filtering can't be used with dynamic loading&quot;);return(m[h]||&quot;&quot;).toString().toLowerCase().indexOf(l)!= -1}}}this._filter_core(c,g,a,this._filterMode)}this.refresh();this.callEvent(&quot;onAfterFilter&quot;,[])},Kw:function(g,c){for(var a=0;a&lt;this.order.length;a++){g.call((c||this),this.item(this.order[a]))}},_methodPush:function(a,c){return function(){return a[c].apply(a,arguments)}},addMark:function(l,h,a,c){var g=this._marks[l]||{};this._marks[l]=g;if(!g[h]){g[h]=c||true;if(a){this.item(l).$css=(this.item(l).$css||&quot;&quot;)+&quot; &quot;+h;this.refresh(l)}}return g[h]},removeMark:function(l,h,a){var g=this._marks[l];if(g&amp;&amp;g[h]){delete g[h]}if(a){var c=this.item(l).$css;if(c){this.item(l).$css=c.replace(h,&quot;&quot;);this.refresh(l)}}},hasMark:function(g,c){var a=this._marks[g];return(a&amp;&amp;a[c])},provideApi:function(h,c){this.debug_bind_master=h;if(c){this.mapEvent({onbeforesort:h,onaftersort:h,onbeforeadd:h,onafteradd:h,onbeforedelete:h,onafterdelete:h,onbeforeupdate:h})}var g=[&quot;sort&quot;,&quot;add&quot;,&quot;remove&quot;,&quot;exists&quot;,&quot;idByIndex&quot;,&quot;indexById&quot;,&quot;item&quot;,&quot;update&quot;,&quot;refresh&quot;,&quot;dataCount&quot;,&quot;filter&quot;,&quot;next&quot;,&quot;previous&quot;,&quot;clearAll&quot;,&quot;first&quot;,&quot;last&quot;,&quot;serialize&quot;,&quot;sync&quot;,&quot;addMark&quot;,&quot;removeMark&quot;,&quot;hasMark&quot;];for(var a=0;a&lt;g.length;a++){h[g[a]]=this._methodPush(this,g[a])}},serialize:function(){var h=this.order;var a=[];for(var c=0;c&lt;h.length;c++){var g=this.pull[h[c]];if(this._scheme_serialize){g=this._scheme_serialize(g);if(g===false){continue}}a.push(g)}return a},_sort:{_create:function(a){return this._dir(a.dir,this._by(a.by,a.as))},_as:{date:function(g,c){g=g-0;c=c-0;return g&gt;c?1:(g&lt;c? -1:0)},&quot;int&quot;:function(g,c){g=g*1;c=c*1;return g&gt;c?1:(g&lt;c? -1:0)},string_strict:function(g,c){g=g.toString();c=c.toString();return g&gt;c?1:(g&lt;c? -1:0)},string:function(g,c){if(!c){return 1}if(!g){return-1}g=g.toString().toLowerCase();c=c.toString().toLowerCase();return g&gt;c?1:(g&lt;c? -1:0)}},_by:function(c,a){if(!c){return a}if(typeof a!=&quot;function&quot;){a=this._as[a||&quot;string&quot;]}dhx.assert(a,&quot;Invalid sorting method&quot;);return function(h,g){return a(h[c],g[c])}},_dir:function(c,a){if(c==&quot;asc&quot;|| !c){return a}return function(h,g){return a(h,g)* -1}}}};dhx.BaseBind={debug_freid_ignore:{id:true},bind:function(l,h,g){if(typeof l==&quot;string&quot;){l=dhx.ui.get(l)}if(l._initBindSource){l._initBindSource()}if(this._initBindSource){this._initBindSource()}if(!l.getBindData){dhx.extend(l,dhx.BindSource)}if(!this._bind_ready){var m=this.ht;if(this.filter){var c=this._settings.id;this.data._on_sync=function(){l._bind_updated[c]=false}}this.ht=function(){if(this._in_bind_processing){return}this._in_bind_processing=true;var n=this.callEvent(&quot;onBindRequest&quot;);this._in_bind_processing=false;return m.apply(this,((n===false)?arguments:[]))};if(this.getValue||this.getValues){this.save=function(){if(this.validate&amp;&amp; !this.validate()){return}l.setBindData((this.getValue?this.getValue:this.getValues()),this._settings.id)}}this._bind_ready=true}l.addBind(this._settings.id,h,g);if(dhx.debug_bind){dhx.log(&quot;[bind] &quot;+this.name+&quot;@&quot;+this._settings.id+&quot; &lt;= &quot;+l.name+&quot;@&quot;+l._settings.id)}var a=this._settings.id;this.attachEvent(this.touchable?&quot;onAfterRender&quot;:&quot;onBindRequest&quot;,function(){return l.getBindData(a)});if(!this._settings.dataFeed&amp;&amp;this.loadNext){this.data.attachEvent(&quot;onStoreLoad&quot;,function(){l._bind_updated[a]=false})}if(this.Yi(this._settings.id)){this.refresh()}},_unbind:function(g){g.removeBind(this._settings.id);var c=(this._sync_events||(this.data?this.data._sync_events:0));if(c&amp;&amp;g.data){for(var a=0;a&lt;c.length;a++){g.data.detachEvent(c[a])}}}};dhx.BindSource={$init:function(){this._bind_hash={};this._bind_updated={};this._ignore_binds={};this._bind_specific_rules(this)},saveBatch:function(a){this._do_not_update_binds=true;a.call(this);this._do_not_update_binds=false;this._update_binds()},setBindData:function(c,a){if(a){this._ignore_binds[a]=true}if(dhx.debug_bind){dhx.log(&quot;[bind:save] &quot;+this.name+&quot;@&quot;+this._settings.id+&quot; &lt;= @&quot;+a)}if(this.setValue){this.setValue(c)}else{if(this.setValues){this.setValues(c)}else{var g=this.getCursor();if(g){c=dhx.extend(this.item(g),c,true);this.update(g,c)}}}this.callEvent(&quot;onBindUpdate&quot;,[c,a]);if(this.save){this.save()}if(a){this._ignore_binds[a]=false}},getBindData:function(a,g){if(this._bind_updated[a]){return false}var c=dhx.ui.get(a);if(c.Yi(c._settings.id)){this._bind_updated[a]=true;if(dhx.debug_bind){dhx.log(&quot;[bind:request] &quot;+this.name+&quot;@&quot;+this._settings.id+&quot; =&gt; &quot;+c.name+&quot;@&quot;+c._settings.id)}this._bind_update(c,this._bind_hash[a][0],this._bind_hash[a][1]);if(g&amp;&amp;c.filter){c.refresh()}}},addBind:function(a,g,c){this._bind_hash[a]=[g,c]},removeBind:function(a){delete this._bind_hash[a];delete this._bind_updated[a];delete this._ignore_binds[a]},_bind_specific_rules:function(a){if(a.filter){dhx.extend(this,dhx.CollectionBind)}else{if(a.setValue){dhx.extend(this,dhx.ValueBind)}else{dhx.extend(this,dhx.RecordBind)}}},_update_binds:function(){if(!this._do_not_update_binds){for(var a in this._bind_hash){if(this._ignore_binds[a]){continue}this._bind_updated[a]=false;this.getBindData(a,true)}}},_bind_update_common:function(g,c,a){if(g.setValue){g.setValue(a?a[c]:a)}else{if(!g.filter){if(!a&amp;&amp;g.clear){g.clear()}else{if(g._check_data_feed(a)){g.setValues(dhx.clone(a))}}}else{g.data.silent(function(){this.filter(c,a)})}}g.callEvent(&quot;onBindApply&quot;,[a,c,this])}};dhx.DataValue=dhx.proto({name:&quot;DataValue&quot;,Yi:function(){return true},$init:function(a){this.data=&quot;&quot;||a;var c=(a&amp;&amp;a.id)?a.id:dhx.uid();this._settings={id:c};dhx.ui.views[c]=this},setValue:function(a){this.data=a;this.callEvent(&quot;onChange&quot;,[a])},getValue:function(){return this.data},refresh:function(){this.callEvent(&quot;onBindRequest&quot;)}},dhx.EventSystem,dhx.BaseBind);dhx.DataRecord=dhx.proto({name:&quot;DataRecord&quot;,Yi:function(){return true},$init:function(a){this.data=a||{};var c=(a&amp;&amp;a.id)?a.id:dhx.uid();this._settings={id:c};dhx.ui.views[c]=this},getValues:function(){return this.data},setValues:function(a){this.data=a;this.callEvent(&quot;onChange&quot;,[a])},refresh:function(){this.callEvent(&quot;onBindRequest&quot;)}},dhx.EventSystem,dhx.BaseBind,dhx.AtomDataLoader,dhx.Settings);dhx.DataCollection=dhx.proto({name:&quot;DataCollection&quot;,Yi:function(){if(!this.data.order.length&amp;&amp; !this.data._filter_order&amp;&amp; !this._settings.dataFeed){return false}return true},$init:function(a){this.data.provideApi(this,true);var c=(a&amp;&amp;a.id)?a.id:dhx.uid();this._settings.id=c;dhx.ui.views[c]=this;this.data.attachEvent(&quot;onStoreLoad&quot;,dhx.bind(function(){this.callEvent(&quot;onBindRequest&quot;,[])},this))},refresh:function(){this.callEvent(&quot;onBindRequest&quot;,[])}},dhx.DataLoader,dhx.EventSystem,dhx.BaseBind,dhx.Settings);dhx.ValueBind={$init:function(){this.attachEvent(&quot;onChange&quot;,this._update_binds)},_bind_update:function(l,h,g){var c=this.getValue()||&quot;&quot;;if(g){c=g(c)}if(l.setValue){l.setValue(c)}else{if(!l.filter){var a={};a[h]=c;if(l._check_data_feed(c)){l.setValues(a)}}else{l.data.silent(function(){this.filter(h,c)})}}l.callEvent(&quot;onBindApply&quot;,[c,h,this])}};dhx.RecordBind={$init:function(){this.attachEvent(&quot;onChange&quot;,this._update_binds)},_bind_update:function(g,c){var a=this.getValues()||null;this._bind_update_common(g,c,a)}};dhx.CollectionBind={$init:function(){this._cursor=null;this.attachEvent(&quot;onSelectChange&quot;,function(c){var a=this.getSelected();this.setCursor(a?(a.id||a):null)});this.attachEvent(&quot;onAfterCursorChange&quot;,this._update_binds);this.data.attachEvent(&quot;onStoreUpdated&quot;,dhx.bind(function(g,a,c){if(g&amp;&amp;g==this.getCursor()&amp;&amp;c!=&quot;paint&quot;){this._update_binds()}},this));this.data.attachEvent(&quot;onClearAll&quot;,dhx.bind(function(){this._cursor=null},this));this.data.attachEvent(&quot;onIdChange&quot;,dhx.bind(function(c,a){if(this._cursor==c){this._cursor=a}},this))},setCursor:function(a){if(a==this._cursor||(a!==null&amp;&amp; !this.item(a))){return}this.callEvent(&quot;onBeforeCursorChange&quot;,[this._cursor]);this._cursor=a;this.callEvent(&quot;onAfterCursorChange&quot;,[a])},getCursor:function(){return this._cursor},_bind_update:function(g,c){var a=this.item(this.getCursor())||this._settings.defaultData||null;this._bind_update_common(g,c,a)}};if(!dhx.ui){dhx.ui={}}if(!dhx.ui.views){dhx.ui.views={};dhx.ui.get=function(a){if(a._settings){return a}return dhx.ui.views[a]}}dhtmlXDataStore=function(c){var g=new dhx.DataCollection(c);var a=&quot;_dp_init&quot;;g[a]=function(l){var h=&quot;_methods&quot;;l[h]=[&quot;dummy&quot;,&quot;dummy&quot;,&quot;changeId&quot;,&quot;dummy&quot;];this.data._old_names={add:&quot;inserted&quot;,update:&quot;updated&quot;,&quot;delete&quot;:&quot;deleted&quot;};this.data.attachEvent(&quot;onStoreUpdated&quot;,function(o,m,n){if(o&amp;&amp; !l._silent){l.setUpdated(o,true,this._old_names[n])}});h=&quot;fD&quot;;l[h]=function(r,m){var o=this.obj.data.item(r);var q={id:r};q[this.action_param]=this.obj.getUserData(r);if(o){for(var n in o){q[n]=o[n]}}return q};this.changeId=function(n,m){this.data.changeId(n,m);l._silent=true;this.data.callEvent(&quot;onStoreUpdated&quot;,[m,this.item(m),&quot;update&quot;]);l._silent=false};h=&quot;_clearUpdateFlag&quot;;l[h]=function(){};this._userdata={}};g.dummy=function(){};g.setUserData=function(m,h,l){this._userdata[m]=l};g.getUserData=function(l,h){return this._userdata[l]};g.dataFeed=function(h){this.define(&quot;dataFeed&quot;,h)};dhx.extend(g,dhx.BindSource);return g};if(window.dhtmlXDataView){dhtmlXDataView.prototype._initBindSource=function(){this.Yi=function(){if(!this.data.order.length&amp;&amp; !this.data._filter_order&amp;&amp; !this._settings.dataFeed){return false}return true};var a=&quot;_settings&quot;;this._settings=this._settings||this[a];if(!this._settings.id){this._settings.id=dhx.uid()}this.unbind=dhx.BaseBind.unbind;this.unsync=dhx.BaseBind.unsync;dhx.ui.views[this._settings.id]=this}}if(window.dhtmlXChart){dhtmlXChart.prototype._initBindSource=function(){this.Yi=function(){if(!this.data.order.length&amp;&amp; !this.data._filtered_state&amp;&amp; !this._settings.dataFeed){return false}return true};var a=&quot;_settings&quot;;this._settings=this._settings||this[a];if(!this._settings.id){this._settings.id=dhx.uid()}this.unbind=dhx.BaseBind.unbind;this.unsync=dhx.BaseBind.unsync;dhx.ui.views[this._settings.id]=this}}dhx.BaseBind.unsync=function(a){return dhx.BaseBind._unbind.call(this,a)};dhx.BaseBind.unbind=function(a){return dhx.BaseBind._unbind.call(this,a)};dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)};dhx.BaseBind.legacySync=function(a,c){if(this._initBindSource){this._initBindSource()}if(a._initBindSource){a._initBindSource()}this.attachEvent(&quot;onAfterEditStop&quot;,function(g){this.save(g);return true});this.attachEvent(&quot;onDataRequest&quot;,function(l,h){for(var g=l;g&lt;l+h;g++){if(!a.data.order[g]){a.loadNext(h,l);return false}}});this.save=function(m){if(!m){m=this.getCursor()}var l=this.item(m);var g=a.item(m);for(var h in l){if(h.indexOf(&quot;$&quot;)!==0){g[h]=l[h]}}a.refresh(m)};if(a&amp;&amp;a.name==&quot;DataCollection&quot;){return a.data.sync.apply(this.data,arguments)}else{return this.data.sync.apply(this.data,arguments)}};if(window.dhtmlXForm){dhtmlXForm.prototype.bind=function(a){dhx.BaseBind.bind.apply(this,arguments);a.getBindData(this._settings.id)};dhtmlXForm.prototype.unbind=function(a){dhx.BaseBind._unbind.call(this,a)};dhtmlXForm.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this}};dhtmlXForm.prototype._check_data_feed=function(c){if(!this._settings.dataFeed||this._ignore_feed|| !c){return true}var a=this._settings.dataFeed;if(typeof a==&quot;function&quot;){return a.call(this,(c.id||c),c)}a=a+(a.indexOf(&quot;?&quot;)== -1?&quot;?&quot;:&quot;&amp;&quot;)+&quot;action=get&amp;id=&quot;+encodeURIComponent(c.id||c);this.load(a);return false};dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData;dhtmlXForm.prototype.getValues=function(){return this.getFormData(false,true)};dhtmlXForm.prototype.dataFeed=function(a){if(this._settings){this._settings.dataFeed=a}else{this._server_feed=a}};dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.Yi=function(a){return true}}if(window.scheduler){if(!window.Scheduler){window.Scheduler={}}Scheduler.$syncFactory=function(a){a.sync=function(g,l){if(this._initBindSource){this._initBindSource()}if(g._initBindSource){g._initBindSource()}var h=&quot;_process_loading&quot;;var c=function(r){a.clearAll();var m=g.data.order;var q=g.data.pull;var n=[];for(var o=0;o&lt;m.length;o++){if(l&amp;&amp;l.copy){n[o]=dhx.clone(q[m[o]])}else{n[o]=q[m[o]]}}a[h](n)};this.save=function(o){if(!o){o=this.getCursor()}var n=this.item(o);var m=g.item(o);if(this.callEvent(&quot;onStoreSave&quot;,[o,n,m])){dhx.extend(g.item(o),n,true);g.update(o)}};this.item=function(m){return this.getEvent(m)};this._sync_events=[g.data.attachEvent(&quot;onStoreUpdated&quot;,function(o,m,n){c.call(this)}),g.data.attachEvent(&quot;onIdChange&quot;,function(n,m){combo.changeOptionId(n,m)})];this.attachEvent(&quot;onEventChanged&quot;,function(m){this.save(m)});this.attachEvent(&quot;onEventAdded&quot;,function(n,m){if(!g.data.pull[n]){g.add(m)}});this.attachEvent(&quot;onEventDeleted&quot;,function(m){if(g.data.pull[m]){g.remove(m)}});c()};a.unsync=function(c){dhx.BaseBind._unbind.call(this,c)};a._initBindSource=function(){if(!this._settings){this._settings={id:dhx.uid()}}}};Scheduler.$syncFactory(window.scheduler)}if(window.dhtmlXCombo){dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)};dhtmlXCombo.unbind=function(a){dhx.BaseBind._unbind.call(this,a)};dhtmlXCombo.unsync=function(a){dhx.BaseBind._unbind.call(this,a)};dhtmlXCombo.prototype.dataFeed=function(a){if(this._settings){this._settings.dataFeed=a}else{this._server_feed=a}};dhtmlXCombo.prototype.sync=function(c,h){if(this._initBindSource){this._initBindSource()}if(c._initBindSource){c._initBindSource()}var g=this;var a=function(l){g.clearAll();g.addOption(this.serialize())};this._sync_events=[c.data.attachEvent(&quot;onStoreUpdated&quot;,function(n,l,m){a.call(this)}),c.data.attachEvent(&quot;onIdChange&quot;,function(m,l){g.changeOptionId(m,l)})];a.call(c)};dhtmlXCombo.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this;this.data={silent:dhx.bind(function(a){a.call(this)},this)};dhtmlxEventable(this.data);this.attachEvent(&quot;onChange&quot;,function(){this.callEvent(&quot;onSelectChange&quot;,[this.vL()])});this.attachEvent(&quot;onXLE&quot;,function(){this.callEvent(&quot;onBindRequest&quot;,[])})}};dhtmlXCombo.prototype.item=function(a){return this.acS(a)};dhtmlXCombo.prototype.getSelected=function(){return this.vL()};dhtmlXCombo.prototype.Yi=function(){if(!this.du.length&amp;&amp; !this._settings.dataFeed){return false}return true};dhtmlXCombo.prototype.refresh=function(){this.ht(true)};dhtmlXCombo.prototype.filter=function(c,a){alert(&quot;not implemented&quot;)}}if(window.dhtmlXGridObject){dhtmlXGridObject.prototype.bind=function(a,g,c){dhx.BaseBind.bind.apply(this,arguments)};dhtmlXGridObject.prototype.unbind=function(a){dhx.BaseBind._unbind.call(this,a)};dhtmlXGridObject.prototype.unsync=function(a){dhx.BaseBind._unbind.call(this,a)};dhtmlXGridObject.prototype.dataFeed=function(a){if(this._settings){this._settings.dataFeed=a}else{this._server_feed=a}};dhtmlXGridObject.prototype.sync=function(a,q){if(this._initBindSource){this._initBindSource()}if(a._initBindSource){a._initBindSource()}var c=this;var o=&quot;_parsing&quot;;var g=&quot;_parser&quot;;var m=&quot;_locator&quot;;var h=&quot;_process_store_row&quot;;var n=&quot;_get_store_data&quot;;this.save=function(r){if(!r){r=this.getCursor()}dhx.extend(a.item(r),this.item(r),true);a.update(r)};var l=function(x){var u=c.getCursor?c.getCursor():null;var w=0;if(c._legacy_ignore_next){w=c._legacy_ignore_next;c._legacy_ignore_next=false}else{c.clearAll()}var s=this.dataCount();if(s){c[o]=true;for(var r=w;r&lt;s;r++){var v=this.order[r];if(!v){continue}if(w&amp;&amp;c.aD[r]){continue}c.aD[r]={idd:v,data:this.pull[v]};c.aD[r][g]=c[h];c.aD[r][m]=c[n];c.bj[v]=this.pull[v]}if(!c.aD[s-1]){c.aD[s-1]=dhtmlx.undefined;c.tR=c.tR||this.url}if(c.aW){c.changePage()}else{if(c.ahK&amp;&amp;c._fillers){c._update_srnd_view()}else{c.render_dataset();c.callEvent(&quot;onXLE&quot;,[])}}c[o]=false}if(u&amp;&amp;c.setCursor){c.setCursor(c.bj[u]?u:null)}};this._sync_events=[a.data.attachEvent(&quot;onStoreUpdated&quot;,function(u,r,s){if(s==&quot;delete&quot;){c.deleteRow(u);c.data.callEvent(&quot;onStoreUpdated&quot;,[u,r,s])}else{if(s==&quot;update&quot;){c.callEvent(&quot;onSyncUpdate&quot;,[r,s]);c.update(u,r);c.data.callEvent(&quot;onStoreUpdated&quot;,[u,r,s])}else{if(s==&quot;add&quot;){c.callEvent(&quot;onSyncUpdate&quot;,[r,s]);c.add(u,r,this.indexById(u));c.data.callEvent(&quot;onStoreUpdated&quot;,[u,r,s])}else{l.call(this)}}}}),a.data.attachEvent(&quot;onStoreLoad&quot;,function(s,r){c.tR=a.data.url;c._legacy_ignore_next=s.getInfo(r)._from}),a.data.attachEvent(&quot;onIdChange&quot;,function(s,r){c.changeRowId(s,r)})];c.attachEvent(&quot;onDynXLS&quot;,function(u,s){for(var r=u;r&lt;u+s;r++){if(!a.data.order[r]){a.loadNext(s,u);return false}}c._legacy_ignore_next=u;l.call(a.data)});l.call(a.data);c.attachEvent(&quot;onEditCell&quot;,function(r,w,u,s,v){if(r==2&amp;&amp;s!=v){this.save(w)}return true});c.attachEvent(&quot;onClearAll&quot;,function(){var r=&quot;_f_rowsBuffer&quot;;this[r]=null});if(q&amp;&amp;q.sort){c.attachEvent(&quot;onBeforeSorting&quot;,function(u,s,r){if(s==&quot;connector&quot;){return false}var v=this.getColumnId(u);a.sort(&quot;#&quot;+v+&quot;#&quot;,(r==&quot;asc&quot;?&quot;asc&quot;:&quot;desc&quot;),(s==&quot;int&quot;?s:&quot;string&quot;));c.co(true,u,r);return false})}if(q&amp;&amp;q.filter){c.attachEvent(&quot;onFilterStart&quot;,function(u,r){var s=&quot;_con_f_used&quot;;if(c[s]&amp;&amp;c[s].length){return false}a.data.silent(function(){a.filter();for(var v=0;v&lt;u.length;v++){if(r[v]==&quot;&quot;){continue}var w=c.getColumnId(u[v]);a.filter(&quot;#&quot;+w+&quot;#&quot;,r[v],v!=0)}});a.refresh();return false});c.collectValues=function(r){var s=this.getColumnId(r);return(function(w){var u=[];var v={};this.data.Kw(function(y){var x=y[w];if(!v[x]){v[x]=true;u.push(x)}});u.sort();return u}).call(a,s)}}if(q&amp;&amp;q.select){c.attachEvent(&quot;onRowSelect&quot;,function(r){a.setCursor(r)})}c.clearAndLoad=function(r){a.clearAll();a.load(r)}};dhtmlXGridObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this;this.data={silent:dhx.bind(function(g){g.call(this)},this)};dhtmlxEventable(this.data);var a=&quot;_cCount&quot;;for(var c=0;c&lt;this[a];c++){if(!this.columnIds[c]){this.columnIds[c]=&quot;cell&quot;+c}}this.attachEvent(&quot;onSelectStateChanged&quot;,function(g){this.callEvent(&quot;onSelectChange&quot;,[g])});this.attachEvent(&quot;onSelectionCleared&quot;,function(){this.callEvent(&quot;onSelectChange&quot;,[null])});this.attachEvent(&quot;onEditCell&quot;,function(g,h){if(g===2&amp;&amp;this.getCursor){if(h&amp;&amp;h==this.getCursor()){this._update_binds()}}return true});this.attachEvent(&quot;onXLE&quot;,function(){this.callEvent(&quot;onBindRequest&quot;,[])})}};dhtmlXGridObject.prototype.item=function(m){if(m===null){return null}var l=this.dz(m);if(!l){return null}var a=&quot;_attrs&quot;;var h=dhx.copy(l[a]);h.id=m;var g=this.adG();for(var c=0;c&lt;g;c++){h[this.columnIds[c]]=this.cells(m,c).getValue()}return h};dhtmlXGridObject.prototype.update=function(m,l){for(var h=0;h&lt;this.columnIds.length;h++){var g=this.columnIds[h];if(!dhx.isUndefined(l[g])){this.cells(m,h).setValue(l[g])}}var c=&quot;_attrs&quot;;var a=this.dz(m)[c];for(var g in l){a[g]=l[g]}this.callEvent(&quot;onBindUpdate&quot;,[m])};dhtmlXGridObject.prototype.add=function(n,m,g){var a=[];for(var l=0;l&lt;this.columnIds.length;l++){var h=this.columnIds[l];a[l]=dhx.isUndefined(m[h])?&quot;&quot;:m[h]}this.hY(n,a,g);var c=&quot;_attrs&quot;;this.dz(n)[c]=dhx.copy(m)};dhtmlXGridObject.prototype.getSelected=function(){return this.acg()};dhtmlXGridObject.prototype.Yi=function(){var a=&quot;_f_rowsBuffer&quot;;if(!this.aD.length&amp;&amp; !this[a]&amp;&amp; !this._settings.dataFeed){return false}return true};dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()};dhtmlXGridObject.prototype.filter=function(m,l){if(this._settings.dataFeed){var h={};if(!m&amp;&amp; !l){return}if(typeof m==&quot;function&quot;){if(!l){return}m(l,h)}else{if(dhx.isUndefined(m)){h=l}else{h[m]=l}}this.clearAll();var a=this._settings.dataFeed;if(typeof a==&quot;function&quot;){return a.call(this,l,h)}var g=[];for(var c in h){g.push(&quot;dhx_filter[&quot;+c+&quot;]=&quot;+encodeURIComponent(h[c]))}this.load(a+(a.indexOf(&quot;?&quot;)&lt;0?&quot;?&quot;:&quot;&amp;&quot;)+g.join(&quot;&amp;&quot;));return false}if(l===null){return this.GF(0,function(){return false})}this.GF(0,function(n,o){return m.call(this,o,l)})}}if(window.dhtmlXTreeObject){dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)};dhtmlXTreeObject.prototype.unbind=function(a){dhx.BaseBind._unbind.call(this,a)};dhtmlXTreeObject.prototype.dataFeed=function(a){if(this._settings){this._settings.dataFeed=a}else{this._server_feed=a}};dhtmlXTreeObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this;this.data={silent:dhx.bind(function(a){a.call(this)},this)};dhtmlxEventable(this.data);this.attachEvent(&quot;onSelect&quot;,function(a){this.callEvent(&quot;onSelectChange&quot;,[a])});this.attachEvent(&quot;onEdit&quot;,function(a,c){if(a===2){if(c&amp;&amp;c==this.getCursor()){this._update_binds()}}return true})}};dhtmlXTreeObject.prototype.item=function(a){if(a===null){return null}return{id:a,text:this.getItemText(a)}};dhtmlXTreeObject.prototype.getSelected=function(){return this.ah()};dhtmlXTreeObject.prototype.Yi=function(){return true};dhtmlXTreeObject.prototype.refresh=function(){};dhtmlXTreeObject.prototype.filter=function(m,l){if(this._settings.dataFeed){var h={};if(!m&amp;&amp; !l){return}if(typeof m==&quot;function&quot;){if(!l){return}m(l,h)}else{if(dhx.isUndefined(m)){h=l}else{h[m]=l}}this.cx(0);var a=this._settings.dataFeed;if(typeof a==&quot;function&quot;){return a.call(this,[(data.id||data),data])}var g=[];for(var c in h){g.push(&quot;dhx_filter[&quot;+c+&quot;]=&quot;+encodeURIComponent(h[c]))}this.loadXML(a+(a.indexOf(&quot;?&quot;)&lt;0?&quot;?&quot;:&quot;&amp;&quot;)+g.join(&quot;&amp;&quot;));return false}};dhtmlXTreeObject.prototype.update=function(c,a){if(!dhx.isUndefined(a.text)){this.setItemText(c,a.text)}}}if(!window.dhtmlx){window.dhtmlx={}}(function(){var r=null;function u(A,x){var y=A.Eq;s(false);A.box.parentNode.removeChild(A.box);r=A.box=null;if(y){y(x)}}function a(y){if(r){y=y||event;var x=y.which||event.keyCode;if(dhtmlx.message.keyboard){if(x==13||x==32){u(r,true)}if(x==27){u(r,false)}}if(y.preventDefault){y.preventDefault()}return!(y.cancelBubble=true)}}if(document.attachEvent){document.attachEvent(&quot;onkeydown&quot;,a)}else{document.addEventListener(&quot;keydown&quot;,a,true)}function s(y){if(!s.cover){s.cover=document.createElement(&quot;DIV&quot;);s.cover.onkeydown=a;s.cover.className=&quot;dhx_modal_cover&quot;;document.body.appendChild(s.cover)}var x=document.body.scrollHeight;s.cover.style.display=y?&quot;inline-block&quot;:&quot;none&quot;}function m(y,x){return &quot;<DIV class="dhtmlx_popup_button"><DIV>&quot;+y+&quot;</DIV></DIV>&quot;}function g(y){if(!v.area){v.area=document.createElement(&quot;DIV&quot;);v.area.className=&quot;dhtmlx_message_area&quot;;v.area.style[v.position]=&quot;5px&quot;;document.body.appendChild(v.area)}v.hide(y.id);var x=document.createElement(&quot;DIV&quot;);x.innerHTML=&quot;<DIV>&quot;+y.text+&quot;</DIV>&quot;;x.className=&quot;dhtmlx-info dhtmlx-&quot;+y.type;x.onclick=function(){v.hide(y.id);y=null};if(v.position==&quot;bottom&quot;&amp;&amp;v.area.firstChild){v.area.insertBefore(x,v.area.firstChild)}else{v.area.appendChild(x)}if(y.expire&gt;0){v.timers[y.id]=window.setTimeout(function(){v.hide(y.id)},y.expire)}v.pull[y.id]=x;x=null;return y.id}function n(y,C,F){var E=document.createElement(&quot;DIV&quot;);E.className=&quot; dhtmlx_modal_box dhtmlx-&quot;+y.type;E.setAttribute(&quot;dhxbox&quot;,1);var x=&quot;&quot;;if(y.width){E.style.width=y.width}if(y.height){E.style.height=y.height}if(y.title){x+='<DIV class="dhtmlx_popup_title">'+y.title+&quot;</DIV>&quot;}x+='<DIV class="dhtmlx_popup_text"><SPAN>'+(y.content?&quot;&quot;:y.text)+'</SPAN></DIV><DIV class="dhtmlx_popup_controls">';if(C){x+=m(y.ok||&quot;OK&quot;,true)}if(F){x+=m(y.cancel||&quot;Cancel&quot;,false)}if(y.buttons){for(var A=0;A&lt;y.buttons.length;A++){x+=m(y.buttons[A],A)}}x+=&quot;</DIV>&quot;;E.innerHTML=x;if(y.content){var D=y.content;if(typeof D==&quot;string&quot;){D=document.getElementById(D)}if(D.style.display==&quot;none&quot;){D.style.display=&quot;&quot;}E.childNodes[y.title?1:0].appendChild(D)}E.onclick=function(J){J=J||event;var I=J.target||J.srcElement;if(!I.className){I=I.parentNode}if(I.className==&quot;dhtmlx_popup_button&quot;){var H=I.getAttribute(&quot;result&quot;);H=(H==&quot;true&quot;)||(H==&quot;false&quot;?false:H);u(y,H)}};y.box=E;if(C||F){r=y}return E}function w(C,D,F){var E=C.tagName?C:n(C,D,F);if(!C.hidden){s(true)}document.body.appendChild(E);var A=C.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-E.offsetWidth)/2));var H=C.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-E.offsetHeight)/2));if(C.position==&quot;top&quot;){E.style.top=&quot;-3px&quot;}else{E.style.top=H+&quot;px&quot;}E.style.left=A+&quot;px&quot;;E.onkeydown=a;E.focus();if(C.hidden){dhtmlx.modalbox.hide(E)}return E}function q(x){return w(x,true,false)}function c(x){return w(x,true,true)}function l(x){return w(x)}function o(y,x,A){if(typeof y!=&quot;object&quot;){if(typeof x==&quot;function&quot;){A=x;x=&quot;&quot;}y={text:y,type:x,Eq:A}}return y}function h(A,y,x,C){if(typeof A!=&quot;object&quot;){A={text:A,type:y,expire:x,id:C}}A.id=A.id||v.uid();A.expire=A.expire||v.expire;return A}dhtmlx.alert=function(){var x=o.apply(this,arguments);x.type=x.type||&quot;confirm&quot;;return q(x)};dhtmlx.confirm=function(){var x=o.apply(this,arguments);x.type=x.type||&quot;alert&quot;;return c(x)};dhtmlx.modalbox=function(){var x=o.apply(this,arguments);x.type=x.type||&quot;alert&quot;;return l(x)};dhtmlx.modalbox.hide=function(x){while(x&amp;&amp;x.getAttribute&amp;&amp; !x.getAttribute(&quot;dhxbox&quot;)){x=x.parentNode}if(x){x.parentNode.removeChild(x);s(false)}};var v=dhtmlx.message=function(C,A,y,D){C=h.apply(this,arguments);C.type=C.type||&quot;info&quot;;var x=C.type.split(&quot;-&quot;)[0];switch(x){case &quot;alert&quot;:return q(C);case &quot;confirm&quot;:return c(C);case &quot;modalbox&quot;:return l(C);default:return g(C);break}};v.seed=(new Date()).valueOf();v.uid=function(){return v.seed++};v.expire=4000;v.keyboard=true;v.position=&quot;top&quot;;v.pull={};v.timers={};v.hideAll=function(){for(var x in v.pull){v.hide(x)}};v.hide=function(y){var x=v.pull[y];if(x&amp;&amp;x.parentNode){window.setTimeout(function(){x.parentNode.removeChild(x);x=null},2000);x.className+=&quot; hidden&quot;;if(v.timers[y]){window.clearTimeout(v.timers[y])}delete v.pull[y]}}})();</I><P>if(window.dhtmlXGridObject&amp;&amp; !dhtmlXGridObject.prototype._init_point_connector){dhtmlXGridObject.prototype._init_point_connector=dhtmlXGridObject.prototype.Yz;dhtmlXGridObject.prototype.Yz=function(){this._con_f_used=[].concat(this._con_f_used);dhtmlXGridObject.prototype._con_f_used=[];var a=function(l){l=l.replace(/(\?|\&amp;)connector[^\f]*/g,&quot;&quot;);return l+(l.indexOf(&quot;?&quot;)!= -1?&quot;&amp;&quot;:&quot;?&quot;)+&quot;connector=true&quot;+(this.hdr.rows.length&gt;0?&quot;&amp;dhx_no_header=1&quot;:&quot;&quot;)};var h=function(l){return a.call(this,l)+(this._connector_sorting||&quot;&quot;)+(this._connector_filter||&quot;&quot;)};var g=function(m,n,l){this._connector_sorting=&quot;&amp;dhx_sort[&quot;+n+&quot;]=&quot;+l;return h.call(this,m)};var c=function(m,l,o){var q=[];for(var n=0;n&lt;l.length;n++){q[n]=&quot;dhx_filter[&quot;+l[n]+&quot;]=&quot;+encodeURIComponent(o[n])}this._connector_filter=&quot;&amp;&quot;+q.join(&quot;&amp;&quot;);return h.call(this,m)};this.attachEvent(&quot;onCollectValues&quot;,function(l){if(this._con_f_used[l]){if(typeof(this._con_f_used[l])==&quot;object&quot;){return this._con_f_used[l]}else{return false}}return true});this.attachEvent(&quot;onDynXLS&quot;,function(){this.tR=h.call(this,this.tR);return true});this.attachEvent(&quot;onBeforeSorting&quot;,function(o,n,m){if(n==&quot;connector&quot;){var l=this;this.clearAndLoad(g.call(this,this.tR,o,m),function(){l.co(true,o,m)});return false}return true});this.attachEvent(&quot;onFilterStart&quot;,function(m,l){var o=this.xu();if(this._con_f_used.length){var n=this;this.clearAndLoad(c.call(this,this.tR,m,l));if(o.length){n.co(true,o[0],o[1])}return false}return true});this.attachEvent(&quot;onXLE&quot;,function(m,l,o,n){if(!n){return}});if(this._init_point_connector){this._init_point_connector()}};dhtmlXGridObject.prototype._con_f_used=[];dhtmlXGridObject.prototype._in_header_connector_text_filter=function(c,a){if(!this._con_f_used[a]){this._con_f_used[a]=1}return this._in_header_text_filter(c,a)};dhtmlXGridObject.prototype._in_header_connector_select_filter=function(c,a){if(!this._con_f_used[a]){this._con_f_used[a]=2}return this._in_header_select_filter(c,a)};dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load;dhtmlXGridObject.prototype.load=function(c,l,h){if(!this._colls_loaded&amp;&amp;this.cellType){var a=[];for(var g=0;g&lt;this.cellType.length;g++){if(this.cellType[g].indexOf(&quot;co&quot;)==0||this.cellType[g].indexOf(&quot;clist&quot;)==0||this._con_f_used[g]==2){a.push(g)}}if(a.length){arguments[0]+=(arguments[0].indexOf(&quot;?&quot;)!= -1?&quot;&amp;&quot;:&quot;?&quot;)+&quot;connector=true&amp;dhx_colls=&quot;+a.join(&quot;,&quot;)}}return this.load_connector.apply(this,arguments)};dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype.Ov;dhtmlXGridObject.prototype.Ov=function(c,w,r){this._parseHead_connector.apply(this,arguments);if(!this._colls_loaded){var s=this.bA.et(&quot;./coll_options&quot;,arguments[0]);for(var n=0;n&lt;s.length;n++){var q=s[n].getAttribute(&quot;for&quot;);var u=[];var h=null;if(this.cellType[q]==&quot;combo&quot;){h=this.getColumnCombo(q)}else{if(this.cellType[q].indexOf(&quot;co&quot;)==0){h=this.cf(q)}}var m=this.bA.et(&quot;./item&quot;,s[n]);var a=[];for(var l=0;l&lt;m.length;l++){var g=m[l].getAttribute(&quot;value&quot;);if(h){var o=m[l].getAttribute(&quot;label&quot;)||g;if(h.addOption){a.push([g,o])}else{h.eT(g,o)}u[u.length]=o}else{u[u.length]=g}}if(a.length){if(h){h.addOption(a)}}else{if(u.length&amp;&amp; !h){if(this.AO){this.AO(q*1,u)}}}if(this._con_f_used[q*1]){this._con_f_used[q*1]=u}}this._colls_loaded=true}}}if(window.Iq&amp;&amp; !Iq.prototype.init_original){Iq.prototype.init_original=Iq.prototype.init;Iq.prototype.init=function(a){this.init_original(a);a._dataprocessor=this;this.JI(&quot;POST&quot;,true);this.cj+=(this.cj.indexOf(&quot;?&quot;)!= -1?&quot;&amp;&quot;:&quot;?&quot;)+&quot;editing=true&quot;}}dhtmlxError.mP(&quot;LoadXML&quot;,function(h,g,l){alert(l[0].responseText)});</P></B></SPAN></SPAN></SPAN></SPAN></H4></S><DIV class="printfooter">
Retrieved from &quot;<A href="http://2014.igem.org/Team:DTU-Denmark/dhtmlx.js">http://2014.igem.org/Team:DTU-Denmark/dhtmlx.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:DTU-Denmark/dhtmlx.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:DTU-Denmark/dhtmlx.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:DTU-Denmark/dhtmlx.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:DTU-Denmark/dhtmlx.js&amp;oldid=36675" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2014.igem.org:Privacy_policy" title="2014.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2014.igem.org:General_disclaimer" title="2014.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>