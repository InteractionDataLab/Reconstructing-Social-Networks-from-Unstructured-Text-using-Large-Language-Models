<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_DTU-Denmark_dhtmlxcommon_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:DTU-Denmark/dhtmlxcommon.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:DTU-Denmark/dhtmlxcommon.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:DTU-Denmark/dhtmlxcommon.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:DTU-Denmark/dhtmlxcommon.js&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:DTU-Denmark/dhtmlxcommon.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:DTU-Denmark/dhtmlxcommon.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2014.igem.org</H3><P>/*
Product Name: dhtmlxCalendar 
Version: 4.0.3 
Edition: Standard 
License: content of this file is covered by GPL. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta <A href="http://www.dhtmlx.com" class="external free" rel="nofollow">http://www.dhtmlx.com</A></P><UL><LI>/
</LI></UL><P>/* dhtmlx.com */
</P><P>if (typeof(window.dhx4) == &quot;undefined&quot;) {
</P><P>	window.dhx4 = {
</P><P>		version: &quot;4.0.3&quot;,
</P><P>		skin: null, // allow to be set by user
</P><P>		skinDetect: function(comp) {
			var t = document.createElement(&quot;DIV&quot;);
			t.className = comp+&quot;_skin_detect&quot;;
			if (document.body.firstChild) document.body.insertBefore(t, document.body.firstChild); else document.body.appendChild(t);
			var w = t.offsetWidth;
			t.parentNode.removeChild(t);
			t = null;
			return {10:&quot;dhx_skyblue&quot;,20:&quot;dhx_web&quot;,30:&quot;dhx_terrace&quot;}[w]||null;
		},
</P><P>		// id manager
		lastId: 1,
		newId: function() {
			return this.lastId++;
		},
</P><P>		// z-index manager
		zim: {
			data: {},
			step: 5,
			first: function() {
				return 100;
			},
			last: function() {
				var t = this.first();
				for (var a in this.data) t = Math.max(t, this.data[a]);
				return t;
			},
			reserve: function(id) {
				this.data[id] = this.last()+this.step;
				return this.data[id];
			},
			clear: function(id) {
				if (this.data[id] != null) {
					this.data[id] = null;
					delete this.data[id];
				}
			}
		},
</P><P>		// string to boolean
		s2b: function(r) {
			return (r == true || r == 1 || r == &quot;true&quot; || r == &quot;1&quot; || r == &quot;yes&quot; || r == &quot;y&quot;);
		},
</P><P>		// trim
		trim: function(t) {
			return String(t).replace(/^\s{1,}/,&quot;&quot;).replace(/\s{1,}$/,&quot;&quot;);
		},
</P><P>		// template parsing
		template: function(tpl, data, trim) {
			// tpl - template text
			// data - object with key-value
			// trim - true/false, trim values
			return tpl.replace(/#([a-zA-Z0-9_-]{1,})#/g, function(t,k){
				if (k.length &gt; 0 &amp;&amp; typeof(data[k]) != &quot;undefined&quot;) {
					if (trim == true) return window.dhx4.trim(data[k]);
					return String(data[k]);
				}
				return &quot;&quot;;
			});
		},
</P><P>		// absolute top/left position on screen
		absLeft: function(obj) {
			if (typeof(obj) == &quot;string&quot;) obj = document.getElementById(obj);
			return this._aOfs(obj).left;
		},
		absTop: function(obj) {
			if (typeof(obj) == &quot;string&quot;) obj = document.getElementById(obj);
			return this._aOfs(obj).top;
		},
		_aOfsSum: function(elem) {
			var top = 0, left = 0;
			while (elem) {
				top = top + parseInt(elem.offsetTop);
				left = left + parseInt(elem.offsetLeft);
				elem = elem.offsetParent;
			}
			return {top: top, left: left};
		},
		_aOfsRect: function(elem) {
			var box = elem.getBoundingClientRect();
			var body = document.body;
			var docElem = document.documentElement;
			var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;
			var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;
			var clientTop = docElem.clientTop || body.clientTop || 0;
			var clientLeft = docElem.clientLeft || body.clientLeft || 0;
			var top  = box.top +  scrollTop - clientTop;
			var left = box.left + scrollLeft - clientLeft;
			return { top: Math.round(top), left: Math.round(left) };
		},
		_aOfs: function(elem) {
			if (elem.getBoundingClientRect) {
				return this._aOfsRect(elem);
			} else {
				return this._aOfsSum(elem);
			}
		},
</P><P>		// copy obj
		_isObj: function(k) {
			return (k != null &amp;&amp; typeof(k) == &quot;object&quot; &amp;&amp; typeof(k.length) == &quot;undefined&quot;);
		},
		_copyObj: function(r) {
			if (this._isObj(r)) {
				var t = {};
				for (var a in r) {
					if (typeof(r[a]) == &quot;object&quot; &amp;&amp; r[a] != null) t[a] = this._copyObj(r[a]); else t[a] = r[a];
				}
			} else {
				var t = [];
				for (var a=0; a&lt;r.length; a++) {
					if (typeof(r[a]) == &quot;object&quot; &amp;&amp; r[a] != null) t[a] = this._copyObj(r[a]); else t[a] = r[a];
				}
			}
			return t;
		},
</P><P>		// screen dim
		screenDim: function() {
			var isIE = (navigator.userAgent.indexOf(&quot;MSIE&quot;) &gt;= 0);
			var dim = {};
			dim.left = document.body.scrollLeft;
			dim.right = dim.left+(window.innerWidth||document.body.clientWidth);
			dim.top = Math.max((isIE?document.documentElement:document.getElementsByTagName(&quot;html&quot;)[0]).scrollTop, document.body.scrollTop);
			dim.bottom = dim.top+(isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);
			return dim;
		},
</P><P>		// input/textarea range selection
		selectTextRange: function(inp, start, end) {
</P><P>			inp = (typeof(inp)==&quot;string&quot;?document.getElementById(inp):inp);
</P><P>			var len = inp.value.length;
			start = Math.max(Math.min(start, len), 0);
			end = Math.min(end, len);
</P><P>			if (inp.setSelectionRange) {
				try {inp.setSelectionRange(start, end);} catch(e){}; // combo in grid under IE requires try/catch
			} else if (inp.createTextRange) {
				var range = inp.createTextRange();
				range.moveStart(&quot;character&quot;, start);
				range.moveEnd(&quot;character&quot;, end-len);
				try {range.select();} catch(e){};
			}
		},
</P><P>		// transition
		transData: null,
		transDetect: function() {
</P><P>			if (this.transData == null) {
</P><P>				this.transData = {transProp: false, transEv: null};
</P><P>				// transition, MozTransition, WebkitTransition, msTransition, OTransition
				var k = {
					&quot;MozTransition&quot;: &quot;transitionend&quot;,
					&quot;WebkitTransition&quot;: &quot;webkitTransitionEnd&quot;,
					&quot;OTransition&quot;: &quot;oTransitionEnd&quot;,
					&quot;msTransition&quot;: &quot;transitionend&quot;,
					&quot;transition&quot;: &quot;transitionend&quot;
				};
</P><P>				for (var a in k) {
					if (this.transData.transProp == false &amp;&amp; document.documentElement.style[a] != null) {
						this.transData.transProp = a;
						this.transData.transEv = k[a];
					}
				}
				k = null;
			}
</P><P>			return this.transData;
</P><P>		}
</P><P>	};
</P><P>	// browser
	window.dhx4.isIE = (navigator.userAgent.indexOf(&quot;MSIE&quot;) &gt;= 0 || navigator.userAgent.indexOf(&quot;Trident&quot;) &gt;= 0);
	window.dhx4.isIE6 = (window.XMLHttpRequest == null &amp;&amp; navigator.userAgent.indexOf(&quot;MSIE&quot;) &gt;= 0);
	window.dhx4.isIE7 = (navigator.userAgent.indexOf(&quot;MSIE 7.0&quot;) &gt;= 0 &amp;&amp; navigator.userAgent.indexOf(&quot;Trident&quot;) &lt; 0);
	window.dhx4.isOpera = (navigator.userAgent.indexOf(&quot;Opera&quot;) &gt;= 0);
	window.dhx4.isChrome = (navigator.userAgent.indexOf(&quot;Chrome&quot;) &gt;= 0);
	window.dhx4.isKHTML = (navigator.userAgent.indexOf(&quot;Safari&quot;) &gt;= 0 || navigator.userAgent.indexOf(&quot;Konqueror&quot;) &gt;= 0);
	window.dhx4.isFF = (navigator.userAgent.indexOf(&quot;Firefox&quot;) &gt;= 0);
	window.dhx4.isIPad = (navigator.userAgent.search(/iPad/gi) &gt;= 0);
};
</P><P>if (typeof(window.dhx4.ajax) == &quot;undefined&quot;) {
</P><P>	window.dhx4.ajax = {
</P><P>		// if false - dhxr param will added to prevent caching on client side (default),
		// if true - do not add extra params
		cache: false,
</P><P>		// default method for load/loadStruct, post/get allowed
		method: &quot;post&quot;,
</P><P>		get: function(url, onLoad) {
			this._call(&quot;GET&quot;, url, null, true, onLoad);
		},
		getSync: function(url) {
			return this._call(&quot;GET&quot;, url, null, false);
		},
		post: function(url, postData, onLoad) {
			if (arguments.length == 1) {
				postData = &quot;&quot;;
			} else if (arguments.length == 2 &amp;&amp; (typeof(postData) == &quot;function&quot; || typeof(window[postData]) == &quot;function&quot;)) {
				onLoad = postData;
				postData = &quot;&quot;;
			} else {
				postData = String(postData);
			}
			this._call(&quot;POST&quot;, url, postData, true, onLoad);
		},
		postSync: function(url, postData) {
			postData = (postData == null ? &quot;&quot; : String(postData));
			return this._call(&quot;POST&quot;, url, postData, false);
		},
		getLong: function(url, onLoad) {
			this._call(&quot;GET&quot;, url, null, true, onLoad, {url:url});
		},
		postLong: function(url, postData, onLoad) {
			if (arguments.length == 2 &amp;&amp; (typeof(postData) == &quot;function&quot; || typeof(window[postData]))) {
				onLoad = postData;
				postData = &quot;&quot;;
			}
			this._call(&quot;POST&quot;, url, postData, true, onLoad, {url:url, postData:postData});
		},
		_call: function(method, url, postData, async, onLoad, longParams) {
</P><P>			var t = (window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;));
			var isQt = (navigator.userAgent.match(/AppleWebKit/) != null &amp;&amp; navigator.userAgent.match(/Qt/) != null &amp;&amp; navigator.userAgent.match(/Safari/) != null);
</P><P>			if (async == true) {
				t.onreadystatechange = function() {
					if ((t.readyState == 4 &amp;&amp; t.status == 200) || (isQt == true &amp;&amp; t.readyState == 3)) { // what for long response and status 404?
						window.setTimeout(function(){
							if (typeof(onLoad) == &quot;function&quot;) {
								onLoad.apply(window, [{xmlDoc:t}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText
							}
							if (longParams != null) {
								if (typeof(longParams.postData) != &quot;undefined&quot;) {
									dhx4.ajax.postLong(longParams.url, longParams.postData, onLoad);
								} else {
									dhx4.ajax.getLong(longParams.url, onLoad);
								}
							}
							onLoad = null;
							t = null;
						},1);
					}
				}
			}
</P><P>			if (method == &quot;GET&quot; &amp;&amp; this.cache != true) {
				url += (url.indexOf(&quot;?&quot;)&gt;=0?&quot;&amp;&quot;:&quot;?&quot;)+&quot;dhxr&quot;+new Date().getTime();
			}
</P><P>			t.open(method, url, async);
</P><P>			if (method == &quot;POST&quot;) {
				t.setRequestHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);
				if (this.cache != true) postData += (postData.length&gt;0?&quot;&amp;&quot;:&quot;&quot;)+&quot;dhxr&quot;+new Date().getTime();
			} else {
				postData = null;
			}
</P><P>			t.setRequestHeader(&quot;X-Requested-With&quot;, &quot;XMLHttpRequest&quot;);
</P><P>			t.send(postData);
</P><P>			if (!async) return {xmlDoc:t}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText
</P><P>		}
	};
</P><P>};
</P><P>if (typeof(window.dhx4._enableDataLoading) == &quot;undefined&quot;) {
</P><P>	window.dhx4._enableDataLoading = function(obj, initObj, xmlToJson, xmlRootTag, mode) {
</P><P>		if (mode == &quot;clear&quot;) {
</P><P>			// clear attached functionality
</P><P>			for (var a in obj._dhxdataload) {
				obj._dhxdataload[a] = null;
				delete obj._dhxdataload[a];
			};
</P><P>			obj._loadData = null;
			obj._dhxdataload = null;
			obj.load = null;
			obj.loadStruct = null;
</P><P>			obj = null;
</P><P>			return;
</P><P>		}
</P><P>		obj._dhxdataload = { // move to obj.conf?
			initObj: initObj,
			xmlToJson: xmlToJson,
			xmlRootTag: xmlRootTag,
			onBeforeXLS: null
		};
</P><P>		obj._loadData = function(data, loadParams, onLoad) {
</P><P>			if (arguments.length == 2) {
				onLoad = loadParams;
				loadParams = null;
			}
</P><P>			var obj = null;
</P><P>			// deprecated from 4.0, compatability with version (url, type[json|xml], onLoad)
			if (arguments.length == 3) onLoad = arguments[2];
</P><P>			if (typeof(data) == &quot;string&quot;) {
</P><P>				var k = data.replace(/^\s{1,}/,&quot;&quot;).replace(/\s{1,}$/,&quot;&quot;);
</P><P>				var tag = new RegExp(&quot;^&lt;&quot;+this._dhxdataload.xmlRootTag);
</P><P>				// xml
				if (tag.test(k.replace(/^&lt;\?xml[^\?]*\?&gt;\s*/, &quot;&quot;))) { // remove leading &lt;?xml ...?&gt; if any, \n can be also presenе
					if (window.DOMParser) { // ff,ie9
						obj = (new window.DOMParser()).parseFromString(data, &quot;text/xml&quot;);
					} else if (typeof(window.ActiveXObject) != &quot;undefined&quot;) {
						obj = new window.ActiveXObject(&quot;Microsoft.XMLDOM&quot;);
						obj.async = &quot;false&quot;;
						obj.loadXML(data);
					}
					if (obj != null) obj = this[this._dhxdataload.xmlToJson].apply(this, [obj]); // xml to json
				}
</P><P>				if (obj == null &amp;&amp; (k.match(/^\{.*\}$/) != null || k.match(/^\[.*\]$/) != null)) {
					try { eval(&quot;dhx4.temp=&quot;+k); } catch(e) { dhx4.temp = null; }
					obj = dhx4.temp;
					dhx4.temp = null;
				}
</P><P>				if (obj == null) {
</P><P>					this.callEvent(&quot;onXLS&quot;,[]);
</P><P>					var params = [];
</P><P>					// allow to modify url and add params
					if (typeof(this._dhxdataload.onBeforeXLS) == &quot;function&quot;) {
						var k = this._dhxdataload.onBeforeXLS.apply(this,[data]);
						if (k != null &amp;&amp; typeof(k) == &quot;object&quot;) {
							if (k.url != null) data = k.url;
							if (k.params != null) { for (var a in k.params) params.push(a+&quot;=&quot;+encodeURIComponent(k.params[a])); }
						}
					}
</P><P>					var t = this;
					var callBack = function(r) {
</P><P>						var obj = null;
</P><P>						if ((r.xmlDoc.getResponseHeader(&quot;Content-Type&quot;)||&quot;&quot;).search(/xml/gi) &gt;= 0 || (r.xmlDoc.responseText.replace(/^\s{1,}/,&quot;&quot;)).match(/^&lt;/) != null) {
							obj = t[t._dhxdataload.xmlToJson].apply(t,[r.xmlDoc.responseXML]);
						} else {
							try { eval(&quot;dhx4.temp=&quot;+r.xmlDoc.responseText); } catch(e){ dhx4.temp = null; };
							obj = dhx4.temp;
							dhx4.temp = null;
						}
</P><P>						// init
						if (obj != null) t[t._dhxdataload.initObj].apply(t,[obj,data]); // data =&gt; url
</P><P>						t.callEvent(&quot;onXLE&quot;,[]);
</P><P>						if (onLoad != null) {
							if (typeof(onLoad) == &quot;function&quot;) {
								onLoad.apply(t,[]);
							} else if (typeof(window[onLoad]) == &quot;function&quot;) {
								window[onLoad].apply(t,[]);
							}
						}
</P><P>						callBack = onLoad = null;
						obj = r = t = null;
</P><P>					};
</P><P>					params = params.join(&quot;&amp;&quot;)+(typeof(loadParams)==&quot;string&quot;?&quot;&amp;&quot;+loadParams:&quot;&quot;);
</P><P>					if (dhx4.ajax.method == &quot;post&quot;) {
						dhx4.ajax.post(data, params, callBack);
					} else if (dhx4.ajax.method == &quot;get&quot;) {
						dhx4.ajax.get(data+(data.indexOf(&quot;?&quot;)&gt;0?&quot;&quot;:&quot;&quot;)+params, callBack);
					}
</P><P>					return;
				}
</P><P>			} else {
				if (typeof(data.documentElement) == &quot;object&quot; || (typeof(data.tagName) != &quot;undefined&quot; &amp;&amp; typeof(data.getElementsByTagName) != &quot;undefined&quot; &amp;&amp; data.getElementsByTagName(this._dhxdataload.xmlRootTag).length &gt; 0)) { // xml
					obj = this[this._dhxdataload.xmlToJson].apply(this, [data]);
				} else { // json
					obj = window.dhx4._copyObj(data);
				}
</P><P>			}
</P><P>			// init
			if (obj != null) this[this._dhxdataload.initObj].apply(this,[obj]);
</P><P>			if (onLoad != null) {
				if (typeof(onLoad) == &quot;function&quot;) {
					onLoad.apply(this, []);
				} else if (typeof(window[onLoad]) == &quot;function&quot;) {
					window[onLoad].apply(this, []);
				}
				onLoad = null;
			}
</P><P>		};
</P><P>		// loadStruct for hdr/conf
		// load for data
		if (mode != null) {
			var k = {struct: &quot;loadStruct&quot;, data: &quot;load&quot;};
			for (var a in mode) {
				if (mode[a] == true) obj[k[a]] = function() {return this._loadData.apply(this, arguments);}
			}
		}
</P><P>		obj = null;
</P><P>	};
};
if (typeof(window.dhx4._eventable) == &quot;undefined&quot;) {
</P><P>	window.dhx4._eventable = function(obj, mode) {
</P><P>		if (mode == &quot;clear&quot;) {
</P><P>			obj.detachAllEvents();
</P><P>			obj.dhxevs = null;
</P><P>			obj.attachEvent = null;
			obj.detachEvent = null;
			obj.checkEvent = null;
			obj.callEvent = null;
			obj.detachAllEvents = null;
</P><P>			obj = null;
</P><P>			return;
</P><P>		}
</P><P>		obj.dhxevs = { data: {} };
</P><P>		obj.attachEvent = function(name, func) {
			name = String(name).toLowerCase();
			if (!this.dhxevs.data[name]) this.dhxevs.data[name] = {};
			var eventId = window.dhx4.newId();
			this.dhxevs.data[name][eventId] = func;
			return eventId;
		}
</P><P>		obj.detachEvent = function(eventId) {
			for (var a in this.dhxevs.data) {
				var k = 0;
				for (var b in this.dhxevs.data[a]) {
					if (b == eventId) {
						this.dhxevs.data[a][b] = null;
						delete this.dhxevs.data[a][b];
					} else {
						k++;
					}
				}
				if (k == 0) {
					this.dhxevs.data[a] = null;
					delete this.dhxevs.data[a];
				}
			}
		}
</P><P>		obj.checkEvent = function(name) {
			name = String(name).toLowerCase();
			return (this.dhxevs.data[name] != null);
		}
</P><P>		obj.callEvent = function(name, params) {
			name = String(name).toLowerCase();
			if (this.dhxevs.data[name] == null) return true;
			var r = true;
			for (var a in this.dhxevs.data[name]) {
				r = this.dhxevs.data[name][a].apply(this, params) &amp;&amp; r;
			}
			return r;
		}
</P><P>		obj.detachAllEvents = function() {
			for (var a in this.dhxevs.data) {
				for (var b in this.dhxevs.data[a]) {
					this.dhxevs.data[a][b] = null;
					delete this.dhxevs.data[a][b];
				}
				this.dhxevs.data[a] = null;
				delete this.dhxevs.data[a];
			}
		}
</P><P>		obj = null;
	};
</P><P>};
dhtmlx=function(obj){
	for (var a in obj) dhtmlx[a]=obj[a];
	return dhtmlx; //simple singleton
};
dhtmlx.extend_api=function(name,map,ext){
	var t = window[name];
	if (!t) return; //component not defined
	window[name]=function(obj){
		if (obj &amp;&amp; typeof obj == &quot;object&quot; &amp;&amp; !obj.tagName){
			var that = t.apply(this,(map._init?map._init(obj):arguments));
			//global settings
			for (var a in dhtmlx)
				if (map[a]) this[map[a]](dhtmlx[a]);			
			//local settings
			for (var a in obj){
				if (map[a]) this[map[a]](obj[a]);
				else if (a.indexOf(&quot;on&quot;)==0){
					this.attachEvent(a,obj[a]);
				}
			}
		} else
			var that = t.apply(this,arguments);
		if (map._patch) map._patch(this);
		return that||this;
	};
	window[name].prototype=t.prototype;
	if (ext)
		dhtmlXHeir(window[name].prototype,ext);
};
</P><P>dhtmlxAjax={
	get:function(url,callback){
		var t=new dtmlXMLLoaderObject(true);
		t.async=(arguments.length&lt;3);
		t.waitCall=callback;
		t.loadXML(url)
		return t;
	},
	post:function(url,post,callback){
		var t=new dtmlXMLLoaderObject(true);
		t.async=(arguments.length&lt;4);
		t.waitCall=callback;
		t.loadXML(url,true,post)
		return t;
	},
	getSync:function(url){
		return this.get(url,null,true)
	},
	postSync:function(url,post){
		return this.post(url,post,null,true);		
	}
}
</P><P>/**
</P><PRE> *     @desc: xmlLoader object
 *     @type: private
 *     @param: funcObject - xml parser function
 *     @param: object - jsControl object
 *     @param: async - sync/async mode (async by default)
 *     @param: rSeed - enable/disable random seed ( prevent IE caching)
 *     @topic: 0
 */
</PRE><P>function dtmlXMLLoaderObject(funcObject, dhtmlObject, async, rSeed){
	this.xmlDoc=&quot;&quot;;
</P><P>	if (typeof (async) != &quot;undefined&quot;)
		this.async=async;
	else
		this.async=true;
</P><P>	this.onloadAction=funcObject||null;
	this.mainObject=dhtmlObject||null;
	this.waitCall=null;
	this.rSeed=rSeed||false;
	return this;
};
</P><P>dtmlXMLLoaderObject.count = 0;
</P><P>/**
</P><PRE> *     @desc: xml loading handler
 *     @type: private
 *     @param: dtmlObject - xmlLoader object
 *     @topic: 0
 */
</PRE><P>dtmlXMLLoaderObject.prototype.waitLoadFunction=function(dhtmlObject){
	var once = true;
	this.check=function (){
		if ((dhtmlObject)&amp;&amp;(dhtmlObject.onloadAction != null)){
			if ((!dhtmlObject.xmlDoc.readyState)||(dhtmlObject.xmlDoc.readyState == 4)){
				if (!once)
					return;
</P><P>				once=false; //IE 5 fix
				dtmlXMLLoaderObject.count++;
				if (typeof dhtmlObject.onloadAction == &quot;function&quot;)
					dhtmlObject.onloadAction(dhtmlObject.mainObject, null, null, null, dhtmlObject);
</P><P>				if (dhtmlObject.waitCall){
					dhtmlObject.waitCall.call(this,dhtmlObject);
					dhtmlObject.waitCall=null;
				}
			}
		}
	};
	return this.check;
};
</P><P>/**
</P><PRE> *     @desc: return XML top node
 *     @param: tagName - top XML node tag name (not used in IE, required for Safari and Mozilla)
 *     @type: private
 *     @returns: top XML node
 *     @topic: 0  
 */
</PRE><P>dtmlXMLLoaderObject.prototype.getXMLTopNode=function(tagName, oldObj){
	if (typeof this.xmlDoc.status == &quot;undefined&quot; || this.xmlDoc.status &lt; 400){
		if (this.xmlDoc.responseXML){
			var temp = this.xmlDoc.responseXML.getElementsByTagName(tagName);
			if(temp.length==0 &amp;&amp; tagName.indexOf(&quot;:&quot;)!=-1)
				var temp = this.xmlDoc.responseXML.getElementsByTagName((tagName.split(&quot;:&quot;))[1]);
			var z = temp[0];
		} else
			var z = this.xmlDoc.documentElement;
</P><P>		if (z){
			this._retry=false;
			return z;
		}
</P><P>		if (!this._retry&amp;&amp;_isIE){
			this._retry=true;
			var oldObj = this.xmlDoc;
			this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,&quot;&quot;), true);
			return this.getXMLTopNode(tagName, oldObj);
		}
	}
</P><P>	dhtmlxError.throwError(&quot;LoadXML&quot;, &quot;Incorrect XML&quot;, [
		(oldObj||this.xmlDoc),
		this.mainObject
	]);
</P><P>	return document.createElement(&quot;DIV&quot;);
};
</P><P>/**
</P><PRE> *     @desc: load XML from string
 *     @type: private
 *     @param: xmlString - xml string
 *     @topic: 0  
 */
</PRE><P>dtmlXMLLoaderObject.prototype.loadXMLString=function(xmlString, silent){
</P><P>	if (!_isIE){
		var parser = new DOMParser();
		this.xmlDoc=parser.parseFromString(xmlString, &quot;text/xml&quot;);
	} else {
		this.xmlDoc=new ActiveXObject(&quot;Microsoft.XMLDOM&quot;);
		this.xmlDoc.async=this.async;
		this.xmlDoc.onreadystatechange = function(){};
		this.xmlDoc[&quot;loadXM&quot;+&quot;L&quot;](xmlString);
	}
</P><P>	if (silent)
		return;
</P><P>	if (this.onloadAction)
		this.onloadAction(this.mainObject, null, null, null, this);
</P><P>	if (this.waitCall){
		this.waitCall();
		this.waitCall=null;
	}
}
/**
</P><PRE> *     @desc: load XML
 *     @type: private
 *     @param: filePath - xml file path
 *     @param: postMode - send POST request
 *     @param: postVars - list of vars for post request
 *     @topic: 0
 */
</PRE><P>dtmlXMLLoaderObject.prototype.loadXML=function(filePath, postMode, postVars, rpc){
	if (this.rSeed)
		filePath+=((filePath.indexOf(&quot;?&quot;) != -1) ? &quot;&amp;&quot; : &quot;?&quot;)+&quot;a_dhx_rSeed=&quot;+(new Date()).valueOf();
	this.filePath=filePath;
</P><P>	if ((!_isIE)&amp;&amp;(window.XMLHttpRequest))
		this.xmlDoc=new XMLHttpRequest();
	else {
		this.xmlDoc=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
	}
</P><P>	if (this.async)
		this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this);
	this.xmlDoc.open(postMode ? &quot;POST&quot; : &quot;GET&quot;, filePath, this.async);
</P><P>	if (rpc){
		this.xmlDoc.setRequestHeader(&quot;User-Agent&quot;, &quot;dhtmlxRPC v0.1 (&quot;+navigator.userAgent+&quot;)&quot;);
		this.xmlDoc.setRequestHeader(&quot;Content-type&quot;, &quot;text/xml&quot;);
	}
</P><P>	else if (postMode)
		this.xmlDoc.setRequestHeader('Content-type', (this.contenttype || 'application/x-www-form-urlencoded'));
</P><P>	this.xmlDoc.setRequestHeader(&quot;X-Requested-With&quot;,&quot;XMLHttpRequest&quot;);
	this.xmlDoc.send(null||postVars);
</P><P>	if (!this.async)
		(new this.waitLoadFunction(this))();
};
/**
</P><PRE> *     @desc: destructor, cleans used memory
 *     @type: private
 *     @topic: 0
 */
</PRE><P>dtmlXMLLoaderObject.prototype.destructor=function(){
	this._filterXPath = null;
	this._getAllNamedChilds = null;
	this._retry = null;
	this.async = null;
	this.rSeed = null;
	this.filePath = null;
	this.onloadAction = null;
	this.mainObject = null;
	this.xmlDoc = null;
	this.doXPath = null;
	this.doXPathOpera = null;
	this.doXSLTransToObject = null;
	this.doXSLTransToString = null;
	this.loadXML = null;
	this.loadXMLString = null;
	// this.waitLoadFunction = null;
	this.doSerialization = null;
	this.xmlNodeToJSON = null;
	this.getXMLTopNode = null;
	this.setXSLParamValue = null;
	return null;
}
</P><P>dtmlXMLLoaderObject.prototype.xmlNodeToJSON = function(node){
</P><PRE>       var t={};
       for (var i=0; i&lt;node.attributes.length; i++)
           t[node.attributes[i].name]=node.attributes[i].value;
       t[&quot;_tagvalue&quot;]=node.firstChild?node.firstChild.nodeValue:&quot;&quot;;
       for (var i=0; i&lt;node.childNodes.length; i++){
           var name=node.childNodes[i].tagName;
           if (name){
               if (!t[name]) t[name]=[];
               t[name].push(this.xmlNodeToJSON(node.childNodes[i]));
           }            
       }        
       return t;
   }
</PRE><P>/**  
</P><PRE> *     @desc: Call wrapper
 *     @type: private
 *     @param: funcObject - action handler
 *     @param: dhtmlObject - user data
 *     @returns: function handler
 *     @topic: 0  
 */
</PRE><P>function callerFunction(funcObject, dhtmlObject){
	this.handler=function(e){
		if (!e)
			e=window.event;
		funcObject(e, dhtmlObject);
		return true;
	};
	return this.handler;
};
</P><P>/**  
</P><PRE> *     @desc: Calculate absolute position of html object
 *     @type: private
 *     @param: htmlObject - html object
 *     @topic: 0  
 */
</PRE><P>function getAbsoluteLeft(htmlObject){
	return getOffset(htmlObject).left;
}
/**
</P><PRE> *     @desc: Calculate absolute position of html object
 *     @type: private
 *     @param: htmlObject - html object
 *     @topic: 0  
 */
</PRE><P>function getAbsoluteTop(htmlObject){
	return getOffset(htmlObject).top;
}
</P><P>function getOffsetSum(elem) {
	var top=0, left=0;
	while(elem) {
		top = top + parseInt(elem.offsetTop);
		left = left + parseInt(elem.offsetLeft);
		elem = elem.offsetParent;
	}
	return {top: top, left: left};
}
function getOffsetRect(elem) {
	var box = elem.getBoundingClientRect();
	var body = document.body;
	var docElem = document.documentElement;
	var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;
	var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;
	var clientTop = docElem.clientTop || body.clientTop || 0;
	var clientLeft = docElem.clientLeft || body.clientLeft || 0;
	var top  = box.top +  scrollTop - clientTop;
	var left = box.left + scrollLeft - clientLeft;
	return { top: Math.round(top), left: Math.round(left) };
}
function getOffset(elem) {
	if (elem.getBoundingClientRect) {
		return getOffsetRect(elem);
	} else {
		return getOffsetSum(elem);
	}
}
</P><P>/**  
</P><UL><LI>     @desc: Convert string to it boolean representation
</LI><LI>     @type: private
</LI><LI>     @param: inputString - string for covertion
</LI><LI>     @topic: 0
</LI><LI>/
</LI></UL><P>function convertStringToBoolean(inputString){
	if (typeof (inputString) == &quot;string&quot;)
		inputString=inputString.toLowerCase();
</P><P>	switch (inputString){
		case &quot;1&quot;:
		case &quot;true&quot;:
		case &quot;yes&quot;:
		case &quot;y&quot;:
		case 1:
		case true:
			return true;
			break;
</P><P>		default: return false;
	}
}
</P><P>/**  
</P><UL><LI>     @desc: find out what symbol to use as url param delimiters in further params
</LI><LI>     @type: private
</LI><LI>     @param: str - current url string
</LI><LI>     @topic: 0  
</LI><LI>/
</LI></UL><P>function getUrlSymbol(str){
	if (str.indexOf(&quot;?&quot;) != -1)
		return &quot;&amp;&quot;
	else
		return &quot;?&quot;
}
</P><P>function dhtmlDragAndDropObject(){
	if (window.dhtmlDragAndDrop)
		return window.dhtmlDragAndDrop;
</P><P>	this.lastLanding=0;
	this.dragNode=0;
	this.dragStartNode=0;
	this.dragStartObject=0;
	this.tempDOMU=null;
	this.tempDOMM=null;
	this.waitDrag=0;
	window.dhtmlDragAndDrop=this;
</P><P>	return this;
};
</P><P>dhtmlDragAndDropObject.prototype.removeDraggableItem=function(htmlNode){
	htmlNode.onmousedown=null;
	htmlNode.dragStarter=null;
	htmlNode.dragLanding=null;
}
dhtmlDragAndDropObject.prototype.addDraggableItem=function(htmlNode, dhtmlObject){
	htmlNode.onmousedown=this.preCreateDragCopy;
	htmlNode.dragStarter=dhtmlObject;
	this.addDragLanding(htmlNode, dhtmlObject);
}
dhtmlDragAndDropObject.prototype.addDragLanding=function(htmlNode, dhtmlObject){
	htmlNode.dragLanding=dhtmlObject;
}
dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(e){
	if ((e||window.event) &amp;&amp; (e||event).button == 2)
		return;
</P><P>	if (window.dhtmlDragAndDrop.waitDrag){
		window.dhtmlDragAndDrop.waitDrag=0;
		document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;
		document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;
		return false;
	}
</P><P>	if (window.dhtmlDragAndDrop.dragNode)
		window.dhtmlDragAndDrop.stopDrag(e);	
</P><P>	window.dhtmlDragAndDrop.waitDrag=1;
	window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;
	window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;
	window.dhtmlDragAndDrop.dragStartNode=this;
	window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;
	document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;
	document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;
	window.dhtmlDragAndDrop.downtime = new Date().valueOf();
</P><P>
	if ((e)&amp;&amp;(e.preventDefault)){
		e.preventDefault();
		return false;
	}
	return false;
};
dhtmlDragAndDropObject.prototype.callDrag=function(e){
	if (!e)
		e=window.event;
	dragger=window.dhtmlDragAndDrop;
	if ((new Date()).valueOf()-dragger.downtime&lt;100) return;
</P><P>	//if ((e.button == 0)&amp;&amp;(_isIE))
	//	return dragger.stopDrag();
</P><P>	if (!dragger.dragNode){
		if (dragger.waitDrag){
			dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode, e);
</P><P>			if (!dragger.dragNode)
				return dragger.stopDrag();
</P><P>			dragger.dragNode.onselectstart=function(){return false;}
			dragger.gldragNode=dragger.dragNode;
			document.body.appendChild(dragger.dragNode);
			document.body.onmouseup=dragger.stopDrag;
			dragger.waitDrag=0;
			dragger.dragNode.pWindow=window;
			dragger.initFrameRoute();
		} 
		else return dragger.stopDrag(e, true);
	}
</P><P>	if (dragger.dragNode.parentNode != window.document.body &amp;&amp; dragger.gldragNode){
		var grd = dragger.gldragNode;
</P><P>		if (dragger.gldragNode.old)
			grd=dragger.gldragNode.old;
</P><P>		//if (!document.all) dragger.calculateFramePosition();
		grd.parentNode.removeChild(grd);
		var oldBody = dragger.dragNode.pWindow;
</P><P>		if (grd.pWindow &amp;&amp;	grd.pWindow.dhtmlDragAndDrop.lastLanding)
			grd.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(grd.pWindow.dhtmlDragAndDrop.lastLanding);	
</P><P>		//		var oldp=dragger.dragNode.parentObject;
		if (_isIE){
			var div = document.createElement(&quot;Div&quot;);
			div.innerHTML=dragger.dragNode.outerHTML;
			dragger.dragNode=div.childNodes[0];
		} else
			dragger.dragNode=dragger.dragNode.cloneNode(true);
</P><P>		dragger.dragNode.pWindow=window;
		//		dragger.dragNode.parentObject=oldp;
</P><P>		dragger.gldragNode.old=dragger.dragNode;
		document.body.appendChild(dragger.dragNode);
		oldBody.dhtmlDragAndDrop.dragNode=dragger.dragNode;
	}
</P><P>	dragger.dragNode.style.left=e.clientX+15+(dragger.fx
		? dragger.fx*(-1)
		: 0)
		+(document.body.scrollLeft||document.documentElement.scrollLeft)+&quot;px&quot;;
	dragger.dragNode.style.top=e.clientY+3+(dragger.fy
		? dragger.fy*(-1)
		: 0)
		+(document.body.scrollTop||document.documentElement.scrollTop)+&quot;px&quot;;
</P><P>	if (!e.srcElement)
		var z = e.target;
	else
		z=e.srcElement;
	dragger.checkLanding(z, e);
}
</P><P>dhtmlDragAndDropObject.prototype.calculateFramePosition=function(n){
	//this.fx = 0, this.fy = 0;
	if (window.name){
		var el = parent.frames[window.name].frameElement.offsetParent;
		var fx = 0;
		var fy = 0;
</P><P>		while (el){
			fx+=el.offsetLeft;
			fy+=el.offsetTop;
			el=el.offsetParent;
		}
</P><P>		if ((parent.dhtmlDragAndDrop)){
			var ls = parent.dhtmlDragAndDrop.calculateFramePosition(1);
			fx+=ls.split('_')[0]*1;
			fy+=ls.split('_')[1]*1;
		}
</P><P>		if (n)
			return fx+&quot;_&quot;+fy;
		else
			this.fx=fx;
		this.fy=fy;
	}
	return &quot;0_0&quot;;
}
dhtmlDragAndDropObject.prototype.checkLanding=function(htmlObject, e){
	if ((htmlObject)&amp;&amp;(htmlObject.dragLanding)){
		if (this.lastLanding)
			this.lastLanding.dragLanding._dragOut(this.lastLanding);
		this.lastLanding=htmlObject;
		this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding, this.dragStartNode, e.clientX,
			e.clientY, e);
		this.lastLanding_scr=(_isIE ? e.srcElement : e.target);
	} else {
		if ((htmlObject)&amp;&amp;(htmlObject.tagName != &quot;BODY&quot;))
			this.checkLanding(htmlObject.parentNode, e);
		else {
			if (this.lastLanding)
				this.lastLanding.dragLanding._dragOut(this.lastLanding, e.clientX, e.clientY, e);
			this.lastLanding=0;
</P><P>			if (this._onNotFound)
				this._onNotFound();
		}
	}
}
dhtmlDragAndDropObject.prototype.stopDrag=function(e, mode){
	dragger=window.dhtmlDragAndDrop;
</P><P>	if (!mode){
		dragger.stopFrameRoute();
		var temp = dragger.lastLanding;
		dragger.lastLanding=null;
</P><P>		if (temp)
			temp.dragLanding._drag(dragger.dragStartNode, dragger.dragStartObject, temp, (_isIE
				? event.srcElement
				: e.target));
	}
	dragger.lastLanding=null;
</P><P>	if ((dragger.dragNode)&amp;&amp;(dragger.dragNode.parentNode == document.body))
		dragger.dragNode.parentNode.removeChild(dragger.dragNode);
	dragger.dragNode=0;
	dragger.gldragNode=0;
	dragger.fx=0;
	dragger.fy=0;
	dragger.dragStartNode=0;
	dragger.dragStartObject=0;
	document.body.onmouseup=dragger.tempDOMU;
	document.body.onmousemove=dragger.tempDOMM;
	dragger.tempDOMU=null;
	dragger.tempDOMM=null;
	dragger.waitDrag=0;
}
</P><P>dhtmlDragAndDropObject.prototype.stopFrameRoute=function(win){
	if (win)
		window.dhtmlDragAndDrop.stopDrag(1, 1);
</P><P>	for (var i = 0; i &lt; window.frames.length; i++){
		try{
		if ((window.frames[i] != win)&amp;&amp;(window.frames[i].dhtmlDragAndDrop))
			window.frames[i].dhtmlDragAndDrop.stopFrameRoute(window);
		} catch(e){}
	}
</P><P>	try{
	if ((parent.dhtmlDragAndDrop)&amp;&amp;(parent != window)&amp;&amp;(parent != win))
		parent.dhtmlDragAndDrop.stopFrameRoute(window);
	} catch(e){}
}
dhtmlDragAndDropObject.prototype.initFrameRoute=function(win, mode){
	if (win){
		window.dhtmlDragAndDrop.preCreateDragCopy();
		window.dhtmlDragAndDrop.dragStartNode=win.dhtmlDragAndDrop.dragStartNode;
		window.dhtmlDragAndDrop.dragStartObject=win.dhtmlDragAndDrop.dragStartObject;
		window.dhtmlDragAndDrop.dragNode=win.dhtmlDragAndDrop.dragNode;
		window.dhtmlDragAndDrop.gldragNode=win.dhtmlDragAndDrop.dragNode;
		window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;
		window.waitDrag=0;
</P><P>		if (((!_isIE)&amp;&amp;(mode))&amp;&amp;((!_isFF)||(_FFrv &lt; 1.8)))
			window.dhtmlDragAndDrop.calculateFramePosition();
	}
	try{
	if ((parent.dhtmlDragAndDrop)&amp;&amp;(parent != window)&amp;&amp;(parent != win))
		parent.dhtmlDragAndDrop.initFrameRoute(window);
	}catch(e){}
</P><P>	for (var i = 0; i &lt; window.frames.length; i++){
		try{
		if ((window.frames[i] != win)&amp;&amp;(window.frames[i].dhtmlDragAndDrop))
			window.frames[i].dhtmlDragAndDrop.initFrameRoute(window, ((!win||mode) ? 1 : 0));
		} catch(e){}
	}
}
</P><PRE>_isFF = false;
_isIE = false;
_isOpera = false;
_isKHTML = false;
_isMacOS = false;
_isChrome = false;
_FFrv = false;
_KHTMLrv = false;
_OperaRv = false;
</PRE><P>if (navigator.userAgent.indexOf('Macintosh') != -1)
	_isMacOS=true;
</P><P>
if (navigator.userAgent.toLowerCase().indexOf('chrome')&gt;-1)
	_isChrome=true;
</P><P>if ((navigator.userAgent.indexOf('Safari') != -1)||(navigator.userAgent.indexOf('Konqueror') != -1)){
	 _KHTMLrv = parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf('Safari')+7, 5));
</P><P>	if (_KHTMLrv &gt; 525){ //mimic FF behavior for Safari 3.1+
		_isFF=true;
		 _FFrv = 1.9;
	} else
		_isKHTML=true;
} else if (navigator.userAgent.indexOf('Opera') != -1){
	_isOpera=true;
	_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf('Opera')+6, 3));
}
</P><P>
else if (navigator.appName.indexOf(&quot;Microsoft&quot;) != -1){
	_isIE=true;
	if ((navigator.appVersion.indexOf(&quot;MSIE 8.0&quot;)!= -1 || 
		 navigator.appVersion.indexOf(&quot;MSIE 9.0&quot;)!= -1 || 
		 navigator.appVersion.indexOf(&quot;MSIE 10.0&quot;)!= -1 ||
		 document.documentMode &gt; 7) &amp;&amp; 
			document.compatMode != &quot;BackCompat&quot;){
		_isIE=8;
	}
} else if (navigator.appName  == 'Netscape' &amp;&amp; navigator.userAgent.indexOf(&quot;Trident&quot;) != -1){
	//ie11
	_isIE=8;
} else {
	_isFF=true;
	 _FFrv = parseFloat(navigator.userAgent.split(&quot;rv:&quot;)[1])
}
</P><P>
//multibrowser Xpath processor
dtmlXMLLoaderObject.prototype.doXPath=function(xpathExp, docObj, namespace, result_type){
	if (_isKHTML || (!_isIE &amp;&amp; !window.XPathResult))
		return this.doXPathOpera(xpathExp, docObj);
</P><P>	if (_isIE){ //IE
		if (!docObj)
			if (!this.xmlDoc.nodeName)
				docObj=this.xmlDoc.responseXML
			else
				docObj=this.xmlDoc;
</P><P>		if (!docObj)
			dhtmlxError.throwError(&quot;LoadXML&quot;, &quot;Incorrect XML&quot;, [
				(docObj||this.xmlDoc),
				this.mainObject
			]);
</P><P>		if (namespace != null)
			docObj.setProperty(&quot;SelectionNamespaces&quot;, &quot;xmlns:xsl='&quot;+namespace+&quot;'&quot;); //
</P><P>		if (result_type == 'single'){
			return docObj.selectSingleNode(xpathExp);
		}
		else {
			return docObj.selectNodes(xpathExp)||new Array(0);
		}
	} else { //Mozilla
		var nodeObj = docObj;
</P><P>		if (!docObj){
			if (!this.xmlDoc.nodeName){
				docObj=this.xmlDoc.responseXML
			}
			else {
				docObj=this.xmlDoc;
			}
		}
</P><P>		if (!docObj)
			dhtmlxError.throwError(&quot;LoadXML&quot;, &quot;Incorrect XML&quot;, [
				(docObj||this.xmlDoc),
				this.mainObject
			]);
</P><P>		if (docObj.nodeName.indexOf(&quot;document&quot;) != -1){
			nodeObj=docObj;
		}
		else {
			nodeObj=docObj;
			docObj=docObj.ownerDocument;
		}
		var retType = XPathResult.ANY_TYPE;
</P><P>		if (result_type == 'single')
			retType=XPathResult.FIRST_ORDERED_NODE_TYPE
		var rowsCol = new Array();
		var col = docObj.evaluate(xpathExp, nodeObj, function(pref){
			return namespace
		}, retType, null);
</P><P>		if (retType == XPathResult.FIRST_ORDERED_NODE_TYPE){
			return col.singleNodeValue;
		}
		var thisColMemb = col.iterateNext();
</P><P>		while (thisColMemb){
			rowsCol[rowsCol.length]=thisColMemb;
			thisColMemb=col.iterateNext();
		}
		return rowsCol;
	}
}
</P><P>function _dhtmlxError(type, name, params){
	if (!this.catches)
		this.catches=new Array();
</P><P>	return this;
}
</P><P>_dhtmlxError.prototype.catchError=function(type, func_name){
	this.catches[type]=func_name;
}
_dhtmlxError.prototype.throwError=function(type, name, params){
	if (this.catches[type])
		return this.catches[type](type, name, params);
</P><P>	if (this.catches[&quot;ALL&quot;])
		return this.catches[&quot;ALL&quot;](type, name, params);
</P><P>	alert(&quot;Error type: &quot;+arguments[0]+&quot;\nDescription: &quot;+arguments[1]);
	return null;
}
</P><P>window.dhtmlxError=new _dhtmlxError();
</P><P>
//opera fake, while 9.0 not released
//multibrowser Xpath processor
dtmlXMLLoaderObject.prototype.doXPathOpera=function(xpathExp, docObj){
	//this is fake for Opera
	var z = xpathExp.replace(/[\/]+/gi, &quot;/&quot;).split('/');
	var obj = null;
	var i = 1;
</P><P>	if (!z.length)
		return [];
</P><P>	if (z[0] == &quot;.&quot;)
		obj=[docObj]; else if (z[0] == &quot;&quot;){
		obj=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(z[i].replace(/\<A href="/wiki/index.php?title=%5E%5C&amp;action=edit&amp;redlink=1" class="new" title="^\ (page does not exist)">^\</A>*\]/g, &quot;&quot;));
		i++;
	} else
		return [];
</P><P>	for (i; i &lt; z.length; i++)obj=this._getAllNamedChilds(obj, z[i]);
</P><P>	if (z[i-1].indexOf(&quot;[&quot;) != -1)
		obj=this._filterXPath(obj, z[i-1]);
	return obj;
}
</P><P>dtmlXMLLoaderObject.prototype._filterXPath=function(a, b){
	var c = new Array();
	var b = b.replace(/[^\[]*\[\@/g, &quot;&quot;).replace(/[\[\]\@]*/g, &quot;&quot;);
</P><P>	for (var i = 0; i &lt; a.length; i++)
		if (a[i].getAttribute(b))
			c[c.length]=a[i];
</P><P>	return c;
}
dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(a, b){
	var c = new Array();
</P><P>	if (_isKHTML)
		b=b.toUpperCase();
</P><P>	for (var i = 0; i &lt; a.length; i++)for (var j = 0; j &lt; a[i].childNodes.length; j++){
		if (_isKHTML){
			if (a[i].childNodes[j].tagName&amp;&amp;a[i].childNodes[j].tagName.toUpperCase() == b)
				c[c.length]=a[i].childNodes[j];
		}
</P><P>		else if (a[i].childNodes[j].tagName == b)
			c[c.length]=a[i].childNodes[j];
	}
</P><P>	return c;
}
</P><P>function dhtmlXHeir(a, b){
	for (var c in b)
		if (typeof (b[c]) == &quot;function&quot;)
			a[c]=b[c];
	return a;
}
</P><P>function dhtmlxEvent(el, event, handler){
	if (el.addEventListener)
		el.addEventListener(event, handler, false);
</P><P>	else if (el.attachEvent)
		el.attachEvent(&quot;on&quot;+event, handler);
}
</P><P>//============= XSL Extension ===================================
</P><P>dtmlXMLLoaderObject.prototype.xslDoc=null;
dtmlXMLLoaderObject.prototype.setXSLParamValue=function(paramName, paramValue, xslDoc){
	if (!xslDoc)
		xslDoc=this.xslDoc
</P><P>	if (xslDoc.responseXML)
		xslDoc=xslDoc.responseXML;
	var item =
		this.doXPath(&quot;/xsl:stylesheet/xsl:variable[@name='&quot;+paramName+&quot;']&quot;, xslDoc,
			&quot;http:/\/www.w3.org/1999/XSL/Transform&quot;, &quot;single&quot;);
</P><P>	if (item != null)
		item.firstChild.nodeValue=paramValue
}
dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(xslDoc, xmlDoc){
	if (!xslDoc)
		xslDoc=this.xslDoc;
</P><P>	if (xslDoc.responseXML)
		xslDoc=xslDoc.responseXML
</P><P>	if (!xmlDoc)
		xmlDoc=this.xmlDoc;
</P><P>	if (xmlDoc.responseXML)
		xmlDoc=xmlDoc.responseXML
</P><P>	//MOzilla
	if (!_isIE){
		if (!this.XSLProcessor){
			this.XSLProcessor=new XSLTProcessor();
			this.XSLProcessor.importStylesheet(xslDoc);
		}
		var result = this.XSLProcessor.transformToDocument(xmlDoc);
	} else {
		var result = new ActiveXObject(&quot;Msxml2.DOMDocument.3.0&quot;);
		try{
			xmlDoc.transformNodeToObject(xslDoc, result);
		}catch(e){
			result = xmlDoc.transformNode(xslDoc);
		}
	}
	return result;
}
</P><P>dtmlXMLLoaderObject.prototype.doXSLTransToString=function(xslDoc, xmlDoc){
	var res = this.doXSLTransToObject(xslDoc, xmlDoc);
	if(typeof(res)==&quot;string&quot;)
		return res;
	return this.doSerialization(res);
}
</P><P>dtmlXMLLoaderObject.prototype.doSerialization=function(xmlDoc){
	if (!xmlDoc)
			xmlDoc=this.xmlDoc;
	if (xmlDoc.responseXML)
			xmlDoc=xmlDoc.responseXML
	if (!_isIE){
		var xmlSerializer = new XMLSerializer();
		return xmlSerializer.serializeToString(xmlDoc);
	} else
		return xmlDoc.xml;
}
</P><P>/**
</P><UL><LI>   @desc: 
</LI><LI>   @type: private
</LI><LI>/
</LI></UL><P>dhtmlxEventable=function(obj){
		obj.attachEvent=function(name, catcher, callObj){
			name='ev_'+name.toLowerCase();
			if (!this[name])
				this[name]=new this.eventCatcher(callObj||this);
</P><P>			return(name+':'+this[name].addEvent(catcher)); //return ID (event name &amp; event ID)
		}
		obj.callEvent=function(name, arg0){ 
			name='ev_'+name.toLowerCase();
			if (this[name])
				return this[name].apply(this, arg0);
			return true;
		}
		obj.checkEvent=function(name){
			return (!!this['ev_'+name.toLowerCase()])
		}
		obj.eventCatcher=function(obj){
			var dhx_catch = [];
			var z = function(){
				var res = true;
				for (var i = 0; i &lt; dhx_catch.length; i++){
					if (dhx_catch[i] != null){
						var zr = dhx_catch[i].apply(obj, arguments);
						res=res&amp;&amp;zr;
					}
				}
				return res;
			}
			z.addEvent=function(ev){
				if (typeof (ev) != &quot;function&quot;)
					ev=eval(ev);
				if (ev)
					return dhx_catch.push(ev)-1;
				return false;
			}
			z.removeEvent=function(id){
				dhx_catch[id]=null;
			}
			return z;
		}
		obj.detachEvent=function(id){
			if (id != false){
				var list = id.split(':');           //get EventName and ID
				this[list[0]].removeEvent(list[1]); //remove event
			}
		}
		obj.detachAllEvents = function(){
			for (var name in this){
				if (name.indexOf(&quot;ev_&quot;)==0){
					this.detachEvent(name);
					this[name] = null;
				}
			}
		}
		obj = null;
};
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2014.igem.org/Team:DTU-Denmark/dhtmlxcommon.js">http://2014.igem.org/Team:DTU-Denmark/dhtmlxcommon.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:DTU-Denmark/dhtmlxcommon.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:DTU-Denmark/dhtmlxcommon.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:DTU-Denmark/dhtmlxcommon.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:DTU-Denmark/dhtmlxcommon.js&amp;oldid=36623" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2014.igem.org:Privacy_policy" title="2014.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2014.igem.org:General_disclaimer" title="2014.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>