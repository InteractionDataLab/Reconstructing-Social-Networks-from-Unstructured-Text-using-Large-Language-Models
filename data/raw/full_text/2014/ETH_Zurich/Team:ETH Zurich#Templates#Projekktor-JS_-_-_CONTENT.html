<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_ETH_Zurich_Templates_Projekktor-JS"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:ETH_Zurich/Templates/Projekktor-JS">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:ETH_Zurich/Templates/Projekktor-JS&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:ETH_Zurich/Templates/Projekktor-JS&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:ETH_Zurich/Templates/Projekktor-JS&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:ETH_Zurich/Templates/Projekktor-JS" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform">Â </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:ETH Zurich/Templates/Projekktor-JS</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2014.igem.org</H3><P>/*!
</P><PRE>* Projekktor II - HTML5 Media Player, Projekktor Core Version: V1.2.38 r332
* <A href="http://www.projekktor.com" class="external free" rel="nofollow">http://www.projekktor.com</A>
* Copyright 2010, 2011, Sascha Kluger, Spinning Airwhale Media, <A href="http://www.spinningairwhale.com" class="external free" rel="nofollow">http://www.spinningairwhale.com</A>
* GNU General Public License
* <A href="http://www.projekktor.com/license/" class="external free" rel="nofollow">http://www.projekktor.com/license/</A>
*/
</PRE><P>jQuery(function($){var projekktors=[];if(!!document.createElement(&quot;video&quot;).canPlayType){(function(){if(!
/*@cc_on!@*/
0){return}var e=&quot;audio,video,track,source&quot;.split(&quot;,&quot;);for(var i=0;i&lt;e.length;i++){document.createElement(e[i])}})()}function Iterator(arr){this.length=arr.length;this.each=function(fn){$.each(arr,fn)};this.size=function(){return arr.length}}if($.fn.prop===null){$.fn.prop=function(arga,argb){return $(this).attr(arga,argb)}}projekktor=$p=function(){var arg=arguments[0],instances=[],plugins=[];if(!arguments.length){return projekktors[0]||null}if(typeof arg==&quot;number&quot;){return projekktors[arg]}if(typeof arg==&quot;string&quot;){if(arg==&quot;*&quot;){return new Iterator(projekktors)}for(var i=0;i&lt;projekktors.length;i++){try{if(projekktors[i].getId()==arg.id){instances.push(projekktors[i]);continue}}catch(e){}try{for(var j=0;j&lt;$(arg).length;j++){if(projekktors[i].env.playerDom.get(0)==$(arg).get(j)){instances.push(projekktors[i]);continue}}}catch(e){}try{if(projekktors[i].getParent()==arg){instances.push(projekktors[i]);continue}}catch(e){}try{if(projekktors[i].getId()==arg){instances.push(projekktors[i]);continue}}catch(e){}}if(instances.length&gt;0){return(instances.length==1)?instances[0]:new Iterator(instances)}}if(instances.length===0){var cfg=arguments[1]||{},callback=arguments[2]||{},count=0,playerA;if(typeof arg==&quot;string&quot;){$.each($(arg),function(){playerA=new PPlayer($(this),cfg,callback);projekktors.push(playerA);count++});return(count&gt;1)?new Iterator(projekktors):playerA}else{if(arg){projekktors.push(new PPlayer(arg,cfg,callback));return new Iterator(projekktors)}}}return null;function PPlayer(srcNode,cfg,onReady){this.config=new projekktorConfig(&quot;1.2.38&quot;);this.env={muted:false,playerDom:null,mediaContainer:null,agent:&quot;standard&quot;,mouseIsOver:false,loading:false,className:&quot;&quot;,onReady:onReady};this.media=[];this._plugins=[];this._pluginCache={};this._queue=[];this._cuePoints={};this.listeners=[];this.playerModel={};this._isReady=false;this._maxElapsed=0;this._currentItem=null;this._playlistServer=&quot;&quot;;this._id=&quot;&quot;;this._reelUpdate=function(obj){var ref=this,itemIdx=null,data=obj||[{}],files=data.playlist||data;this.env.loading=true;this.media=[];try{for(var props in data.config){if(typeof data.config[props].indexOf(&quot;objectfunction&quot;)&gt;-1){continue}this.config[props]=eval(data.config[props])}if(data.config!=null){$p.utils.log(&quot;Updated config var: &quot;+props+&quot; to &quot;+this.config[props]);this._promote(&quot;configModified&quot;);delete (data.config)}}catch(e){}$.each(files,function(){itemIdx=ref._addItem(ref._prepareMedia({file:this,config:this.config||{},errorCode:this.errorCode||0}));$.each(this.cuepoints||[],function(){this.item=itemIdx;ref.setCuePoint(this)})});if(itemIdx===null){this._addItem(this._prepareMedia({file:&quot;&quot;,config:{},errorCode:97}))}this.env.loading=false;this._promote(&quot;scheduled&quot;,this.getItemCount());this._syncPlugins(function(){ref.setActiveItem(0)})};this._addItem=function(data,idx,replace){var resultIdx=0;if(this.media.length===1&amp;&amp;this.media[0].mediaModel==&quot;NA&quot;){this._detachplayerModel();this.media=[]}if(idx===undefined||idx&lt;0||idx&gt;this.media.length-1){this.media.push(data);resultIdx=this.media.length-1}else{this.media.splice(idx,(replace===true)?1:0,data);resultIdx=idx}if(this.env.loading===false){this._promote(&quot;scheduleModified&quot;,this.getItemCount())}return resultIdx};this._removeItem=function(idx){var resultIdx=0;if(this.media.length===1){if(this.media[0].mediaModel==&quot;NA&quot;){return 0}else{this.media[0]=this._prepareMedia({file:&quot;&quot;});return 0}}if(idx===undefined||idx&lt;0||idx&gt;this.media.length-1){this.media.pop();resultIdx=this.media.length}else{this.media.splice(idx,1);resultIdx=idx}if(this.env.loading===false){this._promote(&quot;scheduleModified&quot;,this.getItemCount())}return resultIdx};this._prepareMedia=function(data){var ref=this,mediaFiles=[],qualities=[],extTypes={},typesModels={},modelSets=[],result={},extRegEx=[];for(var i in $p.mmap){if($p.mmap.hasOwnProperty(i)){platforms=(typeof $p.mmap[i].platform==&quot;object&quot;)?$p.mmap[i].platform:[$p.mmap[i].platform];$.each(platforms,function(_na,platform){if(!ref._canPlay($p.mmap[i].type,platform,data.config.streamType)){return true}$p.mmap[i].level=$.inArray(platform,ref.config._platforms);$p.mmap[i].level=($p.mmap[i].level&lt;0)?100:$p.mmap[i].level;extRegEx.push(&quot;.&quot;+$p.mmap[i].ext);if(!extTypes[$p.mmap[i].ext]){extTypes[$p.mmap[i].ext]=[]}extTypes[$p.mmap[i].ext].push($p.mmap[i]);if($p.mmap[i].streamType==null||data.config.streamType==null||$.inArray(data.config.streamType,$p.mmap[i].streamType)&gt;-1||$p.mmap[i].streamType==&quot;*&quot;){if(!typesModels[$p.mmap[i].type]){typesModels[$p.mmap[i].type]=[]}typesModels[$p.mmap[i].type].push($p.mmap[i])}return true})}}extRegEx=&quot;^.*.(&quot;+extRegEx.join(&quot;|&quot;)+&quot;)$&quot;;if(typeof data.file==&quot;string&quot;){data.file=[{src:data.file}];if(typeof data.type==&quot;string&quot;){data.file=[{src:data.file,type:data.type}]}}if($.isEmptyObject(data)||data.file===false||data.file===null){data.file=[{src:null}]}for(var index in data.file){if(data.file.hasOwnProperty(index)){if(index==&quot;config&quot;){continue
}if(typeof data.file[index]==&quot;string&quot;){data.file[index]={src:data.file[index]}}if(data.file[index].src==null){continue}if(data.file[index].type!=null&amp;&amp;data.file[index].type!==&quot;&quot;){try{var codecMatch=data.file[index].type.split(&quot; &quot;).join(&quot;&quot;).split(/[\;]codecs=.([a-zA-Z0-9\,]*)[\'|\&quot;]/i);if(codecMatch[1]!=null){data.file[index].codec=codecMatch[1]}data.file[index].type=codecMatch[0]}catch(e){}}else{data.file[index].type=this._getTypeFromFileExtension(data.file[index].src)}var possibleTypes=$.merge(typesModels[data.file[index].type]||[],typesModels[data.file[index].type.replace(/x-/,&quot;&quot;)]||[]);if(possibleTypes.length&gt;0){possibleTypes.sort(function(a,b){return a.level-b.level});modelSets.push(possibleTypes[0])}}}if(modelSets.length===0){modelSets=typesModels[&quot;none/none&quot;]}else{modelSets.sort(function(a,b){return a.level-b.level});var bestMatch=modelSets[0].level;modelSets=$.grep(modelSets,function(value){return value.level==bestMatch})}var types=[];$.each(modelSets||[],function(){types.push(this.type)});var modelSet=(modelSets&amp;&amp;modelSets.length&gt;0)?modelSets[0]:{type:&quot;none/none&quot;,model:&quot;NA&quot;,errorCode:11};types=$p.utils.unique(types);for(var index in data.file){if(data.file[index].type==null){continue}if(($.inArray(data.file[index].type.replace(/x-/,&quot;&quot;),types)&lt;0)&amp;&amp;modelSet.type!=&quot;none/none&quot;){continue}data.file[index].src=(!$.isEmptyObject(data.config)&amp;&amp;(data.config.streamType==&quot;http&quot;||data.config.streamType==null))?$p.utils.toAbsoluteURL(data.file[index].src):data.file[index].src;if(data.file[index].quality==null){data.file[index].quality=&quot;default&quot;}qualities.push(data.file[index].quality);mediaFiles.push(data.file[index])}if(mediaFiles.length==0){mediaFiles.push({src:null,quality:&quot;default&quot;})}var _setQual=[];$.each(this.getConfig(&quot;playbackQualities&quot;),function(){_setQual.push(this.key||&quot;default&quot;)});result={ID:data.config.id||$p.utils.randomId(8),cat:data.config.cat||&quot;clip&quot;,file:mediaFiles,platform:modelSet.platform,platforms:platforms,qualities:$p.utils.intersect($p.utils.unique(_setQual),$p.utils.unique(qualities)),mediaModel:modelSet.model||&quot;NA&quot;,errorCode:modelSet.errorCode||data.errorCode||7,config:data.config||{}};return result};this._modelUpdateListener=function(type,value){var ref=this;if(!this.playerModel.init){return}if(type!=&quot;time&quot;&amp;&amp;type!=&quot;progress&quot;){$p.utils.log(&quot;Update: '&quot;+type,this.playerModel.getSrc(),this.playerModel.getModelName(),value)}switch(type){case&quot;state&quot;:this._promote(&quot;state&quot;,value);var classes=$.map(this.getDC().attr(&quot;class&quot;).split(&quot; &quot;),function(item){return item.indexOf(ref.getConfig(&quot;ns&quot;)+&quot;state&quot;)===-1?item:&quot;&quot;});classes.push(this.getConfig(&quot;ns&quot;)+&quot;state&quot;+value.toLowerCase());this.getDC().attr(&quot;class&quot;,classes.join(&quot; &quot;));switch(value){case&quot;AWAKENING&quot;:var modelRef=this.playerModel;this._syncPlugins(function(){if(modelRef.getState(&quot;AWAKENING&quot;)){modelRef.displayItem(true)}});break;case&quot;ERROR&quot;:this._addGUIListeners();break;case&quot;STOPPED&quot;:this._promote(&quot;stopped&quot;,{});break;case&quot;PAUSED&quot;:if(this.getConfig(&quot;disablePause&quot;)===true){this.playerModel.applyCommand(&quot;play&quot;,0)}break;case&quot;COMPLETED&quot;:if(this._currentItem+1&gt;=this.media.length&amp;&amp;!this.getConfig(&quot;loop&quot;)){if(this.getConfig(&quot;leaveFullscreen&quot;)){this.setFullscreen(false)}this._promote(&quot;done&quot;,{})}this.setActiveItem(&quot;next&quot;);break}break;case&quot;modelReady&quot;:this._maxElapsed=0;this._promote(&quot;item&quot;,ref._currentItem);break;case&quot;displayReady&quot;:this._promote(&quot;displayReady&quot;,true);modelRef=this.playerModel;this._syncPlugins(function(){ref._promote(&quot;ready&quot;);ref._addGUIListeners();if(!modelRef.getState(&quot;IDLE&quot;)){modelRef.start()}});break;case&quot;qualityChange&quot;:this.setConfig({playbackQuality:value});this._promote(&quot;qualityChange&quot;,value);break;case&quot;volume&quot;:this.setConfig({volume:value});this._promote(&quot;volume&quot;,value);if(value&lt;=0){this.env.muted=true;this._promote(&quot;mute&quot;,value)}else{if(this.env.muted===true){this.env.muted=false;this._promote(&quot;unmute&quot;,value)}}break;case&quot;playlist&quot;:this.setFile(value.file,value.type);break;case&quot;config&quot;:this.setConfig(value);break;case&quot;time&quot;:if(this._maxElapsed&lt;value){var pct=Math.round(value*100/this.getDuration()),evt=false;if(pct&lt;25){pct=25}if(pct&gt;25&amp;&amp;pct&lt;50){evt=&quot;firstquartile&quot;;pct=50}if(pct&gt;50&amp;&amp;pct&lt;75){evt=&quot;midpoint&quot;;pct=75}if(pct&gt;75&amp;&amp;pct&lt;100){evt=&quot;thirdquartile&quot;;pct=100}if(evt!==false){this._promote(evt,value)}this._maxElapsed=(this.getDuration()*pct/100)}this._promote(type,value);break;case&quot;fullscreen&quot;:if(value===true){this.getDC().addClass(&quot;fullscreen&quot;);this._enterFullViewport()}else{this.getDC().removeClass(&quot;fullscreen&quot;);this._exitFullViewport()}this._promote(type,value);break;case&quot;error&quot;:this._promote(type,value);if(this.getConfig(&quot;skipTestcard&quot;)&amp;&amp;this.getItemCount()&gt;1){this.setActiveItem(&quot;next&quot;)}else{this.playerModel.applyCommand(&quot;error&quot;,value);this._addGUIListeners()}break;default:this._promote(type,value);break}};this._syncPlugins=function(callback){var ref=this;this.env.loading=true;(function(){try{if(ref._plugins.length&gt;0){for(var i=0;i&lt;ref._plugins.length;i++){if(!ref._plugins[i].isReady()){setTimeout(arguments.callee,50);return}}}ref.env.loading=false;
ref._promote(&quot;pluginsReady&quot;,{});try{callback()}catch(e){}}catch(e){}})()};this._MD=function(event){projekktor(&quot;#&quot;+event.currentTarget.id.replace(/_media$/,&quot;&quot;))._playerFocusListener(event)};this._addGUIListeners=function(){var ref=this;this._removeGUIListeners();if(this.getDC().get(0).addEventListener){this.getDC().get(0).addEventListener(&quot;mousedown&quot;,this._MD,true)}else{this.getDC().mousedown(function(event){ref._playerFocusListener(event)})}this.getDC().mousemove(function(event){ref._playerFocusListener(event)}).mouseenter(function(event){ref._playerFocusListener(event)}).mouseleave(function(event){ref._playerFocusListener(event)}).focus(function(event){ref._playerFocusListener(event)}).blur(function(event){ref._playerFocusListener(event)});$(window).bind(&quot;resize.projekktor&quot;+this.getId(),function(){ref.setSize()}).bind(&quot;touchstart&quot;,function(){ref._windowTouchListener(event)});if(this.config.enableKeyboard===true){$(document).unbind(&quot;keydown.pp&quot;+this._id);$(document).bind(&quot;keydown.pp&quot;+this._id,function(evt){ref._keyListener(evt)})}};this._removeGUIListeners=function(){$(&quot;#&quot;+this.getId()).unbind();this.getDC().unbind();if(this.getDC().get(0).removeEventListener){this.getDC().get(0).removeEventListener(&quot;mousedown&quot;,this._MD,true)}else{this.getDC().get(0).detachEvent(&quot;onmousedown&quot;,this._MD)}$(window).unbind(&quot;resize.projekktor&quot;+this.getId())};this._registerPlugins=function(){var plugins=$.merge($.merge([],this.config._plugins),this.config._addplugins),pluginName=&quot;&quot;,pluginObj=null;if(this._plugins.length&gt;0||plugins.length==0){return}for(var i=0;i&lt;plugins.length;i++){pluginName=&quot;projekktor&quot;+plugins[i].charAt(0).toUpperCase()+plugins[i].slice(1);try{typeof eval(pluginName)}catch(e){$p.utils.log(&quot;ERROR:&quot;,e);continue}pluginObj=$.extend(true,{},new projekktorPluginInterface(),eval(pluginName).prototype);pluginObj.name=plugins[i].toLowerCase();pluginObj.pp=this;pluginObj.playerDom=this.env.playerDom;pluginObj._init(this.config[&quot;plugin_&quot;+plugins[i].toLowerCase()]||{});if(this.config[&quot;plugin_&quot;+pluginObj.name]==null){this.config[&quot;plugin_&quot;+pluginObj.name]={}}this.config[&quot;plugin_&quot;+pluginObj.name]=$.extend(true,{},pluginObj.config||{});for(var propName in pluginObj){if(propName.indexOf(&quot;Handler&quot;)&gt;1){if(this._pluginCache[propName]==null){this._pluginCache[propName]=[]}this._pluginCache[propName].push(pluginObj)}}this._plugins.push(pluginObj)}};this.removePlugins=function(rmvPl){if(this._plugins.length==0){return}var pluginsToRemove=rmvPl||$.merge($.merge([],this.config._plugins),this.config._addplugins),pluginsRegistered=this._plugins.length;for(var j=0;j&lt;pluginsToRemove.length;j++){for(var k=0;k&lt;pluginsRegistered;k++){if(this._plugins[k]!=undefined){if(this._plugins[k].name==pluginsToRemove[j].toLowerCase()){this._plugins[k].deconstruct();this._plugins.splice(k,1);for(var events in this._pluginCache){for(var shortcuts=0;shortcuts&lt;this._pluginCache[events].length;shortcuts++){if(this._pluginCache[events][shortcuts].name==pluginsToRemove[j].toLowerCase()){this._pluginCache[events].splice(shortcuts,1)}}}}}}}};this.getPlugins=function(){var result=[];$.each(this._plugins,function(){result.push({name:this.name,ver:this.version||&quot;unknown&quot;})});return result};this._promote=function(evt,value){var event=evt,pluginData={};if(typeof event==&quot;object&quot;){if(!event._plugin){return}event=&quot;plugin_&quot;+event._plugin+$p.utils.capitalise(event._event.toUpperCase())}if(event!=&quot;time&quot;&amp;&amp;event!=&quot;progress&quot;&amp;&amp;event!=&quot;mousemove&quot;){$p.utils.log(&quot;Event: [&quot;+event+&quot;]&quot;,value,this.listeners)}if(this._pluginCache[event+&quot;Handler&quot;]&amp;&amp;this._pluginCache[event+&quot;Handler&quot;].length&gt;0){for(var i=0;i&lt;this._pluginCache[event+&quot;Handler&quot;].length;i++){if(this.getConfig(&quot;debug&quot;)){try{this._pluginCache[event+&quot;Handler&quot;][i][event+&quot;Handler&quot;](value,this)}catch(e){$p.utils.log(e)}}else{this._pluginCache[event+&quot;Handler&quot;][i][event+&quot;Handler&quot;](value,this)}}}if(this._pluginCache.eventHandler&amp;&amp;this._pluginCache.eventHandler.length&gt;0){for(var i=0;i&lt;this._pluginCache.eventHandler.length;i++){if(this.getConfig(&quot;debug&quot;)){try{this._pluginCache.eventHandler[i][&quot;eventHandler&quot;](event,value,this)}catch(e){$p.utils.log(e)}}else{this._pluginCache.eventHandler[i][&quot;eventHandler&quot;](event,value,this)}}}if(this.listeners.length&gt;0){for(var i=0;i&lt;this.listeners.length;i++){if(this.listeners[i][&quot;event&quot;]==event||this.listeners[i][&quot;event&quot;]==&quot;*&quot;){if(this.getConfig(&quot;debug&quot;)){try{this.listeners[i][&quot;callback&quot;](value,this)}catch(e){$p.utils.log(e)}}else{this.listeners[i][&quot;callback&quot;](value,this)}}}}};this._detachplayerModel=function(){this._removeGUIListeners();try{this.playerModel.destroy();this._promote(&quot;detach&quot;,{})}catch(e){}};this._windowTouchListener=function(evt){if(evt.touches){if(evt.touches.length&gt;0){if(($(document.elementFromPoint(evt.touches[0].clientX,evt.touches[0].clientY)).attr(&quot;id&quot;)||&quot;&quot;).indexOf(this.getDC().attr(&quot;id&quot;))&gt;-1){if(this.env.mouseIsOver==false){this._promote(&quot;mouseenter&quot;,{})}this.env.mouseIsOver=true;this._promote(&quot;mousemove&quot;,{});evt.stopPropagation()}else{if(this.env.mouseIsOver){this._promote(&quot;mouseleave&quot;,{});
this.env.mouseIsOver=false}}}}};this._playerFocusListener=function(evt){var type=evt.type.toLowerCase();switch(type){case&quot;mousedown&quot;:if(this.env.mouseIsOver==false){break}if(&quot;|TEXTAREA|INPUT&quot;.indexOf(&quot;|&quot;+evt.target.tagName.toUpperCase())&gt;-1){return}if(evt.which==3){if($(evt.target).hasClass(&quot;context&quot;)){break}$(document).bind(&quot;contextmenu&quot;,function(evt){$(document).unbind(&quot;contextmenu&quot;);return false})}break;case&quot;mousemove&quot;:if(this.env.mouseX!=evt.clientX&amp;&amp;this.env.mouseY!=evt.clientY){this.env.mouseIsOver=true}if(this.env.clientX==evt.clientX&amp;&amp;this.env.clientY==evt.clientY){return}this.env.clientX=evt.clientX;this.env.clientY=evt.clientY;break;case&quot;focus&quot;:case&quot;mouseenter&quot;:this.env.mouseIsOver=true;break;case&quot;blur&quot;:case&quot;mouseleave&quot;:this.env.mouseIsOver=false;break}this._promote(type,evt)};this._keyListener=function(evt){if(!this.env.mouseIsOver){return}if(&quot;|TEXTAREA|INPUT&quot;.indexOf(&quot;|&quot;+evt.target.tagName.toUpperCase())&gt;-1){return}var ref=this,set=(this.getConfig(&quot;keys&quot;).length&gt;0)?this.getConfig(&quot;keys&quot;):[{27:function(player){if(player.getInFullscreen()){player.setFullscreen(false)}else{player.setStop()}},32:function(player,evt){player.setPlayPause();evt.preventDefault()},70:function(player){player.setFullscreen()},39:function(player,evt){player.setPlayhead(&quot;+5&quot;);evt.preventDefault()},37:function(player,evt){player.setPlayhead(&quot;-5&quot;);evt.preventDefault()},38:function(player,evt){player.setVolume(&quot;+0.05&quot;);evt.preventDefault()},40:function(player,evt){player.setVolume(&quot;-0.05&quot;);evt.preventDefault()},68:function(player){player.setDebug()},67:function(player){$p.utils.log(&quot;Config Dump&quot;,player.config)},80:function(player){$p.utils.log(&quot;Schedule Dump&quot;,player.media)},84:function(player){$p.utils.log(&quot;Cuepoints Dump&quot;,player.getCuePoints())}}];this._promote(&quot;key&quot;,evt);$.each(set||[],function(){try{this[evt.keyCode](ref,evt)}catch(e){}try{this[&quot;*&quot;](ref)}catch(e){}})};this._enterFullViewport=function(forcePlayer){var win=this.getIframeParent()||$(window),target=this.getIframe()||this.getDC(),overflow=$(win[0].document.body).css(&quot;overflow&quot;);if(forcePlayer){win=$(window);target=this.getDC()}target.data(&quot;fsdata&quot;,{scrollTop:win.scrollTop()||0,scrollLeft:win.scrollLeft()||0,targetStyle:target.attr(&quot;style&quot;)||&quot;&quot;,targetWidth:target.width(),targetHeight:target.height(),bodyOverflow:(overflow==&quot;visible&quot;)?&quot;auto&quot;:overflow,bodyOverflowX:$(win[0].document.body).css(&quot;overflow-x&quot;),bodyOverflowY:$(win[0].document.body).css(&quot;overflow-y&quot;),iframeWidth:target.attr(&quot;width&quot;)||0,iframeHeight:target.attr(&quot;height&quot;)||0}).css({position:&quot;fixed&quot;,display:&quot;block&quot;,top:0,left:0,width:&quot;100%&quot;,height:&quot;100%&quot;,zIndex:99999,margin:0,padding:0});win.scrollTop(0).scrollLeft(0);$(win[0].document.body).css({overflow:&quot;hidden&quot;,overflowX:&quot;hidden&quot;,overflowY:&quot;hidden&quot;})};this._exitFullViewport=function(forcePlayer){var win=this.getIframeParent()||$(window),target=this.getIframe()||this.getDC(),fsData=target.data(&quot;fsdata&quot;)||null;if(forcePlayer){win=$(window);target=this.getDC()}if(fsData!=null){win.scrollTop(fsData.scrollTop).scrollLeft(fsData.scrollLeft);$(win[0].document.body).css(&quot;overflow&quot;,fsData.bodyOverflow);$(win[0].document.body).css(&quot;overflow-x&quot;,fsData.bodyOverflowX);$(win[0].document.body).css(&quot;overflow-y&quot;,fsData.bodyOverflowY);if(fsData.iframeWidth&gt;0&amp;&amp;!forcePlayer){target.attr(&quot;width&quot;,fsData.iframeWidth+&quot;px&quot;).attr(&quot;height&quot;,fsData.iframeHeight+&quot;px&quot;)}else{target.width(fsData.targetWidth).height(fsData.targetHeight)}target.attr(&quot;style&quot;,(fsData.targetStyle==null)?&quot;&quot;:fsData.targetStyle).data(&quot;fsdata&quot;,null)}};this.pluginAPI=function(){var args=Array.prototype.slice.call(arguments)||null,dest=args.shift(),func=args.shift();if(dest!=null&amp;&amp;func!=null){for(var j=0;j&lt;this._plugins.length;j++){if(this._plugins[j].name==dest){this._plugins[j][func](args[0]);return}}}};this.getPlayerVer=function(){return this.config._version};this.getIsLastItem=function(){return((this._currentItem==this.media.length-1)&amp;&amp;this.config._loop!==true)};this.getIsFirstItem=function(){return((this._currentItem==0)&amp;&amp;this.config._loop!==true)};this.getItemConfig=function(name,itemIdx){return this.getConfig(name,itemIdx)};this.getConfig=function(name,itemIdx){var idx=itemIdx||this._currentItem,result=this.config[&quot;_&quot;+name]||this.config[name];if(name==null){return this.media[idx][&quot;config&quot;]}if(this.config[&quot;_&quot;+name]==undefined){try{if(this.media[idx][&quot;config&quot;][name]!==undefined){result=this.media[idx][&quot;config&quot;][name]}}catch(e){}}if(name.indexOf(&quot;plugin_&quot;)&gt;-1){try{if(this.media[idx][&quot;config&quot;][name]){result=$.extend(true,{},this.config[name],this.media[idx][&quot;config&quot;][name])}}catch(e){}}if(result==null){return null}if(typeof result==&quot;object&quot;&amp;&amp;result.length===null){result=$.extend(true,{},result||{})}else{if(typeof result==&quot;object&quot;){result=$.extend(true,[],result||[])}}if(typeof result==&quot;string&quot;){switch(result){case&quot;true&quot;:result=true;break;case&quot;false&quot;:result=false;break;case&quot;NaN&quot;:case&quot;undefined&quot;:case&quot;null&quot;:result=null;break}}return result};this.getDC=function(){return this.env.playerDom};this.getState=function(compare){var result=&quot;IDLE&quot;;
try{result=this.playerModel.getState()}catch(e){}if(compare!=null){return(result==compare.toUpperCase())}return result};this.getLoadProgress=function(){try{return this.playerModel.getLoadProgress()}catch(e){return 0}};this.getKbPerSec=function(){try{return this.playerModel.getKbPerSec()}catch(e){return 0}};this.getItemCount=function(){return(this.media.length==1&amp;&amp;this.media[0].mediaModel==&quot;na&quot;)?0:this.media.length};this.getItemId=function(idx){return this.media[idx||this._currentItem].ID||null};this.getItemIdx=function(){return this._currentItem};this.getPlaylist=function(){return this.getItem(&quot;*&quot;)};this.getItem=function(){if(this.media.length==1&amp;&amp;this.media[0].mediaModel==&quot;na&quot;){return{}}switch(arguments[0]||&quot;current&quot;){case&quot;next&quot;:return $.extend(true,{},this.media[this._currentItem+1]||{});case&quot;prev&quot;:return $.extend(true,{},this.media[this._currentItem-1]||{});case&quot;current&quot;:return $.extend(true,{},this.media[this._currentItem]||{});case&quot;*&quot;:return $.extend(true,{},this.media||{});default:return $.extend(true,{},this.media[arguments[0]||this._currentItem]||{})}};this.getVolume=function(){return(this.getConfig(&quot;fixedVolume&quot;)===true)?this.config.volume:this.getConfig(&quot;volume&quot;)};this.getTrackId=function(){if(this.getConfig(&quot;trackId&quot;)){return this.config.trackId}if(this._playlistServer!=null){return&quot;pl&quot;+this._currentItem}return null};this.getLoadPlaybackProgress=function(){try{return this.playerModel.getLoadPlaybackProgress()}catch(e){return 0}};this.getSource=function(){try{return this.playerModel.getSource()[0].src}catch(e){return false}};this.getDuration=function(){try{return this.playerModel.getDuration()}catch(e){return 0}};this.getPosition=function(){try{return this.playerModel.getPosition()||0}catch(e){return 0}};this.getMaxPosition=function(){try{return this.playerModel.getMaxPosition()||0}catch(e){return 0}};this.getFrame=function(){try{return this.playerModel.getFrame()}catch(e){return 0}};this.getTimeLeft=function(){try{return this.playerModel.getDuration()-this.playerModel.getPosition()}catch(e){return this.media[this._currentItem].duration}};this.getInFullscreen=function(){return this.getNativeFullscreenSupport().isFullScreen()};this.getMediaContainer=function(){if(this.env.mediaContainer==null){this.env.mediaContainer=$(&quot;#&quot;+this.getMediaId())}if(this.env.mediaContainer.length==0){if(this.env.playerDom.find(&quot;.&quot;+this.getNS()+&quot;display&quot;).length&gt;0){this.env.mediaContainer=$(document.createElement(&quot;div&quot;)).attr({id:this.getId()+&quot;_media&quot;}).css({overflow:&quot;hidden&quot;,height:&quot;100%&quot;,width:&quot;100%&quot;,top:0,left:0,padding:0,margin:0,display:&quot;block&quot;}).appendTo(this.env.playerDom.find(&quot;.&quot;+this.getNS()+&quot;display&quot;))}else{this.env.mediaContainer=$(document.createElement(&quot;div&quot;)).attr({id:this.getMediaId()}).css({width:&quot;1px&quot;,height:&quot;1px&quot;}).appendTo($(document.body))}}return this.env.mediaContainer};this.getMediaId=function(){return this.getId()+&quot;_media&quot;};this.getMediaType=function(){try{return this._getTypeFromFileExtension(this.playerModel.getSrc())||&quot;na/na&quot;}catch(e){return&quot;na/na&quot;}};this.getUsesFlash=function(){return(this.playerModel.modelId.indexOf(&quot;FLASH&quot;)&gt;-1)};this.getModel=function(){try{return this.media[this._currentItem].mediaModel.toUpperCase()}catch(e){return&quot;NA&quot;}};this.getIframeParent=this.getIframeWindow=function(){try{var result=parent.location.host||false;return(result===false)?false:$(parent.window)}catch(e){return false}};this.getIframe=function(){try{var result=window.$(frameElement)||[];return(result.length==0)?false:result}catch(e){return false}};this.getIframeAllowFullscreen=function(){var result=null;try{result=window.frameElement.attributes.allowFullscreen||window.frameElement.attributes.mozallowFullscreen||window.frameElement.attributes.webkitallowFullscreen||null}catch(e){result=true}return(result!=null)?true:false};this.getPlaybackQuality=function(){var result=&quot;default&quot;;try{result=this.playerModel.getPlaybackQuality()}catch(e){}if(result==&quot;default&quot;){result=this.getConfig(&quot;playbackQuality&quot;)}if(result==&quot;default&quot;||$.inArray(result,this.getPlaybackQualities())==-1){result=this.getAppropriateQuality()}if($.inArray(result,this.getPlaybackQualities())==-1){result=&quot;default&quot;}return result};this.getPlaybackQualities=function(){try{return $.extend(true,[],this.media[this._currentItem].qualities||[])}catch(e){}return[]};this.getIsMobileClient=function(what){var uagent=navigator.userAgent.toLowerCase();var mobileAgents=[&quot;android&quot;,&quot;windows ce&quot;,&quot;blackberry&quot;,&quot;palm&quot;,&quot;mobile&quot;];for(var i=0;i&lt;mobileAgents.length;i++){if(uagent.indexOf(mobileAgents[i])&gt;-1){return(what)?(mobileAgents[i].toUpperCase()==what.toUpperCase()):true}}return false};this.getCanPlay=function(type,platform,streamType){return this._canPlay(type,platform,streamType)};this.getCanPlayNatively=function(type){return this._canPlay(type,&quot;native&quot;)};this._canPlay=function(tp,platform,streamType){var ref=this,checkIn=[],checkFor=[],st=streamType||&quot;http&quot;,pltfrm=(typeof platform==&quot;object&quot;)?platform:[platform],type=(tp)?tp.replace(/x-/,&quot;&quot;):undefined,tm=ref._testMediaSupport();
$.each(pltfrm,function(nothing,plt){$.each($.extend(tm[st],tm[&quot;*&quot;]||[])||[],function(thisPlatform,val){if(plt!=null){if(thisPlatform!=plt){return true}}checkIn=$.merge(checkIn,this);return true})});if(checkIn.length==0){return false}switch(typeof type){case&quot;undefined&quot;:return checkIn.length&gt;0;case&quot;string&quot;:if(type==&quot;*&quot;){return checkIn}checkFor.push(type);break;case&quot;array&quot;:checkFor=type;break}for(var i in checkFor){if(typeof checkFor[i]!==&quot;string&quot;){break}if($.inArray(checkFor[i],checkIn)&gt;-1){return true}}return false};this.getPlatform=function(){return this.media[this._currentItem].platform||&quot;error&quot;};this.getPlatforms=function(){var ref=this,platforms=this._testMediaSupport(true),cfg=this.getConfig(&quot;platforms&quot;),tmp=[],result=[];try{for(var i in this.media[this._currentItem].file){if(this.media[this._currentItem].file.hasOwnProperty(i)){for(var j in platforms){if(this._canPlay(this.media[this._currentItem].file[i].type.replace(/x-/,&quot;&quot;),platforms[j].toLowerCase(),this.getConfig(&quot;streamType&quot;))){if($.inArray(platforms[j].toLowerCase(),result)==-1){result.push(platforms[j].toLowerCase())}}}}}}catch(e){}result.sort(function(a,b){return $.inArray(a,cfg)-$.inArray(b,cfg)});return result};this.getNativeFullscreenSupport=function(){var ref=this,fullScreenApi={supportsFullScreen:&quot;semi&quot;,isFullScreen:function(){try{return ref.getDC().hasClass(&quot;fullscreen&quot;)}catch(e){return false}},requestFullScreen:function(){ref.playerModel.applyCommand(&quot;fullscreen&quot;,true)},cancelFullScreen:function(){ref.playerModel.applyCommand(&quot;fullscreen&quot;,false)},prefix:&quot;&quot;,ref:this},browserPrefixes=&quot;webkit moz o ms khtml&quot;.split(&quot; &quot;);if(typeof document.cancelFullScreen!=&quot;undefined&quot;){fullScreenApi.supportsFullScreen=true}else{for(var i=0,il=browserPrefixes.length;i&lt;il;i++){fullScreenApi.prefix=browserPrefixes[i];if(typeof document.createElement(&quot;video&quot;)[fullScreenApi.prefix+&quot;EnterFullscreen&quot;]!=&quot;undefined&quot;){fullScreenApi.supportsFullScreen=&quot;media&quot;}if(typeof document[fullScreenApi.prefix+&quot;CancelFullScreen&quot;]!=&quot;undefined&quot;){fullScreenApi.supportsFullScreen=&quot;dom&quot;;if(fullScreenApi.prefix==&quot;moz&quot;&amp;&amp;typeof document[fullScreenApi.prefix+&quot;FullScreenEnabled&quot;]==&quot;undefined&quot;){fullScreenApi.supportsFullScreen=false}}if(fullScreenApi.supportsFullScreen!==false&amp;&amp;fullScreenApi.supportsFullScreen!==&quot;semi&quot;){break}}}if(fullScreenApi.supportsFullScreen==&quot;semi&quot;||(fullScreenApi.supportsFullScreen==&quot;dom&quot;&amp;&amp;this.getConfig(&quot;forceFullViewport&quot;))){return fullScreenApi}fullScreenApi.isFullScreen=function(esc){var dest=(ref.getIframe())?parent.window.document:document;switch(this.prefix){case&quot;&quot;:return dest.fullScreen;case&quot;webkit&quot;:return dest.webkitIsFullScreen;case&quot;moz&quot;:return dest[this.prefix+&quot;FullScreen&quot;]||(ref.getDC().hasClass(&quot;fullscreen&quot;)&amp;&amp;esc!==true);default:return dest[this.prefix+&quot;FullScreen&quot;]}};if(fullScreenApi.supportsFullScreen==&quot;dom&quot;){fullScreenApi.requestFullScreen=function(){if(this.isFullScreen()){return}var win=ref.getIframeParent()||$(window);win.data(&quot;fsdata&quot;,{scrollTop:win.scrollTop(),scrollLeft:win.scrollLeft()});var target=ref.getIframe()||ref.getDC(),apiRef=this,dest=(ref.getIframe())?parent.window.document:document,win=ref.getIframeParent()||$(window);$(dest).unbind(this.prefix+&quot;fullscreenchange.projekktor&quot;);$(dest).bind(this.prefix+&quot;fullscreenchange.projekktor&quot;,function(evt){if(!apiRef.isFullScreen(true)){apiRef.ref.playerModel.applyCommand(&quot;fullscreen&quot;,false);var win=apiRef.ref.getIframeParent()||$(window),fsData=win.data(&quot;fsdata&quot;);if(fsData!=null){win.scrollTop(fsData.scrollTop);win.scrollLeft(fsData.scrollLeft)}}else{apiRef.ref.playerModel.applyCommand(&quot;fullscreen&quot;,true)}});if(this.prefix===&quot;&quot;){target.get(0).requestFullScreen()}else{target.get(0)[this.prefix+&quot;RequestFullScreen&quot;]()}apiRef.ref.playerModel.applyCommand(&quot;fullscreen&quot;,true)};fullScreenApi.cancelFullScreen=function(){$((ref.getIframe())?parent.window.document:document).unbind(this.prefix+&quot;fullscreenchange.projekktor&quot;);var target=ref.getIframe()?parent.window.document:document;if(target.exitFullScreen){target.exitFullScreen()}else{if(this.prefix==&quot;&quot;){target.cancelFullScreen()}else{target[this.prefix+&quot;CancelFullScreen&quot;]()}}var win=ref.getIframeParent()||$(window),fsData=win.data(&quot;fsdata&quot;);if(fsData!=null){win.scrollTop(fsData.scrollTop);win.scrollLeft(fsData.scrollLeft)}ref.playerModel.applyCommand(&quot;fullscreen&quot;,false)};return fullScreenApi}fullScreenApi.requestFullScreen=function(el){ref.playerModel.getMediaElement().get(0)[this.prefix+&quot;EnterFullscreen&quot;]()};fullScreenApi.dest={};fullScreenApi.cancelFullScreen=function(){};return fullScreenApi};this.getId=function(){return this._id};this.getHasGUI=function(){try{return this.playerModel.getHasGUI()}catch(e){return false}};this.getCssPrefix=this.getNS=function(){return this.config._cssClassPrefix||this.config._ns||&quot;pp&quot;};this.getPlayerDimensions=function(){return{width:this.getDC().width(),height:this.getDC().height()}};this.getMediaDimensions=function(){return this.playerModel.getMediaDimensions()||{width:0,height:0}};this.getAppropriateQuality=function(){return this._getAppropriateQuality(this.media[this._currentItem].qualities||[])
};this._getAppropriateQuality=function(quals){if(quals.length==0){return[]}var wid=this.env.playerDom.width(),hei=this.env.playerDom.height(),ratio=$p.utils.roundNumber(wid/hei,2),temp={};$.each(this.getConfig(&quot;playbackQualities&quot;)||[],function(){if($.inArray(this.key,quals)&lt;0){return true}if((this.minHeight||0)&gt;hei&amp;&amp;temp.minHeight&lt;=hei){return true}if((temp.minHeight||0)&gt;this.minHeight){return true}if(typeof this.minWidth==&quot;number&quot;){if(this.minWidth===0&amp;&amp;this.minHeight&gt;hei){return true}if(this.minWidth&gt;wid){return true}temp=this}else{if(typeof this.minWidth==&quot;object&quot;){var ref=this;$.each(this.minWidth,function(){if((this.ratio||100)&gt;ratio){return true}if(this.minWidth&gt;wid){return true}temp=ref;return true})}}return true});return temp.key||&quot;default&quot;};this.getFromUrl=function(url,dest,callback,customParser,dataType){var data=null,ref=this,aSync=!this.getIsMobileClient();if(dest==ref&amp;&amp;callback==&quot;_reelUpdate&quot;){this._promote(&quot;scheduleLoading&quot;,1+this.getItemCount())}if(callback.substr(0,1)!=&quot;_&quot;){window[callback]=function(data){try{delete window[callback]}catch(e){}dest[callback](data)}}else{if(dataType.indexOf(&quot;jsonp&quot;)&gt;-1){this[&quot;_jsonp&quot;+callback]=function(data){dest[callback](data)}}}if(dataType){if($.parseJSON==undefined&amp;&amp;dataType.indexOf(&quot;json&quot;)&gt;-1){this._raiseError(&quot;Projekktor requires at least jQuery 1.4.2 in order to handle JSON playlists.&quot;);return this}dataType=(dataType.indexOf(&quot;/&quot;)&gt;-1)?dataType.split(&quot;/&quot;)[1]:dataType}var ajaxConf={url:url,complete:function(xhr,status){if(dataType==undefined){try{if(xhr.getResponseHeader(&quot;Content-Type&quot;).indexOf(&quot;xml&quot;)&gt;-1){dataType=&quot;xml&quot;}if(xhr.getResponseHeader(&quot;Content-Type&quot;).indexOf(&quot;json&quot;)&gt;-1){dataType=&quot;json&quot;}if(xhr.getResponseHeader(&quot;Content-Type&quot;).indexOf(&quot;html&quot;)&gt;-1){dataType=&quot;html&quot;}}catch(e){}}data=$p.utils.cleanResponse(xhr.responseText,dataType);try{data=customParser(data,xhr.responseText,dest)}catch(e){}if(status!=&quot;error&quot;&amp;&amp;dataType!=&quot;jsonp&quot;){try{dest[callback](data)}catch(e){}}},error:function(data){if(dest[callback]&amp;&amp;dataType!=&quot;jsonp&quot;){dest[callback](false)}},cache:true,async:aSync,dataType:dataType,jsonpCallback:(callback.substr(0,1)!=&quot;_&quot;)?false:&quot;projekktor('&quot;+this.getId()+&quot;')._jsonp&quot;+callback,jsonp:(callback.substr(0,1)!=&quot;_&quot;)?false:&quot;callback&quot;};ajaxConf.xhrFields={withCredentials:true};ajaxConf.beforeSend=function(xhr){xhr.withCredentials=true};$.support.cors=true;$.ajax(ajaxConf);return this};this.setActiveItem=function(mixedData){var newItem=0,lastItem=this._currentItem,ref=this,ap=false;if(typeof mixedData==&quot;string&quot;){switch(mixedData){case&quot;same&quot;:newItem=this._currentItem;break;case&quot;previous&quot;:newItem=this._currentItem-1;break;case&quot;next&quot;:newItem=this._currentItem+1;break}}else{if(typeof mixedData==&quot;number&quot;){newItem=parseInt(mixedData)}else{newItem=0}}if(newItem!=this._currentItem){if(this.getConfig(&quot;disallowSkip&quot;)==true&amp;&amp;(!this.getState(&quot;COMPLETED&quot;)&amp;&amp;!this.getState(&quot;IDLE&quot;))){return this}}this._detachplayerModel();this.env.loading=false;if(newItem===0&amp;&amp;(lastItem==null||lastItem==newItem)&amp;&amp;(this.config._autoplay===true||&quot;DESTROYING|AWAKENING&quot;.indexOf(this.getState())&gt;-1)){ap=true}else{if(this.getItemCount()&gt;1&amp;&amp;newItem!=lastItem&amp;&amp;lastItem!=null&amp;&amp;this.config._continuous===true&amp;&amp;newItem&lt;this.getItemCount()){ap=true}}if(newItem&gt;=this.getItemCount()||newItem&lt;0){ap=this.config._loop;newItem=0}this._currentItem=newItem;var wasFullscreen=this.getDC().hasClass(&quot;fullscreen&quot;);this.getDC().attr(&quot;class&quot;,this.env.className);if(wasFullscreen){this.getDC().addClass(&quot;fullscreen&quot;)}var newModel=this.media[this._currentItem].mediaModel.toUpperCase();if(!$p.models[newModel]){newModel=&quot;NA&quot;;this.media[this._currentItem].mediaModel=newModel;this.media[this._currentItem].errorCode=8}else{if(this.getConfig(&quot;className&quot;,null)!=null){this.getDC().addClass(this.getNS()+this.getConfig(&quot;className&quot;))}this.getDC().addClass(this.getNS()+(this.getConfig(&quot;streamType&quot;)||&quot;http&quot;));if(!$p.utils.cssTransitions()){this.getDC().addClass(&quot;notransitions&quot;)}if(this.getIsMobileClient()){this.getDC().addClass(&quot;mobile&quot;)}}this.playerModel=new playerModel();$.extend(this.playerModel,$p.models[newModel].prototype);this._promote(&quot;syncing&quot;,&quot;display&quot;);this._enqueue(function(){try{ref._applyCuePoints()}catch(e){}});this.playerModel._init({media:$.extend(true,{},this.media[this._currentItem]),model:newModel,pp:this,environment:$.extend(true,{},this.env),autoplay:ap,quality:this.getPlaybackQuality(),fullscreen:this.getInFullscreen()});return this};this.setPlay=function(){var ref=this;if(this.getConfig(&quot;thereCanBeOnlyOne&quot;)){projekktor(&quot;*&quot;).each(function(){if(this.getId()!==ref.getId()){this.setStop()}})}this._enqueue(&quot;play&quot;,false);return this};this.setPause=function(){this._enqueue(&quot;pause&quot;,false);return this};this.setStop=function(toZero){var ref=this;if(this.getState(&quot;IDLE&quot;)){return this}if(toZero){this._enqueue(function(){ref._currentItem=0;ref.setActiveItem(0)})}else{this._enqueue(&quot;stop&quot;,false)}return this};this.setPlayPause=function(){if(!this.getState(&quot;PLAYING&quot;)){this.setPlay()}else{this.setPause()}return this};this.setVolume=function(vol,fadeDelay){var initalVolume=this.getVolume();
if(this.getConfig(&quot;fixedVolume&quot;)==true){return this}switch(typeof vol){case&quot;string&quot;:var dir=vol.substr(0,1);vol=parseFloat(vol.substr(1));switch(dir){case&quot;+&quot;:vol=this.getVolume()+vol;break;case&quot;-&quot;:vol=this.getVolume()-vol;break;default:vol=this.getVolume()}case&quot;number&quot;:vol=parseFloat(vol);vol=(vol&gt;1)?1:vol;vol=(vol&lt;0)?0:vol;break;default:return this}if(vol&gt;initalVolume&amp;&amp;fadeDelay){if(vol-initalVolume&gt;0.03){for(var i=initalVolume;i&lt;=vol;i=i+0.03){this._enqueue(&quot;volume&quot;,i,fadeDelay)}this._enqueue(&quot;volume&quot;,vol,fadeDelay);return this}}else{if(vol&lt;initalVolume&amp;&amp;fadeDelay){if(initalVolume-vol&gt;0.03){for(var i=initalVolume;i&gt;=vol;i=i-0.03){this._enqueue(&quot;volume&quot;,i,fadeDelay)}this._enqueue(&quot;volume&quot;,vol,fadeDelay);return this}}}this._enqueue(&quot;volume&quot;,vol);return this};this.setPlayhead=this.setSeek=function(position){if(this.getConfig(&quot;disallowSkip&quot;)==true){return this}if(typeof position==&quot;string&quot;){var dir=position.substr(0,1);position=parseFloat(position.substr(1));if(dir==&quot;+&quot;){position=this.getPosition()+position}else{if(dir==&quot;-&quot;){position=this.getPosition()-position}else{position=this.getPosition()}}}if(typeof position==&quot;number&quot;){this._enqueue(&quot;seek&quot;,Math.round(position*100)/100)}return this};this.setFrame=function(frame){if(this.getConfig(&quot;fps&quot;)==null){return this}if(this.getConfig(&quot;disallowSkip&quot;)==true){return this}if(typeof frame==&quot;string&quot;){var dir=frame.substr(0,1);frame=parseFloat(frame.substr(1));if(dir==&quot;+&quot;){frame=this.getFrame()+frame}else{if(dir==&quot;-&quot;){frame=this.getFrame()-frame}else{frame=this.getFrame()}}}if(typeof frame==&quot;number&quot;){this._enqueue(&quot;frame&quot;,frame)}return this};this.setPlayerPoster=function(url){var ref=this;this._enqueue(function(){ref.setConfig({poster:url},0)});this._enqueue(function(){ref.playerModel.setPosterLive()});return this};this.setConfig=function(){var ref=this,args=arguments;this._enqueue(function(){ref._setConfig(args[0]||null,args[1]||null)});return this};this._setConfig=function(){if(!arguments.length){return result}var confObj=arguments[0],dest=&quot;*&quot;,value=false;if(typeof confObj!=&quot;object&quot;){return this}if(arguments[1]==&quot;string&quot;||arguments[1]==&quot;number&quot;){dest=arguments[1]}else{dest=this._currentItem}for(var i in confObj){if(this.config[&quot;_&quot;+i]!=null){continue}try{value=eval(confObj[i])}catch(e){value=confObj[i]}if(dest==&quot;*&quot;){$.each(this.media,function(){if(this.config==null){this.config={}}this.config[i]=value});continue}if(this.media[dest]==undefined){return this}if(this.media[dest][&quot;config&quot;]==null){this.media[dest][&quot;config&quot;]={}}this.media[dest][&quot;config&quot;][i]=value}return this};this.setFullscreen=function(goFull){var nativeFullscreen=this.getNativeFullscreenSupport(),ref=this;goFull=(goFull==null)?!nativeFullscreen.isFullScreen():goFull;if(goFull===true){nativeFullscreen.requestFullScreen()}else{nativeFullscreen.cancelFullScreen()}return this};this.setSize=function(data){var target=this.getIframe()||this.getDC(),fsdata=target.data(&quot;fsdata&quot;)||null,w=(data&amp;&amp;data.width!=null)?data.width:(this.getConfig(&quot;width&quot;)!=null)?this.getConfig(&quot;width&quot;):false,h=(data&amp;&amp;data.height!=null)?data.height:(this.getConfig(&quot;height&quot;)==null&amp;&amp;this.getConfig(&quot;ratio&quot;))?Math.round((w||this.getDC().width())/this.getConfig(&quot;ratio&quot;)):(this.getConfig(&quot;height&quot;)!=null)?this.getConfig(&quot;height&quot;):false;if(this.getInFullscreen()&amp;&amp;fsdata!=null){fsdata.targetWidth=w;fsdata.targetHeight=h;target.data(&quot;fsdata&quot;,fsdata)}else{if(w){target.css({width:w+&quot;px&quot;})}if(h){target.css({height:h+&quot;px&quot;})}}try{this.playerModel.applyCommand(&quot;resize&quot;)}catch(e){}};this.setLoop=function(value){this.config._loop=value||!this.config._loop};this.setDebug=function(value){$p.utils.logging=value||!$p.utils.logging;if($p.utils.logging){$p.utils.log(&quot;DEBUG MODE for player #&quot;+this.getId())}};this.addListener=function(evt,callback){var ref=this;this._enqueue(function(){ref._addListener(evt,callback)});return this};this._addListener=function(event,callback){var evt=(event.indexOf(&quot;.&quot;)&gt;-1)?event.split(&quot;.&quot;):[event,&quot;default&quot;];this.listeners.push({event:evt[0],ns:evt[1],callback:callback});return this};this.removeListener=function(event,callback){var len=this.listeners.length,evt=(event.indexOf(&quot;.&quot;)&gt;-1)?event.split(&quot;.&quot;):[event,&quot;*&quot;];for(var i=0;i&lt;len;i++){if(this.listeners[i]==undefined){continue}if(this.listeners[i].event!=evt[0]&amp;&amp;evt[0]!==&quot;*&quot;){continue}if((this.listeners[i].ns!=evt[1]&amp;&amp;evt[1]!==&quot;*&quot;)||(this.listeners[i].callback!=callback&amp;&amp;callback!=null)){continue}this.listeners.splice(i,1)}return this};this.setItem=function(){var itemData=arguments[0];var affectedIdx=0;this._clearqueue();if(itemData==null){affectedIdx=this._removeItem(arguments[1]);if(affectedIdx===this._currentItem){this.setActiveItem(&quot;previous&quot;)}}else{affectedIdx=this._addItem(this._prepareMedia({file:itemData,config:itemData.config||{}}),arguments[1],arguments[2]);if(affectedIdx===this._currentItem){this.setActiveItem(this._currentItem)}}return this};this.setFile=function(){var fileNameOrObject=arguments[0]||&quot;&quot;,dataType=arguments[1]||this._getTypeFromFileExtension(fileNameOrObject),result=[];
if(this.env.loading===true){return this}this._clearqueue();this.env.loading=true;this._detachplayerModel();if(typeof fileNameOrObject==&quot;object&quot;){$p.utils.log(&quot;Applying incoming JS Object&quot;,fileNameOrObject);this._reelUpdate(fileNameOrObject);return this}result[0]={};result[0].file={};result[0].file.src=fileNameOrObject||&quot;&quot;;result[0].file.type=dataType||this._getTypeFromFileExtension(splt[0]);if(result[0].file.type.indexOf(&quot;/xml&quot;)&gt;-1||result[0].file.type.indexOf(&quot;/json&quot;)&gt;-1){$p.utils.log(&quot;Loading external data from &quot;+result[0].file.src+&quot; supposed to be &quot;+result[0].file.type);this._playlistServer=result[0].file.src;this.getFromUrl(result[0].file.src,this,&quot;_reelUpdate&quot;,this.getConfig(&quot;reelParser&quot;),result[0].file.type);return this}$p.utils.log(&quot;Applying incoming single file:&quot;+result[0].file.src,result);this._reelUpdate(result);return this};this.setPlaybackQuality=function(quality){var qual=quality||this.getAppropriateQuality();if($.inArray(qual,this.media[this._currentItem].qualities||[])&gt;-1){this.playerModel.applyCommand(&quot;quality&quot;,qual);this.setConfig({playbackQuality:qual})}return this};this.openUrl=function(cfg){cfg=cfg||{url:&quot;&quot;,target:&quot;&quot;,pause:false};if(cfg.url==&quot;&quot;){return this}if(cfg.pause===true){this.setPause()}window.open(cfg.url,cfg.target).focus();return this};this.selfDestruct=this.destroy=function(){var ref=this;this._enqueue(function(){ref._destroy()});return this},this._destroy=function(){var ref=this;$(this).unbind();this.removePlugins();this.playerModel.destroy();this._removeGUIListeners();$.each(projekktors,function(idx){try{if(this.getId()==ref.getId()||this.getId()==ref.getId()||this.getParent()==ref.getId()){projekktors.splice(idx,1);return}}catch(e){}});this.env.playerDom.replaceWith(this.env.srcNode);this._promote(&quot;destroyed&quot;);this.removeListener(&quot;*&quot;);return this};this.reset=function(){var ref=this;this.setFullscreen(false);this._clearqueue();this._enqueue(function(){ref._reset()});return this},this._reset=function(){var cleanConfig={},ref=this;this.setFullscreen(false);$(this).unbind();$((this.getIframe())?parent.window.document:document).unbind(&quot;.projekktor&quot;);$(window).unbind(&quot;.projekktor&quot;+this.getId());this.playerModel.destroy();this.playerModel={};this.removePlugins();this._removeGUIListeners();this.env.mediaContainer=null;this._currentItem=null;for(var i in this.config){cleanConfig[(i.substr(0,1)==&quot;_&quot;)?i.substr(1):i]=this.config[i]}if(typeof this.env.onReady===&quot;function&quot;){this._enqueue(ref.env.onReady(ref))}this._init(this.env.playerDom,cleanConfig);return this},this.setCuePoint=function(obj,opt){var item=(obj.item!==undefined)?obj.item:this.getItemIdx(),options=$.extend(true,{offset:0},opt),ref=this,cuePoint={id:obj.id||$p.utils.randomId(8),group:obj.group||$p.utils.randomId(8),item:item,on:($p.utils.toSeconds(obj.on)||0)+options.offset,off:($p.utils.toSeconds(obj.off)||$p.utils.toSeconds(obj.on)||0)+options.offset,value:obj.value||null,callback:obj.callback||function(){},precision:(obj.precision==null)?1:obj.precision,title:(obj.title==null)?&quot;&quot;:obj.title,_listeners:[],_unlocked:false,_active:false,_lastTime:0,isAvailable:function(){return this._unlocked},_stateListener:function(state,player){if(&quot;STOPPED|COMPLETED|DESTROYING&quot;.indexOf(state)&gt;-1){if(this._active){try{this.callback(false,this,player)}catch(e){}}this._active=false;this._lastTime=-1}},_timeListener:function(time,player){if(player.getItemIdx()!==this.item&amp;&amp;this.item!=&quot;*&quot;){return}var timeIdx=(this.precision==0)?Math.round(time):$p.utils.roundNumber(time,this.precision),ref=this;if(this._unlocked===false){var approxMaxTimeLoaded=player.getDuration()*player.getLoadProgress()/100;if(this.on&lt;=approxMaxTimeLoaded||this.on&lt;=timeIdx){$.each(this._listeners.unlock||[],function(){this(ref,player)});this._unlocked=true}else{return}}if(this._lastTime==timeIdx){return}var nat=(timeIdx-this._lastTime&lt;=1&amp;&amp;timeIdx-this._lastTime&gt;0);if(((timeIdx&gt;=this.on&amp;&amp;timeIdx&lt;=this.off)||(timeIdx&gt;=this.on&amp;&amp;this.on==this.off&amp;&amp;timeIdx&lt;=this.on+1))&amp;&amp;this._active!==true){this._active=true;$p.utils.log(&quot;Cue Point: [ON &quot;+this.on+&quot;] at &quot;+timeIdx,this);try{this.callback({id:this.id,enabled:true,value:this.value,seeked:!nat,player:player})}catch(e){}}else{if((timeIdx&lt;this.on||timeIdx&gt;this.off)&amp;&amp;this.off!=this.on&amp;&amp;this._active==true){this._active=false;$p.utils.log(&quot;Cue Point: [OFF] at &quot;+this.off,this);try{this.callback({id:this.id,enabled:false,value:this.value,seeked:!nat,player:player})}catch(e){}}}if(this.off==this.on&amp;&amp;this._active&amp;&amp;new Number(timeIdx-this.on).toPrecision(this.precision)&gt;=1){this._active=false}this._lastTime=timeIdx},addListener:function(event,func){if(this._listeners[event]==null){this._listeners[event]=[]}this._listeners[event].push(func||function(){})}};if(obj.unlockCallback!=null){cuePoint.addListener(&quot;unlock&quot;,obj.unlockCallback)}if(this._cuePoints[item]==null){this._cuePoints[item]=[]}this._cuePoints[item].push(cuePoint);if(!this.getState(&quot;IDLE&quot;)){this._promote(&quot;cuepointAdded&quot;)}return this},this.setGotoCuePoint=function(idx,itemIdx){var cuePoints=this.getCuePoints(itemIdx);
this.setPlayhead(cuePoints[idx].on);return this},this.getCuePoints=function(idx){return this._cuePoints[idx||this.getItemIdx()]||this._cuePoints||{}},this.getCuePointById=function(id,idx){var result=false,cuePoints=this.getCuePoints(idx);for(var j=0;j&lt;cuePoints.length;j++){if(cuePoints.id==id){result=this;break}}return result},this.removeCuePoints=function(idx,group){var cuePoints=this.getCuePoints(idx||0)||{},kill=[];for(var cIdx=0;cIdx&lt;cuePoints.length;cIdx++){if(cuePoints[cIdx].group==group){this.removeListener(&quot;time&quot;,cuePoints[cIdx].timeEventHandler);this.removeListener(&quot;state&quot;,cuePoints[cIdx].stateEventHandler);kill.push(cIdx)}}for(var i=0;i&lt;kill.length;i++){cuePoints.splice(kill[i]-i,1)}return this},this.syncCuePoints=function(){var ref=this;this._enqueue(function(){try{ref._applyCuePoints()}catch(e){}});return this},this._applyCuePoints=function(resync){var ref=this;if(this._cuePoints[this._currentItem]==null&amp;&amp;this._cuePoints[&quot;*&quot;]==null){return}$.each($.merge(this._cuePoints[this._currentItem]||[],this._cuePoints[&quot;*&quot;]||[]),function(key,cuePointObj){try{ref.removeListener(&quot;time&quot;,cuePointObj.timeEventHandler);ref.removeListener(&quot;state&quot;,cuePointObj.stateEventHandler)}catch(e){}cuePointObj.timeEventHandler=function(time,player){try{cuePointObj._timeListener(time,player)}catch(e){}},cuePointObj.stateEventHandler=function(state,player){try{cuePointObj._stateListener(state,player)}catch(e){}},ref.addListener(&quot;time&quot;,cuePointObj.timeEventHandler);ref.addListener(&quot;state&quot;,cuePointObj.stateEventHandler);ref.addListener(&quot;item&quot;,function(){ref.removeListener(&quot;time&quot;,cuePointObj.timeEventHandler);ref.removeListener(&quot;state&quot;,cuePointObj.stateEventHandler)})})},this._enqueue=function(command,params,delay){if(command!=null){this._queue.push({command:command,params:params,delay:delay});this._processQueue()}};this._clearqueue=function(command,params){if(this._isReady===true){this._queue=[]}};this._processQueue=function(){var ref=this,modelReady=false;if(this._processing===true||this.env.loading===true){return}this._processing=true;(function(){try{modelReady=ref.playerModel.getIsReady()}catch(e){}if(ref.env.loading!==true&amp;&amp;modelReady){try{var msg=ref._queue.shift();if(msg!=null){if(typeof msg.command==&quot;string&quot;){if(msg.delay&gt;0){setTimeout(function(){ref.playerModel.applyCommand(msg.command,msg.params)},msg.delay)}else{ref.playerModel.applyCommand(msg.command,msg.params)}}else{msg.command(ref)}}}catch(e){$p.utils.log(&quot;ERROR:&quot;,e)}if(ref._queue.length==0){if(ref._isReady===false){ref._isReady=true}ref._processing=false;return}arguments.callee();return}setTimeout(arguments.callee,100)})()};this._getTypeFromFileExtension=function(url){var fileExt=&quot;&quot;,extRegEx=[],extTypes={},extRegEx=[],plt=null,on=true;for(var i in $p.mmap){if($p.mmap.hasOwnProperty(i)){plt=$p.mmap[i].platform;if(typeof plt!=&quot;object&quot;){plt=[plt]}on=true;for(var j=0;j&lt;plt.length;j++){if(plt[j]!=null){if(this.getConfig(&quot;enable&quot;+plt[j].toUpperCase()+&quot;Platform&quot;)===false||$.inArray(plt[j],this.getConfig(&quot;platforms&quot;))===-1){on=false}}}if(on===false){continue}extRegEx.push(&quot;\\.&quot;+$p.mmap[i].ext);extTypes[$p.mmap[i].ext]=$p.mmap[i]}}extRegEx=&quot;^.*.(&quot;+extRegEx.join(&quot;|&quot;)+&quot;)&quot;;try{fileExt=url.match(new RegExp(extRegEx))[1];fileExt=(!fileExt)?&quot;NaN&quot;:fileExt.replace(&quot;.&quot;,&quot;&quot;)}catch(e){fileExt=&quot;NaN&quot;}return extTypes[fileExt].type};this._testMediaSupport=function(getPlatforms){var result={},resultPlatforms=[],streamType=&quot;&quot;,ref=this;if(getPlatforms){if($p._platformTableCache!=null){return $p._platformTableCache}}else{if($p._compTableCache!=null){return $p._compTableCache}}for(var i=0;i&lt;$p.mmap.length;i++){if($p.mmap.hasOwnProperty(i)){platforms=(typeof $p.mmap[i][&quot;platform&quot;]==&quot;object&quot;)?$p.mmap[i][&quot;platform&quot;]:[$p.mmap[i][&quot;platform&quot;]];$.each(platforms,function(_na,platform){if(platform==null){return true}streamType=$p.mmap[i][&quot;streamType&quot;]||[&quot;http&quot;];$.each(streamType,function(key,st){if(result[st]==null){result[st]={}}if(result[st][platform]==null){result[st][platform]=[]}if($.inArray($p.mmap[i][&quot;type&quot;],result[st][platform])&gt;-1){return true}var reqPlatformVersion=($p.models[$p.mmap[i][&quot;model&quot;].toUpperCase()].prototype[(platform.toLowerCase())+&quot;Version&quot;]||&quot;1&quot;).toString();try{if($p.utils.versionCompare($p.platforms[platform.toUpperCase()]($p.mmap[i][&quot;type&quot;]),reqPlatformVersion)){if(ref.getConfig(&quot;enable&quot;+platform.toUpperCase()+&quot;Platform&quot;)!=false&amp;&amp;$.inArray(platform.toLowerCase(),ref.getConfig(&quot;platforms&quot;))&gt;-1){result[st][platform].push($p.mmap[i][&quot;type&quot;]);if($.inArray(platform.toUpperCase(),resultPlatforms)==-1){resultPlatforms.push(platform.toUpperCase())}}return true}}catch(e){$p.utils.log(&quot;ERROR&quot;,&quot;platform &quot;+platform+&quot; not defined&quot;)}return true});return true})}}$p._compTableCache=result;$p._platformTableCache=resultPlatforms;return(getPlatforms)?$p._platformTableCache:$p._compTableCache};this._readMediaTag=function(domNode){var result={},htmlTag=&quot;&quot;,attr=[],ref=this;if(&quot;VIDEOAUDIO&quot;.indexOf(domNode[0].tagName.toUpperCase())==-1){return false}if(!this.getConfig(&quot;ignoreAttributes&quot;)){result={autoplay:((domNode.attr(&quot;autoplay&quot;)!==undefined||domNode.prop(&quot;autoplay&quot;)!==undefined)&amp;&amp;domNode.prop(&quot;autoplay&quot;)!==false)?true:false,controls:((domNode.attr(&quot;controls&quot;)!==undefined||domNode.prop(&quot;controls&quot;)!==undefined)&amp;&amp;domNode.prop(&quot;controls&quot;)!==false)?true:false,loop:((domNode.attr(&quot;autoplay&quot;)!==undefined||domNode.prop(&quot;loop&quot;)!==undefined)&amp;&amp;domNode.prop(&quot;loop&quot;)!==false)?true:false,title:(domNode.attr(&quot;title&quot;)!==undefined&amp;&amp;domNode.attr(&quot;title&quot;)!==false)?domNode.attr(&quot;title&quot;):&quot;&quot;,poster:(domNode.attr(&quot;poster&quot;)!==undefined&amp;&amp;domNode.attr(&quot;poster&quot;)!==false)?domNode.attr(&quot;poster&quot;):&quot;&quot;,width:(domNode.attr(&quot;width&quot;)!==undefined&amp;&amp;domNode.attr(&quot;width&quot;)!==false)?domNode.attr(&quot;width&quot;):null,height:(domNode.attr(&quot;height&quot;)!==undefined&amp;&amp;domNode.attr(&quot;height&quot;)!==false)?domNode.attr(&quot;height&quot;):null}
</P>
}htmlTag=$($(&quot;&quot;).html($(domNode).clone())).html();attr=[&quot;autoplay&quot;,&quot;controls&quot;,&quot;loop&quot;];for(var i=0;i&lt;attr.length;i++){if(htmlTag.indexOf(attr[i])==-1){continue}result[attr[i]]=true}result.playlist=[];result.playlist[0]=[];result.playlist[0][&quot;config&quot;]={tracks:[]};if(domNode.attr(&quot;src&quot;)){result.playlist[0].push({src:domNode.attr(&quot;src&quot;),type:domNode.attr(&quot;type&quot;)||this._getTypeFromFileExtension(domNode.attr(&quot;src&quot;))})}if(!$(&quot;&lt;video/&gt;&quot;).get(0).canPlayType){var childNode=domNode;do{childNode=childNode.next(&quot;source,track&quot;);if(childNode.attr(&quot;src&quot;)){switch(childNode.get(0).tagName.toUpperCase()){case&quot;SOURCE&quot;:result.playlist[0].push({src:childNode.attr(&quot;src&quot;),type:childNode.attr(&quot;type&quot;)||this._getTypeFromFileExtension(childNode.attr(&quot;src&quot;)),quality:childNode.attr(&quot;data-quality&quot;)||&quot;&quot;});break;case&quot;TRACK&quot;:if($(this).attr(&quot;src&quot;)){result.playlist[0][&quot;config&quot;][&quot;tracks&quot;].push({src:childNode.attr(&quot;src&quot;),kind:childNode.attr(&quot;kind&quot;)||&quot;subtitle&quot;,lang:childNode.attr(&quot;srclang&quot;)||null,label:childNode.attr(&quot;label&quot;)||null})}break}}}while(childNode.attr(&quot;src&quot;))}if(result.playlist[0].length==0){domNode.children(&quot;source,track&quot;).each(function(){if($(this).attr(&quot;src&quot;)){switch($(this).get(0).tagName.toUpperCase()){case&quot;SOURCE&quot;:result.playlist[0].push({src:$(this).attr(&quot;src&quot;),type:$(this).attr(&quot;type&quot;)||ref._getTypeFromFileExtension($(this).attr(&quot;src&quot;)),quality:$(this).attr(&quot;data-quality&quot;)||&quot;&quot;});break;case&quot;TRACK&quot;:result.playlist[0][&quot;config&quot;][&quot;tracks&quot;].push({src:$(this).attr(&quot;src&quot;),kind:$(this).attr(&quot;kind&quot;)||&quot;subtitle&quot;,lang:$(this).attr(&quot;srclang&quot;)||null,label:$(this).attr(&quot;label&quot;)||null});break}}})}return result};this._raiseError=function(txt){this.env.playerDom.html(txt).css({color:&quot;#fdfdfd&quot;,backgroundColor:&quot;#333&quot;,lineHeight:this.config.height+&quot;px&quot;,textAlign:&quot;center&quot;,display:&quot;block&quot;});this._promote(&quot;error&quot;)};this._init=function(customNode,customCfg){var theNode=customNode||srcNode,theCfg=customCfg||cfg,cfgByTag=this._readMediaTag(theNode);this.env.srcNode=theNode.wrap(&quot;&quot;).parent().html();theNode.unwrap();this.env.className=theNode.attr(&quot;class&quot;)||&quot;&quot;;this._id=theNode[0].id||$p.utils.randomId(8);if(cfgByTag!==false){this.env.playerDom=$(&quot;&lt;div/&gt;&quot;).attr({&quot;class&quot;:theNode[0].className,style:theNode.attr(&quot;style&quot;)});theNode.replaceWith(this.env.playerDom);theNode.empty().removeAttr(&quot;type&quot;).removeAttr(&quot;src&quot;);try{theNode.get(0).pause();theNode.get(0).load()}catch(e){}$(&quot;&lt;div/&gt;&quot;).append(theNode).get(0).innerHTML=&quot;&quot;;theNode=null}else{this.env.playerDom=theNode}theCfg=$.extend(true,{},cfgByTag,theCfg);for(var i in theCfg){if(this.config[&quot;_&quot;+i]!=null){this.config[&quot;_&quot;+i]=theCfg[i]}else{if(i.indexOf(&quot;plugin_&quot;)&gt;-1){this.config[i]=$.extend(this.config[i],theCfg[i])}else{this.config[i]=theCfg[i]}}}$p.utils.logging=this.config._debug;this.setSize();if(this.getIsMobileClient()){this.config._autoplay=false;this.config.fixedVolume=true}this.env.playerDom.attr(&quot;id&quot;,this._id);if(this.config._theme){switch(typeof this.config._theme){case&quot;string&quot;:break;case&quot;object&quot;:this._applyTheme(this.config._theme)}}else{this._start(false)}return this};this._start=function(data){var ref=this,files=[];this._registerPlugins();if(this.config._iframe===true){if(this.getIframeParent()){this.getIframeParent().ready(function(){ref._enterFullViewport(true)})}else{ref._enterFullViewport(true)}}if(this.getIframeParent()===false){this.config._isCrossDomain=true}if(!this.getIframeAllowFullscreen()){this.config.enableFullscreen=false}if(typeof onReady===&quot;function&quot;){this._enqueue(function(){onReady(ref)})}for(var i in this.config._playlist[0]){if(this.config._playlist[0][i].type){if(this.config._playlist[0][i].type.indexOf(&quot;/json&quot;)&gt;-1||this.config._playlist[0][i].type.indexOf(&quot;/xml&quot;)&gt;-1){this.setFile(this.config._playlist[0][i].src,this.config._playlist[0][i].type);return this}}}this.setFile(this.config._playlist);return this};this._applyTheme=function(data){var ref=this;if(data===false){this._raiseError(&quot;The Projekktor theme-set specified could not be loaded.&quot;);return false}if(typeof data.css==&quot;string&quot;){$(&quot;head&quot;).append('&lt;style type=&quot;text/css&quot;&gt;'+$p.utils.parseTemplate(data.css,{rp:data.baseURL})+&quot;&lt;/style&gt;&quot;)}if(typeof data.html==&quot;string&quot;){this.env.playerDom.html($p.utils.parseTemplate(data.html,{p:this.getNS()}))}this.env.playerDom.addClass(data.id).addClass(data.variation);this.env.className=this.env.className&amp;&amp;this.env.className.length!==0?this.env.className+&quot; &quot;+data.id:data.id;if(data.variation&amp;&amp;data.variation.length!==0){this.env.className+=&quot; &quot;+data.variation}if(typeof data.config==&quot;object&quot;){for(var i in data.config){if(this.config[&quot;_&quot;+i]!=null){this.config[&quot;_&quot;+i]=data.config[i]}else{if(i.indexOf(&quot;plugin_&quot;)&gt;-1){this.config[i]=$.extend(true,{},this.config[i],data.config[i])}else{this.config[i]=data.config[i]}}}if(typeof data.config.plugins==&quot;object&quot;){for(var i=0;i&lt;data.config.plugins.length;i++){try{typeof eval(&quot;projekktor&quot;+data.config.plugins[i])}catch(e){this._raiseError(&quot;The applied theme requires the following Projekktor plugin(s): <B>&quot;+data.config.plugins.join(&quot;, &quot;)+&quot;</B>&quot;);
<P>return false}}}}if(data.onReady){this._enqueue(function(player){eval(data.onReady)})}return this._start()};return this._init()}};$p.mmap=[];$p.models={};$p.newModel=function(obj,ext){if(typeof obj!=&quot;object&quot;){return result}if(!obj.modelId){return result}var result=false,extend=($p.models[ext]&amp;&amp;ext!=undefined)?$p.models[ext].prototype:{};if($p.models[obj.modelId]){return result}$p.models[obj.modelId]=function(){};$p.models[obj.modelId].prototype=$.extend({},extend,obj);if(obj.setiLove){obj.setiLove()}$p.mmap=$.grep($p.mmap,function(iLove){var doesNotExist=iLove.model!=((obj.replace)?obj.replace.toLowerCase():&quot;&quot;),isNotOverwritten=iLove.replaces!=obj.modelId;return doesNotExist&amp;&amp;isNotOverwritten});for(var i=0;i&lt;obj.iLove.length;i++){obj.iLove[i].model=obj.modelId.toLowerCase();obj.iLove[i].replaces=((obj.replace)?obj.replace.toLowerCase():&quot;&quot;);$p.mmap.push(obj.iLove[i])}return true}});var projekktorConfig=function(a){this._version=a};jQuery(function(a){$p.utils={imageDummy:function(){return&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABBJREFUeNpi/v//PwNAgAEACQsDAUdpTjcAAAAASUVORK5CYII=&quot;},capitalise:function(b){return b.charAt(0).toUpperCase()+b.slice(1).toLowerCase()},blockSelection:function(b){if(b){b.css({&quot;-khtml-user-select&quot;:&quot;none&quot;,&quot;-webkit-user-select&quot;:&quot;none&quot;,MozUserSelect:&quot;none&quot;,&quot;user-select&quot;:&quot;none&quot;}).attr(&quot;unselectable&quot;,&quot;on&quot;).bind(&quot;selectstart&quot;,function(){return false})}return b},unique:function(b){var d=[];for(var c=b.length;c--;){var e=b[c];if(a.inArray(e,d)===-1){d.unshift(e)}}return d},intersect:function(d,c){var b=[];a.each(d,function(f){try{if(a.inArray(c,d[f])&gt;-1){b.push(d[f])}}catch(g){}try{if(a.inArray(d[f],c)&gt;-1){b.push(d[f])}}catch(g){}});return b},roundNumber:function(b,c){if(b&lt;=0||isNaN(b)){return 0}return Math.round(b*Math.pow(10,c))/Math.pow(10,c)},randomId:function(f){var e=&quot;abcdefghiklmnopqrstuvwxyz&quot;,b=&quot;&quot;;for(var d=0;d&lt;f;d++){var c=Math.floor(Math.random()*e.length);b+=e.substring(c,c+1)}return b},toAbsoluteURL:function(e){var b=location,d,j,g,c;if(e==null||e==&quot;&quot;){return&quot;&quot;}if(/^\w+:/.test(e)){return e}d=b.protocol+&quot;//&quot;+b.host;if(e.indexOf(&quot;/&quot;)==0){return d+e}j=b.pathname.replace(/\/[^\/]*$/,&quot;&quot;);g=e.match(/\.\.\//g);if(g){e=e.substring(g.length*3);for(c=g.length;c--;){j=j.substring(0,j.lastIndexOf(&quot;/&quot;))}}return d+j+&quot;/&quot;+e},strip:function(b){return b.replace(/^\s+|\s+$/g,&quot;&quot;)},toSeconds:function(b){var c=0;if(typeof b!=&quot;string&quot;){return b}if(b){var d=b.split(&quot;:&quot;);if(d.length&gt;3){d=d.slice(0,3)}for(i=0;i&lt;d.length;i++){c=c*60+parseFloat(d[i].replace(&quot;,&quot;,&quot;.&quot;))}}return parseFloat(c)},toTimeString:function(e,h){var c=Math.floor(e/(60*60)),f=e%(60*60),d=Math.floor(f/60),b=f%60,g=Math.floor(b);if(c&lt;10){c=&quot;0&quot;+c}if(d&lt;10){d=&quot;0&quot;+d}if(g&lt;10){g=&quot;0&quot;+g}return(h===true)?c+&quot;:&quot;+d:c+&quot;:&quot;+d+&quot;:&quot;+g},embeddFlash:function(e,d,l,c){var h=d.FlashVars||{},n=&quot;&quot;,f=&quot;&quot;,m=&quot;&quot;,g=&quot;&quot;,j=e,b=&quot;&quot;;if(d.src.indexOf(&quot;?&quot;)==-1){d.src+=&quot;?&quot;}else{d.src+=&quot;&amp;&quot;}for(var k in h){if(typeof h[k]!=&quot;function&quot;){g=h[k];d.src+=k+&quot;=&quot;+encodeURIComponent(g)+&quot;&amp;&quot;}}d.src.replace(/&amp;$/,&quot;&quot;);f='&lt;object id=&quot;'+d.id+'&quot; codebase=&quot;<A href="https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" class="external free" rel="nofollow">https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0</A>&quot;  name=&quot;'+d.name+'&quot; width=&quot;'+d.width+'&quot; height=&quot;'+d.height+'&quot; classid=&quot;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&quot;&gt;&lt;param name=&quot;movie&quot; value=&quot;'+d.src+'&quot;&gt;&lt;/param&gt;&lt;param name=&quot;allowScriptAccess&quot; value=&quot;'+d.allowScriptAccess+'&quot;&gt;&lt;/param&gt;&lt;param name=&quot;allowFullScreen&quot; value=&quot;'+d.allowFullScreen+'&quot;&gt;&lt;/param&gt;&lt;param name=&quot;wmode&quot; value=&quot;'+d.wmode+'&quot;&gt;&lt;/param&gt;';m=&quot;&lt;embed &quot;;for(var k in d){if(k.toUpperCase()===&quot;FLASHVARS&quot;){continue}if(typeof d[k]!=&quot;function&quot;){m+=k+'=&quot;'+d[k]+'&quot; '}}m+=' pluginspage=&quot;<A href="http://www.macromedia.com/go/getflashplayer" class="external free" rel="nofollow">http://www.macromedia.com/go/getflashplayer</A>&quot; type=&quot;application/x-shockwave-flash&quot;&gt;&lt;/embed&gt;';n=f+m;n+=&quot;&lt;/object&gt;&quot;;if(!document.all||window.opera){n=m}if(j===null){return n}j.get(0).innerHTML=n;if(l!==false){j.append(a(&quot;&lt;div/&gt;&quot;).attr(&quot;id&quot;,d.id+&quot;_cc&quot;).css({width:(c)?&quot;1px&quot;:&quot;100%&quot;,height:(c)?&quot;1px&quot;:&quot;100%&quot;,backgroundColor:($p.utils.ieVersion()&lt;9)?&quot;#000&quot;:&quot;transparent&quot;,filter:&quot;alpha(opacity = 0.1)&quot;,position:&quot;absolute&quot;,top:0,left:0}))}return a(&quot;#&quot;+d.id)},ieVersion:function(){var b=3,d=document.createElement(&quot;div&quot;),c=d.getElementsByTagName(&quot;i&quot;);while(d.innerHTML=&quot;&quot;,c[0]){}return b&gt;4?b:undefined},parseTemplate:function(c,e,d){if(e===undefined||e.length==0||typeof e!=&quot;object&quot;){return c}for(var b in e){c=c.replace(new RegExp(&quot;%{&quot;+b+&quot;}&quot;,&quot;gi&quot;),((d===true)?window.encodeURIComponent(e[b]):e[b]))}c=c.replace(/%{(.*?)}/gi,&quot;&quot;);return c},stretch:function(f,g,n,l,d,h){if(g==null){return false}if((g instanceof a)==false){g=a(g)}if(!g.data(&quot;od&quot;)){g.data(&quot;od&quot;,{width:g.width(),height:g.height()})}var e=(d!==undefined)?d:g.data(&quot;od&quot;).width,b=(h!==undefined)?h:g.data(&quot;od&quot;).height,j=(n/e),m=(l/b),c=n,k=l;switch(f){case&quot;none&quot;:c=e;k=b;break;case&quot;fill&quot;:if(j&gt;m){c=e*j;k=b*j}else{if(j&lt;m){c=e*m;k=b*m}}break;case&quot;aspectratio&quot;:default:if(j&gt;m){c=e*m;k=b*m}else{if(j&lt;m){c=e*j;k=b*j}}break}n=$p.utils.roundNumber((c/n)*100,0);l=$p.utils.roundNumber((k/l)*100,0);if(n==0||l==0){return false}g.css({margin:0,padding:0,width:n+&quot;%&quot;,height:l+&quot;%&quot;,left:(100-n)/2+&quot;%&quot;,top:(100-l)/2+&quot;%&quot;});if(g.data(&quot;od&quot;).width!=g.width()||g.data(&quot;od&quot;).height!=g.height()){return true}return false},parseUri:function(f){var e={strictMode:false,key:[&quot;source&quot;,&quot;protocol&quot;,&quot;authority&quot;,&quot;userInfo&quot;,&quot;user&quot;,&quot;password&quot;,&quot;host&quot;,&quot;port&quot;,&quot;relative&quot;,&quot;path&quot;,&quot;directory&quot;,&quot;file&quot;,&quot;query&quot;,&quot;anchor&quot;],q:{name:&quot;queryKey&quot;,parser:/(?:^|&amp;)([^&amp;=]*)=?([^&amp;]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},b=e.parser[e.strictMode?&quot;strict&quot;:&quot;loose&quot;].exec(f),d={},c=14;while(c--){d[e.key[c]]=b[c]||&quot;&quot;
}d[e.q.name]={};d[e.key[12]].replace(e.q.parser,function(h,g,j){if(g){d[e.q.name][g]=j}});return d},log:function(){if(this.logging==false){return}this.history=this.history||[];this.history.push(arguments);if(window.console){console.log(Array.prototype.slice.call(arguments))}},cleanResponse:function(d,b){var c=false;switch(b){case&quot;html&quot;:case&quot;xml&quot;:if(window.DOMParser){c=new DOMParser();c=c.parseFromString(d,&quot;text/xml&quot;)}else{c=new ActiveXObject(&quot;Microsoft.XMLDOM&quot;);c.async=&quot;false&quot;;c.loadXML(d)}break;case&quot;json&quot;:c=d;if(typeof c==&quot;string&quot;){c=a.parseJSON(c)}break;case&quot;jsonp&quot;:break;default:c=d;break}return c},cssTransitions:function(){var b=document.createElement(&quot;z&quot;),d=b.style;function c(g){for(var f in g){if(d[g[f]]!=null){return true}}return false}function e(j){var h=&quot;Webkit Moz O ms Khtml&quot;.split(&quot; &quot;),f=j.charAt(0).toUpperCase()+j.substr(1),g=(j+&quot; &quot;+h.join(f+&quot; &quot;)+f).split(&quot; &quot;);return c(g)}return e(&quot;animationName&quot;)},versionCompare:function(f,g){var d=f.split(&quot;.&quot;),c=g.split(&quot;.&quot;);for(var e=0;e&lt;d.length;++e){d[e]=Number(d[e])}for(var e=0;e&lt;c.length;++e){c[e]=Number(c[e])}if(d.length==2){d[2]=0}if(d[0]&gt;c[0]){return true}if(d[0]&lt;c[0]){return false}if(d[1]&gt;c[1]){return true}if(d[1]&lt;c[1]){return false}if(d[2]&gt;c[2]){return true}if(d[2]&lt;c[2]){return false}return true},stringify:function(f){if(&quot;JSON&quot; in window){return JSON.stringify(f)}var e=typeof(f);if(e!=&quot;object&quot;||f===null){if(e==&quot;string&quot;){f='&quot;'+f+'&quot;'}return String(f)}else{var g,c,d=[],b=(f&amp;&amp;f.constructor==Array);for(g in f){c=f[g];e=typeof(c);if(f.hasOwnProperty(g)){if(e==&quot;string&quot;){c='&quot;'+c+'&quot;'}else{if(e==&quot;object&quot;&amp;&amp;c!==null){c=$p.utils.stringify(c)}}d.push((b?&quot;&quot;:'&quot;'+g+'&quot;:')+String(c))}}return(b?&quot;[&quot;:&quot;{&quot;)+String(d)+(b?&quot;]&quot;:&quot;}&quot;)}},logging:false}});jQuery(function(a){$p.platforms={VLC:function(){if(navigator.plugins&amp;&amp;(navigator.plugins.length&gt;0)){for(var b=0;b&lt;navigator.plugins.length;++b){if(navigator.plugins[b].name.indexOf(&quot;VLC&quot;)!=-1){if(navigator.plugins[b].version!=null){return navigator.plugins[b].version||&quot;0&quot;}if(navigator.plugins[b].description!=null){if(navigator.plugins[b].description.match(/\d{1,}\.\d{1,}\.\d{1,}/i)[0]){return navigator.plugins[b].description.match(/\d{1,}\.\d{1,}\.\d{1,}/i)[0]}}}}}else{try{new ActiveXObject(&quot;VideoLAN.VLCPlugin.2&quot;);return&quot;0&quot;}catch(c){}}return&quot;0&quot;},FLASH:function(c){try{try{var b=new ActiveXObject(&quot;ShockwaveFlash.ShockwaveFlash.6&quot;);try{b.AllowScriptAccess=&quot;always&quot;}catch(d){return&quot;6.0.0&quot;}}catch(d){}return(new ActiveXObject(&quot;ShockwaveFlash.ShockwaveFlash&quot;).GetVariable(&quot;$version&quot;).replace(/\D+/g,&quot;,&quot;).match(/^,?(.+),?$/)[1].match(/\d+/g)[0]).toString()}catch(d){try{if(navigator.mimeTypes[&quot;application/x-shockwave-flash&quot;].enabledPlugin){return((navigator.plugins[&quot;Shockwave Flash 2.0&quot;]||navigator.plugins[&quot;Shockwave Flash&quot;]).description.replace(/\D+/g,&quot;,&quot;).match(/^,?(.+),?$/)[1].match(/\d+/g)[0]).toString()}}catch(d){}}return&quot;0&quot;},ANDROID:function(b){try{return(navigator.userAgent.toLowerCase().match(/android\s+(([\d\.]+))?/)[1]).toString()}catch(c){}return&quot;0&quot;},IOS:function(c){var b=navigator.userAgent.toLowerCase(),d=b.indexOf(&quot;os &quot;);if((b.indexOf(&quot;iphone&quot;)&gt;-1||b.indexOf(&quot;ipad&quot;)&gt;-1)&amp;&amp;d&gt;-1){return(b.substr(d+3,3).replace(&quot;_&quot;,&quot;.&quot;)).toString()}return&quot;0&quot;},NATIVE:function(c){try{var b=a((c.indexOf(&quot;video&quot;)&gt;-1)?&quot;&lt;video/&gt;&quot;:&quot;&lt;audio/&gt;&quot;).get(0);if(b.canPlayType!=null){if(c===&quot;*&quot;){return&quot;1&quot;}switch(b.canPlayType(c)){case&quot;no&quot;:case&quot;&quot;:return&quot;0&quot;;default:return&quot;1&quot;}}}catch(d){}return&quot;0&quot;},BROWSER:function(b){return&quot;1&quot;}}});var projekktorPluginInterface=function(){};jQuery(function($){projekktorPluginInterface.prototype={pluginReady:false,reqVer:null,name:&quot;&quot;,pp:{},config:{},playerDom:null,_appliedDOMObj:[],_pageDOMContainer:{},_childDOMContainer:{},_init:function(pluginConfig){this.config=$.extend(true,this.config,pluginConfig);if(this.reqVer!=null){if(!$p.utils.versionCompare(this.pp.getPlayerVer(),this.reqVer)){alert(&quot;Plugin '&quot;+this.name+&quot;' requires Projekktor v&quot;+this.reqVer+&quot; or later! Please visit <A href="http://www.projekktor.com" class="external free" rel="nofollow">http://www.projekktor.com</A> and get the most recent version.&quot;);this.pluginReady=true;return}}this.initialize()},getConfig:function(idx,defaultValue){var result=null,def=defaultValue||null;if(this.pp.getConfig(&quot;plugin_&quot;+this.name)!=null){result=this.pp.getConfig(&quot;plugin_&quot;+this.name)[idx]}if(result==null){result=this.pp.getConfig(idx)}if(result==null){result=this.config[idx]}if(typeof result==&quot;object&quot;&amp;&amp;result.length===null){result=$.extend(true,{},result,this.config[idx])}else{if(typeof result==&quot;object&quot;){result=$.extend(true,[],this.config[idx]||[],result||[])}}return(result==null)?def:result},getDA:function(name){return&quot;data-&quot;+this.pp.getNS()+&quot;-&quot;+this.name+&quot;-&quot;+name},getCN:function(name){return this.pp.getNS()+name},sendEvent:function(eventName,data){this.pp._promote({_plugin:this.name,_event:eventName},data)},deconstruct:function(){this.pluginReady=false;$.each(this._appliedDOMObj,function(){$(this).unbind()})},applyToPlayer:function(element,fu,visible){if(!element){return null}var func=fu||&quot;container&quot;,tmpClass=&quot;&quot;,ref=this;try{tmpClass=element.attr(&quot;class&quot;)||this.name}catch(e){tmpClass=this.name}this._pageDOMContainer[func]=$(&quot;[&quot;+this.getDA(&quot;host&quot;)+&quot;='&quot;+this.pp.getId()+&quot;'][&quot;+this.getDA(&quot;func&quot;)+&quot;='&quot;+func+&quot;']&quot;);this._childDOMContainer[func]=this.playerDom.find(&quot;[&quot;+this.getDA(&quot;func&quot;)+&quot;='&quot;+func+&quot;'],.&quot;+this.getCN(tmpClass)+&quot;:not([&quot;+this.getDA(&quot;func&quot;)+&quot;=<I>])&quot;);if(this._pageDOMContainer[func].length&gt;0){this._pageDOMContainer[func].removeClass(&quot;active&quot;).addClass(&quot;inactive&quot;);$.each(this._pageDOMContainer[func],function(){ref._appliedDOMObj.push($(this))});return this._pageDOMContainer[func]}if(this._childDOMContainer[func].length==0){element.removeClass(tmpClass).addClass(this.pp.getNS()+tmpClass).removeClass(&quot;active&quot;).addClass(&quot;inactive&quot;).attr(this.getDA(&quot;func&quot;),func).appendTo(this.playerDom);this._childDOMContainer[func]=element;this._appliedDOMObj.push(element);if(visible===true){element.addClass(&quot;active&quot;).removeClass(&quot;inactive&quot;)}return element}else{$.each(this._childDOMContainer[func],function(){$(this).attr(ref.getDA(&quot;func&quot;),func);ref._appliedDOMObj.push($(this))})}if(visible===true){this._childDOMContainer[func].addClass(&quot;active&quot;).removeClass(&quot;inactive&quot;)}return $(this._childDOMContainer[func][0])},getElement:function(name){return this.pp.env.playerDom.find(&quot;.&quot;+this.pp.getNS()+name)},setInactive:function(){$(this._pageDOMContainer.container).removeClass(&quot;active&quot;).addClass(&quot;inactive&quot;);$(this._childDOMContainer.container).removeClass(&quot;active&quot;).addClass(&quot;inactive&quot;);this.sendEvent(&quot;inactive&quot;,$.extend(true,{},this._pageDOMContainer.container,this._childDOMContainer.container))},setActive:function(elm,on){var dest=(typeof elm==&quot;object&quot;)?elm:this.getElement(elm);if(elm==null){this._pageDOMContainer.container.removeClass(&quot;inactive&quot;).addClass(&quot;active&quot;);this._childDOMContainer.container.removeClass(&quot;inactive&quot;).addClass(&quot;active&quot;);this.sendEvent(&quot;active&quot;,$.extend(true,{},this._pageDOMContainer.container,this._childDOMContainer.container));return dest}if(on!=false){dest.addClass(&quot;active&quot;).removeClass(&quot;inactive&quot;)}else{dest.addClass(&quot;inactive&quot;).removeClass(&quot;active&quot;)}dest.css(&quot;display&quot;,&quot;&quot;);return dest},getActive:function(elm){return $(elm).hasClass(&quot;active&quot;)},initialize:function(){},isReady:function(){return this.pluginReady},clickHandler:function(what){try{this.pp[this.getConfig(what+&quot;Click&quot;).callback](this.getConfig(what+&quot;Click&quot;).value)}catch(e){try{this.getConfig(what+&quot;Click&quot;)(this.getConfig(what+&quot;Click&quot;).value)}catch(e){}}return false},cookie:function(key,value,ttl){if(document.cookie===undefined||document.cookie===false){return null}if(key==null&amp;&amp;value!=null){return null}if(this.pp.getConfig(&quot;cookieExpiry&quot;)==0){return null}var t=new Date(),result=null,cookieString=&quot;&quot;,tmp=storedData=jQuery.parseJSON(eval(result=new RegExp(&quot;(?:^|; )&quot;+encodeURIComponent(this.getConfig(&quot;cookieName&quot;)+&quot;_&quot;+this.name)+&quot;=([^;]*)&quot;).exec(document.cookie))?decodeURIComponent(result[1]):null);if(typeof storedData!=&quot;object&quot;||storedData==null){storedData={};if(key!=null){storedData[key]=tmp}}if(key==null){return storedData}if(arguments.length==1){return storedData[key]}if(value!=null){storedData[key]=value}else{delete storedData[key]}if($.isEmptyObject(storedData)){ttl=0;storedData=&quot;&quot;}else{storedData=$p.utils.stringify(storedData)}t.setDate(t.getDate()+(ttl||this.getConfig(&quot;cookieExpiry&quot;,0)));cookieString=encodeURIComponent(this.getConfig(&quot;cookieName&quot;,&quot;projekktor&quot;)+&quot;_&quot;+this.name)+&quot;=&quot;+encodeURIComponent(storedData)+&quot;; expires=&quot;+((ttl==false)?&quot;Thu, 01 Jan 1970 00:00:01 GMT&quot;:t.toUTCString())+&quot;; path=&quot;+this.getConfig(&quot;cookiePath&quot;,&quot;/&quot;);</I>
if(this.getConfig(&quot;cookieDomain&quot;,false)){cookieString+=&quot;; domain=&quot;+options.domain}document.cookie=cookieString;return value},eventHandler:function(){}}});projekktorConfig.prototype = {&quot;_playerName&quot;:&quot;Projekktor&quot;,&quot;_playerHome&quot;:&quot;http:\/\/www.projekktor.com?via=context&quot;,&quot;_cookieName&quot;:&quot;projekktor&quot;,&quot;_cookieExpiry&quot;:356,&quot;_plugins&quot;:[&quot;Display&quot;,&quot;Controlbar&quot;,&quot;Contextmenu&quot;],&quot;_addplugins&quot;:[],&quot;_reelParser&quot;:null,&quot;_ns&quot;:&quot;pp&quot;,&quot;_platforms&quot;:[&quot;browser&quot;,&quot;android&quot;,&quot;ios&quot;,&quot;native&quot;,&quot;vlc&quot;,&quot;flash&quot;],&quot;_iframe&quot;:false,&quot;_ignoreAttributes&quot;:false,&quot;_loop&quot;:false,&quot;_autoplay&quot;:false,&quot;_continuous&quot;:true,&quot;_thereCanBeOnlyOne&quot;:true,&quot;_leaveFullscreen&quot;:false,&quot;_playlist&quot;:[],&quot;_theme&quot;:{&quot;id&quot;:&quot;projekktor&quot;,&quot;baseURL&quot;:&quot;.\/&quot;},&quot;_themeRepo&quot;:false,&quot;_messages&quot;:{&quot;0&quot;:&quot;#0 An (unknown) error occurred.&quot;,&quot;1&quot;:&quot;#1 You aborted the media playback. &quot;,&quot;2&quot;:&quot;#2 A network error caused the media download to fail part-way. &quot;,&quot;3&quot;:&quot;#3 The media playback was aborted due to a corruption problem. &quot;,&quot;4&quot;:&quot;#4 The media (%{title}) could not be loaded because the server or network failed.&quot;,&quot;5&quot;:&quot;#5 Sorry, your browser does not support the media format of the requested file.&quot;,&quot;6&quot;:&quot;#6 Your client is in lack of the Flash Plugin V%{flashver} or higher.&quot;,&quot;7&quot;:&quot;#7 No media scheduled.&quot;,&quot;8&quot;:&quot;#8Â ! Invalid media model configuredÂ !&quot;,&quot;9&quot;:&quot;#9 File (%{file}) not found.&quot;,&quot;10&quot;:&quot;#10 Invalid or missing quality settings forÂ %{title}.&quot;,&quot;11&quot;:&quot;#11 Invalid streamType and\/or streamServer settings forÂ %{title}.&quot;,&quot;12&quot;:&quot;#12 Invalid or inconsistent quality setup forÂ %{title}.&quot;,&quot;80&quot;:&quot;#80 The requested file does not exist or is delivered with an invalid content-type.&quot;,&quot;97&quot;:&quot;No media scheduled.&quot;,&quot;98&quot;:&quot;Invalid or malformed playlist data!&quot;,&quot;99&quot;:&quot;Click display to proceed. &quot;,&quot;100&quot;:&quot;Keyboard Shortcuts&quot;,&quot;500&quot;:&quot;This Youtube video has been removed or set to private&quot;,&quot;501&quot;:&quot;The Youtube user owning this video disabled embedding.&quot;,&quot;502&quot;:&quot;Invalid Youtube Video-Id specified.&quot;},&quot;_debug&quot;:false,&quot;_width&quot;:null,&quot;_height&quot;:null,&quot;_ratio&quot;:false,&quot;_keys&quot;:[],&quot;_isCrossDomain&quot;:false,&quot;_forceFullViewport&quot;:false,&quot;id&quot;:0,&quot;title&quot;:null,&quot;cat&quot;:&quot;clip&quot;,&quot;poster&quot;:false,&quot;controls&quot;:true,&quot;start&quot;:false,&quot;stop&quot;:false,&quot;volume&quot;:0.5,&quot;cover&quot;:&quot;&quot;,&quot;disablePause&quot;:false,&quot;disallowSkip&quot;:false,&quot;fixedVolume&quot;:false,&quot;imageScaling&quot;:&quot;aspectratio&quot;,&quot;videoScaling&quot;:&quot;aspectratio&quot;,&quot;playerFlashOGG&quot;:&quot;/wiki/images/6/61/ETH_Zurich.jarisplayer.txt&quot;,&quot;playerFlashMP3&quot;:&quot;/wiki/images/6/61/ETH_Zurich.jarisplayer.txt&quot;,&quot;streamType&quot;:&quot;http&quot;,&quot;streamServer&quot;:&quot;&quot;,&quot;startParameter&quot;:&quot;start&quot;,&quot;useYTIframeAPI&quot;:true,&quot;enableKeyboard&quot;:true,&quot;enableFullscreen&quot;:true,&quot;playbackQuality&quot;:&quot;default&quot;,&quot;_playbackQualities&quot;:[{&quot;key&quot;:&quot;small&quot;,&quot;minHeight&quot;:240,&quot;minWidth&quot;:240},{&quot;key&quot;:&quot;medium&quot;,&quot;minHeight&quot;:360,&quot;minWidth&quot;:[{&quot;ratio&quot;:1.77,&quot;minWidth&quot;:640},{&quot;ratio&quot;:1.33,&quot;minWidth&quot;:480}]},{&quot;key&quot;:&quot;large&quot;,&quot;minHeight&quot;:480,&quot;minWidth&quot;:[{&quot;ratio&quot;:1.77,&quot;minWidth&quot;:853},{&quot;ratio&quot;:1.33,&quot;minWidth&quot;:640}]},{&quot;key&quot;:&quot;hd1080&quot;,&quot;minHeight&quot;:1080,&quot;minWidth&quot;:[{&quot;ratio&quot;:1.77,&quot;minWidth&quot;:1920},{&quot;ratio&quot;:1.33,&quot;minWidth&quot;:1440}]},{&quot;key&quot;:&quot;hd720&quot;,&quot;minHeight&quot;:720,&quot;minWidth&quot;:[{&quot;ratio&quot;:1.77,&quot;minWidth&quot;:1280},{&quot;ratio&quot;:1.33,&quot;minWidth&quot;:960}]},{&quot;key&quot;:&quot;highres&quot;,&quot;minHeight&quot;:1081,&quot;minWidth&quot;:0}],&quot;enableTestcard&quot;:true,&quot;skipTestcard&quot;:false,&quot;duration&quot;:0,&quot;className&quot;:&quot;&quot;};jQuery(function(a){$p.newModel({modelId:&quot;VIDEOVLC&quot;,vlcVersion:&quot;2.0.6.0&quot;,iLove:[],_eventMap:{MediaPlayerPaused:&quot;pauseListener&quot;,MediaPlayerPlaying:&quot;playingListener&quot;,MediaPlayerTimeChanged:&quot;_timeListener&quot;,MediaPlayerEndReached:&quot;endedListener&quot;,MediaPlayerBuffering:&quot;waitingListener&quot;,MediaPlayerEncounteredError:&quot;errorListener&quot;,MediaPlayerSeekableChanged:&quot;seekableListener&quot;},allowRandomSeek:false,videoWidth:0,videoHeight:0,isPseudoStream:false,setiLove:function(){var c=this;if(navigator.plugins&amp;&amp;(navigator.plugins.length&gt;0)){for(var d=0;d&lt;navigator.plugins.length;++d){if(navigator.plugins[d].name.indexOf(&quot;VLC&quot;)&gt;-1){for(var b=0;b&lt;navigator.plugins[d].length;b++){var e=navigator.plugins[d][b];if(e.suffixes!=null&amp;&amp;e.type!=null){a.each(e.suffixes.split(&quot;,&quot;),function(f,g){c.iLove.push({ext:g,type:e.type.replace(/x-/,&quot;&quot;),platform:[&quot;vlc&quot;],streamType:[&quot;http&quot;,&quot;pseudo&quot;,&quot;httpVideo&quot;]})})}}break}}}},applyMedia:function(b){b.html(&quot;&quot;).append(a(&quot;&lt;embed/&gt;&quot;).attr({id:this.pp.getMediaId()+&quot;_vlc&quot;,type:&quot;application/x-vlc-plugin&quot;,pluginspage:&quot;<A href="http://www.videolan.org" class="external free" rel="nofollow">http://www.videolan.org</A>&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;,events:true,controls:false,toolbar:false,windowless:true,allowfullscreen:true,autoplay:false}).css({position:&quot;absolute&quot;,top:0,left:0}));this.mediaElement=a(&quot;#&quot;+this.pp.getMediaId()+&quot;_vlc&quot;);this.applySrc()},applySrc:function(){var c=this,b=this.getSource();this.mediaElement.get(0).playlist.add(b[0].src,&quot;item 1&quot;);if(this.getState(&quot;PLAYING&quot;)){this.setPlay();if(c.isPseudoStream!==true){this.setSeek(this.media.position||0)}}else{this.displayReady()}},detachMedia:function(){try{this.mediaElement.get(0).playlist.stop();this.mediaElement.html(&quot;&quot;)}catch(b){}},addListeners:function(){if(this.mediaElement==null){return}var b=this;a.each(this._eventMap,function(c,d){try{if(b.mediaElement.get(0).attachEvent){b.mediaElement.get(0).attachEvent(c,function(e){b[d](this,e)})}else{if(b.mediaElement.get(0).addEventListener){b.mediaElement.get(0).addEventListener(c,function(e){b[d](this,e)},false)}else{b.mediaElement.get(0)[&quot;on&quot;+c]=function(e){b[d](this,e)}}}}catch(f){}})},removeListener:function(b,c){if(this.mediaElement==null){return}var e=(c!=null)?&quot;.projekktor&quot;+c+this.pp.getId():&quot;.projekktor&quot;+this.pp.getId(),d=this;a.each(this._eventMap,function(f,g){if(f==b){d.mediaElement.unbind(f+e)}})},_timeListener:function(b){this.timeListener({position:this.mediaElement.get(0).input.time/1000,duration:this.mediaElement.get(0).input.length/1000})},seekableListener:function(){this.allowRandomSeek=true;this.media.loadProgress=100},errorListener:function(d,b){try{switch(event.target.error.code){case event.target.error.MEDIA_ERR_ABORTED:this.sendUpdate(&quot;error&quot;,1);break;case event.target.error.MEDIA_ERR_NETWORK:this.sendUpdate(&quot;error&quot;,2);break;case event.target.error.MEDIA_ERR_DECODE:this.sendUpdate(&quot;error&quot;,3);break;case event.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:this.sendUpdate(&quot;error&quot;,4);break;default:this.sendUpdate(&quot;error&quot;,5);break}}catch(c){}},setPlay:function(){this.mediaElement.get(0).playlist.play()},setPause:function(){this.mediaElement.get(0).playlist.pause()},setVolume:function(b){this._volume=b;this.mediaElement.get(0).audio.volume=b*100;this.volumeListener(b)},setSeek:function(b){this.mediaElement.get(0).input.position=b/this.media.duration;this._setSeekState(&quot;seeked&quot;,b)},setFullscreen:function(){pos=this.mediaElement.get(0).input.position;this.mediaElement.get(0).playlist.stop();this.setPlay();this.mediaElement.get(0).input.position=pos;if(this.getState(&quot;PAUSED&quot;)){this.setPause()}},setResize:function(){this._scaleVideo(false)}})});jQuery(function(a){$p.newModel({modelId:&quot;VIDEOFLASH&quot;,flashVersion:&quot;9&quot;,iLove:[{ext:&quot;flv&quot;,type:&quot;video/flv&quot;,platform:&quot;flash&quot;,streamType:[&quot;http&quot;,&quot;httpVideo&quot;,&quot;pseudo&quot;,&quot;rtmp&quot;],fixed:true},{ext:&quot;mp4&quot;,type:&quot;video/mp4&quot;,platform:&quot;flash&quot;,streamType:[&quot;http&quot;,&quot;httpVideo&quot;,&quot;pseudo&quot;,&quot;rtmp&quot;],fixed:&quot;maybe&quot;},{ext:&quot;mov&quot;,type:&quot;video/quicktime&quot;,streamType:[&quot;http&quot;,&quot;httpVideo&quot;,&quot;pseudo&quot;,&quot;rtmp&quot;],platform:&quot;flash&quot;},{ext:&quot;m4v&quot;,type:&quot;video/mp4&quot;,platform:&quot;flash&quot;,streamType:[&quot;http&quot;,&quot;httpVideo&quot;,&quot;pseudo&quot;,&quot;rtmp&quot;],fixed:&quot;maybe&quot;},{ext:&quot;f4m&quot;,type:&quot;video/abst&quot;,platform:&quot;flash&quot;,streamType:[&quot;httpVideoLive&quot;]}],_eventMap:{onprogress:&quot;progressListener&quot;,ontimeupdate:&quot;timeListener&quot;,ondatainitialized:&quot;metaDataListener&quot;,onconnectionsuccess:&quot;startListener&quot;,onplaypause:&quot;_playpauseListener&quot;,onplaybackfinished:&quot;endedListener&quot;,onmute:&quot;volumeListener&quot;,onvolumechange:&quot;volumeListener&quot;,onbuffering:&quot;waitingListener&quot;,onnotbuffering:&quot;canplayListener&quot;,onconnectionfailed:&quot;errorListener&quot;},isPseudoStream:false,allowRandomSeek:false,flashVerifyMethod:&quot;api_source&quot;,_jarisVolume:null,applyMedia:function(b){var c={id:this.pp.getMediaId()+&quot;_flash&quot;,name:this.pp.getMediaId()+&quot;_flash&quot;,src:this.pp.getConfig(&quot;playerFlashMP4&quot;),width:&quot;100%&quot;,height:&quot;100%&quot;,allowScriptAccess:&quot;always&quot;,allowFullScreen:&quot;false&quot;,allowNetworking:&quot;all&quot;,wmode:($p.utils.ieVersion())?&quot;transparent&quot;:&quot;opaque&quot;,bgcolor:&quot;#000000&quot;,FlashVars:{type:&quot;video&quot;,streamtype:(this.pp.getConfig(&quot;streamType&quot;).indexOf(&quot;rtmp&quot;)==-1)?&quot;file&quot;:&quot;rtmp&quot;,server:(this.pp.getConfig(&quot;streamType&quot;).indexOf(&quot;rtmp&quot;)&gt;-1)?this.pp.getConfig(&quot;streamServer&quot;):&quot;&quot;,autostart:&quot;false&quot;,controls:&quot;false&quot;,aspectratio:this.pp.getConfig(&quot;videoScaling&quot;)}};switch(this.pp.getConfig(&quot;streamType&quot;)){case&quot;rtmp&quot;:this.allowRandomSeek=true;this.media.loadProgress=100;break;case&quot;pseudo&quot;:this.isPseudoStream=true;this.allowRandomSeek=true;this.media.loadProgress=100;break}this.createFlash(c,b)},applySrc:function(){var c=this,b=this.getSource();this.mediaElement.get(0).api_source(b[0].src);this.seekedListener();if(this.getState(&quot;PLAYING&quot;)){this.setPlay();if(c.isPseudoStream!==true){this.setSeek(this.media.position||0)}}},addListeners:function(){if(this.mediaElement==null){return}var b=this;a.each(this._eventMap,function(c,d){b.mediaElement.get(0).api_addlistener(c,&quot;projekktor('&quot;+b.pp.getId()+&quot;').playerModel.&quot;+d)})},removeListeners:function(){try{this.mediaElement.get(0).api_removelistener(&quot;*&quot;)}catch(b){}},flashReadyListener:function(){this.applySrc();this.displayReady()},errorListener:function(b){this.sendUpdate(&quot;error&quot;,4)},volumeListener:function(b){if(this._jarisVolume!==b.volume){this._jarisVolume=b.volume;this.sendUpdate(&quot;volume&quot;,b.volume)}},_playpauseListener:function(b){if(b.isplaying){if(this.getModelName().indexOf(&quot;AUDIO&quot;)&gt;-1){this.setSeek(this.media.position)}this.playingListener()}else{this.pauseListener()}this.setVolume(this._jarisVolume)},metaDataListener:function(c){this.applyCommand(&quot;volume&quot;,this.pp.getConfig(&quot;volume&quot;));try{this.mediaElement.get(0).api_seek(this.media.position||0)}catch(b){}this._setState(&quot;playing&quot;);if(this.modelId.indexOf(&quot;AUDIO&quot;)&gt;-1){this.mediaElement.get(0).api_removelistener(&quot;ondatainitialized&quot;);return}try{this.videoWidth=c.width;this.videoHeight=c.height;this.sendUpdate(&quot;scaled&quot;,{width:this.videoWidth,height:this.videoHeight})}catch(b){}},startListener:function(c){this.applyCommand(&quot;volume&quot;,this.pp.getConfig(&quot;volume&quot;));try{this.mediaElement.get(0).api_seek(this.media.position||0)}catch(b){}this._setState(&quot;playing&quot;)},setSeek:function(c){if(this.isPseudoStream){this.media.offset=c;this.applySrc()}else{try{this.mediaElement.get(0).api_seek(c)}catch(b){}this.seekedListener();this.timeListener({position:c})}this.setVolume(this._jarisVolume)},setVolume:function(b){this._volume=b;try{this.mediaElement.get(0).api_volume(b)}catch(c){return false}return b},setPause:function(b){try{this.mediaElement.get(0).api_pause()}catch(c){}},setPlay:function(b){try{this.mediaElement.get(0).api_play()}catch(c){}},getVolume:function(){return this._jarisVolume},detachMedia:function(){this.setPause();try{a(this.mediaElement).get(0).remove()}catch(b){}}});$p.newModel({modelId:&quot;AUDIOFLASH&quot;,iLove:[{ext:&quot;mp3&quot;,type:&quot;audio/mp3&quot;,platform:&quot;flash&quot;,streamType:[&quot;http&quot;,&quot;httpAudio&quot;,&quot;httpAudioLive&quot;]},{ext:&quot;mp3&quot;,type:&quot;audio/mpeg&quot;,platform:&quot;flash&quot;,streamType:[&quot;http&quot;,&quot;httpAudio&quot;,&quot;httpAudioLive&quot;]},{ext:&quot;m4a&quot;,type:&quot;audio/mp4&quot;,platform:&quot;flash&quot;,streamType:[&quot;http&quot;,&quot;httpAudio&quot;,&quot;httpAudioLive&quot;]}],applyMedia:function(b){$p.utils.blockSelection(b);this.imageElement=this.applyImage(this.pp.getConfig(&quot;cover&quot;)||this.pp.getConfig(&quot;poster&quot;),b);var c=a(&quot;#&quot;+this.pp.getMediaId()+&quot;_flash_container&quot;);if(c.length==0){c=a(document.createElement(&quot;div&quot;)).css({width:&quot;1px&quot;,height:&quot;1px&quot;}).attr(&quot;id&quot;,this.pp.getMediaId()+&quot;_flash_container&quot;).prependTo(this.pp.getDC())}var d={id:this.pp.getMediaId()+&quot;_flash&quot;,name:this.pp.getMediaId()+&quot;_flash&quot;,src:this.pp.getConfig(&quot;playerFlashMP3&quot;),width:&quot;1px&quot;,height:&quot;1px&quot;,allowScriptAccess:&quot;always&quot;,allowFullScreen:&quot;false&quot;,allowNetworking:&quot;all&quot;,wmode:&quot;transparent&quot;,bgcolor:&quot;#000000&quot;,FlashVars:{type:&quot;audio&quot;,streamtype:&quot;file&quot;,server:&quot;&quot;,autostart:&quot;false&quot;,hardwarescaling:&quot;false&quot;,controls:&quot;false&quot;,jsapi:&quot;true&quot;}};
this.createFlash(d,c,false)}},&quot;VIDEOFLASH&quot;)});jQuery(function(a){$p.newModel({modelId:&quot;VIDEO&quot;,androidVersion:&quot;2&quot;,iosVersion:&quot;3&quot;,nativeVersion:&quot;1&quot;,iLove:[{ext:&quot;mp4&quot;,type:&quot;video/mp4&quot;,platform:[&quot;ios&quot;,&quot;android&quot;,&quot;native&quot;],streamType:[&quot;http&quot;,&quot;pseudo&quot;,&quot;httpVideo&quot;],fixed:&quot;maybe&quot;},{ext:&quot;ogv&quot;,type:&quot;video/ogg&quot;,platform:[&quot;ios&quot;, &quot;android&quot;,&quot;native&quot;],streamType:[&quot;http&quot;,&quot;httpVideo&quot;]},{ext:&quot;webm&quot;,type:&quot;video/webm&quot;,platform:&quot;native&quot;,streamType:[&quot;http&quot;,&quot;httpVideo&quot;]},{ext:&quot;ogg&quot;,type:&quot;video/ogg&quot;,platform:&quot;native&quot;,streamType:[&quot;http&quot;,&quot;httpVideo&quot;]},{ext:&quot;anx&quot;,type:&quot;video/ogg&quot;,platform:&quot;native&quot;,streamType:[&quot;http&quot;,&quot;httpVideo&quot;]}],_eventMap:{pause:&quot;pauseListener&quot;,play:&quot;playingListener&quot;,volumechange:&quot;volumeListener&quot;,progress:&quot;progressListener&quot;,timeupdate:&quot;timeListener&quot;,ended:&quot;_ended&quot;,waiting:&quot;waitingListener&quot;,canplaythrough:&quot;canplayListener&quot;,canplay:&quot;canplayListener&quot;,error:&quot;errorListener&quot;,suspend:&quot;suspendListener&quot;,seeked:&quot;seekedListener&quot;,loadedmetadata:&quot;metaDataListener&quot;,loadstart:null},isGingerbread:false,allowRandomSeek:false,videoWidth:0,videoHeight:0,wasPersistent:true,isPseudoStream:false,init:function(){var b=navigator.userAgent;if(b.indexOf(&quot;Android&quot;)&gt;=0){if(parseFloat(b.slice(b.indexOf(&quot;Android&quot;)+8))&lt;3){this.isGingerbread=true}}this.ready()},applyMedia:function(b){if(a(&quot;#&quot;+this.pp.getMediaId()+&quot;_html&quot;).length===0){this.wasPersistent=false;b.html(&quot;&quot;).append(a(&quot;&lt;video/&gt;&quot;).attr({id:this.pp.getMediaId()+&quot;_html&quot;,poster:(this.pp.getIsMobileClient(&quot;ANDROID&quot;))?this.getPoster():$p.utils.imageDummy(),loop:false,autoplay:false,&quot;x-webkit-airplay&quot;:&quot;allow&quot;}).prop({controls:false,volume:this.getVolume()}).css({width:&quot;100%&quot;,height:&quot;100%&quot;,position:&quot;absolute&quot;,top:0,left:0}))}this.mediaElement=a(&quot;#&quot;+this.pp.getMediaId()+&quot;_html&quot;);this.applySrc()},applySrc:function(){var d=this,b=d.getState(&quot;AWAKENING&quot;);this.removeListener(&quot;error&quot;);this.removeListener(&quot;play&quot;);this.removeListener(&quot;loadstart&quot;);this.removeListener(&quot;canplay&quot;);this.mediaElement.find(&quot;source&quot;).remove();a.each(this.getSource(),function(){var e=a(&quot;&lt;source/&gt;&quot;);e.attr(&quot;src&quot;,this.src);if(!d.isGingerbread){e.attr(&quot;type&quot;,this.type)}e.appendTo(d.mediaElement)});var c=function(){d.mediaElement.unbind(&quot;loadstart.projekktorqs&quot;+d.pp.getId());d.mediaElement.unbind(&quot;loadeddata.projekktorqs&quot;+d.pp.getId());d.mediaElement.unbind(&quot;canplay.projekktorqs&quot;+d.pp.getId());d.addListeners(&quot;error&quot;);d.addListeners(&quot;play&quot;);d.addListeners(&quot;loadstart&quot;);d.addListeners(&quot;canplay&quot;);d.mediaElement=a(&quot;#&quot;+d.pp.getMediaId()+&quot;_html&quot;);if(b){d.displayReady();return}if(d.getSeekState(&quot;SEEKING&quot;)){if(d._isPlaying){d.setPlay()}d.seekedListener();return}if(!d.isPseudoStream){d.setSeek(d.media.position||0)}if(d._isPlaying){d.setPlay()}};this.mediaElement.bind(&quot;loadstart.projekktorqs&quot;+this.pp.getId(),c);this.mediaElement.bind(&quot;loadeddata.projekktorqs&quot;+this.pp.getId(),c);this.mediaElement.bind(&quot;canplay.projekktorqs&quot;+this.pp.getId(),c);this.mediaElement.get(0).load();c();if(this.isGingerbread){c()}},detachMedia:function(){try{this.mediaElement[0].pause();this.mediaElement.find(&quot;source&quot;).remove();this.mediaElement.load()}catch(b){}},addListeners:function(e,c){if(this.mediaElement==null){return}var f=(c!=null)?&quot;.projekktor&quot;+c+this.pp.getId():&quot;.projekktor&quot;+this.pp.getId(),d=this,b=(e==null)?&quot;*&quot;:e;a.each(this._eventMap,function(g,h){if((g==b||b==&quot;*&quot;)&amp;&amp;h!=null){d.mediaElement.bind(g+f,function(i){d[h](this,i)})}})},removeListener:function(b,c){if(this.mediaElement==null){return}var e=(c!=null)?&quot;.projekktor&quot;+c+this.pp.getId():&quot;.projekktor&quot;+this.pp.getId(),d=this;a.each(this._eventMap,function(f,g){if(f==b){d.mediaElement.unbind(f+e)}})},_ended:function(){var d=this.mediaElement[0].duration,b=(Math.round(this.media.position)===Math.round(d)),c=((d-this.media.maxpos)&lt;2)&amp;&amp;(this.media.position===0)||false;if(b||c||this.isPseudoStream){this.endedListener(this)}else{this.pauseListener(this)}},playingListener:function(c){var b=this;if(!this.isGingerbread){(function(){try{if(b.getDuration()===0){if(b.mediaElement.get(0).currentSrc!==&quot;&quot;&amp;&amp;b.mediaElement.get(0).networkState==b.mediaElement.get(0).NETWORK_NO_SOURCE){b.sendUpdate(&quot;error&quot;,80);return}setTimeout(arguments.callee,500);return}}catch(d){}})()}this._setState(&quot;playing&quot;)},errorListener:function(d,b){try{switch(event.target.error.code){case event.target.error.MEDIA_ERR_ABORTED:this.sendUpdate(&quot;error&quot;,1);break;case event.target.error.MEDIA_ERR_NETWORK:this.sendUpdate(&quot;error&quot;,2);break;case event.target.error.MEDIA_ERR_DECODE:this.sendUpdate(&quot;error&quot;,3);break;case event.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:this.sendUpdate(&quot;error&quot;,4);break;default:this.sendUpdate(&quot;error&quot;,5);break}}catch(c){}},canplayListener:function(c){var b=this;if(this.pp.getConfig(&quot;streamType&quot;)==&quot;pseudo&quot;){a.each(this.media.file,function(){if(this.src.indexOf(b.mediaElement[0].currentSrc)&gt;-1){if(this.type==&quot;video/mp4&quot;){b.isPseudoStream=true;b.allowRandomSeek=true;b.media.loadProgress=100;return false}}return true})}this._setBufferState(&quot;full&quot;)},setPlay:function(){try{this.mediaElement[0].play()}catch(b){}},setPause:function(){try{this.mediaElement[0].pause()}catch(b){}},setVolume:function(b){this._volume=b;
try{this.mediaElement.prop(&quot;volume&quot;,b)}catch(c){return false}return b},setSeek:function(c){var b=this;if(this.isPseudoStream){this.media.position=0;this.media.offset=c;this.applySrc();return}(function(){try{b.mediaElement[0].currentTime=c;b.timeListener({position:c})}catch(d){if(b.mediaElement!=null){setTimeout(arguments.callee,100)}}})()},setFullscreen:function(b){if(this.element==&quot;audio&quot;){return}this._scaleVideo()},setResize:function(){if(this.element==&quot;audio&quot;){return}this._scaleVideo(false)}});$p.newModel({modelId:&quot;VIDEOHLS&quot;,androidVersion:3,iosVersion:4,iLove:[{ext:&quot;m3u8&quot;,type:&quot;application/mpegURL&quot;,platform:[&quot;ios&quot;,&quot;android&quot;],streamType:[&quot;http&quot;,&quot;httpVideo&quot;,&quot;httpVideoLive&quot;]},{ext:&quot;m3u&quot;,type:&quot;application/mpegURL&quot;,platform:[&quot;ios&quot;,&quot;android&quot;],streamType:[&quot;http&quot;,&quot;httpVideo&quot;,&quot;httpVideoLive&quot;]},{ext:&quot;ts&quot;,type:&quot;video/MP2T&quot;,platforms:[&quot;ios&quot;,&quot;android&quot;],streamType:[&quot;http&quot;,&quot;httpVideo&quot;,&quot;httpVideoLive&quot;]}]},&quot;VIDEO&quot;);$p.newModel({modelId:&quot;AUDIO&quot;,iLove:[{ext:&quot;ogg&quot;,type:&quot;audio/ogg&quot;,platform:&quot;native&quot;,streamType:[&quot;http&quot;,&quot;httpAudio&quot;]},{ext:&quot;oga&quot;,type:&quot;audio/ogg&quot;,platform:&quot;native&quot;,streamType:[&quot;http&quot;,&quot;httpAudio&quot;]},{ext:&quot;mp3&quot;,type:&quot;audio/mp3&quot;,platform:[&quot;ios&quot;,&quot;android&quot;,&quot;native&quot;],streamType:[&quot;http&quot;,&quot;httpAudio&quot;]},{ext:&quot;mp3&quot;,type:&quot;audio/mpeg&quot;,platform:[&quot;ios&quot;,&quot;android&quot;,&quot;native&quot;],streamType:[&quot;http&quot;,&quot;httpAudio&quot;]}],imageElement:{},applyMedia:function(b){$p.utils.blockSelection(b);this.imageElement=this.applyImage(this.pp.getConfig(&quot;cover&quot;)||this.pp.getConfig(&quot;poster&quot;),b);this.imageElement.css({border:&quot;0px&quot;});var c=a(&quot;#&quot;+this.pp.getMediaId()+&quot;_audio_container&quot;);if(c.length===0){c=a(&quot;&lt;div/&gt;&quot;).css({width:&quot;1px&quot;,height:&quot;1px&quot;,marginBottom:&quot;-1px&quot;}).attr(&quot;id&quot;,this.pp.getMediaId()+&quot;_audio_container&quot;).prependTo(this.pp.getDC())}c.html(&quot;&quot;).append(a((this.isGingerbread)?&quot;&lt;video/&gt;&quot;:&quot;&lt;audio/&gt;&quot;).attr({id:this.pp.getMediaId()+&quot;_html&quot;,poster:$p.utils.imageDummy(),loop:false,autoplay:false,&quot;x-webkit-airplay&quot;:&quot;allow&quot;,preload:&quot;auto&quot;}).prop({controls:false,volume:this.getVolume()}).css({width:&quot;1px&quot;,height:&quot;1px&quot;,position:&quot;absolute&quot;,top:0,left:0}));this.mediaElement=a(&quot;#&quot;+this.pp.getMediaId()+&quot;_html&quot;);this.applySrc()},setPosterLive:function(){if(this.imageElement.parent){var b=this.imageElement.parent(),c=this;if(this.imageElement.attr(&quot;src&quot;)==c.pp.getConfig(&quot;poster&quot;)){return}this.imageElement.fadeOut(&quot;fast&quot;,function(){a(this).remove();c.imageElement=c.applyImage(c.pp.getConfig(&quot;poster&quot;),b)})}}},&quot;VIDEO&quot;);$p.newModel({modelId:&quot;AUDIOHLS&quot;,androidVersion:3,iosVersion:4,iLove:[{ext:&quot;m3u8&quot;,type:&quot;application/mpegURL&quot;,platform:[&quot;ios&quot;,&quot;android&quot;,&quot;native&quot;],streamType:[&quot;http&quot;,&quot;httpAudio&quot;,&quot;httpAudioLive&quot;]},{ext:&quot;m3u&quot;,type:&quot;application/mpegURL&quot;,platform:[&quot;ios&quot;,&quot;android&quot;,&quot;native&quot;],streamType:[&quot;http&quot;,&quot;httpAudio&quot;,&quot;httpAudioLive&quot;]},{ext:&quot;mp3&quot;,type:&quot;audio/mp3&quot;,platform:[&quot;ios&quot;,&quot;android&quot;,&quot;native&quot;],streamType:[&quot;http&quot;,&quot;httpAudio&quot;,&quot;httpAudioLive&quot;]},{ext:&quot;mp3&quot;,type:&quot;audio/mpeg3&quot;,platform:[&quot;ios&quot;,&quot;android&quot;,&quot;native&quot;],streamType:[&quot;http&quot;,&quot;httpAudio&quot;,&quot;httpAudioLive&quot;]}]},&quot;AUDIO&quot;)});jQuery(function(a){$p.newModel({browserVersion:&quot;1&quot;,modelId:&quot;IMAGE&quot;,iLove:[{ext:&quot;jpg&quot;,type:&quot;image/jpeg&quot;,platform:&quot;browser&quot;,streamType:[&quot;http&quot;]},{ext:&quot;gif&quot;,type:&quot;image/gif&quot;,platform:&quot;browser&quot;,streamType:[&quot;http&quot;]},{ext:&quot;png&quot;,type:&quot;image/png&quot;,platform:&quot;browser&quot;,streamType:[&quot;http&quot;]}],allowRandomSeek:true,_position:0,_duration:0,applyMedia:function(b){this.mediaElement=this.applyImage(this.media.file[0].src,b.html(&quot;&quot;));this._duration=this.pp.getConfig(&quot;duration&quot;);this._position=-1;this.displayReady();this._position=-0.5},setPlay:function(){var b=this;this._setBufferState(&quot;full&quot;);this.progressListener(100);this.playingListener();if(this._duration==0){b._setState(&quot;completed&quot;);return}(function(){if(b._position&gt;=b._duration){b._setState(&quot;completed&quot;);return}if(!b.getState(&quot;PLAYING&quot;)){return}b.timeListener({duration:b._duration,position:b._position});setTimeout(arguments.callee,200);b._position+=0.2})()},detachMedia:function(){this.mediaElement.remove()},setPause:function(){this.pauseListener()},setSeek:function(b){if(b&lt;this._duration){this._position=b;this.seekedListener()}}});$p.newModel({modelId:&quot;HTML&quot;,iLove:[{ext:&quot;html&quot;,type:&quot;text/html&quot;,platform:&quot;browser&quot;,streamType:[&quot;http&quot;]}],applyMedia:function(c){var b=this;this.mediaElement=a(document.createElement(&quot;iframe&quot;)).attr({id:this.pp.getMediaId()+&quot;_iframe&quot;,name:this.pp.getMediaId()+&quot;_iframe&quot;,src:this.media.file[0].src,scrolling:&quot;no&quot;,frameborder:&quot;0&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;}).css({overflow:&quot;hidden&quot;,border:&quot;0px&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;}).appendTo(c.html(&quot;&quot;));this.mediaElement.load(function(d){b.success()});this.mediaElement.error(function(d){b.remove()});this._duration=this.pp.getConfig(&quot;duration&quot;)},success:function(){this.displayReady()},remove:function(){this.mediaElement.remove()}},&quot;IMAGE&quot;)});jQuery(function(a){$p.newModel({modelId:&quot;YTVIDEO&quot;,iLove:[{ext:&quot;youtube.com&quot;,type:&quot;video/youtube&quot;,platform:&quot;flash&quot;,fixed:&quot;maybe&quot;}],allowRandomSeek:true,useIframeAPI:true,flashVerifyMethod:&quot;cueVideoById&quot;,_ffFix:false,_updateTimer:null,init:function(c){var b=this;this.useIframeAPI=this.pp.getConfig(&quot;useYTIframeAPI&quot;)||this.pp.getIsMobileClient();this.hasGUI=this.pp.getIsMobileClient();if(!this.useIframeAPI){this.requiresFlash=8;this.ready();return}var d=this.pp.getId();if(window.ProjekktorYoutubePlayerAPIReady!==true){a.getScript(&quot;<A href="http://www.youtube.com/player_api" class="external free" rel="nofollow">http://www.youtube.com/player_api</A>&quot;);(function(){try{if(window.ProjekktorYoutubePlayerAPIReady==true){b.ready();return}setTimeout(arguments.callee,50)}catch(f){setTimeout(arguments.callee,50)}})()}else{this.ready()}window.onYouTubePlayerAPIReady=function(){window.ProjekktorYoutubePlayerAPIReady=true}},applyMedia:function(f){this._setBufferState(&quot;empty&quot;);var e=this,c=(this.modelId==&quot;YTAUDIO&quot;)?1:&quot;100%&quot;,b=(this.modelId==&quot;YTAUDIO&quot;)?1:&quot;100%&quot;;if(this.modelId==&quot;YTAUDIO&quot;){this.imageElement=this.applyImage(this.pp.getPoster(),f)}if(this.useIframeAPI){f.html(&quot;&quot;).append(a(&quot;&lt;div/&gt;&quot;).attr(&quot;id&quot;,this.pp.getId()+&quot;_media_youtube&quot;).css({width:&quot;100%&quot;,height:&quot;100%&quot;,position:&quot;absolute&quot;,top:0,left:0}));var d=a(&quot;&lt;div/&gt;&quot;).attr(&quot;id&quot;,this.pp.getId()+&quot;_media_youtube_cc&quot;).css({width:&quot;100%&quot;,height:&quot;100%&quot;,backgroundColor:($p.utils.ieVersion())?&quot;#000&quot;:&quot;transparent&quot;,filter:&quot;alpha(opacity = 0.1)&quot;,position:&quot;absolute&quot;,top:0,left:0});f.append(d);this.mediaElement=new YT.Player(this.pp.getId()+&quot;_media_youtube&quot;,{width:(this.pp.getIsMobileClient())?this.pp.config._width:c,height:(this.pp.getIsMobileClient())?this.pp.config._height:b,playerVars:{autoplay:0,disablekb:0,version:3,start:0,controls:(this.pp.getIsMobileClient())?1:0,showinfo:0,enablejsapi:1,start:(this.media.position||0),origin:window.location.href,wmode:&quot;transparent&quot;,modestbranding:1},videoId:this.youtubeGetId(),events:{onReady:function(h){e.onReady(h)},onStateChange:function(h){e.stateChange(h)},onError:function(h){e.errorListener(h)}}})}else{var g={id:this.pp.getId()+&quot;_media_youtube&quot;,name:this.pp.getId()+&quot;_media_youtube&quot;,src:&quot;<A href="http://www.youtube.com/apiplayer" class="external free" rel="nofollow">http://www.youtube.com/apiplayer</A>&quot;,width:(this.pp.getIsMobileClient())?this.pp.config._width:c,height:(this.pp.getIsMobileClient())?this.pp.config._height:b,bgcolor:&quot;#000000&quot;,allowScriptAccess:&quot;always&quot;,wmode:&quot;transparent&quot;,FlashVars:{enablejsapi:1,autoplay:0,version:3,modestbranding:1,showinfo:0}};this.createFlash(g,f)}},flashReadyListener:function(){this._youtubeResizeFix();this.addListeners();this.mediaElement.cueVideoById(this.youtubeGetId(),this.media.position||0,this._playbackQuality)},_youtubeResizeFix:function(){this.applyCommand(&quot;volume&quot;,this.pp.getConfig(&quot;volume&quot;))},addListeners:function(){this.mediaElement.addEventListener(&quot;onStateChange&quot;,&quot;projekktor('&quot;+this.pp.getId()+&quot;').playerModel.stateChange&quot;);this.mediaElement.addEventListener(&quot;onError&quot;,&quot;projekktor('&quot;+this.pp.getId()+&quot;').playerModel.errorListener&quot;);this.mediaElement.addEventListener(&quot;onPlaybackQualityChange&quot;,&quot;projekktor('&quot;+this.pp.getId()+&quot;').playerModel.qualityChangeListener&quot;)},setSeek:function(c){try{this.mediaElement.seekTo(c,true);if(!this.getState(&quot;PLAYING&quot;)){this.timeListener({position:this.mediaElement.getCurrentTime(),duration:this.mediaElement.getDuration()})}}catch(b){}},setVolume:function(b){try{this.mediaElement.setVolume(b*100)}catch(c){}},setPause:function(b){try{this.mediaElement.pauseVideo()}catch(c){}},setPlay:function(b){try{this.mediaElement.playVideo()}catch(c){}},setQuality:function(c){try{this.mediaElement.setPlaybackQuality(c)}catch(b){}},getVolume:function(){try{return this.mediaElement.getVolume()}catch(b){}return 0},getPoster:function(){return this.media.config[&quot;poster&quot;]||this.pp.config.poster||&quot;<A href="http://img.youtube.com/vi/" class="external free" rel="nofollow">http://img.youtube.com/vi/</A>&quot;+this.youtubeGetId()+&quot;/0.jpg&quot;},getPlaybackQuality:function(){try{return this.mediaElement.getPlaybackQuality()}catch(b){return false}},getSrc:function(){return this.youtubeGetId()||null},errorListener:function(b){switch((b.data==undefined)?b:b.data){case 100:this.setTestcard(500);break;case 101:case 150:this.setTestcard(501);break;case 2:this.setTestcard(502);break}},stateChange:function(b){clearTimeout(this._updateTimer);if(this.mediaElement===null||this.getState(&quot;COMPLETED&quot;)){return}switch((b.data==undefined)?b:b.data){case -1:this.setPlay();this.ffFix=true;break;case 0:if(this.getState(&quot;AWAKENING&quot;)){break}this._setBufferState(&quot;full&quot;);this.endedListener({});break;case 1:this._setBufferState(&quot;full&quot;);if((this.media.position||0)&gt;0&amp;&amp;this._isFF()&amp;&amp;this.ffFix){this.ffFix=false;this.setSeek(this.media.position)}this.playingListener({});this.canplayListener({});this.updateInfo();break;case 2:this.pauseListener({});break;case 3:this.waitingListener({});break;case 5:if(this.useIframeAPI!==true){this.onReady()}break}},onReady:function(){this.setVolume(this.pp.getVolume());a(&quot;#&quot;+this.pp.getId()+&quot;_media&quot;).attr(&quot;ALLOWTRANSPARENCY&quot;,true).attr({scrolling:&quot;no&quot;,frameborder:0}).css({overflow:&quot;hidden&quot;,display:&quot;block&quot;,border:&quot;0&quot;});if(this.media.title||this.pp.config.title||this.pp.getIsMobileClient()){this.displayReady();
return}var b=this;a.ajax({url:&quot;<A href="http://gdata.youtube.com/feeds/api/videos/" class="external free" rel="nofollow">http://gdata.youtube.com/feeds/api/videos/</A>&quot;+this.youtubeGetId()+&quot;?v=2&amp;alt=jsonc&quot;,async:false,complete:function(f,c){try{data=f.responseText;if(typeof data==&quot;string&quot;){data=a.parseJSON(data)}if(data.data.title){b.sendUpdate(&quot;config&quot;,{title:data.data.title+&quot; (&quot;+data.data.uploader+&quot;)&quot;})}}catch(d){}b.displayReady()}})},youtubeGetId:function(){return encodeURIComponent(this.media.file[0].src.replace(/^[^v]+v.(.{11}).*/,&quot;$1&quot;))},updateInfo:function(){var b=this;clearTimeout(this._updateTimer);(function(){if(b.mediaElement==null){clearTimeout(b._updateTimer);return}try{if(b.getState(&quot;PLAYING&quot;)){b.timeListener({position:b.mediaElement.getCurrentTime(),duration:b.mediaElement.getDuration()});b.progressListener({loaded:b.mediaElement.getVideoBytesLoaded(),total:b.mediaElement.getVideoBytesTotal()});b._updateTimer=setTimeout(arguments.callee,500)}}catch(c){}})()}});$p.newModel({modelId:&quot;YTAUDIO&quot;,iLove:[{ext:&quot;youtube.com&quot;,type:&quot;audio/youtube&quot;,platform:&quot;flash&quot;,fixed:&quot;maybe&quot;}]},&quot;YTVIDEO&quot;)});var playerModel=function(){};jQuery(function(a){playerModel.prototype={modelId:&quot;player&quot;,iLove:[],_currentState:null,_currentBufferState:null,_currentSeekState:null,_ap:false,_volume:0,_quality:&quot;default&quot;,_displayReady:false,_isPlaying:false,_id:null,_KbPerSec:0,_bandWidthTimer:null,_isPoster:false,_isFullscreen:false,hasGUI:false,allowRandomSeek:false,flashVerifyMethod:&quot;api_get&quot;,mediaElement:null,pp:{},media:{duration:0,position:0,maxpos:0,offset:0,file:false,poster:&quot;&quot;,ended:false,loadProgress:0,errorCode:0},_init:function(b){this.pp=b.pp||null;this.media=a.extend(true,{},this.media,b.media);this._ap=b.autoplay;this._isFullscreen=b.fullscreen;this._id=$p.utils.randomId(8);this._quality=b.quality||this._quality;this._volume=this.pp.getVolume();this._playbackQuality=this.pp.getPlaybackQuality();this.init()},init:function(b){this.ready()},ready:function(){this.sendUpdate(&quot;modelReady&quot;);if(this._ap){this.sendUpdate(&quot;autostart&quot;,true);this._setState(&quot;awakening&quot;)}else{this.displayItem(false)}},displayItem:function(b){this._displayReady=false;this._isPoster=false;this.pp.removeListener(&quot;fullscreen.poster&quot;);this.pp.removeListener(&quot;resize.poster&quot;);if(b!==true||this.getState(&quot;STOPPED&quot;)){this._setState(&quot;idle&quot;);this.applyImage(this.getPoster(),this.pp.getMediaContainer().html(&quot;&quot;));this._isPoster=true;this.displayReady();return}a(&quot;#&quot;+this.pp.getMediaId()+&quot;_image&quot;).remove();a(&quot;#&quot;+this.pp.getId()+&quot;_testcard_media&quot;).remove();this.applyMedia(this.pp.getMediaContainer())},applyMedia:function(){},sendUpdate:function(b,c){if(this._currentState==&quot;ERROR&quot;){return}if(b==&quot;error&quot;){this._setState(&quot;error&quot;)}this.pp._modelUpdateListener(b,c)},displayReady:function(){this._displayReady=true;this.pp._modelUpdateListener(&quot;displayReady&quot;)},start:function(){var b=this;if(this.mediaElement==null&amp;&amp;this.modelId!=&quot;PLAYLIST&quot;){return}if(this.getState(&quot;STARTING&quot;)){return}this._setState(&quot;STARTING&quot;);if(!this.getState(&quot;STOPPED&quot;)){this.addListeners()}if(this.pp.getIsMobileClient(&quot;ANDROID&quot;)&amp;&amp;!this.getState(&quot;PLAYING&quot;)){setTimeout(function(){b.setPlay()},500)}this.setPlay()},addListeners:function(){},removeListeners:function(){try{this.mediaElement.unbind(&quot;.projekktor&quot;+this.pp.getId())}catch(b){}},detachMedia:function(){},destroy:function(b){this.removeListeners();if(!this.getState(&quot;IDLE&quot;)){this._setState(&quot;destroying&quot;)}this.detachMedia();try{a(&quot;#&quot;+this.mediaElement.id).empty()}catch(c){}if(!this.pp.getIsMobileClient()){try{a(&quot;#&quot;+this.mediaElement.id).remove()}catch(c){}try{this.mediaElement.remove()}catch(c){}this.pp.getMediaContainer().html(&quot;&quot;)}this.mediaElement=null;this.media.loadProgress=0;this.media.playProgress=0;this.media.frame=0;this.media.position=0;this.media.duration=0},reInit:function(){if(this.flashVersion!==false||!this._isFF()||this.getState(&quot;ERROR&quot;)||this.pp.getConfig(&quot;bypassFlashFFFix&quot;)===true){return}this.sendUpdate(&quot;FFreinit&quot;);this.removeListeners();this.displayItem((!this.getState(&quot;IDLE&quot;)))},applyCommand:function(c,b){switch(c){case&quot;quality&quot;:this.setQuality(b);break;case&quot;error&quot;:this._setState(&quot;error&quot;);this.setTestcard(b);break;case&quot;play&quot;:if(this.getState(&quot;ERROR&quot;)){break}if(this.getState(&quot;IDLE&quot;)){this._setState(&quot;awakening&quot;);break}this.setPlay();break;case&quot;pause&quot;:if(this.getState(&quot;ERROR&quot;)){break}this.setPause();break;case&quot;volume&quot;:if(this.getState(&quot;ERROR&quot;)){break}if(!this.setVolume(b)){this._volume=b;this.sendUpdate(&quot;volume&quot;,b)}break;case&quot;stop&quot;:this.setStop();break;case&quot;frame&quot;:this.setFrame(b);break;case&quot;seek&quot;:if(this.getState(&quot;ERROR&quot;)){break}if(this.getSeekState(&quot;SEEKING&quot;)){break}if(this.getState(&quot;IDLE&quot;)){break}if(this.media.loadProgress==-1){break}this._setSeekState(&quot;seeking&quot;,b);this.setSeek(b);break;case&quot;fullscreen&quot;:if(b==this._isFullscreen){break}this._isFullscreen=b;this.sendUpdate(&quot;fullscreen&quot;,this._isFullscreen);this.reInit();this.setFullscreen();break;case&quot;resize&quot;:this.setResize();this.sendUpdate(&quot;resize&quot;,b);break}},setFrame:function(c){var b=(c/this.pp.getConfig(&quot;fps&quot;))+0.00001;this.setSeek(b)},setSeek:function(b){},setPlay:function(){},setPause:function(){},setStop:function(){this.detachMedia();this._setState(&quot;stopped&quot;);this.displayItem(false)},setVolume:function(b){},setFullscreen:function(b){this.setResize()},setResize:function(){var b=this.pp.getMediaContainer();this.sendUpdate(&quot;scaled&quot;,{realWidth:this.media.videoWidth||null,realHeight:this.media.videoHeight||null,displayWidth:b.width(),displayHeight:b.height()})},setPosterLive:function(){},setQuality:function(d){var b=[];if(this._quality==d){return}this._quality=d;try{this.applySrc()}catch(c){}this.qualityChangeListener()},getVolume:function(){if(this.mediaElement==null){return this._volume}return(this.mediaElement.prop(&quot;muted&quot;)===true)?0:this.mediaElement.prop(&quot;volume&quot;)},getLoadProgress:function(){return this.media.loadProgress||0},getLoadPlaybackProgress:function(){return this.media.playProgress||0},getPosition:function(){return this.media.position||0},getFrame:function(){return this.media.frame||0},getDuration:function(){return this.media.duration||0},getMaxPosition:function(){return this.media.maxpos||0
},getPlaybackQuality:function(){return(a.inArray(this._quality,this.media.qualities)&gt;-1)?this._quality:&quot;default&quot;},getInFullscreen:function(){return this.pp.getInFullscreen()},getKbPerSec:function(){return this._KbPerSec},getState:function(c){var b=(this._currentState==null)?&quot;IDLE&quot;:this._currentState;if(c!=null){return(b==c.toUpperCase())}return b},getBufferState:function(c){var b=(this._currentBufferState==null)?&quot;NONE&quot;:this._currentBufferState;if(c!=null){return(b==c.toUpperCase())}return b},getSeekState:function(c){var b=(this._currentSeekState==null)?&quot;NONE&quot;:this._currentSeekState;if(c!=null){return(b==c.toUpperCase())}return b},getSrc:function(){try{return this.mediaElement.get(0).currentSrc}catch(b){}try{return this.media.file[0].src}catch(b){}try{return this.getPoster()}catch(b){}return null},getModelName:function(){return this.modelId||null},getHasGUI:function(){return(this.hasGUI&amp;&amp;!this._isPoster)},getIsReady:function(){return this._displayReady},getPoster:function(){var b=this.pp.getConfig(&quot;poster&quot;),e=&quot;default&quot;,f=[];if(typeof b!=&quot;object&quot;){return b}for(var d in b){if(b[d].quality){f.push(b[d].quality)}}e=this.pp._getAppropriateQuality(f);for(var c in this.pp.getConfig(&quot;poster&quot;)){if(this.pp.getConfig(&quot;poster&quot;)[c].quality==e){b=this.pp.getConfig(&quot;poster&quot;)[c].src||null;break}}return b},getMediaElement:function(){return this.mediaElement||a(&quot;&lt;video/&gt;&quot;)},getMediaDimensions:function(){return{width:this.media.videoWidth||0,height:this.media.videoHeight||0}},getSource:function(){var c=[],e=this.media.offset||this.media.position||false,d=this,b=(this.pp.getConfig(&quot;streamType&quot;)==&quot;pseudo&quot;)?this.pp.getConfig(&quot;startParameter&quot;):false;a.each(this.media.file||[],function(){if(d._quality!=this.quality&amp;&amp;d._quality!=null){return true}if(!b||!e){c.push(this);return true}var f=$p.utils.parseUri(this.src),h=f.protocol+&quot;://&quot;+f.host+f.path,g=[];a.each(f.queryKey,function(i,j){if(i!=b){g.push(i+&quot;=&quot;+j)}});h+=(g.length&gt;0)?&quot;?&quot;+g.join(&quot;&amp;&quot;)+&quot;&amp;&quot;+b+&quot;=&quot;+e:&quot;?&quot;+b+&quot;=&quot;+e;this.src=h;c.push(this);return true});if(c.length===0){return this.media.file}else{return c}},timeListener:function(d){if(d==null){return}var b=parseFloat((d.position||d.currentTime||this.media.position||0).toFixed(2)),c=parseFloat((d.duration||0).toFixed(2));if(isNaN(c+b)){return}if(c!=0&amp;&amp;(c!=this.media.duration&amp;&amp;!this.isPseudoStream)||(this.isPseudoStream&amp;&amp;this.media.duration==0)){this.media.duration=c;this.sendUpdate(&quot;durationChange&quot;,c)}if(b==this.media.position){return}if(this.isPseudoStream&amp;&amp;Math.round(b*100)/100==Math.round(this.media.offset*100)/100){this.media.position=this.media.offset}else{this.media.position=this.media.offset+b}this.media.maxpos=Math.max(this.media.maxpos||0,this.media.position||0);this.media.playProgress=parseFloat((this.media.position&gt;0&amp;&amp;this.media.duration&gt;0)?this.media.position*100/this.media.duration:0);this.media.frame=this.media.position*this.pp.getConfig(&quot;fps&quot;);this.sendUpdate(&quot;time&quot;,this.media.position);this.loadProgressUpdate()},loadProgressUpdate:function(){var c=this.mediaElement.get(0),b=0;if(typeof c.buffered!==&quot;object&quot;){return}if(c.buffered.length===0&amp;&amp;c.seekable.length===0){return}if(this.media.loadProgress==100){return}if(c.seekable&amp;&amp;c.seekable.length&gt;0){b=Math.round(c.seekable.end(0)*100/this.media.duration)}else{b=Math.round(c.buffered.end(c.buffered.length-1)*100)/this.media.duration}if(this.media.loadProgress&gt;b){return}this.media.loadProgress=(this.allowRandomSeek===true)?100:-1;this.media.loadProgress=(this.media.loadProgress&lt;100||this.media.loadProgress===undefined)?b:100;this.sendUpdate(&quot;progress&quot;,this.media.loadProgress)},progressListener:function(h,c){if(this.mediaElement instanceof jQuery){if(typeof this.mediaElement.get(0).buffered==&quot;object&quot;){if(this.mediaElement.get(0).buffered.length&gt;0){this.mediaElement.unbind(&quot;progress&quot;);return}}}if(this._bandWidthTimer==null){this._bandWidthTimer=(new Date()).getTime()}var g=0,d=0;try{if(!isNaN(c.loaded/c.total)){g=c.loaded;d=c.total}else{if(c.originalEvent&amp;&amp;!isNaN(c.originalEvent.loaded/c.originalEvent.total)){g=c.originalEvent.loaded;d=c.originalEvent.total}}}catch(f){if(h&amp;&amp;!isNaN(h.loaded/h.total)){g=h.loaded;d=h.total}}var b=(g&gt;0&amp;&amp;d&gt;0)?g*100/d:0;if(Math.round(b)&gt;Math.round(this.media.loadProgress)){this._KbPerSec=((g/1024)/(((new Date()).getTime()-this._bandWidthTimer)/1000))}b=(this.media.loadProgress!==100)?b:100;b=(this.allowRandomSeek===true)?100:5*Math.round(b/5);if(this.media.loadProgress!=b){this.media.loadProgress=b;this.sendUpdate(&quot;progress&quot;,b)}if(this.media.loadProgress&gt;=100&amp;&amp;this.allowRandomSeek===false){this._setBufferState(&quot;full&quot;)}},qualityChangeListener:function(){this.sendUpdate(&quot;qualityChange&quot;,this._quality)},endedListener:function(b){if(this.mediaElement===null){return}if(this.media.maxpos&lt;=0){return}if(this.getState()==&quot;STARTING&quot;){return}this._setState(&quot;completed&quot;)},waitingListener:function(b){this._setBufferState(&quot;empty&quot;)},canplayListener:function(b){this._setBufferState(&quot;full&quot;)},canplaythroughListener:function(b){this._setBufferState(&quot;full&quot;)},suspendListener:function(b){this._setBufferState(&quot;full&quot;)
</P>
},playingListener:function(b){this._setState(&quot;playing&quot;)},startListener:function(b){this.applyCommand(&quot;volume&quot;,this.pp.getConfig(&quot;volume&quot;));if(!this.isPseudoStream){this.setSeek(this.media.position||0)}this._setState(&quot;playing&quot;)},pauseListener:function(b){this._setState(&quot;paused&quot;)},seekedListener:function(b){this._setSeekState(&quot;SEEKED&quot;,this.media.position)},volumeListener:function(b){this.sendUpdate(&quot;volume&quot;,this.getVolume())},flashReadyListener:function(){this._displayReady=true},errorListener:function(b,c){},metaDataListener:function(c){try{this.media.videoWidth=c.videoWidth;this.media.videoHeight=c.videoHeight}catch(b){}this._scaleVideo()},setTestcard:function(f,b){var e=this.pp.getMediaContainer().html(&quot;&quot;).css({width:&quot;100%&quot;,height:&quot;100%&quot;}),d=this.pp.getConfig(&quot;messages&quot;),c=(b!==undefined&amp;&amp;b!==&quot;&quot;)?b:(d[f]!==undefined)?d[f]:d[0];this.removeListeners();this.detachMedia();if(this.pp.getItemCount()&gt;1){c+=&quot; &quot;+d[99]}if(c.length&lt;3){c=&quot;ERROR&quot;}if(f==100){c=b}c=$p.utils.parseTemplate(c,a.extend({},this.media,{title:this.pp.getConfig(&quot;title&quot;)}));this.mediaElement=a(&quot;&lt;div/&gt;&quot;).addClass(this.pp.getNS()+&quot;testcard&quot;).attr(&quot;id&quot;,this.pp.getId()+&quot;_testcard_media&quot;).html(&quot;<P>&quot;+c+&quot;</P>&quot;).appendTo(e)},applySrc:function(){},applyImage:function(d,b){var f=a(&quot;&lt;img/&gt;&quot;).hide(),e=this;$p.utils.blockSelection(f);if(d===&quot;&quot;||d===undefined){return a(&quot;&lt;span/&gt;&quot;).attr({id:this.pp.getMediaId()+&quot;_image&quot;}).appendTo(b)}f.html(&quot;&quot;).appendTo(b).attr({id:this.pp.getMediaId()+&quot;_image&quot;,alt:this.pp.getConfig(&quot;title&quot;)||&quot;&quot;}).css({position:&quot;absolute&quot;});f.error(function(g){a(this).remove()});f.load(function(h){var g=h.currentTarget;if(!f.data(&quot;od&quot;)){f.data(&quot;od&quot;,{width:g.naturalWidth,height:g.naturalHeight})}f.show();$p.utils.stretch(e.pp.getConfig(&quot;imageScaling&quot;),f,b.width(),b.height())});f.attr(&quot;src&quot;,d);var c=function(i,g){if(g.is(&quot;:visible&quot;)===false){e.pp.removeListener(&quot;fullscreen&quot;,arguments.callee)}var h=g.width(),j=g.height(),k=i.width(),m=i.height();if($p.utils.stretch(e.pp.getConfig(&quot;imageScaling&quot;),i,g.width(),g.height())){try{e.sendUpdate(&quot;scaled&quot;,{realWidth:i._originalDimensions.width,realHeight:i._originalDimensions.height,displayWidth:e.mediaElement.width(),displayHeight:e.mediaElement.height()})}catch(l){}}if(i.attr(&quot;src&quot;)!=e.getPoster()){i.attr(&quot;src&quot;,e.getPoster())}};this.pp.addListener(&quot;fullscreen.poster&quot;,function(){c(f,b)});this.pp.addListener(&quot;resize.poster&quot;,function(){c(f,b)});return f},createFlash:function(d,b,c){this.mediaElement=$p.utils.embeddFlash(b.html(&quot;&quot;),d,c,true);this._waitforPlayer()},_waitforPlayer:function(){var c=this,b=0;if(this._displayReady===true){return}this._setBufferState(&quot;empty&quot;);(function(){if(b&gt;6&amp;&amp;c._isFF()){b=0;var d=a(c.mediaElement).parent(),g=a(c.mediaElement).clone();d.html(&quot;&quot;).append(g);c.mediaElement=g}d=c.mediaElement;try{if(a(d).attr(&quot;id&quot;).indexOf(&quot;testcard&quot;)&gt;-1){return}}catch(f){console.log(f)}b++;try{if(d===undefined){setTimeout(arguments.callee,200)}else{if(d.get(0)[c.flashVerifyMethod]===undefined){setTimeout(arguments.callee,200)}else{c._setBufferState(&quot;full&quot;);c.flashReadyListener();a(&quot;#&quot;+a(c.mediaElement).attr(&quot;id&quot;)+&quot;_cc&quot;).css({width:&quot;100%&quot;,height:&quot;100%&quot;})}}}catch(f){setTimeout(arguments.callee,200)}})()},_setState:function(c){var b=this;c=c.toUpperCase();if(this._currentState!=c&amp;&amp;this._currentState!=&quot;ERROR&quot;){if(this._currentState==&quot;PAUSED&quot;&amp;&amp;c==&quot;PLAYING&quot;){this.sendUpdate(&quot;resume&quot;,this.media);this._isPlaying=true}if((this._currentState==&quot;IDLE&quot;||this._currentState==&quot;STARTING&quot;)&amp;&amp;c==&quot;PLAYING&quot;){this.sendUpdate(&quot;start&quot;,this.media);this._isPlaying=true}if(c==&quot;PAUSED&quot;){this._isPlaying=false}if(c==&quot;ERROR&quot;){this.setPlay=this.setPause=function(){b.sendUpdate(&quot;start&quot;)}}this._currentState=c.toUpperCase();this.sendUpdate(&quot;state&quot;,this._currentState)}},_setBufferState:function(b){if(this._currentBufferState!=b.toUpperCase()){this._currentBufferState=b.toUpperCase();this.sendUpdate(&quot;buffer&quot;,this._currentBufferState)}},_setSeekState:function(c,b){if(this._currentSeekState!=c.toUpperCase()){this._currentSeekState=c.toUpperCase();this.sendUpdate(&quot;seek&quot;,this._currentSeekState)}},_scaleVideo:function(h){var d=this.pp.getMediaContainer();if(this.pp.getIsMobileClient()){return}try{var f=d.width(),i=d.height(),b=this.media.videoWidth,c=this.media.videoHeight;if($p.utils.stretch(this.pp.getConfig(&quot;videoScaling&quot;),this.mediaElement,f,i,b,c)){this.sendUpdate(&quot;scaled&quot;,{realWidth:b,realHeight:c,displayWidth:f,displayHeight:i})}}catch(g){}},_isFF:function(){return navigator.userAgent.toLowerCase().indexOf(&quot;firefox&quot;)&gt;-1}}});jQuery(function(a){$p.newModel({modelId:&quot;NA&quot;,iLove:[{ext:&quot;NaN&quot;,type:&quot;none/none&quot;,platform:&quot;browser&quot;}],hasGUI:true,applyMedia:function(c){var b=this;c.html(&quot;&quot;);this.mouseClick=function(d){b.pp.removeListener(&quot;mousedown&quot;,arguments.callee);b._setState(&quot;completed&quot;)};this.displayReady();if(this.pp.getConfig(&quot;enableTestcard&quot;)&amp;&amp;!this.pp.getIsMobileClient()){this.setTestcard((this.media.file[0].src!=null&amp;&amp;this.media.errorCode===7)?5:this.media.errorCode);this.pp.addListener(&quot;mousedown&quot;,mouseClick)}else{this.applyCommand(&quot;stop&quot;);window.location.href=this.media.file[0].src}},detachMedia:function(){this.pp.removeListener(&quot;leftclick&quot;,this.mouseClick)}})});jQuery(function(a){$p.newModel({modelId:&quot;PLAYLIST&quot;,iLove:[{ext:&quot;json&quot;,type:&quot;text/json&quot;,platform:&quot;browser&quot;},{ext:&quot;jsonp&quot;,type:&quot;text/jsonp&quot;,platform:&quot;browser&quot;},{ext:&quot;xml&quot;,type:&quot;text/xml&quot;,platform:&quot;browser&quot;},{ext:&quot;json&quot;,type:&quot;application/json&quot;,platform:&quot;browser&quot;},{ext:&quot;jsonp&quot;,type:&quot;application/jsonp&quot;,platform:&quot;browser&quot;},{ext:&quot;xml&quot;,type:&quot;application/xml&quot;,platform:&quot;browser&quot;}],applyMedia:function(b){this.displayReady()},setPlay:function(){this.sendUpdate(&quot;playlist&quot;,this.media)}})});var projekktorDisplay=function(){};jQuery(function(a){projekktorDisplay.prototype={version:&quot;1.1.00&quot;,logo:null,logoIsFading:false,display:null,displayClicks:0,buffIcn:null,buffIcnSprite:null,bufferDelayTimer:null,_controlsDims:null,config:{displayClick:{callback:&quot;setPlayPause&quot;,value:null},displayPlayingClick:{callback:&quot;setPlayPause&quot;,value:null},displayDblClick:{callback:null,value:null},staticControls:false,bufferIconDelay:1000,spriteUrl:&quot;&quot;,spriteWidth:50,spriteHeight:50,spriteTiles:25,spriteOffset:1,spriteCountUp:false},initialize:function(){this.display=this.applyToPlayer(a(&quot;&lt;div/&gt;&quot;));this.startButton=this.applyToPlayer(a(&quot;&lt;div/&gt;&quot;).addClass(&quot;start&quot;),&quot;startbtn&quot;);this.buffIcn=this.applyToPlayer(a(&quot;&lt;div/&gt;&quot;).addClass(&quot;buffering&quot;),&quot;buffericn&quot;);this.imaContainer=this.applyToPlayer(a(&quot;&lt;div/&gt;&quot;).addClass(&quot;ima&quot;),&quot;ima&quot;);this.setActive();if(this.config.spriteUrl!==&quot;&quot;){this.buffIcnSprite=a(&quot;&lt;div/&gt;&quot;).appendTo(this.buffIcn).css({width:this.config.spriteWidth,height:this.config.spriteHeight,marginLeft:((this.buffIcn.width()-this.config.spriteWidth)/2)+&quot;px&quot;,marginTop:((this.buffIcn.height()-this.config.spriteHeight)/2)+&quot;px&quot;,backgroundColor:&quot;transparent&quot;,backgroundImage:&quot;url(&quot;+this.config.spriteUrl+&quot;)&quot;,backgroundRepeat:&quot;no-repeat&quot;,backgroundPosition:&quot;0 0&quot;}).addClass(&quot;inactive&quot;)}this.pp.getMediaContainer();this.pluginReady=true},displayReadyHandler:function(){var b=this;this.startButton.unbind().click(function(){b.pp.setPlay()});this.hideStartButton()},syncingHandler:function(){this.showBufferIcon();if(this.pp.getState(&quot;IDLE&quot;)){this.hideStartButton()}},readyHandler:function(){this.hideBufferIcon();if(this.pp.getState(&quot;IDLE&quot;)){this.showStartButton()}},bufferHandler:function(b){if(!this.pp.getState(&quot;PLAYING&quot;)&amp;&amp;!this.pp.getState(&quot;AWAKENING&quot;)){return}if(b==&quot;EMPTY&quot;){this.showBufferIcon()}else{this.hideBufferIcon()}},stateHandler:function(b){switch(b){case&quot;IDLE&quot;:clearTimeout(this._cursorTimer);this.display.css(&quot;cursor&quot;,&quot;pointer&quot;);break;case&quot;STARTING&quot;:this.showBufferIcon();this.hideStartButton();break;case&quot;PLAYING&quot;:this.hideBufferIcon();this.hideStartButton();break;case&quot;IDLE&quot;:this.showStartButton();break;case&quot;AWAKENING&quot;:this.hideStartButton();break;case&quot;COMPLETED&quot;:this.hideBufferIcon();break;default:this.hideStartButton()}},errorHandler:function(){this.hideBufferIcon();this.hideStartButton()},startHandler:function(){this.mousemoveHandler()},stoppedHandler:function(){this.hideBufferIcon()},scheduleLoadingHandler:function(){this.hideStartButton();this.showBufferIcon()},scheduledHandler:function(){if(!this.getConfig(&quot;autoplay&quot;)){this.showStartButton()}this.hideBufferIcon()},plugineventHandler:function(c){if(c.PLUGIN==&quot;controlbar&quot;&amp;&amp;c.EVENT==&quot;show&quot;&amp;&amp;this.getConfig(&quot;staticControls&quot;)){var b=c.height*100/this.pp.getDC().height();this.display.height((100-b)+&quot;%&quot;).data(&quot;sc&quot;,true)}},qualityChangeHandler:function(){this.hideBufferIcon()},mousemoveHandler:function(b){var c=this.display;if(this.pp.getState(&quot;IDLE&quot;)){c.css(&quot;cursor&quot;,&quot;pointer&quot;);return}c.css(&quot;cursor&quot;,&quot;auto&quot;);clearTimeout(this._cursorTimer);if(&quot;AWAKENING|ERROR|PAUSED&quot;.indexOf(this.pp.getState())==-1){this._cursorTimer=setTimeout(function(){c.css(&quot;cursor&quot;,&quot;none&quot;)},3000)}},mousedownHandler:function(b){var c=this;if((a(b.target).attr(&quot;id&quot;)||&quot;&quot;).indexOf(&quot;_media&quot;)==-1){return}clearTimeout(this._cursorTimer);this.display.css(&quot;cursor&quot;,&quot;auto&quot;);if(b.which!=1){return}switch(this.pp.getState()){case&quot;ERROR&quot;:this.pp.setConfig({disallowSkip:false});this.pp.setActiveItem(&quot;next&quot;);return;case&quot;IDLE&quot;:this.pp.setPlay();return}if(this.pp.getHasGUI()===true){return}this.displayClicks++;this.pp._promote(&quot;displayClick&quot;);if(this.displayClicks&gt;0){setTimeout(function(){if(c.displayClicks==1){if(c.pp.getState()==&quot;PLAYING&quot;){c.clickHandler(&quot;displayPlaying&quot;)}else{c.clickHandler(&quot;display&quot;)}}else{if(c.displayClicks==2){c.clickHandler(&quot;displayDbl&quot;)}}c.displayClicks=0},250)}return},showStartButton:function(){this.startButton.addClass(&quot;active&quot;).removeClass(&quot;inactive&quot;)},hideStartButton:function(){this.startButton.addClass(&quot;inactive&quot;).removeClass(&quot;active&quot;)},hideBufferIcon:function(){clearTimeout(this.bufferDelayTimer);this.buffIcn.addClass(&quot;inactive&quot;).removeClass(&quot;active&quot;)},showBufferIcon:function(c){var e=this;clearTimeout(this.bufferDelayTimer);if(this.pp.getHasGUI()){return}if((this.pp.getModel()===&quot;YTAUDIO&quot;||this.pp.getModel()===&quot;YTVIDEO&quot;)&amp;&amp;!this.pp.getState(&quot;IDLE&quot;)){c=true}if(c!==true&amp;&amp;this.getConfig(&quot;bufferIconDelay&quot;)&gt;0){this.bufferDelayTimer=setTimeout(function(){e.showBufferIcon(true)},this.getConfig(&quot;bufferIconDelay&quot;));return}if(this.buffIcn.hasClass(&quot;active&quot;)){return}this.buffIcn.addClass(&quot;active&quot;).removeClass(&quot;inactive&quot;);if(e.buffIcnSprite==null){return}var b=(e.config.spriteCountUp===true)?0:(e.config.spriteHeight+e.config.spriteOffset)*(e.config.spriteTiles-1),d=b;e.buffIcnSprite.addClass(&quot;active&quot;).removeClass(&quot;inactive&quot;);(function(){if(!e.buffIcn.is(&quot;:visible&quot;)){return}e.buffIcnSprite.css(&quot;backgroundPosition&quot;,&quot;0px -&quot;+d+&quot;px&quot;);if(e.config.spriteCountUp===true){d+=e.config.spriteHeight+e.config.spriteOffset}else{d-=e.config.spriteHeight+e.config.spriteOffset
}if(d&gt;(b+e.config.spriteHeight)*e.config.spriteTiles||d&lt;e.config.spriteOffset){d=b}setTimeout(arguments.callee,60)})()}}});var projekktorControlbar=function(){};jQuery(function(a){projekktorControlbar.prototype={version:&quot;1.1.00&quot;,_cTimer:null,_noHide:false,_vSliderAct:false,cb:null,controlElements:{},controlElementsConfig:{sec_dur:null,min_dur:null,sec_abs_dur:null,min_abs_dur:null,hr_dur:null,sec_elp:null,min_elp:null,sec_abs_elp:null,min_abs_elp:null,hr_elp:null,sec_rem:null,min_rem:null,sec_abs_rem:null,min_abs_rem:null,hr_rem:null,sec_tip:null,min_tip:null,sec_abs_tip:null,min_abs_tip:null,hr_tip:null,cb:null,playhead:{on:null,call:null},loaded:null,scrubber:null,scrubbertip:null,scrubberknob:null,scrubberdrag:[{on:[&quot;mouseenter&quot;],call:&quot;scrubberShowTooltip&quot;},{on:[&quot;mouseout&quot;],call:&quot;scrubberHideTooltip&quot;},{on:[&quot;mousemove&quot;],call:&quot;scrubberdragTooltip&quot;},{on:[&quot;mousedown&quot;],call:&quot;scrubberdragStartDragListener&quot;}],play:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;playClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],pause:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;pauseClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],stop:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;stopClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],prev:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;prevClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],next:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;nextClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],rewind:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;rewindClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],forward:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;forwardClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],fsexit:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;exitFullscreenClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],fsenter:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;enterFullscreenClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],loquality:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;setQualityClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],hiquality:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;setQualityClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],vslider:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;vsliderClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],vmarker:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;vsliderClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],vknob:{on:[&quot;mousedown&quot;],call:&quot;vknobStartDragListener&quot;},volumePanel:[{on:[&quot;mousemove&quot;],call:&quot;volumeBtnHover&quot;},{on:[&quot;mouseout&quot;],call:&quot;volumeBtnOut&quot;}],volume:null,mute:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;muteClk&quot;},{on:[&quot;mouseout&quot;],call:&quot;volumeBtnOut&quot;},{on:[&quot;mousemove&quot;],call:&quot;volumeBtnHover&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],unmute:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;unmuteClk&quot;},{on:[&quot;mouseout&quot;],call:&quot;volumeBtnOut&quot;},{on:[&quot;mousemove&quot;],call:&quot;volumeBtnHover&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],vmax:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;vmaxClk&quot;},{on:[&quot;mouseout&quot;],call:&quot;volumeBtnOut&quot;},{on:[&quot;mousemove&quot;],call:&quot;volumeBtnHover&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],open:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;openCloseClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],close:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;openCloseClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],loop:[{on:[&quot;touchstart&quot;,&quot;click&quot;],call:&quot;loopClk&quot;},{on:[&quot;touchend&quot;],call:&quot;touchEnd&quot;}],draghandle:{on:[&quot;mousedown&quot;],call:&quot;handleStartDragListener&quot;},controls:null,title:null},config:{toggleMute:false,showCuePoints:false,fadeDelay:2500,showOnStart:false,showOnIdle:false,controlsTemplate:'<UL class="right"><LI><DIV>%{hr_elp}:%{min_elp}:%{sec_elp} |Â %{hr_dur}:%{min_dur}:%{sec_dur}</DIV></LI></UL><DIV>%{hr_tip}:%{min_tip}:%{sec_tip}</DIV>'},initialize:function(){var f=this,e=this.playerDom.html(),c=true,b=this.pp.getNS();for(var d in this.controlElementsConfig){if(e.match(new RegExp(b+d,&quot;gi&quot;))){c=false;break}}if(c){this.cb=this.applyToPlayer(a((&quot;&lt;div/&gt;&quot;)).addClass(&quot;controls&quot;));this.applyTemplate(this.cb,this.getConfig(&quot;controlsTemplate&quot;))}else{this.cb=this.playerDom.find(&quot;.&quot;+b+&quot;controls&quot;)}for(var d in this.controlElementsConfig){this.controlElements[d]=a(this.playerDom).find(&quot;.&quot;+b+d);$p.utils.blockSelection(a(this.controlElements[d]))}this.addGuiListeners();this.hidecb(true);this.pluginReady=true},applyTemplate:function(c,f){var d=this,b=this.pp.getNS();if(f){var e=f.match(/\%{[a-zA-Z_]*\}/gi);if(e!=null){a.each(e,function(g,h){var i=h.replace(/\%{|}/gi,&quot;&quot;);if(h.match(/\_/gi)){f=f.replace(h,'')}else{f=f.replace(h,'class=&quot;'+b+i+'&quot;')}})}c.html(f)}},updateDisplay:function(){var b=this,c=this.pp.getState();if(this.pp.getHasGUI()){return}if(this.getConfig(&quot;controls&quot;)==false){this.hidecb(true);return}if(this.pp.getItemCount()&lt;2||this.getConfig(&quot;disallowSkip&quot;)){this._active(&quot;prev&quot;,false);this._active(&quot;next&quot;,false)}else{this._active(&quot;prev&quot;,true);this._active(&quot;next&quot;,true)}if(this.pp.getItemIdx()&lt;1){this._active(&quot;prev&quot;,false)
<P>}if(this.pp.getItemIdx()&gt;=this.pp.getItemCount()-1){this._active(&quot;next&quot;,false)}if(this.getConfig(&quot;disablePause&quot;)){this._active(&quot;play&quot;,false);this._active(&quot;pause&quot;,false)}else{if(c===&quot;PLAYING&quot;){this.drawPauseButton()}if(c===&quot;PAUSED&quot;){this.drawPlayButton()}if(c===&quot;IDLE&quot;){this.drawPlayButton()}}this._active(&quot;stop&quot;,c!==&quot;IDLE&quot;);this._active(&quot;forward&quot;,c!==&quot;IDLE&quot;);this._active(&quot;rewind&quot;,c!==&quot;IDLE&quot;);if(this.pp.getInFullscreen()===true){this.drawExitFullscreenButton()}else{this.drawEnterFullscreenButton()}if(!this.getConfig(&quot;enableFullscreen&quot;)){this._active(&quot;fsexit&quot;,false);this._active(&quot;fsenter&quot;,false)}this._active(&quot;loop&quot;,this.pp.getConfig(&quot;loop&quot;));this.displayQualityToggle();this.displayTime();this.displayVolume(this._getVolume())},addGuiListeners:function(){var b=this;a.each(this.controlElementsConfig,function(c,e){if(e==null){return true}if(!(e instanceof Array)){e=[e]}for(var d=0;d&lt;e.length;d++){if(e[d].on==null){continue}a.each(e[d].on,function(i,f){var g=(&quot;on&quot;+f in window.document),j=e[d].call;if(!g){var h=document.createElement(&quot;div&quot;);h.setAttribute(&quot;on&quot;+f,&quot;return;&quot;);g=(typeof h[&quot;on&quot;+f]==&quot;function&quot;)}if(g){b.controlElements[c].bind(f,function(k){b.clickCatcher(k,j,b.controlElements[c])})}})}return true});this.cb.mousemove(function(c){b.controlsFocus(c)});this.cb.mouseout(function(c){b.controlsBlur(c)})},clickCatcher:function(b,e,c){var d=this;b.stopPropagation();b.preventDefault();this[e](b,c);return false},touchEnd:function(){var b=this;this._cTimer=setTimeout(function(){b.hidecb()},this.getConfig(&quot;fadeDelay&quot;));this._noHide=false},drawTitle:function(){this.controlElements.title.html(this.getConfig(&quot;title&quot;,&quot;&quot;))},hidecb:function(b){clearTimeout(this._cTimer);if(this.cb==null){return}if(this.getConfig(&quot;controls&quot;)==false){this.cb.removeClass(&quot;active&quot;).addClass(&quot;inactive&quot;);return}if(this.getConfig(&quot;showOnIdle&quot;)&amp;&amp;this.pp.getState(&quot;IDLE&quot;)){return}if(b){this._noHide=false}if(this._noHide||this.cb.hasClass(&quot;inactive&quot;)){return}this.cb.removeClass(&quot;active&quot;).addClass(&quot;inactive&quot;);this.sendEvent(&quot;hide&quot;,this.cb)},showcb:function(c){var b=this;clearTimeout(this._cTimer);if(this.pp.getHasGUI()||this.getConfig(&quot;controls&quot;)==false){this.cb.removeClass(&quot;active&quot;).addClass(&quot;inactive&quot;);return}if(this.cb==null){return}if(&quot;IDLE|AWAKENING|ERROR&quot;.indexOf(this.pp.getState())&gt;-1&amp;&amp;c!=true){return}if(this.cb.hasClass(&quot;active&quot;)&amp;&amp;c!==false){this._cTimer=setTimeout(function(){b.hidecb()},this.getConfig(&quot;fadeDelay&quot;));return}this.cb.removeClass(&quot;inactive&quot;).addClass(&quot;active&quot;);this.sendEvent(&quot;show&quot;,this.cb);this._cTimer=setTimeout(function(){b.hidecb()},this.getConfig(&quot;fadeDelay&quot;))},displayTime:function(f,d,i){if(this.pp.getHasGUI()){return}var e=Math.round((f||this.pp.getLoadPlaybackProgress()||0)*10)/10,g=d||this.pp.getDuration()||0,b=i||this.pp.getPosition()||0,h=a.extend({},this._clockDigits(g,&quot;dur&quot;),this._clockDigits(b,&quot;elp&quot;),this._clockDigits(g-b,&quot;rem&quot;));if(this.controlElements.playhead.data(&quot;pct&quot;)!=e){this.controlElements.playhead.data(&quot;pct&quot;,e).css({width:e+&quot;%&quot;});this.controlElements.scrubberknob.css({left:e+&quot;%&quot;});for(var c in this.controlElements){if(c==&quot;cb&quot;){break}if(h[c]){a.each(this.controlElements[c],function(){a(this).html(h[c])})}}}},displayProgress:function(){var b=Math.round(this.pp.getLoadProgress()*10)/10;if(this.controlElements.loaded.data(&quot;pct&quot;)!=b){this.controlElements.loaded.data(&quot;pct&quot;,b).css(&quot;width&quot;,b+&quot;%&quot;)}},displayVolume:function(h){var g=this;if(this._vSliderAct==true){return}if(h==null){return}var b=this.cb.hasClass(&quot;active&quot;),g=this,f=this.getConfig(&quot;fixedVolume&quot;),e=(this.controlElements.mute.hasClass(&quot;toggle&quot;)||this.controlElements.unmute.hasClass(&quot;toggle&quot;)||this.getConfig(&quot;toggleMute&quot;));this._active(&quot;mute&quot;,!f);this._active(&quot;unmute&quot;,!f);this._active(&quot;vmax&quot;,!f);this._active(&quot;vknob&quot;,!f);this._active(&quot;vmarker&quot;,!f);this._active(&quot;vslider&quot;,!f);if(f){return}if(this.controlElements.vslider.width()&gt;this.controlElements.vslider.height()){this.controlElements.vmarker.css(&quot;width&quot;,h*100+&quot;%&quot;);this.controlElements.vknob.css(&quot;left&quot;,h*100+&quot;%&quot;)}else{this.controlElements.vmarker.css(&quot;height&quot;,h*100+&quot;%&quot;);this.controlElements.vknob.css(&quot;bottom&quot;,h*100+&quot;%&quot;)}var c=this.controlElements.volume.find(&quot;li&quot;),j=c.length-Math.ceil((h*100)/c.length);for(var d=0;d&lt;=c.length;d++){if(d&gt;=j){a(c[d]).addClass(&quot;active&quot;)}else{a(c[d]).removeClass(&quot;active&quot;)}}if(e){switch(parseFloat(h)){case 0:this._active(&quot;mute&quot;,false);this._active(&quot;unmute&quot;,true);this._active(&quot;vmax&quot;,true);break;default:this._active(&quot;mute&quot;,true);this._active(&quot;unmute&quot;,false);this._active(&quot;vmax&quot;,false);break}}if(b){this.cb.fadeTo(1,0.99).fadeTo(1,1,function(){g.cb.removeAttr(&quot;style&quot;)})}},displayCuePoints:function(d){var b=this,c=this.pp.getNS();if(!this.getConfig(&quot;showCuePoints&quot;)){return}b.controlElements.scrubber.remove(&quot;.&quot;+c+&quot;cuepoint&quot;);a.each(this.pp.getCuePoints()||[],function(){var e=Math.max(100/d,Math.round(d/100),1),h=(this.on*100/d)-((e/2)*100/d),g=this,f=b.pp,i=a(document.createElement(&quot;div&quot;)).addClass(c+&quot;cuepoint&quot;).addClass(&quot;inactive&quot;).css(&quot;left&quot;,h+&quot;%&quot;).css(&quot;width&quot;,e+&quot;%&quot;).data(&quot;on&quot;,this.on);if(this.title!=&quot;&quot;){i.attr(&quot;title&quot;,this.title)
}this.addListener(&quot;unlock&quot;,function(){a(i).removeClass(&quot;inactive&quot;).addClass(&quot;active&quot;);i.click(function(){b.pp.setPlayhead(i.data(&quot;on&quot;))})});b.controlElements.scrubber.append(i)})},drawPauseButton:function(b){this._active(&quot;pause&quot;,true);this._active(&quot;play&quot;,false)},drawPlayButton:function(b){this._active(&quot;pause&quot;,false);this._active(&quot;play&quot;,true)},drawEnterFullscreenButton:function(b){this._active(&quot;fsexit&quot;,false);this._active(&quot;fsenter&quot;,true)},drawExitFullscreenButton:function(b){this._active(&quot;fsexit&quot;,true);this._active(&quot;fsenter&quot;,false)},displayQualityToggle:function(d){var f=this.getConfig(&quot;playbackQualities&quot;),e=this.pp.getPlaybackQualities(),b=this.pp.getNS();best=[];if(e.length&lt;2||f.length&lt;2){this.controlElements.loquality.removeClass().addClass(&quot;inactive&quot;).addClass(b+&quot;loquality&quot;).data(&quot;qual&quot;,&quot;&quot;);this.controlElements.hiquality.removeClass().addClass(&quot;inactive&quot;).addClass(b+&quot;hiquality&quot;).data(&quot;qual&quot;,&quot;&quot;);return}f.sort(function(h,g){return h.minHeight-g.minHeight});for(var c=f.length;c--;c&gt;0){if(a.inArray(f[c].key,e)&gt;-1){best.push(f[c].key)}if(best.length&gt;1){break}}this.cb.addClass(&quot;qualities&quot;);if(best[0]==this.pp.getPlaybackQuality()){this._active(&quot;loquality&quot;,true).addClass(&quot;qual&quot;+best[1]).data(&quot;qual&quot;,best[1]);this._active(&quot;hiquality&quot;,false).addClass(&quot;qual&quot;+best[0]).data(&quot;qual&quot;,best[0])}else{this._active(&quot;loquality&quot;,false).addClass(&quot;qual&quot;+best[1]).data(&quot;qual&quot;,best[1]);this._active(&quot;hiquality&quot;,true).addClass(&quot;qual&quot;+best[0]).data(&quot;qual&quot;,best[0])}},itemHandler:function(b){a(this.cb).find(&quot;.&quot;+this.pp.getNS()+&quot;cuepoint&quot;).remove();this.pp.setVolume(this._getVolume());this.updateDisplay();this.hidecb(true);this.drawTitle();this.displayQualityToggle();this.pluginReady=true},startHandler:function(){this.pp.setVolume(this._getVolume());if(this.getConfig(&quot;showOnStart&quot;)==true){this.showcb(true)}else{this.hidecb(true)}},readyHandler:function(b){clearTimeout(this._cTimer);if(this.getConfig(&quot;showOnIdle&quot;)){this.showcb(true);this.cb.removeClass(&quot;inactive&quot;).addClass(&quot;active&quot;).show()}this.pluginReady=true},stateHandler:function(b){this.updateDisplay();if(&quot;STOPPED|AWAKENING|IDLE|DONE&quot;.indexOf(b)&gt;-1){this.displayTime(0,0,0);this.displayProgress(0);if(this.pp.getIsMobileClient()){this.hidecb(true)}}if(&quot;STOPPED|DONE|IDLE&quot;.indexOf(b)&gt;-1){this.hidecb(true);return}if(&quot;ERROR&quot;.indexOf(b)&gt;-1){this._noHide=false;this.hidecb(true)}this.displayProgress()},scheduleModifiedHandler:function(){if(this.pp.getState()===&quot;IDLE&quot;){return}this.updateDisplay();this.displayTime();this.displayProgress()},volumeHandler:function(b){if(b&gt;0){this.cookie(&quot;muted&quot;,false)}if(!this.cookie(&quot;muted&quot;)){this.cookie(&quot;volume&quot;,b)}this.displayVolume(this._getVolume())},progressHandler:function(b){this.displayProgress()},timeHandler:function(b){this.displayTime();this.displayProgress()},qualityChangeHandler:function(b){this.displayQualityToggle(b)},fullscreenHandler:function(d){var c=this,b=this.pp.getNS();clearTimeout(this._cTimer);this._noHide=false;this._vSliderAct=false;if(!this.getConfig(&quot;controls&quot;)){return}if(!this.getConfig(&quot;enableFullscreen&quot;)){return}if(d){this.cb.addClass(&quot;fullscreen&quot;);this.drawExitFullscreenButton()}else{this.cb.removeClass(&quot;fullscreen&quot;);this.drawEnterFullscreenButton()}if(this.pp.getState()==&quot;IDLE&quot;&amp;&amp;!this.getConfig(&quot;showOnIdle&quot;)){this.hidecb(true)}},durationChangeHandler:function(b){this.displayCuePoints(b)},errorHandler:function(b){this.hidecb(true)},leftclickHandler:function(){this.mouseleaveHandler()},focusHandler:function(b){this.showcb()},mouseenterHandler:function(b){this.showcb()},mousemoveHandler:function(b){if(this.pp.getState(&quot;STARTING&quot;)){return}this.showcb()},mouseleaveHandler:function(){},mousedownHandler:function(b){this.showcb()},controlsFocus:function(b){this._noHide=true},controlsBlur:function(b){this._noHide=false},setQualityClk:function(b){this.pp.setPlaybackQuality(a(b.currentTarget).data(&quot;qual&quot;))},playClk:function(b){this.pp.setPlay()},pauseClk:function(b){this.pp.setPause()},stopClk:function(b){this.pp.setStop()},startClk:function(b){this.pp.setPlay()},controlsClk:function(b){},prevClk:function(b){this.pp.setActiveItem(&quot;previous&quot;)},nextClk:function(b){this.pp.setActiveItem(&quot;next&quot;)},forwardClk:function(b){this.pp.setPlayhead(&quot;+10&quot;)},rewindClk:function(b){this.pp.setPlayhead(&quot;-10&quot;)},muteClk:function(b){this.cookie(&quot;muted&quot;,true);this.pp.setVolume(0)},unmuteClk:function(b){this.cookie(&quot;muted&quot;,false);this.pp.setVolume(this._getVolume())},vmaxClk:function(b){this.cookie(&quot;muted&quot;,false);this.pp.setVolume(1)},enterFullscreenClk:function(b){this.pp.setFullscreen(true)},exitFullscreenClk:function(b){this.pp.setFullscreen(false)},loopClk:function(b){this.pp.setLoop(a(b.currentTarget).hasClass(&quot;inactive&quot;)||false);this.updateDisplay()},vmarkerClk:function(b){vsliderClk(b)},openCloseClk:function(b){var c=this;a(a(b.currentTarget).attr(&quot;class&quot;).split(/\s+/)).each(function(d,e){if(e.indexOf(&quot;toggle&quot;)==-1){return}c.playerDom.find(&quot;.&quot;+e.substring(6)).slideToggle(&quot;slow&quot;,function(){c.pp.setSize()});c.controlElements.open.toggle();c.controlElements.close.toggle()
</P>
})},volumeBtnHover:function(b){clearTimeout(this._outDelay);this.setActive(this.controlElements.volumePanel,true)},volumeBtnOut:function(b,d){var c=this;if(b.currentTarget!=d.get(0)){return}if(b.relatedTarget==d.get(0)){return}this._outDelay=setTimeout(function(){c.setActive(c.controlElements.volumePanel,false)},100)},vsliderClk:function(d){if(this._vSliderAct==true){return}var h=a(this.controlElements.vslider),e=h.width()&gt;h.height()?&quot;hor&quot;:&quot;vert&quot;,c=(e==&quot;hor&quot;)?h.width():h.height(),g=(d.originalEvent.touches)?d.originalEvent.touches[0].pageX:d.pageX,f=(d.originalEvent.touches)?d.originalEvent.touches[0].pageY:d.pageY,i=(e==&quot;hor&quot;)?g-h.offset().left:f-h.offset().top,b=0;if(i&lt;0||isNaN(i)||i==undefined){b=0}else{b=(e==&quot;hor&quot;)?(i/c):1-(i/c)}this.pp.setVolume(b)},scrubberShowTooltip:function(b){if(this.pp.getDuration()==0){return}clearTimeout(this._cTimer);this.setActive(this.controlElements.scrubbertip,true)},scrubberHideTooltip:function(b){this.setActive(this.controlElements.scrubbertip,false)},scrubberdragTooltip:function(j){if(this.pp.getDuration()==0){return}this.setActive(this.controlElements.scrubbertip,true);var c=a(this.controlElements.scrubberdrag[0]),f=a(this.controlElements.loaded[0]),h=a(this.controlElements.scrubbertip),e=(j.originalEvent.touches)?j.originalEvent.touches[0].pageX:j.pageX,d=(j.originalEvent.touches)?j.originalEvent.touches[0].pageY:j.pageY,g=e-c.offset().left-(h.outerWidth()/2),b=this._clockDigits(this.pp.getDuration()/100*((e-c.offset().left)*100/c.width()),&quot;tip&quot;);for(var i in this.controlElements){if(i==&quot;cb&quot;){break}if(b[i]){a.each(this.controlElements[i],function(){a(this).html(b[i])})}}g=(g&lt;0)?0:g;g=(g&gt;c.width()-h.outerWidth())?c.width()-h.outerWidth():g;h.css({left:g+&quot;px&quot;})},scrubberdragStartDragListener:function(b){if(this.getConfig(&quot;disallowSkip&quot;)==true){return}this._sSliderAct=true;var e=this,c=a(this.controlElements.scrubberdrag[0]),f=a(this.controlElements.loaded[0]),d=0,j=Math.abs(parseInt(c.offset().left)-b.clientX),h=function(l){var k=Math.abs(c.offset().left-l.clientX);k=(k&gt;c.width())?c.width():k;k=(k&gt;f.width())?f.width():k;k=(k&lt;0)?0:k;k=Math.abs(k/c.width())*e.pp.getDuration();if(k&gt;0&amp;&amp;k!=d){d=k;e.pp.setPlayhead(d)}},g=function(k){k.stopPropagation();k.preventDefault();e.playerDom.unbind(&quot;mouseup.slider&quot;);c.unbind(&quot;mousemove&quot;,i);c.unbind(&quot;mouseup&quot;,g);e._sSliderAct=false;return false},i=function(k){clearTimeout(e._cTimer);k.stopPropagation();k.preventDefault();h(k);return false};this.playerDom.bind(&quot;mouseup.slider&quot;,g);c.mouseup(g);c.mousemove(i);h(b)},vknobStartDragListener:function(b,c){this._vSliderAct=true;var f=this,g=(this.pp.getInFullscreen()===true&amp;&amp;this.controlElements.vslider.length&gt;1)?1:0,e=a(c[g]),d=a(this.controlElements.vslider[g]),d=a(this.controlElements.vslider[g]),k=Math.abs(parseInt(e.position().left)-b.clientX),h=0,i=function(l){f.playerDom.unbind(&quot;mouseup&quot;,i);d.unbind(&quot;mousemove&quot;,j);d.unbind(&quot;mouseup&quot;,i);e.unbind(&quot;mousemove&quot;,j);e.unbind(&quot;mouseup&quot;,i);f._vSliderAct=false;return false},j=function(l){clearTimeout(f._cTimer);var m=(l.clientX-k);m=(m&gt;d.width()-e.width()/2)?d.width()-(e.width()/2):m;m=(m&lt;0)?0:m;e.css(&quot;left&quot;,m+&quot;px&quot;);h=Math.abs(m/(d.width()-(e.width()/2)));f.pp.setVolume(h);a(f.controlElements.vmarker[g]).css(&quot;width&quot;,h*100+&quot;%&quot;);return false};this.playerDom.mouseup(i);d.mousemove(j);d.mouseup(i);e.mousemove(j);e.mouseup(i)},handleStartDragListener:function(d,g){var h=this,f=Math.abs(parseInt(this.cb.position().left)-d.clientX),c=Math.abs(parseInt(this.cb.position().top)-d.clientY);var b=function(i){i.stopPropagation();i.preventDefault();h.playerDom.unbind(&quot;mouseup&quot;,b);h.playerDom.unbind(&quot;mouseout&quot;,b);h.playerDom.unbind(&quot;mousemove&quot;,e);return false};var e=function(i){i.stopPropagation();i.preventDefault();clearTimeout(h._cTimer);var k=(i.clientX-f);k=(k&gt;h.playerDom.width()-h.cb.width())?h.playerDom.width()-h.cb.width():k;k=(k&lt;0)?0:k;h.cb.css(&quot;left&quot;,k+&quot;px&quot;);var j=(i.clientY-c);j=(j&gt;h.playerDom.height()-h.cb.height())?h.playerDom.height()-h.cb.height():j;j=(j&lt;0)?0:j;h.cb.css(&quot;top&quot;,j+&quot;px&quot;);return false};this.playerDom.mousemove(e);this.playerDom.mouseup(b)},_getVolume:function(){var c=parseFloat(this.cookie(&quot;volume&quot;)||this.getConfig(&quot;volume&quot;)||0.5),b=this.cookie(&quot;muted&quot;)||false;if(this.getConfig(&quot;fixedVolume&quot;)||c==null){return this.getConfig(&quot;volume&quot;)}if(b){return 0}return c},_active:function(d,b){var c=this.controlElements[d];if(b==true){c.addClass(&quot;active&quot;).removeClass(&quot;inactive&quot;)}else{c.addClass(&quot;inactive&quot;).removeClass(&quot;active&quot;)}return c},_clockDigits:function(d,h){if(d&lt;0||isNaN(d)||d==undefined){d=0}var g=Math.floor(d/(60*60)),c=d%(60*60),b=Math.floor(c/60),k=g*60+b,i=c%60,e=Math.floor(i),f=d,j={};j[&quot;min_&quot;+h]=(b&lt;10)?&quot;0&quot;+b:b;j[&quot;min_abs_&quot;+h]=(k&lt;10)?&quot;0&quot;+k:k;j[&quot;sec_&quot;+h]=(e&lt;10)?&quot;0&quot;+e:e;j[&quot;sec_abs_&quot;+h]=(f&lt;10)?&quot;0&quot;+f:f;j[&quot;hr_&quot;+h]=(g&lt;10)?&quot;0&quot;+g:g;return j}}});var projekktorContextmenu=function(){};jQuery(function(a){projekktorContextmenu.prototype={version:&quot;1.1.00&quot;,reqVer:&quot;1.2.13&quot;,_dest:null,_items:{},initialize:function(){var b=this,c=this.pp.getIframeWindow()||a(window);this._dest=$p.utils.blockSelection(this.applyToPlayer(a(&quot;&lt;ul/&gt;&quot;)));this._items.player={getContextTitle:function(){return b.getConfig(&quot;playerName&quot;)+&quot; V&quot;+b.pp.getPlayerVer()},open:function(){if(b.getConfig(&quot;playerHome&quot;)!=null){c.get(0).location.href=b.getConfig(&quot;playerHome&quot;);b.pp.setPause()}}};if(this.pp.getConfig(&quot;helpHome&quot;)){this._items.help={getContextTitle:function(){return b.pp.getConfig(&quot;messages&quot;)[100]},open:function(){b.popup(b.pp.getConfig(&quot;helpHome&quot;),400,600)}}}this.pluginReady=true},mousedownHandler:function(b){switch(b.which){case 3:var c=this.pp.getDC().offset(),d=(b.pageY-c.top),g=(b.pageX-c.left);if(g+this._dest.width()&gt;this.pp.getDC().width()){g=this.pp.getDC().width()-this._dest.width()-2}if(d+this._dest.height()&gt;this.pp.getDC().height()){d=this.pp.getDC().height()-this._dest.height()-2}this.setActive();this._dest.css({top:d+&quot;px&quot;,left:g+&quot;px&quot;});break;case 1:try{this._items[a(b.target).data(&quot;plugin&quot;)].open()}catch(f){}default:this.setInactive()}},mouseleaveHandler:function(){this.setInactive()},eventHandler:function(b,c){if(b.indexOf(&quot;Contextmenu&quot;)&gt;-1){if(this._items[c.name]==null){this._items[c.name]=c}}},displayReadyHandler:function(){var d=this,c=null;this.setInactive();this._dest.html(&quot;&quot;);for(var b in this._items){c=a(&quot;&lt;span/&gt;&quot;).data(&quot;plugin&quot;,b).html(this._items[b].getContextTitle()||b);try{this._items[b].setContextEntry(c)}catch(f){}a(&quot;<LI>&quot;).append(c).data(&quot;plugin&quot;,b).appendTo(this._dest)}},popup:function(c,d,b){centeredY=window.screenY+(((window.outerHeight/2)-(b/2)));centeredX=window.screenX+(((window.outerWidth/2)-(d/2)));window.open(c,&quot;projekktor&quot;,&quot;height=&quot;+b+&quot;,width=&quot;+d+&quot;,toolbar=0,scrollbars=0,status=0,resizable=1,location=0,menuBar=0,left=&quot;+centeredX+&quot;,top=&quot;+centeredY).focus()}}});

<DIV class="printfooter">
Retrieved from &quot;<A href="http://2014.igem.org/Team:ETH_Zurich/Templates/Projekktor-JS">http://2014.igem.org/Team:ETH_Zurich/Templates/Projekktor-JS</A>&quot;</DIV></LI></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:ETH_Zurich/Templates/Projekktor-JS" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:ETH_Zurich/Templates/Projekktor-JS" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:ETH_Zurich/Templates/Projekktor-JS&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:ETH_Zurich/Templates/Projekktor-JS&amp;oldid=104988" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2014.igem.org:Privacy_policy" title="2014.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2014.igem.org:General_disclaimer" title="2014.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>