<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_UMaryland_Design skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:UMaryland/Design</SPAN></H1></DIV></DIV><DIV id="topkek"><DIV id="swagmenu"><UL><LI class="has-sub"><A href="https://2015.igem.org/Team:UMaryland/about"><SPAN>Information</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/about"><SPAN>About</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Team"><SPAN>Our Team</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Attributions"><SPAN>Acknowled- gements</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/fundraising"><SPAN>Fundraising</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/After"><SPAN>2015 Jamboree</SPAN></A></LI></UL><LI class="has-sub"><A href="https://2015.igem.org/Team:UMaryland/Description"><SPAN>Project</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Description"><SPAN>Description</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/HokSok"><SPAN>Hok/Sok</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Design"><SPAN>PCR Design</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Results"><SPAN>Results</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/sideprojects"><SPAN>Side Projects</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Interlab"><SPAN>Interlab Study
</SPAN></A></LI><LI class="has-sub"><A href="https://2015.igem.org/Team:UMaryland/Part_Collection"><SPAN>Parts</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Part_Collection"><SPAN>All Parts</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Basic_Part"><SPAN>Basic Parts</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Composite_Part"><SPAN>Composite Parts</SPAN></A></LI><LI class="has-sub"><A href="https://2015.igem.org/Team:UMaryland/Practices"><SPAN>Outreach</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Practices"><SPAN>Human Practices</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Collaborations"><SPAN>Regional Meetup</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Survey"><SPAN>Survey</SPAN></A></LI><LI class="has-sub"><A href="https://2015.igem.org/Team:UMaryland/Notebook"><SPAN>Notebook</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Notebook"><SPAN>Journal</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/protocols"><SPAN>Protocols</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:UMaryland/Safety"><SPAN>Safety</SPAN></A></LI><LI class="has-sub"><A href="https://2015.igem.org/Main_Page"><SPAN>
iGEM Main
</SPAN></A><UL><DIV id="cover"><DIV id="bar"><P style="font-size:64px"><B>UMD DIY PCR</B></P><P style="text-align:center;font-size:24;"><I> How we created a dual purpose PCR machine and incubator out of a hair dryer.</I></P></DIV></DIV><DIV id="suchdangermuchhazard" style="margin:auto;"><P style="font-size:18px;">Construction Hazard. Jumping hairdryer safety measures will cause rapid heating of the machine, without proper control the machine may cause fires. Proceed with caution. </P></DIV><DIV id="layer2"><DIV id="contentbox"><P style="text-align:center;font-size:32px;font-family: Tahoma, Geneva, sans-serif;"><B>Background</B></P><DIV id="showwithbox_id" onclick="document.getElementById('spoilerwithbox_id').style.display=''; document.getElementById('showwithbox_id').style.display='none';" style="margin:auto;padding:5px;width:100%;"><P style="text-align:center;">Click to show
</P></DIV><DIV id="spoilerwithbox_id" onclick="document.getElementById('spoilerwithbox_id').style.display='none'; document.getElementById('showwithbox_id').style.display='';" style="margin:auto;padding:5px;display:none;width:100%;"><P> The PCR machine is a quintessential component of any biological laboratory that needs to amplify or extend fragments of DNA for subsequent experiments. This tool is especially relevant to iGEM and SynBio labs who pave the way to vaster applications of genetic engineering.

</P><P>Our initial prototype for a DIY PCR machine was modeled in the fashion of most readily available commercial machines, relying on on two Peltier units stacked on top of each other to heat a customized aluminum block in which PCR tubes would sit. In order for the system to be informed by accurate feedback on temperature fluctuations, we embedded a temperature sensor in the aluminum block. The sensor reported the temperature to an Arduino UNO, which responded by regulating the energy flow to the Peltier units, thereby controlling the temperature of the block and tubes. 

</P><P>However, after substantial testing, this design proved to be unoriginal, expensive, and inefficient. We were troubled to realize that the parts used to assemble it were not as easily accessible as we had hoped, which we felt would take away from the possible applications of this machine as well as the philosophy of its construction. In addition, although the price of this first prototype was relatively inexpensive compared to laboratory-grade PCR machines, the price still exceeded our goal, ultimately costing several hundred dollars. Finally, the final straw that led to our eventual redesign was the inefficiency of the hardware: we found that the Peltier units were not able to quickly cycle through the desired temperatures, causing the unit to take 5 to 10 minutes just to rise up to 95â„ƒ, where denaturation must occur between each of the 25 or so cycles. After considering this combination of factors, we embarked on a redesign of our machine to better suit the needs of the DIY market.</P><P> To combat the unacceptably slow temperature ramp rate, we made a decision to suspend construction on the Peltier-centered thermocycler in order to attempt making a rapid PCR machine out of a hair dryer. Before committing to this effort, we considered the danger of working with a hair dryer and the potential for failure: we were uncertain that the machine could be effectively controlled and had a narrow window of time within which to design and trouble shoot the machine. Nevertheless, we took the risk.<I>Please continue on to see the design of our machine.</I></P><P style="text-align:center;">Click to hide
</P></DIV></DIV></DIV><DIV id="layer1"><DIV id="contentbox"><P style="text-align:center;font-size:32px;font-family: Tahoma, Geneva, sans-serif;"><B>Design</B></P><DIV id="showwithbox_id1" onclick="document.getElementById('spoilerwithbox_id1').style.display=''; document.getElementById('showwithbox_id1').style.display='none';" style="margin:auto;padding:5px;width:100%;"><P style="text-align:center;">Click to show
</P></DIV><DIV id="spoilerwithbox_id1" onclick="document.getElementById('spoilerwithbox_id1').style.display='none'; document.getElementById('showwithbox_id1').style.display='';" style="margin:auto;padding:5px;display:none;width:100%;"><P> We began by working out how to wire the hairdryer so that we could regulate the heating unit and the fan separately. 
</P><P>After significant soldering and reworking the internal safety measures inside the hairdryer, we were able to wire the system so that we could turn the heat on and off while running the fan continuously. Using tape, we secured a sheet of aluminium foil to the top of the heating unit of the hairdryer. The outer casing of the hairdryer had been removed. We placed a heat sensor inside the tin to measure the temperature of the air inside the machine.  By wiring the heat sensor to the Arduino, we were able to receive input/feedback from the sensor and adjust the heating of the device to maintain our desired setpoints and produce proper thermocycling.
</P><P>At this point, we tried to perform our first PCR reaction. Unfortunately, we soon found that we had melted our tube. We learned that the machine had difficulty with evenly distributing the heat. To better distribute the heat, we removed our tinfoil lid and replaced it with with a cut soda can. This can was designed with evenly spaced holes enabling for better heat distribution. Although we did not and still have not modeled the heat transfer of between the can's surface and the convection heating generated by the hair dryer, we were able to experimentally conclude that the heat distribution was more even across the can than the tin foil.

</P><P>After construction of the can-based cover, we attempted PCR once more and still found that amplification had not occurred. We assumed that the heat sensor might have been an issue; it was exposed to the moving air and as such was relaying information about the air temperature rather than the temperature of the reaction mixture within the PCR tubes. This meant that our feedback system was not accurately responding to or controlling the temperature inside of the PCR tubes. To compensate for this discrepancy, we put the heat sensor inside a PCR tube with mineral oil and placed this inside one of the holes. We ran another PCR reaction, visualized the products on an agarose gel, and witnessed a large band of the correct size, indicating that our machine had worked.
</P><P style="text-align:center;">Click to hide
</P></DIV></DIV></DIV><DIV id="layer2"><DIV id="contentbox"><P style="text-align:center;font-size:32px;font-family: Tahoma, Geneva, sans-serif;"><B>Hardware</B></P><DIV id="showwithbox_id2" onclick="document.getElementById('spoilerwithbox_id2').style.display=''; document.getElementById('showwithbox_id2').style.display='none';" style="margin:auto;padding:5px;width:100%;"><P style="text-align:center;">Click to show
</P></DIV><DIV id="spoilerwithbox_id2" onclick="document.getElementById('spoilerwithbox_id2').style.display='none'; document.getElementById('showwithbox_id2').style.display='';" style="margin:auto;padding:5px;display:none;width:100%;"><P>The working internals of our PCR machine are comprised of hairdryer elements. With the exception of the hairdryers outer housing, the thermal fuse and bimetallic circuit breaker, all other working components remain intact. The thermal fuse and bimetallic circuit breaker were shorted using copper wire in order to reach temperatures up to 95 within our machine. The outer plastic housing of the hairdryer was also removed to enable our machine to stand upright and fit PCR tubes. The hairdryers heating mechanism which utilizes a bank of nichrome wires and fan that distributes the heat remained untouched.

</P><P style="text-align:center;">Click to hide
</P></DIV></DIV></DIV><DIV id="layer1"><DIV id="contentbox"><P style="text-align:center;font-size:32px;font-family: Tahoma, Geneva, sans-serif;"><B>Electronics</B></P><DIV id="showwithbox_id3" onclick="document.getElementById('spoilerwithbox_id3').style.display=''; document.getElementById('showwithbox_id3').style.display='none';" style="margin:auto;padding:5px;width:100%;"><P style="text-align:center;">Click to show
</P></DIV><DIV id="spoilerwithbox_id3" onclick="document.getElementById('spoilerwithbox_id3').style.display='none'; document.getElementById('showwithbox_id3').style.display='';" style="margin:auto;padding:5px;display:none;width:100%;">
The electronics of the machine are mainly comprised of two relays, an Arduino micro-controller and a lm35 temperature sensor.

Actuation 
 The relays convert the low wattage outputs of the Arduino into a high wattage output needed to power the hairdryer. The relays are switches that can be triggered by the milliwatt output of the Arduino and can handle the 1.8 kilowatt power of the hairdryer. 

Sensing
 The lm35 temperature sensor is used to provide the Arduino controller with input on the current temperature of the machine.     

Software
<B>Closing the loop.</B> With the combination of the temperature sensor and the relays, we imbued the micro-controller with the ability to regulate and cycle the machine at various temperatures. To better facilitate tight cycling control, a proportional integral derivative control scheme was adopted. This scheme enabled the controller calculate the rate at which the temperature is increasing while also determining the constant error of the machine (derived from the integral term) and the proportional error (which compares the current temperature to a set point). Our code utilizes three setpoints, 95,70, and 50 degrees C, all of which are variable and may be adjusted depending on the reaction set up. At any given time, only one of these setpoints is active, and the PID control scheme regulates temperature at that specific value. Since the machine needs to cycle and hit at least 3 different temperatures, our code also logs the time at which each setpoint is hit, thus allowing us to define a time interval after which the setpoint is altered. The net result is that if we define the first setpoint to be 95 degrees C, our code will execute and tell the machine to heat to 95; once that temperature is reached, it will trigger a timing function that after a defined period will reset the setpoint to 50 degrees, forcing the machine to cool down to the new setpoint.                   
<P style="text-align:center;">Click to hide
</P></DIV></DIV></DIV><DIV id="layer2"><DIV id="contentbox"><P style="text-align:center;font-size:32px;font-family: Tahoma, Geneva, sans-serif;"><B>Problems and Current issues </B></P><DIV id="showwithbox_id4" onclick="document.getElementById('spoilerwithbox_id4').style.display=''; document.getElementById('showwithbox_id4').style.display='none';" style="margin:auto;padding:5px;width:100%;"><P style="text-align:center;">Click to show
</P></DIV><DIV id="spoilerwithbox_id4" onclick="document.getElementById('spoilerwithbox_id4').style.display='none'; document.getElementById('showwithbox_id4').style.display='';" style="margin:auto;padding:5px;display:none;width:100%;"><P> We have had one successful amplification with our machine; however, we still struggle to replicate these results with an updated housing design (essentially, a new soda can with appropriately sized holes). Our trials still suggest that our temperature sensor and the liquid reaction housed within the tube are not at the same temperature, with a discrepancy of over 10 degrees Celsius. We are currently working of milling a block of aluminum with better and more consistent heat transfer properties, and modeling the heat transfer within the can. Our hope is that modeling the heat transfer will facilitate better control of temperature within the device.      
</P><P style="text-align:center;">Click to hide
</P></DIV></DIV></DIV><DIV id="layer1"><DIV id="contentbox1"><P style="text-align:center;font-size:32px;font-family: Tahoma, Geneva, sans-serif;"><B>CODE</B></P><DIV id="showwithbox_id5" onclick="document.getElementById('spoilerwithbox_id5').style.display=''; document.getElementById('showwithbox_id5').style.display='none';" style="margin:auto;padding:5px;border:dotted 1px; width:1000px; height:100px;background-color:#F2F5A9;">Click to see code</DIV><DIV id="spoilerwithbox_id5" onclick="document.getElementById('spoilerwithbox_id5').style.display='none'; document.getElementById('showwithbox_id5').style.display='';" style="margin:auto;padding:5px;display:none;border:dotted 1px; width:1000px;background-color:#F2F5A9;"><PRE><FONT color="#000000">#include</FONT><FONT color="#434f54">&lt;</FONT><FONT color="#000000">PID_v1</FONT><FONT color="#434f54">.</FONT><FONT color="#000000">h</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">#include</FONT><FONT color="#434f54">&lt;</FONT><FONT color="#000000">math</FONT><FONT color="#434f54">.</FONT><FONT color="#000000">h</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">#include</FONT><FONT color="#434f54">&lt;</FONT><B><FONT color="#d35400">LiquidCrystal</FONT></B><FONT color="#434f54">.</FONT><FONT color="#000000">h</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#434f54">//The PID functions by adjusting a certain output in order to Â </FONT><FONT color="#434f54">// minimize the error between two values, which are the setpoint </FONT><FONT color="#434f54">// and the input.</FONT><FONT color="#434f54">// The PID function itself creates a PID controller and takes </FONT><FONT color="#434f54">// five parameters:</FONT><FONT color="#434f54">// Input: The value that needs to be controlled</FONT><FONT color="#434f54">// Output: The value that the PID will adjust</FONT><FONT color="#434f54">// Setpoint: The value that the input will be maintained at</FONT><FONT color="#434f54">// Kp,Ki,KD: Parameters that will affect how the output is adjusted</FONT><FONT color="#434f54">// Direct: Defines which direction the output will proceed given an error</FONT><FONT color="#434f54">// Define PID varaibles</FONT><FONT color="#00979c">double</FONT><FONT color="#000000">Setpoint</FONT><FONT color="#434f54">,</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">,</FONT><FONT color="#000000">Output</FONT><FONT color="#000000">;</FONT><B><FONT color="#d35400">PID</FONT></B><FONT color="#000000">myPID</FONT><FONT color="#000000">(</FONT><FONT color="#434f54">&amp;</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">,</FONT><FONT color="#434f54">&amp;</FONT><FONT color="#000000">Output</FONT><FONT color="#434f54">,</FONT><FONT color="#434f54">&amp;</FONT><FONT color="#000000">Setpoint</FONT><FONT color="#434f54">,</FONT><FONT color="#000000">1550</FONT><FONT color="#434f54">,</FONT><FONT color="#000000">800</FONT><FONT color="#434f54">,</FONT><FONT color="#000000">780</FONT><FONT color="#434f54">,</FONT><FONT color="#d35400">DIRECT</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">//LiquidCrystal lcd( 8, 9, 4, 5, 6, 7 );</FONT><FONT color="#434f54">//PCR Variables</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">1</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">cycle</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">2</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">0</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">count</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">1</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">startup</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">2</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">// Cycles</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">cycles</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">35</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">cyclenum</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">(</FONT><FONT color="#000000">cycles</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">*</FONT><FONT color="#000000">3</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">1</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">//Startup cycle</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">meltT1</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">96</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">pcrT1</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">59</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">//All cycles</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">meltT</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">96</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">pcrT</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">59</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">extensionT</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">73</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">//End cycle</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">endextT</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">73</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">endT</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">4</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">deathT</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">97</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">val0</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">val1</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">val</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">tempPin0</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">2</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">tempPin1</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">3</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">signalr1</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">3</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">signalr2</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">5</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">String</FONT><FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;starting &quot;</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">boolean</FONT><FONT color="#000000">cooling</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">false</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">//Startup cycle</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">Melt1</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">180</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">t1Melt</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">Melt1</FONT><FONT color="#434f54">*</FONT><FONT color="#000000">1000</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">PCR1</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">20</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">t1PCR</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">PCR1</FONT><FONT color="#434f54">*</FONT><FONT color="#000000">1000</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">extension1</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">20</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">textension1</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">extension1</FONT><FONT color="#434f54">*</FONT><FONT color="#000000">1000</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">// All cycles</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">Melt</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">30</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">tMelt</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">Melt</FONT><FONT color="#434f54">*</FONT><FONT color="#000000">1000</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">PCR</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">30</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">tPCR</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">PCR</FONT><FONT color="#434f54">*</FONT><FONT color="#000000">1000</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">extension</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">20</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">textension</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">extension</FONT><FONT color="#434f54">*</FONT><FONT color="#000000">1000</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">//End cycle</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">extend</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">30</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">textend</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">extend</FONT><FONT color="#434f54">*</FONT><FONT color="#000000">1000</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">cycleStart</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">int</FONT><FONT color="#000000">WindowSize</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">500</FONT><FONT color="#000000">;</FONT><FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">windowStartTime</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">// Sets up the staring environment and will only run once</FONT><FONT color="#00979c">void</FONT><FONT color="#5e6d03">setup</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">begin</FONT><FONT color="#000000">(</FONT><FONT color="#000000">9600</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#434f54">//lcd.begin(16, 2);</FONT>Â <FONT color="#000000">windowStartTime</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#000000">myPID</FONT><FONT color="#434f54">.</FONT><FONT color="#d35400">SetOutputLimits</FONT><FONT color="#000000">(</FONT><FONT color="#000000">0</FONT><FONT color="#434f54">,</FONT><FONT color="#000000">WindowSize</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#000000">myPID</FONT><FONT color="#434f54">.</FONT><FONT color="#d35400">SetMode</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">AUTOMATIC</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#d35400">pinMode</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr1</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">OUTPUT</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#d35400">pinMode</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr2</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">OUTPUT</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">meltT1</FONT><FONT color="#000000">;</FONT><FONT color="#000000">}</FONT><FONT color="#00979c">void</FONT><FONT color="#5e6d03">loop</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">&lt;</FONT><FONT color="#000000">cyclenum</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â <FONT color="#434f54">//The following code is only implemented once as the first cycle of the PCR</FONT>Â Â Â <FONT color="#434f54">// This allows for the user to set conditions which may be different from the subsequent </FONT>Â Â Â <FONT color="#434f54">// cycles. The code, however, works in much the same way as the other cycles</FONT>Â Â Â <FONT color="#434f54">// at the most basic level. It divides each cycle into subcycles: activation, pcr and extension</FONT>Â Â Â <FONT color="#434f54">// and enters each step based on stepnow(which denotes how many subcyles the program has entered) divisiblity by 3. </FONT>Â Â Â <FONT color="#434f54">// The remainder for activation will always be 1, </FONT>Â Â Â <FONT color="#434f54">// the remainder for pcr will be 2 and the remainder for extension will be 3</FONT>Â Â Â Â Â Â Â Â <FONT color="#434f54">//Begins activation of the PCR by checking that this is the first cycle and that the current subcycle is activation </FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">%</FONT><FONT color="#000000">3</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">cycle</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#434f54">// sets the setpoint that the pcr will heat up to as meltT1</FONT>Â Â Â Â Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">meltT1</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#434f54">// prints out the current cycle number and the step it is currenly on</FONT>Â Â Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">pcr</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">count</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#434f54">// If the setpoint has reached the desired temperature, it will enter this loop</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">meltT1</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#434f54">// Starts the timer and maintains this temperature for the desired amount of time</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cycleStart</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;maintaining cycle activation: cycle &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">laststep</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â Â Â <FONT color="#434f54">//If the pcr has maintained the setpoint for the desired amount </FONT>Â Â Â Â Â <FONT color="#434f54">//of time, it will enter this loop and begin cooling</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">t1Melt</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">cycleStart</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">stepnow</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;cooling to pcr &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cooling</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">true</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#434f54">// Checks that the current step is the subcycle pcr</FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">%</FONT><FONT color="#000000">3</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">cycle</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#434f54">// sets the temperature as pcrT1</FONT>Â Â Â Â Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">pcrT1</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">pcr</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">count</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#434f54">//checks that the machine has reached the setpoint</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">pcrT1</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&lt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cooling</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">false</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cycleStart</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;maintaining cycle pcr: cycle &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">laststep</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â Â Â <FONT color="#434f54">//checks if the machine has maintained the temperature for </FONT>Â Â Â Â Â <FONT color="#434f54">//the desired amount of time, and begins the next step</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">t1PCR</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">cycleStart</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">cycle</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">stepnow</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;heating to extension &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#434f54">// Checks that the current step is the subcycle extension</FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">cycle</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">%</FONT><FONT color="#000000">3</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#434f54">// sets the temperature as extensionT</FONT>Â Â Â Â Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">extensionT</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">pcr</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">count</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â <FONT color="#434f54">//checks that the machine has reached the setpoint</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">extensionT</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;maintaining cycle extension: cycle &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cycleStart</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">laststep</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â Â Â <FONT color="#434f54">//checks if the machine has maintained the temperature </FONT>Â Â Â Â Â <FONT color="#434f54">// for the desired amount of time, and begins the next step</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">textension1</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">cycleStart</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;heating to melt &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">stepnow</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cycle</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">count</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#000000">}</FONT><FONT color="#434f54">//Begins the intermediate steps which work in an identical manner to the startup cycle </FONT><FONT color="#434f54">//and may differ only in the alloted temperatures and times for each subcycle</FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">%</FONT><FONT color="#000000">3</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">cycle</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">meltT</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">pcr</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">count</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">meltT</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;maintaining melt: cycle &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cycleStart</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">laststep</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">tMelt</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">cycleStart</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">stepnow</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cooling</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">true</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;cooling to pcr &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">%</FONT><FONT color="#000000">3</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">cycle</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">pcrT</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">pcr</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">count</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">pcrT</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&lt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cooling</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">false</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;maintaining pcr: cycle &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cycleStart</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">laststep</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">tPCR</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">cycleStart</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">stepnow</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;heating to extension &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">%</FONT><FONT color="#000000">3</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">cycle</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">extensionT</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">pcr</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">count</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">extensionT</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cycleStart</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;maintaining extension: cycle &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">laststep</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">textension</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">cycleStart</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">stepnow</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">count</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;heating to melt &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#000000">}</FONT>Â Â <FONT color="#434f54">// Begins the last step, which again works in a similar fashion </FONT>Â <FONT color="#434f54">// to the other steps, but may differ in the final extension temperature</FONT>Â Â Â <FONT color="#000000">}</FONT><FONT color="#5e6d03">else</FONT><FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">cyclenum</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">&lt;</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">cyclenum</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">%</FONT><FONT color="#000000">3</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">meltT</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">pcr</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">count</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">meltT</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;maintaining melt: cycle &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cycleStart</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">laststep</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">tMelt</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">cycleStart</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">stepnow</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cooling</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">true</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;cooling to pcr &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">%</FONT><FONT color="#000000">3</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">2</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">pcrT</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">pcr</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">count</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">pcrT</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&lt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cooling</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">false</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;maintaining pcr: cycle &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cycleStart</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">laststep</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">tPCR</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">cycleStart</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">stepnow</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;heating to extension &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">stepnow</FONT><FONT color="#434f54">%</FONT><FONT color="#000000">3</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">extensionT</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">pcr</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">count</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">extensionT</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">!</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">cycleStart</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;maintaining extension: cycle &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">laststep</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">textend</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">cycleStart</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&amp;&amp;</FONT><FONT color="#000000">(</FONT><FONT color="#000000">laststep</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">stepnow</FONT><FONT color="#000000">)</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â Â Â <FONT color="#000000">stepnow</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">count</FONT><FONT color="#434f54">++</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;cooling to end &quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#434f54">// Once the last step has been completed, determined by </FONT>Â Â <FONT color="#434f54">// stepnow being greater than cyclenum+2,the code will tell the </FONT>Â Â <FONT color="#434f54">// pcr to hold at 4 C. It will continue looping at this step indefinitely</FONT>Â Â <FONT color="#434f54">// because the conditions will no longer satisfy any of the other if statement</FONT>Â Â Â <FONT color="#000000">}</FONT><FONT color="#5e6d03">else</FONT><FONT color="#000000">{</FONT>Â Â Â <FONT color="#00979c">int</FONT><FONT color="#000000">strt</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">1</FONT><FONT color="#000000">;</FONT>Â Â Â <FONT color="#00979c">boolean</FONT><FONT color="#000000">cooldown</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">true</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">strt</FONT><FONT color="#434f54">==</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#000000">Setpoint</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">endT</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">pcr</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#434f54">// begins cooldown to 4 </FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">cooldown</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr1</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">HIGH</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr2</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">LOW</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â <FONT color="#000000">}</FONT>Â Â Â <FONT color="#434f54">//Once the pcr has reached 37 C, the pcr will </FONT>Â Â Â <FONT color="#434f54">//print out that the pcr has shutt off</FONT>Â Â Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">38</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&lt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr1</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">HIGH</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr2</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">LOW</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â <FONT color="#000000">pcr</FONT><FONT color="#434f54">=</FONT><FONT color="#00979c">&quot;turn off&quot;</FONT><FONT color="#000000">;</FONT>Â Â Â Â Â Â Â <FONT color="#000000">}</FONT>Â <FONT color="#000000">}</FONT><FONT color="#434f54">// creates the window </FONT>Â <FONT color="#00979c">unsigned</FONT><FONT color="#00979c">long</FONT><FONT color="#000000">now</FONT><FONT color="#434f54">=</FONT><FONT color="#d35400">millis</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">now</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">windowStartTime</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">WindowSize</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â <FONT color="#000000">windowStartTime</FONT><FONT color="#434f54">+=</FONT><FONT color="#000000">WindowSize</FONT><FONT color="#000000">;</FONT>Â Â Â <FONT color="#000000">Input</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">val</FONT><FONT color="#000000">;</FONT>Â Â Â <FONT color="#434f54">// this function is called once every loop, and contains the pid algorithm </FONT>Â Â Â <FONT color="#000000">myPID</FONT><FONT color="#434f54">.</FONT><FONT color="#d35400">Compute</FONT><FONT color="#000000">(</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â <FONT color="#000000">}</FONT><FONT color="#434f54">// if cooling is true, it will begin cooling until cool is set to false</FONT>Â <FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">cooling</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr1</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">HIGH</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr2</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">LOW</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#00979c">&quot;COOLING&quot;</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">// if the pcr machine's temperature reaches 97, cooling will </FONT><FONT color="#434f54">// Â Â automatically be initiated and a death message will be displayed</FONT>Â <FONT color="#000000">}</FONT><FONT color="#5e6d03">else</FONT><FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Input</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">deathT</FONT><FONT color="#434f54">+</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">0</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr1</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">HIGH</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr2</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">LOW</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#00979c">&quot;DEATH&quot;</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">// these two statements work on the maintaining the temperature, by </FONT><FONT color="#434f54">// controlling heating and cooling when there is overshoot or undershoot </FONT><FONT color="#434f54">// in the temperature</FONT>Â <FONT color="#000000">}</FONT><FONT color="#5e6d03">else</FONT><FONT color="#5e6d03">if</FONT><FONT color="#000000">(</FONT><FONT color="#000000">Output</FONT><FONT color="#434f54">&gt;</FONT><FONT color="#000000">now</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">windowStartTime</FONT><FONT color="#434f54">-</FONT><FONT color="#000000">1</FONT><FONT color="#000000">)</FONT><FONT color="#000000">{</FONT>Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr1</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">HIGH</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr2</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">HIGH</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#000000">}</FONT>Â <FONT color="#5e6d03">else</FONT>Â <FONT color="#000000">{</FONT>Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr1</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">HIGH</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â <FONT color="#d35400">digitalWrite</FONT><FONT color="#000000">(</FONT><FONT color="#000000">signalr2</FONT><FONT color="#434f54">,</FONT><FONT color="#00979c">LOW</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â Â Â Â <FONT color="#000000">}</FONT>Â <FONT color="#434f54">//int reading = analogRead(tempPin);</FONT>Â <FONT color="#000000">val0</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">analogRead</FONT><FONT color="#000000">(</FONT><FONT color="#000000">tempPin0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">/</FONT><FONT color="#000000">1024.0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">*</FONT><FONT color="#000000">5000</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">/</FONT><FONT color="#000000">10</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#000000">val1</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#000000">(</FONT><FONT color="#d35400">analogRead</FONT><FONT color="#000000">(</FONT><FONT color="#000000">tempPin1</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">/</FONT><FONT color="#000000">1024.0</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">*</FONT><FONT color="#000000">5000</FONT><FONT color="#000000">)</FONT><FONT color="#434f54">/</FONT><FONT color="#000000">10</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#434f54">//val = (val0 + val1)/2;</FONT>Â <FONT color="#000000">val</FONT><FONT color="#434f54">=</FONT><FONT color="#000000">val1</FONT><FONT color="#000000">;</FONT><FONT color="#434f54">// determines the value of the current temperature and prints it out</FONT>Â <B><FONT color="#d35400">Serial</FONT></B><FONT color="#434f54">.</FONT><FONT color="#d35400">println</FONT><FONT color="#000000">(</FONT><FONT color="#000000">val</FONT><FONT color="#000000">)</FONT><FONT color="#000000">;</FONT>Â <FONT color="#434f54">// loops back to the top of the code, this will occur indefinitely</FONT><FONT color="#000000">}</FONT></PRE></DIV></DIV></DIV></UL></LI></DIV></DIV></BODY></HTML>