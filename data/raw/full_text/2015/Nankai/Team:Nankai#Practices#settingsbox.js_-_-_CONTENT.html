<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Nankai_Practices_settingsbox_js skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Nankai/Practices/settingsbox.js</SPAN></H1><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>// SETTINGS BOX
</P><P>$(document).ready(function(){
</P><PRE>   $('.customPanel').each(function(){
       var t_toggle_time = 500;   //duration of the panel toggle animation in milisecons
       var t_menu_fonts = [   //fonts data (name, link and css) for the top menu
           {
               name:&quot;Lato&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Lato:300,400,700">http://fonts.useso.com/css?family=Lato:300,400,700</A>&quot;,
               css:&quot;'Lato', sans-serif&quot;
           },
           {   
               name:&quot;Metrophobic&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Metrophobic">http://fonts.useso.com/css?family=Metrophobic</A>&quot;,
               css:&quot;'Metrophobic', sans-serif&quot;
           },
           {
               name:&quot;Telex&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Telex">http://fonts.useso.com/css?family=Telex</A>&gt;&quot;,
               css:&quot;'Telex', sans-serif&quot;
           },
           {
               name:&quot;Questrial&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Questrial">http://fonts.useso.com/css?family=Questrial</A>&quot;,
               css:&quot;'Questrial', sans-serif&quot;
           },
           {
               name:&quot;Open sans&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Open+Sans:400,700,300">http://fonts.useso.com/css?family=Open+Sans:400,700,300</A>&quot;,
               css:&quot;'Open Sans', sans-serif&quot;
           },
           {
               name:&quot;Oxygen&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Oxygen">http://fonts.useso.com/css?family=Oxygen</A>&quot;,
               css:&quot;'Oxygen', sans-serif&quot;
           },
           {
               name:&quot;Gudea&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Gudea:400,700">http://fonts.useso.com/css?family=Gudea:400,700</A>&quot;,
               css:&quot;'Gudea', sans-serif&quot;
           },
           {
               name:&quot;Imprima&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Imprima">http://fonts.useso.com/css?family=Imprima</A>&quot;,
               css:&quot;'Imprima', sans-serif&quot;
           },
           {
               name:&quot;Ubuntu&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Ubuntu:300,400,700">http://fonts.useso.com/css?family=Ubuntu:300,400,700</A>&quot;,
               css:&quot;'Ubuntu', sans-serif&quot;
           },
           {
               name:&quot;Pontano sans&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Pontano+Sans">http://fonts.useso.com/css?family=Pontano+Sans</A>&quot;,
               css:&quot;'Pontano Sans', sans-serif&quot;
           },
           {
               name:&quot;Ropa sans&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Ropa+Sans">http://fonts.useso.com/css?family=Ropa+Sans</A>&quot;,
               css:&quot;'Ropa Sans', sans-serif&quot;
           },
           {
               name:&quot;Oswald&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Oswald:400,700,300">http://fonts.useso.com/css?family=Oswald:400,700,300</A>&quot;,
               css:&quot;'Oswald', sans-serif&quot;
           },
           {
               name:&quot;Armata&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Armata">http://fonts.useso.com/css?family=Armata</A>&quot;,
               css:&quot;'Armata', sans-serif&quot;
           },
           {
               name:&quot;Numans&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Numans">http://fonts.useso.com/css?family=Numans</A>&quot;,
               css:&quot;'Numans', sans-serif&quot;
           },
           {
               name:&quot;Asap&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Asap:400,700">http://fonts.useso.com/css?family=Asap:400,700</A>&quot;,
               css:&quot;'Asap', sans-serif&quot;
           }
       ];
       var t_text_fonts = [   //fonts data (name, link and css) for text
           {
               name:&quot;Open sans&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Open+Sans:400,700,300">http://fonts.useso.com/css?family=Open+Sans:400,700,300</A>&quot;,
               css:&quot;'Open Sans', sans-serif&quot;
           },
</PRE><P>			{
</P><PRE>   name:&quot;Lato&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Lato:300,400,700">http://fonts.useso.com/css?family=Lato:300,400,700</A>&quot;,
               css:&quot;'Lato', sans-serif&quot;
           },
</PRE><P>			{
</P><PRE>               name: &quot;PT Sans Narrow&quot;,
               link: &quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=PT+Sans+Narrow">http://fonts.useso.com/css?family=PT+Sans+Narrow</A>&quot;,
               css: &quot;'PT Sans Narrow', sans-serif&quot;
           },
           {
               name:&quot;Varela&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Varela">http://fonts.useso.com/css?family=Varela</A>&quot;,
               css:&quot;'Varela', sans-serif&quot;
           },
           {
               name:&quot;Droid sans&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Droid+Sans:400,700">http://fonts.useso.com/css?family=Droid+Sans:400,700</A>&quot;,
               css:&quot;'Droid Sans', sans-serif&quot;
           },
</PRE><PRE>           {
               name:&quot;Pt Sans Caption&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=PT+Sans+Caption:400,700">http://fonts.useso.com/css?family=PT+Sans+Caption:400,700</A>&quot;,
               css:&quot;'PT Sans Caption', sans-serif&quot;
           },
           {
               name:&quot;Magra&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Magra:400,700">http://fonts.useso.com/css?family=Magra:400,700</A>&quot;,
               css:&quot;'Magra', sans-serif&quot;
           },
           {
               name:&quot;Chivo&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Chivo">http://fonts.useso.com/css?family=Chivo</A>&quot;,
               css:&quot;'Chivo', sans-serif&quot;
           },
           {
               name:&quot;Verdana&quot;,
               link:&quot;&quot;,
               css:&quot;'Verdana', sans-serif&quot;
           },
           {
               name:&quot;Tahoma&quot;,
               link:&quot;&quot;,
               css:&quot;'Tahoma', sans-serif&quot;
           },
           {
               name:&quot;Arial&quot;,
               link:&quot;&quot;,
               css:&quot;'Arial', sans-serif&quot;
           }
       ];
       var t_title_fonts = [   //fonts data (name, link and css) for title
</PRE><P>			{
</P><PRE>               name: &quot;Oswald&quot;,
               link: &quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Oswald:400,300,700">http://fonts.useso.com/css?family=Oswald:400,300,700</A>&quot;,
               css: &quot;'Oswald', sans-serif&quot;
           },
           {
               name: &quot;PT Sans Narrow&quot;,
               link: &quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=PT+Sans+Narrow">http://fonts.useso.com/css?family=PT+Sans+Narrow</A>&quot;,
               css: &quot;'PT Sans Narrow', sans-serif&quot;
           },
           {
               name:&quot;Varela&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Varela">http://fonts.useso.com/css?family=Varela</A>&quot;,
               css:&quot;'Varela', sans-serif&quot;
           },
           {
               name:&quot;Open sans&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Open+Sans:400,700,300">http://fonts.useso.com/css?family=Open+Sans:400,700,300</A>&quot;,
               css:&quot;'Open Sans', sans-serif&quot;
           },
           {
               name:&quot;Lato&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Lato:300,400,700">http://fonts.useso.com/css?family=Lato:300,400,700</A>&quot;,
               css:&quot;'Lato', sans-serif&quot;
           },
           {
               name:&quot;Droid sans&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Droid+Sans:400,700">http://fonts.useso.com/css?family=Droid+Sans:400,700</A>&quot;,
               css:&quot;'Droid Sans', sans-serif&quot;
           },
           {
               name:&quot;Pt Sans Caption&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=PT+Sans+Caption:400,700">http://fonts.useso.com/css?family=PT+Sans+Caption:400,700</A>&quot;,
               css:&quot;'PT Sans Caption', sans-serif&quot;
           },
           {
               name:&quot;Magra&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Magra:400,700">http://fonts.useso.com/css?family=Magra:400,700</A>&quot;,
               css:&quot;'Magra', sans-serif&quot;
           },
           {
               name:&quot;Chivo&quot;,
               link:&quot;<A rel="nofollow" class="external free" href="http://fonts.useso.com/css?family=Chivo">http://fonts.useso.com/css?family=Chivo</A>&quot;,
               css:&quot;'Chivo', sans-serif&quot;
           },
           {
               name:&quot;Verdana&quot;,
               link:&quot;&quot;,
               css:&quot;'Verdana', sans-serif&quot;
           },
           {
               name:&quot;Tahoma&quot;,
               link:&quot;&quot;,
               css:&quot;'Tahoma', sans-serif&quot;
           },
           {
               name:&quot;Arial&quot;,
               link:&quot;&quot;,
               css:&quot;'Arial', sans-serif&quot;
           }
       ];
       var t_menu_css = $('#header .topmenu li a');   //selector for elements to change menu font
       var t_text_css = $('body');   //selector for elements to change text font
       var t_title_css = $('.container .title, .container #subscribe .subscribebutton, .container #miniportfolio .time, .container #miniportfolio h3, #project h3, #footer h3');   //selector for elements to change title font
       var t = $(this);
       var t_width = t.outerWidth(true);
       var t_options = t.children('.customPanelOptions');
       var t_menu_font_select = t_options.children('select[name=&quot;menu-font&quot;]');
       var t_text_font_select = t_options.children('select[name=&quot;text-font&quot;]');
       var t_title_font_select = t_options.children('select[name=&quot;title-font&quot;]');
       var t_button = t.children('.customPanelButton');
       var t_default = t_options.children('.customPanelOptionsDefault');
       var t_color = t_options.children('.customPanelOptionsColor');
       var t_color_default = '#f1f1f1';   //default background color
       var t_color_default_site = '#28B8FF';   //default site color
       var t_texture = t_options.children('.customPanelOptionsTexture');
       var t_layout_changed = false;
       var t_color_current_class = <I>;</I>
       var t_texture_current_class = <I>;</I>
       var t_change_backgroundcolor = $('body');   //elements for which to change the background
       var t_dom = $(<I>);   //elements for which to change the layout</I>
       var t_picker_button = t_options.children('.customPanelOptionsPickerButton.customPanelOptionsPickerButtonBackground');
       var t_picker_button_site = t_options.children('.customPanelOptionsPickerButton.customPanelOptionsPickerButtonSite');
       var t_picker_box = $('.customPanelOptionsPicker.customPanelOptionsPickerBackground');
       var t_picker_box_site = $('.customPanelOptionsPicker.customPanelOptionsPickerSite');
       var t_picker = $.farbtastic('.customPanelOptionsPicker.customPanelOptionsPickerBackground');
       var t_picker_site = $.farbtastic('.customPanelOptionsPicker.customPanelOptionsPickerSite');
       var t_style = $('&lt;style&gt;');
       $('head').append(t_style);
       t_picker.setColor(t_color_default);
       t_picker_site.setColor(t_color_default_site);
       t_picker.linkTo(function(color){
           t_boxed_layout_function();
           if(t_color_current_class!=<I>){</I>
               t_change_backgroundcolor.removeClass(t_color_current_class);
               t_color_current_class = <I>;</I>
           }
           t_change_backgroundcolor.css('background-color',color);
       });
       t_picker_site.linkTo(function(color){console.log(color)
           t_style.empty();
           color_rgb = hexToRgb(color);console.log(color_rgb)
           t_style.html('.colored, .pagination li a:hover, .photoControl ul li a:hover, .readMore, .blogBreadcrumb li.active, .blogItems a:hover, address ul li a:hover, .sidebarMenu .active a b, .sidebarMenu ul li a:hover b, .portfolioItems li figure h3 a:hover, .active &gt; a, .menu li a:hover, .colored{color:'+color+' !important;}.arrowRight a:hover, .arrowLeft a:hover .postDate ul .date , .accordion-heading-active::after, .btn-color, .recentPosts li::before, .iconBg, .brand::after, .rs_mainslider .rs_mainslider_dots_container ul.rs_mainslider_dots li.rs_mainslider_dots_active { background:'+color+' !important}.coloredSection, .postDate ul .date{background:'+color+' !important; color: white;}.portfolioItems li figure:hover:after { border-bottom: 5px solid '+color+';}.servicesFeatures li figure a img, .progress .bar {background-color:'+color+'; !important}.arrowRight a:hover,.arrowLeft a:hover { background: '+color+' !important;}.nav-tabs &gt; .active {border-top: 1px solid '+color+';}.portfolioItems li figure:hover{  border-bottom: 1px solid '+color+' !important;}.menu li &gt; ul { border-top: 2px solid '+color+' !important;}.btn:hover, .btn:focus { background-color: '+color+' !important;}.pricingTable &gt; li h3 { background-color: '+color+'; border: 1px solid '+color+';}.rs_mainslider_items_text h2,.introMess h2{background-color: rgba('+color_rgb.r+','+color_rgb.g+','+color_rgb.b+',0.5);}.navTop ul li:nth-child(1) a { background-color:  rgba('+color_rgb.r+','+color_rgb.g+','+color_rgb.b+',1);}.navTop ul li:nth-child(2) a {background-color: rgba('+color_rgb.r+','+color_rgb.g+','+color_rgb.b+',0.8);} .navTop ul li:nth-child(3) a { background-color: rgba('+color_rgb.r+','+color_rgb.g+','+color_rgb.b+',0.6);}.navTop ul li:nth-child(4) a {background-color: rgba('+color_rgb.r+','+color_rgb.g+','+color_rgb.b+',0.4);}.nav-tabs &gt; .active::after{border-top: 5px solid '+color+'}');
       });
       t_picker_button.click(function(){
           t_picker_box_site.hide();
           t_picker_box.toggle();
       });
       t_picker_button_site.click(function(){
           t_picker_box.hide();
           t_picker_box_site.toggle();
       });
       var t_normal_layout_function = function(){
           if(t_layout_changed){
               t_change_backgroundcolor.removeClass(t_color_current_class).removeClass(t_texture_current_class);
               t_dom.removeClass('backwrapper');
               t_color_current_class = <I>;</I>
               t_texture_current_class = <I>;</I>
               t_change_backgroundcolor.css('background-color',<I>);</I>
               t_picker.setColor(t_color_default);
               t_layout_changed = false;
           }
       }
       var t_boxed_layout_function = function(){
           if(!t_layout_changed){
               t_dom.addClass('backwrapper');
               t_layout_changed = true;
           }
       }
       t_button.click(function(){
           if(t.hasClass('customPanelClosed'))
               t.removeClass('customPanelClosed').stop().animate({left:'0px'},{queue:false,duration:t_toggle_time});
           else{
               t.addClass('customPanelClosed').stop().animate({left:'-60px'},{queue:false,duration:t_toggle_time});
               t_picker_box.hide();
               t_picker_box_site.hide();
           }
       });
       t_default.click(function(){
           t_normal_layout_function();
       });
       t_color.click(function(){
           t_boxed_layout_function();
           var t_color_current = $(this);
           var t_color_current_class_new = t_color_current.attr('class').split(' ')[1];
           if(t_color_current_class_new!=t_color_current_class){
               if(t_color_current_class==<I>)</I>
                   t_change_backgroundcolor.css('background-color',<I>);</I>
               t_change_backgroundcolor.removeClass(t_color_current_class).addClass(t_color_current_class_new);
               t_color_current_class = t_color_current_class_new;
               t_picker.setColor(colorToHex(t_color_current.css('background-color')));
           }
       });
       t_texture.click(function(){
           t_boxed_layout_function();
           var t_texture_current = $(this);
           var t_texture_current_class_new = t_texture_current.attr('class').split(' ')[1];
           if(t_texture_current_class_new!=t_texture_current_class){
               t_change_backgroundcolor.removeClass(t_texture_current_class).addClass(t_texture_current_class_new);
               t_texture_current_class = t_texture_current_class_new;
           }
       });
       var i;
       for(i=0;i&lt;t_menu_fonts.length;i++)
           t_menu_font_select.append('&lt;option value=&quot;'+i+'&quot;&gt;'+t_menu_fonts[i].name+'&lt;/option&gt;');
       for(i=0;i&lt;t_text_fonts.length;i++)
           t_text_font_select.append('&lt;option value=&quot;'+i+'&quot;&gt;'+t_text_fonts[i].name+'&lt;/option&gt;');
       for(i=0;i&lt;t_title_fonts.length;i++)
           t_title_font_select.append('&lt;option value=&quot;'+i+'&quot;&gt;'+t_title_fonts[i].name+'&lt;/option&gt;');
       var t_menu_font_link = $('.TopmenuFont');
       var t_text_font_link = $('.TextFont');
       var t_title_font_link = $('.TitleFont');
       t_menu_font_select.change(function(){
           var t_font_index = parseInt(t_menu_font_select.val());
           t_menu_font_link.attr('href',t_menu_fonts[t_font_index].link);
           t_menu_css.css('font-family',t_menu_fonts[t_font_index].css);
       });
       t_text_font_select.change(function(){
           var t_font_index = parseInt(t_text_font_select.val());
           t_text_font_link.attr('href',t_text_fonts[t_font_index].link);
           t_text_css.css('font-family',t_text_fonts[t_font_index].css);
       });
       t_title_font_select.change(function(){
           var t_font_index = parseInt(t_title_font_select.val());
           t_title_font_link.attr('href',t_title_fonts[t_font_index].link);
           t_title_css.css('font-family',t_title_fonts[t_font_index].css);
       });
   });
</PRE><P>});
function colorToHex(color) {
</P><PRE>   if (color.substr(0, 1) === '#') {
       return color;
   }
   var digits = /(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(color);
   
   var red = parseInt(digits[2]);
   var green = parseInt(digits[3]);
   var blue = parseInt(digits[4]);
   
   var rgb = blue | (green &lt;&lt; 8) | (red &lt;&lt; 16);
   return digits[1] + '#' + rgb.toString(16);
</PRE><P>};
function hexToRgb(hex) {
</P><PRE>   var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
   return result ? {
       r: parseInt(result[1], 16),
       g: parseInt(result[2], 16),
       b: parseInt(result[3], 16)
   } : null;
</PRE><P>}
</P></DIV></DIV></DIV></DIV></BODY></HTML>