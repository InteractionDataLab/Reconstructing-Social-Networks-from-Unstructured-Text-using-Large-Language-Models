<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Toronto_Generator skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Toronto/Generator</SPAN></H1><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><DIV id="navigation"><UL><LI><A href="https://2015.igem.org/Team:Toronto"><SPAN>home</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Team"><SPAN>team</SPAN></A></LI><LI><A href="#"><SPAN>project</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Description"><SPAN>description</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Experiments"><SPAN>experiments</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Results"><SPAN>results</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Design"><SPAN>design</SPAN></A></LI></UL><LI><A href="https://2015.igem.org/Team:Toronto/Parts"><SPAN>parts</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Notebook"><SPAN>notebook</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Attributions"><SPAN>attributions</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Collaborations"><SPAN>collaborations</SPAN></A></LI><LI><A href="#"><SPAN>practices</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Practices"><SPAN>human practices</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Alberta-Oil-Stories"><SPAN>alberta oil stories</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Community-Outreach"><SPAN>community outreach</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Technology-Applications"><SPAN>technology applications</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/TechnoMoral-Scenarios"><SPAN>technoMoral scenarios</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Safety"><SPAN>safety</SPAN></A></LI><LI><A href="#"><SPAN>software</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Software"><SPAN>software</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Demo"><SPAN>demo</SPAN></A></LI><LI class="active"><A href="https://2015.igem.org/Team:Toronto/Generator"><SPAN>wiki generator</SPAN></A></LI><LI><A href="https://2015.igem.org/Team:Toronto/Entrepreneurship"><SPAN>entrepreneurship</SPAN></A></LI></DIV><DIV class="content" id="content-main"><DIV class="row"><DIV class="col col-lg-8 col-md-12"><DIV class="content-main"><P>To ease the wiki development process we built a &quot;wiki generator&quot;. You can
find its source code at <A href="https://github.com/igemuoftATG/generator-igemwiki">https://github.com/igemuoftATG/generator-igemwiki</A>.
<STRONG>Check the repo for the most current version of this tool</STRONG>.</P><H1 id="generator-igemwiki">generator-igemwiki</H1><P><A href="http://yeoman.io/">Yeoman</A> generator for <A href="https://igem.org/Main_Page">iGEM</A>
wikis. Sets up a development environment with the ability to push entire
codebase (including images) to live wiki pages.</P><H2 id="install">Install</H2><H3 id="kek-bro-whats-the-package-name-">kek bro, whats the package name?</H3><PRE><CODE>npm <SPAN class="hljs-operator"><SPAN class="hljs-keyword">install</SPAN> -<SPAN class="hljs-keyword">g</SPAN> generator-igemwiki</SPAN></CODE></PRE><H3 id="node-js">Node.js</H3><P>This generator requires that you have <A href="https://nodejs.org/en/">Node.js</A>
installed on your system. If you are on OS X or Linux system, I recommend
installing using <A href="https://gist.github.com/isaacs/579814">one of these methods</A>
to avoid having to <CODE>sudo</CODE>. Furthermore <A href="https://github.com/sindresorhus/guides/blob/master/npm-global-without-sudo.md">see
here</A>
to set up npm packages to install into a custom global directory without sudo.
You can check if the install worked by running</P><PRE><CODE><SPAN class="hljs-title">node</SPAN> -v
</CODE></PRE><P>in a terminal; it should return the version number. You don't need to worry
about sudo on Windows, as Windows runs as admin by default. However, you may
face some <CODE>PATH</CODE> issues on Windows (see below).</P><H3 id="npm">NPM</H3><P><A href="https://www.npmjs.com/">NPM</A> is <EM>node package manager</EM> and is the &quot;largest
ecosystem of open source libraries in the world&quot;. All of this project's
dependencies are held on npm, and this package is published on npm.</P><P>Node comes with npm, though it is usually not the latest version, and more
importantly, it is not located where your global npm modules are installed.
Before continuing, you should make sure your <CODE>PATH</CODE> variable catches the correct
npm binary, or in simpler terms, running</P><PRE><CODE><SPAN class="hljs-built_in">npm</SPAN> -v
<SPAN class="hljs-built_in">npm</SPAN> install -g <SPAN class="hljs-built_in">npm</SPAN><SPAN class="hljs-built_in">npm</SPAN> -v
</CODE></PRE><P>should return a different value on the second <CODE>npm -v</CODE>. (You may need to open
and close the terminal first). If it is not, compare the path returned by <CODE>npm
install -g npm</CODE> (of the format path -&gt; path) to <CODE>which npm</CODE>. If they are
different, it is because the directory containing Node's npm is earlier in your
<CODE>PATH</CODE> than the one containing the binaries of npm's global modules. For
example, I have the following in my <CODE>.bashrc</CODE>:</P><PRE><CODE><SPAN class="hljs-comment"># Node and NPM</SPAN><SPAN class="hljs-built_in">export</SPAN> NPM_PACKAGES=<SPAN class="hljs-string">&quot;<SPAN class="hljs-variable">$HOME</SPAN>/node/npm-packages&quot;</SPAN><SPAN class="hljs-built_in">export</SPAN> NODE_PATH=<SPAN class="hljs-string">&quot;<SPAN class="hljs-variable">$NPM_PACKAGES</SPAN>/lib/node_modules:<SPAN class="hljs-variable">$NODE_PATH</SPAN>&quot;</SPAN><SPAN class="hljs-built_in">export</SPAN> PATH=<SPAN class="hljs-string">&quot;<SPAN class="hljs-variable">$PATH</SPAN>:<SPAN class="hljs-variable">$NPM_PACKAGES</SPAN>/bin:<SPAN class="hljs-variable">$HOME</SPAN>/node/bin&quot;</SPAN><SPAN class="hljs-built_in">export</SPAN> MANPATH=<SPAN class="hljs-string">&quot;<SPAN class="hljs-variable">$NPM_PACKAGES</SPAN>/share/man:<SPAN class="hljs-variable">$MANPATH</SPAN>&quot;</SPAN></CODE></PRE><P>You can see <CODE>PATH</CODE> is the original PATH, followed by npm-packages, followed by
node. On OS X and Linux, you can add the above to your <CODE>.bashrc</CODE> or <CODE>.profile</CODE>,
etc. to achieve the same effect. To see your environment's <CODE>PATH</CODE>, run <CODE>echo
$PATH</CODE>. Note, I used the two methods mentioned above for not using sudo with
Node and npm, with custom folder names (<CODE>node</CODE>, and <CODE>npm-packages</CODE>). On Windows,
you can go to System -&gt; Advanced Settings -&gt; Environment Variables -&gt; Path and
edit it there.</P><H3 id="yeoman">Yeoman</H3><P><A href="http://yeoman.io/">Yeoman</A> is &quot;the Web's scaffoldig tool for modern webapps&quot;.
To get it, install it globally with npm:</P><PRE><CODE>npm <SPAN class="hljs-operator"><SPAN class="hljs-keyword">install</SPAN> -<SPAN class="hljs-keyword">g</SPAN> yo</SPAN></CODE></PRE><P>Once that is done, you can invoke the Yeoman with <CODE>yo</CODE></P><H4 id="generator">Generator</H4><P>Now we just need to install this generator:</P><PRE><CODE>npm <SPAN class="hljs-operator"><SPAN class="hljs-keyword">install</SPAN> -<SPAN class="hljs-keyword">g</SPAN> generator-igemwiki</SPAN></CODE></PRE><H2 id="usage">Usage</H2><P>Create a new project folder, <CODE>cd</CODE> into it (this generator dumps files into the
current directory), and run</P><PRE><CODE><SPAN class="hljs-title">yo</SPAN> igemwiki
</CODE></PRE><P>You will be asked for</P><UL><LI>the year (will default to current year)</LI><LI>team name is it appears <STRONG>exactly</STRONG> on the wiki (needed for push to live wiki)</LI><LI>author (optional)</LI><LI><A href="https://github.com/">GitHub</A> repo in the format <EM>username/repo</EM></LI><LI><STRONG>Why?</STRONG> As you will see, this generator exposes features which it make it
applicable for <STRONG>collobarative content editing</STRONG> when using the repo to
modify markdown files.</LI><LI>Still confused? You can skip this by passing in the option <CODE>--skip-repo</CODE>.
You can always push to a repo later.</LI></UL><H3 id="options">Options</H3><PRE><CODE><SPAN class="hljs-comment">yo</SPAN><SPAN class="hljs-comment">igemwiki</SPAN><SPAN class="hljs-literal">-</SPAN><SPAN class="hljs-literal">-</SPAN><SPAN class="hljs-comment">skip</SPAN><SPAN class="hljs-literal">-</SPAN><SPAN class="hljs-comment">install</SPAN><SPAN class="hljs-literal">-</SPAN><SPAN class="hljs-literal">-</SPAN><SPAN class="hljs-comment">skip</SPAN><SPAN class="hljs-literal">-</SPAN><SPAN class="hljs-comment">repo</SPAN></CODE></PRE><P><CODE>--skip-install</CODE> will prevent <CODE>bower install</CODE> and <CODE>npm install</CODE> from
automatically running. Use this if you know you need sudo to npm install and it
won't work anyways. <CODE>--skip-repo</CODE> will prevent the prompt asking you for your
repository.</P><H2 id="tools">Tools</H2><P>This generator is built using the following tools. You should have an idea what
they are each doing in order to use them effectively.</P><H3 id="bower">Bower</H3><P><A href="http://bower.io/">Bower</A> is &quot;a package manager for the web&quot;. Use it to install
frontend dependencies, such as <A href="http://getbootstrap.com/">bootstrap</A> or
<A href="https://fortawesome.github.io/Font-Awesome/">fontawesome</A> (<EM>todo: push font
files to wiki*</EM>). Install packages like so:</P><PRE><CODE>bower <SPAN class="hljs-operator"><SPAN class="hljs-keyword">install</SPAN><SPAN class="hljs-comment">--save bootstrap</SPAN></SPAN></CODE></PRE><P>The <CODE>--save</CODE> is important as it adds bootstrap to the dependencies object in the
<CODE>bower.json</CODE> file, and will be used by
<A href="https://github.com/taptapship/wiredep">wiredep</A> to inject the proper css and
script tags into the outputted html. Browser all the Bower packages
<A href="http://bower.io/search/">here</A>.</P><H3 id="gulp">Gulp</H3><P><A href="http://gulpjs.com/">Gulp</A> is a JavaScript task runner. It is the tool running
everything behind the development environment, build scripts, and push to live
wiki. You don't need to understand it's internals, and I will go over the tasks
it provides. Everything is in the
<A href="https://github.com/igemuoftATG/generator-igemwiki/blob/master/generators/app/templates/gulpfile.coffee">gulpfile</A>.
Feel free to add your own tasks and submit a pull request!</P><H3 id="handlebars">Handlebars</H3><P><A href="http://handlebarsjs.com/">Handlebars</A> is used to write templates. This
templates, when combined with helper functions and a set of object values can be
very powerful. This is how I am building links for development and live using
the same source files. The custom helper functions are all <A href="https://github.com/igemuoftATG/generator-igemwiki/blob/master/generators/app/templates/helpers.coffee">here</A>.
This file is much smaller than the gulpfile, and I encourage you to quickly take a look.
Using it, we can do things like:</P><PRE><CODE><SPAN class="hljs-expansion">{{capitals teamName}}</SPAN></CODE></PRE><P>To get</P><PRE><CODE>TORONTO
</CODE></PRE><P>Again, if you write your own helper functions which may be useful to other
teams, send a pull request!</P><H3 id="markdown">Markdown</H3><P>Markdown is easy to learn. Markdown provides a way to write clunky HTML without
having to write clunky HTML. Huh?</P><P>Consider this html for a level 1 heading:</P><PRE><CODE class="lang-html"><SPAN class="hljs-tag">&lt;<SPAN class="hljs-title">h1</SPAN>&gt;</SPAN> Wheeeeee <SPAN class="hljs-tag">&lt;/<SPAN class="hljs-title">h1</SPAN>&gt;</SPAN></CODE></PRE><P>Okay, that works, but in markdown it is sooo much cleaner:</P><PRE><CODE><SPAN class="hljs-preprocessor"># Wheeeeee</SPAN></CODE></PRE><P>You can use <CODE>#</CODE> to <CODE>######</CODE> for <CODE>&lt;h1&gt;</CODE> to <CODE>&lt;h6&gt;</CODE>, respectably. Still not convinced?</P><PRE><CODE class="lang-html"><SPAN class="hljs-tag">&lt;<SPAN class="hljs-title">img</SPAN><SPAN class="hljs-attribute">src</SPAN>=<SPAN class="hljs-value">&quot;http://45.55.193.224/logo_grey.png&quot;</SPAN> /&gt;</SPAN><SPAN class="hljs-tag">&lt;<SPAN class="hljs-title">ul</SPAN>&gt;</SPAN><SPAN class="hljs-tag">&lt;<SPAN class="hljs-title">li</SPAN>&gt;</SPAN><SPAN class="hljs-tag">&lt;<SPAN class="hljs-title">a</SPAN><SPAN class="hljs-attribute">href</SPAN>=<SPAN class="hljs-value">&quot;http://igemuoft.github.io&quot;</SPAN>&gt;</SPAN>iGEM UofT Computational Biology<SPAN class="hljs-tag">&lt;/<SPAN class="hljs-title">a</SPAN>&gt;</SPAN><SPAN class="hljs-tag">&lt;/<SPAN class="hljs-title">li</SPAN>&gt;</SPAN><SPAN class="hljs-tag">&lt;<SPAN class="hljs-title">li</SPAN>&gt;</SPAN><SPAN class="hljs-tag">&lt;<SPAN class="hljs-title">b</SPAN>&gt;</SPAN>wheeeee<SPAN class="hljs-tag">&lt;/<SPAN class="hljs-title">b</SPAN>&gt;</SPAN><SPAN class="hljs-tag">&lt;/<SPAN class="hljs-title">li</SPAN>&gt;</SPAN><SPAN class="hljs-tag">&lt;<SPAN class="hljs-title">li</SPAN>&gt;</SPAN><SPAN class="hljs-tag">&lt;<SPAN class="hljs-title">i</SPAN>&gt;</SPAN>wahooooooo<SPAN class="hljs-tag">&lt;/<SPAN class="hljs-title">i</SPAN>&gt;</SPAN><SPAN class="hljs-tag">&lt;/<SPAN class="hljs-title">li</SPAN>&gt;</SPAN><SPAN class="hljs-tag">&lt;/<SPAN class="hljs-title">ul</SPAN>&gt;</SPAN></CODE></PRE><P>vs.</P><PRE><CODE class="lang-md">![<SPAN class="hljs-link_label">logo</SPAN>](<SPAN class="hljs-link_url">http://45.55.193.224/logo_grey.png</SPAN>)
<SPAN class="hljs-bullet">* </SPAN>[<SPAN class="hljs-link_label">iGEM UofT Computational Biology</SPAN>](<SPAN class="hljs-link_url">http://igemuoft.github.io</SPAN>)
<SPAN class="hljs-bullet">* </SPAN><SPAN class="hljs-strong">**wheeeeee**</SPAN><SPAN class="hljs-bullet">* </SPAN><SPAN class="hljs-emphasis">*wahooooo*</SPAN></CODE></PRE><P>Oh and by the way, you just learned markdown. Still curious? See this <A href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">Markdown
Cheatsheet</A>.</P><H2 id="tasks">Tasks</H2><P>Gulp tasks are run with <CODE>gulp taskName</CODE>. A lot of the tasks in the gulpfile are
used internally within other tasks, though these are two you will most
commonly run:</P><H3 id="default">Default</H3><PRE><CODE>gulp
</CODE></PRE><P>Compiles sass, bundles CoffeeScript and JS, compiles handlebars templates,
compiles markdown, and provides a local version of the wiki at
<CODE>http://localhost:3000</CODE> using <A href="http://www.browsersync.io/">Browsersync</A>. (Which
also sets up a UI at <CODE>3001</CODE> and an external IP to use from your phone, all
connected!)</P><H3 id="push">Push</H3><PRE><CODE>gulp <SPAN class="hljs-keyword">push</SPAN></CODE></PRE><P>Runs <CODE>build:live</CODE> and then <CODE>push</CODE>. Same as above but uses <CODE>live</CODE> mode when
compiling templates, and minifies Bower css into <CODE>vendor.min.css</CODE>, personal css
into <CODE>styles.min.css</CODE>. Likewise for JS, except it uglifies as well, and personal
JS goes into <CODE>bundle.min.js</CODE>. Then using the
<A href="https://www.npmjs.com/package/request">request</A> package (in combination with
Chrome's web inspector Network tab), I've emulated to &quot;go to
pageName?action=edit, copy/paste into textbox, click save&quot;. You will be asked
for your username and password of course, and will automatically log out when
all uploads are complete.</P><H3 id="pull">Pull</H3><PRE><CODE><SPAN class="hljs-title">gulp</SPAN> pull
</CODE></PRE><P>Run this to download all current live files into <CODE>./pulled</CODE>.</P><H3 id="phantom">Phantom</H3><PRE><CODE><SPAN class="hljs-tag">gulp</SPAN><SPAN class="hljs-tag">phantom</SPAN><SPAN class="hljs-tag">gulp</SPAN><SPAN class="hljs-rule"><SPAN class="hljs-attribute">phantom</SPAN>:<SPAN class="hljs-value">sync</SPAN></SPAN></CODE></PRE><P>Spawn up some <A href="http://phantomjs.org/">Phantom</A> process and store screenshots
of your wiki across mobile, phablet, tablet, desktop, and desktophd resolutions
in <CODE>./phantom/mobile</CODE>, <CODE>./phantom/phablet</CODE>, ...</P><H2 id="important-files">Important Files</H2><H3 id="template">Template</H3><P>The main template file is at <CODE>./src/template.json</CODE>. This stores the team name,
year, links, markdown files, and navigation bar settings. It's used in almost
every helper function in <CODE>./helpers.coffee</CODE>, and has a mode, either <CODE>dev</CODE> or
<CODE>live</CODE> appended into it by the gulpfile before being used with handlebars.
If you want to add new pages, change the ordering of the navigation, add new
markdown files, edit this.</P><H3 id="styles">Styles</H3><P>Page styles are stored in <CODE>./src/sass</CODE>. There is a file there, <CODE>styles.scss</CODE>
which gets compiled into <CODE>./build-dev/css/styles.css</CODE>. All the other files here
are prefixed with <CODE>_</CODE> so that they don't compile for themselves (they are
imported within <CODE>styles.scss</CODE>). <A href="http://sass-lang.com/">Sass</A> lets you use
variables and functions in CSS, and is super awesome. It's very easy to learn,
if you already know css, you know sass.</P><H3 id="scripts">Scripts</H3><P>You can write JS and CoffeeScript inside <CODE>./src/lib</CODE>. You can use <CODE>require</CODE> syntax
because <A href="http://browserify.org/">Browserify</A> is employed. Everything here will
get bundled into <CODE>./build-dev/js/bundle.js</CODE></P><H3 id="pages">Pages</H3><P>Pages are written as Handlebars templates in <CODE>./src/*.hbs</CODE>.</P><H3 id="markdown">Markdown</H3><P>Markdown files are stored in <CODE>./src/markdown/*.md</CODE>. You can also write inline
markdown using the <CODE>markdownHere</CODE> helper.</P><H3 id="images">Images</H3><P>Images are stored in <CODE>./src/images</CODE>. They will have <CODE>teamName_YEAR_</CODE> appended
to the filename when uploading. <CODE>images.json</CODE> will store a link to the full
resolution of each image.</P><H2 id="helper-functions">Helper Functions</H2><P>For complete detail, read through
<A href="https://github.com/igemuoftATG/generator-igemwiki/blob/master/generators/app/templates/helpers.coffee">helpers.coffee</A>.
Here is a summary of the helper functions which take parameters (other than
<CODE>mode</CODE>, which is injected into a new template as either <CODE>dev</CODE> or <CODE>live</CODE> for the
<CODE>build:dev</CODE> and <CODE>build:live</CODE> tasks, respectably).</P><H3 id="images-image-format-mode-">images(image, format, mode)</H3><P><CODE>image</CODE> is the filename exactly as it appears in <CODE>./images</CODE>, including the
extension. <CODE>format</CODE> can be:</P><UL><LI>&quot;file&quot; -&gt; inline image using wiki code. forces breaking/reopening html</LI><LI>&quot;media&quot; -&gt; wiki code link to image without showing image, same as above with regards to html</LI><LI>&quot;directlink&quot; -&gt; The preferred method. Requires <CODE>images.json</CODE> to already store the image link.</LI></UL></DIV></DIV><DIV id="tableofcontents" class="tableofcontents affix sidebar col-lg-4 hidden-xs hidden-sm hidden-md visible-lg-3"><UL class="nav"><LI><A href="#install">Install</A></LI><LI><A href="#kek-bro--whats-the-package-name-">kek bro, whats the package name?</A></LI><LI><A href="#nodejs">Node.js</A></LI><LI><A href="#npm">NPM</A></LI><LI><A href="#yeoman">Yeoman</A></LI><LI><A href="#generator">Generator</A></LI></UL><LI><A href="#usage">Usage</A></LI><LI><A href="#options">Options</A></LI><LI><A href="#tools">Tools</A></LI><LI><A href="#bower">Bower</A></LI><LI><A href="#gulp">Gulp</A></LI><LI><A href="#handlebars">Handlebars</A></LI><LI><A href="#markdown">Markdown</A></LI><LI><A href="#tasks">Tasks</A></LI><LI><A href="#default">Default</A></LI><LI><A href="#push">Push</A></LI><LI><A href="#pull">Pull</A></LI><LI><A href="#phantom">Phantom</A></LI><LI><A href="#important-files">Important Files</A></LI><LI><A href="#template">Template</A></LI><LI><A href="#styles">Styles</A></LI><LI><A href="#scripts">Scripts</A></LI><LI><A href="#pages">Pages</A></LI><LI><A href="#markdown">Markdown</A></LI><LI><A href="#images">Images</A></LI><LI><A href="#helper-functions">Helper Functions</A></LI><LI><A href="#images-image--format--mode-">images(image, format, mode)</A></LI></DIV></DIV></DIV></DIV></DIV></DIV></DIV></BODY></HTML>