<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Fudan_fudan_jquery_crSpline_js skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Fudan/fudan jquery.crSpline.js</SPAN></H1><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>(function($){$.crSpline={};var interpolate=function(t,p_1,p0,p1,p2){return Math.floor((t*((2-t)*t-1)*p_1+(t*t*(3*t-5)+2)*p0+t*((4-3*t)*t+1)*p1+(t-1)*t*t*p2)/2)};var generateExtension=function(p1,p2){return[p2[0]+(p2[0]-p1[0]),p2[1]+(p2[1]-p1[1])]};$.crSpline.buildSequence=function(pointList){var res={};var seq=[];var numSegments;if(pointList.length&lt;2){throw&quot;crSpline.buildSequence requires at least two points&quot;}seq.push(generateExtension(pointList[1],pointList[0]));for(var i=0;i&lt;pointList.length;i++){seq.push(pointList[i])}seq.push(generateExtension(seq[seq.length-2],seq[seq.length-1]));numSegments=seq.length-3;res.getPos=function(t){var segNum=Math.floor(t*numSegments);if(segNum===numSegments){return{left:seq[seq.length-2][0],top:seq[seq.length-2][1]}}var microT=(t-segNum/numSegments)*numSegments;var result={left:interpolate(microT,seq[segNum][0],seq[segNum+1][0],seq[segNum+2][0],seq[segNum+3][0])+&quot;px&quot;,top:interpolate(microT,seq[segNum][1],seq[segNum+1][1],seq[segNum+2][1],seq[segNum+3][1])+&quot;px&quot;};return result};return res};$.fx.step.crSpline=function(fx){var css=fx.end.getPos(fx.pos);for(var i in css){fx.elem.style[i]=css[i]}}})(jQuery);
</P></DIV></DIV></DIV></DIV></BODY></HTML>