<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_Fudan_js_index skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:Fudan/js/index</SPAN></H1><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><P>var mousewheel = document.all ? &quot;mousewheel&quot; : &quot;DOMMouseScroll&quot;;
var currentDegree = 0;
var index = 0;
</P><P>function FadeOutAll() {
	$(&quot;.achievement_title&quot;).fadeOut(300);
	$(&quot;.design_title&quot;).fadeOut(300);
	$(&quot;.modeling_title&quot;).fadeOut(300);
	$(&quot;.parts_title&quot;).fadeOut(300);
	$(&quot;.team_title&quot;).fadeOut(300);
	$(&quot;.practice_title&quot;).fadeOut(300);
}
function ExchangeTittle(callback) {
	FadeOutAll();
	var t = setTimeout(&quot;$('#modeling_title').fadeIn();&quot;,300);
}
</P><P>function scroll(id) {
	$(&quot;#&quot; + id).HoverTreeScroll(650);
}
</P><P>function fadeSwitchElements(id1, id2) {
	var element1 = $('#' + id1);
	var element2 = $('#' + id2);
	if (element1.is(':visible')) {
		element1.fadeToggle(500);
		element2.fadeToggle(500);
	} else {
		element2.fadeToggle(500, function() {
			element1.fadeToggle(500);
		});
	}
}
</P><P>function AnimateRotate(fromD,toD, id){
	index = -(currentDegree/30);
</P><PRE>   $({deg: fromD}).animate({deg: toD}, {
       step: function(now, fx){
           $(&quot;#gear&quot;).css({
                transform: &quot;rotate(&quot; + now + &quot;deg)&quot;
           });
       }
   });
</PRE><P>}
function wheelMove(event, deltaY) {
	event.preventDefault();
	event.returnValue = false;
	$('#body').unbind('mousewheel');
	if (deltaY &gt; 0) {
		scroll('main_index');
	}
	if (deltaY &lt; 0) {
		scroll('main_content');
	}
}
var points = [];
points.push([60,90]);
points.push([140,25]);
points.push([225,13]);
points.push([305,30]);
points.push([382,90]);
points.push([390,167]);
points.push([370,290]);
points.push([299,347]);
points.push([208,367]);
points.push([117,334]);
points.push([52,253]);
var spline = $.crSpline.buildSequence(points);
</P><P>function getPositoin(id) {
	var nowleft = $(&quot;#&quot; + id).css(&quot;left&quot;);
	nowleft = Number(nowleft.substr(0,nowleft.length-2));
	var nowtop = $(&quot;#&quot; + id).css(&quot;top&quot;);
	nowtop = Number(nowtop.substr(0,nowtop.length-2));
	var ret = [nowleft,nowtop];
	return ret;
}
</P><P>window.onload = function() {
	jQuery(window).scrollTop(0);
	$(&quot;#loading&quot;).fadeOut(800);
	//滚轮
	var interval = setInterval(function() {
		$('#body').bind('mousewheel', wheelMove);
	}, 950);
	$('#body').bind('mousewheel', wheelMove);
	//方向键
	$(document).keydown(function(event) {
		event.preventDefault();
		event.returnValue = false;
		if (event.keyCode == 38) {
			scroll('main_index');
		} else if (event.keyCode == 40) {
			scroll('main_content');
		}
	});
</P><P>	$(&quot;#achievement&quot;).click(function() {
		AnimateRotate(currentDegree, 0);
		console.log(index);
		indexBefore = -(currentDegree/30);
		currentDegree = 0;
		indexAfrer = -(currentDegree/30);
		FadeOutAll();
		var t = setTimeout(&quot;$('.achievement_title').fadeIn();&quot;,300);
		$(&quot;#achievement&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[5-indexBefore],points[5-indexAfrer]]),
			width: '146px'},
			500
		);
		$(&quot;#design&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[6-indexBefore],points[6-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#model&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[7-indexBefore],points[7-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#parts&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[8-indexBefore],points[8-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#team&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[9-indexBefore],points[9-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#practice&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[10-indexBefore],points[10-indexAfrer]]),
			width: '91px'},
			500
		);
	})
</P><P>	$(&quot;#design&quot;).click(function() {
		AnimateRotate(currentDegree, -30);
		console.log(index);
		indexBefore = -(currentDegree/30);
		currentDegree = -30;
		indexAfrer = -(currentDegree/30);
		FadeOutAll();
		var t = setTimeout(&quot;$('.design_title').fadeIn();&quot;,300);
		$(&quot;#achievement&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[5-indexBefore],points[5-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#design&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[6-indexBefore],points[6-indexAfrer]]),
			width: '146px'},
			500
		);
		$(&quot;#model&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[7-indexBefore],points[7-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#parts&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[8-indexBefore],points[8-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#team&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[9-indexBefore],points[9-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#practice&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[10-indexBefore],points[10-indexAfrer]]),
			width: '91px'},
			500
		);
	})
</P><P>	$(&quot;#model&quot;).click(function() {
		AnimateRotate(currentDegree, -60);
		console.log(index);
		indexBefore = -(currentDegree/30);
		currentDegree = -60;
		indexAfrer = -(currentDegree/30);
		FadeOutAll();
		var t = setTimeout(&quot;$('.modeling_title').fadeIn();&quot;,300);
		$(&quot;#achievement&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[5-indexBefore],points[5-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#design&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[6-indexBefore],points[6-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#model&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[7-indexBefore],points[7-indexAfrer]]),
			width: '146px'},
			500
		);
		$(&quot;#parts&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[8-indexBefore],points[8-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#team&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[9-indexBefore],points[9-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#practice&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[10-indexBefore],points[10-indexAfrer]]),
			width: '91px'},
			500
		);
	})
</P><P>	$(&quot;#parts&quot;).click(function() {
		AnimateRotate(currentDegree, -90);
		console.log(index);
		indexBefore = -(currentDegree/30);
		currentDegree = -90;
		indexAfrer = -(currentDegree/30);
		FadeOutAll();
		var t = setTimeout(&quot;$('.parts_title').fadeIn();&quot;,300);
		$(&quot;#achievement&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[5-indexBefore],points[5-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#design&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[6-indexBefore],points[6-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#model&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[7-indexBefore],points[7-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#parts&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[8-indexBefore],points[8-indexAfrer]]),
			width: '146px'},
			500
		);
		$(&quot;#team&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[9-indexBefore],points[9-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#practice&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[10-indexBefore],points[10-indexAfrer]]),
			width: '91px'},
			500
		);
	})
</P><P>	$(&quot;#team&quot;).click(function() {
		AnimateRotate(currentDegree, -120);
		console.log(index);
		indexBefore = -(currentDegree/30);
		currentDegree = -120;
		indexAfrer = -(currentDegree/30);
		FadeOutAll();
		var t = setTimeout(&quot;$('.team_title').fadeIn();&quot;,300);
		$(&quot;#achievement&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[5-indexBefore],points[5-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#design&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[6-indexBefore],points[6-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#model&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[7-indexBefore],points[7-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#parts&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[8-indexBefore],points[8-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#team&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[9-indexBefore],points[9-indexAfrer]]),
			width: '146px'},
			500
		);
		$(&quot;#practice&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[10-indexBefore],points[10-indexAfrer]]),
			width: '91px'},
			500
		);
	})
</P><P>	$(&quot;#practice&quot;).click(function() {
		AnimateRotate(currentDegree, -150);
		console.log(index);
		indexBefore = -(currentDegree/30);
		currentDegree = -150;
		indexAfrer = -(currentDegree/30);
		FadeOutAll();
		var t = setTimeout(&quot;$('.practice_title').fadeIn();&quot;,300);
		$(&quot;#achievement&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[5-indexBefore],points[5-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#design&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[6-indexBefore],points[6-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#model&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[7-indexBefore],points[7-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#parts&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[8-indexBefore],points[8-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#team&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[9-indexBefore],points[9-indexAfrer]]),
			width: '91px'},
			500
		);
		$(&quot;#practice&quot;).animate(
			{crSpline: $.crSpline.buildSequence([points[10-indexBefore],points[10-indexAfrer]]),
			width: '146px'},
			500
		);
	})
}
</P></DIV></DIV></DIV></DIV></BODY></HTML>