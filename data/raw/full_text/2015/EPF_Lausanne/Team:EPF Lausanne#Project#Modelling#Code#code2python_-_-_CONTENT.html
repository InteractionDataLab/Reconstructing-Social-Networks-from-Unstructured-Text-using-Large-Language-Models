<HTML lang="en" dir="ltr" class="client-nojs">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Team_EPF_Lausanne_Project_Modelling_Code_code2python skin-igem action-view"><DIV id="globalWrapper"><DIV id="content" class="mw-body" role="main"><H1 id="firstHeading" class="firstHeading"><SPAN dir="auto">Team:EPF Lausanne/Project/Modelling/Code/code2python</SPAN></H1><DIV id="bodyContent"><DIV id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><DIV class="highlight"><PRE><SPAN class="kn">from</SPAN><SPAN class="nn">pygments</SPAN><SPAN class="kn">import</SPAN><SPAN class="n">highlight</SPAN><SPAN class="kn">from</SPAN><SPAN class="nn">pygments.lexers</SPAN><SPAN class="kn">import</SPAN><SPAN class="n">PythonLexer</SPAN><SPAN class="kn">from</SPAN><SPAN class="nn">pygments.lexers</SPAN><SPAN class="kn">import</SPAN><SPAN class="n">CppLexer</SPAN><SPAN class="kn">from</SPAN><SPAN class="nn">pygments.formatters</SPAN><SPAN class="kn">import</SPAN><SPAN class="n">HtmlFormatter</SPAN><SPAN class="c"># C++ extensions</SPAN><SPAN class="n">cpp</SPAN><SPAN class="o">=</SPAN><SPAN class="p">[</SPAN><SPAN class="s">&quot;cpp&quot;</SPAN><SPAN class="p">,</SPAN><SPAN class="s">&quot;cxx&quot;</SPAN><SPAN class="p">,</SPAN><SPAN class="s">&quot;cc&quot;</SPAN><SPAN class="p">,</SPAN><SPAN class="s">&quot;h&quot;</SPAN><SPAN class="p">]</SPAN><SPAN class="c"># Python extensions</SPAN><SPAN class="n">py</SPAN><SPAN class="o">=</SPAN><SPAN class="p">[</SPAN><SPAN class="s">&quot;py&quot;</SPAN><SPAN class="p">]</SPAN><SPAN class="k">def</SPAN><SPAN class="nf">load_file_as_sting</SPAN><SPAN class="p">(</SPAN><SPAN class="n">fname</SPAN><SPAN class="p">):</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="sd">    Open the file FNAME and save all its content in an unformatted string</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="n">content</SPAN><SPAN class="o">=</SPAN><SPAN class="s">&quot;&quot;</SPAN><SPAN class="k">with</SPAN><SPAN class="nb">open</SPAN><SPAN class="p">(</SPAN><SPAN class="n">fname</SPAN><SPAN class="p">,</SPAN><SPAN class="s">'r'</SPAN><SPAN class="p">)</SPAN><SPAN class="k">as</SPAN><SPAN class="n">f</SPAN><SPAN class="p">:</SPAN><SPAN class="c"># Open the file (read only)</SPAN><SPAN class="n">content</SPAN><SPAN class="o">=</SPAN><SPAN class="n">f</SPAN><SPAN class="o">.</SPAN><SPAN class="n">read</SPAN><SPAN class="p">()</SPAN><SPAN class="c"># Read file and store it in an unformatted string</SPAN><SPAN class="c"># The file is automatically closed</SPAN><SPAN class="k">return</SPAN><SPAN class="n">content</SPAN><SPAN class="k">def</SPAN><SPAN class="nf">save_string_as_file</SPAN><SPAN class="p">(</SPAN><SPAN class="n">fname</SPAN><SPAN class="p">,</SPAN><SPAN class="n">string</SPAN><SPAN class="p">):</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="sd">    Save the unformatted string STRING into the file FNAME</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="k">with</SPAN><SPAN class="nb">open</SPAN><SPAN class="p">(</SPAN><SPAN class="n">fname</SPAN><SPAN class="p">,</SPAN><SPAN class="s">'w'</SPAN><SPAN class="p">)</SPAN><SPAN class="k">as</SPAN><SPAN class="n">f</SPAN><SPAN class="p">:</SPAN><SPAN class="c"># Open the file (write only)</SPAN><SPAN class="n">f</SPAN><SPAN class="o">.</SPAN><SPAN class="n">write</SPAN><SPAN class="p">(</SPAN><SPAN class="n">string</SPAN><SPAN class="p">)</SPAN><SPAN class="c"># The file is automatically closed</SPAN><SPAN class="k">def</SPAN><SPAN class="nf">lexer_formatter</SPAN><SPAN class="p">(</SPAN><SPAN class="n">language</SPAN><SPAN class="p">,</SPAN><SPAN class="n">css</SPAN><SPAN class="o">=</SPAN><SPAN class="bp">False</SPAN><SPAN class="p">):</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="sd">    Return the lexer for the appropriate language and the HTML formatter</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="n">L</SPAN><SPAN class="o">=</SPAN><SPAN class="bp">None</SPAN><SPAN class="k">if</SPAN><SPAN class="n">language</SPAN><SPAN class="ow">in</SPAN><SPAN class="n">py</SPAN><SPAN class="p">:</SPAN><SPAN class="c"># Python Lexer</SPAN><SPAN class="n">L</SPAN><SPAN class="o">=</SPAN><SPAN class="n">PythonLexer</SPAN><SPAN class="p">()</SPAN><SPAN class="k">elif</SPAN><SPAN class="n">language</SPAN><SPAN class="ow">in</SPAN><SPAN class="n">cpp</SPAN><SPAN class="p">:</SPAN><SPAN class="c"># C++ Lexer</SPAN><SPAN class="n">L</SPAN><SPAN class="o">=</SPAN><SPAN class="n">CppLexer</SPAN><SPAN class="p">()</SPAN><SPAN class="k">else</SPAN><SPAN class="p">:</SPAN><SPAN class="k">raise</SPAN><SPAN class="ne">NameError</SPAN><SPAN class="p">(</SPAN><SPAN class="s">&quot;Invalid language.&quot;</SPAN><SPAN class="p">)</SPAN><SPAN class="n">HF</SPAN><SPAN class="o">=</SPAN><SPAN class="n">HtmlFormatter</SPAN><SPAN class="p">(</SPAN><SPAN class="n">full</SPAN><SPAN class="o">=</SPAN><SPAN class="ow">not</SPAN><SPAN class="n">css</SPAN><SPAN class="p">,</SPAN><SPAN class="n">style</SPAN><SPAN class="o">=</SPAN><SPAN class="s">&quot;monokai&quot;</SPAN><SPAN class="p">)</SPAN><SPAN class="k">return</SPAN><SPAN class="n">L</SPAN><SPAN class="p">,</SPAN><SPAN class="n">HF</SPAN><SPAN class="k">def</SPAN><SPAN class="nf">code_to_htmlcss</SPAN><SPAN class="p">(</SPAN><SPAN class="n">code</SPAN><SPAN class="p">,</SPAN><SPAN class="n">language</SPAN><SPAN class="p">):</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="sd">    Transform CODE into html and css (separate files)</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="c"># Obtain lexer and HtmlFormatter</SPAN><SPAN class="n">L</SPAN><SPAN class="p">,</SPAN><SPAN class="n">HF</SPAN><SPAN class="o">=</SPAN><SPAN class="n">lexer_formatter</SPAN><SPAN class="p">(</SPAN><SPAN class="n">language</SPAN><SPAN class="p">,</SPAN><SPAN class="n">css</SPAN><SPAN class="o">=</SPAN><SPAN class="bp">True</SPAN><SPAN class="p">)</SPAN><SPAN class="c"># Create html code</SPAN><SPAN class="n">html</SPAN><SPAN class="o">=</SPAN><SPAN class="n">highlight</SPAN><SPAN class="p">(</SPAN><SPAN class="n">code</SPAN><SPAN class="p">,</SPAN><SPAN class="n">L</SPAN><SPAN class="p">,</SPAN><SPAN class="n">HF</SPAN><SPAN class="p">)</SPAN><SPAN class="c"># Create css code</SPAN><SPAN class="n">css</SPAN><SPAN class="o">=</SPAN><SPAN class="n">HF</SPAN><SPAN class="o">.</SPAN><SPAN class="n">get_style_defs</SPAN><SPAN class="p">(</SPAN><SPAN class="s">'.highlight'</SPAN><SPAN class="p">)</SPAN><SPAN class="k">return</SPAN><SPAN class="n">html</SPAN><SPAN class="p">,</SPAN><SPAN class="n">css</SPAN><SPAN class="k">def</SPAN><SPAN class="nf">code_to_html</SPAN><SPAN class="p">(</SPAN><SPAN class="n">code</SPAN><SPAN class="p">,</SPAN><SPAN class="n">language</SPAN><SPAN class="p">):</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="sd">    Transform CODE into html and css (all in the same file)</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="c"># Obtain lexer and HtmlFormatter</SPAN><SPAN class="n">L</SPAN><SPAN class="p">,</SPAN><SPAN class="n">HF</SPAN><SPAN class="o">=</SPAN><SPAN class="n">lexer_formatter</SPAN><SPAN class="p">(</SPAN><SPAN class="n">language</SPAN><SPAN class="p">)</SPAN><SPAN class="c"># Create fill html code</SPAN><SPAN class="n">html</SPAN><SPAN class="o">=</SPAN><SPAN class="n">highlight</SPAN><SPAN class="p">(</SPAN><SPAN class="n">code</SPAN><SPAN class="p">,</SPAN><SPAN class="n">L</SPAN><SPAN class="p">,</SPAN><SPAN class="n">HF</SPAN><SPAN class="p">)</SPAN><SPAN class="k">return</SPAN><SPAN class="n">html</SPAN><SPAN class="kn">import</SPAN><SPAN class="nn">sys</SPAN><SPAN class="k">if</SPAN><SPAN class="n">__name__</SPAN><SPAN class="o">==</SPAN><SPAN class="s">&quot;__main__&quot;</SPAN><SPAN class="p">:</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="sd">    Command:</SPAN><SPAN class="sd">    ######################################</SPAN><SPAN class="sd">        python code2html INPUTFILE [CSS]</SPAN><SPAN class="sd">    ######################################</SPAN><SPAN class="sd">    INPUTFILE: name (with path) of the file to convert to html</SPAN><SPAN class="sd">    CSS: write &quot;true&quot; in order to obtain separate .html and .css files (&quot;false&quot; by default)</SPAN><SPAN class="sd">&quot;&quot;&quot;</SPAN><SPAN class="c"># Command line arguments</SPAN><SPAN class="n">args</SPAN><SPAN class="o">=</SPAN><SPAN class="n">sys</SPAN><SPAN class="o">.</SPAN><SPAN class="n">argv</SPAN><SPAN class="c"># Check command line arguments</SPAN><SPAN class="n">ncla</SPAN><SPAN class="o">=</SPAN><SPAN class="nb">len</SPAN><SPAN class="p">(</SPAN><SPAN class="n">args</SPAN><SPAN class="p">)</SPAN><SPAN class="c"># number of command line arguments</SPAN><SPAN class="k">if</SPAN><SPAN class="n">ncla</SPAN><SPAN class="o">!=</SPAN><SPAN class="mi">2</SPAN><SPAN class="ow">and</SPAN><SPAN class="n">ncla</SPAN><SPAN class="o">!=</SPAN><SPAN class="mi">3</SPAN><SPAN class="p">:</SPAN><SPAN class="k">raise</SPAN><SPAN class="ne">TypeError</SPAN><SPAN class="p">(</SPAN><SPAN class="s">&quot;Invalid number of command line arguments.&quot;</SPAN><SPAN class="p">)</SPAN><SPAN class="n">css_bool</SPAN><SPAN class="o">=</SPAN><SPAN class="bp">False</SPAN><SPAN class="k">if</SPAN><SPAN class="n">ncla</SPAN><SPAN class="o">==</SPAN><SPAN class="mi">3</SPAN><SPAN class="ow">and</SPAN><SPAN class="n">args</SPAN><SPAN class="p">[</SPAN><SPAN class="o">-</SPAN><SPAN class="mi">1</SPAN><SPAN class="p">]</SPAN><SPAN class="o">.</SPAN><SPAN class="n">lower</SPAN><SPAN class="p">()</SPAN><SPAN class="o">==</SPAN><SPAN class="s">&quot;true&quot;</SPAN><SPAN class="p">:</SPAN><SPAN class="n">css_bool</SPAN><SPAN class="o">=</SPAN><SPAN class="bp">True</SPAN><SPAN class="c"># Export css separately</SPAN><SPAN class="c"># Input file</SPAN><SPAN class="n">fname_code</SPAN><SPAN class="o">=</SPAN><SPAN class="n">sys</SPAN><SPAN class="o">.</SPAN><SPAN class="n">argv</SPAN><SPAN class="p">[</SPAN><SPAN class="mi">1</SPAN><SPAN class="p">]</SPAN><SPAN class="c"># Name of the file containing the code to convert in html</SPAN><SPAN class="c"># Input file extension</SPAN><SPAN class="n">language</SPAN><SPAN class="o">=</SPAN><SPAN class="n">fname_code</SPAN><SPAN class="o">.</SPAN><SPAN class="n">split</SPAN><SPAN class="p">(</SPAN><SPAN class="s">'.'</SPAN><SPAN class="p">)[</SPAN><SPAN class="o">-</SPAN><SPAN class="mi">1</SPAN><SPAN class="p">]</SPAN><SPAN class="c"># Output files</SPAN><SPAN class="n">fname_html</SPAN><SPAN class="o">=</SPAN><SPAN class="n">fname_code</SPAN><SPAN class="o">.</SPAN><SPAN class="n">split</SPAN><SPAN class="p">(</SPAN><SPAN class="s">'.'</SPAN><SPAN class="p">)[</SPAN><SPAN class="mi">0</SPAN><SPAN class="p">]</SPAN><SPAN class="o">+</SPAN><SPAN class="s">&quot;.html&quot;</SPAN><SPAN class="c"># Name of the file where the html code will be stored</SPAN><SPAN class="n">fname_css</SPAN><SPAN class="o">=</SPAN><SPAN class="n">fname_code</SPAN><SPAN class="o">.</SPAN><SPAN class="n">split</SPAN><SPAN class="p">(</SPAN><SPAN class="s">'.'</SPAN><SPAN class="p">)[</SPAN><SPAN class="mi">0</SPAN><SPAN class="p">]</SPAN><SPAN class="o">+</SPAN><SPAN class="s">&quot;.css&quot;</SPAN><SPAN class="c"># Name of the file where the css code will be stored</SPAN><SPAN class="c"># Save code into a unformatted string</SPAN><SPAN class="n">code</SPAN><SPAN class="o">=</SPAN><SPAN class="n">load_file_as_sting</SPAN><SPAN class="p">(</SPAN><SPAN class="n">fname_code</SPAN><SPAN class="p">)</SPAN><SPAN class="k">if</SPAN><SPAN class="n">css_bool</SPAN><SPAN class="o">==</SPAN><SPAN class="bp">False</SPAN><SPAN class="p">:</SPAN><SPAN class="c"># Convert to standalone html</SPAN><SPAN class="n">html</SPAN><SPAN class="o">=</SPAN><SPAN class="n">code_to_html</SPAN><SPAN class="p">(</SPAN><SPAN class="n">code</SPAN><SPAN class="p">,</SPAN><SPAN class="n">language</SPAN><SPAN class="p">)</SPAN><SPAN class="k">else</SPAN><SPAN class="p">:</SPAN><SPAN class="c"># Convert to html and css separately</SPAN><SPAN class="n">html</SPAN><SPAN class="p">,</SPAN><SPAN class="n">css</SPAN><SPAN class="o">=</SPAN><SPAN class="n">code_to_htmlcss</SPAN><SPAN class="p">(</SPAN><SPAN class="n">code</SPAN><SPAN class="p">,</SPAN><SPAN class="n">language</SPAN><SPAN class="p">)</SPAN><SPAN class="c"># Save html</SPAN><SPAN class="n">save_string_as_file</SPAN><SPAN class="p">(</SPAN><SPAN class="n">fname_html</SPAN><SPAN class="p">,</SPAN><SPAN class="n">html</SPAN><SPAN class="p">)</SPAN><SPAN class="k">if</SPAN><SPAN class="n">css_bool</SPAN><SPAN class="o">==</SPAN><SPAN class="bp">True</SPAN><SPAN class="p">:</SPAN><SPAN class="c"># Save css</SPAN><SPAN class="n">save_string_as_file</SPAN><SPAN class="p">(</SPAN><SPAN class="n">fname_css</SPAN><SPAN class="p">,</SPAN><SPAN class="n">css</SPAN><SPAN class="p">)</SPAN></PRE></DIV></DIV></DIV></DIV></DIV></BODY></HTML>