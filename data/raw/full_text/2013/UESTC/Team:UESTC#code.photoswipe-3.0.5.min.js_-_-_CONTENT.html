<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_UESTC_code_photoswipe-3_0_5_min_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:UESTC/code.photoswipe-3.0.5.min.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:UESTC/code.photoswipe-3.0.5.min.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:UESTC/code.photoswipe-3.0.5.min.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:UESTC/code.photoswipe-3.0.5.min.js&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:UESTC/code.photoswipe-3.0.5.min.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform">Â </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:UESTC/code.photoswipe-3.0.5.min.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2013.igem.org</H3><P>// PhotoSwipe - <A href="http://www.photoswipe.com/" class="external free" rel="nofollow">http://www.photoswipe.com/</A>
// Copyright (c) 2012 by Code Computerlove (<A href="http://www.codecomputerlove.com" class="external free" rel="nofollow">http://www.codecomputerlove.com</A>)
// Licensed under the MIT license
// version: 3.0.5
(function(e){if(!Function.prototype.bind)Function.prototype.bind=function(c){var a=[].slice,b=a.call(arguments,1),d=this,f=function(){},g=function(){return d.apply(this instanceof f?this:c||{},b.concat(a.call(arguments)))};f.prototype=d.prototype;g.prototype=new f;return g};if(typeof e.Code===&quot;undefined&quot;)e.Code={};e.Code.Util={registerNamespace:function(){var c=arguments,a=null,b,d,f,g,h;b=0;for(g=c.length;b&lt;g;b++){f=c[b];f=f.split(&quot;.&quot;);a=f[0];typeof e[a]===&quot;undefined&quot;&amp;&amp;(e[a]={});a=e[a];d=1;for(h=
f.length;d&lt;h;++d)a[f[d]]=a[f[d]]||{},a=a[f[d]]}},coalesce:function(){var c,a;c=0;for(a=arguments.length;c&lt;a;c++)if(!this.isNothing(arguments[c]))return arguments[c];return null},extend:function(c,a,b){var d;this.isNothing(b)&amp;&amp;(b=!0);if(c&amp;&amp;a&amp;&amp;this.isObject(a))for(d in a)this.objectHasProperty(a,d)&amp;&amp;(b?c[d]=a[d]:typeof c[d]===&quot;undefined&quot;&amp;&amp;(c[d]=a[d]))},clone:function(c){var a={};this.extend(a,c);return a},isObject:function(c){return c instanceof Object},isFunction:function(c){return{}.toString.call(c)===
&quot;[object Function]&quot;},isArray:function(c){return c instanceof Array},isLikeArray:function(c){return typeof c.length===&quot;number&quot;},isNumber:function(c){return typeof c===&quot;number&quot;},isString:function(c){return typeof c===&quot;string&quot;},isNothing:function(c){if(typeof c===&quot;undefined&quot;||c===null)return!0;return!1},swapArrayElements:function(c,a,b){var d=c[a];c[a]=c[b];c[b]=d},trim:function(c){return c.replace(/^\s\s*/,&quot;&quot;).replace(/\s\s*$/,&quot;&quot;)},toCamelCase:function(c){return c.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace(&quot;-&quot;,
&quot;&quot;)})},toDashedCase:function(c){return c.replace(/([A-Z])/g,function(a){return&quot;-&quot;+a.toLowerCase()})},arrayIndexOf:function(c,a,b){var d,f,g,e;g=-1;d=0;for(f=a.length;d&lt;f;d++)if(e=a[d],this.isNothing(b)){if(e===c){g=d;break}}else if(this.objectHasProperty(e,b)&amp;&amp;e[b]===c){g=d;break}return g},objectHasProperty:function(c,a){return c.hasOwnProperty?c.hasOwnProperty(a):&quot;undefined&quot;!==typeof c[a]}}})(window);
(function(e,c){c.Browser={ua:null,version:null,safari:null,webkit:null,opera:null,msie:null,chrome:null,mozilla:null,android:null,blackberry:null,iPad:null,iPhone:null,iPod:null,iOS:null,is3dSupported:null,isCSSTransformSupported:null,isTouchSupported:null,isGestureSupported:null,_detect:function(){this.ua=e.navigator.userAgent;this.version=this.ua.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[];this.safari=/Safari/gi.test(e.navigator.appVersion);this.webkit=/webkit/i.test(this.ua);this.opera=/opera/i.test(this.ua);
this.msie=/msie/i.test(this.ua)&amp;&amp;!this.opera;this.chrome=/Chrome/i.test(this.ua);this.firefox=/Firefox/i.test(this.ua);this.fennec=/Fennec/i.test(this.ua);this.mozilla=/mozilla/i.test(this.ua)&amp;&amp;!/(compatible|webkit)/.test(this.ua);this.android=/android/i.test(this.ua);this.blackberry=/blackberry/i.test(this.ua);this.iOS=/iphone|ipod|ipad/gi.test(e.navigator.platform);this.iPad=/ipad/gi.test(e.navigator.platform);this.iPhone=/iphone/gi.test(e.navigator.platform);this.iPod=/ipod/gi.test(e.navigator.platform);
var a=document.createElement(&quot;div&quot;);this.is3dSupported=!c.isNothing(a.style.WebkitPerspective);this.isCSSTransformSupported=!c.isNothing(a.style.WebkitTransform)||!c.isNothing(a.style.MozTransform)||!c.isNothing(a.style.transformProperty);this.isTouchSupported=this.isEventSupported(&quot;touchstart&quot;);this.isGestureSupported=this.isEventSupported(&quot;gesturestart&quot;)},_eventTagNames:{select:&quot;input&quot;,change:&quot;input&quot;,submit:&quot;form&quot;,reset:&quot;form&quot;,error:&quot;img&quot;,load:&quot;img&quot;,abort:&quot;img&quot;},isEventSupported:function(a){var b=
document.createElement(this._eventTagNames[a]||&quot;div&quot;),d,a=&quot;on&quot;+a;d=c.objectHasProperty(b,a);d||(b.setAttribute(a,&quot;return;&quot;),d=typeof b[a]===&quot;function&quot;);return d},isLandscape:function(){return c.DOM.windowWidth()&gt;c.DOM.windowHeight()}};c.Browser._detect()})(window,window.Code.Util);
(function(e,c){c.extend(c,{Events:{add:function(a,b,d){this._checkHandlersProperty(a);b===&quot;mousewheel&quot;&amp;&amp;(b=this._normaliseMouseWheelType());typeof a.__eventHandlers[b]===&quot;undefined&quot;&amp;&amp;(a.__eventHandlers[b]=[]);a.__eventHandlers[b].push(d);this._isBrowserObject(a)&amp;&amp;a.addEventListener(b,d,!1)},remove:function(a,b,d){this._checkHandlersProperty(a);b===&quot;mousewheel&quot;&amp;&amp;(b=this._normaliseMouseWheelType());if(a.__eventHandlers[b]instanceof Array){var f,g,e=a.__eventHandlers[b];if(c.isNothing(d)){if(this._isBrowserObject(a)){f=
0;for(g=e.length;f&lt;g;f++)a.removeEventListener(b,e[f],!1)}a.__eventHandlers[b]=[]}else{f=0;for(g=e.length;f&lt;g;f++)if(e[f]===d){e.splice(f,1);break}this._isBrowserObject(a)&amp;&amp;a.removeEventListener(b,d,!1)}}},fire:function(a,b){var d,f,g,h,j=Array.prototype.slice.call(arguments).splice(2);b===&quot;mousewheel&quot;&amp;&amp;(b=this._normaliseMouseWheelType());if(this._isBrowserObject(a)){if(typeof b!==&quot;string&quot;)throw&quot;type must be a string for DOM elements&quot;;g=this._NATIVE_EVENTS[b];d=document.createEvent(g?&quot;HTMLEvents&quot;:
&quot;UIEvents&quot;);d[g?&quot;initEvent&quot;:&quot;initUIEvent&quot;](b,!0,!0,e,1);if(j.length&lt;1){a.dispatchEvent(d);return}}this._checkHandlersProperty(a);d=typeof b===&quot;string&quot;?{type:b}:b;if(!d.target)d.target=a;if(!d.type)throw Error(&quot;Event object missing 'type' property.&quot;);if(a.__eventHandlers[d.type]instanceof Array){g=a.__eventHandlers[d.type];j.unshift(d);d=0;for(f=g.length;d&lt;f;d++)h=g[d],c.isNothing(h)||h.apply(a,j)}},getMousePosition:function(a){var b={x:0,y:0};if(a.pageX)b.x=a.pageX;else if(a.clientX)b.x=a.clientX+
(document.documentElement.scrollLeft||document.body.scrollLeft);if(a.pageY)b.y=a.pageY;else if(a.clientY)b.y=a.clientY+(document.documentElement.scrollTop||document.body.scrollTop);return b},getTouchEvent:function(a){return a},getWheelDelta:function(a){var b=0;c.isNothing(a.wheelDelta)?c.isNothing(a.detail)||(b=-a.detail/3):b=a.wheelDelta/120;return b},domReady:function(a){document.addEventListener(&quot;DOMContentLoaded&quot;,a,!1)},_checkHandlersProperty:function(a){c.isNothing(a.__eventHandlers)&amp;&amp;c.extend(a,
{__eventHandlers:{}})},_isBrowserObject:function(a){if(a===e||a===e.document)return!0;return this._isElement(a)||this._isNode(a)},_isElement:function(a){return typeof e.HTMLElement===&quot;object&quot;?a instanceof e.HTMLElement:typeof a===&quot;object&quot;&amp;&amp;a.nodeType===1&amp;&amp;typeof a.nodeName===&quot;string&quot;},_isNode:function(a){return typeof e.Node===&quot;object&quot;?a instanceof e.Node:typeof a===&quot;object&quot;&amp;&amp;typeof a.nodeType===&quot;number&quot;&amp;&amp;typeof a.nodeName===&quot;string&quot;},_normaliseMouseWheelType:function(){if(c.Browser.isEventSupported(&quot;mousewheel&quot;))return&quot;mousewheel&quot;;
return&quot;DOMMouseScroll&quot;},_NATIVE_EVENTS:{click:1,dblclick:1,mouseup:1,mousedown:1,contextmenu:1,mousewheel:1,DOMMouseScroll:1,mouseover:1,mouseout:1,mousemove:1,selectstart:1,selectend:1,keydown:1,keypress:1,keyup:1,orientationchange:1,touchstart:1,touchmove:1,touchend:1,touchcancel:1,gesturestart:1,gesturechange:1,gestureend:1,focus:1,blur:1,change:1,reset:1,select:1,submit:1,load:1,unload:1,beforeunload:1,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1}}})})(window,
window.Code.Util);
(function(e,c){c.extend(c,{DOM:{setData:function(a,b,d){if(c.isLikeArray(a)){var f,g;f=0;for(g=a.length;f&lt;g;f++)c.DOM._setData(a[f],b,d)}else c.DOM._setData(a,b,d)},_setData:function(a,b,d){c.DOM.setAttribute(a,&quot;data-&quot;+b,d)},getData:function(a,b,d){return c.DOM.getAttribute(a,&quot;data-&quot;+b,d)},removeData:function(a,b){if(c.isLikeArray(a)){var d,f;d=0;for(f=a.length;d&lt;f;d++)c.DOM._removeData(a[d],b)}else c.DOM._removeData(a,b)},_removeData:function(a,b){c.DOM.removeAttribute(a,&quot;data-&quot;+b)},isChildOf:function(a,
b){if(b===a)return!1;for(;a&amp;&amp;a!==b;)a=a.parentNode;return a===b},find:function(a,b){if(c.isNothing(b))b=e.document;var d=b.querySelectorAll(a),f=[],g,h;g=0;for(h=d.length;g&lt;h;g++)f.push(d[g]);return f},createElement:function(a,b,d){var f,a=document.createElement(a);for(f in b)c.objectHasProperty(b,f)&amp;&amp;a.setAttribute(f,b[f]);a.innerHTML=d||&quot;&quot;;return a},appendChild:function(a,b){b.appendChild(a)},insertBefore:function(a,b,d){d.insertBefore(a,b)},appendText:function(a,b){c.DOM.appendChild(document.createTextNode(a),
b)},appendToBody:function(a){this.appendChild(a,document.body)},removeChild:function(a,b){b.removeChild(a)},removeChildren:function(a){if(a.hasChildNodes())for(;a.childNodes.length&gt;=1;)a.removeChild(a.childNodes[a.childNodes.length-1])},hasAttribute:function(a,b){return!c.isNothing(a.getAttribute(b))},getAttribute:function(a,b,d){a=a.getAttribute(b);c.isNothing(a)&amp;&amp;!c.isNothing(d)&amp;&amp;(a=d);return a},setAttribute:function(a,b,d){if(c.isLikeArray(a)){var f,g;f=0;for(g=a.length;f&lt;g;f++)c.DOM._setAttribute(a[f],
b,d)}else c.DOM._setAttribute(a,b,d)},_setAttribute:function(a,b,d){a.setAttribute(b,d)},removeAttribute:function(a,b){if(c.isLikeArray(a)){var d,f;d=0;for(f=a.length;d&lt;f;d++)c.DOM._removeAttribute(a[d],b)}else c.DOM._removeAttribute(a,b)},_removeAttribute:function(a,b){this.hasAttribute(a,b)&amp;&amp;a.removeAttribute(b)},addClass:function(a,b){if(c.isLikeArray(a)){var d,f;d=0;for(f=a.length;d&lt;f;d++)c.DOM._addClass(a[d],b)}else c.DOM._addClass(a,b)},_addClass:function(a,b){var d=c.DOM.getAttribute(a,&quot;class&quot;,
&quot;&quot;);RegExp(&quot;(?:^|\\s+)&quot;+b+&quot;(?:\\s+|$)&quot;).test(d)||(d!==&quot;&quot;&amp;&amp;(d+=&quot; &quot;),d+=b,c.DOM.setAttribute(a,&quot;class&quot;,d))},removeClass:function(a,b){if(c.isLikeArray(a)){var d,f;d=0;for(f=a.length;d&lt;f;d++)c.DOM._removeClass(a[d],b)}else c.DOM._removeClass(a,b)},_removeClass:function(a,b){var d=c.DOM.getAttribute(a,&quot;class&quot;,&quot;&quot;),d=c.trim(d).split(&quot; &quot;),f=&quot;&quot;,g,e;g=0;for(e=d.length;g&lt;e;g++)d[g]!==b&amp;&amp;(f!==&quot;&quot;&amp;&amp;(f+=&quot; &quot;),f+=d[g]);f===&quot;&quot;?c.DOM.removeAttribute(a,&quot;class&quot;):c.DOM.setAttribute(a,&quot;class&quot;,f)},hasClass:function(a,b){return RegExp(&quot;(?:^|\\s+)&quot;+
b+&quot;(?:\\s+|$)&quot;).test(c.DOM.getAttribute(a,&quot;class&quot;,&quot;&quot;))},setStyle:function(a,b,d){if(c.isLikeArray(a)){var f,g;f=0;for(g=a.length;f&lt;g;f++)c.DOM._setStyle(a[f],b,d)}else c.DOM._setStyle(a,b,d)},_setStyle:function(a,b,d){var f;if(c.isObject(b))for(f in b)c.objectHasProperty(b,f)&amp;&amp;(f===&quot;width&quot;?c.DOM.width(a,b[f]):f===&quot;height&quot;?c.DOM.height(a,b[f]):a.style[f]=b[f]);else a.style[b]=d},getStyle:function(a,b){var d=e.getComputedStyle(a,&quot;&quot;).getPropertyValue(b);d===&quot;&quot;&amp;&amp;(d=a.style[b]);return d},hide:function(a){if(c.isLikeArray(a)){var b,
d;b=0;for(d=a.length;b&lt;d;b++)c.DOM._hide(a[b])}else c.DOM._hide(a)},_hide:function(a){c.DOM.setData(a,&quot;ccl-disp&quot;,c.DOM.getStyle(a,&quot;display&quot;));c.DOM.setStyle(a,&quot;display&quot;,&quot;none&quot;)},show:function(a){if(c.isLikeArray(a)){var b,d;b=0;for(d=a.length;b&lt;d;b++)c.DOM._show(a[b])}else c.DOM._show(a)},_show:function(a){if(c.DOM.getStyle(a,&quot;display&quot;)===&quot;none&quot;){var b=c.DOM.getData(a,&quot;ccl-disp&quot;,&quot;block&quot;);if(b===&quot;none&quot;||b===&quot;&quot;)b=&quot;block&quot;;c.DOM.setStyle(a,&quot;display&quot;,b)}},width:function(a,b){if(!c.isNothing(b))c.isNumber(b)&amp;&amp;
(b+=&quot;px&quot;),a.style.width=b;return this._getDimension(a,&quot;width&quot;)},outerWidth:function(a){var b=c.DOM.width(a);b+=parseInt(c.DOM.getStyle(a,&quot;padding-left&quot;),10)+parseInt(c.DOM.getStyle(a,&quot;padding-right&quot;),10);b+=parseInt(c.DOM.getStyle(a,&quot;margin-left&quot;),10)+parseInt(c.DOM.getStyle(a,&quot;margin-right&quot;),10);b+=parseInt(c.DOM.getStyle(a,&quot;border-left-width&quot;),10)+parseInt(c.DOM.getStyle(a,&quot;border-right-width&quot;),10);return b},height:function(a,b){if(!c.isNothing(b))c.isNumber(b)&amp;&amp;(b+=&quot;px&quot;),a.style.height=b;return this._getDimension(a,
&quot;height&quot;)},_getDimension:function(a,b){var d=e.parseInt(e.getComputedStyle(a,&quot;&quot;).getPropertyValue(b)),f;if(isNaN(d))f={display:a.style.display,left:a.style.left},a.style.display=&quot;block&quot;,a.style.left=&quot;-1000000px&quot;,d=e.parseInt(e.getComputedStyle(a,&quot;&quot;).getPropertyValue(b)),a.style.display=f.display,a.style.left=f.left;return d},outerHeight:function(a){var b=c.DOM.height(a);b+=parseInt(c.DOM.getStyle(a,&quot;padding-top&quot;),10)+parseInt(c.DOM.getStyle(a,&quot;padding-bottom&quot;),10);b+=parseInt(c.DOM.getStyle(a,&quot;margin-top&quot;),
10)+parseInt(c.DOM.getStyle(a,&quot;margin-bottom&quot;),10);b+=parseInt(c.DOM.getStyle(a,&quot;border-top-width&quot;),10)+parseInt(c.DOM.getStyle(a,&quot;border-bottom-width&quot;),10);return b},documentWidth:function(){return c.DOM.width(document.documentElement)},documentHeight:function(){return c.DOM.height(document.documentElement)},documentOuterWidth:function(){return c.DOM.width(document.documentElement)},documentOuterHeight:function(){return c.DOM.outerHeight(document.documentElement)},bodyWidth:function(){return c.DOM.width(document.body)},
bodyHeight:function(){return c.DOM.height(document.body)},bodyOuterWidth:function(){return c.DOM.outerWidth(document.body)},bodyOuterHeight:function(){return c.DOM.outerHeight(document.body)},windowWidth:function(){return e.innerWidth},windowHeight:function(){return e.innerHeight},windowScrollLeft:function(){return e.pageXOffset},windowScrollTop:function(){return e.pageYOffset}}})})(window,window.Code.Util);
(function(e,c){c.extend(c,{Animation:{_applyTransitionDelay:50,_transitionEndLabel:e.document.documentElement.style.webkitTransition!==void 0?&quot;webkitTransitionEnd&quot;:&quot;transitionend&quot;,_transitionEndHandler:null,_transitionPrefix:e.document.documentElement.style.webkitTransition!==void 0?&quot;webkitTransition&quot;:e.document.documentElement.style.MozTransition!==void 0?&quot;MozTransition&quot;:&quot;transition&quot;,_transformLabel:e.document.documentElement.style.webkitTransform!==void 0?&quot;webkitTransform&quot;:e.document.documentElement.style.MozTransition!==
void 0?&quot;MozTransform&quot;:&quot;transform&quot;,_getTransitionEndHandler:function(){if(c.isNothing(this._transitionEndHandler))this._transitionEndHandler=this._onTransitionEnd.bind(this);return this._transitionEndHandler},stop:function(a){if(c.Browser.isCSSTransformSupported){var b={};c.Events.remove(a,this._transitionEndLabel,this._getTransitionEndHandler());c.isNothing(a.callbackLabel)&amp;&amp;delete a.callbackLabel;b[this._transitionPrefix+&quot;Property&quot;]=&quot;&quot;;b[this._transitionPrefix+&quot;Duration&quot;]=&quot;&quot;;b[this._transitionPrefix+
&quot;TimingFunction&quot;]=&quot;&quot;;b[this._transitionPrefix+&quot;Delay&quot;]=&quot;&quot;;b[this._transformLabel]=&quot;&quot;;c.DOM.setStyle(a,b)}else c.isNothing(e.jQuery)||e.jQuery(a).stop(!0,!0)},fadeIn:function(a,b,d,f,g){g=c.coalesce(g,1);g&lt;=0&amp;&amp;(g=1);if(b&lt;=0&amp;&amp;(c.DOM.setStyle(a,&quot;opacity&quot;,g),!c.isNothing(d))){d(a);return}c.DOM.getStyle(a,&quot;opacity&quot;)&gt;=1&amp;&amp;c.DOM.setStyle(a,&quot;opacity&quot;,0);c.Browser.isCSSTransformSupported?this._applyTransition(a,&quot;opacity&quot;,g,b,d,f):c.isNothing(e.jQuery)||e.jQuery(a).fadeTo(b,g,d)},fadeTo:function(a,b,d,f,c){this.fadeIn(a,
d,f,c,b)},fadeOut:function(a,b,d,f){if(b&lt;=0&amp;&amp;(c.DOM.setStyle(a,&quot;opacity&quot;,0),!c.isNothing(d))){d(a);return}c.Browser.isCSSTransformSupported?this._applyTransition(a,&quot;opacity&quot;,0,b,d,f):e.jQuery(a).fadeTo(b,0,d)},slideBy:function(a,b,d,f,g,h){var j={},b=c.coalesce(b,0),d=c.coalesce(d,0),h=c.coalesce(h,&quot;ease-out&quot;);j[this._transitionPrefix+&quot;Property&quot;]=&quot;all&quot;;j[this._transitionPrefix+&quot;Delay&quot;]=&quot;0&quot;;f===0?(j[this._transitionPrefix+&quot;Duration&quot;]=&quot;&quot;,j[this._transitionPrefix+&quot;TimingFunction&quot;]=&quot;&quot;):(j[this._transitionPrefix+
&quot;Duration&quot;]=f+&quot;ms&quot;,j[this._transitionPrefix+&quot;TimingFunction&quot;]=c.coalesce(h,&quot;ease-out&quot;),c.Events.add(a,this._transitionEndLabel,this._getTransitionEndHandler()));j[this._transformLabel]=c.Browser.is3dSupported?&quot;translate3d(&quot;+b+&quot;px, &quot;+d+&quot;px, 0px)&quot;:&quot;translate(&quot;+b+&quot;px, &quot;+d+&quot;px)&quot;;if(!c.isNothing(g))a.cclallcallback=g;c.DOM.setStyle(a,j);f===0&amp;&amp;e.setTimeout(function(){this._leaveTransforms(a)}.bind(this),this._applyTransitionDelay)},resetTranslate:function(a){var b={};b[this._transformLabel]=b[this._transformLabel]=
c.Browser.is3dSupported?&quot;translate3d(0px, 0px, 0px)&quot;:&quot;translate(0px, 0px)&quot;;c.DOM.setStyle(a,b)},_applyTransition:function(a,b,d,f,g,h){var j={},h=c.coalesce(h,&quot;ease-in&quot;);j[this._transitionPrefix+&quot;Property&quot;]=b;j[this._transitionPrefix+&quot;Duration&quot;]=f+&quot;ms&quot;;j[this._transitionPrefix+&quot;TimingFunction&quot;]=h;j[this._transitionPrefix+&quot;Delay&quot;]=&quot;0&quot;;c.Events.add(a,this._transitionEndLabel,this._getTransitionEndHandler());c.DOM.setStyle(a,j);c.isNothing(g)||(a[&quot;ccl&quot;+b+&quot;callback&quot;]=g);e.setTimeout(function(){c.DOM.setStyle(a,
b,d)},this._applyTransitionDelay)},_onTransitionEnd:function(a){c.Events.remove(a.currentTarget,this._transitionEndLabel,this._getTransitionEndHandler());this._leaveTransforms(a.currentTarget)},_leaveTransforms:function(a){var b=a.style[this._transitionPrefix+&quot;Property&quot;],d=b!==&quot;&quot;?&quot;ccl&quot;+b+&quot;callback&quot;:&quot;cclallcallback&quot;,f,b=c.coalesce(a.style.webkitTransform,a.style.MozTransform,a.style.transform),g,h=e.parseInt(c.DOM.getStyle(a,&quot;left&quot;),0),j=e.parseInt(c.DOM.getStyle(a,&quot;top&quot;),0),i,l,k={};b!==&quot;&quot;&amp;&amp;(b=c.Browser.is3dSupported?
b.match(/translate3d\((.*?)\)/):b.match(/translate\((.*?)\)/),c.isNothing(b)||(g=b[1].split(&quot;, &quot;),i=e.parseInt(g[0],0),l=e.parseInt(g[1],0)));k[this._transitionPrefix+&quot;Property&quot;]=&quot;&quot;;k[this._transitionPrefix+&quot;Duration&quot;]=&quot;&quot;;k[this._transitionPrefix+&quot;TimingFunction&quot;]=&quot;&quot;;k[this._transitionPrefix+&quot;Delay&quot;]=&quot;&quot;;c.DOM.setStyle(a,k);e.setTimeout(function(){if(!c.isNothing(g))k={},k[this._transformLabel]=&quot;&quot;,k.left=h+i+&quot;px&quot;,k.top=j+l+&quot;px&quot;,c.DOM.setStyle(a,k);c.isNothing(a[d])||(f=a[d],delete a[d],f(a))}.bind(this),
this._applyTransitionDelay)}}})})(window,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.Util.TouchElement&quot;);a.TouchElement.EventTypes={onTouch:&quot;CodeUtilTouchElementOnTouch&quot;};a.TouchElement.ActionTypes={touchStart:&quot;touchStart&quot;,touchMove:&quot;touchMove&quot;,touchEnd:&quot;touchEnd&quot;,touchMoveEnd:&quot;touchMoveEnd&quot;,tap:&quot;tap&quot;,doubleTap:&quot;doubleTap&quot;,swipeLeft:&quot;swipeLeft&quot;,swipeRight:&quot;swipeRight&quot;,swipeUp:&quot;swipeUp&quot;,swipeDown:&quot;swipeDown&quot;,gestureStart:&quot;gestureStart&quot;,gestureChange:&quot;gestureChange&quot;,gestureEnd:&quot;gestureEnd&quot;}})(window,window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.Util.TouchElement&quot;);a.TouchElement.TouchElementClass=c({el:null,captureSettings:null,touchStartPoint:null,touchEndPoint:null,touchStartTime:null,doubleTapTimeout:null,touchStartHandler:null,touchMoveHandler:null,touchEndHandler:null,mouseDownHandler:null,mouseMoveHandler:null,mouseUpHandler:null,mouseOutHandler:null,gestureStartHandler:null,gestureChangeHandler:null,gestureEndHandler:null,swipeThreshold:null,swipeTimeThreshold:null,doubleTapSpeed:null,dispose:function(){var b;
this.removeEventHandlers();for(b in this)a.objectHasProperty(this,b)&amp;&amp;(this[b]=null)},initialize:function(b,d){this.el=b;this.captureSettings={swipe:!1,move:!1,gesture:!1,doubleTap:!1,preventDefaultTouchEvents:!0};a.extend(this.captureSettings,d);this.swipeThreshold=50;this.doubleTapSpeed=this.swipeTimeThreshold=250;this.touchStartPoint={x:0,y:0};this.touchEndPoint={x:0,y:0}},addEventHandlers:function(){if(a.isNothing(this.touchStartHandler))this.touchStartHandler=this.onTouchStart.bind(this),this.touchMoveHandler=
this.onTouchMove.bind(this),this.touchEndHandler=this.onTouchEnd.bind(this),this.mouseDownHandler=this.onMouseDown.bind(this),this.mouseMoveHandler=this.onMouseMove.bind(this),this.mouseUpHandler=this.onMouseUp.bind(this),this.mouseOutHandler=this.onMouseOut.bind(this),this.gestureStartHandler=this.onGestureStart.bind(this),this.gestureChangeHandler=this.onGestureChange.bind(this),this.gestureEndHandler=this.onGestureEnd.bind(this);a.Events.add(this.el,&quot;touchstart&quot;,this.touchStartHandler);this.captureSettings.move&amp;&amp;
a.Events.add(this.el,&quot;touchmove&quot;,this.touchMoveHandler);a.Events.add(this.el,&quot;touchend&quot;,this.touchEndHandler);a.Events.add(this.el,&quot;mousedown&quot;,this.mouseDownHandler);a.Browser.isGestureSupported&amp;&amp;this.captureSettings.gesture&amp;&amp;(a.Events.add(this.el,&quot;gesturestart&quot;,this.gestureStartHandler),a.Events.add(this.el,&quot;gesturechange&quot;,this.gestureChangeHandler),a.Events.add(this.el,&quot;gestureend&quot;,this.gestureEndHandler))},removeEventHandlers:function(){a.Events.remove(this.el,&quot;touchstart&quot;,this.touchStartHandler);
this.captureSettings.move&amp;&amp;a.Events.remove(this.el,&quot;touchmove&quot;,this.touchMoveHandler);a.Events.remove(this.el,&quot;touchend&quot;,this.touchEndHandler);a.Events.remove(this.el,&quot;mousedown&quot;,this.mouseDownHandler);a.Browser.isGestureSupported&amp;&amp;this.captureSettings.gesture&amp;&amp;(a.Events.remove(this.el,&quot;gesturestart&quot;,this.gestureStartHandler),a.Events.remove(this.el,&quot;gesturechange&quot;,this.gestureChangeHandler),a.Events.remove(this.el,&quot;gestureend&quot;,this.gestureEndHandler))},getTouchPoint:function(a){return{x:a[0].pageX,
y:a[0].pageY}},fireTouchEvent:function(b){var d=0,f=0,c=0,h,d=this.touchEndPoint.x-this.touchStartPoint.x,f=this.touchEndPoint.y-this.touchStartPoint.y,c=Math.sqrt(d*d+f*f);if(this.captureSettings.swipe&amp;&amp;(h=new Date,h-=this.touchStartTime,h&lt;=this.swipeTimeThreshold)){if(e.Math.abs(d)&gt;=this.swipeThreshold){a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:d&lt;0?a.TouchElement.ActionTypes.swipeLeft:a.TouchElement.ActionTypes.swipeRight,targetEl:b.target,
currentTargetEl:b.currentTarget});return}if(e.Math.abs(f)&gt;=this.swipeThreshold){a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:f&lt;0?a.TouchElement.ActionTypes.swipeUp:a.TouchElement.ActionTypes.swipeDown,targetEl:b.target,currentTargetEl:b.currentTarget});return}}c&gt;1?a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,action:a.TouchElement.ActionTypes.touchMoveEnd,point:this.touchEndPoint,targetEl:b.target,currentTargetEl:b.currentTarget}):
this.captureSettings.doubleTap?a.isNothing(this.doubleTapTimeout)?this.doubleTapTimeout=e.setTimeout(function(){this.doubleTapTimeout=null;a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:a.TouchElement.ActionTypes.tap,targetEl:b.target,currentTargetEl:b.currentTarget})}.bind(this),this.doubleTapSpeed):(e.clearTimeout(this.doubleTapTimeout),this.doubleTapTimeout=null,a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,
action:a.TouchElement.ActionTypes.doubleTap,targetEl:b.target,currentTargetEl:b.currentTarget})):a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:a.TouchElement.ActionTypes.tap,targetEl:b.target,currentTargetEl:b.currentTarget})},onTouchStart:function(b){this.captureSettings.preventDefaultTouchEvents&amp;&amp;b.preventDefault();a.Events.remove(this.el,&quot;mousedown&quot;,this.mouseDownHandler);var d=a.Events.getTouchEvent(b).touches;d.length&gt;1&amp;&amp;this.captureSettings.gesture?
this.isGesture=!0:(this.touchStartTime=new Date,this.isGesture=!1,this.touchStartPoint=this.getTouchPoint(d),a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,action:a.TouchElement.ActionTypes.touchStart,point:this.touchStartPoint,targetEl:b.target,currentTargetEl:b.currentTarget}))},onTouchMove:function(b){this.captureSettings.preventDefaultTouchEvents&amp;&amp;b.preventDefault();if(!this.isGesture||!this.captureSettings.gesture){var d=a.Events.getTouchEvent(b).touches;a.Events.fire(this,
{type:a.TouchElement.EventTypes.onTouch,target:this,action:a.TouchElement.ActionTypes.touchMove,point:this.getTouchPoint(d),targetEl:b.target,currentTargetEl:b.currentTarget})}},onTouchEnd:function(b){if(!this.isGesture||!this.captureSettings.gesture){this.captureSettings.preventDefaultTouchEvents&amp;&amp;b.preventDefault();var d=a.Events.getTouchEvent(b);this.touchEndPoint=this.getTouchPoint(!a.isNothing(d.changedTouches)?d.changedTouches:d.touches);a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,
target:this,action:a.TouchElement.ActionTypes.touchEnd,point:this.touchEndPoint,targetEl:b.target,currentTargetEl:b.currentTarget});this.fireTouchEvent(b)}},onMouseDown:function(b){b.preventDefault();a.Events.remove(this.el,&quot;touchstart&quot;,this.mouseDownHandler);a.Events.remove(this.el,&quot;touchmove&quot;,this.touchMoveHandler);a.Events.remove(this.el,&quot;touchend&quot;,this.touchEndHandler);this.captureSettings.move&amp;&amp;a.Events.add(this.el,&quot;mousemove&quot;,this.mouseMoveHandler);a.Events.add(this.el,&quot;mouseup&quot;,this.mouseUpHandler);
a.Events.add(this.el,&quot;mouseout&quot;,this.mouseOutHandler);this.touchStartTime=new Date;this.isGesture=!1;this.touchStartPoint=a.Events.getMousePosition(b);a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,action:a.TouchElement.ActionTypes.touchStart,point:this.touchStartPoint,targetEl:b.target,currentTargetEl:b.currentTarget})},onMouseMove:function(b){b.preventDefault();a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,action:a.TouchElement.ActionTypes.touchMove,
point:a.Events.getMousePosition(b),targetEl:b.target,currentTargetEl:b.currentTarget})},onMouseUp:function(b){b.preventDefault();this.captureSettings.move&amp;&amp;a.Events.remove(this.el,&quot;mousemove&quot;,this.mouseMoveHandler);a.Events.remove(this.el,&quot;mouseup&quot;,this.mouseUpHandler);a.Events.remove(this.el,&quot;mouseout&quot;,this.mouseOutHandler);this.touchEndPoint=a.Events.getMousePosition(b);a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,action:a.TouchElement.ActionTypes.touchEnd,point:this.touchEndPoint,
targetEl:b.target,currentTargetEl:b.currentTarget});this.fireTouchEvent(b)},onMouseOut:function(b){var d=b.relatedTarget;if(!(this.el===d||a.DOM.isChildOf(d,this.el)))b.preventDefault(),this.captureSettings.move&amp;&amp;a.Events.remove(this.el,&quot;mousemove&quot;,this.mouseMoveHandler),a.Events.remove(this.el,&quot;mouseup&quot;,this.mouseUpHandler),a.Events.remove(this.el,&quot;mouseout&quot;,this.mouseOutHandler),this.touchEndPoint=a.Events.getMousePosition(b),a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,
action:a.TouchElement.ActionTypes.touchEnd,point:this.touchEndPoint,targetEl:b.target,currentTargetEl:b.currentTarget}),this.fireTouchEvent(b)},onGestureStart:function(b){b.preventDefault();var d=a.Events.getTouchEvent(b);a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,action:a.TouchElement.ActionTypes.gestureStart,scale:d.scale,rotation:d.rotation,targetEl:b.target,currentTargetEl:b.currentTarget})},onGestureChange:function(b){b.preventDefault();var d=a.Events.getTouchEvent(b);
a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,action:a.TouchElement.ActionTypes.gestureChange,scale:d.scale,rotation:d.rotation,targetEl:b.target,currentTargetEl:b.currentTarget})},onGestureEnd:function(b){b.preventDefault();var d=a.Events.getTouchEvent(b);a.Events.fire(this,{type:a.TouchElement.EventTypes.onTouch,target:this,action:a.TouchElement.ActionTypes.gestureEnd,scale:d.scale,rotation:d.rotation,targetEl:b.target,currentTargetEl:b.currentTarget})}})})(window,window.klass,
window.Code.Util);(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.Image&quot;);e.Code.PhotoSwipe.Image.EventTypes={onLoad:&quot;onLoad&quot;,onError:&quot;onError&quot;}})(window,window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.Image&quot;);var b=e.Code.PhotoSwipe;b.Image.ImageClass=c({refObj:null,imageEl:null,src:null,caption:null,metaData:null,imageLoadHandler:null,imageErrorHandler:null,dispose:function(){var d;this.shrinkImage();for(d in this)a.objectHasProperty(this,d)&amp;&amp;(this[d]=null)},initialize:function(a,b,c,h){this.refObj=a;this.src=this.originalSrc=b;this.caption=c;this.metaData=h;this.imageEl=new e.Image;this.imageLoadHandler=this.onImageLoad.bind(this);this.imageErrorHandler=
this.onImageError.bind(this)},load:function(){this.imageEl.originalSrc=a.coalesce(this.imageEl.originalSrc,&quot;&quot;);this.imageEl.originalSrc===this.src?this.imageEl.isError?a.Events.fire(this,{type:b.Image.EventTypes.onError,target:this}):a.Events.fire(this,{type:b.Image.EventTypes.onLoad,target:this}):(this.imageEl.isError=!1,this.imageEl.isLoading=!0,this.imageEl.naturalWidth=null,this.imageEl.naturalHeight=null,this.imageEl.isLandscape=!1,this.imageEl.onload=this.imageLoadHandler,this.imageEl.onerror=
this.imageErrorHandler,this.imageEl.onabort=this.imageErrorHandler,this.imageEl.originalSrc=this.src,this.imageEl.src=this.src)},shrinkImage:function(){if(!a.isNothing(this.imageEl)&amp;&amp;this.imageEl.src.indexOf(this.src)&gt;-1)this.imageEl.src=&quot;data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=&quot;,a.isNothing(this.imageEl.parentNode)||a.DOM.removeChild(this.imageEl,this.imageEl.parentNode)},onImageLoad:function(){this.imageEl.onload=null;this.imageEl.naturalWidth=a.coalesce(this.imageEl.naturalWidth,
this.imageEl.width);this.imageEl.naturalHeight=a.coalesce(this.imageEl.naturalHeight,this.imageEl.height);this.imageEl.isLandscape=this.imageEl.naturalWidth&gt;this.imageEl.naturalHeight;this.imageEl.isLoading=!1;a.Events.fire(this,{type:b.Image.EventTypes.onLoad,target:this})},onImageError:function(){this.imageEl.onload=null;this.imageEl.onerror=null;this.imageEl.onabort=null;this.imageEl.isLoading=!1;this.imageEl.isError=!0;a.Events.fire(this,{type:b.Image.EventTypes.onError,target:this})}})})(window,
window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.Cache&quot;);e=e.Code.PhotoSwipe;e.Cache.Mode={normal:&quot;normal&quot;,aggressive:&quot;aggressive&quot;};e.Cache.Functions={getImageSource:function(a){return a.href},getImageCaption:function(b){if(b.nodeName===&quot;IMG&quot;)return a.DOM.getAttribute(b,&quot;alt&quot;);var d,f,c;d=0;for(f=b.childNodes.length;d&lt;f;d++)if(c=b.childNodes[d],b.childNodes[d].nodeName===&quot;IMG&quot;)return a.DOM.getAttribute(c,&quot;alt&quot;)},getImageMetaData:function(){return{}}}})(window,window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.Cache&quot;);var b=e.Code.PhotoSwipe;b.Cache.CacheClass=c({images:null,settings:null,dispose:function(){var b,f,c;if(!a.isNothing(this.images)){f=0;for(c=this.images.length;f&lt;c;f++)this.images[f].dispose();this.images.length=0}for(b in this)a.objectHasProperty(this,b)&amp;&amp;(this[b]=null)},initialize:function(a,f){var c,e,j,i,l,k;this.settings=f;this.images=[];c=0;for(e=a.length;c&lt;e;c++)j=a[c],i=this.settings.getImageSource(j),l=this.settings.getImageCaption(j),
k=this.settings.getImageMetaData(j),this.images.push(new b.Image.ImageClass(j,i,l,k))},getImages:function(d){var f,c,e=[],j;f=0;for(c=d.length;f&lt;c;f++){j=this.images[d[f]];if(this.settings.cacheMode===b.Cache.Mode.aggressive)j.cacheDoNotShrink=!0;e.push(j)}if(this.settings.cacheMode===b.Cache.Mode.aggressive){f=0;for(c=this.images.length;f&lt;c;f++)j=this.images[f],a.objectHasProperty(j,&quot;cacheDoNotShrink&quot;)?delete j.cacheDoNotShrink:j.shrinkImage()}return e}})})(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.Image);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.DocumentOverlay&quot;);e.Code.PhotoSwipe.DocumentOverlay.CssClasses={documentOverlay:&quot;ps-document-overlay&quot;}})(window,window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.DocumentOverlay&quot;);var b=e.Code.PhotoSwipe;b.DocumentOverlay.DocumentOverlayClass=c({el:null,settings:null,initialBodyHeight:null,dispose:function(){var b;a.Animation.stop(this.el);a.DOM.removeChild(this.el,this.el.parentNode);for(b in this)a.objectHasProperty(this,b)&amp;&amp;(this[b]=null)},initialize:function(d){this.settings=d;this.el=a.DOM.createElement(&quot;div&quot;,{&quot;class&quot;:b.DocumentOverlay.CssClasses.documentOverlay},&quot;&quot;);a.DOM.setStyle(this.el,{display:&quot;block&quot;,
position:&quot;absolute&quot;,left:0,top:0,zIndex:this.settings.zIndex});a.DOM.hide(this.el);this.settings.target===e?a.DOM.appendToBody(this.el):a.DOM.appendChild(this.el,this.settings.target);a.Animation.resetTranslate(this.el);this.initialBodyHeight=a.DOM.bodyOuterHeight()},resetPosition:function(){var b,f,c;if(this.settings.target===e){b=a.DOM.windowWidth();f=a.DOM.bodyOuterHeight()*2;c=this.settings.jQueryMobile?a.DOM.windowScrollTop()+&quot;px&quot;:&quot;0px&quot;;if(f&lt;1)f=this.initialBodyHeight;a.DOM.windowHeight()&gt;f&amp;&amp;
(f=a.DOM.windowHeight())}else b=a.DOM.width(this.settings.target),f=a.DOM.height(this.settings.target),c=&quot;0px&quot;;a.DOM.setStyle(this.el,{width:b,height:f,top:c})},fadeIn:function(b,f){this.resetPosition();a.DOM.setStyle(this.el,&quot;opacity&quot;,0);a.DOM.show(this.el);a.Animation.fadeIn(this.el,b,f)}})})(window,window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.Carousel&quot;);e=e.Code.PhotoSwipe;e.Carousel.EventTypes={onSlideByEnd:&quot;PhotoSwipeCarouselOnSlideByEnd&quot;,onSlideshowStart:&quot;PhotoSwipeCarouselOnSlideshowStart&quot;,onSlideshowStop:&quot;PhotoSwipeCarouselOnSlideshowStop&quot;};e.Carousel.CssClasses={carousel:&quot;ps-carousel&quot;,content:&quot;ps-carousel-content&quot;,item:&quot;ps-carousel-item&quot;,itemLoading:&quot;ps-carousel-item-loading&quot;,itemError:&quot;ps-carousel-item-error&quot;};e.Carousel.SlideByAction={previous:&quot;previous&quot;,current:&quot;current&quot;,next:&quot;next&quot;}})(window,
window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.Carousel&quot;);var b=e.Code.PhotoSwipe;b.Carousel.CarouselClass=c({el:null,contentEl:null,settings:null,cache:null,slideByEndHandler:null,currentCacheIndex:null,isSliding:null,isSlideshowActive:null,lastSlideByAction:null,touchStartPoint:null,touchStartPosition:null,imageLoadHandler:null,imageErrorHandler:null,slideshowTimeout:null,dispose:function(){var d,f,c;f=0;for(c=this.cache.images.length;f&lt;c;f++)a.Events.remove(this.cache.images[f],b.Image.EventTypes.onLoad,
this.imageLoadHandler),a.Events.remove(this.cache.images[f],b.Image.EventTypes.onError,this.imageErrorHandler);this.stopSlideshow();a.Animation.stop(this.el);a.DOM.removeChild(this.el,this.el.parentNode);for(d in this)a.objectHasProperty(this,d)&amp;&amp;(this[d]=null)},initialize:function(d,f){var c,h,j;this.cache=d;this.settings=f;this.slideByEndHandler=this.onSlideByEnd.bind(this);this.imageLoadHandler=this.onImageLoad.bind(this);this.imageErrorHandler=this.onImageError.bind(this);this.currentCacheIndex=
0;this.isSlideshowActive=this.isSliding=!1;if(this.cache.images.length&lt;3)this.settings.loop=!1;this.el=a.DOM.createElement(&quot;div&quot;,{&quot;class&quot;:b.Carousel.CssClasses.carousel},&quot;&quot;);a.DOM.setStyle(this.el,{display:&quot;block&quot;,position:&quot;absolute&quot;,left:0,top:0,overflow:&quot;hidden&quot;,zIndex:this.settings.zIndex});a.DOM.hide(this.el);this.contentEl=a.DOM.createElement(&quot;div&quot;,{&quot;class&quot;:b.Carousel.CssClasses.content},&quot;&quot;);a.DOM.setStyle(this.contentEl,{display:&quot;block&quot;,position:&quot;absolute&quot;,left:0,top:0});a.DOM.appendChild(this.contentEl,
this.el);h=d.images.length&lt;3?d.images.length:3;for(c=0;c&lt;h;c++)j=a.DOM.createElement(&quot;div&quot;,{&quot;class&quot;:b.Carousel.CssClasses.item+&quot; &quot;+b.Carousel.CssClasses.item+&quot;-&quot;+c},&quot;&quot;),a.DOM.setAttribute(j,&quot;style&quot;,&quot;float: left;&quot;),a.DOM.setStyle(j,{display:&quot;block&quot;,position:&quot;relative&quot;,left:0,top:0,overflow:&quot;hidden&quot;}),this.settings.margin&gt;0&amp;&amp;a.DOM.setStyle(j,{marginRight:this.settings.margin+&quot;px&quot;}),a.DOM.appendChild(j,this.contentEl);this.settings.target===e?a.DOM.appendToBody(this.el):a.DOM.appendChild(this.el,this.settings.target)},
resetPosition:function(){var d,f,c,h,j,i;this.settings.target===e?(d=a.DOM.windowWidth(),f=a.DOM.windowHeight(),c=a.DOM.windowScrollTop()+&quot;px&quot;):(d=a.DOM.width(this.settings.target),f=a.DOM.height(this.settings.target),c=&quot;0px&quot;);h=this.settings.margin&gt;0?d+this.settings.margin:d;j=a.DOM.find(&quot;.&quot;+b.Carousel.CssClasses.item,this.contentEl);h*=j.length;a.DOM.setStyle(this.el,{top:c,width:d,height:f});a.DOM.setStyle(this.contentEl,{width:h,height:f});c=0;for(h=j.length;c&lt;h;c++)i=j[c],a.DOM.setStyle(i,{width:d,
height:f}),i=a.DOM.find(&quot;img&quot;,i)[0],a.isNothing(i)||this.resetImagePosition(i);this.setContentLeftPosition()},resetImagePosition:function(b){if(!a.isNothing(b)){a.DOM.getAttribute(b,&quot;src&quot;);var c,e,h,j=a.DOM.width(this.el),i=a.DOM.height(this.el);this.settings.imageScaleMethod===&quot;fitNoUpscale&quot;?(e=b.naturalWidth,h=b.naturalHeight,e&gt;j&amp;&amp;(c=j/e,e=Math.round(e*c),h=Math.round(h*c)),h&gt;i&amp;&amp;(c=i/h,h=Math.round(h*c),e=Math.round(e*c))):(c=b.isLandscape?j/b.naturalWidth:i/b.naturalHeight,e=Math.round(b.naturalWidth*
c),h=Math.round(b.naturalHeight*c),this.settings.imageScaleMethod===&quot;zoom&quot;?(c=1,h&lt;i?c=i/h:e&lt;j&amp;&amp;(c=j/e),c!==1&amp;&amp;(e=Math.round(e*c),h=Math.round(h*c))):this.settings.imageScaleMethod===&quot;fit&quot;&amp;&amp;(c=1,e&gt;j?c=j/e:h&gt;i&amp;&amp;(c=i/h),c!==1&amp;&amp;(e=Math.round(e*c),h=Math.round(h*c))));a.DOM.setStyle(b,{position:&quot;absolute&quot;,width:e,height:h,top:Math.round((i-h)/2)+&quot;px&quot;,left:Math.round((j-e)/2)+&quot;px&quot;,display:&quot;block&quot;})}},setContentLeftPosition:function(){var b,c,g;b=this.settings.target===e?a.DOM.windowWidth():a.DOM.width(this.settings.target);
c=this.getItemEls();g=0;this.settings.loop?g=(b+this.settings.margin)*-1:this.currentCacheIndex===this.cache.images.length-1?g=(c.length-1)*(b+this.settings.margin)*-1:this.currentCacheIndex&gt;0&amp;&amp;(g=(b+this.settings.margin)*-1);a.DOM.setStyle(this.contentEl,{left:g+&quot;px&quot;})},show:function(d){this.currentCacheIndex=d;this.resetPosition();this.setImages(!1);a.DOM.show(this.el);a.Animation.resetTranslate(this.contentEl);var d=this.getItemEls(),c,e;c=0;for(e=d.length;c&lt;e;c++)a.Animation.resetTranslate(d[c]);
a.Events.fire(this,{type:b.Carousel.EventTypes.onSlideByEnd,target:this,action:b.Carousel.SlideByAction.current,cacheIndex:this.currentCacheIndex})},setImages:function(a){var b,c=this.getItemEls();b=this.currentCacheIndex+1;var e=this.currentCacheIndex-1;this.settings.loop?(b&gt;this.cache.images.length-1&amp;&amp;(b=0),e&lt;0&amp;&amp;(e=this.cache.images.length-1),b=this.cache.getImages([e,this.currentCacheIndex,b]),a||this.addCacheImageToItemEl(b[1],c[1]),this.addCacheImageToItemEl(b[2],c[2]),this.addCacheImageToItemEl(b[0],
c[0])):c.length===1?a||(b=this.cache.getImages([this.currentCacheIndex]),this.addCacheImageToItemEl(b[0],c[0])):c.length===2?this.currentCacheIndex===0?(b=this.cache.getImages([this.currentCacheIndex,this.currentCacheIndex+1]),a||this.addCacheImageToItemEl(b[0],c[0]),this.addCacheImageToItemEl(b[1],c[1])):(b=this.cache.getImages([this.currentCacheIndex-1,this.currentCacheIndex]),a||this.addCacheImageToItemEl(b[1],c[1]),this.addCacheImageToItemEl(b[0],c[0])):this.currentCacheIndex===0?(b=this.cache.getImages([this.currentCacheIndex,
this.currentCacheIndex+1,this.currentCacheIndex+2]),a||this.addCacheImageToItemEl(b[0],c[0]),this.addCacheImageToItemEl(b[1],c[1]),this.addCacheImageToItemEl(b[2],c[2])):(this.currentCacheIndex===this.cache.images.length-1?(b=this.cache.getImages([this.currentCacheIndex-2,this.currentCacheIndex-1,this.currentCacheIndex]),a||this.addCacheImageToItemEl(b[2],c[2]),this.addCacheImageToItemEl(b[1],c[1])):(b=this.cache.getImages([this.currentCacheIndex-1,this.currentCacheIndex,this.currentCacheIndex+1]),
a||this.addCacheImageToItemEl(b[1],c[1]),this.addCacheImageToItemEl(b[2],c[2])),this.addCacheImageToItemEl(b[0],c[0]))},addCacheImageToItemEl:function(d,c){a.DOM.removeClass(c,b.Carousel.CssClasses.itemError);a.DOM.addClass(c,b.Carousel.CssClasses.itemLoading);a.DOM.removeChildren(c);a.DOM.setStyle(d.imageEl,{display:&quot;none&quot;});a.DOM.appendChild(d.imageEl,c);a.Animation.resetTranslate(d.imageEl);a.Events.add(d,b.Image.EventTypes.onLoad,this.imageLoadHandler);a.Events.add(d,b.Image.EventTypes.onError,
this.imageErrorHandler);d.load()},slideCarousel:function(d,c,g){if(!this.isSliding){var h,j;h=this.settings.target===e?a.DOM.windowWidth()+this.settings.margin:a.DOM.width(this.settings.target)+this.settings.margin;g=a.coalesce(g,this.settings.slideSpeed);if(!(e.Math.abs(j)&lt;1)){switch(c){case a.TouchElement.ActionTypes.swipeLeft:d=h*-1;break;case a.TouchElement.ActionTypes.swipeRight:d=h;break;default:j=d.x-this.touchStartPoint.x,d=e.Math.abs(j)&gt;h/2?j&gt;0?h:h*-1:0}this.lastSlideByAction=d&lt;0?b.Carousel.SlideByAction.next:
d&gt;0?b.Carousel.SlideByAction.previous:b.Carousel.SlideByAction.current;if(!this.settings.loop&amp;&amp;(this.lastSlideByAction===b.Carousel.SlideByAction.previous&amp;&amp;this.currentCacheIndex===0||this.lastSlideByAction===b.Carousel.SlideByAction.next&amp;&amp;this.currentCacheIndex===this.cache.images.length-1))d=0,this.lastSlideByAction=b.Carousel.SlideByAction.current;this.isSliding=!0;this.doSlideCarousel(d,g)}}},moveCarousel:function(a){this.isSliding||this.settings.enableDrag&amp;&amp;this.doMoveCarousel(a.x-this.touchStartPoint.x)},
getItemEls:function(){return a.DOM.find(&quot;.&quot;+b.Carousel.CssClasses.item,this.contentEl)},previous:function(){this.stopSlideshow();this.slideCarousel({x:0,y:0},a.TouchElement.ActionTypes.swipeRight,this.settings.nextPreviousSlideSpeed)},next:function(){this.stopSlideshow();this.slideCarousel({x:0,y:0},a.TouchElement.ActionTypes.swipeLeft,this.settings.nextPreviousSlideSpeed)},slideshowNext:function(){this.slideCarousel({x:0,y:0},a.TouchElement.ActionTypes.swipeLeft)},startSlideshow:function(){this.stopSlideshow();
this.isSlideshowActive=!0;this.slideshowTimeout=e.setTimeout(this.slideshowNext.bind(this),this.settings.slideshowDelay);a.Events.fire(this,{type:b.Carousel.EventTypes.onSlideshowStart,target:this})},stopSlideshow:function(){if(!a.isNothing(this.slideshowTimeout))e.clearTimeout(this.slideshowTimeout),this.slideshowTimeout=null,this.isSlideshowActive=!1,a.Events.fire(this,{type:b.Carousel.EventTypes.onSlideshowStop,target:this})},onSlideByEnd:function(){if(!a.isNothing(this.isSliding)){var d=this.getItemEls();
this.isSliding=!1;this.lastSlideByAction===b.Carousel.SlideByAction.next?this.currentCacheIndex+=1:this.lastSlideByAction===b.Carousel.SlideByAction.previous&amp;&amp;(this.currentCacheIndex-=1);if(this.settings.loop)if(this.lastSlideByAction===b.Carousel.SlideByAction.next?a.DOM.appendChild(d[0],this.contentEl):this.lastSlideByAction===b.Carousel.SlideByAction.previous&amp;&amp;a.DOM.insertBefore(d[d.length-1],d[0],this.contentEl),this.currentCacheIndex&lt;0)this.currentCacheIndex=this.cache.images.length-1;else{if(this.currentCacheIndex===
this.cache.images.length)this.currentCacheIndex=0}else this.cache.images.length&gt;3&amp;&amp;(this.currentCacheIndex&gt;1&amp;&amp;this.currentCacheIndex&lt;this.cache.images.length-2?this.lastSlideByAction===b.Carousel.SlideByAction.next?a.DOM.appendChild(d[0],this.contentEl):this.lastSlideByAction===b.Carousel.SlideByAction.previous&amp;&amp;a.DOM.insertBefore(d[d.length-1],d[0],this.contentEl):this.currentCacheIndex===1?this.lastSlideByAction===b.Carousel.SlideByAction.previous&amp;&amp;a.DOM.insertBefore(d[d.length-1],d[0],this.contentEl):
this.currentCacheIndex===this.cache.images.length-2&amp;&amp;this.lastSlideByAction===b.Carousel.SlideByAction.next&amp;&amp;a.DOM.appendChild(d[0],this.contentEl));this.lastSlideByAction!==b.Carousel.SlideByAction.current&amp;&amp;(this.setContentLeftPosition(),this.setImages(!0));a.Events.fire(this,{type:b.Carousel.EventTypes.onSlideByEnd,target:this,action:this.lastSlideByAction,cacheIndex:this.currentCacheIndex});this.isSlideshowActive&amp;&amp;(this.lastSlideByAction!==b.Carousel.SlideByAction.current?this.startSlideshow():
this.stopSlideshow())}},onTouch:function(b,c){this.stopSlideshow();switch(b){case a.TouchElement.ActionTypes.touchStart:this.touchStartPoint=c;this.touchStartPosition={x:e.parseInt(a.DOM.getStyle(this.contentEl,&quot;left&quot;),0),y:e.parseInt(a.DOM.getStyle(this.contentEl,&quot;top&quot;),0)};break;case a.TouchElement.ActionTypes.touchMove:this.moveCarousel(c);break;case a.TouchElement.ActionTypes.touchMoveEnd:case a.TouchElement.ActionTypes.swipeLeft:case a.TouchElement.ActionTypes.swipeRight:this.slideCarousel(c,
b)}},onImageLoad:function(d){d=d.target;a.isNothing(d.imageEl.parentNode)||(a.DOM.removeClass(d.imageEl.parentNode,b.Carousel.CssClasses.itemLoading),this.resetImagePosition(d.imageEl));a.Events.remove(d,b.Image.EventTypes.onLoad,this.imageLoadHandler);a.Events.remove(d,b.Image.EventTypes.onError,this.imageErrorHandler)},onImageError:function(d){d=d.target;a.isNothing(d.imageEl.parentNode)||(a.DOM.removeClass(d.imageEl.parentNode,b.Carousel.CssClasses.itemLoading),a.DOM.addClass(d.imageEl.parentNode,
b.Carousel.CssClasses.itemError));a.Events.remove(d,b.Image.EventTypes.onLoad,this.imageLoadHandler);a.Events.remove(d,b.Image.EventTypes.onError,this.imageErrorHandler)}})})(window,window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.Carousel&quot;);c=e.Code.PhotoSwipe;c.Carousel.CarouselClass=c.Carousel.CarouselClass.extend({getStartingPos:function(){var b=this.touchStartPosition;a.isNothing(b)&amp;&amp;(b={x:e.parseInt(a.DOM.getStyle(this.contentEl,&quot;left&quot;),0),y:e.parseInt(a.DOM.getStyle(this.contentEl,&quot;top&quot;),0)});return b},doMoveCarousel:function(b){var d;a.Browser.isCSSTransformSupported?(d={},d[a.Animation._transitionPrefix+&quot;Property&quot;]=&quot;all&quot;,d[a.Animation._transitionPrefix+&quot;Duration&quot;]=
&quot;&quot;,d[a.Animation._transitionPrefix+&quot;TimingFunction&quot;]=&quot;&quot;,d[a.Animation._transitionPrefix+&quot;Delay&quot;]=&quot;0&quot;,d[a.Animation._transformLabel]=a.Browser.is3dSupported?&quot;translate3d(&quot;+b+&quot;px, 0px, 0px)&quot;:&quot;translate(&quot;+b+&quot;px, 0px)&quot;,a.DOM.setStyle(this.contentEl,d)):a.isNothing(e.jQuery)||e.jQuery(this.contentEl).stop().css(&quot;left&quot;,this.getStartingPos().x+b+&quot;px&quot;)},doSlideCarousel:function(b,d){var c;if(d&lt;=0)this.slideByEndHandler();else if(a.Browser.isCSSTransformSupported)c=a.coalesce(this.contentEl.style.webkitTransform,
this.contentEl.style.MozTransform,this.contentEl.style.transform,&quot;&quot;),c.indexOf(&quot;translate3d(&quot;+b)===0?this.slideByEndHandler():c.indexOf(&quot;translate(&quot;+b)===0?this.slideByEndHandler():a.Animation.slideBy(this.contentEl,b,0,d,this.slideByEndHandler,this.settings.slideTimingFunction);else if(!a.isNothing(e.jQuery)){c={left:this.getStartingPos().x+b+&quot;px&quot;};if(this.settings.animationTimingFunction===&quot;ease-out&quot;)this.settings.animationTimingFunction=&quot;easeOutQuad&quot;;if(a.isNothing(e.jQuery.easing[this.settings.animationTimingFunction]))this.settings.animationTimingFunction=
&quot;linear&quot;;e.jQuery(this.contentEl).animate(c,this.settings.slideSpeed,this.settings.animationTimingFunction,this.slideByEndHandler)}}})})(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.TouchElement);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.Toolbar&quot;);var b=e.Code.PhotoSwipe;b.Toolbar.CssClasses={toolbar:&quot;ps-toolbar&quot;,toolbarContent:&quot;ps-toolbar-content&quot;,toolbarTop:&quot;ps-toolbar-top&quot;,caption:&quot;ps-caption&quot;,captionBottom:&quot;ps-caption-bottom&quot;,captionContent:&quot;ps-caption-content&quot;,close:&quot;ps-toolbar-close&quot;,play:&quot;ps-toolbar-play&quot;,previous:&quot;ps-toolbar-previous&quot;,previousDisabled:&quot;ps-toolbar-previous-disabled&quot;,next:&quot;ps-toolbar-next&quot;,nextDisabled:&quot;ps-toolbar-next-disabled&quot;};b.Toolbar.ToolbarAction=
</P>
{close:&quot;close&quot;,play:&quot;play&quot;,next:&quot;next&quot;,previous:&quot;previous&quot;,none:&quot;none&quot;};b.Toolbar.EventTypes={onTap:&quot;PhotoSwipeToolbarOnClick&quot;,onBeforeShow:&quot;PhotoSwipeToolbarOnBeforeShow&quot;,onShow:&quot;PhotoSwipeToolbarOnShow&quot;,onBeforeHide:&quot;PhotoSwipeToolbarOnBeforeHide&quot;,onHide:&quot;PhotoSwipeToolbarOnHide&quot;};b.Toolbar.getToolbar=function(){return''}})(window,window.klass,window.Code.Util);
<P>(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.Toolbar&quot;);var b=e.Code.PhotoSwipe;b.Toolbar.ToolbarClass=c({toolbarEl:null,closeEl:null,playEl:null,previousEl:null,nextEl:null,captionEl:null,captionContentEl:null,currentCaption:null,settings:null,cache:null,timeout:null,isVisible:null,fadeOutHandler:null,touchStartHandler:null,touchMoveHandler:null,clickHandler:null,dispose:function(){var b;this.clearTimeout();this.removeEventHandlers();a.Animation.stop(this.toolbarEl);a.Animation.stop(this.captionEl);
a.DOM.removeChild(this.toolbarEl,this.toolbarEl.parentNode);a.DOM.removeChild(this.captionEl,this.captionEl.parentNode);for(b in this)a.objectHasProperty(this,b)&amp;&amp;(this[b]=null)},initialize:function(d,c){var g;this.settings=c;this.cache=d;this.isVisible=!1;this.fadeOutHandler=this.onFadeOut.bind(this);this.touchStartHandler=this.onTouchStart.bind(this);this.touchMoveHandler=this.onTouchMove.bind(this);this.clickHandler=this.onClick.bind(this);g=b.Toolbar.CssClasses.toolbar;this.settings.captionAndToolbarFlipPosition&amp;&amp;
(g=g+&quot; &quot;+b.Toolbar.CssClasses.toolbarTop);this.toolbarEl=a.DOM.createElement(&quot;div&quot;,{&quot;class&quot;:g},this.settings.getToolbar());a.DOM.setStyle(this.toolbarEl,{left:0,position:&quot;absolute&quot;,overflow:&quot;hidden&quot;,zIndex:this.settings.zIndex});this.settings.target===e?a.DOM.appendToBody(this.toolbarEl):a.DOM.appendChild(this.toolbarEl,this.settings.target);a.DOM.hide(this.toolbarEl);this.closeEl=a.DOM.find(&quot;.&quot;+b.Toolbar.CssClasses.close,this.toolbarEl)[0];this.settings.preventHide&amp;&amp;!a.isNothing(this.closeEl)&amp;&amp;a.DOM.hide(this.closeEl);
this.playEl=a.DOM.find(&quot;.&quot;+b.Toolbar.CssClasses.play,this.toolbarEl)[0];this.settings.preventSlideshow&amp;&amp;!a.isNothing(this.playEl)&amp;&amp;a.DOM.hide(this.playEl);this.nextEl=a.DOM.find(&quot;.&quot;+b.Toolbar.CssClasses.next,this.toolbarEl)[0];this.previousEl=a.DOM.find(&quot;.&quot;+b.Toolbar.CssClasses.previous,this.toolbarEl)[0];g=b.Toolbar.CssClasses.caption;this.settings.captionAndToolbarFlipPosition&amp;&amp;(g=g+&quot; &quot;+b.Toolbar.CssClasses.captionBottom);this.captionEl=a.DOM.createElement(&quot;div&quot;,{&quot;class&quot;:g},&quot;&quot;);a.DOM.setStyle(this.captionEl,
{left:0,position:&quot;absolute&quot;,overflow:&quot;hidden&quot;,zIndex:this.settings.zIndex});this.settings.target===e?a.DOM.appendToBody(this.captionEl):a.DOM.appendChild(this.captionEl,this.settings.target);a.DOM.hide(this.captionEl);this.captionContentEl=a.DOM.createElement(&quot;div&quot;,{&quot;class&quot;:b.Toolbar.CssClasses.captionContent},&quot;&quot;);a.DOM.appendChild(this.captionContentEl,this.captionEl);this.addEventHandlers()},resetPosition:function(){var b,c,g;this.settings.target===e?(this.settings.captionAndToolbarFlipPosition?
(c=a.DOM.windowScrollTop(),g=a.DOM.windowScrollTop()+a.DOM.windowHeight()-a.DOM.height(this.captionEl)):(c=a.DOM.windowScrollTop()+a.DOM.windowHeight()-a.DOM.height(this.toolbarEl),g=a.DOM.windowScrollTop()),b=a.DOM.windowWidth()):(this.settings.captionAndToolbarFlipPosition?(c=&quot;0&quot;,g=a.DOM.height(this.settings.target)-a.DOM.height(this.captionEl)):(c=a.DOM.height(this.settings.target)-a.DOM.height(this.toolbarEl),g=0),b=a.DOM.width(this.settings.target));a.DOM.setStyle(this.toolbarEl,{top:c+&quot;px&quot;,
width:b});a.DOM.setStyle(this.captionEl,{top:g+&quot;px&quot;,width:b})},toggleVisibility:function(a){this.isVisible?this.fadeOut():this.show(a)},show:function(d){a.Animation.stop(this.toolbarEl);a.Animation.stop(this.captionEl);this.resetPosition();this.setToolbarStatus(d);a.Events.fire(this,{type:b.Toolbar.EventTypes.onBeforeShow,target:this});this.showToolbar();this.setCaption(d);this.showCaption();this.isVisible=!0;this.setTimeout();a.Events.fire(this,{type:b.Toolbar.EventTypes.onShow,target:this})},setTimeout:function(){if(this.settings.captionAndToolbarAutoHideDelay&gt;
0)this.clearTimeout(),this.timeout=e.setTimeout(this.fadeOut.bind(this),this.settings.captionAndToolbarAutoHideDelay)},clearTimeout:function(){if(!a.isNothing(this.timeout))e.clearTimeout(this.timeout),this.timeout=null},fadeOut:function(){this.clearTimeout();a.Events.fire(this,{type:b.Toolbar.EventTypes.onBeforeHide,target:this});a.Animation.fadeOut(this.toolbarEl,this.settings.fadeOutSpeed);a.Animation.fadeOut(this.captionEl,this.settings.fadeOutSpeed,this.fadeOutHandler);this.isVisible=!1},addEventHandlers:function(){a.Browser.isTouchSupported&amp;&amp;
(a.Browser.blackberry||a.Events.add(this.toolbarEl,&quot;touchstart&quot;,this.touchStartHandler),a.Events.add(this.toolbarEl,&quot;touchmove&quot;,this.touchMoveHandler),a.Events.add(this.captionEl,&quot;touchmove&quot;,this.touchMoveHandler));a.Events.add(this.toolbarEl,&quot;click&quot;,this.clickHandler)},removeEventHandlers:function(){a.Browser.isTouchSupported&amp;&amp;(a.Browser.blackberry||a.Events.remove(this.toolbarEl,&quot;touchstart&quot;,this.touchStartHandler),a.Events.remove(this.toolbarEl,&quot;touchmove&quot;,this.touchMoveHandler),a.Events.remove(this.captionEl,
&quot;touchmove&quot;,this.touchMoveHandler));a.Events.remove(this.toolbarEl,&quot;click&quot;,this.clickHandler)},handleTap:function(d){this.clearTimeout();var c;if(d.target===this.nextEl||a.DOM.isChildOf(d.target,this.nextEl))c=b.Toolbar.ToolbarAction.next;else if(d.target===this.previousEl||a.DOM.isChildOf(d.target,this.previousEl))c=b.Toolbar.ToolbarAction.previous;else if(d.target===this.closeEl||a.DOM.isChildOf(d.target,this.closeEl))c=b.Toolbar.ToolbarAction.close;else if(d.target===this.playEl||a.DOM.isChildOf(d.target,
this.playEl))c=b.Toolbar.ToolbarAction.play;this.setTimeout();if(a.isNothing(c))c=b.Toolbar.ToolbarAction.none;a.Events.fire(this,{type:b.Toolbar.EventTypes.onTap,target:this,action:c,tapTarget:d.target})},setCaption:function(b){a.DOM.removeChildren(this.captionContentEl);this.currentCaption=a.coalesce(this.cache.images[b].caption,&quot;\u00a0&quot;);if(a.isObject(this.currentCaption))a.DOM.appendChild(this.currentCaption,this.captionContentEl);else{if(this.currentCaption===&quot;&quot;)this.currentCaption=&quot;\u00a0&quot;;
a.DOM.appendText(this.currentCaption,this.captionContentEl)}this.currentCaption=this.currentCaption===&quot;\u00a0&quot;?&quot;&quot;:this.currentCaption;this.resetPosition()},showToolbar:function(){a.DOM.setStyle(this.toolbarEl,{opacity:this.settings.captionAndToolbarOpacity});a.DOM.show(this.toolbarEl)},showCaption:function(){(this.currentCaption===&quot;&quot;||this.captionContentEl.childNodes.length&lt;1)&amp;&amp;!this.settings.captionAndToolbarShowEmptyCaptions?a.DOM.hide(this.captionEl):(a.DOM.setStyle(this.captionEl,{opacity:this.settings.captionAndToolbarOpacity}),
a.DOM.show(this.captionEl))},setToolbarStatus:function(d){this.settings.loop||(a.DOM.removeClass(this.previousEl,b.Toolbar.CssClasses.previousDisabled),a.DOM.removeClass(this.nextEl,b.Toolbar.CssClasses.nextDisabled),d&gt;0&amp;&amp;d&lt;this.cache.images.length-1||(d===0&amp;&amp;(a.isNothing(this.previousEl)||a.DOM.addClass(this.previousEl,b.Toolbar.CssClasses.previousDisabled)),d===this.cache.images.length-1&amp;&amp;(a.isNothing(this.nextEl)||a.DOM.addClass(this.nextEl,b.Toolbar.CssClasses.nextDisabled))))},onFadeOut:function(){a.DOM.hide(this.toolbarEl);
a.DOM.hide(this.captionEl);a.Events.fire(this,{type:b.Toolbar.EventTypes.onHide,target:this})},onTouchStart:function(b){b.preventDefault();a.Events.remove(this.toolbarEl,&quot;click&quot;,this.clickHandler);this.handleTap(b)},onTouchMove:function(a){a.preventDefault()},onClick:function(a){a.preventDefault();this.handleTap(a)}})})(window,window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.UILayer&quot;);e.Code.PhotoSwipe.UILayer.CssClasses={uiLayer:&quot;ps-uilayer&quot;}})(window,window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.UILayer&quot;);var b=e.Code.PhotoSwipe;b.UILayer.UILayerClass=a.TouchElement.TouchElementClass.extend({el:null,settings:null,dispose:function(){var b;this.removeEventHandlers();a.DOM.removeChild(this.el,this.el.parentNode);for(b in this)a.objectHasProperty(this,b)&amp;&amp;(this[b]=null)},initialize:function(d){this.settings=d;this.el=a.DOM.createElement(&quot;div&quot;,{&quot;class&quot;:b.UILayer.CssClasses.uiLayer},&quot;&quot;);a.DOM.setStyle(this.el,{display:&quot;block&quot;,position:&quot;absolute&quot;,
left:0,top:0,overflow:&quot;hidden&quot;,zIndex:this.settings.zIndex,opacity:0});a.DOM.hide(this.el);this.settings.target===e?a.DOM.appendToBody(this.el):a.DOM.appendChild(this.el,this.settings.target);this.supr(this.el,{swipe:!0,move:!0,gesture:a.Browser.iOS,doubleTap:!0,preventDefaultTouchEvents:this.settings.preventDefaultTouchEvents})},resetPosition:function(){this.settings.target===e?a.DOM.setStyle(this.el,{top:a.DOM.windowScrollTop()+&quot;px&quot;,width:a.DOM.windowWidth(),height:a.DOM.windowHeight()}):a.DOM.setStyle(this.el,
{top:&quot;0px&quot;,width:a.DOM.width(this.settings.target),height:a.DOM.height(this.settings.target)})},show:function(){this.resetPosition();a.DOM.show(this.el);this.addEventHandlers()},addEventHandlers:function(){this.supr()},removeEventHandlers:function(){this.supr()}})})(window,window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.ZoomPanRotate&quot;);e=e.Code.PhotoSwipe;e.ZoomPanRotate.CssClasses={zoomPanRotate:&quot;ps-zoom-pan-rotate&quot;};e.ZoomPanRotate.EventTypes={onTransform:&quot;PhotoSwipeZoomPanRotateOnTransform&quot;}})(window,window.klass,window.Code.Util);
(function(e,c,a){a.registerNamespace(&quot;Code.PhotoSwipe.ZoomPanRotate&quot;);var b=e.Code.PhotoSwipe;b.ZoomPanRotate.ZoomPanRotateClass=c({el:null,settings:null,containerEl:null,imageEl:null,transformSettings:null,panStartingPoint:null,transformEl:null,dispose:function(){var b;a.DOM.removeChild(this.el,this.el.parentNode);for(b in this)a.objectHasProperty(this,b)&amp;&amp;(this[b]=null)},initialize:function(c,f,g){var h,j,i;this.settings=c;this.settings.target===e?(c=document.body,h=a.DOM.windowWidth(),j=a.DOM.windowHeight(),
i=a.DOM.windowScrollTop()+&quot;px&quot;):(c=this.settings.target,h=a.DOM.width(c),j=a.DOM.height(c),i=&quot;0px&quot;);this.imageEl=f.imageEl.cloneNode(!1);a.DOM.setStyle(this.imageEl,{zIndex:1});this.transformSettings={startingScale:1,scale:1,startingRotation:0,rotation:0,startingTranslateX:0,startingTranslateY:0,translateX:0,translateY:0};this.el=a.DOM.createElement(&quot;div&quot;,{&quot;class&quot;:b.ZoomPanRotate.CssClasses.zoomPanRotate},&quot;&quot;);a.DOM.setStyle(this.el,{left:0,top:i,position:&quot;absolute&quot;,width:h,height:j,zIndex:this.settings.zIndex,
display:&quot;block&quot;});a.DOM.insertBefore(this.el,g.el,c);a.Browser.iOS?(this.containerEl=a.DOM.createElement(&quot;div&quot;,&quot;&quot;,&quot;&quot;),a.DOM.setStyle(this.containerEl,{left:0,top:0,width:h,height:j,position:&quot;absolute&quot;,zIndex:1}),a.DOM.appendChild(this.imageEl,this.containerEl),a.DOM.appendChild(this.containerEl,this.el),a.Animation.resetTranslate(this.containerEl),a.Animation.resetTranslate(this.imageEl),this.transformEl=this.containerEl):(a.DOM.appendChild(this.imageEl,this.el),this.transformEl=this.imageEl)},setStartingTranslateFromCurrentTransform:function(){var b=
a.coalesce(this.transformEl.style.webkitTransform,this.transformEl.style.MozTransform,this.transformEl.style.transform);if(!a.isNothing(b)&amp;&amp;(b=b.match(/translate\((.*?)\)/),!a.isNothing(b)))b=b[1].split(&quot;, &quot;),this.transformSettings.startingTranslateX=e.parseInt(b[0],10),this.transformSettings.startingTranslateY=e.parseInt(b[1],10)},getScale:function(a){a*=this.transformSettings.startingScale;if(this.settings.minUserZoom!==0&amp;&amp;a&lt;this.settings.minUserZoom)a=this.settings.minUserZoom;else if(this.settings.maxUserZoom!==
0&amp;&amp;a&gt;this.settings.maxUserZoom)a=this.settings.maxUserZoom;return a},setStartingScaleAndRotation:function(a,b){this.transformSettings.startingScale=this.getScale(a);this.transformSettings.startingRotation=(this.transformSettings.startingRotation+b)%360},zoomRotate:function(a,b){this.transformSettings.scale=this.getScale(a);this.transformSettings.rotation=this.transformSettings.startingRotation+b;this.applyTransform()},panStart:function(a){this.setStartingTranslateFromCurrentTransform();this.panStartingPoint=
{x:a.x,y:a.y}},pan:function(a){var b=(a.y-this.panStartingPoint.y)/this.transformSettings.scale;this.transformSettings.translateX=this.transformSettings.startingTranslateX+(a.x-this.panStartingPoint.x)/this.transformSettings.scale;this.transformSettings.translateY=this.transformSettings.startingTranslateY+b;this.applyTransform()},zoomAndPanToPoint:function(b,c){if(this.settings.target===e){this.panStart({x:a.DOM.windowWidth()/2,y:a.DOM.windowHeight()/2});var g=(c.y-this.panStartingPoint.y)/this.transformSettings.scale;
this.transformSettings.translateX=(this.transformSettings.startingTranslateX+(c.x-this.panStartingPoint.x)/this.transformSettings.scale)*-1;this.transformSettings.translateY=(this.transformSettings.startingTranslateY+g)*-1}this.setStartingScaleAndRotation(b,0);this.transformSettings.scale=this.transformSettings.startingScale;this.transformSettings.rotation=0;this.applyTransform()},applyTransform:function(){var c=this.transformSettings.rotation%360,f=e.parseInt(this.transformSettings.translateX,10),
g=e.parseInt(this.transformSettings.translateY,10),h=&quot;scale(&quot;+this.transformSettings.scale+&quot;) rotate(&quot;+c+&quot;deg) translate(&quot;+f+&quot;px, &quot;+g+&quot;px)&quot;;a.DOM.setStyle(this.transformEl,{webkitTransform:h,MozTransform:h,msTransform:h,transform:h});a.Events.fire(this,{target:this,type:b.ZoomPanRotate.EventTypes.onTransform,scale:this.transformSettings.scale,rotation:this.transformSettings.rotation,rotationDegs:c,translateX:f,translateY:g})}})})(window,window.klass,window.Code.Util);
(function(e,c){c.registerNamespace(&quot;Code.PhotoSwipe&quot;);var a=e.Code.PhotoSwipe;a.CssClasses={buildingBody:&quot;ps-building&quot;,activeBody:&quot;ps-active&quot;};a.EventTypes={onBeforeShow:&quot;PhotoSwipeOnBeforeShow&quot;,onShow:&quot;PhotoSwipeOnShow&quot;,onBeforeHide:&quot;PhotoSwipeOnBeforeHide&quot;,onHide:&quot;PhotoSwipeOnHide&quot;,onDisplayImage:&quot;PhotoSwipeOnDisplayImage&quot;,onResetPosition:&quot;PhotoSwipeOnResetPosition&quot;,onSlideshowStart:&quot;PhotoSwipeOnSlideshowStart&quot;,onSlideshowStop:&quot;PhotoSwipeOnSlideshowStop&quot;,onTouch:&quot;PhotoSwipeOnTouch&quot;,onBeforeCaptionAndToolbarShow:&quot;PhotoSwipeOnBeforeCaptionAndToolbarShow&quot;,
onCaptionAndToolbarShow:&quot;PhotoSwipeOnCaptionAndToolbarShow&quot;,onBeforeCaptionAndToolbarHide:&quot;PhotoSwipeOnBeforeCaptionAndToolbarHide&quot;,onCaptionAndToolbarHide:&quot;PhotoSwipeOnCaptionAndToolbarHide&quot;,onToolbarTap:&quot;PhotoSwipeOnToolbarTap&quot;,onBeforeZoomPanRotateShow:&quot;PhotoSwipeOnBeforeZoomPanRotateShow&quot;,onZoomPanRotateShow:&quot;PhotoSwipeOnZoomPanRotateShow&quot;,onBeforeZoomPanRotateHide:&quot;PhotoSwipeOnBeforeZoomPanRotateHide&quot;,onZoomPanRotateHide:&quot;PhotoSwipeOnZoomPanRotateHide&quot;,onZoomPanRotateTransform:&quot;PhotoSwipeOnZoomPanRotateTransform&quot;};
a.instances=[];a.activeInstances=[];a.setActivateInstance=function(b){if(c.arrayIndexOf(b.settings.target,a.activeInstances,&quot;target&quot;)&gt;-1)throw&quot;Code.PhotoSwipe.activateInstance: Unable to active instance as another instance is already active for this target&quot;;a.activeInstances.push({target:b.settings.target,instance:b})};a.unsetActivateInstance=function(b){b=c.arrayIndexOf(b,a.activeInstances,&quot;instance&quot;);a.activeInstances.splice(b,1)};a.attach=function(b,d,e){var g,h;g=a.createInstance(b,d,e);d=0;for(e=
b.length;d&lt;e;d++)if(h=b[d],!c.isNothing(h.nodeType)&amp;&amp;h.nodeType===1)h.__photoSwipeClickHandler=a.onTriggerElementClick.bind(g),c.Events.remove(h,&quot;click&quot;,h.__photoSwipeClickHandler),c.Events.add(h,&quot;click&quot;,h.__photoSwipeClickHandler);return g};if(e.jQuery)e.jQuery.fn.photoSwipe=function(b,c){return a.attach(this,b,c)};a.detatch=function(b){var d,e,g;d=0;for(e=b.originalImages.length;d&lt;e;d++)g=b.originalImages[d],!c.isNothing(g.nodeType)&amp;&amp;g.nodeType===1&amp;&amp;(c.Events.remove(g,&quot;click&quot;,g.__photoSwipeClickHandler),
delete g.__photoSwipeClickHandler);a.disposeInstance(b)};a.createInstance=function(b,d,e){var g;if(c.isNothing(b))throw&quot;Code.PhotoSwipe.attach: No images passed.&quot;;if(!c.isLikeArray(b))throw&quot;Code.PhotoSwipe.createInstance: Images must be an array of elements or image urls.&quot;;if(b.length&lt;1)throw&quot;Code.PhotoSwipe.createInstance: No images to passed.&quot;;d=c.coalesce(d,{});g=a.getInstance(e);if(c.isNothing(g))g=new a.PhotoSwipeClass(b,d,e),a.instances.push(g);else throw'Code.PhotoSwipe.createInstance: Instance with id &quot;'+
e+' already exists.&quot;';return g};a.disposeInstance=function(b){var c=a.getInstanceIndex(b);if(c&lt;0)throw&quot;Code.PhotoSwipe.disposeInstance: Unable to find instance to dispose.&quot;;b.dispose();a.instances.splice(c,1)};a.onTriggerElementClick=function(a){a.preventDefault();this.show(a.currentTarget)};a.getInstance=function(b){var c,e,g;c=0;for(e=a.instances.length;c&lt;e;c++)if(g=a.instances[c],g.id===b)return g;return null};a.getInstanceIndex=function(b){var c,e,g=-1;c=0;for(e=a.instances.length;c&lt;e;c++)if(a.instances[c]===
b){g=c;break}return g}})(window,window.Code.Util);
(function(e,c,a,b,d,f,g,h,j){a.registerNamespace(&quot;Code.PhotoSwipe&quot;);var i=e.Code.PhotoSwipe;i.PhotoSwipeClass=c({id:null,settings:null,isBackEventSupported:null,backButtonClicked:null,currentIndex:null,originalImages:null,mouseWheelStartTime:null,windowDimensions:null,cache:null,documentOverlay:null,carousel:null,uiLayer:null,toolbar:null,zoomPanRotate:null,windowOrientationChangeHandler:null,windowScrollHandler:null,windowHashChangeHandler:null,keyDownHandler:null,windowOrientationEventName:null,
uiLayerTouchHandler:null,carouselSlideByEndHandler:null,carouselSlideshowStartHandler:null,carouselSlideshowStopHandler:null,toolbarTapHandler:null,toolbarBeforeShowHandler:null,toolbarShowHandler:null,toolbarBeforeHideHandler:null,toolbarHideHandler:null,mouseWheelHandler:null,zoomPanRotateTransformHandler:null,_isResettingPosition:null,_uiWebViewResetPositionTimeout:null,dispose:function(){var b;a.Events.remove(this,i.EventTypes.onBeforeShow);a.Events.remove(this,i.EventTypes.onShow);a.Events.remove(this,
i.EventTypes.onBeforeHide);a.Events.remove(this,i.EventTypes.onHide);a.Events.remove(this,i.EventTypes.onDisplayImage);a.Events.remove(this,i.EventTypes.onResetPosition);a.Events.remove(this,i.EventTypes.onSlideshowStart);a.Events.remove(this,i.EventTypes.onSlideshowStop);a.Events.remove(this,i.EventTypes.onTouch);a.Events.remove(this,i.EventTypes.onBeforeCaptionAndToolbarShow);a.Events.remove(this,i.EventTypes.onCaptionAndToolbarShow);a.Events.remove(this,i.EventTypes.onBeforeCaptionAndToolbarHide);
a.Events.remove(this,i.EventTypes.onCaptionAndToolbarHide);a.Events.remove(this,i.EventTypes.onZoomPanRotateTransform);this.removeEventHandlers();a.isNothing(this.documentOverlay)||this.documentOverlay.dispose();a.isNothing(this.carousel)||this.carousel.dispose();a.isNothing(this.uiLayer)||this.uiLayer.dispose();a.isNothing(this.toolbar)||this.toolbar.dispose();this.destroyZoomPanRotate();a.isNothing(this.cache)||this.cache.dispose();for(b in this)a.objectHasProperty(this,b)&amp;&amp;(this[b]=null)},initialize:function(c,
d,f){this.id=a.isNothing(f)?&quot;PhotoSwipe&quot;+(new Date).getTime().toString():f;this.originalImages=c;if(a.Browser.android&amp;&amp;!a.Browser.firefox&amp;&amp;e.navigator.userAgent.match(/Android (\d+.\d+)/).toString().replace(/^.*\,/,&quot;&quot;)&gt;=2.1)this.isBackEventSupported=!0;if(!this.isBackEventSupported)this.isBackEventSupported=a.objectHasProperty(e,&quot;onhashchange&quot;);this.settings={fadeInSpeed:250,fadeOutSpeed:250,preventHide:!1,preventSlideshow:!1,zIndex:1E3,backButtonHideEnabled:!0,enableKeyboard:!0,enableMouseWheel:!0,
mouseWheelSpeed:350,autoStartSlideshow:!1,jQueryMobile:!a.isNothing(e.jQuery)&amp;&amp;!a.isNothing(e.jQuery.mobile),jQueryMobileDialogHash:&quot;&amp;ui-state=dialog&quot;,enableUIWebViewRepositionTimeout:!1,uiWebViewResetPositionDelay:500,target:e,preventDefaultTouchEvents:!0,loop:!0,slideSpeed:250,nextPreviousSlideSpeed:0,enableDrag:!0,swipeThreshold:50,swipeTimeThreshold:250,slideTimingFunction:&quot;ease-out&quot;,slideshowDelay:3E3,doubleTapSpeed:250,margin:20,imageScaleMethod:&quot;fit&quot;,captionAndToolbarHide:!1,captionAndToolbarFlipPosition:!1,
captionAndToolbarAutoHideDelay:5E3,captionAndToolbarOpacity:0.8,captionAndToolbarShowEmptyCaptions:!0,getToolbar:i.Toolbar.getToolbar,allowUserZoom:!0,allowRotationOnUserZoom:!1,maxUserZoom:5,minUserZoom:0.5,doubleTapZoomLevel:2.5,getImageSource:i.Cache.Functions.getImageSource,getImageCaption:i.Cache.Functions.getImageCaption,getImageMetaData:i.Cache.Functions.getImageMetaData,cacheMode:i.Cache.Mode.normal};a.extend(this.settings,d);this.settings.target!==e&amp;&amp;(d=a.DOM.getStyle(this.settings.target,
&quot;position&quot;),(d!==&quot;relative&quot;||d!==&quot;absolute&quot;)&amp;&amp;a.DOM.setStyle(this.settings.target,&quot;position&quot;,&quot;relative&quot;));if(this.settings.target!==e)this.isBackEventSupported=!1,this.settings.backButtonHideEnabled=!1;else if(this.settings.preventHide)this.settings.backButtonHideEnabled=!1;this.cache=new b.CacheClass(c,this.settings)},show:function(b){var c,d;this.backButtonClicked=this._isResettingPosition=!1;if(a.isNumber(b))this.currentIndex=b;else{this.currentIndex=-1;c=0;for(d=this.originalImages.length;c&lt;d;c++)if(this.originalImages[c]===
b){this.currentIndex=c;break}}if(this.currentIndex&lt;0||this.currentIndex&gt;this.originalImages.length-1)throw&quot;Code.PhotoSwipe.PhotoSwipeClass.show: Starting index out of range&quot;;this.isAlreadyGettingPage=this.getWindowDimensions();i.setActivateInstance(this);this.windowDimensions=this.getWindowDimensions();this.settings.target===e?a.DOM.addClass(e.document.body,i.CssClasses.buildingBody):a.DOM.addClass(this.settings.target,i.CssClasses.buildingBody);this.createComponents();a.Events.fire(this,{type:i.EventTypes.onBeforeShow,
target:this});this.documentOverlay.fadeIn(this.settings.fadeInSpeed,this.onDocumentOverlayFadeIn.bind(this))},getWindowDimensions:function(){return{width:a.DOM.windowWidth(),height:a.DOM.windowHeight()}},createComponents:function(){this.documentOverlay=new d.DocumentOverlayClass(this.settings);this.carousel=new f.CarouselClass(this.cache,this.settings);this.uiLayer=new h.UILayerClass(this.settings);if(!this.settings.captionAndToolbarHide)this.toolbar=new g.ToolbarClass(this.cache,this.settings)},
resetPosition:function(){if(!this._isResettingPosition){var b=this.getWindowDimensions();if(a.isNothing(this.windowDimensions)||!(b.width===this.windowDimensions.width&amp;&amp;b.height===this.windowDimensions.height))this._isResettingPosition=!0,this.windowDimensions=b,this.destroyZoomPanRotate(),this.documentOverlay.resetPosition(),this.carousel.resetPosition(),a.isNothing(this.toolbar)||this.toolbar.resetPosition(),this.uiLayer.resetPosition(),this._isResettingPosition=!1,a.Events.fire(this,{type:i.EventTypes.onResetPosition,
target:this})}},addEventHandler:function(b,c){a.Events.add(this,b,c)},addEventHandlers:function(){if(a.isNothing(this.windowOrientationChangeHandler))this.windowOrientationChangeHandler=this.onWindowOrientationChange.bind(this),this.windowScrollHandler=this.onWindowScroll.bind(this),this.keyDownHandler=this.onKeyDown.bind(this),this.windowHashChangeHandler=this.onWindowHashChange.bind(this),this.uiLayerTouchHandler=this.onUILayerTouch.bind(this),this.carouselSlideByEndHandler=this.onCarouselSlideByEnd.bind(this),
this.carouselSlideshowStartHandler=this.onCarouselSlideshowStart.bind(this),this.carouselSlideshowStopHandler=this.onCarouselSlideshowStop.bind(this),this.toolbarTapHandler=this.onToolbarTap.bind(this),this.toolbarBeforeShowHandler=this.onToolbarBeforeShow.bind(this),this.toolbarShowHandler=this.onToolbarShow.bind(this),this.toolbarBeforeHideHandler=this.onToolbarBeforeHide.bind(this),this.toolbarHideHandler=this.onToolbarHide.bind(this),this.mouseWheelHandler=this.onMouseWheel.bind(this),this.zoomPanRotateTransformHandler=
this.onZoomPanRotateTransform.bind(this);a.Browser.android?this.orientationEventName=&quot;resize&quot;:a.Browser.iOS&amp;&amp;!a.Browser.safari?a.Events.add(e.document.body,&quot;orientationchange&quot;,this.windowOrientationChangeHandler):this.orientationEventName=!a.isNothing(e.onorientationchange)?&quot;orientationchange&quot;:&quot;resize&quot;;a.isNothing(this.orientationEventName)||a.Events.add(e,this.orientationEventName,this.windowOrientationChangeHandler);this.settings.target===e&amp;&amp;a.Events.add(e,&quot;scroll&quot;,this.windowScrollHandler);this.settings.enableKeyboard&amp;&amp;
a.Events.add(e.document,&quot;keydown&quot;,this.keyDownHandler);if(this.isBackEventSupported&amp;&amp;this.settings.backButtonHideEnabled)this.windowHashChangeHandler=this.onWindowHashChange.bind(this),this.settings.jQueryMobile?e.location.hash=this.settings.jQueryMobileDialogHash:(this.currentHistoryHashValue=&quot;PhotoSwipe&quot;+(new Date).getTime().toString(),e.location.hash=this.currentHistoryHashValue),a.Events.add(e,&quot;hashchange&quot;,this.windowHashChangeHandler);this.settings.enableMouseWheel&amp;&amp;a.Events.add(e,&quot;mousewheel&quot;,
this.mouseWheelHandler);a.Events.add(this.uiLayer,a.TouchElement.EventTypes.onTouch,this.uiLayerTouchHandler);a.Events.add(this.carousel,f.EventTypes.onSlideByEnd,this.carouselSlideByEndHandler);a.Events.add(this.carousel,f.EventTypes.onSlideshowStart,this.carouselSlideshowStartHandler);a.Events.add(this.carousel,f.EventTypes.onSlideshowStop,this.carouselSlideshowStopHandler);a.isNothing(this.toolbar)||(a.Events.add(this.toolbar,g.EventTypes.onTap,this.toolbarTapHandler),a.Events.add(this.toolbar,
g.EventTypes.onBeforeShow,this.toolbarBeforeShowHandler),a.Events.add(this.toolbar,g.EventTypes.onShow,this.toolbarShowHandler),a.Events.add(this.toolbar,g.EventTypes.onBeforeHide,this.toolbarBeforeHideHandler),a.Events.add(this.toolbar,g.EventTypes.onHide,this.toolbarHideHandler))},removeEventHandlers:function(){a.Browser.iOS&amp;&amp;!a.Browser.safari&amp;&amp;a.Events.remove(e.document.body,&quot;orientationchange&quot;,this.windowOrientationChangeHandler);a.isNothing(this.orientationEventName)||a.Events.remove(e,this.orientationEventName,
this.windowOrientationChangeHandler);a.Events.remove(e,&quot;scroll&quot;,this.windowScrollHandler);this.settings.enableKeyboard&amp;&amp;a.Events.remove(e.document,&quot;keydown&quot;,this.keyDownHandler);this.isBackEventSupported&amp;&amp;this.settings.backButtonHideEnabled&amp;&amp;a.Events.remove(e,&quot;hashchange&quot;,this.windowHashChangeHandler);this.settings.enableMouseWheel&amp;&amp;a.Events.remove(e,&quot;mousewheel&quot;,this.mouseWheelHandler);a.isNothing(this.uiLayer)||a.Events.remove(this.uiLayer,a.TouchElement.EventTypes.onTouch,this.uiLayerTouchHandler);
a.isNothing(this.toolbar)||(a.Events.remove(this.carousel,f.EventTypes.onSlideByEnd,this.carouselSlideByEndHandler),a.Events.remove(this.carousel,f.EventTypes.onSlideshowStart,this.carouselSlideshowStartHandler),a.Events.remove(this.carousel,f.EventTypes.onSlideshowStop,this.carouselSlideshowStopHandler));a.isNothing(this.toolbar)||(a.Events.remove(this.toolbar,g.EventTypes.onTap,this.toolbarTapHandler),a.Events.remove(this.toolbar,g.EventTypes.onBeforeShow,this.toolbarBeforeShowHandler),a.Events.remove(this.toolbar,
g.EventTypes.onShow,this.toolbarShowHandler),a.Events.remove(this.toolbar,g.EventTypes.onBeforeHide,this.toolbarBeforeHideHandler),a.Events.remove(this.toolbar,g.EventTypes.onHide,this.toolbarHideHandler))},hide:function(){if(!this.settings.preventHide){if(a.isNothing(this.documentOverlay))throw&quot;Code.PhotoSwipe.PhotoSwipeClass.hide: PhotoSwipe instance is already hidden&quot;;if(a.isNothing(this.hiding)){this.clearUIWebViewResetPositionTimeout();this.destroyZoomPanRotate();this.removeEventHandlers();a.Events.fire(this,
{type:i.EventTypes.onBeforeHide,target:this});this.uiLayer.dispose();this.uiLayer=null;if(!a.isNothing(this.toolbar))this.toolbar.dispose(),this.toolbar=null;this.carousel.dispose();this.carousel=null;a.DOM.removeClass(e.document.body,i.CssClasses.activeBody);this.documentOverlay.dispose();this.documentOverlay=null;this._isResettingPosition=!1;i.unsetActivateInstance(this);a.Events.fire(this,{type:i.EventTypes.onHide,target:this});this.goBackInHistory()}}},goBackInHistory:function(){this.isBackEventSupported&amp;&amp;
this.settings.backButtonHideEnabled&amp;&amp;(this.backButtonClicked||e.history.back())},play:function(){!this.isZoomActive()&amp;&amp;!this.settings.preventSlideshow&amp;&amp;!a.isNothing(this.carousel)&amp;&amp;(!a.isNothing(this.toolbar)&amp;&amp;this.toolbar.isVisible&amp;&amp;this.toolbar.fadeOut(),this.carousel.startSlideshow())},stop:function(){this.isZoomActive()||a.isNothing(this.carousel)||this.carousel.stopSlideshow()},previous:function(){this.isZoomActive()||a.isNothing(this.carousel)||this.carousel.previous()},next:function(){this.isZoomActive()||
a.isNothing(this.carousel)||this.carousel.next()},toggleToolbar:function(){this.isZoomActive()||a.isNothing(this.toolbar)||this.toolbar.toggleVisibility(this.currentIndex)},fadeOutToolbarIfVisible:function(){!a.isNothing(this.toolbar)&amp;&amp;this.toolbar.isVisible&amp;&amp;this.settings.captionAndToolbarAutoHideDelay&gt;0&amp;&amp;this.toolbar.fadeOut()},createZoomPanRotate:function(){this.stop();if(this.canUserZoom()&amp;&amp;!this.isZoomActive())a.Events.fire(this,i.EventTypes.onBeforeZoomPanRotateShow),this.zoomPanRotate=new j.ZoomPanRotateClass(this.settings,
this.cache.images[this.currentIndex],this.uiLayer),this.uiLayer.captureSettings.preventDefaultTouchEvents=!0,a.Events.add(this.zoomPanRotate,i.ZoomPanRotate.EventTypes.onTransform,this.zoomPanRotateTransformHandler),a.Events.fire(this,i.EventTypes.onZoomPanRotateShow),!a.isNothing(this.toolbar)&amp;&amp;this.toolbar.isVisible&amp;&amp;this.toolbar.fadeOut()},destroyZoomPanRotate:function(){if(!a.isNothing(this.zoomPanRotate))a.Events.fire(this,i.EventTypes.onBeforeZoomPanRotateHide),a.Events.remove(this.zoomPanRotate,
i.ZoomPanRotate.EventTypes.onTransform,this.zoomPanRotateTransformHandler),this.zoomPanRotate.dispose(),this.zoomPanRotate=null,this.uiLayer.captureSettings.preventDefaultTouchEvents=this.settings.preventDefaultTouchEvents,a.Events.fire(this,i.EventTypes.onZoomPanRotateHide)},canUserZoom:function(){var b;if(a.Browser.msie){if(b=document.createElement(&quot;div&quot;),a.isNothing(b.style.msTransform))return!1}else if(!a.Browser.isCSSTransformSupported)return!1;if(!this.settings.allowUserZoom)return!1;if(this.carousel.isSliding)return!1;
b=this.cache.images[this.currentIndex];if(a.isNothing(b))return!1;if(b.isLoading)return!1;return!0},isZoomActive:function(){return!a.isNothing(this.zoomPanRotate)},getCurrentImage:function(){return this.cache.images[this.currentIndex]},onDocumentOverlayFadeIn:function(){e.setTimeout(function(){var b=this.settings.target===e?e.document.body:this.settings.target;a.DOM.removeClass(b,i.CssClasses.buildingBody);a.DOM.addClass(b,i.CssClasses.activeBody);this.addEventHandlers();this.carousel.show(this.currentIndex);
this.uiLayer.show();this.settings.autoStartSlideshow?this.play():a.isNothing(this.toolbar)||this.toolbar.show(this.currentIndex);a.Events.fire(this,{type:i.EventTypes.onShow,target:this});this.setUIWebViewResetPositionTimeout()}.bind(this),250)},setUIWebViewResetPositionTimeout:function(){if(this.settings.enableUIWebViewRepositionTimeout&amp;&amp;a.Browser.iOS&amp;&amp;!a.Browser.safari)a.isNothing(this._uiWebViewResetPositionTimeout)||e.clearTimeout(this._uiWebViewResetPositionTimeout),this._uiWebViewResetPositionTimeout=
e.setTimeout(function(){this.resetPosition();this.setUIWebViewResetPositionTimeout()}.bind(this),this.settings.uiWebViewResetPositionDelay)},clearUIWebViewResetPositionTimeout:function(){a.isNothing(this._uiWebViewResetPositionTimeout)||e.clearTimeout(this._uiWebViewResetPositionTimeout)},onWindowScroll:function(){this.resetPosition()},onWindowOrientationChange:function(){this.resetPosition()},onWindowHashChange:function(){if(e.location.hash!==&quot;#&quot;+(this.settings.jQueryMobile?this.settings.jQueryMobileDialogHash:
this.currentHistoryHashValue))this.backButtonClicked=!0,this.hide()},onKeyDown:function(a){a.keyCode===37?(a.preventDefault(),this.previous()):a.keyCode===39?(a.preventDefault(),this.next()):a.keyCode===38||a.keyCode===40?a.preventDefault():a.keyCode===27?(a.preventDefault(),this.hide()):a.keyCode===32?(this.settings.hideToolbar?this.hide():this.toggleToolbar(),a.preventDefault()):a.keyCode===13&amp;&amp;(a.preventDefault(),this.play())},onUILayerTouch:function(b){if(this.isZoomActive())switch(b.action){case a.TouchElement.ActionTypes.gestureChange:this.zoomPanRotate.zoomRotate(b.scale,
this.settings.allowRotationOnUserZoom?b.rotation:0);break;case a.TouchElement.ActionTypes.gestureEnd:this.zoomPanRotate.setStartingScaleAndRotation(b.scale,this.settings.allowRotationOnUserZoom?b.rotation:0);break;case a.TouchElement.ActionTypes.touchStart:this.zoomPanRotate.panStart(b.point);break;case a.TouchElement.ActionTypes.touchMove:this.zoomPanRotate.pan(b.point);break;case a.TouchElement.ActionTypes.doubleTap:this.destroyZoomPanRotate();this.toggleToolbar();break;case a.TouchElement.ActionTypes.swipeLeft:this.destroyZoomPanRotate();
this.next();this.toggleToolbar();break;case a.TouchElement.ActionTypes.swipeRight:this.destroyZoomPanRotate(),this.previous(),this.toggleToolbar()}else switch(b.action){case a.TouchElement.ActionTypes.touchMove:case a.TouchElement.ActionTypes.swipeLeft:case a.TouchElement.ActionTypes.swipeRight:this.fadeOutToolbarIfVisible();this.carousel.onTouch(b.action,b.point);break;case a.TouchElement.ActionTypes.touchStart:case a.TouchElement.ActionTypes.touchMoveEnd:this.carousel.onTouch(b.action,b.point);
break;case a.TouchElement.ActionTypes.tap:this.toggleToolbar();break;case a.TouchElement.ActionTypes.doubleTap:this.settings.target===e&amp;&amp;(b.point.x-=a.DOM.windowScrollLeft(),b.point.y-=a.DOM.windowScrollTop());var c=this.cache.images[this.currentIndex].imageEl,d=e.parseInt(a.DOM.getStyle(c,&quot;top&quot;),10),f=e.parseInt(a.DOM.getStyle(c,&quot;left&quot;),10),g=f+a.DOM.width(c),c=d+a.DOM.height(c);if(b.point.x&lt;f)b.point.x=f;else if(b.point.x&gt;g)b.point.x=g;if(b.point.y&lt;d)b.point.y=d;else if(b.point.y&gt;c)b.point.y=c;
this.createZoomPanRotate();this.isZoomActive()&amp;&amp;this.zoomPanRotate.zoomAndPanToPoint(this.settings.doubleTapZoomLevel,b.point);break;case a.TouchElement.ActionTypes.gestureStart:this.createZoomPanRotate()}a.Events.fire(this,{type:i.EventTypes.onTouch,target:this,point:b.point,action:b.action})},onCarouselSlideByEnd:function(b){this.currentIndex=b.cacheIndex;a.isNothing(this.toolbar)||(this.toolbar.setCaption(this.currentIndex),this.toolbar.setToolbarStatus(this.currentIndex));a.Events.fire(this,{type:i.EventTypes.onDisplayImage,
target:this,action:b.action,index:b.cacheIndex})},onToolbarTap:function(b){switch(b.action){case g.ToolbarAction.next:this.next();break;case g.ToolbarAction.previous:this.previous();break;case g.ToolbarAction.close:this.hide();break;case g.ToolbarAction.play:this.play()}a.Events.fire(this,{type:i.EventTypes.onToolbarTap,target:this,toolbarAction:b.action,tapTarget:b.tapTarget})},onMouseWheel:function(b){var c=a.Events.getWheelDelta(b);if(!(b.timeStamp-(this.mouseWheelStartTime||0)&lt;this.settings.mouseWheelSpeed))this.mouseWheelStartTime=
b.timeStamp,this.settings.invertMouseWheel&amp;&amp;(c*=-1),c&lt;0?this.next():c&gt;0&amp;&amp;this.previous()},onCarouselSlideshowStart:function(){a.Events.fire(this,{type:i.EventTypes.onSlideshowStart,target:this})},onCarouselSlideshowStop:function(){a.Events.fire(this,{type:i.EventTypes.onSlideshowStop,target:this})},onToolbarBeforeShow:function(){a.Events.fire(this,{type:i.EventTypes.onBeforeCaptionAndToolbarShow,target:this})},onToolbarShow:function(){a.Events.fire(this,{type:i.EventTypes.onCaptionAndToolbarShow,
target:this})},onToolbarBeforeHide:function(){a.Events.fire(this,{type:i.EventTypes.onBeforeCaptionAndToolbarHide,target:this})},onToolbarHide:function(){a.Events.fire(this,{type:i.EventTypes.onCaptionAndToolbarHide,target:this})},onZoomPanRotateTransform:function(b){a.Events.fire(this,{target:this,type:i.EventTypes.onZoomPanRotateTransform,scale:b.scale,rotation:b.rotation,rotationDegs:b.rotationDegs,translateX:b.translateX,translateY:b.translateY})}})})(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.Cache,
window.Code.PhotoSwipe.DocumentOverlay,window.Code.PhotoSwipe.Carousel,window.Code.PhotoSwipe.Toolbar,window.Code.PhotoSwipe.UILayer,window.Code.PhotoSwipe.ZoomPanRotate);
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2013.igem.org/Team:UESTC/code.photoswipe-3.0.5.min.js">http://2013.igem.org/Team:UESTC/code.photoswipe-3.0.5.min.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:UESTC/code.photoswipe-3.0.5.min.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:UESTC/code.photoswipe-3.0.5.min.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:UESTC/code.photoswipe-3.0.5.min.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:UESTC/code.photoswipe-3.0.5.min.js&amp;oldid=86396" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2013.igem.org:Privacy_policy" title="2013.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2013.igem.org:General_disclaimer" title="2013.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>