<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_Newcastle_script_calendar_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:Newcastle/script/calendar.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:Newcastle/script/calendar.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:Newcastle/script/calendar.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:Newcastle/script/calendar.js&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:Newcastle/script/calendar.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:Newcastle/script/calendar.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2013.igem.org</H3><P>$(function(){
</P><P>	initCalendar();
</P><P>	if(location.hash) 
	{
</P><PRE>       var height = (($('#pop_up_display').height() / 100) * $(window).height()) - 40;
       
</PRE><P>		var date = (location.hash).split(&quot;/&quot;);
		var id = date[1] + &quot;-&quot; + date[0].replace(&quot;#&quot;, &quot;&quot;);
</P><P>		var description = $(this).find('#'+id).parent().find('.details').html();
		var titleText = $(this).find('#'+id).parent().find('.titles').attr('alt');
</P>
		$('#pop_up_content').html('<H2><SPAN class="mw-headline" id=".27_.2B_titleText_.2B_.27">' + titleText + '</SPAN></H2>' + description);
<PRE>       if($('.pop_up_controls').length == 0)
       {
</PRE>
            $('<DIV class="pop_up_controls"><DIV class="pop_up_left">&lt;a href=&quot;#&quot; onclick=&quot;nextDate(-1); return false;&quot;&gt;&lt;&lt; Previous&lt;/a&gt;</DIV><DIV class="pop_up_right">&lt;a href=&quot;#&quot; onclick=&quot;nextDate(1); return false;&quot;&gt;Next &gt;&gt;&lt;/a&gt;</DIV></DIV>').insertAfter('#pop_up_content');
<PRE>       }
       
       $('#pop_up_content').css('height', height);
</PRE><P>		$('#pop_up').fadeIn();
	}
</P><P>	$('td').click(function(){
		if($(this).find('.titles').length)
		{
</P><PRE>           var height = (($('#pop_up_display').height() / 100) * $(window).height()) - 40;
</PRE><P>			var description = $(this).find('.details').html();
			var titleText = $(this).find('.titles').attr('alt');
			window.location.hash = titleText;
</P>
			$('#pop_up_content').html('<H2><SPAN class="mw-headline" id=".27_.2B_titleText_.2B_.27_2">' + titleText + '</SPAN></H2>' + description);
<PRE>           if($('.pop_up_controls').length == 0)
           {
</PRE>
                $('<DIV class="pop_up_controls"><DIV class="pop_up_left">&lt;a href=&quot;#&quot; onclick=&quot;nextDate(-1); return false;&quot;&gt;&lt;&lt; Previous&lt;/a&gt;</DIV><DIV class="pop_up_right">&lt;a href=&quot;#&quot; onclick=&quot;nextDate(1); return false;&quot;&gt;Next &gt;&gt;&lt;/a&gt;</DIV></DIV>').insertAfter('#pop_up_content');
<PRE>           }
           
           $('#pop_up_content').css('height', height);
</PRE><P>			$('#pop_up').fadeIn();
		}
	});
});
</P><P>function initCalendar()
{
	$('#toc').remove();
	var numMonths = parseInt($('#calendar-data').find('h2').length);
</P><P>	//alert(numMonths);
</P><P>	var daysChecked = 0;
	for(var i = 0; i &lt; numMonths; i++)
	{
		//alert(&quot;Inside Months&quot;);
		var currentH2 = $('h2')[i];
		var nextH2= $('h2')[i + 1];
</P><P>		var currentMonth = parseInt($('#calendar-data').find('h2').eq(i).find('.mw-headline').text());
</P><P>		var numDays = parseInt($('#calendar-data').find('h2').eq(i).nextUntil('h2', 'h3').length);
		//alert(numDays);
		for(var j = 0; j &lt; numDays; j++)
		{
			//alert(&quot;inside days&quot;);
			var currentH3 = $('h3')[j + daysChecked];
			var temp = $('h3');
			var nextH3 = $('h3')[j + 1 + daysChecked];
</P><P>			var currentDay = parseInt($('#calendar-data').find(temp).eq(j + daysChecked).find('.mw-headline').text());
			//alert(currentDay);
			var titlesH4 = $('h4')[((j + daysChecked) * 2)];
			var detailsH4 = $('h4')[((j + daysChecked) * 2) + 1];
</P><P>			var tempTitles = $('#calendar-data').children('h4').eq(((j + daysChecked) * 2)).next('div').html();
			var tempDetails = $('#calendar-data').children('h4').eq(((j + daysChecked) * 2) + 1).next('div').html();
</P><P>			//alert(tempTitles);
</P><P>			var dateID = $('#' + currentMonth + '-' + currentDay);
</P><PRE>           var dateDisp = currentDay + &quot;/&quot; + currentMonth + &quot;/13&quot;;
</PRE><P>			//alert(details);
</P>
			//var dateHTML = '<DIV class="titles">&lt;a href=&quot;#' + dateDisp + '&quot; alt=&quot;' + dateDisp + '&quot;&gt;' + tempTitles + '&lt;/a&gt;<DIV class="details">' + tempDetails + '</DIV></DIV>';
			var dateHTML = '<DIV class="titles">' + tempTitles + '<DIV class="details">' + tempDetails + '</DIV></DIV>';
<P>			$('#calendar-container').find(dateID).parent().append(dateHTML);
		}
</P><P>		daysChecked += numDays;
	}
</P><PRE>   $('body').find('#calendar-data').remove();
</PRE><P>}
</P><P>function nextDate(i)
{
</P><PRE>   var date = (location.hash).split(&quot;/&quot;);
   
   var day = new Number(date[0].replace(&quot;#&quot;, &quot;&quot;));
   var month = new Number(date[1]);
   
   var oldDate = new Array(date);
   
   oldDate[0] = day;
   oldDate[1] = month;
   
   var newDate = getDate(i, date);
   var id = newDate[1] + &quot;-&quot; + newDate[0];
   
   if(newDate[0] == oldDate[0] &amp;&amp; newDate[1] == oldDate[1])
   {
       return;
   } else if ($('#calendar').find('#' + id).parent().find('.titles').length)
   {
       setDisplay(id);
   } else
   {
       newDate = getDate(i * 2, date);
       var id = newDate[1] + &quot;-&quot; + newDate[0];
       
       if(newDate[0] == oldDate[0] &amp;&amp; newDate[1] == oldDate[1])
       {
           return;
       } else if ($('#calendar').find('#' + id).parent().find('.titles').length)
       {
           setDisplay(id);
       } else
       {
           newDate = getDate(i * 3, date);
           var id = newDate[1] + &quot;-&quot; + newDate[0];
           
           if(newDate[0] == oldDate[0] &amp;&amp; newDate[1] == oldDate[1])
           {
               return;
           } else if ($('#calendar').find('#' + id).parent().find('.titles').length)
           {
               setDisplay(id);
           } else
           {
               return;
           }
       }
   }
</PRE><P>}
</P><P>function setDisplay(id)
{
</P><PRE>   var height = (($('#pop_up_display').height() / 100) * $(window).height()) - 40;
   var description = $('#calendar').find('#' + id).parent().find('.details').html();
   var titleText = $('#calendar').find('#' + id).parent().find('.titles').attr('alt');
   window.location.hash = titleText;
</PRE>
    $('#pop_up_content').html('<H2><SPAN class="mw-headline" id=".27_.2B_titleText_.2B_.27_3">' + titleText + '</SPAN></H2>' + description);
<PRE>   if($('.pop_up_controls').length == 0)
   {
</PRE>
        $('<DIV class="pop_up_controls"><DIV class="pop_up_left">&lt;a href=&quot;#&quot; onclick=&quot;prevDate(); return false;&quot;&gt;&lt;&lt; Previous&lt;/a&gt;</DIV><DIV class="pop_up_right">&lt;a href=&quot;#&quot; onclick=&quot;nextDate(); return false;&quot;&gt;Next &gt;&gt;&lt;/a&gt;</DIV></DIV>').insertAfter('#pop_up_content');
<PRE>   }
</PRE><P>}
/*
function nextDate()
{
</P><PRE>   alert(&quot;Next Date&quot;);
   
   return false;
</PRE><P>}
</P><UL><LI>/
</LI></UL><P>function getDate(i, date)
{
</P><PRE>   var dateTemp = new Array();
   
   var day = new Number(date[0].replace(&quot;#&quot;, &quot;&quot;));
   var month = new Number(date[1]);
   
   if((month == 6) &amp;&amp; ((day + i) &gt; 30))
   {
       month += i; day = 1;
   } else if ((month == 6) &amp;&amp; ((day + 1) &lt; 1))
   {
       // do nothing
   } else if((month == 7) &amp;&amp; ((day + i) &gt; 31))
   {
       month += i; day = 1;
   } else if((month == 7) &amp;&amp; ((day + i) &lt; 1))
   {
       month += i; day = 30;
   } else if((month == 8) &amp;&amp; ((day + i) &gt; 31))
   {
       month += i; day = 1;
   } else if((month == 8) &amp;&amp; ((day + i) &lt; 1))
   {
       month += i; day = 31;
   } else if((month == 9) &amp;&amp; ((day + i) &gt; 30))
   {
       // Do nothing
   } else if((month == 9) &amp;&amp; ((day + i) &lt; 1))
   {
       month += i; day = 31;
   } else 
   {
       day += i;
   }
   
   dateTemp[0] = day;
   dateTemp[1] = month;
   
   return dateTemp;
</PRE><P>}
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2013.igem.org/Team:Newcastle/script/calendar.js">http://2013.igem.org/Team:Newcastle/script/calendar.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:Newcastle/script/calendar.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:Newcastle/script/calendar.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:Newcastle/script/calendar.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:Newcastle/script/calendar.js&amp;oldid=271093" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2013.igem.org:Privacy_policy" title="2013.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2013.igem.org:General_disclaimer" title="2013.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>