"
Page
Discussion
View source
History
teams
Log in
Â 
Team:Grenoble-EMSE-LSU/Templates/background/scripts/webpro.js
From 2013.igem.org
/*
Copyright (c) 2012. Adobe Systems Incorporated. All rights reserved.
Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. Neither the name of Adobe Systems Incorporated nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
/
(function(a,b){function c(){}var d={version:0.1,inherit:function(a,c){var b=function(){};b.prototype=c.prototype;a.prototype=new b;a.prototype.constructor=a;a.prototype._super=c},ensureArray:function(){var c=[],b=arguments.length;b>0&&(c=b>1||!a.isArray(arguments[0])?a.makeArray(arguments):arguments[0]);return c},scopedFind:function(c,b,d,h){for(var d=" "+d+" ",k=[],c=a(c).find(b),b=c.length,h=a(h)[0],j=0;j<b;j++)for(var l=c[j],m=l;m;){if(m.className&&(" "+m.className+" ").indexOf(d)!==-1){m===h&& k.push(l);break}m=m.parentNode}return a(k)}};a.extend(c.prototype,{bind:function(c,b,d){return a(this).bind(c,b,d)},unbind:function(c,b){return a(this).unbind(c,b)},trigger:function(c,b){var d=a.Event(c);a(this).trigger(d,b);return d}});d.EventDispatcher=c;b.WebPro=d})(jQuery,window,document); (function(a,b){var c=1;b.ImageLoader=function(c){b.EventDispatcher.call();var f=this;this.options=a.extend({},this.defaultOptions,c);this._currentEntry=null;this._queue=[];this._isRunning=this._needsSort=!1;this._loader=new Image;this._loadFunc=function(){f._handleLoad()};this._loadErrorFunc=function(){f._handleError()};this._timeoutFunc=function(){f.trigger("wp-image-loader-timeout",this._currentEntry);f._loadNext()}};b.inherit(b.ImageLoader,b.EventDispatcher);a.extend(b.ImageLoader.prototype,{defaultOptions:{timeoutInterval:1E3}, add:function(d,f){if(d){urls=b.ensureArray(d);for(var g=0;g<urls.length;g++){var i=a.extend({reqId:c++,src:urls[g],width:0,height:0,priority:50,callback:null,data:null},f);this._queue.push(i);this._needsSort=!0;this.trigger("wp-image-loader-add",i)}this._isRunning&&!this._currentEntry&&this._loadNext()}},reprioritize:function(a,c){if(!(this._currentEntry&&this._currentEntry.src==a)){var b;for(b=0;b<this._queue.length;++b)if(this._queue[b].src==a)break;if(b!=0&&b<this._queue.length)this._queue=this._queue.splice(b, c?this._queue.length-b:1).concat(this._queue)}},start:function(){if(!this._isRunning)this._isRunning=!0,this._loadNext(),this.trigger("wp-image-loader-start")},stop:function(){if(this._isRunning)this._currentEntry&&this._queue.unshift(this._currentEntry),this._resetLoader(),this._isRunning=!1,this.trigger("wp-image-loader-stop")},clearQueue:function(){var a=this._isRunning;this.stop();this._queue.length=0;a&&this.start()},isQueueEmpty:function(){return this._queue.length==0},_loadNext:function(){var d; this._resetLoader();var a=this._queue;if(a.length){if(this._needsSort)d=this._queue=a.sort(function(a,c){var b=a.priority-c.priority;return b?b:a.reqId-c.reqId}),a=d,this._needsSort=!1;this._currentEntry=a=a.shift();var c=this._loader;c.onload=this._loadFunc;c.onerror=this._loadErrorFunc;c.src=a.src}},_resetLoader:function(){var a=this._loader;a.onload=null;a.onerror=null;this._currentEntry=a.src=null;if(this._timeoutTimerId)clearTimeout(this._timeoutTimerId),this._timeoutTimerId=0},_handleLoad:function(){var a= this._loader,c=this._currentEntry;c.width=a.width;c.height=a.height;c.callback&&c.callback(c.src,c.width,c.height,c.data);this.trigger("wp-image-loader-load-success",c);this._loadNext()},_handleError:function(){this.trigger("wp-image-loader-load-error",this._currentEntry);this._loadNext()}})})(jQuery,WebPro,window,document); (function(a,b){function c(){b.EventDispatcher.call(this);this._initialize.apply(this,arguments)}b.inherit(c,b.EventDispatcher);a.extend(c.prototype,{defaultOptions:{},_widgetName:"Widget",_initialize:function(){var c;this.plugins=[];var b=this.trigger("before-setup");b.isDefaultPrevented()||(c=this._setUp.apply(this,arguments),this.trigger("setup"));b=this.trigger("before-init-plugins");b.isDefaultPrevented()||(this._initializePlugins(c),this.trigger("init-plugins"));this.options=a.extend({},this.defaultOptions, c);b=this.trigger("before-extract-data");b.isDefaultPrevented()||(this._extractData(),this.trigger("extract-data"));b=this.trigger("before-transform-markup");b.isDefaultPrevented()||(this._transformMarkup(),this.trigger("transform-markup"));b=this.trigger("before-attach-behavior");b.isDefaultPrevented()||(this._attachBehavior(),this.trigger("attach-behavior"));b=this.trigger("before-ready");b.isDefaultPrevented()||(this._ready(),this.trigger("ready"))},_setUp:function(c,b){this.$element=a(c);return b}, _initializePlugins:function(a){for(var a=a||{},c=((typeof a.useDefaultPlugins==="undefined"||a.useDefaultPlugins)&&this.defaultPlugins?this.defaultPlugins:[]).concat(a.plugins||[]),c=c.sort(function(a,c){a=typeof a.priority==="number"?a.priority:50;c=typeof c.priority==="number"?c.priority:50;return a-c}),b=0;b<c.length;b++){var i=c[b];i&&i.initialize&&i.initialize(this,a)}this.plugins=c},_extractData:function(){},_transformMarkup:function(){},_attachBehavior:function(){},_ready:function(){}});b.Widget= c;b.widget=function(c,f,g){var i=g&&f||b.Widget,g=g||f||{},f=function(){i.apply(this,arguments);this._widgetName=c};b.inherit(f,i);a.extend(f.prototype,g);f.prototype.defaultOptions=a.extend({},i.prototype.defaultOptions,g.defaultOptions);var g=c.split("."),h=g.length;namespace=h>1&&g[0]||"Widget";c=g[h-1];b[namespace][c]=f}})(jQuery,WebPro,window,document); (function(a,b){b.widget("Widget.Button",b.Widget,{defaultOptions:{hoverClass:"wp-button-hover",activeClass:"wp-button-down",disabledClass:"wp-button-disabled",disabled:!1,callback:null},_attachBehavior:function(){var c=this,b=function(f){c.mouseDown=!1;c.$element.removeClass(c.options.activeClass);!c.options.disabled&&c.options.callback&&c.options.callback.call(this,f);a(c.$element).off("mouseup",b)};this.mouseDown=!1;this.$element.on("mouseover",function(){c.options.disabled||c.$element.addClass(c.options.hoverClass+ (c.mouseDown?" "+c.options.activeClass:""))}).on("mouseleave",function(){c.$element.removeClass(c.options.hoverClass+" "+c.options.activeClass);a(c.$element).off("mouseup",b)}).on("mousedown",function(){if(!c.options.disabled)c.mouseDown=!0,c.$element.addClass(c.options.activeClass),a(c.$element).on("mouseup",b)});this.disabled(this.options.disabled)},disabled:function(a){if(typeof a==="boolean")this.options.disabled=a,this.$element[a?"addClass":"removeClass"](this.options.disabledClass);return this.options.disabled}}); a.fn.wpButton=function(a){this.each(function(){new b.Widget.Button(this,a)});return this}})(jQuery,WebPro,window,document); (function(a,b){b.widget("Widget.RadioGroup",b.Widget,{_widgetName:"radio-group",defaultOptions:{defaultIndex:0,hoverClass:"wp-radio-hover",downClass:"wp-radio-down",disabledClass:"wp-radio-disabled",checkedClass:"wp-radio-checked",disabled:!1,toggleStateEnabled:!1},_attachBehavior:function(){var a=this;this.buttons=[];this.activeElement=null;this.activeIndex=-1;this.$element.each(function(){a.buttons.push(a._addButtonBehavior(this))});this.disabled(this.options.disabled)},_addButtonBehavior:function(a){var d= this,f=new b.Widget.Button(a,{hoverClass:this.options.hoverClass,downClass:this.options.downClass,disabledClass:this.options.disabledClass,callback:function(b){return d._handleClick(b,f,a)}});return f},_handleClick:function(a,b,f){this.options.disabled||this.checkButton(f)},_getElementIndex:function(c){return c?a.inArray(c,this.$element.get()):-1},_getElementByIndex:function(a){return a>=0?this.$element.eq(a)[0]:null},_getElement:function(a){return typeof a==="number"?this._getElementByIndex(a):a}, checkButton:function(c){var c=this._getElement(c),b=this.activeElement,f=this.options.checkedClass;c!==b?(b&&a(b).removeClass(f),c&&a(c).addClass(f)):this.options.toggleStateEnabled&&c&&(a(c).removeClass(f),c=null);this.activeElement=c;this.activeIndex=this._getElementIndex(c)},disabled:function(c){if(typeof c==="boolean")this.disabled=c,a.each(this.buttons,function(){this.disabled(c)});return this.options.disabled}});a.fn.wpRadioGroup=function(a){new b.Widget.RadioGroup(this,a);return this}})(jQuery, WebPro,window,document); (function(a,b){b.widget("Widget.TabGroup",b.Widget.RadioGroup,{defaultOptions:{defaultIndex:0,hoverClass:"wp-tab-hover",downClass:"wp-tab-down",disabledClass:"wp-tab-disabled",checkedClass:"wp-tab-active",disabled:!1,toggleStateEnabled:!1},selectTab:function(a){this.checkButton(a)},checkButton:function(a){var b=this._getElement(a),f=this._getElementIndex(b),b={tab:b,tabIndex:f};this.trigger("wp-tab-before-select",b);this._super.prototype.checkButton.apply(this,arguments);this.trigger("wp-tab-select",b)}}); a.fn.wpTabGroup=function(a){new b.Widget.TabGroup(this,a);return this}})(jQuery,WebPro,window,document); (function(a,b){b.widget("Widget.PanelGroup",b.Widget,{_widgetName:"panel-group",defaultOptions:{defaultIndex:0,panelClass:"wp-panel",activeClass:"wp-panel-active",toggleStateEnabled:!1,tabGroups:null},_setUp:function(){var a=this;this.tabGroups=[];this._tabCallback=function(b,f){a._handleTabSelect(b,f)};this.showLock=0;this.tabDriver=null;return this._super.prototype._setUp.apply(this,arguments)},_attachBehavior:function(){this.activeElement=null;this.activeIndex=-1;this.$element.addClass(this.options.panelClass); var a=this.options.defaultIndex;typeof a==="number"&&a>=0&&this.showPanel(a);this.addTabGroup(this.options.tabGroups)},_getElementIndex:function(b){return b?a.inArray(b,this.$element.get()):-1},_getElementByIndex:function(a){return this.$element.eq(a)[0]},_getElement:function(a){return typeof a==="number"?this._getElementByIndex(a):a},showPanel:function(b){if(!this.showLock){++this.showLock;var d=this._getElement(b),f=this.activeElement,g=this.options.activeClass;if(d)if(d!==f){b={panel:d,panelIndex:this._getElementIndex(d)}; this.trigger("wp-panel-before-show",b);f&&this.hidePanel(f);a(d).addClass(g);this.activeElement=d;this.activeIndex=this._getElementIndex(d);d=this.tabGroups;for(f=0;f<d.length;f++)g=d[f],g!==this.tabDriver&&g.selectTab(this.activeIndex);this.trigger("wp-panel-show",b)}else this.options.toggleStateEnabled&&this.hidePanel(d);--this.showLock}},hidePanel:function(b){if(b=typeof b==="number"?this.$element.eq(b)[0]:b){var d={panel:b,panelIndex:this._getElementIndex(b)};this.trigger("wp-panel-before-hide", d);a(b).removeClass(this.options.activeClass);if(b===this.activeElement)this.activeElement=null,this.activeIndex=-1;this.trigger("wp-panel-hide",d)}},_handleTabSelect:function(a,b){if(!this.showLock)this.tabDriver=a.target,this.showPanel(b.tabIndex),this.tabDriver=null},addTabGroup:function(c){if(c)for(var c=b.ensureArray(c),d=c.length,f=0;f<d;f++){var g=c[f];a.inArray(this.tabGroups,g)===-1&&(this.tabGroups.push(g),g.selectTab(this.activeIndex),g.bind("wp-tab-select",this._tabCallback))}},removeTabGroup:function(c){for(var c= b.ensureArray(c),d=c.length,f=0;f<d;f++){var g=c[f];sets=this.tabGroups;loc=a.inArray(sets,g);loc!==-1&&sets.splice(loc,1)}}});a.fn.wpPanelGroup=function(a){new b.Widget.PanelGroup(this,a);return this}})(jQuery,WebPro,window,document); (function(a,b){b.widget("Widget.Disclosure",b.Widget,{defaultOptions:{widgetClassName:"wp-disclosure-panels",tabClassName:"wp-disclosure-panels-tab",tabHoverClassName:"wp-disclosure-panels-tab-hover",tabDownClassName:"wp-disclosure-panels-tab-down",panelClassName:"wp-disclosure-panels-panel",tabActiveClassName:"wp-disclosure-panels-tab-active",panelActiveClassName:"wp-disclosure-panels-panel-active",defaultIndex:0,toggleStateEnabled:!1},_attachBehavior:function(){var a=this.$element[0],d=this.options.widgetClassName, f=b.scopedFind(a,"."+this.options.tabClassName,d,a),a=b.scopedFind(a,"."+this.options.panelClassName,d,a);this.tabs=new b.Widget.TabGroup(f,{hoverClass:this.options.tabHoverClassName,downClass:this.options.tabDownClassName,checkedClass:this.options.tabActiveClassName,toggleStateEnabled:this.options.toggleStateEnabled});this.panels=new b.Widget.PanelGroup(a,{panelClass:this.options.panelClassName,activeClass:this.options.panelActiveClassName,defaultIndex:this.options.defaultIndex,toggleStateEnabled:this.options.toggleStateEnabled}); this.panels.addTabGroup(this.tabs)}});b.widget("Widget.TabbedPanels",b.Widget.Disclosure,{defaultOptions:{widgetClassName:"wp-tabbed-panels-panels",tabClassName:"wp-tabbed-panels-panels-tab",tabHoverClassName:"wp-tabbed-panels-panels-tab-hover",tabDownClassName:"wp-tabbed-panels-panels-tab-down",tabActiveClassName:"wp-tabbed-panels-panels-tab-active",panelClassName:"wp-tabbed-panels-panels-panel",panelActiveClassName:"wp-tabbed-panels-panels-panel-active",toggleStateEnabled:!1}});b.widget("Widget.Accordion", b.Widget.Disclosure,{defaultOptions:{widgetClassName:"wp-accordion",tabClassName:"wp-accordion-tab",tabHoverClassName:"wp-accordion-tab-hover",tabDownClassName:"wp-accordion-tab-down",tabActiveClassName:"wp-accordion-tab-active",panelClassName:"wp-accordion-panel",panelActiveClassName:"wp-accordion-panel-active",toggleStateEnabled:!1}})})(jQuery,WebPro,window,document); (function(a,b){b.Widget.Disclosure.DisplayPropertyTransitionPlugin={defaultOptions:{},initialize:function(b,d){var f=this;a.extend(d,a.extend({},f.defaultOptions,d));b.bind("attach-behavior",function(){f._attachBehavior(b)})},_attachBehavior:function(a){var a=a.panels,b=a.$element,f=a.activeIndex;a.bind("wp-panel-show",function(a,b){b.panel.style.display="block"});a.bind("wp-panel-hide",function(a,b){b.panel.style.display="none"});b.each(function(a){this.style.display=a!==f?"none":"block"})}};b.Widget.Disclosure.AccordionTransitionPlugin= {defaultOptions:{transitionDirection:"vertical",transitionDuration:500,dispatchTransitionEvents:!0},initialize:function(b,d){var f=this;a.extend(d,a.extend({},f.defaultOptions,d));b.bind("attach-behavior",function(){f._attachBehavior(b)})},_attachBehavior:function(a){var b=this,f=a.panels,g=f.$element,i=f.activeIndex,h=a.options.transitionDirection;g.css("overflow","hidden");f.bind("wp-panel-show",function(f,g){b._showPanel(a,g)});f.bind("wp-panel-hide",function(f,g){b._hidePanel(a,g)});g.each(function(a){if(a!== i){if(h==="vertical"||h==="both")this.style.height="0";if(h==="horizontal"||h==="both")this.style.width="0"}})},_transitionPanel:function(b,d){a("body").trigger("wp-page-height-change","undefined"===typeof b?0:d-b)},_showPanel:function(b,d){var f=b.options,g=f.transitionDirection,i=a(d.panel),h={},k=f.dispatchTransitionEvents,j=this,l,m=function(a){j._transitionPanel(l,a);l=a};if(g==="vertical"||g==="both")h.height=i[0].scrollHeight+"px";if(g==="horizontal"||g==="both")h.width=i[0].scrollWidth+"px"; i.stop(!0,!0).animate(h,{duration:f.transitionDuration,step:k?m:null,complete:function(){var a={};if(g==="vertical"||g==="both")a.height="auto";if(g==="horizontal"||g==="both")a.width="auto";i.css(a)}})},_hidePanel:function(b,d){var f=b.options,g=f.transitionDirection,i=a(d.panel),h={},k=f.dispatchTransitionEvents,j=this,l,m=function(a){j._transitionPanel(l,a);l=a};if(g==="vertical"||g==="both")h.height="0";if(g==="horizontal"||g==="both")h.width="0";i.stop(!0,!0).animate(h,{duration:f.transitionDuration, step:k?m:null})}}})(jQuery,WebPro,window,document); (function(a,b){b.widget("Widget.SlideShowBase",b.Widget,{_widgetName:"slideshow-base",defaultOptions:{displayInterval:6E3,autoPlay:!1},_setUp:function(){var a=this;this._ssTimer=0;this._ssTimerTriggered=!1;this._ssTimerCallback=function(){a._ssTimerTriggered=!0;a.next();a._ssTimerTriggered=!1};return b.Widget.prototype._setUp.apply(this,arguments)},_ready:function(){this.options.autoPlay&&this.play()},play:function(){e=this.trigger("wp-slideshow-before-play");e.isDefaultPrevented()||(this._startTimer(!1), this.trigger("wp-slideshow-play"))},stop:function(){e=this.trigger("wp-slideshow-before-stop");e.isDefaultPrevented()||(this._stopTimer(),this.trigger("wp-slideshow-stop"))},isPlaying:function(){return this._ssTimer!==0},_startTimer:function(a){this._stopTimer();var b=this.options.displayInterval;a&&(b+=this.options.transitionDuration);this._ssTimer=setTimeout(this._ssTimerCallback,b)},_stopTimer:function(){this._ssTimer&&clearTimeout(this._ssTimer);this._ssTimer=0},_executeCall:function(a,b){e=this.trigger("wp-slideshow-before-"+ a);e.isDefaultPrevented()||(this["_"+a].apply(this,b)&&this.stop(),this.isPlaying()&&this._startTimer(!0),this.trigger("wp-slideshow-"+a))},first:function(){return this._executeCall("first",arguments)},last:function(){return this._executeCall("last",arguments)},previous:function(){return this._executeCall("previous",arguments)},next:function(){return this._executeCall("next",arguments)},goTo:function(){return this._executeCall("goTo",arguments)},_first:function(){},_last:function(){},_previous:function(){}, _next:function(){},_goTo:function(){}})})(jQuery,WebPro,window,document); (function(a,b){b.widget("Widget.ContentSlideShow",b.Widget.SlideShowBase,{_widgetName:"content-slideshow",defaultOptions:{slideshowClassName:"wp-slideshow",clipClassName:"wp-slideshow-clip",viewClassName:"wp-slideshow-view",slideClassName:"wp-slideshow-slide",slideLinkClassName:"wp-slideshow-slide-link",firstBtnClassName:"wp-slideshow-first-btn",lastBtnClassName:"wp-slideshow-last-btn",prevBtnClassName:"wp-slideshow-prev-btn",nextBtnClassName:"wp-slideshow-next-btn",playBtnClassName:"wp-slideshow-play-btn", stopBtnClassName:"wp-slideshow-stop-btn",playingClassName:"wp-slideshow-playing"},_findWidgetElements:function(a){var d=this.$element[0];return b.scopedFind(d,a,this.options.slideshowClassName,d)},_attachBtnHandler:function(a,b){var f=this;this["$"+b+"Btn"]=this._findWidgetElements("."+a).bind("click",function(a){f[b]();a.preventDefault()})},_reprioritizeImageLoadingIfRequired:function(b){!this._isLoaded(b)&&this._cssilLoader&&!this._cssilLoader.isQueueEmpty()&&this._cssilLoader.reprioritize(a(this.slides.$element[b]).find("img").data("src"), this.isPlaying())},_attachBehavior:function(){var a=this,d=this.options;this._super.prototype._attachBehavior.call(this);this._panelShowCallback=function(){a._ssTimerTriggered||a.isPlaying()&&a._startTimer(!1)};this.$element.addClass(d.slideshowClassName);var f=this._findWidgetElements("."+d.slideClassName),g=this._findWidgetElements("."+d.slideLinkClassName);this.slides=new b.Widget.PanelGroup(f,{defaultIndex:d.defaultIndex||0});this.slides.bind("wp-panel-show",this._panelShowCallback);this.tabs= null;if(g.length)this.tabs=new b.Widget.TabGroup(g,{defaultIndex:d.defaultIndex||0}),this.slides.addTabGroup(this.tabs);this.slides.bind("wp-panel-before-show",function(b,d){a._reprioritizeImageLoadingIfRequired(d.panelIndex)});this._attachBtnHandler(d.firstBtnClassName,"first");this._attachBtnHandler(d.lastBtnClassName,"last");this._attachBtnHandler(d.prevBtnClassName,"previous");this._attachBtnHandler(d.nextBtnClassName,"next");this._attachBtnHandler(d.playBtnClassName,"play");this._attachBtnHandler(d.stopBtnClassName, "stop");this.bind("wp-slideshow-play",function(){this.$element.addClass(d.playingClassName)});this.bind("wp-slideshow-stop",function(){this.$element.removeClass(d.playingClassName)})},_first:function(){this.slides.showPanel(0)},_last:function(){var a=this.slides;a.showPanel(a.$element.length-1)},_previous:function(){var a=this.slides,b=a.activeIndex;a.showPanel((b<1?a.$element.length:b)-1)},_next:function(){var a=this.slides,b=a.activeIndex,f=(b+1)%a.$element.length;(!this.isPlaying()||this._isLoaded(b)&& this._isLoaded(f))&&a.showPanel(f)},_goTo:function(){this.slides.showPanel.apply(this.slides,arguments)},_isLoaded:function(b){if(this._csspIsImageSlideShow&&(b=a(this.slides.$element[b]).find("img"),b.length>0&&(b.hasClass(this.options.imageIncludeClassName)||!b[0].complete)))return!1;return!0}})})(jQuery,WebPro,window,document); (function(a,b){b.Widget.ContentSlideShow.fadingTransitionPlugin={defaultOptions:{transitionDuration:500},initialize:function(b,d){var f=this;a.extend(d,a.extend({},f.defaultOptions,d));b.bind("attach-behavior",function(){f.attachBehavior(b)})},attachBehavior:function(b){var d=this,f=b.slides,g=f.$element,i=f.activeIndex;f.bind("wp-panel-show",function(a,f){d.handleShowSlide(b,f)}).bind("wp-panel-hide",function(a,f){d.handleHideSlide(b,f)});for(f=0;f<g.length;f++)if(f!==i)g[f].style.display="none"; if(Muse.Browser.Features.Touch&&Muse.Browser.Features.Touch.Start=="touchstart"&&b.options.enableSwipe===!0){var h=b.options.transitionDuration;b._ftpSwipeNoInterrupt=!1;g.each(function(){var f=a(this);f.data("opacity",f.css("opacity"));f.swipe({triggerOnTouchEnd:!0,allowPageScroll:"vertical",threshold:75,swipeStatus:function(a,f,i,k){b.stop();if(f=="move"&&(i=="left"||i=="right"))d._scrollTo(b,-1,k*(i=="left"?1:-1),0);else if(f=="cancel")d._scrollTo(b,b.slides.activeIndex,0,h);else if(f=="end"&& (i=="left"||i=="right")){var a=b.slides.activeIndex,q;i=="right"?q=a-1<0?g.length-1:a-1:i=="left"&&(q=a+1>g.length-1?0:a+1);d._scrollTo(b,q,0,h)}}})})}},handleShowSlide:function(b,d){var f=a(d.panel),g=!1,i=function(){g||(g=!0,f.show().css("opacity",""))},h=setTimeout(i,b.options.transitionDuration+10);f.stop(!1,!0).fadeIn(b.options.transitionDuration,function(){clearTimeout(h);i()})},handleHideSlide:function(b,d){var f=a(d.panel),g=!1,i=function(){g||(g=!0,f.hide().css("opacity",""))},h=setTimeout(i, b.options.transitionDuration+10);f.stop(!1,!0).fadeOut(b.options.transitionDuration,function(){clearTimeout(h);i()})},_scrollTo:function(b,d,f,g){if(!b._ftpSwipeNoInterrupt){var i=b.slides.$element,h=b.slides.activeIndex,k=d==-1;d==-1&&(d=f<0?h-1<0?i.length-1:h-1:h+1>i.length-1?0:h+1);var j=a(i[h]),l=a(i[d]);if(!k&&f==0||h==d){b._ftpSwipeNoInterrupt=!0;var m=0,o=!1,q=function(){if(!o&&(o=!0,l.show().css("opacity",""),d!=h&&b.slides.showPanel(d),++m==i.length))b._ftpSwipeNoInterrupt=!1};if(l.css("opacity")!= l.data("opacity")){var r=setTimeout(q,g+10);l.stop(!1,!0).animate({opacity:l.data("opacity")},g,function(){clearTimeout(r);q()})}else q();i.each(function(f){var h=a(this),j=!1,k=function(){if(!j&&(j=!0,h.hide().css("opacity",""),++m==i.length))b._ftpSwipeNoInterrupt=!1},l;f!=d&&(h.css("display")!="none"&&h.css("opacity")!=0?(l=setTimeout(k,g+10),h.stop(!1,!0).animate({opacity:0},g,function(){clearTimeout(l);k()})):k())})}else f=Math.abs(f),k=j.width(),f>k&&(f=k),f=l.data("opacity")*(f/k),k=j.data("opacity")* (1-f),j.stop(!1,!0).animate({opacity:k},g),l.stop(!1,!0).show().animate({opacity:f},g)}}};b.Widget.ContentSlideShow.filmstripTransitionPlugin={defaultOptions:{transitionDuration:500,transitionStyle:"horizontal"},initialize:function(b,d){var f=this;a.extend(d,a.extend({},f.defaultOptions,d));b.bind("attach-behavior",function(){f.attachBehavior(b)})},attachBehavior:function(a){var b=this,f=a.options,g=f.transitionStyle==="horizontal",i=a.slides,h=i.$element,k=a._findWidgetElements("."+f.clipClassName), f=a._findWidgetElements("."+f.viewClassName),j=k.width(),l=k.height(),m=g?j:l,o=0,q={top:"0",left:"0"};k.css("position")!=="absolute"&&k.css("position","relative");f.css("position")!=="absolute"&&(q.position="relative");a._fstp$Clip=k;a._fstp$View=f;a._fstpStyleProp=g?"left":"top";a._fstpStylePropZero=g?"top":"left";i.bind("wp-panel-show",function(f,g){b._goToSlide(a,g.panel)});a._fstpRequestType=null;a.bind("wp-slideshow-before-previous wp-slideshow-before-next",function(b){a._fstpRequestType=b.type.replace(/.*-/, "");a._fstpOldActiveIndex=a.slides.activeIndex}).bind("wp-slideshow-previous wp-slideshow-next",function(){a._fstpRequestType=null;a._fstpOldActiveIndex=-1});for(var k=a._fstpStyleProp,r=a._fstpStylePropZero,n=0;n<h.length;n++){var u=h[n].style;u[r]="0";u[k]=o+"px";u.margin="0";u.position="absolute";o+=m}q[g?"width":"height"]=o+"px";q[g?"height":"width"]=(g?l:j)+"px";i.activeElement||(q[k]=(g?j:l)+"px",q[r]="0");q.overflow="visible";f.css(q);b._goToSlide(a,i.activeElement)},_goToSlide:function(b, d){if(b){var f=a(d),g=b._fstp$View,i=b._fstpStyleProp,h=i==="left"?"offsetLeft":"offsetTop",k=i==="left"?"offsetWidth":"offsetHeight",j=d?-d[h]:b._fstp$Clip[0][k],l={};l[i]=j+"px";var m=b._fstpRequestType,o=b._fstpOldActiveIndex;if(m&&o!==-1){var q=b.slides.activeIndex,r=b.slides.$element.length-1;if(q!==o){var n=0;m==="previous"&&o===0&&q===r?n=-d[k]:m==="next"&&o===r&&q===0&&(m=b.slides.$element[o],n=m[h]+m[k]);n&&(l[i]=-n+"px",f.css(i,n+"px"))}}g.stop(!1,!0).animate(l,b.options.transitionDuration, function(){n&&(f.css(i,-j+"px"),g.css(i,j+"px"))})}}};b.Widget.ContentSlideShow.swipeTransitionPlugin={defaultOptions:{transitionDuration:500,transitionStyle:"horizontal"},initialize:function(b,d){var f=this;a.extend(d,a.extend({},f.defaultOptions,d));b.bind("attach-behavior",function(){f.attachBehavior(b)})},attachBehavior:function(a){var b=this,f=a.options,g=f.transitionStyle==="horizontal",i=a.slides,h=i.$element,k=a._findWidgetElements("."+f.clipClassName),j=a._findWidgetElements("."+f.viewClassName), l=k.width(),m=k.height(),o=g?l:m,l=0,m={top:"0",left:"0"};k.css("position")!=="absolute"&&k.css("position","relative");j.css("position")!=="absolute"&&(m.position="relative");a._fstp$Clip=k;a._fstp$View=j;a._fstpStyleProp=g?"left":"top";a._fstpStylePropZero=g?"top":"left";i.bind("wp-panel-show",function(){var g=a.slides.activeIndex*o,i=a.options.transitionDuration;g==0&&a.slides.activeIndex==0&&!f.shuffle&&a.isPlaying()&&(i=0);b._scrollTo(a,g,i)});a._fstpRequestType=null;a.bind("wp-slideshow-before-previous wp-slideshow-before-next", function(b){a._fstpRequestType=b.type.replace(/.*-/,"");a._fstpOldActiveIndex=a.slides.activeIndex}).bind("wp-slideshow-previous wp-slideshow-next",function(){a._fstpRequestType=null;a._fstpOldActiveIndex=-1});for(var k=a._fstpStyleProp,q=a._fstpStylePropZero,r=0;r<h.length;r++){var n=h[r].style;n[q]="0";n[k]=l+"px";n.margin="0";n.position="absolute";l+=o}m[g?"width":"height"]=l+"px";m[g?"height":"width"]=o+"px";m.overflow="visible";j.css(m);var u=a.options.transitionDuration;j.swipe({triggerOnTouchEnd:!0, allowPageScroll:g?"vertical":"horizontal",threshold:75,swipeStatus:function(f,i,h,k){a.stop();if(i=="move"&&(g&&(h=="left"||h=="right")||!g&&(h=="up"||h=="down")))h=o*a.slides.activeIndex+k*(h=="left"||h=="up"?1:-1),b._scrollTo(a,h,0);else if(i=="cancel")h=o*a.slides.activeIndex,b._scrollTo(a,h,u);else if(i=="end"){f=-1;if(g&&h=="right"||!g&&h=="down")f=Math.max(a.slides.activeIndex-1,0);else if(g&&h=="left"||!g&&h=="up")f=Math.min(a.slides.activeIndex+1,j.children().length-1);f!=-1&&(h=o*f,b._scrollTo(a, h,u),f!=a.slides.activeIndex&&a.slides.showPanel(f))}}});b._scrollTo(a,i.activeElement?i.activeIndex*o:1*o,0)},_scrollTo:function(a,b,f){var c;var g=Muse.Browser.Features.checkCSSFeature("transition-duration"),i=Muse.Browser.Features.checkCSSFeature("transform");if(!(g===!1||i===!1)){var h=a._fstp$View.get(0);h.style[(g===!0?"":"-"+g.toLowerCase()+"-")+"transition-duration"]=(f/1E3).toFixed(1)+"s";b=-b;c=(f=a.options.transitionStyle==="horizontal")?b:0,a=c;b=f?0:b;i=(i===!0?"":"-"+i.toLowerCase()+ "-")+"transform";f="translate3d("+a+"px, "+b+"px, 0px)";g=h.style[i];h.style[i]=f;h.style[i]===g&&g!==f&&(h.style[i]="translate("+a+"px, "+b+"px)")}}};b.Widget.ContentSlideShow.slideImageIncludePlugin={defaultOptions:{imageIncludeClassName:"wp-slideshow-slide-image-include",slideLoadingClassName:"wp-slideshow-slide-loading"},initialize:function(c,d){var f=this;a.extend(d,a.extend({},f.defaultOptions,d));c._cssilLoader=new b.ImageLoader;c.bind("attach-behavior",function(){f._attachBehavior(c)})},_attachBehavior:function(a){for(var b= this,f=a._cssilLoader,g=a._findWidgetElements("."+a.options.slideClassName),i=g.length,h="."+a.options.imageIncludeClassName,k=a.options.slideLoadingClassName,j=function(f,g,i,h){b._handleImageLoad(a,f,g,i,h)},l=0;l<i;l++){var m=g.eq(a._shuffleArray?a._shuffleArray[l]:l),o=m.find(h);if(ele=o[0]){var q=o.data("src")||ele.href;if(q)o={width:o.data("width"),height:o.data("height"),$ele:o,$slide:m},ele.style.visibility="hidden",f.add(q,{callback:j,data:o}),m.addClass(k)}}a._cssilLoader.start()},_handleImageLoad:function(a, b,f,g,i){var h=i.$ele,k=h[0];k.width=i.width||f;k.height=i.height||g;k.src=b;k.style.visibility="";h.removeClass(a.options.imageIncludeClassName);i.$slide.removeClass(a.options.slideLoadingClassName);a.isPlaying()&&a.slides.$element[a.slides.activeIndex]==i.$slide[0]&&a._startTimer(!1)}};b.Widget.ContentSlideShow.shufflePlayPlugin={defaultOptions:{randomDefaultIndex:!0},initialize:function(b,d){var f=this;a.extend(d,a.extend({},f.defaultOptions,d));b._shuffleArray=[];b._shuffleNextDict={};b._realNext= b._next;b._next=function(){f._handleNext(b)};b._shufflePlayCount=0;b.bind("before-attach-behavior",function(){f._reshuffle(b);if(d.randomDefaultIndex&&typeof d.defaultIndex==="undefined")b.options.defaultIndex=b._shuffleArray[0]})},_fisherYatesArrayShuffle:function(a){if(a&&a.length)for(var b=a.length;--b;){var f=Math.floor(Math.random()*(b+1)),g=a[f];a[f]=a[b];a[b]=g}},_reshuffle:function(a){var b=a._shuffleArray,f={},g=a.slides?a.slides.$element.length:a._findWidgetElements("."+a.options.slideClassName).length; if(b.length!==g)for(var i=b.length=0;i<g;i++)b[i]=i;this._fisherYatesArrayShuffle(b);for(i=0;i<g;i++)f[b[i]]=b[(i+1)%g];a._shuffleNextDict=f;a._shufflePlayCount=0},_handleNext:function(a){if(a.isPlaying()){var b=a.slides.activeIndex,f=a._shuffleNextDict[b]||0;a._isLoaded(b)&&a._isLoaded(f)&&(a._goTo(f),++a._shufflePlayCount>=a.slides.$element.length&&this._reshuffle(a))}else a._realNext()}}})(jQuery,WebPro,window,document); (function(a,b,c){b.widget("Widget.Form",b.Widget,{_widgetName:"form",defaultOptions:{validationEvent:"blur",errorStateSensitivity:"low",ajaxSubmit:!0,fieldWrapperClass:"field",formErrorClass:"form-error",formSubmittedClass:"form-submitted",formDeliveredClass:"form-delivered",focusClass:"focus",notEmptyClass:"not-empty",emptyClass:"empty",validClass:"valid",invalidClass:"invalid",requiredClass:"required"},validationTypes:{"always-valid":/.*/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i, alpha:/^[A-z\s]+$/,numeric:/^[0-9]+$/,phone:/^([0-9])?(\s)?(\([0-9]{3}\)|[0-9]{3}(\-)?)(\s)?[0-9]{3}(\s|\-)?[0-9]{4}(\s|\sext|\sx)?(\s)?[0-9]*$/,captcha:function(a){return a.data("captchaValid")},time:function(a){var a=a.find("input, textarea"),b=a.val().replace(/[^0-9:APM]/g,"");if(b.indexOf(":")!=-1&&b.match(/:/).length==1){var c=b.split(":"),i=parseInt(c[0]),c=parseInt(c[1]);if(i<0||i>24)return!0;if(c<0||c>59)return!0}else return!1;a.val(b);return!0}},_transformMarkup:function(){var b=this;b.hasCAPTCHA= !1;this.$element.find("."+this.options.fieldWrapperClass).each(function(){var f=a(this);if(f.attr("data-type")=="captcha")b.hasCAPTCHA=!0,f.find('input[name="CaptchaV2"]').remove(),f.find('input[name="muse_CaptchaV2"]').attr("name","CaptchaV2")})},_extractData:function(){this.event=this.options.validationEvent;this.errorSensitivity=this.options.errorStateSensitivity;this.classNames={focus:this.options.focusClass,blur:this.options.emptyClass,keydown:this.options.notEmptyClass}},_attachBehavior:function(){var b= this;this.$element.find("input, textarea").each(function(){var f=a(this);f.val()!=""&&f.removeClass(b.options.emptyClass)});this.$element.find("."+this.options.fieldWrapperClass).each(function(){var f=a(this);f.attr("data-type")=="captcha"&&(f.data("captchaValid",!1),f.find('input[name="CaptchaV2"]').keyup(function(){var c=a(this).val(),i=f.find('input[name="CaptchaHV2"]').val();b._validateCaptcha(i,c,function(a){f.data("captchaValid",a);f.data("error-state")&&b.errorSensitivity=="high"&&b._validate(f)})})); f.find("input, textarea").val()!=""&&f.addClass(b.classNames.keydown)});this.$element.find("input, textarea").bind("focus blur keydown change propertychange",function(f){var c=b.classNames[f.type],i=b.classNames.focus,h=b.classNames.keydown,k=b.classNames.blur,j=a(this),l=j.closest("."+b.options.fieldWrapperClass);switch(f.type){case "focus":l.addClass(c).removeClass(k);break;case "blur":l.removeClass(i);j.val()==""&&l.addClass(c).removeClass(h);break;case "keydown":l.addClass(c).removeClass(k);break; case "change":case "propertychange":j.val()!=""?l.addClass(h).removeClass(k):l.addClass(k).removeClass(h)}});switch(this.event){case "blur":case "keyup":this.$element.find("."+this.options.fieldWrapperClass+" input, ."+this.options.fieldWrapperClass+" textarea").bind(this.event,function(){b._validate(a(this).closest("."+b.options.fieldWrapperClass))});case "submit":this.$element.submit(function(f){var c=!0,i=b.$element.find("."+b.options.fieldWrapperClass).length-1;b.$element.find("."+b.options.fieldWrapperClass).each(function(h){if((c= b._validate(a(this))?c:!1)&&h==i&&b.options.ajaxSubmit)f.preventDefault(),b._submitForm();c||f.preventDefault()})})}},_validateCaptcha:function(b,c,g){c.length!=6?g(!1):a.get("/ValidateCaptcha.ashx",{key:b,answer:c},function(a){g(a=="true")})},_submitForm:function(){var b=this,f=this.options.formSubmittedClass,g=this.options.formDeliveredClass,i=this.options.formErrorClass,h=f+" "+g+" "+i,k=this.$element.find("input[type=submit], button");a.ajax({url:this.$element.attr("action"),type:"post",data:this.$element.serialize(), beforeSend:function(){b.$element.removeClass(h);b.$element.addClass(f);b.$element.find("."+b.options.fieldWrapperClass).removeClass(b.options.focusClass);k.attr("disabled","disabled")},complete:function(h){h&&(h.status>=400||h.responseText&&h.responseText.indexOf("<?php")>=0)&&alert("Form PHP script is missing from web server, or PHP is not configured correctly on your web hosting provider. Check if the form PHP script has been uploaded correctly, then contact your hosting provider about PHP configuration."); if(h&&h.responseText&&h.responseText.indexOf('"success": true')>0&&h.responseText.indexOf("<?php")<0)if(b.$element.addClass(g).removeClass(f),h.responseText.indexOf('"redirect":')>0){h=jQuery.parseJSON(h.responseText);c.location.href=h.FormResponse.redirect;return}else b.$element.find("input:not([type=submit]), textarea").each(function(){var c=a(this);c.val("");b.hasCAPTCHA&&c.attr("disabled","disabled")});else b.$element.addClass(i).removeClass(f);b.hasCAPTCHA||k.removeAttr("disabled")}})},_validate:function(a){var b= a.attr("data-type")||"always-valid",c=a.find("input, textarea"),i=this.validationTypes[b],b=a.attr("data-required")==="true",h=c.val()=="",c=i instanceof RegExp?Boolean(c.val().match(i)):i(a);if(b&&h)return this._switchState("required",a);if(!c)return this._switchState("invalid",a);return this._switchState("valid",a)},_switchState:function(a,b){function c(){j._validate(b)}var i=this.options.validClass,h=this.options.invalidClass,k=this.options.requiredClass;b.removeClass(i+" "+h+" "+k);if(a=="required"|| a=="invalid"){a=="invalid"?b.addClass(h):b.addClass(k);if(this.errorSensitivity!="low"){var j=this,i=this.errorSensitivity=="high"?"keyup":"blur";b.data("error-state")||(b.data("error-state",!0),b.find("input, textarea").bind(i,c))}return!1}b.data("error-state")&&(this.errorSensitivity=="high"?this.event!="keyup"&&b.data("error-state",!1).find("input, textarea").unbind("keyup",c):this.errorSensitivity=="medium"&&this.event!="blur"&&b.data("error-state",!1).find("input, textarea").unbind("blur",c)); b.addClass(i);return!0}});a.fn.wpForm=function(a){new b.Widget.Form(this,a);return this}})(jQuery,WebPro,window,document);
Retrieved from " http://2013.igem.org/Team:Grenoble-EMSE-LSU/Templates/background/scripts/webpro.js "
Recent changes
What links here
Related changes
Special pages
My preferences
Printable version
Permanent link
Privacy policy
Disclaimers
