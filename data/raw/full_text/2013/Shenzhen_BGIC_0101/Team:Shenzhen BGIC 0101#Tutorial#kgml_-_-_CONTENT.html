<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_Shenzhen_BGIC_0101_Tutorial_kgml"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:Shenzhen_BGIC_0101/Tutorial/kgml">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:Shenzhen_BGIC_0101/Tutorial/kgml&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:Shenzhen_BGIC_0101/Tutorial/kgml&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:Shenzhen_BGIC_0101/Tutorial/kgml&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:Shenzhen_BGIC_0101/Tutorial/kgml" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:Shenzhen BGIC 0101/Tutorial/kgml</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2013.igem.org</H3><DIV id="navigator"><UL class="sf-menu sf-navbar"><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101">Home</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Team">Team</A></LI><LI><A class="sf-with-ul" href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Software">Software<SPAN class="sf-sub-indicator">»</SPAN></A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Software">Overview</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Modules">Modules</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Next_version">Next Version</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/NewStandard">New Standard</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Compatibility">Compatibility</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Tutorial">Tutorial</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Web-based_trial">Web-Based Trial</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Downloadsl">Downloads</A></LI></UL><LI><A class="sf-with-ul" href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Requirements">Requirements<SPAN class="sf-sub-indicator">»</SPAN></A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Requirements#HumanPractices">Human Practices</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Requirements#Safety">Safety</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Requirements#collaboration">Collaboration</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Criteria">Medal Criteria</A></LI><LI><A href="https://2013.igem.org/Team:Shenzhen_BGIC_0101/Contact">Contact</A></LI></DIV><B><H1>Tutorial</H1></B><H1> Kgml2Jason </H1><P> Kgml2Jason grab genes’ details in different pathways, which from KEGG with KEGG Makeup Language (KGML) file and export genes list and relationship of genes. The goal here is to visualize the pathway and rebuild it in the level of genes.</P><H2>Scripts</H2><H3>convert.py</H3><P> This utility will read in KGML file which have been rewritten before, and grab genes’ information, such as genes’ name, genes’ relationship and then convert these into JSON.</P><P><B>Internal operation</B></P><P> First, this utility will use the parameter –f to determine the specified file and read it in. The output file will use the file name that put forward.
Second, this utility convert KGML file into JSON and grab the information of genes, such as the reactions of genes and the relationship between genes.
Third, this utility continue to integrate the information above into two files, ‘gene.json’ and ‘relation.json’, which can be use directly in rewrite gene’s pathway.</P><P><B>Example</B></P><P> python convert.py –f sce04111</P><P><B>Parameters:</B></P><TABLE border="1"><TBODY><TR><TH>default</TH></TR><TR><TH>-f/--file</TH><TH>read KGML from FILENAME(omit '.xml'), produce two files: gene list and relation</TH></TR></TBODY></TABLE><P><B>The format of output:</B></P><P>The output file is stored in the path where you running this program.
1. _gene.json 
type:<TABLE border="1"><TBODY><TR><TH>ortholog</TH><TH>KO (orthology group)</TH></TR><TR><TH>enzyme</TH><TH>Enzyme</TH></TR><TR><TH>reaction</TH><TH>Reaction</TH></TR><TR><TH>gene</TH><TH>gene product (mostly a protein)</TH></TR><TR><TH>group</TH><TH>a complex of gene products (mostly a protein complex)</TH></TR></TBODY></TABLE>
geneID:the unique identification of gene<TABLE border="1"><TBODY><TR><TH>name</TH><TH>the KEGGID of this gene </TH></TR><TR><TH>type</TH><TH>the type of this gene</TH></TR></TBODY></TABLE>
reaction:<TABLE border="1"><TBODY><TR><TH>name</TH><TH>the KEGGID of this reaction</TH></TR><TR><TH>reversible</TH><TH>true: reversible reaction; false: irreversible reaction</TH></TR><TR><TH>substrates</TH><TH>KEGGID of substrate node</TH></TR><TR><TH>products</TH><TH>the KEGGID of product node</TH></TR><TR><TH>related-reactions</TH><TH>relate to another pathway or gene</TH></TR></TBODY></TABLE>
2. _relation.json

relations:<TABLE border="1"><TBODY><TR><TH>type</TH><TH>The type of this relation[ ECrel, PPrel. GErel, PCrel, maplink]</TH></TR><TR><TH>subtype</TH><TH>Interaction/relation information[activation/inhibition]</TH></TR><TR><TH>entry1</TH><TH>The first (from) entry that defines this relation</TH></TR><TR><TH>entry2</TH><TH>The second (to) entry that defines this relation</TH></TR></TBODY></TABLE>
entry1&amp;2:<TABLE border="1"><TBODY><TR><TH>entry ID</TH><TH>The KEGGID of node which takes part in this relation</TH></TR><TR><TH>type</TH><TH>Have only two options: [gene/group]</TH></TR><TR><TH>name</TH><TH>The KEGGID of this gene</TH></TR><TR><TH>group</TH><TH>The node is a complex of gene products (mostly a protein complex)</TH></TR></TBODY></TABLE></P><P><B>Shortcoming</B></P><P>We can’t automatic acquisition KGML file in the KEGG API, all the demo we have show need to be downloaded before. You can get the entire list of one database genes through KEGG API, just like http://rest.kegg.jp/list/ko , it shows the entire list of orthology genes. The download method about KGML files shows in “How to finish this plun-in” part.
Some genes will relate to another pathway but it doesn’t shows in the pathway so we are failed to grab the relationships between genes and pathways automatically. So we added two gene-pathway relations in ko04010 demo manually, TP53 gene connected with ko04115: P53 signaling pathway and NLK gene connected with ko04310: WNT signaling pathway.
We look forward to the improvement of this plun-in through these disadvantages. </P><P>How to finish this plun-in?</P><P> KEGG is a database resource for understanding high-level functions and utilities of the biological system, and KGML is an XML presentation of the KEGG pathway database, which enables automatic drawing of KEGG pathways and provides facilities for computational analysis and modeling of gene/protein networks and chemical networks. Here is the data structure of KGML.
It’s really complex and it will bother you to understand the KGML file! Do not worry, I will show you how to understand a KGML file and then how to convert it into JSON. 
First, how to find or download KGML file? 
Method:  
Download KGML&quot; link for each pathway map. 
If you choose a pathway with prefix “map”, you can’t find the download link in the page, that’s 
because it can be generating almost ko/rn/ec/org files.  
Such as “map04111”, it has no link for download. But if you change the “map” into “sce” in
the URL, you can get the file.<A href="http://www.kegg.jp/kegg/rest/keggapi.html">KEGG API:</A>
Take “sce04111” as an example, you can download the KGML file via the <A href="http://rest.kegg.jp/get/sce04111/KGML">this</A>. 
Second, the KGML file is difficult to find out the relationship through the data structure show above. 
Here is the simple but straightforward tutorial to teach you how to understand a KGML file. 
Take “sce04111.xml” as an example. We can simplify the data structure as:
The entry element can be path/ko/ec/rn/cpd/gl/org/group, enzyme/protein/gene will have relation and gene will also have compound and reactions. We choose one relation to be example:
It means that gene (YCL061C) have activation effect in gene (YPL153C).By the way, through the graphics elements, we can definitely rewrite the connection between these two genes. 

Third, thought we know how to get KGML file and can understand it but the crucial problem is, how to grab the information of genes and convert it into JSON. 
Here we use Python programming Language, install the library “lxml” for processing XML and HTML, and we import JSON library for convert. 

Fourth, you may ask: If there have any other software to do such job, that is read KGML files, convert it and rewrite it?  
Of course, and we indeed tried but failed for it’s not open source or the original source is difficult for modification. 
Actually, if you want to do some visualize pathway job, Cytoscape is a good choice and it also have cytoscape.js for drawing. 

Finally, we indeed done plentiful preparatory work, maybe in the end it’s not useful in this software but it can expand our horizons. 
</P></DIV><DIV class="printfooter">
Retrieved from &quot;<A href="http://2013.igem.org/Team:Shenzhen_BGIC_0101/Tutorial/kgml">http://2013.igem.org/Team:Shenzhen_BGIC_0101/Tutorial/kgml</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:Shenzhen_BGIC_0101/Tutorial/kgml" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:Shenzhen_BGIC_0101/Tutorial/kgml" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:Shenzhen_BGIC_0101/Tutorial/kgml&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:Shenzhen_BGIC_0101/Tutorial/kgml&amp;oldid=343953" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2013.igem.org:Privacy_policy" title="2013.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2013.igem.org:General_disclaimer" title="2013.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></BODY></HTML>