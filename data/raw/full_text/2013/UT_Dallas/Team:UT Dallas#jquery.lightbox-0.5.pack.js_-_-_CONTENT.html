<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_UT_Dallas_jquery_lightbox-0_5_pack_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:UT_Dallas/jquery.lightbox-0.5.pack.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:UT_Dallas/jquery.lightbox-0.5.pack.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:UT_Dallas/jquery.lightbox-0.5.pack.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:UT_Dallas/jquery.lightbox-0.5.pack.js&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:UT_Dallas/jquery.lightbox-0.5.pack.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:UT Dallas/jquery.lightbox-0.5.pack.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2013.igem.org</H3><P>(function ($) {
</P><PRE>   $.fn.lightBox = function (settings) {
       settings = jQuery.extend({
           overlayBgColor: '#000',
           overlayOpacity: 0.8,
           fixedNavigation: false,
           imageLoading: '<A href="https://static.igem.org/mediawiki/2013/9/90/Lightbox-ico-loading.gif'" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/9/90/Lightbox-ico-loading.gif'</A>,
           imageBtnPrev: '<A href="https://static.igem.org/mediawiki/2013/3/36/Lightbox-btn-prev.gif'" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/3/36/Lightbox-btn-prev.gif'</A>,
           imageBtnNext: '<A href="https://static.igem.org/mediawiki/2013/f/f6/Lightbox-btn-next.gif'" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/f/f6/Lightbox-btn-next.gif'</A>,
           imageBtnClose: '<A href="https://static.igem.org/mediawiki/2013/f/fd/Lightbox-btn-close.gif'" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/f/fd/Lightbox-btn-close.gif'</A>,
           imageBlank: '<A href="https://static.igem.org/mediawiki/2013/4/47/Lightbox-blank.gif'" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/4/47/Lightbox-blank.gif'</A>,
</PRE><P>			heightScaling: 0.75,
			widthScaling: 0.75,
</P><PRE>           containerBorderSize: 10,
           containerResizeSpeed: 400,
           txtImage: 'Image',
           txtOf: 'of',
           keyToClose: 'c',
           keyToPrev: 'p',
           keyToNext: 'n',
           imageArray: [],
           activeImage: 0
       }, settings);
       var jQueryMatchedObj = this;
</PRE><PRE>       function _initialize() {
           _start(this, jQueryMatchedObj);
           return false
       }
</PRE><PRE>       function _start(objClicked, jQueryMatchedObj) {
           $('embed, object, select').css({
               'visibility': 'hidden'
           });
           _set_interface();
           settings.imageArray.length = 0;
           settings.activeImage = 0;
           if (jQueryMatchedObj.length == 1) {
               settings.imageArray.push(new Array(objClicked.getAttribute('href'), objClicked.getAttribute('title')))
           } else {
               for (var i = 0; i &lt; jQueryMatchedObj.length; i++) {
                   settings.imageArray.push(new Array(jQueryMatchedObj[i].getAttribute('href'), jQueryMatchedObj[i].getAttribute('title')))
               }
           }
           while (settings.imageArray[settings.activeImage][0] != objClicked.getAttribute('href')) {
               settings.activeImage++
           }
           _set_image_to_view()
       }
</PRE><PRE>       function _set_interface() {
</PRE>
            $('body').append('<DIV id="jquery-lightbox"><DIV id="lightbox-container-image-box"><DIV id="lightbox-container-image">&lt;img id=&quot;lightbox-image&quot;&gt;<DIV style="" id="lightbox-nav">&lt;a href=&quot;#&quot; id=&quot;lightbox-nav-btnPrev&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#&quot; id=&quot;lightbox-nav-btnNext&quot;&gt;&lt;/a&gt;</DIV><DIV id="lightbox-loading">&lt;a href=&quot;#&quot; id=&quot;lightbox-loading-link&quot;&gt;&lt;img src=&quot;' + settings.imageLoading + '&quot;&gt;&lt;/a&gt;</DIV></DIV></DIV><DIV id="lightbox-container-image-data-box"><DIV id="lightbox-container-image-data"><DIV id="lightbox-secNav">&lt;a href=&quot;#&quot; id=&quot;lightbox-secNav-btnClose&quot;&gt;&lt;img src=&quot;' + settings.imageBtnClose + '&quot;&gt;&lt;/a&gt;</DIV></DIV></DIV></DIV>');
<PRE>           var arrPageSizes = ___getPageSize();
           $('#jquery-overlay').css({
               backgroundColor: settings.overlayBgColor,
               opacity: settings.overlayOpacity,
               width: arrPageSizes[0],
               height: arrPageSizes[1]
           }).fadeIn();
           var arrPageScroll = ___getPageScroll();
           $('#jquery-lightbox').css({
               top: arrPageScroll[1] + (arrPageSizes[3] / 10),
               left: arrPageScroll[0]
           }).show();
           $('#jquery-overlay,#jquery-lightbox').click(function () {
               _finish()
           });
           $('#lightbox-loading-link,#lightbox-secNav-btnClose').click(function () {
               _finish();
               return false
           });
           $(window).resize(function () {
               var arrPageSizes = ___getPageSize();
               $('#jquery-overlay').css({
                   width: arrPageSizes[0],
                   height: arrPageSizes[1]
               });
               var arrPageScroll = ___getPageScroll();
               $('#jquery-lightbox').css({
                   top: arrPageScroll[1] + (arrPageSizes[3] / 10),
                   left: arrPageScroll[0]
               })
           })
       }
</PRE><PRE>       function _set_image_to_view() {
           $('#lightbox-loading').show();
           if (settings.fixedNavigation) {
               $('#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber').hide()
           } else {
               $('#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber').hide()
           }
           var objImagePreloader = new Image();
           objImagePreloader.onload = function () {
               $('#lightbox-image').attr('src', settings.imageArray[settings.activeImage][0]);
               _resize_container_image_box(objImagePreloader.width*settings.heightScaling, objImagePreloader.height*settings.widthScaling);
               objImagePreloader.onload = function () {}
           };
           objImagePreloader.src = settings.imageArray[settings.activeImage][0]
       };
</PRE><PRE>       function _resize_container_image_box(intImageWidth, intImageHeight) {
           var intCurrentWidth = $('#lightbox-container-image-box').width();
           var intCurrentHeight = $('#lightbox-container-image-box').height();
           var intWidth = (intImageWidth + (settings.containerBorderSize * 2));
           var intHeight = (intImageHeight + (settings.containerBorderSize * 2));
           var intDiffW = intCurrentWidth - intWidth;
           var intDiffH = intCurrentHeight - intHeight;
           $('#lightbox-container-image-box').animate({
               width: intWidth,
               height: intHeight
           }, settings.containerResizeSpeed, function () {
               _show_image(intImageHeight,intImageWidth);
           });
           if ((intDiffW == 0) &amp;&amp; (intDiffH == 0)) {
               if ($.browser.msie) {
                   ___pause(250)
               } else {
                   ___pause(100)
               }
           }
           $('#lightbox-container-image-data-box').css({
               width: intImageWidth
           });
           $('#lightbox-nav-btnPrev,#lightbox-nav-btnNext').css({
               height: intImageHeight + (settings.containerBorderSize * 2)
           })
       };
</PRE><PRE>       function _show_image(h,w) {
           $('#lightbox-loading').hide();
           $('#lightbox-image').width(w);
           $('#lightbox-image').height(h);			
           $('#lightbox-image').fadeIn(function () {
               _show_image_data();
               _set_navigation();
           });
           _preload_neighbor_images()
       };
</PRE><PRE>       function _show_image_data() {
           $('#lightbox-container-image-data-box').slideDown('fast');
           $('#lightbox-image-details-caption').hide();
           if (settings.imageArray[settings.activeImage][1]) {
               $('#lightbox-image-details-caption').html(settings.imageArray[settings.activeImage][1]).show()
           }
           if (settings.imageArray.length &gt; 1) {
               $('#lightbox-image-details-currentNumber').html(settings.txtImage + ' ' + (settings.activeImage + 1) + ' ' + settings.txtOf + ' ' + settings.imageArray.length).show()
           }
       }
</PRE><PRE>       function _set_navigation() {
           $('#lightbox-nav').show();
           $('#lightbox-nav-btnPrev,#lightbox-nav-btnNext').css({
               'background': 'transparent url(' + settings.imageBlank + ') no-repeat'
           });
           if (settings.activeImage != 0) {
               if (settings.fixedNavigation) {
                   $('#lightbox-nav-btnPrev').css({
                       'background': 'url(' + settings.imageBtnPrev + ') left 15% no-repeat'
                   }).unbind().bind('click', function () {
                       settings.activeImage = settings.activeImage - 1;
                       _set_image_to_view();
                       return false
                   })
               } else {
                   $('#lightbox-nav-btnPrev').unbind().hover(function () {
                       $(this).css({
                           'background': 'url(' + settings.imageBtnPrev + ') left 15% no-repeat'
                       })
                   }, function () {
                       $(this).css({
                           'background': 'transparent url(' + settings.imageBlank + ') no-repeat'
                       })
                   }).show().bind('click', function () {
                       settings.activeImage = settings.activeImage - 1;
                       _set_image_to_view();
                       return false
                   })
               }
           }
           if (settings.activeImage != (settings.imageArray.length - 1)) {
               if (settings.fixedNavigation) {
                   $('#lightbox-nav-btnNext').css({
                       'background': 'url(' + settings.imageBtnNext + ') right 15% no-repeat'
                   }).unbind().bind('click', function () {
                       settings.activeImage = settings.activeImage + 1;
                       _set_image_to_view();
                       return false
                   })
               } else {
                   $('#lightbox-nav-btnNext').unbind().hover(function () {
                       $(this).css({
                           'background': 'url(' + settings.imageBtnNext + ') right 15% no-repeat'
                       })
                   }, function () {
                       $(this).css({
                           'background': 'transparent url(' + settings.imageBlank + ') no-repeat'
                       })
                   }).show().bind('click', function () {
                       settings.activeImage = settings.activeImage + 1;
                       _set_image_to_view();
                       return false
                   })
               }
           }
           _enable_keyboard_navigation()
       }
</PRE><PRE>       function _enable_keyboard_navigation() {
           $(document).keydown(function (objEvent) {
               _keyboard_action(objEvent)
           })
       }
</PRE><PRE>       function _disable_keyboard_navigation() {
           $(document).unbind()
       }
</PRE><PRE>       function _keyboard_action(objEvent) {
           if (objEvent == null) {
               keycode = event.keyCode;
               escapeKey = 27
           } else {
               keycode = objEvent.keyCode;
               escapeKey = objEvent.DOM_VK_ESCAPE
           }
           key = String.fromCharCode(keycode).toLowerCase();
           if ((key == settings.keyToClose) || (key == 'x') || (keycode == escapeKey)) {
               _finish()
           }
           if ((key == settings.keyToPrev) || (keycode == 37)) {
               if (settings.activeImage != 0) {
                   settings.activeImage = settings.activeImage - 1;
                   _set_image_to_view();
                   _disable_keyboard_navigation()
               }
           }
           if ((key == settings.keyToNext) || (keycode == 39)) {
               if (settings.activeImage != (settings.imageArray.length - 1)) {
                   settings.activeImage = settings.activeImage + 1;
                   _set_image_to_view();
                   _disable_keyboard_navigation()
               }
           }
       }
</PRE><PRE>       function _preload_neighbor_images() {
           if ((settings.imageArray.length - 1) &gt; settings.activeImage) {
               objNext = new Image();
               objNext.src = settings.imageArray[settings.activeImage + 1][0]
           }
           if (settings.activeImage &gt; 0) {
               objPrev = new Image();
               objPrev.src = settings.imageArray[settings.activeImage - 1][0]
           }
       }
</PRE><PRE>       function _finish() {
           $('#jquery-lightbox').remove();
           $('#jquery-overlay').fadeOut(function () {
               $('#jquery-overlay').remove()
           });
           $('embed, object, select').css({
               'visibility': 'visible'
           })
       }
</PRE><PRE>       function ___getPageSize() {
           var xScroll, yScroll;
           if (window.innerHeight &amp;&amp; window.scrollMaxY) {
               xScroll = window.innerWidth + window.scrollMaxX;
               yScroll = window.innerHeight + window.scrollMaxY
           } else if (document.body.scrollHeight &gt; document.body.offsetHeight) {
               xScroll = document.body.scrollWidth;
               yScroll = document.body.scrollHeight
           } else {
               xScroll = document.body.offsetWidth;
               yScroll = document.body.offsetHeight
           }
           var windowWidth, windowHeight;
           if (self.innerHeight) {
               if (document.documentElement.clientWidth) {
                   windowWidth = document.documentElement.clientWidth
               } else {
                   windowWidth = self.innerWidth
               }
               windowHeight = self.innerHeight
           } else if (document.documentElement &amp;&amp; document.documentElement.clientHeight) {
               windowWidth = document.documentElement.clientWidth;
               windowHeight = document.documentElement.clientHeight
           } else if (document.body) {
               windowWidth = document.body.clientWidth;
               windowHeight = document.body.clientHeight
           }
           if (yScroll &lt; windowHeight) {
               pageHeight = windowHeight
           } else {
               pageHeight = yScroll
           }
           if (xScroll &lt; windowWidth) {
               pageWidth = xScroll
           } else {
               pageWidth = windowWidth
           }
           arrayPageSize = new Array(pageWidth, pageHeight, windowWidth, windowHeight);
           return arrayPageSize
       };
</PRE><PRE>       function ___getPageScroll() {
           var xScroll, yScroll;
           if (self.pageYOffset) {
               yScroll = self.pageYOffset;
               xScroll = self.pageXOffset
           } else if (document.documentElement &amp;&amp; document.documentElement.scrollTop) {
               yScroll = document.documentElement.scrollTop;
               xScroll = document.documentElement.scrollLeft
           } else if (document.body) {
               yScroll = document.body.scrollTop;
               xScroll = document.body.scrollLeft
           }
           arrayPageScroll = new Array(xScroll, yScroll);
           return arrayPageScroll
       };
</PRE><PRE>       function ___pause(ms) {
           var date = new Date();
           curDate = null;
           do {
               var curDate = new Date()
           }
           while (curDate - date &lt; ms)
       };
       return this.unbind('click').click(_initialize)
   }
</PRE><P>})(jQuery);
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2013.igem.org/Team:UT_Dallas/jquery.lightbox-0.5.pack.js">http://2013.igem.org/Team:UT_Dallas/jquery.lightbox-0.5.pack.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:UT_Dallas/jquery.lightbox-0.5.pack.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:UT_Dallas/jquery.lightbox-0.5.pack.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:UT_Dallas/jquery.lightbox-0.5.pack.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:UT_Dallas/jquery.lightbox-0.5.pack.js&amp;oldid=163346" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2013.igem.org:Privacy_policy" title="2013.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2013.igem.org:General_disclaimer" title="2013.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>