<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_Calgary_epicjava"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:Calgary/epicjava">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:Calgary/epicjava&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:Calgary/epicjava&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:Calgary/epicjava&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:Calgary/epicjava" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:Calgary/epicjava</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2013.igem.org</H3><P>var elements = {
</P><PRE> detector: {
   hitboxes: [
     { tl_x: 212, tl_y: 128, w: 266, h: 40 }
   ],
   link_url: '<A href="https://2013.igem.org/Team:Calgary/Project/OurSensor/Detector'" class="external free" rel="nofollow">https://2013.igem.org/Team:Calgary/Project/OurSensor/Detector'</A>,
   //image_url: 'img/detector.png'
   image_url: '<A href="https://static.igem.org/mediawiki/2013/8/84/CalgaryDetector.png'" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/8/84/CalgaryDetector.png'</A>
  },
</PRE><PRE> linker: {
   hitboxes: [
     { tl_x: 276, tl_y: 61,  w: 39, h: 71 },
     { tl_x: 356, tl_y: 164, w: 79, h: 128 },
   ],
   link_url: '<A href="https://2013.igem.org/Team:Calgary/Project/OurSensor/Linker'" class="external free" rel="nofollow">https://2013.igem.org/Team:Calgary/Project/OurSensor/Linker'</A>,
   //image_url: 'img/linker.png'
   image_url: '<A href="https://static.igem.org/mediawiki/2013/5/5f/CalgaryLinker.png'" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/5/5f/CalgaryLinker.png'</A></PRE><PRE> },
</PRE><PRE> modelling: {
   hitboxes: [
     { tl_x: 0, tl_y: 266, w: 210, h: 163 }
   ],
   link_url: '<A href="https://2013.igem.org/Team:Calgary/Project/OurSensor/Modeling'" class="external free" rel="nofollow">https://2013.igem.org/Team:Calgary/Project/OurSensor/Modeling'</A>,
   //image_url: 'img/modelling.png'
   image_url: '<A href="https://static.igem.org/mediawiki/2013/a/af/20130927204336!Modelling.png'" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/a/af/20130927204336!Modelling.png'</A>
 },
</PRE><PRE> prototype: {
   hitboxes: [
     { tl_x: 453, tl_y: 296, w: 243, h: 96 }
   ],
   link_url: '<A href="https://2013.igem.org/Team:Calgary/Project/OurSensor/Prototype'" class="external free" rel="nofollow">https://2013.igem.org/Team:Calgary/Project/OurSensor/Prototype'</A>,
   //image_url: 'img/prototype.png'
   image_url: '<A href="https://static.igem.org/mediawiki/2013/5/56/CalgaryPrototype.png'" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/5/56/CalgaryPrototype.png'</A>
 },
</PRE><PRE> reporter: {
   hitboxes: [
     { tl_x: 252, tl_y: 1, w: 66, h: 63 }
   ],
   link_url: '<A href="https://2013.igem.org/Team:Calgary/Project/OurSensor/Reporter'" class="external free" rel="nofollow">https://2013.igem.org/Team:Calgary/Project/OurSensor/Reporter'</A>,
   //image_url: 'img/reporter.png'
   image_url: '<A href="https://static.igem.org/mediawiki/2013/2/24/Calgary_Reporter.png'" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/2/24/Calgary_Reporter.png'</A>
 },
</PRE><P>};
</P><P>var all_elem_names = <I>;</I>
$.each(elements, function(elem_name) {
</P><PRE> all_elem_names += (elem_name + ' ');
</PRE><P>});
</P><P>//=====================================
</P><P>
function is_within(x, y, box) {
</P><PRE> return x &gt;= box.tl_x &amp;&amp; y &gt;= box.tl_y &amp;&amp;
   x &lt;= box.tl_x + box.w &amp;&amp; y &lt;= box.tl_y + box.h;
</PRE><P>}
</P><P>function find_target(x, y) {
</P><PRE> var under_cursor = null;
</PRE><PRE> $.each(elements, function(elem_name, elem) {
   $.each(elem.hitboxes, function(idx, hitbox) {
     if(is_within(x, y, hitbox)) {
       under_cursor = elem_name;
       return false; // Stop iterating
     }
   });
</PRE><PRE>   if(under_cursor !== null) {
     return false; // Stop iterating
   }
 });
</PRE><PRE> return under_cursor;
</PRE><P>}
</P><P>function get_rel_cursor_pos(elem, event) {
</P><PRE> if ('pageX' in event) { // all browsers except IE before version 9
   var pageX = event.pageX;
   var pageY = event.pageY;
 }
 else {  // IE before version 9
   var pageX = event.clientX + document.documentElement.scrollLeft;
   var pageY = event.clientY + document.documentElement.scrollTop;
 }
</PRE><PRE> return {
   rel_x: pageX - $(elem).offset().left,
   rel_y: pageY - $(elem).offset().top,
 };
</PRE><P>}
</P><P>function preload_images() {
</P><PRE> $.each(elements, function(elem_name, elem) {
   var img = new Image();
   img.src = elem.image_url;
 });
</PRE><P>}
</P><P>function configure_mousemove(container) {
</P><PRE> var default_image_url = container.css('backgroundImage');
 var prev_target = null;
</PRE><PRE> var on_deactivate = function() {
   container.removeClass('active');
   container.css('backgroundImage', default_image_url);
 };
</PRE><PRE> container.mousemove(function(event) {
   var cursor_pos = get_rel_cursor_pos(this, event);
   var target = find_target(cursor_pos.rel_x, cursor_pos.rel_y);
   
   if(target === prev_target)
     return;
</PRE><PRE>   if(target === null) {
     on_deactivate();
   } else {
     container.addClass('active');
     var image_url = &quot;url('&quot; + elements[target].image_url + &quot;')&quot;;
     container.css('backgroundImage', image_url);
   }
</PRE><PRE>   prev_target = target;
 }).mouseleave(function() {
   on_deactivate();
 });
</PRE><P>}
</P><P>function configure_click(container) {
</P><PRE> container.click(function(evt) {
   evt.preventDefault();
</PRE><PRE>   var cursor_pos = get_rel_cursor_pos(this, evt);
   var target = find_target(cursor_pos.rel_x, cursor_pos.rel_y);
   if(target === null) {
     return;
   }
   
   window.location = elements[target].link_url;
 });
</PRE><P>}
</P><P>function init_tale_image() {
</P><PRE> preload_images();
</PRE><PRE> var container = $('#tales-img');
 configure_mousemove(container);
 configure_click(container);
</PRE><P>}
</P><P>init_tale_image();
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2013.igem.org/Team:Calgary/epicjava">http://2013.igem.org/Team:Calgary/epicjava</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:Calgary/epicjava" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:Calgary/epicjava" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:Calgary/epicjava&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:Calgary/epicjava&amp;oldid=225321" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2013.igem.org:Privacy_policy" title="2013.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2013.igem.org:General_disclaimer" title="2013.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>