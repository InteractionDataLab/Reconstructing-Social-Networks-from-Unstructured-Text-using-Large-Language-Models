<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_Uppsala_calendar_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:Uppsala/calendar.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:Uppsala/calendar.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:Uppsala/calendar.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:Uppsala/calendar.js&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:Uppsala/calendar.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform">Â </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:Uppsala/calendar.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2013.igem.org</H3><P>$wgAllowUserJs  = true;
</P><P>var month = new Date().getMonth();   
var year = new Date().getFullYear();   
var cal_table = <I>;     </I>
var eventString;
var days_with_dirys = new Array('t201381'); 
var inputs = 1;
var days_in_month = new Array(31,28,31,30,31,30,31,31,30,31,30,31);
</P><P>/*getWeek() will calculate current week nr*/ 
Date.prototype.getWeek = function() 
{
</P><PRE> var onejan = new Date(this.getFullYear(),0,1);
 return Math.ceil((((this - onejan) / 86400000) + onejan.getDay()+1)/7);
</PRE><P>}
</P><P>/*writes/rewrites the calculator string */ 
function calendar_normal()
{
</P><PRE> var m = month+1;
 var date = new Date();    
 var today = date.getDate();     
 cal_table = <I>;  </I></PRE><PRE>  if(year&lt;=200)
  {
   year += 1900;
  } 
  months = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December');
  var weekDay = new Array('Mon', 'Tue', 'We', 'Thu', 'Fri', 'Sat', 'Sun');
  days_in_month = new Array(31,28,31,30,31,30,31,31,30,31,30,31);
  
    if(year%4 == 0 &amp;&amp; year!=1900)
 {
     days_in_month[1]=29;
    }
  
   total = days_in_month[month];
   var date_today = months[month]+' '+year;

</PRE>
    cal_table = cal_table + '<TABLE class="cal_calendar">&lt;tbody id=&quot;cal_body&quot;&gt;<TBODY><TR class="head"><TH class="arrow">&lt;input id=&quot;left&quot; type=&quot;image&quot; onclick=&quot;left_arrow()&quot; src=&quot;image/buttons/arrowleft.png&quot;&gt;</TH><TH colspan="6">'+date_today+'</TH><TH class="arrow">&lt;input id=&quot;right&quot; type=&quot;image&quot; onclick=&quot;right_arrow()&quot; src=&quot;image/buttons/arrowright.png&quot;&gt;</TH></TR>';
    cal_table = cal_table + '<TR class="cal_d_weeks"><TH>Mon</TH><TH>Tue</TH><TH>Wed</TH><TH>Thu</TH><TH>Fri</TH><TH>Sat</TH><TH>Sun</TH><TH>Week</TH></TR><TR>';
<PRE>   week = 0;
 
   var first_week_day = new Date(year, month, 0).getDay();
 
   for(week_day = 0; week_day &lt; first_week_day; week_day++) 
   {
</PRE>
      cal_table = cal_table +'';
<PRE>     week++;
   }
   
for(i=1;i&lt;=total;i++)
   {
       if(week==0)
       {
</PRE>
            cal_table = cal_table + '</TR><TR>';
        }
    
        if(today==i &amp;&amp; month == date.getMonth() &amp;&amp; year == date.getFullYear())
        {
            cal_table = cal_table +'<TD id=".27.2B.27t.27.2Byear.2Bm.2Bi.2B.27" class="cal_today">&lt;input type=&quot;submit&quot; onclick=&quot;showNotes(year, month, value)&quot; value=&quot;'+i+'&quot;&gt;</TD>';
<PRE>       }
   
       else
       {
</PRE>
            cal_table = cal_table +'<TD id=".27.2B.27t.27.2Byear.2Bm.2Bi.2B.27" class="not_today">&lt;input type=&quot;submit&quot; onclick=&quot;showNotes(year, month, value)&quot; value=&quot;'+i+'&quot;&gt;</TD>';
<PRE>       }
   
       week++;
 markerNotes(year, m, i);
       if(week==7)
       {
 var weeknr = new Date(year, month, i-1).getWeek();
</PRE>
  cal_table = cal_table + '<TD class="week">&lt;input type=&quot;submit&quot; onclick=&quot;showNotesOfweek(year, value)&quot; value=&quot;'+weeknr+'&quot;&gt;</TD>';
        cal_table = cal_table + '</TR>';    
  week=0;
        }
    
        }
  
        for(i=1;week!=0;i++)
        {
                cal_table = cal_table + '<TR>';
<PRE>               week++;
   
               if(week==7)
               {  
     if(weeknr == 53)
     {
     var weeknr = 1;
     }
     else
     {
     var weeknr = weeknr+1;
     }
</PRE>
      cal_table = cal_table + '<TD class="week">&lt;input type=&quot;submit&quot; onclick=&quot;showNotesOfweek(year, value)&quot; value=&quot;'+weeknr+'&quot;&gt;</TD>';
<PRE>                       cal_table = cal_table + '&lt;/tr&gt;';
                       week=0;
               }
       }
</PRE>
        cal_table = cal_table + '&lt;/tbody&gt;</TR></TBODY></TABLE>';
<PRE>}
</PRE><PRE>function left_arrow()
{
month = month-1;
 if(month == -1)
 {
  year = year - 1;
  month = 11;
 }
calendar_normal();
document.getElementById('calendar').innerHTML = cal_table;
}
</PRE><PRE>function right_arrow()
{
month = month+1;
 if(month == 12)
 {
  year = year +1;
  month = 0;
 }  
calendar_normal();
document.getElementById('calendar').innerHTML = cal_table;
}
</PRE><PRE>function showNotes(y, m, day)
{
 var m = month+1;

</PRE>
  eventString =  '<DIV class="eventBox" id=".27.2B.27d.27.2By.2Bm.2Bday.2B.27"><H1><SPAN class="mw-headline" id=".27.2By.2B.27-.27.2Bm.2B.27-.27.2Bday.2B.27">'+y+'-'+m+'-'+day+'</SPAN></H1></DIV>';
<PRE> document.getElementById('file_holder').innerHTML = eventString;
}

function showNotesOfweek(y, wnr)
{
 var d = new Date(y, 0, 0);
 var w = d.getTime() + 604800000 * (wnr-1); 
 var m = new Date(w).getMonth()+1;
 var y = new Date(w).getFullYear();
 var day = new Date(w).getDate();
</PRE><PRE>  var e = new Date(w).getDay();
  day = day - e+1;
 
</PRE>
  eventString = '<DIV class="eventBox" id=".27.2B.27d.27.2By.2Bm.2Bday.2B.27"><H1><SPAN class="mw-headline" id=".27.2By.2B.27-.27.2Bm.2B.27-.27.2Bday.2B.27_2">'+y+'-'+m+'-'+day+'</SPAN></H1></DIV>';
<PRE>  for(i=1;i&lt;7;i++)
  {
   if(days_in_month[m-1] == day )
   {
    day = 0;
    m++;
    if(m&gt;12)
    {
     y++;
     var d = new Date(y, 0, 0);
     var w = d.getTime() + 604800000 * (wnr-1);
     var m = 1;
    }
    
   }
   day++;
</PRE>
    eventString = eventString + '<DIV class="eventBox" id=".27.2B.27d.27.2By.2Bm.2Bday.2B.27"><H1><SPAN class="mw-headline" id=".27.2By.2B.27-.27.2Bm.2B.27-.27.2Bday.2B.27_3">'+y+'-'+m+'-'+day+'</SPAN></H1></DIV>';
<PRE>  }
 document.getElementById('file_holder').innerHTML = eventString;
 eventString = <I>;</I>
}
</PRE><PRE>function markerNotes(y, m, d)
{
var id='t'+y+m+d;
</PRE><PRE>for(c = 0; c&lt;=inputs; c++)
{
 if(days_with_dirys[c] == id)
 {
  cal_table = cal_table + '&lt;style type=&quot;text/css&quot;&gt;#'+id+'{border: 2px solid #FFA500;}&lt;/style&gt;'; 
 }
}
</PRE><P>}
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2013.igem.org/Team:Uppsala/calendar.js">http://2013.igem.org/Team:Uppsala/calendar.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:Uppsala/calendar.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:Uppsala/calendar.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:Uppsala/calendar.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:Uppsala/calendar.js&amp;oldid=75955" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2013.igem.org:Privacy_policy" title="2013.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2013.igem.org:General_disclaimer" title="2013.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>