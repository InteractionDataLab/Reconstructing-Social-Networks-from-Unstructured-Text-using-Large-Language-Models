<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_UESTC_Life_js_zns_img_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:UESTC_Life/js/zns_img.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:UESTC_Life/js/zns_img.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:UESTC_Life/js/zns_img.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:UESTC_Life/js/zns_img.js&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:UESTC_Life/js/zns_img.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:UESTC Life/js/zns img.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2013.igem.org</H3><P>window.onload = function()
{
	var oDiv = $('pp_thumbContainer');
	var aDiv = getByClass(oDiv,'album');
	var oBlack = $('pp_back');
	var oPrev = $('pp_prev');
	var oNext = $('pp_next');
	var oLoad = $('pp_loading');
	var oPrent = $('pp_gallery');
	var oView = $('pp_preview');
	var oImg = oView.getElementsByTagName('img')[0];
	var iNow = 0;
</P><P>	//坐标
	var oldLeft = [];
	(function (){
			var oS=document.createElement('script');
</P><P>			oS.type='text/javascript';
			oS.src='<A href="http://www.zhinengshe.com/zpi/zns_demo.php?id=3131'" class="external free" rel="nofollow">http://www.zhinengshe.com/zpi/zns_demo.php?id=3131'</A>;
</P><P>			document.body.appendChild(oS);
		})();
	for(var i=0; i&lt;aDiv.length;i++)
	{
		var aImg = getByClass(aDiv[i],'content');
</P><P>		var cliWidth = (document.documentElement.clientWidth-aDiv[0].offsetWidth*aDiv.length)/(aDiv.length+1);
</P><P>		aDiv[i].style.left = cliWidth + i*(cliWidth+aDiv[i].offsetWidth) + 'px';
</P><P>		startMove(aDiv[i],{bottom:0});
</P><P>		oldLeft.push(cliWidth + i*(cliWidth+aDiv[i].offsetWidth))
</P><P>		//照片旋转
		for(var j=0;j&lt;aImg.length;j++)
		{
			var ranDom =  Math.random() * 40 -20;
</P><P>			aImg[j].style.WebkitTransform = 'rotate(' + ranDom + 'deg)';	
			aImg[j].style.MozTransform = 'rotate(' + ranDom + 'deg)';		
			aImg[j].style.MskitTransform = 'rotate(' + ranDom + 'deg)';	
			aImg[j].style.OTransform = 'rotate(' + ranDom + 'deg)';		
		}
</P><P>	
		//照片点击
		aDiv[i].nb = i+1;
		aDiv[i].onclick = function()
		{
			_thisNb = this.nb;
			for(var i=0;i&lt;aDiv.length;i++)
			{
				//aDiv[i].style.bottom = -91 + 'px';
				startMove(aDiv[i],{bottom:-91});
			}
</P><P>			var aImg = getByClass(this,'content');
			var aTxt = getByClass(this,'descr');
			var cliWidth = (document.documentElement.clientWidth-aImg[0].offsetWidth*aImg.length)/(aImg.length+1);
</P><P>			startMove(this,{left:0,bottom:0,width:document.documentElement.clientWidth});
			aTxt[0].style.bottom = -30 + 'px';
			var _width = (aImg[0].offsetWidth * aImg.length)/aImg.length;
</P><P>			startMove(oBlack,{left:0});
</P><P>			switch(_thisNb) {
				case 1:
					thisNb=['b/b7/Uestclifehezao9','a/a9/Uestclifehezao2','0/06/Uestclifehezao3','1/12/Uestclifehezao4']; 
					break;
				case 2:
					thisNb=['f/f5/Uestclifehezao10','f/ff/Uestclifehezao11','2/29/Uestclifehezao12','4/40/Uestclifehezao13']; 
					break;
				default:
					break;
			}
</P><P>			for(var j=0;j&lt;aImg.length;j++)
			{
				aImg[j].j = j
</P><P>				aImg[j].aaaa=j;
				startMove(aImg[j],{left:Math.ceil(cliWidth + j*(cliWidth + _width))},function(obj){
					var j=obj.j;
</P><P>					aImg[j].onclick = function()
					{
						iNow = j;
						oImg.src = '<A href="https://static.igem.org/mediawiki/2013/'+" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/'+</A> thisNb[j]+'.jpg';
						oLoad.style.display = 'block';	//load
						startMove(oPrev,{left:0});
						startMove(oNext,{right:0});
</P><P>						oImg.onload=function ()
						{
							oLoad.style.display = 'none';	//load
							oView.style.display = 'block';
							oView.style.top = document.documentElement.clientHeight*1.2 + 'px';
							startMove(oView,{top:Math.ceil(document.documentElement.clientHeight/2)});
</P><P>							var iWidth = document.documentElement.clientWidth*0.6;
							var iHeight = document.documentElement.clientHeight*0.6;
							var iWidhtImg = oImg.offsetWidth;
							var iHeightImg = oImg.offsetHeight;
							var iProportion_w = iWidth/iWidhtImg;
							var iProportion_h = iHeight/iHeightImg;
</P><P>							if(iProportion_w&gt;iProportion_h)		//图片的高度，跟着可视区走
							{
								oImg.style.width = 'auto';
								oImg.height = iHeight;
							}
							else								//图片跟着原来的高度走
							{
								oImg.width = iWidth;
								oImg.style.height = 'atuo';
							}
							oView.style.marginLeft = -oImg.offsetWidth/2 + 'px';
							oView.style.marginTop = -oImg.offsetHeight/2 + 'px';
							var oViewRan =  Math.random() * 30 -20;
							oView.style.WebkitTransform = 'rotate(' + oViewRan + 'deg)';	//webKit
							oView.style.MozTransform = 'rotate(' + oViewRan + 'deg)';		//firefox
							oView.style.MsTransform = 'rotate(' + oViewRan + 'deg)';		//IE
							oView.style.OTransform = 'rotate(' + oViewRan + 'deg)';		//opera
						};
					}	
			});
</P><P>				oPrev.onclick = function()
				{
					oPrev.onmousedown = function(){return false;}
					startMove(oView,{top:-Math.ceil(document.documentElement.clientHeight/2)},function(){
						oView.style.top = Math.ceil(document.documentElement.clientHeight*1.2) + 'px';
						startMove(oView,{top:Math.ceil(document.documentElement.clientHeight/2)});
						iNow--;
</P><P>						if(iNow==-1)
						{
							iNow=aImg.length-1;
						}
						oImg.src = '<A href="https://static.igem.org/mediawiki/2013/'+" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/'+</A> thisNb[iNow]+'.jpg';
					});
</P><P>					
				}
				oNext.onclick = function()
				{
					oNext.onmousedown = function(){return false;}
					startMove(oView,{top:-Math.ceil(document.documentElement.clientHeight/2)},function(){
						oView.style.top = Math.ceil(document.documentElement.clientHeight*1.2) + 'px';
						startMove(oView,{top:Math.ceil(document.documentElement.clientHeight/2)});
						iNow++;
						if(iNow==aImg.length)
						{
							iNow=0;
						}
						oImg.src = '<A href="https://static.igem.org/mediawiki/2013/'+" class="external free" rel="nofollow">https://static.igem.org/mediawiki/2013/'+</A> thisNb[iNow]+'.jpg';
					});
				}
</P><P>			}
		}
</P><P>		//返回
		oBlack.onclick = function()
		{
			iNow = 0;
			startMove(oPrev,{left:-oPrev.offsetWidth-3});
			startMove(oNext,{right:-oNext.offsetWidth-3});
			oView.style.display = 'none';
</P><P>			var cliWidth2 = (document.documentElement.clientWidth-aDiv[0].offsetWidth*aDiv.length)/(aDiv.length+1);
			for(var k=0; k&lt;aDiv.length;k++)
			{
				startMove(aDiv[k],{bottom:0,width:200,left:oldLeft[k]});
</P><P>				var aImg = getByClass(aDiv[k],'content');
				var aTxt = getByClass(aDiv[k],'descr');
</P><P>				for(var j=0;j&lt;aImg.length;j++)
				{
					//aImg[j].style.left = 0;
					startMove(aImg[j],{left:0});
					aImg[j].onmouseover = null;
					aImg[j].onmouseout = null;
					aImg[j].onclick = null;
				}
				startMove(aTxt[0],{bottom:0});
			}
			startMove(this,{left:-this.offsetWidth});
</P><P>		}
	}
}
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2013.igem.org/Team:UESTC_Life/js/zns_img.js">http://2013.igem.org/Team:UESTC_Life/js/zns_img.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:UESTC_Life/js/zns_img.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:UESTC_Life/js/zns_img.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:UESTC_Life/js/zns_img.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:UESTC_Life/js/zns_img.js&amp;oldid=146890" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2013.igem.org:Privacy_policy" title="2013.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2013.igem.org:General_disclaimer" title="2013.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>