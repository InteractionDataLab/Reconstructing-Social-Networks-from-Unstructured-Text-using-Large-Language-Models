<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_Concordia_Modeling_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:Concordia/Modeling/js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:Concordia/Modeling/js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:Concordia/Modeling/js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:Concordia/Modeling/js&amp;action=history">History               </A></LI><LI style="color:white;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:Concordia/Modeling/js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:Concordia/Modeling/js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2013.igem.org</H3><P>var ProcessEngine = null;
var DataToGraphPointRatio = 4;
var g_Data = null;
function PlotData ( )
{
</P><PRE>   var gpGroupNumber = parseInt($('#gas-protein-group').val());
   var rGroupNumber = parseInt($('#gas-group').val());
   var gGroupNumber = parseInt($('#repressor-group').val());
   var ahlrGroupNumber =parseInt($('#ahlr-group').val());
   var ahlGroupNumber = parseInt($('#ahl-group').val());
   var groupNumbers = [gpGroupNumber,gGroupNumber,rGroupNumber,ahlrGroupNumber,ahlGroupNumber];
   
   var Group1Data = new Array();
   var Group2Data = new Array();
   var Group3Data = new Array();
   var Group4Data = new Array();
   var Group5Data = new Array();
   var AllGroupData = [Group1Data,Group2Data,Group3Data,Group4Data,Group5Data];
   if (g_Data != null)
   {
       
       for(var ii = 0; ii &lt; g_Data.length; ++ii)
       {
         if (ii % DataToGraphPointRatio == 0)
         {
           var groupRows =[
           [g_Data[ii][0] ],
           [g_Data[ii][0] ],
           [g_Data[ii][0] ],
           [g_Data[ii][0] ],
           [g_Data[ii][0] ]
           ];
           for(var jj=1; jj &lt; 6/*g_Data[ii].length*/; ++jj)
           {
             groupRows[groupNumbers[jj-1]-1].push( g_Data[ii][jj] );
           }
           
           for(var jj = 0; jj &lt; AllGroupData.length; ++jj)
           {
             AllGroupData[jj].push (groupRows[jj] );
           }
         }
       }
       
       for(var ii = 0; ii &lt; 5; ++ii)
       {
         var data = google.visualization.arrayToDataTable(AllGroupData[ii]);
</PRE><PRE>         var options = {
           title: 'Group '+(ii+1).toString()+' Graphs'
         };
         
         var chart = new google.visualization.LineChart($('#graph-group'+(ii+1).toString())[0]);
         chart.draw(data, options);
       }
   }
</PRE><P>}
function GetParamObj()
{
</P><PRE> var GasProteinHalfLife = parseFloat($('#GasProteinHalfLifeInput').val());
 var GasProteinStrength = parseFloat($('#GasProteinStrengthInput').val());
 var GasProteinSize = parseFloat($('#GasProteinSizeInput').val());
 var GasProteinThreshold = parseFloat($('#GasProteinThresholdInput').val());
 var GasProteinSensitivity = parseFloat($('#GasProteinSensitivityInput').val());
 var GasProduction = parseFloat($('#GasProductionInput').val());
 var GasDiffusion = parseFloat($('#GasDiffusionInput').val());
 
 var RepressorHalfLife = parseFloat($('#RepressorHalfLifeInput').val());
 var RepressorStrength = parseFloat($('#RepressorStrengthInput').val());
 var RepressorSize = parseFloat($('#RepressorSizeInput').val());
 var RepressorThreshold = parseFloat($('#RepressorThresholdInput').val());
 var RepressorSensitivity = parseFloat($('#RepressorSensitivityInput').val());
 
 var AhlrHalfLife = parseFloat($('#AhlrHalfLifeInput').val());
 var AhlrStrength = parseFloat($('#AhlrStrengthInput').val());
 var AhlrSize = parseFloat($('#AhlrSizeInput').val());
 var AhlrThreshold = parseFloat($('#AhlrThresholdInput').val());
 var AhlrSensitivity = parseFloat($('#AhlrSensitivityInput').val());
 
 var AhlHalfLife = parseFloat($('#AhlHalfLifeInput').val());
 var AhlStrength = parseFloat($('#AhlStrengthInput').val());
 var AhlSize = parseFloat($('#AhlSizeInput').val());
 var AhlThreshold = parseFloat($('#AhlThresholdInput').val());
 var AhlSensitivity = parseFloat($('#AhlSensitivityInput').val());
 
 
 var DeltaTime = parseFloat($('#DeltaTimeInput').val());
 
 var DataSize = parseFloat($('#DataSizeInput').val());
 
 var params = 
 {
   'GasProteinHalfLife' : GasProteinHalfLife ,
   'GasProteinStrength' : GasProteinStrength,
   'GasProteinSize' : GasProteinSize,
   'GasProteinThreshold' : GasProteinThreshold,
   'GasProteinSensitivity' : GasProteinSensitivity,
   
   'GasProduction' : GasProduction,
   'GasDiffusion' : GasDiffusion,
   
   'RepressorHalfLife' : RepressorHalfLife,
   'RepressorStrength' : RepressorStrength,
   'RepressorSize' : RepressorSize,
   'RepressorThreshold' : RepressorThreshold,
   'RepressorSensitivity' : RepressorSensitivity,
   
   'AhlrHalfLife' : AhlrHalfLife,
   'AhlrStrength' : AhlrStrength,
   'AhlrSize' : AhlrSize,
   'AhlrThreshold' : AhlrThreshold,
   'AhlrSensitivity': AhlrSensitivity,
   
   'AhlHalfLife' : AhlHalfLife,
   'AhlStrength' : AhlStrength,
   'AhlSize' : AhlSize,
   'AhlThreshold' : AhlThreshold,
   'AhlSensitivity': AhlSensitivity,
   
   'DeltaTime' : DeltaTime,
   'DataSize' : DataSize
 }
 
 var _DataToGraphPointRatio = parseFloat($('#DataToGraphPointRatioInput').val());
</PRE><PRE> if(isNaN (_DataToGraphPointRatio) )
 {
   
 }
 else
 {
   DataToGraphPointRatio = _DataToGraphPointRatio;
 }
 
   
   var NameArray = 
 [
   'GasProteinHalfLife',
   'GasProteinStrength' ,
   'GasProteinSize' ,
   'GasProteinThreshold' ,
   'GasProteinSensitivity' ,
   
   'GasProduction' ,
   'GasDiffusion' ,
   
   'RepressorHalfLife' ,
   'RepressorStrength' ,
   'RepressorSize' ,
   'RepressorThreshold' ,
   'RepressorSensitivity' ,
   
   'DeltaTime' ,
   'DataSize' 
 ];
 if( DataToGraphPointRatio &gt; 100)
 {
   alert(&quot;Your data-to-graph ratio is too large, 1 point will be graphed for each &quot; + DataToGraphPointRatio + &quot; data points. This may cause graphing aliasing&quot;);
 }
</PRE><PRE> return params;
</PRE><P>}
</P><P>
function RunSimulation()
{
</P><PRE> var params = GetParamObj();
 
 $('#bttnRun').attr('disabled',&quot;disabled&quot;);
 $('#bttnRun').text('Running...');
   if(ProcessEngine != null)
 {
   ProcessEngine.postMessage({&quot;command&quot;:&quot;process&quot;, &quot;vals&quot;:params });
 }
 else
 {
   alert(&quot;The background engine was not created successfully. See earlier error for details...&quot;);
 }
</PRE><P>}
</P><P>function GraphGas()
{
</P><PRE> var params = GetParamObj();
 if(ProcessEngine != null)
 {
   ProcessEngine.postMessage({&quot;command&quot;:&quot;graph-gas&quot;, &quot;vals&quot;:params });
 }
 else
 {
   alert(&quot;The background engine was not created successfully. See earlier error for details...&quot;);
 }
</PRE><P>}
</P><P>function GraphRep()
{
</P><PRE> var params = GetParamObj();
 if(ProcessEngine != null)
 {
   ProcessEngine.postMessage({&quot;command&quot;:&quot;graph-rep&quot;, &quot;vals&quot;:params });
 }
 else
 {
   alert(&quot;The background engine was not created successfully. See earlier error for details...&quot;);
 }
</PRE><P>}
</P><P>function OnMessage (data)
{
</P><PRE> if(data.command == &quot;process&quot;)
 {
     g_Data = data.vals;
     $('#bttnRun').text('Run'); 
     $('#bttnRun').removeAttr('disabled',&quot;disabled&quot;); 
     
     PlotData();
 }
 else if (data.command == 'graph-gas')
 {
   var plot_data = google.visualization.arrayToDataTable(data.vals[0]);
</PRE><PRE>   var options = {
     title: 'Gas Rate Of Change'
   };
</PRE><PRE>   var chart = new google.visualization.LineChart($('#gas-rate-graph')[0]);
   chart.draw(plot_data, options);
   
   plot_data = google.visualization.arrayToDataTable(data.vals[1]);
</PRE><PRE>   options = {
     title: 'Gas Protein Rate Of Change'
   };
</PRE><PRE>   var chart2 = new google.visualization.LineChart($('#gas-protein-rate-graph')[0]);
   chart2.draw(plot_data, options);
 }
 else if(data.command == 'graph-rep')
 {
   var plot_data = google.visualization.arrayToDataTable(data.vals);
</PRE><PRE>   var options = {
     title: 'Repressor Rate Of Change'
   };
</PRE><PRE>   var chart = new google.visualization.LineChart($('#rep-rate-graph')[0]);
   chart.draw(plot_data, options);
 }
 else
 {
   Log(&quot;Unrecognized command response received from background worker&quot;, 0 );
 }
</PRE><P>}
</P><P>function Initialize(arg1)
{
</P><PRE> ProcessEngine = CreateBackgroundEngine(&quot;<A href="https://2013.igem.org/Team:Concordia/Modeling/background?action=raw" class="external free" rel="nofollow">https://2013.igem.org/Team:Concordia/Modeling/background?action=raw</A>&quot;, 
 OnMessage,
 false);
 
 if(ProcessEngine != null)
 {
   ProcessEngine.postMessage({&quot;command&quot;:&quot;process&quot;, &quot;vals&quot;:null });
 }
</PRE><PRE> $('.parameter-section p').click( ToggleVisibilityClick  );
 $('.graph-label').click( ToggleVisibilityClick  );
 $('.parameters-label').click( ToggleVisibilityClick  );
 $('#bttnRun').click(RunSimulation);
 $('#bttnGraphGasRate').click(GraphGas);
 $('#bttnGraphRepRate').click(GraphRep);
 $('#gas-protein-group').change(function () {PlotData();} );
 $('#gas-group').change(function () {PlotData();} );
 $('#repressor-group').change(function () {PlotData();} );
 $('#ahl-group').change(function () {PlotData();} );
 $('#ahlr-group').change(function () {PlotData();} );
</PRE><P>}
</P><P>
$(document).load(Initialize(0));
</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2013.igem.org/Team:Concordia/Modeling/js">http://2013.igem.org/Team:Concordia/Modeling/js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:Concordia/Modeling/js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:Concordia/Modeling/js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:Concordia/Modeling/js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:Concordia/Modeling/js&amp;oldid=236399" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2013.igem.org:Privacy_policy" title="2013.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2013.igem.org:General_disclaimer" title="2013.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>