<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_TU_Munich_galleria-1_2_8_min_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:TU_Munich/galleria-1.2.8.min.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:TU_Munich/galleria-1.2.8.min.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:TU_Munich/galleria-1.2.8.min.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:TU_Munich/galleria-1.2.8.min.js&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:TU_Munich/galleria-1.2.8.min.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform">Â </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:TU Munich/galleria-1.2.8.min.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2012.igem.org</H3><P>/**
</P><PRE>* Galleria v 1.2.8 2012-08-09
* <A href="http://galleria.io" class="external free" rel="nofollow">http://galleria.io</A>
*
* Licensed under the MIT license
* <A href="https://raw.github.com/aino/galleria/master/LICENSE" class="external free" rel="nofollow">https://raw.github.com/aino/galleria/master/LICENSE</A>
*
*/(function(a){var b,c=this,d=c.document,e=a(d),f=a(c),g=Array.prototype,h=1.28,i=!0,j=3e4,k=!1,l=navigator.userAgent.toLowerCase(),m=c.location.hash.replace(/#\//,&quot;&quot;),n=function(){},o=function(){return!1},p=function(){var a=3,c=d.createElement(&quot;div&quot;),e=c.getElementsByTagName(&quot;i&quot;);do c.innerHTML=&quot;&quot;;while(e[0]);return a&gt;4?a:b}(),q=function(){return{html:d.documentElement,body:d.body,head:d.getElementsByTagName(&quot;head&quot;)[0],title:d.title}},r=&quot;data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image&quot;,s=function(){var b=[];return a.each(r.split(&quot; &quot;),function(a,c){b.push(c),/_/.test(c)&amp;&amp;b.push(c.replace(/_/g,&quot;&quot;))}),b}(),t=function(b){var c;return typeof b!=&quot;object&quot;?b:(a.each(b,function(d,e){/^[a-z]+_/.test(d)&amp;&amp;(c=&quot;&quot;,a.each(d.split(&quot;_&quot;),function(a,b){c+=a&gt;0?b.substr(0,1).toUpperCase()+b.substr(1):b}),b[c]=e,delete b[d])}),b)},u=function(b){return a.inArray(b,s)&gt;-1?Galleria[b.toUpperCase()]:b},v={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(a){return&quot;<A href="http://www.youtube.com/embed/" class="external free" rel="nofollow">http://www.youtube.com/embed/</A>&quot;+a},getThumb:function(b,c,d){d=d||n,a.getJSON(&quot;<A href="http://gdata.youtube.com/feeds/api/videos/" class="external free" rel="nofollow">http://gdata.youtube.com/feeds/api/videos/</A>&quot;+b+&quot;?v=2&amp;alt=json-in-script&amp;callback=?&quot;,function(a){try{c(a.entry.media$group.media$thumbnail[0].url)}catch(b){d()}}).error(d)}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(a){return&quot;<A href="http://player.vimeo.com/video/" class="external free" rel="nofollow">http://player.vimeo.com/video/</A>&quot;+a},getThumb:function(b,c,d){d=d||n,a.getJSON(&quot;<A href="http://vimeo.com/api/v2/video/" class="external free" rel="nofollow">http://vimeo.com/api/v2/video/</A>&quot;+b+&quot;.json?callback=?&quot;,function(a){try{c(a[0].thumbnail_medium)}catch(b){d()}}).error(d)}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(a){return&quot;<A href="http://www.dailymotion.com/embed/video/" class="external free" rel="nofollow">http://www.dailymotion.com/embed/video/</A>&quot;+a},getThumb:function(b,c,d){d=d||n,a.getJSON(&quot;<A href="https://api.dailymotion.com/video/" class="external free" rel="nofollow">https://api.dailymotion.com/video/</A>&quot;+b+&quot;?fields=thumbnail_medium_url&amp;callback=?&quot;,function(a){try{c(a.thumbnail_medium_url)}catch(b){d()}}).error(d)}}},w=function(a){var b;for(var c in v){b=a&amp;&amp;a.match(v[c].reg);if(b&amp;&amp;b.length)return{id:b[2],provider:c}}return!1},x={support:function(){var a=q().html;return a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullScreen}(),callback:n,enter:function(a,b){this.instance=a,this.callback=b||n;var c=q().html;c.requestFullscreen?c.requestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullScreen&amp;&amp;c.webkitRequestFullScreen()},exit:function(a){this.callback=a||n,d.exitFullscreen?d.exitFullscreen():d.mozCancelFullScreen?d.mozCancelFullScreen():d.webkitCancelFullScreen&amp;&amp;d.webkitCancelFullScreen()},instance:null,listen:function(){if(!this.support)return;var a=function(){if(!x.instance)return;var a=x.instance._fullscreen;d.fullscreen||d.mozFullScreen||d.webkitIsFullScreen?a._enter(x.callback):a._exit(x.callback)};d.addEventListener(&quot;fullscreenchange&quot;,a,!1),d.addEventListener(&quot;mozfullscreenchange&quot;,a,!1),d.addEventListener(&quot;webkitfullscreenchange&quot;,a,!1)}},y=[],z=[],A=!1,B=!1,C=[],D=function(b){Galleria.theme=b,a.each(C,function(a,b){b._initialized||b._init.call(b)})},E=function(){return{clearTimer:function(b){a.each(Galleria.get(),function(){this.clearTimer(b)})},addTimer:function(b){a.each(Galleria.get(),function(){this.addTimer(b)})},array:function(a){return g.slice.call(a,0)},create:function(a,b){b=b||&quot;div&quot;;var c=d.createElement(b);return c.className=a,c},getScriptPath:function(b){b=b||a(&quot;script:last&quot;).attr(&quot;src&quot;);var c=b.split(&quot;/&quot;);return c.length==1?&quot;&quot;:(c.pop(),c.join(&quot;/&quot;)+&quot;/&quot;)},animate:function(){var b=function(a){var b=&quot;transition WebkitTransition MozTransition OTransition&quot;.split(&quot; &quot;),d;if(c.opera)return!1;for(d=0;b[d];d++)if(typeof a[b[d]]!=&quot;undefined&quot;)return b[d];return!1}((d.body||d.documentElement).style),e={MozTransition:&quot;transitionend&quot;,OTransition:&quot;oTransitionEnd&quot;,WebkitTransition:&quot;webkitTransitionEnd&quot;,transition:&quot;transitionend&quot;}[b],f={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],&quot;ease-in&quot;:[.42,0,1,1],&quot;ease-out&quot;:[0,0,.58,1],&quot;ease-in-out&quot;:[.42,0,.58,1]},g=function(b,c,d){var e={};d=d||&quot;transition&quot;,a.each(&quot;webkit moz ms o&quot;.split(&quot; &quot;),function(){e[&quot;-&quot;+this+&quot;-&quot;+d]=c}),b.css(e)},h=function(a){g(a,&quot;none&quot;,&quot;transition&quot;),Galleria.WEBKIT&amp;&amp;Galleria.TOUCH&amp;&amp;(g(a,&quot;translate3d(0,0,0)&quot;,&quot;transform&quot;),a.data(&quot;revert&quot;)&amp;&amp;(a.css(a.data(&quot;revert&quot;)),a.data(&quot;revert&quot;,null)))},i,j,k,l,m,o,p;return function(d,q,r){r=a.extend({duration:400,complete:n,stop:!1},r),d=a(d);if(!r.duration){d.css(q),r.complete.call(d[0]);return}if(!b){d.animate(q,r);return}r.stop&amp;&amp;(d.unbind(e),h(d)),i=!1,a.each(q,function(a,b){p=d.css(a),E.parseValue(p)!=E.parseValue(b)&amp;&amp;(i=!0),d.css(a,p)});if(!i){c.setTimeout(function(){r.complete.call(d[0])},r.duration);return}j=[],k=r.easing in f?f[r.easing]:f._default,l=&quot; &quot;+r.duration+&quot;ms&quot;+&quot; cubic-bezier(&quot;+k.join(&quot;,&quot;)+&quot;)&quot;,c.setTimeout(function(b,c,d,e){return function(){b.one(c,function(a){return function(){h(a),r.complete.call(a[0])}}(b));if(Galleria.WEBKIT&amp;&amp;Galleria.TOUCH){m={},o=[0,0,0],a.each([&quot;left&quot;,&quot;top&quot;],function(a,c){c in d&amp;&amp;(o[a]=E.parseValue(d[c])-E.parseValue(b.css(c))+&quot;px&quot;,m[c]=d[c],delete d[c])});if(o[0]||o[1])b.data(&quot;revert&quot;,m),j.push(&quot;-webkit-transform&quot;+e),g(b,&quot;translate3d(&quot;+o.join(&quot;,&quot;)+&quot;)&quot;,&quot;transform&quot;)}a.each(d,function(a,b){j.push(a+e)}),g(b,j.join(&quot;,&quot;)),b.css(d)}}(d,e,q,l),2)}}(),removeAlpha:function(a){if(p&lt;9&amp;&amp;a){var b=a.style,c=a.currentStyle,d=c&amp;&amp;c.filter||b.filter||&quot;&quot;;/alpha/.test(d)&amp;&amp;(b.filter=d.replace(/alpha\([^)]*\)/i,&quot;&quot;))}},forceStyles:function(b,c){b=a(b),b.attr(&quot;style&quot;)&amp;&amp;b.data(&quot;styles&quot;,b.attr(&quot;style&quot;)).removeAttr(&quot;style&quot;),b.css(c)},revertStyles:function(){a.each(E.array(arguments),function(b,c){c=a(c),c.removeAttr(&quot;style&quot;),c.attr(&quot;style&quot;,&quot;&quot;),c.data(&quot;styles&quot;)&amp;&amp;c.attr(&quot;style&quot;,c.data(&quot;styles&quot;)).data(&quot;styles&quot;,null)})},moveOut:function(a){E.forceStyles(a,{position:&quot;absolute&quot;,left:-1e4})},moveIn:function(){E.revertStyles.apply(E,E.array(arguments))},elem:function(b){return b instanceof a?{$:b,dom:b[0]}:{$:a(b),dom:b}},hide:function(a,b,c){c=c||n;var d=E.elem(a),e=d.$;a=d.dom,e.data(&quot;opacity&quot;)||e.data(&quot;opacity&quot;,e.css(&quot;opacity&quot;));var f={opacity:0};if(b){var g=p&lt;9&amp;&amp;a?function(){E.removeAlpha(a),a.style.visibility=&quot;hidden&quot;,c.call(a)}:c;E.animate(a,f,{duration:b,complete:g,stop:!0})}else p&lt;9&amp;&amp;a?(E.removeAlpha(a),a.style.visibility=&quot;hidden&quot;):e.css(f)},show:function(a,b,c){c=c||n;var d=E.elem(a),e=d.$;a=d.dom;var f=parseFloat(e.data(&quot;opacity&quot;))||1,g={opacity:f};if(b){p&lt;9&amp;&amp;(e.css(&quot;opacity&quot;,0),a.style.visibility=&quot;visible&quot;);var h=p&lt;9&amp;&amp;a?function(){g.opacity==1&amp;&amp;E.removeAlpha(a),c.call(a)}:c;E.animate(a,g,{duration:b,complete:h,stop:!0})}else p&lt;9&amp;&amp;g.opacity==1&amp;&amp;a?(E.removeAlpha(a),a.style.visibility=&quot;visible&quot;):e.css(g)},optimizeTouch:function(){var b,c,d,e,f={},g=function(b){b.preventDefault(),f=a.extend({},b,!0)},h=function(){this.evt=f},i=function(){this.handler.call(b,this.evt)};return function(f){a(f).bind(&quot;touchend&quot;,function(f){b=f.target,e=!0;while(b.parentNode&amp;&amp;b!=f.currentTarget&amp;&amp;e)c=a(b).data(&quot;events&quot;),d=a(b).data(&quot;fakes&quot;),c&amp;&amp;&quot;click&quot;in c?(e=!1,f.preventDefault(),a(b).click(g).click(),c.click.pop(),a.each(c.click,h),a(b).data(&quot;fakes&quot;,c.click),delete c.click):d&amp;&amp;(e=!1,f.preventDefault(),a.each(d,i)),b=b.parentNode})}}(),wait:function(b){b=a.extend({until:o,success:n,error:function(){Galleria.raise(&quot;Could not complete wait function.&quot;)},timeout:3e3},b);var d=E.timestamp(),e,f,g=function(){f=E.timestamp(),e=f-d;if(b.until(e))return b.success(),!1;if(typeof b.timeout==&quot;number&quot;&amp;&amp;f&gt;=d+b.timeout)return b.error(),!1;c.setTimeout(g,10)};c.setTimeout(g,10)},toggleQuality:function(a,b){if(p!==7&amp;&amp;p!==8||!a||a.nodeName.toUpperCase()!=&quot;IMG&quot;)return;typeof b==&quot;undefined&quot;&amp;&amp;(b=a.style.msInterpolationMode===&quot;nearest-neighbor&quot;),a.style.msInterpolationMode=b?&quot;bicubic&quot;:&quot;nearest-neighbor&quot;},insertStyleTag:function(a){var b=d.createElement(&quot;style&quot;);q().head.appendChild(b);if(b.styleSheet)b.styleSheet.cssText=a;else{var c=d.createTextNode(a);b.appendChild(c)}},loadScript:function(b,c){var d=!1,e=a(&quot;&lt;script&gt;&quot;).attr({src:b,async:!0}).get(0);e.onload=e.onreadystatechange=function(){!d&amp;&amp;(!this.readyState||this.readyState===&quot;loaded&quot;||this.readyState===&quot;complete&quot;)&amp;&amp;(d=!0,e.onload=e.onreadystatechange=null,typeof c==&quot;function&quot;&amp;&amp;c.call(this,this))},q().head.appendChild(e)},parseValue:function(a){if(typeof a==&quot;number&quot;)return a;if(typeof a==&quot;string&quot;){var b=a.match(/\-?\d|\./g);return b&amp;&amp;b.constructor===Array?b.join(&quot;&quot;)*1:0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(c,e,f){var g,h;a(&quot;link[rel=stylesheet]&quot;).each(function(){if((new RegExp(c)).test(this.href))return g=this,!1}),typeof e==&quot;function&quot;&amp;&amp;(f=e,e=b),f=f||n;if(g)return f.call(g,g),g;h=d.styleSheets.length;if(a(&quot;#&quot;+e).length)a(&quot;#&quot;+e).attr(&quot;href&quot;,c),h--;else{g=a(&quot;&lt;link&gt;&quot;).attr({rel:&quot;stylesheet&quot;,href:c,id:e}).get(0);var i=a('link[rel=&quot;stylesheet&quot;], style');i.length?i.get(0).parentNode.insertBefore(g,i[0]):q().head.appendChild(g);if(p&amp;&amp;h&gt;=31){Galleria.raise(&quot;You have reached the browser stylesheet limit (31)&quot;,!0);return}}if(typeof f==&quot;function&quot;){var j=a(&quot;<S>&quot;).attr(&quot;id&quot;,&quot;galleria-loader&quot;).hide().appendTo(q().body);E.wait({until:function(){return j.height()==1},success:function(){j.remove(),f.call(g,g)},error:function(){j.remove(),Galleria.raise(&quot;Theme CSS could not load after 20 sec. Please download the latest theme at <A href="http://galleria.io/customer/" class="external free" rel="nofollow">http://galleria.io/customer/</A>&quot;,!0)},timeout:2e4})}return g}}}(),F=function(){var b=function(b,c,d,e){var f=this.getOptions(&quot;easing&quot;),g=this.getStageWidth(),h={left:g*(b.rewind?-1:1)},i={left:0};d?(h.opacity=0,i.opacity=1):h.opacity=1,a(b.next).css(h),E.animate(b.next,i,{duration:b.speed,complete:function(a){return function(){c(),a.css({left:0})}}(a(b.next).add(b.prev)),queue:!1,easing:f}),e&amp;&amp;(b.rewind=!b.rewind),b.prev&amp;&amp;(h={left:0},i={left:g*(b.rewind?1:-1)},d&amp;&amp;(h.opacity=1,i.opacity=0),a(b.prev).css(h),E.animate(b.prev,i,{duration:b.speed,queue:!1,easing:f,complete:function(){a(this).css(&quot;opacity&quot;,0)}}))};return{active:!1,init:function(a,b,c){F.effects.hasOwnProperty(a)&amp;&amp;F.effects[a].call(this,b,c)},effects:{fade:function(b,c){a(b.next).css({opacity:0,left:0}).show(),E.animate(b.next,{opacity:1},{duration:b.speed,complete:c}),b.prev&amp;&amp;(a(b.prev).css(&quot;opacity&quot;,1).show(),E.animate(b.prev,{opacity:0},{duration:b.speed}))},flash:function(b,c){a(b.next).css({opacity:0,left:0}),b.prev?E.animate(b.prev,{opacity:0},{duration:b.speed/2,complete:function(){E.animate(b.next,{opacity:1},{duration:b.speed,complete:c})}}):E.animate(b.next,{opacity:1},{duration:b.speed,complete:c})},pulse:function(b,c){b.prev&amp;&amp;a(b.prev).hide(),a(b.next).css({opacity:0,left:0}).show(),E.animate(b.next,{opacity:1},{duration:b.speed,complete:c})},slide:function(a,c){b.apply(this,E.array(arguments))},fadeslide:function(a,c){b.apply(this,E.array(arguments).concat([!0]))},doorslide:function(a,c){b.apply(this,E.array(arguments).concat([!1,!0]))}}}}();x.listen(),Galleria=function(){var d=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=b,this._binds=[],this._id=parseInt(Math.random()*1e4,10);var g=&quot;container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip&quot;,h=&quot;current total&quot;;a.each(g.split(&quot; &quot;),function(a,b){d._dom[b]=E.create(&quot;galleria-&quot;+b)}),a.each(h.split(&quot; &quot;),function(a,b){d._dom[b]=E.create(&quot;galleria-&quot;+b,&quot;span&quot;)});var i=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(a){var b=a.keyCode||a.which;b in i.map&amp;&amp;typeof i.map[b]==&quot;function&quot;&amp;&amp;i.map[b].call(d,a)},attach:function(a){var b,c;for(b in a)a.hasOwnProperty(b)&amp;&amp;(c=b.toUpperCase(),c in i.keys?i.map[i.keys[c]]=a[b]:i.map[c]=a[b]);i.bound||(i.bound=!0,e.bind(&quot;keydown&quot;,i.press))},detach:function(){i.bound=!1,i.map={},e.unbind(&quot;keydown&quot;,i.press)}},j=this._controls={0:b,1:b,active:0,swap:function(){j.active=j.active?0:1},getActive:function(){return j[j.active]},getNext:function(){return j[1-j.active]}},k=this._carousel={next:d.$(&quot;thumb-nav-right&quot;),prev:d.$(&quot;thumb-nav-left&quot;),width:0,current:0,max:0,hooks:[],update:function(){var b=0,c=0,e=[0];a.each(d._thumbnails,function(d,f){f.ready&amp;&amp;(b+=f.outerWidth||a(f.container).outerWidth(!0),e[d+1]=b,c=Math.max(c,f.outerHeight||a(f.container).outerHeight(!0)))}),d.$(&quot;thumbnails&quot;).css({width:b,height:c}),k.max=b,k.hooks=e,k.width=d.$(&quot;thumbnails-list&quot;).width(),k.setClasses(),d.$(&quot;thumbnails-container&quot;).toggleClass(&quot;galleria-carousel&quot;,b&gt;k.width),k.width=d.$(&quot;thumbnails-list&quot;).width()},bindControls:function(){var a;k.next.bind(&quot;click&quot;,function(b){b.preventDefault();if(d._options.carouselSteps===&quot;auto&quot;){for(a=k.current;a&lt;k.hooks.length;a++)if(k.hooks[a]-k.hooks[k.current]&gt;k.width){k.set(a-2);break}}else k.set(k.current+d._options.carouselSteps)}),k.prev.bind(&quot;click&quot;,function(b){b.preventDefault();if(d._options.carouselSteps===&quot;auto&quot;)for(a=k.current;a&gt;=0;a--){if(k.hooks[k.current]-k.hooks[a]&gt;k.width){k.set(a+2);break}if(a===0){k.set(0);break}}else k.set(k.current-d._options.carouselSteps)})},set:function(a){a=Math.max(a,0);while(k.hooks[a-1]+k.width&gt;=k.max&amp;&amp;a&gt;=0)a--;k.current=a,k.animate()},getLast:function(a){return(a||k.current)-1},follow:function(a){if(a===0||a===k.hooks.length-2){k.set(a);return}var b=k.current;while(k.hooks[b]-k.hooks[k.current]&lt;k.width&amp;&amp;b&lt;=k.hooks.length)b++;a-1&lt;k.current?k.set(a-1):a+2&gt;b&amp;&amp;k.set(a-b+k.current+2)},setClasses:function(){k.prev.toggleClass(&quot;disabled&quot;,!k.current),k.next.toggleClass(&quot;disabled&quot;,k.hooks[k.current]+k.width&gt;=k.max)},animate:function(a){k.setClasses();var b=k.hooks[k.current]*-1;if(isNaN(b))return;E.animate(d.get(&quot;thumbnails&quot;),{left:b},{duration:d._options.carouselSpeed,easing:d._options.easing,queue:!1})}},l=this._tooltip={initialized:!1,open:!1,timer:&quot;tooltip&quot;+d._id,swapTimer:&quot;swap&quot;+d._id,init:function(){l.initialized=!0;var a=&quot;.galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}&quot;;E.insertStyleTag(a),d.$(&quot;tooltip&quot;).css({opacity:.8,visibility:&quot;visible&quot;,display:&quot;none&quot;})},move:function(a){var b=d.getMousePosition(a).x,c=d.getMousePosition(a).y,e=d.$(&quot;tooltip&quot;),f=b,g=c,h=e.outerHeight(!0)+1,i=e.outerWidth(!0),j=h+15,k=d.$(&quot;container&quot;).width()-i-2,l=d.$(&quot;container&quot;).height()-h-2;!isNaN(f)&amp;&amp;!isNaN(g)&amp;&amp;(f+=10,g-=30,f=Math.max(0,Math.min(k,f)),g=Math.max(0,Math.min(l,g)),c&lt;j&amp;&amp;(g=j),e.css({left:f,top:g}))},bind:function(b,c){if(Galleria.TOUCH)return;l.initialized||l.init();var e=function(){d.$(&quot;container&quot;).unbind(&quot;mousemove&quot;,l.move),d.clearTimer(l.timer),d.$(&quot;tooltip&quot;).stop().animate({opacity:0},200,function(){d.$(&quot;tooltip&quot;).hide(),d.addTimer(l.swapTimer,function(){l.open=!1},1e3)})},f=function(b,c){l.define(b,c),a(b).hover(function(){d.clearTimer(l.swapTimer),d.$(&quot;container&quot;).unbind(&quot;mousemove&quot;,l.move).bind(&quot;mousemove&quot;,l.move).trigger(&quot;mousemove&quot;),l.show(b),d.addTimer(l.timer,function(){d.$(&quot;tooltip&quot;).stop().show().animate({opacity:1}),l.open=!0},l.open?0:500)},e).click(e)};typeof c==&quot;string&quot;?f(b in d._dom?d.get(b):b,c):a.each(b,function(a,b){f(d.get(a),b)})},show:function(b){b=a(b in d._dom?d.get(b):b);var e=b.data(&quot;tt&quot;),f=function(a){c.setTimeout(function(a){return function(){l.move(a)}}(a),10),b.unbind(&quot;mouseup&quot;,f)};e=typeof e==&quot;function&quot;?e():e;if(!e)return;d.$(&quot;tooltip&quot;).html(e.replace(/\s/,&quot;Â &quot;)),b.bind(&quot;mouseup&quot;,f)},define:function(b,c){if(typeof c!=&quot;function&quot;){var e=c;c=function(){return e}}b=a(b in d._dom?d.get(b):b).data(&quot;tt&quot;,c),l.show(b)}},m=this._fullscreen={scrolled:0,crop:b,transition:b,active:!1,keymap:d._keyboard.map,parseCallback:function(b,c){return F.active?function(){typeof b==&quot;function&quot;&amp;&amp;b();var e=d._controls.getActive(),f=d._controls.getNext();d._scaleImage(f),d._scaleImage(e),c&amp;&amp;d._options.trueFullscreen&amp;&amp;a(e.container).add(f.container).trigger(&quot;transitionend&quot;)}:b},enter:function(a){a=m.parseCallback(a,!0),d._options.trueFullscreen&amp;&amp;x.support?x.enter(d,a):m._enter(a)},_enter:function(c){m.active=!0,E.hide(d.getActiveImage()),d.$(&quot;container&quot;).addClass(&quot;fullscreen&quot;),m.scrolled=f.scrollTop(),E.forceStyles(d.get(&quot;container&quot;),{position:&quot;fixed&quot;,top:0,left:0,width:&quot;100%&quot;,height:&quot;100%&quot;,zIndex:1e4});var e={height:&quot;100%&quot;,overflow:&quot;hidden&quot;,margin:0,padding:0},g=d.getData(),h=d._options;E.forceStyles(q().html,e),E.forceStyles(q().body,e),m.keymap=a.extend({},d._keyboard.map),d.attachKeyboard({escape:d.exitFullscreen,right:d.next,left:d.prev}),m.crop=h.imageCrop,h.fullscreenCrop!=b&amp;&amp;(h.imageCrop=h.fullscreenCrop);if(g&amp;&amp;g.big&amp;&amp;g.image!==g.big){var i=new Galleria.Picture,j=i.isCached(g.big),k=d.getIndex(),l=d._thumbnails[k];d.trigger({type:Galleria.LOADSTART,cached:j,rewind:!1,index:k,imageTarget:d.getActiveImage(),thumbTarget:l,galleriaData:g}),i.load(g.big,function(b){d._scaleImage(b,{complete:function(b){d.trigger({type:Galleria.LOADFINISH,cached:j,index:k,rewind:!1,imageTarget:b.image,thumbTarget:l});var c=d._controls.getActive().image;c&amp;&amp;a(c).width(b.image.width).height(b.image.height).attr(&quot;style&quot;,a(b.image).attr(&quot;style&quot;)).attr(&quot;src&quot;,b.image.src)}})})}d.rescale(function(){d.addTimer(!1,function(){E.show(d.getActiveImage()),typeof c==&quot;function&quot;&amp;&amp;c.call(d)},100),d.trigger(Galleria.FULLSCREEN_ENTER)}),f.resize(function(){m.scale()})},scale:function(){d.rescale()},exit:function(a){a=m.parseCallback(a),d._options.trueFullscreen&amp;&amp;x.support?x.exit(a):m._exit(a)},_exit:function(a){m.active=!1,E.hide(d.getActiveImage()),d.$(&quot;container&quot;).removeClass(&quot;fullscreen&quot;),E.revertStyles(d.get(&quot;container&quot;),q().html,q().body),c.scrollTo(0,m.scrolled),d.detachKeyboard(),d.attachKeyboard(m.keymap),d._options.imageCrop=m.crop;var b=d.getData().big,e=d._controls.getActive().image;!d.getData().iframe&amp;&amp;e&amp;&amp;b&amp;&amp;b==e.src&amp;&amp;c.setTimeout(function(a){return function(){e.src=a}}(d.getData().image),1),d.rescale(function(){d.addTimer(!1,function(){E.show(d.getActiveImage()),typeof a==&quot;function&quot;&amp;&amp;a.call(d),f.trigger(&quot;resize&quot;)},50),d.trigger(Galleria.FULLSCREEN_EXIT)}),f.unbind(&quot;resize&quot;,m.scale)}},n=this._idle={trunk:[],bound:!1,active:!1,add:function(b,c,d,e){if(!b)return;n.bound||n.addEvent(),b=a(b),typeof d==&quot;boolean&quot;&amp;&amp;(e=d,d={}),d=d||{};var f={},g;for(g in c)c.hasOwnProperty(g)&amp;&amp;(f[g]=b.css(g));b.data(&quot;idle&quot;,{from:a.extend(f,d),to:c,complete:!0,busy:!1}),e?b.css(c):n.addTimer(),n.trunk.push(b)},remove:function(b){b=a(b),a.each(n.trunk,function(a,c){c&amp;&amp;c.length&amp;&amp;!c.not(b).length&amp;&amp;(b.css(b.data(&quot;idle&quot;).from),n.trunk.splice(a,1))}),n.trunk.length||(n.removeEvent(),d.clearTimer(n.timer))},addEvent:function(){n.bound=!0,d.$(&quot;container&quot;).bind(&quot;mousemove click&quot;,n.showAll),d._options.idleMode==&quot;hover&quot;&amp;&amp;d.$(&quot;container&quot;).bind(&quot;mouseleave&quot;,n.hide)},removeEvent:function(){n.bound=!1,d.$(&quot;container&quot;).bind(&quot;mousemove click&quot;,n.showAll),d._options.idleMode==&quot;hover&quot;&amp;&amp;d.$(&quot;container&quot;).unbind(&quot;mouseleave&quot;,n.hide)},addTimer:function(){if(d._options.idleMode==&quot;hover&quot;)return;d.addTimer(&quot;idle&quot;,function(){n.hide()},d._options.idleTime)},hide:function(){if(!d._options.idleMode||d.getIndex()===!1||d.getData().iframe)return;d.trigger(Galleria.IDLE_ENTER);var b=n.trunk.length;a.each(n.trunk,function(a,c){var e=c.data(&quot;idle&quot;);if(!e)return;c.data(&quot;idle&quot;).complete=!1,E.animate(c,e.to,{duration:d._options.idleSpeed,complete:function(){a==b-1&amp;&amp;(n.active=!1)}})})},showAll:function(){d.clearTimer(&quot;idle&quot;),a.each(n.trunk,function(a,b){n.show(b)})},show:function(b){var c=b.data(&quot;idle&quot;);if(!n.active||!c.busy&amp;&amp;!c.complete)c.busy=!0,d.trigger(Galleria.IDLE_EXIT),d.clearTimer(&quot;idle&quot;),E.animate(b,c.from,{duration:d._options.idleSpeed/2,complete:function(){n.active=!0,a(b).data(&quot;idle&quot;).busy=!1,a(b).data(&quot;idle&quot;).complete=!0}});n.addTimer()}},o=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){d.trigger(Galleria.LIGHTBOX_OPEN);if(o.initialized)return;o.initialized=!0;var b=&quot;overlay box content shadow title info close prevholder prev nextholder next counter image&quot;,c={},e=d._options,f=&quot;&quot;,g=&quot;position:absolute;&quot;,h=&quot;lightbox-&quot;,i={overlay:&quot;position:fixed;display:none;opacity:&quot;+e.overlayOpacity+&quot;;filter:alpha(opacity=&quot;+e.overlayOpacity*100+&quot;);top:0;left:0;width:100%;height:100%;background:&quot;+e.overlayBackground+&quot;;z-index:99990&quot;,box:&quot;position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991&quot;,shadow:g+&quot;background:#000;width:100%;height:100%;&quot;,content:g+&quot;background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden&quot;,info:g+&quot;bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px&quot;,close:g+&quot;top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999&quot;,image:g+&quot;top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;&quot;,prevholder:g+&quot;width:50%;top:0;bottom:40px;cursor:pointer;&quot;,nextholder:g+&quot;width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;&quot;,prev:g+&quot;top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif&quot;,next:g+&quot;top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000&quot;,title:&quot;float:left&quot;,counter:&quot;float:right;margin-left:8px;&quot;},j=function(b){return b.hover(function(){a(this).css(&quot;color&quot;,&quot;#bbb&quot;)},function(){a(this).css(&quot;color&quot;,&quot;#444&quot;)})},k={};p&amp;&amp;p&gt;7&amp;&amp;(i.nextholder+=&quot;background:#000;filter:alpha(opacity=0);&quot;,i.prevholder+=&quot;background:#000;filter:alpha(opacity=0);&quot;),a.each(i,function(a,b){f+=&quot;.galleria-&quot;+h+a+&quot;{&quot;+b+&quot;}&quot;}),f+=&quot;.galleria-&quot;+h+&quot;box.iframe .galleria-&quot;+h+&quot;prevholder,&quot;+&quot;.galleria-&quot;+h+&quot;box.iframe .galleria-&quot;+h+&quot;nextholder{&quot;+&quot;width:100px;height:100px;top:50%;margin-top:-70px}&quot;,E.insertStyleTag(f),a.each(b.split(&quot; &quot;),function(a,b){d.addElement(&quot;lightbox-&quot;+b),c[b]=o.elems[b]=d.get(&quot;lightbox-&quot;+b)}),o.image=new Galleria.Picture,a.each({box:&quot;shadow content close prevholder nextholder&quot;,info:&quot;title counter&quot;,content:&quot;info image&quot;,prevholder:&quot;prev&quot;,nextholder:&quot;next&quot;},function(b,c){var d=[];a.each(c.split(&quot; &quot;),function(a,b){d.push(h+b)}),k[h+b]=d}),d.append(k),a(c.image).append(o.image.container),a(q().body).append(c.overlay,c.box),E.optimizeTouch(c.box),j(a(c.close).bind(&quot;click&quot;,o.hide).html(&quot;Ã&quot;)),a.each([&quot;Prev&quot;,&quot;Next&quot;],function(b,d){var e=a(c[d.toLowerCase()]).html(/v/.test(d)?&quot;â¹Â &quot;:&quot;Â âº&quot;),f=a(c[d.toLowerCase()+&quot;holder&quot;]);f.bind(&quot;click&quot;,function(){o[&quot;show&quot;+d]()});if(p&lt;8||Galleria.TOUCH){e.show();return}f.hover(function(){e.show()},function(a){e.stop().fadeOut(200)})}),a(c.overlay).bind(&quot;click&quot;,o.hide),Galleria.IPAD&amp;&amp;(d._options.lightboxTransitionSpeed=0)},rescale:function(b){var c=Math.min(f.width()-40,o.width),e=Math.min(f.height()-60,o.height),g=Math.min(c/o.width,e/o.height),h=Math.round(o.width*g)+40,i=Math.round(o.height*g)+60,j={width:h,height:i,&quot;margin-top&quot;:Math.ceil(i/2)*-1,&quot;margin-left&quot;:Math.ceil(h/2)*-1};b?a(o.elems.box).css(j):a(o.elems.box).animate(j,{duration:d._options.lightboxTransitionSpeed,easing:d._options.easing,complete:function(){var b=o.image,c=d._options.lightboxFadeSpeed;d.trigger({type:Galleria.LIGHTBOX_IMAGE,imageTarget:b.image}),a(b.container).show(),a(b.image).animate({opacity:1},c),E.show(o.elems.info,c)}})},hide:function(){o.image.image=null,f.unbind(&quot;resize&quot;,o.rescale),a(o.elems.box).hide(),E.hide(o.elems.info),d.detachKeyboard(),d.attachKeyboard(o.keymap),o.keymap=!1,E.hide(o.elems.overlay,200,function(){a(this).hide().css(&quot;opacity&quot;,d._options.overlayOpacity),d.trigger(Galleria.LIGHTBOX_CLOSE)})},showNext:function(){o.show(d.getNext(o.active))},showPrev:function(){o.show(d.getPrev(o.active))},show:function(b){o.active=b=typeof b==&quot;number&quot;?b:d.getIndex()||0,o.initialized||o.init(),o.keymap||(o.keymap=a.extend({},d._keyboard.map),d.attachKeyboard({escape:o.hide,right:o.showNext,left:o.showPrev})),f.unbind(&quot;resize&quot;,o.rescale);var e=d.getData(b),g=d.getDataLength(),h=d.getNext(b),i,j,k;E.hide(o.elems.info);try{for(k=d._options.preload;k&gt;0;k--)j=new Galleria.Picture,i=d.getData(h),j.preload(&quot;big&quot;in i?i.big:i.image),h=d.getNext(h)}catch(l){}o.image.isIframe=!!e.iframe,a(o.elems.box).toggleClass(&quot;iframe&quot;,!!e.iframe),o.image.load(e.iframe||e.big||e.image,function(d){o.width=d.isIframe?a(c).width():d.original.width,o.height=d.isIframe?a(c).height():d.original.height,a(d.image).css({width:d.isIframe?&quot;100%&quot;:&quot;100.1%&quot;,height:d.isIframe?&quot;100%&quot;:&quot;100.1%&quot;,top:0,zIndex:99998,opacity:0,visibility:&quot;visible&quot;}),o.elems.title.innerHTML=e.title||&quot;&quot;,o.elems.counter.innerHTML=b+1+&quot; / &quot;+g,f.resize(o.rescale),o.rescale()}),a(o.elems.overlay).show().css(&quot;visibility&quot;,&quot;visible&quot;),a(o.elems.box).show()}},r=this._timer={trunk:{},add:function(a,b,d,e){a=a||(new Date).getTime(),e=e||!1,this.clear(a);if(e){var f=b;b=function(){f(),r.add(a,b,d)}}this.trunk[a]=c.setTimeout(b,d)},clear:function(a){var b=function(a){c.clearTimeout(this.trunk[a]),delete this.trunk[a]},d;if(!!a&amp;&amp;a in this.trunk)b.call(this,a);else if(typeof a==&quot;undefined&quot;)for(d in this.trunk)this.trunk.hasOwnProperty(d)&amp;&amp;b.call(this,d)}};return this},Galleria.prototype={constructor:Galleria,init:function(c,d){var e=this;d=t(d),this._original={target:c,options:d,data:null},this._target=this._dom.target=c.nodeName?c:a(c).get(0),this._original.html=this._target.innerHTML,z.push(this);if(!this._target){Galleria.raise(&quot;Target not found&quot;,!0);return}return this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:&quot;auto&quot;,clicknext:!1,dailymotion:{foreground:&quot;%23EEEEEE&quot;,highlight:&quot;%235BCEC5&quot;,background:&quot;%23222222&quot;,logo:0,hideInfos:1},dataConfig:function(a){return{}},dataSelector:&quot;img&quot;,dataSort:!1,dataSource:this._target,debug:b,dummy:b,easing:&quot;galleria&quot;,extend:function(a){},fullscreenCrop:b,fullscreenDoubleTap:!0,fullscreenTransition:b,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:&quot;50%&quot;,imageTimeout:b,initialTransition:b,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:b,minScaleRatio:b,overlayOpacity:.85,overlayBackground:&quot;#0b0b0b&quot;,pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:!0,thumbCrop:!0,thumbEventType:&quot;click&quot;,thumbFit:!0,thumbMargin:0,thumbQuality:&quot;auto&quot;,thumbDisplayOrder:!0,thumbnails:!0,touchTransition:b,transition:&quot;fade&quot;,transitionInitial:b,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,vimeo:{title:0,byline:0,portrait:0,color:&quot;aaaaaa&quot;},wait:5e3,width:&quot;auto&quot;,youtube:{modestbranding:1,autohide:1,color:&quot;white&quot;,hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,d&amp;&amp;d.debug===!1&amp;&amp;(i=!1),d&amp;&amp;typeof d.imageTimeout==&quot;number&quot;&amp;&amp;(j=d.imageTimeout),d&amp;&amp;typeof d.dummy==&quot;string&quot;&amp;&amp;(k=d.dummy),a(this._target).children().hide(),typeof Galleria.theme==&quot;object&quot;?this._init():C.push(this),this},_init:function(){var b=this,e=this._options;if(this._initialized)return Galleria.raise(&quot;Init failed: Gallery instance already initialized.&quot;),this;this._initialized=!0;if(!Galleria.theme)return Galleria.raise(&quot;Init failed: No theme found.&quot;,!0),this;a.extend(!0,e,Galleria.theme.defaults,this._original.options,Galleria.configure.options),function(a){if(!(&quot;getContext&quot;in a)){a=null;return}B=B||{elem:a,context:a.getContext(&quot;2d&quot;),cache:{},length:0}}(d.createElement(&quot;canvas&quot;)),this.bind(Galleria.DATA,function(){Galleria.QUIRK&amp;&amp;Galleria.raise(&quot;Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML.&quot;),this._original.data=this._data,this.get(&quot;total&quot;).innerHTML=this.getDataLength();var a=this.$(&quot;container&quot;);b._options.height&lt;2&amp;&amp;(b._ratio=b._options.height);var d={width:0,height:0},e=function(){return b.$(&quot;stage&quot;).height()};E.wait({until:function(){return d=b._getWH(),a.width(d.width).height(d.height),e()&amp;&amp;d.width&amp;&amp;d.height&gt;50},success:function(){b._width=d.width,b._height=d.height,b._ratio=b._ratio||d.height/d.width,Galleria.WEBKIT?c.setTimeout(function(){b._run()},1):b._run()},error:function(){e()?Galleria.raise(&quot;Could not extract sufficient width/height of the gallery container. Traced measures: width:&quot;+d.width+&quot;px, height: &quot;+d.height+&quot;px.&quot;,!0):Galleria.raise(&quot;Could not extract a stage height from the CSS. Traced height: &quot;+e()+&quot;px.&quot;,!0)},timeout:typeof this._options.wait==&quot;number&quot;?this._options.wait:!1})}),this.append({&quot;info-text&quot;:[&quot;info-title&quot;,&quot;info-description&quot;],info:[&quot;info-text&quot;],&quot;image-nav&quot;:[&quot;image-nav-right&quot;,&quot;image-nav-left&quot;],stage:[&quot;images&quot;,&quot;loader&quot;,&quot;counter&quot;,&quot;image-nav&quot;],&quot;thumbnails-list&quot;:[&quot;thumbnails&quot;],&quot;thumbnails-container&quot;:[&quot;thumb-nav-left&quot;,&quot;thumbnails-list&quot;,&quot;thumb-nav-right&quot;],container:[&quot;stage&quot;,&quot;thumbnails-container&quot;,&quot;info&quot;,&quot;tooltip&quot;]}),E.hide(this.$(&quot;counter&quot;).append(this.get(&quot;current&quot;),d.createTextNode(&quot; / &quot;),this.get(&quot;total&quot;))),this.setCounter(&quot;â&quot;),E.hide(b.get(&quot;tooltip&quot;)),this.$(&quot;container&quot;).addClass(Galleria.TOUCH?&quot;touch&quot;:&quot;notouch&quot;),a.each(new Array(2),function(c){var d=new Galleria.Picture;a(d.container).css({position:&quot;absolute&quot;,top:0,left:0}).prepend(b._layers[c]=a(E.create(&quot;galleria-layer&quot;)).css({position:&quot;absolute&quot;,top:0,left:0,right:0,bottom:0,zIndex:2})[0]),b.$(&quot;images&quot;).append(d.container),b._controls[c]=d}),this.$(&quot;images&quot;).css({position:&quot;relative&quot;,top:0,left:0,width:&quot;100%&quot;,height:&quot;100%&quot;}),this.$(&quot;thumbnails, thumbnails-list&quot;).css({overflow:&quot;hidden&quot;,position:&quot;relative&quot;}),this.$(&quot;image-nav-right, image-nav-left&quot;).bind(&quot;click&quot;,function(a){e.clicknext&amp;&amp;a.stopPropagation(),e.pauseOnInteraction&amp;&amp;b.pause();var c=/right/.test(this.className)?&quot;next&quot;:&quot;prev&quot;;b[c]()}),a.each([&quot;info&quot;,&quot;counter&quot;,&quot;image-nav&quot;],function(a,c){e[&quot;show&quot;+c.substr(0,1).toUpperCase()+c.substr(1).replace(/-/,&quot;&quot;)]===!1&amp;&amp;E.moveOut(b.get(c.toLowerCase()))}),this.load(),!e.keepSource&amp;&amp;!p&amp;&amp;(this._target.innerHTML=&quot;&quot;),this.get(&quot;errors&quot;)&amp;&amp;this.appendChild(&quot;target&quot;,&quot;errors&quot;),this.appendChild(&quot;target&quot;,&quot;container&quot;);if(e.carousel){var g=0,h=e.show;this.bind(Galleria.THUMBNAIL,function(){this.updateCarousel(),++g==this.getDataLength()&amp;&amp;typeof h==&quot;number&quot;&amp;&amp;h&gt;0&amp;&amp;this._carousel.follow(h)})}return e.responsive&amp;&amp;f.bind(&quot;resize&quot;,function(){b.isFullscreen()||b.resize()}),e.swipe&amp;&amp;(function(a){var c=[0,0],d=[0,0],e=30,f=100,g=!1,h=0,i,j={start:&quot;touchstart&quot;,move:&quot;touchmove&quot;,stop:&quot;touchend&quot;},k=function(a){return a.originalEvent.touches?a.originalEvent.touches[0]:a},l=function(a){if(a.originalEvent.touches&amp;&amp;a.originalEvent.touches.length&gt;1)return;i=k(a),d=[i.pageX,i.pageY],c[0]||(c=d),Math.abs(c[0]-d[0])&gt;10&amp;&amp;a.preventDefault()},m=function(i){a.unbind(j.move,l);if(i.originalEvent.touches&amp;&amp;i.originalEvent.touches.length||g){g=!g;return}E.timestamp()-h&lt;1e3&amp;&amp;Math.abs(c[0]-d[0])&gt;e&amp;&amp;Math.abs(c[1]-d[1])&lt;f&amp;&amp;(i.preventDefault(),b[c[0]&gt;d[0]?&quot;next&quot;:&quot;prev&quot;]()),c=d=[0,0]};a.bind(j.start,function(b){if(b.originalEvent.touches&amp;&amp;b.originalEvent.touches.length&gt;1)return;i=k(b),h=E.timestamp(),c=d=[i.pageX,i.pageY],a.bind(j.move,l).one(j.stop,m)})}(b.$(&quot;images&quot;)),e.fullscreenDoubleTap&amp;&amp;this.$(&quot;stage&quot;).bind(&quot;touchstart&quot;,function(){var a,c,d,e,f,g,h=function(a){return a.originalEvent.touches?a.originalEvent.touches[0]:a};return function(i){g=Galleria.utils.timestamp(),c=h(i).pageX,d=h(i).pageY;if(g-a&lt;500&amp;&amp;c-e&lt;20&amp;&amp;d-f&lt;20){b.toggleFullscreen(),i.preventDefault(),b.$(&quot;stage&quot;).unbind(&quot;touchend&quot;,arguments.callee);return}a=g,e=c,f=d}}())),E.optimizeTouch(this.get(&quot;container&quot;)),a.each(Galleria.on.binds,function(c,d){a.inArray(d.hash,b._binds)==-1&amp;&amp;b.bind(d.type,d.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,E.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,E.array(arguments)),this},_getWH:function(){var b=this.$(&quot;container&quot;),c=this.$(&quot;target&quot;),d=this,e={},f;return a.each([&quot;width&quot;,&quot;height&quot;],function(a,g){d._options[g]&amp;&amp;typeof d._options[g]==&quot;number&quot;?e[g]=d._options[g]:(f=[E.parseValue(b.css(g)),E.parseValue(c.css(g)),b[g](),c[g]()],d[&quot;_&quot;+g]||f.splice(f.length,E.parseValue(b.css(&quot;min-&quot;+g)),E.parseValue(c.css(&quot;min-&quot;+g))),e[g]=Math.max.apply(Math,f))}),d._ratio&amp;&amp;(e.height=e.width*d._ratio),e},_createThumbnails:function(b){this.get(&quot;total&quot;).innerHTML=this.getDataLength();var e,f,g,h,i,j=this,k=this
</S></PRE>
._options,l=b?this._data.length-b.length:0,m=l,n=[],o=0,q=p&lt;8?&quot;&quot;:&quot;data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D&quot;,r=function(){var a=j.$(&quot;thumbnails&quot;).find(&quot;.active&quot;);return a.length?a.find(&quot;img&quot;).attr(&quot;src&quot;):!1}(),s=typeof k.thumbnails==&quot;string&quot;?k.thumbnails.toLowerCase():null,t=function(a){return d.defaultView&amp;&amp;d.defaultView.getComputedStyle?d.defaultView.getComputedStyle(f.container,null)[a]:i.css(a)},u=function(b,c,d){return function(){a(d).append(b),j.trigger({type:Galleria.THUMBNAIL,thumbTarget:b,index:c,galleriaData:j.getData(c)})}},w=function(b){k.pauseOnInteraction&amp;&amp;j.pause();var c=a(b.currentTarget).data(&quot;index&quot;);j.getIndex()!==c&amp;&amp;j.show(c),b.preventDefault()},x=function(b,c){a(b.container).css(&quot;visibility&quot;,&quot;visible&quot;),j.trigger({type:Galleria.THUMBNAIL,thumbTarget:b.image,index:b.data.order,galleriaData:j.getData(b.data.order)}),typeof c==&quot;function&quot;&amp;&amp;c.call(j,b)},y=function(b,c){b.scale({width:b.data.width,height:b.data.height,crop:k.thumbCrop,margin:k.thumbMargin,canvas:k.useCanvas,complete:function(b){var d=[&quot;left&quot;,&quot;top&quot;],e=[&quot;Width&quot;,&quot;Height&quot;],f,g,h=j.getData(b.index),i=h.thumb.split(&quot;:&quot;);a.each(e,function(c,e){f=e.toLowerCase(),(k.thumbCrop!==!0||k.thumbCrop===f)&amp;&amp;k.thumbFit&amp;&amp;(g={},g[f]=b[f],a(b.container).css(g),g={},g[d[c]]=0,a(b.image).css(g)),b[&quot;outer&quot;+e]=a(b.container)[&quot;outer&quot;+e](!0)}),E.toggleQuality(b.image,k.thumbQuality===!0||k.thumbQuality===&quot;auto&quot;&amp;&amp;b.original.width<B>e._thumbnails.length-1)return;var h=e._thumbnails[f],i=h.data,j=i.src.split(&quot;:&quot;),k=function(){++g==d.length&amp;&amp;typeof c==&quot;function&quot;&amp;&amp;c.call(e)},l=a(h.container).data(&quot;thumbload&quot;);h.video?l.call(e,h,k):h.load(i.src,function(a){l.call(e,a,k)})}),this},lazyLoadChunks:function(a,b){var d=this.getDataLength(),e=0,f=0,g=[],h=[],i=this;b=b||0;for(;e&lt;d;e++){h.push(e);if(++f==a||e==d-1)g.push(h),f=0,h=[]}var j=function(a){var d=g.shift();d&amp;&amp;c.setTimeout(function(){i.lazyLoad(d,function(){j(!0)})},b&amp;&amp;a?b:0)};return j(!1),this},_run:function(){var d=this;d._createThumbnails(),E.wait({timeout:1e4,until:function(){return Galleria.OPERA&amp;&amp;d.$(&quot;stage&quot;).css(&quot;display&quot;,&quot;inline-block&quot;),d._stageWidth=d.$(&quot;stage&quot;).width(),d._stageHeight=d.$(&quot;stage&quot;).height(),d._stageWidth&amp;&amp;d._stageHeight&gt;50},success:function(){y.push(d),E.show(d.get(&quot;counter&quot;)),d._options.carousel&amp;&amp;d._carousel.bindControls(),d._options.autoplay&amp;&amp;(d.pause(),typeof d._options.autoplay==&quot;number&quot;&amp;&amp;(d._playtime=d._options.autoplay),d._playing=!0);if(d._firstrun){d._options.autoplay&amp;&amp;d.trigger(Galleria.PLAY),typeof d._options.show==&quot;number&quot;&amp;&amp;d.show(d._options.show);return}d._firstrun=!0,Galleria.History&amp;&amp;Galleria.History.change(function(a){isNaN(a)?c.history.go(-1):d.show(a,b,!0)}),d.trigger(Galleria.READY),Galleria.theme.init.call(d,d._options),a.each(Galleria.ready.callbacks,function(a,b){typeof b==&quot;function&quot;&amp;&amp;b.call(d,d._options)}),d._options.extend.call(d,d._options),/^[0-9]{1,4}$/.test(m)&amp;&amp;Galleria.History?d.show(m,b,!0):d._data[d._options.show]&amp;&amp;d.show(d._options.show),d._options.autoplay&amp;&amp;d.trigger(Galleria.PLAY)},error:function(){Galleria.raise(&quot;Stage width or height is too small to show the gallery. Traced measures: width:&quot;+d._stageWidth+&quot;px, height: &quot;+d._stageHeight+&quot;px.&quot;,!0)}})},load:function(b,c,d){var e=this,f=this._options;return this._data=[],this._thumbnails=[],this.$(&quot;thumbnails&quot;).empty(),typeof c==&quot;function&quot;&amp;&amp;(d=c,c=null),b=b||f.dataSource,c=c||f.dataSelector,d=d||f.dataConfig,/^function Object/.test(b.constructor)&amp;&amp;(b=[b]),b.constructor===Array?this.validate(b)?this._data=b:Galleria.raise(&quot;Load failed: JSON Array not valid.&quot;):(c+=&quot;,.video,.iframe&quot;,a(b).find(c).each(function(b,c){c=a(c);var f={},g=c.parent(),h=g.attr(&quot;href&quot;),i=g.attr(&quot;rel&quot;);h&amp;&amp;(c[0].nodeName==&quot;IMG&quot;||c.hasClass(&quot;video&quot;))&amp;&amp;w(h)?f.video=h:h&amp;&amp;c.hasClass(&quot;iframe&quot;)?f.iframe=h:f.image=f.big=h,i&amp;&amp;(f.big=i),a.each(&quot;big title description link layer&quot;.split(&quot; &quot;),function(a,b){c.data(b)&amp;&amp;(f[b]=c.data(b))}),e._data.push(a.extend({title:c.attr(&quot;title&quot;)||&quot;&quot;,thumb:c.attr(&quot;src&quot;),image:c.attr(&quot;src&quot;),big:c.attr(&quot;src&quot;),description:c.attr(&quot;alt&quot;)||&quot;&quot;,link:c.attr(&quot;longdesc&quot;),original:c.get(0)},f,d(c)))})),typeof f.dataSort==&quot;function&quot;?g.sort.call(this._data,f.dataSort):f.dataSort==&quot;random&quot;&amp;&amp;this._data.sort(function(){return Math.round(Math.random())-.5}),this.getDataLength()&amp;&amp;this._parseData().trigger(Galleria.DATA),this},_parseData:function(){var b=this,c;return a.each(this._data,function(d,e){c=b._data[d],&quot;thumb&quot;in e==0&amp;&amp;(c.thumb=e.image),!1 in e&amp;&amp;(c.big=e.image);if(&quot;video&quot;in e){var f=w(e.video);if(f){c.iframe=v[f.provider].embed(f.id)+function(){if(typeof b._options[f.provider]==&quot;object&quot;){var c=&quot;?&quot;,d=[];return a.each(b._options[f.provider],function(a,b){d.push(a+&quot;=&quot;+b)}),f.provider==&quot;youtube&quot;&amp;&amp;(d=[&quot;wmode=opaque&quot;].concat(d)),c+d.join(&quot;&amp;&quot;)}return&quot;&quot;}(),delete c.video;if(!(&quot;thumb&quot;in c)||!c.thumb)c.thumb=f.provider+&quot;:&quot;+f.id}}}),this},destroy:function(){return this.get(&quot;target&quot;).innerHTML=this._original.html,this.clearTimer(),this},splice:function(){var a=this,b=E.array(arguments);return c.setTimeout(function(){g.splice.apply(a._data,b),a._parseData()._createThumbnails()},2),a},push:function(){var a=this,b=E.array(arguments);return b.length==1&amp;&amp;b[0].constructor==Array&amp;&amp;(b=b[0]),c.setTimeout(function(){g.push.apply(a._data,b),a._parseData()._createThumbnails(b)},2),a},_getActive:function(){return this._controls.getActive()},validate:function(a){return!0},bind:function(a,b){return a=u(a),this.$(&quot;container&quot;).bind(a,this.proxy(b)),this},unbind:function(a){return a=u(a),this.$(&quot;container&quot;).unbind(a),this},trigger:function(b){return b=typeof b==&quot;object&quot;?a.extend(b,{scope:this}):{type:u(b),scope:this},this.$(&quot;container&quot;).trigger(b),this},addIdleState:function(a,b,c,d){return this._idle.add.apply(this._idle,E.array(arguments)),this},removeIdleState:function(a){return this._idle.remove.apply(this._idle,E.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(a){return this._fullscreen.enter.apply(this,E.array(arguments)),this},exitFullscreen:function(a){return this._fullscreen.exit.apply(this,E.array(arguments)),this},toggleFullscreen:function(a){return this._fullscreen[this.isFullscreen()?&quot;exit&quot;:&quot;enter&quot;].apply(this,E.array(arguments)),this},bindTooltip:function(a,b){return this._tooltip.bind.apply(this._tooltip,E.array(arguments)),this},defineTooltip:function(a,b){return this._tooltip.define.apply(this._tooltip,E.array(arguments)),this},refreshTooltip:function(a){return this._tooltip.show.apply(this._tooltip,E.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,E.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,E.array(arguments)),this},getActiveImage:function(){return this._getActive().image||b},getActiveThumb:function(){return this._thumbnails[this._active].image||b},getMousePosition:function(a){return{x:a.pageX-this.$(&quot;container&quot;).offset().left,y:a.pageY-this.$(&quot;container&quot;).offset().top}},addPan:function(b){if(this._options.imageCrop===!1)return;b=a(b||this.getActiveImage());var c=this,d=b.width()/2,e=b.height()/2,f=parseInt(b.css(&quot;left&quot;),10),g=parseInt(b.css(&quot;top&quot;),10),h=f||0,i=g||0,j=0,k=0,l=!1,m=E.timestamp(),n=0,o=0,q=function(a,c,d){if(a&gt;0){o=Math.round(Math.max(a*-1,Math.min(0,c)));if(n!==o){n=o;if(p===8)b.parent()[&quot;scroll&quot;+d](o*-1);else{var e={};e[d.toLowerCase()]=o,b.css(e)}}}},r=function(a){if(E.timestamp()-m&lt;50)return;l=!0,d=c.getMousePosition(a).x,e=c.getMousePosition(a).y},s=function(a){if(!l)return;j=b.width()-c._stageWidth,k=b.height()-c._stageHeight,f=d/c._stageWidth*j*-1,g=e/c._stageHeight*k*-1,h+=(f-h)/c._options.imagePanSmoothness,i+=(g-i)/c._options.imagePanSmoothness,q(k,i,&quot;Top&quot;),q(j,h,&quot;Left&quot;)};return p===8&amp;&amp;(b.parent().scrollTop(i*-1).scrollLeft(h*-1),b.css({top:0,left:0})),this.$(&quot;stage&quot;).unbind(&quot;mousemove&quot;,r).bind(&quot;mousemove&quot;,r),this.addTimer(&quot;pan&quot;+c._id,s,50,!0),this},proxy:function(a,b){return typeof a!=&quot;function&quot;?n:(b=b||this,function(){return a.apply(b,E.array(arguments))})},removePan:function(){return this.$(&quot;stage&quot;).unbind(&quot;mousemove&quot;),this.clearTimer(&quot;pan&quot;+this._id),this},addElement:function(b){var c=this._dom;return a.each(E.array(arguments),function(a,b){c[b]=E.create(&quot;galleria-&quot;+b)}),this},attachKeyboard:function(a){return this._keyboard.attach.apply(this._keyboard,E.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,E.array(arguments)),this},appendChild:function(a,b){return this.$(a).append(this.get(b)||b),this},prependChild:function(a,b){return this.$(a).prepend(this.get(b)||b),this},remove:function(a){return this.$(E.array(arguments).join(&quot;,&quot;)).remove(),this},append:function(a){var b,c;for(b in a)if(a.hasOwnProperty(b))if(a[b].constructor===Array)for(c=0;a[b][c];c++)this.appendChild(b,a[b][c]);else this.appendChild(b,a[b]);return this},_scaleImage:function(b,c){b=b||this._controls.getActive();if(!b)return;var d=this,e,f=function(b){a(b.container).children(&quot;:first&quot;).css({top:Math.max(0,E.parseValue(b.image.style.top)),left:Math.max(0,E.parseValue(b.image.style.left)),width:E.parseValue(b.image.width),height:E.parseValue(b.image.height)})};return c=a.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition},c),this._options.layerFollow&amp;&amp;this._options.imageCrop!==!0?typeof c.complete==&quot;function&quot;?(e=c.complete,c.complete=function(){e.call(b,b),f(b)}):c.complete=f:a(b.container).children(&quot;:first&quot;).css({top:0,left:0}),b.scale(c),this},updateCarousel:function(){return this._carousel.update(),this},resize:function(c,d){typeof c==&quot;function&quot;&amp;&amp;(d=c,c=b),c=a.extend({width:0,height:0},c);var e=this,f=this.$(&quot;container&quot;);return a.each(c,function(a,b){b||(f[a](&quot;auto&quot;),c[a]=e._getWH()[a])}),a.each(c,function(a,b){f[a](b)}),this.rescale(d)},rescale:function(a,c,d){var e=this;typeof a==&quot;function&quot;&amp;&amp;(d=a,a=b);var f=function(){e._stageWidth=a||e.$(&quot;stage&quot;).width(),e._stageHeight=c||e.$(&quot;stage&quot;).height(),e._scaleImage(),e._options.carousel&amp;&amp;e.updateCarousel(),e.trigger(Galleria.RESCALE),typeof d==&quot;function&quot;&amp;&amp;d.call(e)};return f.call(e),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&amp;&amp;this.addPan(),this},show:function(a,b,c){if(a===!1||!this._options.queue&amp;&amp;this._queue.stalled)return;a=Math.max(0,Math.min(parseInt(a,10),this.getDataLength()-1)),b=typeof b!=&quot;undefined&quot;?!!b:a&lt;this.getIndex(),c=c||!1;if(!c&amp;&amp;Galleria.History){Galleria.History.set(a.toString());return}return this._active=a,g.push.call(this._queue,{index:a,rewind:b}),this._queue.stalled||this._show(),this},_show:function(){var d=this,e=this._queue[0],f=this.getData(e.index);if(!f)return;var h=f.iframe||(this.isFullscreen()&amp;&amp;&quot;big&quot;in f?f.big:f.image),i=this._controls.getActive(),j=this._controls.getNext(),k=j.isCached(h),l=this._thumbnails[e.index],m=function(){a(j.image).trigger(&quot;mouseup&quot;)},n=function(b,e,f,h,i){return function(){var j;F.active=!1,d._queue.stalled=!1,E.toggleQuality(e.image,d._options.imageQuality),d._layers[d._controls.active].innerHTML=&quot;&quot;,a(f.container).css({zIndex:0,opacity:0}).show(),f.isIframe&amp;&amp;a(f.container).find(&quot;iframe&quot;).remove(),d.$(&quot;container&quot;).toggleClass(&quot;iframe&quot;,!!b.iframe),a(e.container).css({zIndex:1,left:0,top:0}).show(),d._controls.swap(),d._options.imagePan&amp;&amp;d.addPan(e.image),(b.link||d._options.lightbox||d._options.clicknext)&amp;&amp;a(e.image).css({cursor:&quot;pointer&quot;}).bind(&quot;mouseup&quot;,function(){if(d._options.clicknext&amp;&amp;!Galleria.TOUCH){d._options.pauseOnInteraction&amp;&amp;d.pause(),d.next();return}if(b.link){d._options.popupLinks?j=c.open(b.link,&quot;_blank&quot;):c.location.href=b.link;return}d._options.lightbox&amp;&amp;d.openLightbox()}),g.shift.call(d._queue),d._queue.length&amp;&amp;d._show(),d._playCheck(),d.trigger({type:Galleria.IMAGE,index:h.index,imageTarget:e.image,thumbTarget:i.image,galleriaData:b})}}(f,j,i,e,l);this._options.carousel&amp;&amp;this._options.carouselFollow&amp;&amp;this._carousel.follow(e.index);if(this._options.preload){var o,p,q=this.getNext(),r;try{for(p=this._options.preload;p&gt;0;p--)o=new Galleria.Picture,r=d.getData(q),o.preload(this.isFullscreen()&amp;&amp;&quot;big&quot;in r?r.big:r.image),q=d.getNext(q)}catch(s){}}E.show(j.container),j.isIframe=!!f.iframe,a(d._thumbnails[e.index].container).addClass(&quot;active&quot;).siblings(&quot;.active&quot;).removeClass(&quot;active&quot;),d.trigger({type:Galleria.LOADSTART,cached:k,index:e.index,rewind:e.rewind,imageTarget:j.image,thumbTarget:l.image,galleriaData:f}),j.load(h,function(c){var g=a(d._layers[1-d._controls.active]).html(f.layer||&quot;&quot;).hide();d._scaleImage(c,{complete:function(c){&quot;image&quot;in i&amp;&amp;E.toggleQuality(i.image,!1),E.toggleQuality(c.image,!1),d._queue.stalled=!0,d.removePan(),d.setInfo(e.index),d.setCounter(e.index),f.layer&amp;&amp;(g.show(),(f.link||d._options.lightbox||d._options.clicknext)&amp;&amp;g.css(&quot;cursor&quot;,&quot;pointer&quot;).unbind(&quot;mouseup&quot;).mouseup(m)),d.trigger({type:Galleria.LOADFINISH,cached:k,index:e.index,rewind:e.rewind,imageTarget:c.image,thumbTarget:d._thumbnails[e.index].image,galleriaData:d.getData(e.index)});var h=d._options.transition;a.each({initial:i.image===null,touch:Galleria.TOUCH,fullscreen:d.isFullscreen()},function(a,c){if(c&amp;&amp;d._options[a+&quot;Transition&quot;]!==b)return h=d._options[a+&quot;Transition&quot;],!1});if(h in F.effects==0)n();else{var j={prev:i.container,next:c.container,rewind:e.rewind,speed:d._options.transitionSpeed||400};F.active=!0,F.init.call(d,h,j,n)}}})})},getNext:function(a){return a=typeof a==&quot;number&quot;?a:this.getIndex(),a===this.getDataLength()-1?0:a+1},getPrev:function(a){return a=typeof a==&quot;number&quot;?a:this.getIndex(),a===0?this.getDataLength()-1:a-1},next:function(){return this.getDataLength()&gt;1&amp;&amp;this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()&gt;1&amp;&amp;this.show(this.getPrev(),!0),this},get:function(a){return a in this._dom?this._dom[a]:null},getData:function(a){return a in this._data?this._data[a]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return typeof this._active==&quot;number&quot;?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(a){return typeof a==&quot;undefined&quot;?this._options:this._options[a]},setOptions:function(b,c){return typeof b==&quot;object&quot;?a.extend(this._options,b):this._options[b]=c,this},play:function(a){return this._playing=!0,this._playtime=a||this._playtime,this._playCheck(),this.trigger(Galleria.PLAY),this},pause:function(){return this._playing=!1,this.trigger(Galleria.PAUSE),this},playToggle:function(a){return this._playing?this.pause():this.play(a)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var a=this,b=0,c=20,d=E.timestamp(),e=&quot;play&quot;+this._id;if(this._playing){this.clearTimer(e);var f=function(){b=E.timestamp()-d;if(b&gt;=a._playtime&amp;&amp;a._playing){a.clearTimer(e),a.next();return}a._playing&amp;&amp;(a.trigger({type:Galleria.PROGRESS,percent:Math.ceil(b/a._playtime*100),seconds:Math.floor(b/1e3),milliseconds:b}),a.addTimer(e,f,c))};a.addTimer(e,f,c)}},setPlaytime:function(a){return this._playtime=a,this},setIndex:function(a){return this._active=a,this},setCounter:function(a){typeof a==&quot;number&quot;?a++:typeof a==&quot;undefined&quot;&amp;&amp;(a=this.getIndex()+1),this.get(&quot;current&quot;).innerHTML=a;if(p){var b=this.$(&quot;counter&quot;),c=b.css(&quot;opacity&quot;);parseInt(c,10)===1?E.removeAlpha(b[0]):this.$(&quot;counter&quot;).css(&quot;opacity&quot;,c)}return this},setInfo:function(b){var c=this,d=this.getData(b);return a.each([&quot;title&quot;,&quot;description&quot;],function(a,b){var e=c.$(&quot;info-&quot;+b);d[b]?e[d[b].length?&quot;show&quot;:&quot;hide&quot;]().html(d[b]):e.empty().hide()}),this},hasInfo:function(a){var b=&quot;title description&quot;.split(&quot; &quot;),c;for(c=0;b[c];c++)if(!!this.getData(a)[b[c]])return!0;return!1},jQuery:function(b){var c=this,d=[];a.each(b.split(&quot;,&quot;),function(b,e){e=a.trim(e),c.get(e)&amp;&amp;d.push(e)});var e=a(c.get(d.shift()));return a.each(d,function(a,b){e=e.add(c.get(b))}),e},$:function(a){return this.jQuery.apply(this,E.array(arguments))}},a.each(s,function(a,b){var c=/_/.test(b)?b.replace(/_/g,&quot;&quot;):b;Galleria[b.toUpperCase()]=&quot;galleria.&quot;+c}),a.extend(Galleria,{IE9:p===9,IE8:p===8,IE7:p===7,IE6:p===6,IE:p,WEBKIT:/webkit/.test(l),CHROME:/chrome/.test(l),SAFARI:/safari/.test(l)&amp;&amp;!/chrome/.test(l),QUIRK:p&amp;&amp;d.compatMode&amp;&amp;d.compatMode===&quot;BackCompat&quot;,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!c.opera,IPHONE:/iphone/.test(l),IPAD:/ipad/.test(l),ANDROID:/android/.test(l),TOUCH:&quot;ontouchstart&quot;in d}),Galleria.addTheme=function(b){b.name||Galleria.raise(&quot;No theme name specified&quot;),typeof b.defaults!=&quot;object&quot;?b.defaults={}:b.defaults=t(b.defaults);var d=!1,e;return typeof b.css==&quot;string&quot;?(a(&quot;link&quot;).each(function(a,c){e=new RegExp(b.css);if(e.test(c.href))return d=!0,D(b),!1}),d||a(&quot;script&quot;).each(function(a,f){e=new RegExp(&quot;galleria\\.&quot;+b.name.toLowerCase()+&quot;\\.&quot;),e.test(f.src)&amp;&amp;(d=f.src.replace(/[^\/]*$/,&quot;&quot;)+b.css,c.setTimeout(function(){E.loadCSS(d,&quot;galleria-theme&quot;,function(){D(b)})},1))}),d||Galleria.raise(&quot;No theme CSS loaded&quot;)):D(b),b},Galleria.loadTheme=function(d,e){var f=!1,g=y.length,h=c.setTimeout(function(){Galleria.raise(&quot;Theme at &quot;+d+&quot; could not load, check theme path.&quot;,!0)},5e3);return Galleria.theme=b,E.loadScript(d,function(){c.clearTimeout(h);if(g){var b=[];a.each(Galleria.get(),function(c,d){var f=a.extend(d._original.options,{data_source:d._data},e);d.$(&quot;container&quot;).remove();var g=new Galleria;g._id=d._id,g.init(d._original.target,f),b.push(g)}),y=b}}),Galleria},Galleria.get=function(a){if(!!z[a])return z[a];if(typeof a!=&quot;number&quot;)return z;Galleria.raise(&quot;Gallery index &quot;+a+&quot; not found&quot;)},Galleria.configure=function(b,c){var d={};return typeof b==&quot;string&quot;&amp;&amp;c?(d[b]=c,b=d):a.extend(d,b),Galleria.configure.options=d,a.each(Galleria.get(),function(a,b){b.setOptions(d)}),Galleria},Galleria.configure.options={},Galleria.on=function(b,c){if(!b)return;c=c||n;var d=b+c.toString().replace(/\s/g,&quot;&quot;)+E.timestamp();return a.each(Galleria.get(),function(a,e){e._binds.push(d),e.bind(b,c)}),Galleria.on.binds.push({type:b,callback:c,hash:d}),Galleria},Galleria.on.binds=[],Galleria.run=function(b,c){return a(b||&quot;#galleria&quot;).galleria(c),Galleria},Galleria.addTransition=function(a,b){return F.effects[a]=b,Galleria},Galleria.utils=E,Galleria.log=function(){var b=E.array(arguments);if(!(&quot;console&quot;in c&amp;&amp;&quot;log&quot;in c.console))return c.alert(b.join(&quot;&quot;));try{return c.console.log.apply(c.console,b)}catch(d){a.each(b,function(){c.console.log(this)})}},Galleria.ready=function(b){return typeof b!=&quot;function&quot;?Galleria:(a.each(y,function(a,c){b.call(c,c._options)}),Galleria.ready.callbacks.push(b),Galleria)},Galleria.ready.callbacks=[],Galleria.raise=function(b,c){var d=c?&quot;Fatal error&quot;:&quot;Error&quot;,e=this,f={color:&quot;#fff&quot;,position:&quot;absolute&quot;,top:0,left:0,zIndex:1e5},g=function(b){var e='<DIV>'+(c?&quot;<STRONG>&quot;+d+&quot;: </STRONG>&quot;:&quot;&quot;)+b+&quot;</DIV>&quot;;a.each(z,function(){var a=this.$(&quot;errors&quot;),b=this.$(&quot;target&quot;);a.length||(b.css(&quot;position&quot;,&quot;relative&quot;),a=this.addElement(&quot;errors&quot;).appendChild(&quot;target&quot;,&quot;errors&quot;).$(&quot;errors&quot;).css(f)),a.append(e)}),z.length||a(&quot;<DIV>&quot;).css(a.extend(f,{position:&quot;fixed&quot;})).append(e).appendTo(q().body)};if(i){g(b);if(c)throw new Error(d+&quot;: &quot;+b)}else if(c){if(A)return;A=!0,c=!1,g(&quot;Gallery could not load.&quot;)}},Galleria.version=h,Galleria.requires=function(a,b){return b=b||&quot;You need to upgrade Galleria to version &quot;+a+&quot; to use one or more components.&quot;,Galleria.version&lt;a&amp;&amp;Galleria.raise(b,!0),Galleria},Galleria.Picture=function(b){this.id=b||null,this.image=null,this.container=E.create(&quot;galleria-image&quot;),a(this.container).css({overflow:&quot;hidden&quot;,position:&quot;relative&quot;}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},Galleria.Picture.prototype={cache:{},show:function(){E.show(this.image)},hide:function(){E.moveOut(this.image)},clear:function(){this.image=null},isCached:function(a){return!!this.cache[a]},preload:function(b){a(new Image).load(function(a,b){return function(){b[a]=a}}(b,this.cache)).attr(&quot;src&quot;,b)},load:function(b,d,e){typeof d==&quot;function&quot;&amp;&amp;(e=d,d=null);if(this.isIframe){var f=&quot;if&quot;+(new Date).getTime();return this.image=a(&quot;&lt;iframe&gt;&quot;,{src:b,frameborder:0,id:f,allowfullscreen:!0,css:{visibility:&quot;hidden&quot;}})[0],a(this.container).find(&quot;iframe,img&quot;).remove(),this.container.appendChild(this.image),a(&quot;#&quot;+f).load(function(b,d){return function(){c.setTimeout(function(){a(b.image).css(&quot;visibility&quot;,&quot;visible&quot;),typeof d==&quot;function&quot;&amp;&amp;d.call(b,b)},10)}}(this,e)),this.container}this.image=new Image;var g=0,h=!1,i=!1,j=a(this.container),l=a(this.image),m=function(){h?k?a(this).attr(&quot;src&quot;,k):Galleria.raise(&quot;Image not found: &quot;+b):(h=!0,c.setTimeout(function(a,b){return function(){a.attr(&quot;src&quot;,b+&quot;?&quot;+E.timestamp())}}(a(this),b),50))},n=function(b,e,f){return function(){var g=function(){a(this).unbind(&quot;load&quot;),b.original=d||{height:this.height,width:this.width},b.container.appendChild(this),b.cache[f]=f,typeof e==&quot;function&quot;&amp;&amp;c.setTimeout(function(){e.call(b,b)},1)};!this.width||!this.height?c.setTimeout(function(b){return function(){b.width&amp;&amp;b.height?g.call(b):i?Galleria.raise(&quot;Could not extract width/height from image: &quot;+b.src+&quot;. Traced measures: width:&quot;+b.width+&quot;px, height: &quot;+b.height+&quot;px.&quot;):(a(new Image).load(n).attr(&quot;src&quot;,b.src),i=!0)}}(this),2):g.call(this)}}(this,e,b);return j.find(&quot;iframe,img&quot;).remove(),l.css(&quot;display&quot;,&quot;block&quot;),E.hide(this.image),a.each(&quot;minWidth minHeight maxWidth maxHeight&quot;.split(&quot; &quot;),function(a,b){l.css(b,/min/.test(b)?&quot;0&quot;:&quot;none&quot;)}),l.load(n).error(m).attr(&quot;src&quot;,b),this.container},scale:function(c){var d=this;c=a.extend({width:0,height:0,min:b,max:b,margin:0,complete:n,position:&quot;center&quot;,crop:!1,canvas:!1},c);if(this.isIframe){a(this.image).width(c.width).height(c.height).removeAttr(&quot;width&quot;).removeAttr(&quot;height&quot;),a(this.container).width(c.width).height(c.height),c.complete.call(d,d);try{this.image.contentWindow&amp;&amp;a(this.image.contentWindow).trigger(&quot;resize&quot;)}catch(e){}return this.container}if(!this.image)return this.container;var f,g,h=a(d.container),i;return E.wait({until:function(){return f=c.width||h.width()||E.parseValue(h.css(&quot;width&quot;)),g=c.height||h.height()||E.parseValue(h.css(&quot;height&quot;)),f&amp;&amp;g},success:function(){var b=(f-c.margin*2)/d.original.width,e=(g-c.margin*2)/d.original.height,h=Math.min(b,e),j=Math.max(b,e),k={&quot;true&quot;:j,width:b,height:e,&quot;false&quot;:h,landscape:d.original.width&gt;d.original.height?j:h,portrait:d.original.width&lt;d.original.height?j:h},l=k[c.crop.toString()],m=&quot;&quot;;c.max&amp;&amp;(l=Math.min(c.max,l)),c.min&amp;&amp;(l=Math.max(c.min,l)),a.each([&quot;width&quot;,&quot;height&quot;],function(b,c){a(d.image)[c](d[c]=d.image[c]=Math.round(d.original[c]*l))}),a(d.container).width(f).height(g),c.canvas&amp;&amp;B&amp;&amp;(B.elem.width=d.width,B.elem.height=d.height,m=d.image.src+&quot;:&quot;+d.width+&quot;x&quot;+d.height,d.image.src=B.cache[m]||function(a){B.context.drawImage(d.image,0,0,d.original.width*l,d.original.height*l);try{return i=B.elem.toDataURL(),B.length+=i.length,B.cache[a]=i,i}catch(b){return d.image.src}}(m));var n={},o={},p=function(b,c,e){var f=0;if(/\%/.test(b)){var g=parseInt(b,10)/100,h=d.image[c]||a(d.image)[c]();f=Math.ceil(h*-1*g+e*g)}else f=E.parseValue(b);return f},q={top:{top:0},left:{left:0},right:{left:&quot;100%&quot;},bottom:{top:&quot;100%&quot;}};a.each(c.position.toLowerCase().split(&quot; &quot;),function(a,b){b===&quot;center&quot;&amp;&amp;(b=&quot;50%&quot;),n[a?&quot;top&quot;:&quot;left&quot;]=b}),a.each(n,function(b,c){q.hasOwnProperty(c)&amp;&amp;a.extend(o,q[c])}),n=n.top?a.extend(n,o):o,n=a.extend({top:&quot;50%&quot;,left:&quot;50%&quot;},n),a(d.image).css({position:&quot;absolute&quot;,top:p(n.top,&quot;height&quot;,g),left:p(n.left,&quot;width&quot;,f)}),d.show(),d.ready=!0,c.complete.call(d,d)},error:function(){Galleria.raise(&quot;Could not scale image: &quot;+d.image.src)},timeout:1e3}),this}},a.extend(a.easing,{galleria:function(a,b,c,d,e){return(b/=e/2)&lt;1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},galleriaIn:function(a,b,c,d,e){return d*(b/=e)*b+c},galleriaOut:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}}),a.fn.galleria=function(b){var c=this.selector;return a(this).length?this.each(function(){a.data(this,&quot;galleria&quot;)||a.data(this,&quot;galleria&quot;,(new Galleria).init(this,b))}):(a(function(){a(c).length?a(c).galleria(b):Galleria.utils.wait({until:function(){return a(c).length},success:function(){a(c).galleria(b)},error:function(){Galleria.raise('Init failed: Galleria could not find the element &quot;'+c+'&quot;.')},timeout:5e3})}),this)}})(jQuery);</DIV></B><DIV class="printfooter">
Retrieved from &quot;<A href="http://2012.igem.org/Team:TU_Munich/galleria-1.2.8.min.js">http://2012.igem.org/Team:TU_Munich/galleria-1.2.8.min.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:TU_Munich/galleria-1.2.8.min.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:TU_Munich/galleria-1.2.8.min.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:TU_Munich/galleria-1.2.8.min.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:TU_Munich/galleria-1.2.8.min.js&amp;oldid=106268" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2012.igem.org:Privacy_policy" title="2012.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2012.igem.org:General_disclaimer" title="2012.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>