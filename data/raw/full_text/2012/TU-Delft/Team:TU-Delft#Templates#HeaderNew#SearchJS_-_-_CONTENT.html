<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_TU-Delft_Templates_HeaderNew_SearchJS"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:TU-Delft/Templates/HeaderNew/SearchJS">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:TU-Delft/Templates/HeaderNew/SearchJS&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:TU-Delft/Templates/HeaderNew/SearchJS&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:TU-Delft/Templates/HeaderNew/SearchJS&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:TU-Delft/Templates/HeaderNew/SearchJS" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:TU-Delft/Templates/HeaderNew/SearchJS</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2012.igem.org</H3><P>$(document).ready(function(){
</P><P>	var config = {
		siteURL		: '2011.igem.org/Team:ETH_Zurich',	// Change this to your site
		searchSite	: true,
		type		: 'web',
		append		: false,
		perPage		: 4,			// A maximum of 8 is allowed by Google
		page		: 0			// The start page
	}
</P><P>
	// Focusing the input text box:
	$('#s').focus();
</P><P>	$('#searchForm').submit(function(){
		googleSearch();
		return false;
	});
</P><P>	function googleSearch(settings){
</P><P>		// If no parameters are supplied to the function,
		// it takes its defaults from the config object above:
</P><P>		settings = $.extend({},config,settings);
		settings.term = settings.term || $('#s').val();
</P><P>		if(settings.searchSite){
			// Using the Google site:example.com to limit the search to a
			// specific domain:
			settings.term = 'site:'+settings.siteURL+' '+settings.term;
		}
</P><P>		// URL of Google's AJAX search API
		var apiURL = '<A href="http://ajax.googleapis.com/ajax/services/search/'+settings.type+'?v=1.0&amp;callback=?'" class="external free" rel="nofollow">http://ajax.googleapis.com/ajax/services/search/'+settings.type+'?v=1.0&amp;callback=?'</A>;
		var resultsDiv = $('#resultsDiv');
</P><P>		$.getJSON(apiURL,{q:settings.term,rsz:settings.perPage,start:settings.page*settings.perPage},function(r){
</P><P>			var results = r.responseData.results;
			$('#more').remove();
			$('#closeSearch').remove();
</P><P>			if(results.length){
</P><P>				// If results were returned, add them to a pageContainer div,
				// after which append them to the #resultsDiv:
</P>
				var pageContainer = $('<DIV>',{className:'pageContainer'});
<P>				for(var i=0;i&lt;results.length;i++){
					// Creating a new result object and firing its toString method:
					pageContainer.append(new result(results[i]) + <I>);</I>
				}
</P><P>				if(!settings.append){
					// This is executed when running a new search, 
					// instead of clicking on the More button:
					resultsDiv.empty();
				}
</P>
				pageContainer.append('')
<P>							 .hide().appendTo(resultsDiv)
							 .fadeIn('slow');
</P><P>				var cursor = r.responseData.cursor;
</P><P>				// Checking if there are more pages with results, 
				// and deciding whether to show the More button:
</P><P>				if( +cursor.estimatedResultCount &gt; (settings.page+1)*settings.perPage){
</P>
					$('<DIV>',{id:'more'}).appendTo(resultsDiv).click(function(){
<P>						googleSearch({append:true,page:settings.page+1});
						$(this).fadeOut();
					});
					$('#more').text('More...');
				}
</P>
$('<DIV>',{id:'closeSearch'}).appendTo(resultsDiv).click(
<P>function(){
$('.searchUL').css('visibility', 'hidden');
$('#s').val(<I>);</I>
$('#s').blur();
$('#resultsDiv').empty();
});
			}
			else {
</P><P>				// No results were found for this search.
</P><P>				resultsDiv.empty();
</P>
				$('<P>',{className:'notFound',html:'No Results Were Found!'}).hide().appendTo(resultsDiv).fadeIn();
			}
		});
	}
	
	function result(r)
	{
		
		// This is class definition. Object of this class are created for
		// each result. The markup is generated by the .toString() method.
		
		var arr = [];
		
		// GsearchResultClass is passed by the google API
		switch(r.GsearchResultClass){

			case 'GwebSearch':
				arr = [
					'</P><DIV class="webResult">',
<P>					'&lt;a href=&quot;',r.unescapedUrl,'&quot; target=&quot;_blank&quot;&gt;',r.title,'',
					'<SPAN class="resultText">',r.content,'</SPAN>&lt;/a&gt;',
</P>
					'</DIV>'
<P>				];
			break;
		}
</P><P>		// The toString method.
		this.toString = function(){
			return arr.join(<I>);</I>
		}
	}
</P><P>	
});
</P><P>
/* ----------------------------------------------------------------------------- */
</P><P>/* Mediawiki Links: Incorporate into our design on our own terms! */
$(document).ready( function()
{
</P><PRE>   $(function() 
   {
</PRE><P>$('.scrollable').scrollable({ mousewheel: true }).navigator();
if ($('#pt-logout').length) 
{
	$('#loginMenu').hide();
	$('#editMenu').show();
</P><P>	$('#editLink').attr('href', $('.left-menu ul li a').get(2).href);
	$('#historyLink').attr('href', $('.left-menu ul li a').get(3).href);
	$('#logoutLink').attr('href', $('#pt-logout a').get(0).href);
}
else
{
	$('#loginLink').attr('href', $('#pt-login a').get(0).href);
}
</P><PRE>   });
   var mouseInUL = false;
</PRE><PRE>   $('#s').focus(function() {
       updateULSearch(true, mouseInUL);
   });
   $('#submitButton').focus(function() {
       updateULSearch(true, mouseInUL);
   });
</PRE><PRE>   $('#s').blur(function() {
       updateULSearch(false, mouseInUL);
   });
</PRE><PRE>   $('#submitButton').blur(function() {
       updateULSearch(false, mouseInUL);
   });
</PRE><PRE>   $('.searchUL').mouseenter(function() {
       mouseInUL = true;
       updateULSearch(true, mouseInUL);
   });
</PRE><PRE>   $('.searchUL').mouseleave(function() {
       mouseInUL = false;
       updateULSearch(false, mouseInUL);
   });
</PRE><P>});
</P><P>function updateULSearch (showUL, mouseInUL)
{
</P><PRE> if (showUL)
 {
    if ($('.searchUL').css('visibility') != 'visible')
    {
       $('.searchUL').css('visibility', 'visible');
    } 
 } 
 else
 {
    if (!(mouseInUL || $('#s').is(&quot;:focus&quot;) || $('#submitButton').is(&quot;:focus&quot;)))
    {
       $('.searchUL').css('visibility', 'hidden');
    }
 }
</PRE>
}</DIV></DIV></DIV><DIV class="printfooter">
Retrieved from &quot;<A href="http://2012.igem.org/Team:TU-Delft/Templates/HeaderNew/SearchJS">http://2012.igem.org/Team:TU-Delft/Templates/HeaderNew/SearchJS</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:TU-Delft/Templates/HeaderNew/SearchJS" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:TU-Delft/Templates/HeaderNew/SearchJS" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:TU-Delft/Templates/HeaderNew/SearchJS&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:TU-Delft/Templates/HeaderNew/SearchJS&amp;oldid=91675" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2012.igem.org:Privacy_policy" title="2012.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2012.igem.org:General_disclaimer" title="2012.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>