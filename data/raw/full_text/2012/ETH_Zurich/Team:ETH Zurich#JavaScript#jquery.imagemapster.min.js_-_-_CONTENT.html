<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="mediawiki  ltr ns-0 ns-subject page-Team_ETH_Zurich_JavaScript_jquery_imagemapster_min_js"><DIV id="globalWrapper"><DIV id="top-section"><DIV id="p-logo"><A href="/Main_Page" title="Main Page">&quot;
	    </A></DIV><DIV id="menubar" class="left-menu noprint"><UL><LI class="selected"><A href="/Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js">Page               </A></LI><LI class="new"><A href="/wiki/index.php?title=Talk:Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js&amp;action=edit&amp;redlink=1">Discussion               </A></LI><LI><A href="/wiki/index.php?title=Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js&amp;action=edit">View source               </A></LI><LI><A href="/wiki/index.php?title=Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js&amp;action=history">History               </A></LI><LI style="color:#808080;cursor:default">teams</LI></UL></DIV><DIV class="right-menu noprint" id="menubar"><UL><LI id="pt-login"><A href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</A></LI></UL></DIV><DIV id="search-controls" class="noprint"><FORM action="/Special:Search" id="searchform"> </FORM></DIV></DIV><DIV id="content"><H1 class="firstHeading">Team:ETH Zurich/JavaScript/jquery.imagemapster.min.js</H1><DIV id="bodyContent"><H3 id="siteSub" class="noprint">From 2012.igem.org</H3><P>/* ImageMapster
</P><PRE>  Version: see $.mapster.version
</PRE><P>Copyright 2011-2012 James Treworgy
<A href="http://www.outsharked.com/imagemapster" class="external free" rel="nofollow">http://www.outsharked.com/imagemapster</A><A href="https://github.com/jamietre/ImageMapster" class="external free" rel="nofollow">https://github.com/jamietre/ImageMapster</A></P><P>A jQuery plugin to enhance image maps.
</P><P>Versions 1.2.4.067+ include &quot;when.js&quot;: <A href="http://github.com/cujos/when" class="external free" rel="nofollow">http://github.com/cujos/when</A> in the
distribution build.
</P><UL><LI>/
</LI></UL><P>(function(a){a(function(){var i,p,u,w;x.defer=h;x.reject=r;x.isPromise=j;x.all=d;
x.some=v;x.any=e;x.map=k;x.reduce=o;x.chain=f;i=Object.freeze||function(y){return y;
};function n(){}n.prototype=i({always:function(y,z){return this.then(y,y,z);},otherwise:function(y){return this.then(w,y);
}});function t(z){var y=new n();y.then=function(A){var C;try{if(A){C=A(z);}return m(C===w?z:C);
}catch(B){return s(B);}};return i(y);}function s(z){var y=new n();y.then=function(A,C){var D;
try{if(C){D=C(z);return m(D===w?z:D);}return s(z);}catch(B){return s(B);}};return i(y);
}function r(y){return x(y,function(z){return s(z);});}function h(){var B,F,C,E,z,y,A;
C=[];E=[];z=function J(K,M,N){var L=h();C.push(function(O){O.then(K,M).then(L.resolve,L.reject,L.progress);
});N&amp;&amp;E.push(N);return L.promise;};function I(K,L,M){return z(K,L,M);}function H(K){A(t(K));
}function G(K){A(s(K));}y=function(M){var L,K=0;while(L=E[K++]){L(M);}};function D(K){y(K);
}A=function(L){var N,M=0;z=L.then;A=y=function K(){throw new Error(&quot;already completed&quot;);
};E=w;while(N=C[M++]){N(L);}C=[];};B={};F=new n();F.then=B.then=I;B.promise=i(F);
B.resolver=i({resolve:(B.resolve=H),reject:(B.reject=G),progress:(B.progress=D)});
return B;}function j(y){return y&amp;&amp;typeof y.then===&quot;function&quot;;}function x(B,y,z,A){var C=m(B);
return C.then(y,z,A);}function m(A){var z,y;if(A instanceof n){z=A;}else{y=h();if(j(A)){A.then(y.resolve,y.reject,y.progress);
z=y.promise;}else{y.resolve(A);z=y.promise;}}return z;}function v(C,A,y,z,B){g(2,arguments);
return x(C,function(J){var Q,O,P,E,N,L,F,H,G;H=J.length&gt;&gt;&gt;0;Q=Math.max(0,Math.min(A,H));
O=[];E=h();P=x(E,y,z,B);function M(R){N(R);}function K(R){L(R);}function I(R){F(R);
}function D(){N=L=F=l;}if(!Q){E.resolve(O);}else{N=function(R){O.push(R);if(!--Q){D();
E.resolve(O);}};L=function(R){D();E.reject(R);};F=E.progress;for(G=0;G&lt;H;++G){if(G in J){x(J[G],M,K,I);
}}}return P;});}function d(B,y,z,A){g(1,arguments);return x(B,function(C){return c(C,q,[]);
}).then(y,z,A);}function q(y,A,z){y[z]=A;return y;}function e(B,y,z,A){function C(D){return y?y(D[0]):D[0];
}return v(B,1,C,z,A);}function k(z,y){return x(z,function(A){return b(A,y);});}function b(B,A){var C,z,y;
z=B.length&gt;&gt;&gt;0;C=new Array(z);for(y=0;y&lt;z;y++){if(y in B){C[y]=x(B[y],A);}}return c(C,q,C);
}function o(A,B,z){var y=u.call(arguments,1);return x(A,function(C){return c.apply(w,[C].concat(y));
});}function c(A,B,z){var C,y;C=A.length;y=[function(D,F,E){return x(D,function(G){return x(F,function(H){return B(G,H,E,C);
});});}];if(arguments.length&gt;2){y.push(z);}return p.apply(A,y);}function f(y,z,A){var B=arguments.length&gt;2;
return x(y,function(C){if(B){C=A;}z.resolve(C);return C;},function(C){z.reject(C);
return s(C);},z.progress);}function g(B,z){var y,A=z.length;while(A&gt;B){y=z[--A];if(y!=null&amp;&amp;typeof y!=&quot;function&quot;){throw new Error(&quot;callback is not a function&quot;);
}}}function l(){}u=[].slice;p=[].reduce||function(D){var z,y,C,B,A;A=0;z=Object(this);
B=z.length&gt;&gt;&gt;0;y=arguments;if(y.length&lt;=1){for(;;){if(A in z){C=z[A++];break;}if(++A&gt;=B){throw new TypeError();
}}}else{C=y[1];}for(;A&lt;B;++A){if(A in z){C=D(C,z[A],A,z);}}return C;};return x;});
})(typeof define==&quot;function&quot;?define:function(a){typeof module!=&quot;undefined&quot;?(module.exports=a()):(jQuery.mapster_when=a());
});(function(a){a.fn.mapster=function(d){var c=a.mapster.impl;if(a.isFunction(c[d])){return c[d].apply(this,Array.prototype.slice.call(arguments,1));
}else{if(typeof d===&quot;object&quot;||!d){return c.bind.apply(this,arguments);}else{a.error(&quot;Method &quot;+d+&quot; does not exist on jQuery.mapster&quot;);
}}};a.mapster={version:&quot;1.2.6&quot;,render_defaults:{isSelectable:true,isDeselectable:true,fade:false,fadeDuration:150,altImage:null,fill:true,fillColor:&quot;000000&quot;,fillColorMask:&quot;FFFFFF&quot;,fillOpacity:0.7,highlight:null,stroke:false,strokeColor:&quot;ff0000&quot;,strokeOpacity:1,strokeWidth:1,includeKeys:&quot;&quot;,alt_image:null},defaults:{clickNavigate:false,wrapClass:null,wrapCss:null,onGetList:null,sortList:false,listenToList:false,mapKey:&quot;&quot;,mapValue:&quot;&quot;,singleSelect:false,listKey:&quot;value&quot;,listSelectedAttribute:&quot;selected&quot;,listSelectedClass:null,onClick:null,onMouseover:null,onMouseout:null,mouseoutDelay:0,onStateChange:null,boundList:null,onConfigured:null,configTimeout:30000,noHrefIsMask:true,scaleMap:true,safeLoad:false,areas:[]},shared_defaults:{render_highlight:{fade:true},render_select:{fade:false},staticState:null,selected:null},area_defaults:{includeKeys:&quot;&quot;,isMask:false},canvas_style:{position:&quot;absolute&quot;,left:0,top:0,padding:0,border:0},hasCanvas:null,isTouch:null,windowLoaded:false,map_cache:[],hooks:{},addHook:function(d,c){this.hooks[d]=(this.hooks[d]||[]).push(c);
},callHooks:function(d,c){a.each(this.hooks[d]||[],function(g,f){f.apply(c);});},utils:{subclass:function(c,d){var e=function(){var g=this,f=Array.prototype.slice.call(arguments,0);
g.base=c.prototype;g.base.init=function(){c.prototype.constructor.apply(g,f);};d.apply(g,f);
};e.prototype=new c();e.prototype.constructor=e;return e;},asArray:function(c){return c.constructor===Array?c:this.split(c);
},split:function(g,d){var f,e,c=g.split(&quot;,&quot;);for(f=0;f&lt;c.length;f++){e=a.trim(c[f]);
if(e===&quot;&quot;){c.splice(f,1);}else{c[f]=d?d(e):e;}}return c;},updateProps:function(c,d){var e,f=c||{},g=a.isEmptyObject(f)?d:c;
e=[];a.each(g,function(h){e.push(h);});a.each(Array.prototype.slice.call(arguments,1),function(h,j){a.each(j||{},function(k){if(!e||a.inArray(k,e)&gt;=0){var i=j[k];
if(a.isPlainObject(i)){f[k]=a.extend(f[k]||{},i);}else{if(i&amp;&amp;i.constructor===Array){f[k]=i.slice(0);
}else{if(typeof i!==&quot;undefined&quot;){f[k]=j[k];}}}}});});return f;},isElement:function(c){return(typeof HTMLElement===&quot;object&quot;?c instanceof HTMLElement:c&amp;&amp;typeof c===&quot;object&quot;&amp;&amp;c.nodeType===1&amp;&amp;typeof c.nodeName===&quot;string&quot;);
},indexOfProp:function(c,d,f){var e=c.constructor===Array?-1:null;a.each(c,function(h,g){if(g&amp;&amp;(d?g[d]:g)===f){e=h;
return false;}});return e;},boolOrDefault:function(d,c){return this.isBool(d)?d:c||false;
},isBool:function(c){return typeof c===&quot;boolean&quot;;},ifFunction:function(d,e,c){if(a.isFunction(d)){d.call(e,c);
}},size:function(c){var d=a.mapster.utils;return{width:d.imgWidth(c,true),height:d.imgHeight(c,true),complete:function(){return !!this.height&amp;&amp;!!this.width;
}};},setOpacity:function(c,d){c.style.opacity=d;},fader:(function(){var c={},e=0,d=function(g,k,h,f){var i,j,l=a.mapster.utils;
if(typeof g===&quot;number&quot;){j=c[g];if(!j){return;}}else{i=l.indexOfProp(c,null,g);if(i){delete c[i];
}c[++e]=j=g;g=e;}h=h||1;k=(k+(h/10)&gt;h-0.01)?h:k+(h/10);l.setOpacity(j,k);if(k&lt;h){setTimeout(function(){d(g,k,h,f);
},f?f/10:15);}};return d;}())},getBoundList:function(g,e){if(!g.boundList){return null;
}var c,d,h=a(),f=a.mapster.utils.split(e);g.boundList.each(function(k,j){for(c=0;
c&lt;f.length;c++){d=f[c];if(a(j).is(&quot;[&quot;+g.listKey+'=&quot;'+d+'&quot;]')){h=h.add(j);}}});return h;
},setBoundListProperties:function(c,e,d){e.each(function(g,f){if(c.listSelectedClass){if(d){a(f).addClass(c.listSelectedClass);
}else{a(f).removeClass(c.listSelectedClass);}}if(c.listSelectedAttribute){a(f).attr(c.listSelectedAttribute,d);
}});},getMapDataIndex:function(e){var d,c;switch(e.tagName&amp;&amp;e.tagName.toLowerCase()){case&quot;area&quot;:c=a(e).parent().attr(&quot;name&quot;);
d=a(&quot;img[usemap='#&quot;+c+&quot;']&quot;)[0];break;case&quot;img&quot;:d=e;break;}return d?this.utils.indexOfProp(this.map_cache,&quot;image&quot;,d):-1;
},getMapData:function(d){var c=this.getMapDataIndex(d.length?d[0]:d);if(c&gt;=0){return c&gt;=0?this.map_cache[c]:null;
}},queueCommand:function(e,f,d,c){if(!e){return false;}if(!e.complete||e.currentAction){e.commands.push({that:f,command:d,args:c});
return true;}return false;},unload:function(){this.impl.unload();this.utils=null;
this.impl=null;a.fn.mapster=null;a.mapster=null;a(&quot;*&quot;).unbind();}};var b=a.mapster;
a.each([&quot;width&quot;,&quot;height&quot;],function(f,d){var c=d.substr(0,1).toUpperCase()+d.substr(1);
b.utils[&quot;img&quot;+c]=function(e,g){return(g?a(e)[d]():0)||e[d]||e[&quot;natural&quot;+c]||e[&quot;client&quot;+c]||e[&quot;offset&quot;+c];
};});b.Method=function(g,d,c,f){var e=this;e.name=f.name;e.output=g;e.input=g;e.first=f.first||false;
e.args=f.args?Array.prototype.slice.call(f.args,0):[];e.key=f.key;e.func_map=d;e.func_area=c;
e.name=f.name;e.allowAsync=f.allowAsync||false;};b.Method.prototype.go=function(){var f,e,c,g,j,k=this.input,d=[],h=this;
g=k.length;for(f=0;f&lt;g;f++){e=a.mapster.getMapData(k[f]);if(e){if(!h.allowAsync&amp;&amp;b.queueCommand(e,h.input,h.name,h.args)){if(this.first){j=&quot;&quot;;
}continue;}c=e.getData(k[f].nodeName===&quot;AREA&quot;?k[f]:this.key);if(c){if(a.inArray(c,d)&lt;0){d.push(c);
}}else{j=this.func_map.apply(e,h.args);}if(this.first||typeof j!==&quot;undefined&quot;){break;
}}}a(d).each(function(m,l){j=h.func_area.apply(l,h.args);});if(typeof j!==&quot;undefined&quot;){return j;
}else{return this.output;}};a.mapster.impl=(function(){var e={},d=a.mapster,i=a.mapster.utils,h,c;
c=function(j){return d.map_cache.push(j)-1;};h=function(k){d.map_cache.splice(k.index,1);
for(var j=d.map_cache.length-1;j&gt;=this.index;j--){d.map_cache[j].index--;}};function f(n,k){var j,l,m=n.options.areas;
if(k){a.each(k,function(p,o){if(this){l=i.indexOfProp(m,&quot;key&quot;,this.key);if(l&gt;=0){a.extend(m[l],this);
}else{m.push(this);}j=n.getDataForKey(this.key);if(j){a.extend(j.options,this);}}});
}}function g(j,k){var l=i.updateProps({},k);delete l.areas;i.updateProps(j.options,l);
f(j,k.areas);i.updateProps(j.area_options,j.options);}e.get=function(j){var k=d.getMapData(this);
if(!(k&amp;&amp;k.complete)){throw (&quot;Can't access data until binding complete.&quot;);}return(new d.Method(this,function(){return this.getSelected();
},function(){return this.isSelected();},{name:&quot;get&quot;,args:arguments,key:j,first:true,allowAsync:true,defaultReturn:&quot;&quot;})).go();
};e.data=function(j){return(new d.Method(this,null,function(){return this;},{name:&quot;data&quot;,args:arguments,key:j})).go();
};e.highlight=function(j){return(new d.Method(this,function(){if(j===false){this.ensureNoHighlight();
}else{var k=this.highlightId;return k&gt;=0?this.data[k].key:null;}},function(){this.highlight();
},{name:&quot;highlight&quot;,args:arguments,key:j,first:true})).go();};e.keys=function(l,k){var m=[],n=d.getMapData(this);
if(!(n&amp;&amp;n.complete)){throw (&quot;Can't access data until binding complete.&quot;);}function j(o){var p,q=[];
if(!k){q.push(o.key);}else{p=o.areas();a.each(p,function(s,r){q=q.concat(r.keys);
});}a.each(q,function(s,r){if(a.inArray(r,m)&lt;0){m.push(r);}});}if(!(n&amp;&amp;n.complete)){return&quot;&quot;;
}if(typeof l===&quot;string&quot;){if(k){j(n.getDataForKey(l));}else{m=[n.getKeysForGroup(l)];
}}else{k=l;this.each(function(p,o){if(o.nodeName===&quot;AREA&quot;){j(n.getDataForArea(o));
}});}return m.join(&quot;,&quot;);};e.select=function(){e.set.call(this,true);};e.deselect=function(){e.set.call(this,false);
};e.set=function(s,m,q){var o,p,r=q,n,k;function t(u){if(u){switch(s){case true:u.addSelection(r);
break;case false:u.removeSelection(true);break;default:u.toggleSelection(r);break;
}}}function j(u){if(u&amp;&amp;a.inArray(u,k)&lt;0){k.push(u);n+=(n===&quot;&quot;?&quot;&quot;:&quot;,&quot;)+u.key;}}function l(u){a.each(k,function(w,v){t(v);
});if(!s){u.removeSelectionFinish();}if(u.options.boundList){d.setBoundListProperties(u.options,d.getBoundList(u.options,n),s);
}}this.filter(&quot;img,area&quot;).each(function(v,u){var w;p=d.getMapData(u);if(p!==o){if(o){l(o);
}k=[];n=&quot;&quot;;}if(p){w=&quot;&quot;;if(u.nodeName.toUpperCase()===&quot;IMG&quot;){if(!d.queueCommand(p,a(u),&quot;set&quot;,[s,m,r])){if(m instanceof Array){if(m.length){w=m.join(&quot;,&quot;);
}}else{w=m;}if(w){a.each(i.split(w),function(x,y){j(p.getDataForKey(y.toString()));
o=p;});}}}else{r=m;if(!d.queueCommand(p,a(u),&quot;set&quot;,[s,r])){j(p.getDataForArea(u));
o=p;}}}});if(p){l(p);}return this;};e.unbind=function(j){return(new d.Method(this,function(){this.clearEvents();
this.clearMapData(j);h(this);},null,{name:&quot;unbind&quot;,args:arguments})).go();};e.rebind=function(j){return(new d.Method(this,function(){var k=this;
k.complete=false;k.configureOptions(j);k.bindImages(true,function(){k.buildDataset(true);
k.complete=true;});},null,{name:&quot;rebind&quot;,args:arguments})).go();};e.get_options=function(l,k){var j=i.isBool(l)?l:k;
return(new d.Method(this,function(){var m=a.extend({},this.options);if(j){m.render_select=i.updateProps({},d.render_defaults,m,m.render_select);
m.render_highlight=i.updateProps({},d.render_defaults,m,m.render_highlight);}return m;
},function(){return j?this.effectiveOptions():this.options;},{name:&quot;get_options&quot;,args:arguments,first:true,allowAsync:true,key:l})).go();
};e.set_options=function(j){return(new d.Method(this,function(){g(this,j);},null,{name:&quot;set_options&quot;,args:arguments})).go();
};e.unload=function(){var j;for(j=d.map_cache.length-1;j&gt;=0;j--){if(d.map_cache[j]){e.unbind.call(a(d.map_cache[j].image));
}}e.graphics=null;};e.snapshot=function(){return(new d.Method(this,function(){a.each(this.data,function(k,j){j.selected=false;
});this.base_canvas=this.graphics.createVisibleCanvas(this);a(this.image).before(this.base_canvas);
},null,{name:&quot;snapshot&quot;})).go();};e.state=function(){var j,k=null;a(this).each(function(m,l){if(l.nodeName===&quot;IMG&quot;){j=d.getMapData(l);
if(j){k=j.state();}return false;}});return k;};e.bind=function(j){return this.each(function(l,k){var m,n,p,o;
m=a(k);m.css(&quot;border&quot;,0);o=d.getMapData(k);if(o){e.unbind.apply(m);if(!o.complete){m.bind();
return true;}o=null;}p=this.getAttribute(&quot;usemap&quot;);n=p&amp;&amp;a('map[name=&quot;'+p.substr(1)+'&quot;]');
if(!(m.is(&quot;img&quot;)&amp;&amp;p&amp;&amp;n.size()&gt;0)){return true;}if(!o){o=new d.MapData(this,j);o.index=c(o);
o.map=n;o.bindImages(true);}});};e.init=function(l){var k,j;d.hasCanvas=(document.namespaces&amp;&amp;document.namespaces.g_vml_)?false:a(&quot;&lt;canvas&gt;&lt;/canvas&gt;&quot;)[0].getContext?true:false;
d.isTouch=&quot;ontouchstart&quot; in document.documentElement;if(!(d.hasCanvas||document.namespaces)){a.fn.mapster=function(){return this;
};return;}if(!i.isBool(a.mapster.defaults.highlight)){d.render_defaults.highlight=!d.isTouch;
}a.extend(d.defaults,d.render_defaults,d.shared_defaults);a.extend(d.area_defaults,d.render_defaults,d.shared_defaults);
if(i.isBool(l)){d.hasCanvas=l;}if(a.browser.msie&amp;&amp;!d.hasCanvas&amp;&amp;!document.namespaces.v){document.namespaces.add(&quot;v&quot;,&quot;urn:schemas-microsoft-com:vml&quot;);
k=document.createStyleSheet();j=[&quot;shape&quot;,&quot;rect&quot;,&quot;oval&quot;,&quot;circ&quot;,&quot;fill&quot;,&quot;stroke&quot;,&quot;imagedata&quot;,&quot;group&quot;,&quot;textbox&quot;];
a.each(j,function(n,m){k.addRule(&quot;v\\:&quot;+m,&quot;behavior: url(#default#VML); antialias:true&quot;);
});}a(window).bind(&quot;load&quot;,function(){d.windowLoaded=true;a(d.map_cache).each(function(n,m){if(!m.complete&amp;&amp;m.isReadyToBind()){m.initialize();
}});});};e.test=function(j){return eval(j);};return e;}());a.mapster.impl.init();
}(jQuery));(function(a){var d,c=a.mapster,e=c.utils;function b(g,f,k){var j=g,i=j.map_data,h=k.isMask;
a.each(f.areas(),function(m,l){k.isMask=h||(l.nohref&amp;&amp;i.options.noHrefIsMask);j.addShape(l,k);
});k.isMask=h;}c.Graphics=function(f){var g=this;g.active=false;g.canvas=null;g.width=0;
g.height=0;g.shapes=[];g.masks=[];g.map_data=f;};d=c.Graphics.prototype={constructor:c.Graphics,begin:function(g,h){var f=a(g);
this.elementName=h;this.canvas=g;this.width=f.width();this.height=f.height();this.shapes=[];
this.masks=[];this.active=true;},addShape:function(g,h){var f=h.isMask?this.masks:this.shapes;
f.push({mapArea:g,options:h});},createVisibleCanvas:function(f){return a(this.createCanvasFor(f)).addClass(&quot;mapster_el&quot;).css(c.canvas_style)[0];
},addShapeGroup:function(f,k,m){var j=this,h,l,g,i=this.map_data,n=f.effectiveRenderOptions(k);
if(m){a.extend(n,m);}if(k===&quot;select&quot;){l=&quot;static_&quot;+f.areaId.toString();g=i.base_canvas;
}else{g=i.overlay_canvas;}j.begin(g,l);if(n.includeKeys){h=e.split(n.includeKeys);
a.each(h,function(q,p){var o=i.getDataForKey(p.toString());b(j,o,o.effectiveRenderOptions(k));
});}b(j,f,n);j.render();if(n.fade){e.fader(c.hasCanvas?g:a(g).find(&quot;._fill&quot;).not(&quot;.mapster_mask&quot;),0,c.hasCanvas?1:n.fillOpacity,n.fadeDuration);
}}};if(c.hasCanvas){d.hex_to_decimal=function(f){return Math.max(0,Math.min(parseInt(f,16),255));
};d.css3color=function(f,g){return&quot;rgba(&quot;+this.hex_to_decimal(f.substr(0,2))+&quot;,&quot;+this.hex_to_decimal(f.substr(2,2))+&quot;,&quot;+this.hex_to_decimal(f.substr(4,2))+&quot;,&quot;+g+&quot;)&quot;;
};d.renderShape=function(g,j,k){var h,f=j.coords(null,k);switch(j.shape){case&quot;rect&quot;:g.rect(f[0],f[1],f[2]-f[0],f[3]-f[1]);
break;case&quot;poly&quot;:g.moveTo(f[0],f[1]);for(h=2;h&lt;j.length;h+=2){g.lineTo(f[h],f[h+1]);
}g.lineTo(f[0],f[1]);break;case&quot;circ&quot;:case&quot;circle&quot;:g.arc(f[0],f[1],f[2],0,Math.PI*2,false);
break;}};d.addAltImage=function(f,g,h,i){f.beginPath();this.renderShape(f,h);f.closePath();
f.clip();f.globalAlpha=i.altImageOpacity||i.fillOpacity;f.drawImage(g,0,0,h.owner.scaleInfo.width,h.owner.scaleInfo.height);
};d.render=function(){var h,i,j=this,g=j.masks.length,k=j.createCanvasFor(j.map_data),l=k.getContext(&quot;2d&quot;),f=j.canvas.getContext(&quot;2d&quot;);
if(g){h=j.createCanvasFor(j.map_data);i=h.getContext(&quot;2d&quot;);i.clearRect(0,0,h.width,h.height);
a.each(j.masks,function(n,m){i.save();i.beginPath();j.renderShape(i,m.mapArea);i.closePath();
i.clip();i.lineWidth=0;i.fillStyle=&quot;#000&quot;;i.fill();i.restore();});}a.each(j.shapes,function(m,n){l.save();
if(n.options.fill){if(n.options.alt_image){j.addAltImage(l,n.options.alt_image,n.mapArea,n.options);
}else{l.beginPath();j.renderShape(l,n.mapArea);l.closePath();l.fillStyle=j.css3color(n.options.fillColor,n.options.fillOpacity);
l.fill();}}l.restore();});a.each(j.shapes.concat(j.masks),function(m,o){var n=o.options.strokeWidth===1?0.5:0;
if(o.options.stroke){l.save();l.strokeStyle=j.css3color(o.options.strokeColor,o.options.strokeOpacity);
l.lineWidth=o.options.strokeWidth;l.beginPath();j.renderShape(l,o.mapArea,n);l.closePath();
l.stroke();l.restore();}});if(g){i.globalCompositeOperation=&quot;source-out&quot;;i.drawImage(k,0,0);
f.drawImage(h,0,0);}else{f.drawImage(k,0,0);}j.active=false;return j.canvas;};d.createCanvasFor=function(f){return a('&lt;canvas width=&quot;'+f.scaleInfo.width+'&quot; height=&quot;'+f.scaleInfo.height+'&quot;&gt;&lt;/canvas&gt;')[0];
};d.clearHighlight=function(){var f=this.map_data.overlay_canvas;f.getContext(&quot;2d&quot;).clearRect(0,0,f.width,f.height);
};d.removeSelections=function(){};d.refreshSelections=function(){var f,g=this.map_data;
f=g.base_canvas;g.base_canvas=this.createVisibleCanvas(g);a(g.base_canvas).hide();
a(f).before(g.base_canvas);g.redrawSelections();a(g.base_canvas).show();a(f).remove();
};}else{e.setOpacity=function(f,g){a(f).each(function(j,h){if(typeof h.opacity!==&quot;undefined&quot;){h.opacity=g;
}else{a(h).css(&quot;opacity&quot;,g);}});};d.renderShape=function(l,n,g){var m=this,k,o,h,p,j,i,q,f=l.coords();
j=m.elementName?'name=&quot;'+m.elementName+'&quot; ':&quot;&quot;;i=g?'class=&quot;'+g+'&quot; ':&quot;&quot;;p='&lt;v:fill color=&quot;#'+n.fillColor+'&quot; class=&quot;_fill&quot; opacity=&quot;'+(n.fill?n.fillOpacity:0)+'&quot; /&gt;&lt;v:stroke class=&quot;_fill&quot; opacity=&quot;'+n.strokeOpacity+'&quot;/&gt;';
o=n.stroke?&quot; strokeweight=&quot;+n.strokeWidth+' stroked=&quot;t&quot; strokecolor=&quot;#'+n.strokeColor+'&quot;':' stroked=&quot;f&quot;';
k=n.fill?' filled=&quot;t&quot;':' filled=&quot;f&quot;';switch(l.shape){case&quot;rect&quot;:q=&quot;&lt;v:rect &quot;+i+j+k+o+' style=&quot;zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+f[0]+&quot;px;top:&quot;+f[1]+&quot;px;width:&quot;+(f[2]-f[0])+&quot;px;height:&quot;+(f[3]-f[1])+'px;&quot;&gt;'+p+&quot;&lt;/v:rect&gt;&quot;;
break;case&quot;poly&quot;:q=&quot;&lt;v:shape &quot;+i+j+k+o+' coordorigin=&quot;0,0&quot; coordsize=&quot;'+m.width+&quot;,&quot;+m.height+'&quot; path=&quot;m '+f[0]+&quot;,&quot;+f[1]+&quot; l &quot;+f.slice(2).join(&quot;,&quot;)+' x e&quot; style=&quot;zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+m.width+&quot;px;height:&quot;+m.height+'px;&quot;&gt;'+p+&quot;&lt;/v:shape&gt;&quot;;
break;case&quot;circ&quot;:case&quot;circle&quot;:q=&quot;&lt;v:oval &quot;+i+j+k+o+' style=&quot;zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(f[0]-f[2])+&quot;px;top:&quot;+(f[1]-f[2])+&quot;px;width:&quot;+(f[2]*2)+&quot;px;height:&quot;+(f[2]*2)+'px;&quot;&gt;'+p+&quot;&lt;/v:oval&gt;&quot;;
break;}h=a(q);a(m.canvas).append(h);return h;};d.render=function(){var g,f=this;a.each(this.shapes,function(j,h){f.renderShape(h.mapArea,h.options);
});if(this.masks.length){a.each(this.masks,function(j,h){g=e.updateProps({},h.options,{fillOpacity:1,fillColor:h.options.fillColorMask});
f.renderShape(h.mapArea,g,&quot;mapster_mask&quot;);});}this.active=false;return this.canvas;
};d.createCanvasFor=function(g){var i=g.scaleInfo.width,f=g.scaleInfo.height;return a('')[0];
};d.clearHighlight=function(){a(this.map_data.overlay_canvas).children().remove();
};d.removeSelections=function(f){if(f&gt;=0){a(this.map_data.base_canvas).find('[name=&quot;static_'+f.toString()+'&quot;]').remove();
}else{a(this.map_data.base_canvas).children().remove();}};d.refreshSelections=function(){return null;
};}}(jQuery));(function(a){var c,b=a.mapster,d=b.utils;b.MapData=function(e,g){var f=this;
function h(l,i,j){function k(m){if(f.currentAreaId!==m&amp;&amp;f.highlightId&gt;=0){j();}}if(f.activeAreaEvent){window.clearTimeout(f.activeAreaEvent);
f.activeAreaEvent=0;}if(l&lt;0){return;}if(i.owner.currentAction||l){f.activeAreaEvent=window.setTimeout((function(){return function(){h(0,i,j);
};}(i)),l||100);}else{k(i.areaId);}}this.image=e;this.imgCssText=e.style.cssText||null;
this.initializeDefaults();this.configureOptions(g);this.mousedown=function(i){if(!a.mapster.hasCanvas){this.blur();
}i.preventDefault();};this.mouseover=function(k){var j=f.getAllDataForArea(this),i=j.length?j[0]:null;
if(!i||i.isNotRendered()||i.owner.currentAction){return;}if(f.currentAreaId===i.areaId){return;
}if(f.highlightId!==i.areaId){f.clearEffects();i.highlight();if(f.options.showToolTip){a.each(j,function(m,l){if(l.effectiveOptions().toolTip){l.showTooltip();
}});}}f.currentAreaId=i.areaId;if(a.isFunction(f.options.onMouseover)){f.options.onMouseover.call(this,{e:k,options:i.effectiveOptions(),key:i.key,selected:i.isSelected()});
}};this.mouseout=function(j){var k,i=f.getDataForArea(this),l=f.options;if(f.currentAreaId&lt;0||!i){return;
}k=f.getDataForArea(j.relatedTarget);if(k===i){return;}f.currentAreaId=-1;i.area=null;
h(l.mouseoutDelay,i,f.clearEffects);if(a.isFunction(l.onMouseout)){l.onMouseout.call(this,{e:j,options:l,key:i.key,selected:i.isSelected()});
}};this.clearEffects=function(){var i=f.options;f.ensureNoHighlight();if(i.toolTipClose&amp;&amp;a.inArray(&quot;area-mouseout&quot;,i.toolTipClose)&gt;=0&amp;&amp;f.activeToolTip){f.clearTooltip();
}};this.click=function(m){var r,n,o,p,j,k,s,t=this,i=f.getDataForArea(this),q=f.options;
function l(u){var v;j=(u.isSelectable()&amp;&amp;(u.isDeselectable()||!u.isSelected()));if(j){p=!u.isSelected();
}else{p=u.isSelected();}o=b.getBoundList(q,u.key);if(a.isFunction(q.onClick)){k=q.onClick.call(t,{e:m,listTarget:o,key:u.key,selected:p});
if(d.isBool(k)){if(!k){return false;}s=a(u.area).attr(&quot;href&quot;);if(s!==&quot;#&quot;){window.location.href=s;
return false;}}}if(j){r=u.toggleSelection();}if(q.boundList&amp;&amp;q.boundList.length&gt;0){b.setBoundListProperties(q,o,u.isSelected());
}v=u.effectiveOptions();if(v.includeKeys){n=d.split(v.includeKeys);a.each(n,function(y,x){var w=f.getDataForKey(x.toString());
if(!w.options.isMask){l(w);}});}}f.mousedown.call(this,m);if(q.clickNavigate&amp;&amp;i.href){window.location.href=i.href;
return;}if(i&amp;&amp;!i.owner.currentAction){q=f.options;l(i);}};this.graphics=new b.Graphics(this);
};c=b.MapData.prototype;c.configureOptions=function(e){this.area_options=d.updateProps({},b.area_defaults,e);
this.options=d.updateProps({},b.defaults,e);this.bindTries=this.options.configTimeout/200;
};c.initializeDefaults=function(){a.extend(this,{images:[],imageSources:[],imageStatus:[],altImagesXref:{},map:null,base_canvas:null,overlay_canvas:null,imagesLoaded:false,complete:false,commands:[],data:[],mapAreas:[],_xref:{},highlightId:-1,currentAreaId:-1,_tooltip_events:[],scaleInfo:null,index:-1,activeAreaEvent:null});
};c.isActive=function(){return !this.complete||this.currentAction;};c.state=function(){return{complete:this.complete,resizing:this.currentAction===&quot;resizing&quot;,zoomed:this.zoomed,zoomedArea:this.zoomedArea,scaleInfo:this.scaleInfo};
};c.isReadyToBind=function(){return this.imagesLoaded&amp;&amp;(!this.options.safeLoad||b.windowLoaded);
};c.addImage=function(h,l,e){var g,k,j=this,f=function(n){return a.inArray(n,j.images);
},i=function(){var n=f(this);if(n&gt;=0){j.imageStatus[n]=true;if(a.inArray(false,j.imageStatus)&lt;0&amp;&amp;(!j.options.safeLoad||b.windowLoaded)){j.initialize();
}}},m=function(n){var o=j.images.push(n)-1;j.imageSources[o]=k;j.imageStatus[o]=false;
if(e){j.altImagesXref[e]=o;}};if(!h&amp;&amp;!l){return;}g=h;k=l||a(g).attr(&quot;src&quot;);if(!k){throw (&quot;Missing image source&quot;);
}if(!g){g=a('&lt;img class=&quot;mapster_el&quot; /&gt;').hide()[0];a(&quot;body&quot;).append(g);m(g);a(g).bind(&quot;onload&quot;,i).bind(&quot;onerror&quot;,function(n){j.imageLoadError.call(j,n);
});a(g).attr(&quot;src&quot;,k);}else{m(g);}};c.isImageLoaded=function(f){var h,e,g=this;if(g.imageStatus[f]){return true;
}e=g.images[f];if(typeof e.complete!==&quot;undefined&quot;){h=e.complete;}else{h=!!d.imgWidth(e);
}g.imageStatus[f]=h;return h;};c.bindImages=function(f,e){var g,j=this,h=true,k=j.options,l=function(){j.bindImages.call(j,false,e);
};if(f){j.complete=false;j.triesLeft=j.bindTries;j.imagesLoaded=false;if(j.images.length&gt;2){j.images=j.images.slice(0,2);
j.imageSources=j.imageSources.slice(0,2);j.imageStatus=j.imageStatus.slice(0,2);j.altImagesXref={};
}j.altImagesXref={};if(j.images.length===0){j.addImage(j.image);j.addImage(null,j.image.src);
}if(a.mapster.hasCanvas){j.addImage(null,k.render_highlight.altImage||k.altImage,&quot;highlight&quot;);
j.addImage(null,k.render_select.altImage||k.altImage,&quot;select&quot;);}}if(j.imagesLoaded){return;
}g=j.images.length;while(g--&gt;0){if(!j.isImageLoaded(g)){h=false;break;}}j.imagesLoaded=h;
if(j.isReadyToBind()){if(e){e();}else{j.initialize();}}else{if(j.triesLeft--&gt;0){j.imgTimeout=window.setTimeout(l,200);
}else{j.imageLoadError.call(j);}}};c.imageLoadError=function(f){clearTimeout(this.imgTimeout);
this.triesLeft=0;var g=f?&quot;The image &quot;+f.target.src+&quot; failed to load.&quot;:&quot;The images never seemed to finish loading. You may just need to increase the configTimeout if images could take a long time to load.&quot;;
throw g;};c.altImage=function(e){return this.images[this.altImagesXref[e]];};c.wrapId=function(){return&quot;mapster_wrap_&quot;+this.index;
};c._idFromKey=function(e){return typeof e===&quot;string&quot;&amp;&amp;this._xref.hasOwnProperty(e)?this._xref[e]:-1;
};c.getSelected=function(){var e=&quot;&quot;;a.each(this.data,function(g,f){if(f.isSelected()){e+=(e?&quot;,&quot;:&quot;&quot;)+this.key;
}});return e;};c.getAllDataForArea=function(f,g){var h,e,l,k=this,j=a(f).filter(&quot;area&quot;).attr(k.options.mapKey);
if(j){l=[];j=d.split(j);for(h=0;h&lt;(g||j.length);h++){e=k.data[k._idFromKey(j[h])];
e.area=f.length?f[0]:f;l.push(e);}}return l;};c.getDataForArea=function(f){var e=this.getAllDataForArea(f,1);
return e?e[0]||null:null;};c.getDataForKey=function(e){return this.data[this._idFromKey(e)];
};c.getKeysForGroup=function(f){var e=this.getDataForKey(f);return !e?&quot;&quot;:e.isPrimary?e.key:this.getPrimaryKeysForMapAreas(e.areas()).join(&quot;,&quot;);
};c.getPrimaryKeysForMapAreas=function(e){var f=[];a.each(e,function(h,g){if(a.inArray(g.keys[0],f)&lt;0){f.push(g.keys[0]);
}});return f;};c.getData=function(e){if(typeof e===&quot;string&quot;){return this.getDataForKey(e);
}else{if(e&amp;&amp;e.mapster||d.isElement(e)){return this.getDataForArea(e);}else{return null;
}}};c.ensureNoHighlight=function(){var e;if(this.highlightId&gt;=0){this.graphics.clearHighlight();
e=this.data[this.highlightId];e.changeState(&quot;highlight&quot;,false);this.setHighlightId(-1);
}};c.setHighlightId=function(e){this.highlightId=e;};c.clearSelections=function(){a.each(this.data,function(g,f){if(f.selected){f.removeSelection(true);
}});this.removeSelectionFinish();};c.setAreaOptions=function(g){var h,f,e;g=g||[];
for(h=g.length-1;h&gt;=0;h--){f=g[h];if(f){e=this.getDataForKey(f.key);if(e){d.updateProps(e.options,f);
if(d.isBool(f.selected)){e.selected=f.selected;}}}}};c.drawSelections=function(g){var e,f=d.asArray(g);
for(e=f.length-1;e&gt;=0;e--){this.data[f[e]].drawSelection();}};c.redrawSelections=function(){a.each(this.data,function(g,f){if(f.isSelectedOrStatic()){f.drawSelection();
}});};c.initialize=function(){var j,e,m,s,n,f,g,p,h,q,r,o,k=this,l=k.options;if(k.complete){return;
}h=a(k.image);n=h.parent().attr(&quot;id&quot;);if(n&amp;&amp;n.length&gt;=12&amp;&amp;n.substring(0,12)===&quot;mapster_wrap&quot;){s=h.parent();
</P>
s.attr(&quot;id&quot;,k.wrapId());}else{s=a('');if(l.wrapClass){if(l.wrapClass===true){s.addClass(h[0].className);
<P>}else{s.addClass(l.wrapClass);}}}k.wrapper=s;k.scaleInfo=o=d.scaleMap(k.images[0],k.images[1],l.scaleMap);
e=k.graphics.createVisibleCanvas(k);m=k.graphics.createVisibleCanvas(k);k.base_canvas=e;
k.overlay_canvas=m;j=a(k.images[1]).addClass(&quot;mapster_el&quot;).addClass(k.images[0].className).attr({id:null,usemap:null});
p=d.size(k.images[0]);if(p.complete){j.css({width:p.width,height:p.height});}k.buildDataset();
f={display:&quot;block&quot;,position:&quot;relative&quot;,padding:0,width:o.width,height:o.height};if(l.wrapCss){a.extend(f,l.wrapCss);
}if(h.parent()[0]!==k.wrapper[0]){h.before(k.wrapper);}s.css(f);a(k.images.slice(2)).hide();
for(g=1;g&lt;k.images.length;g++){s.append(k.images[g]);}s.append(e).append(m).append(h.css(b.canvas_style));
d.setOpacity(k.images[0],0);a(k.images[1]).show();d.setOpacity(k.images[1],1);if(l.isSelectable&amp;&amp;l.onGetList){r=k.data.slice(0);
if(l.sortList){if(l.sortList===&quot;desc&quot;){q=function(i,t){return i===t?0:(i&gt;t?-1:1);
};}else{q=function(i,t){return i===t?0:(i&lt;t?-1:1);};}r.sort(function(i,t){i=i.value;
t=t.value;return q(i,t);});}k.options.boundList=l.onGetList.call(k.image,r);}k.complete=true;
k.processCommandQueue();if(l.onConfigured&amp;&amp;typeof l.onConfigured===&quot;function&quot;){l.onConfigured.call(h,true);
}};c.buildDataset=function(w){var x,i,p,h,e,g,k,s,q,r,t,n,l,o,u=this,v=u.options,m;
function f(y,z){var j=new b.AreaData(u,y,z);j.areaId=u._xref[y]=u.data.push(j)-1;
return j.areaId;}u._xref={};u.data=[];if(!w){u.mapAreas=[];}m=!v.mapKey;if(m){v.mapKey=&quot;data-mapster-key&quot;;
}x=(a.browser.msie&amp;&amp;a.browser.version&lt;=7)?&quot;area&quot;:(m?&quot;area[coords]&quot;:&quot;area[&quot;+v.mapKey+&quot;]&quot;);
i=a(u.map).find(x).unbind(&quot;.mapster&quot;);for(t=0;t<I>=0;p--){q=r[p];if(v.mapValue){n=e.attr(v.mapValue);
}if(m){h=f(u.data.length,n);l=u.data[h];l.key=q=h.toString();}else{h=u._xref[q];if(h&gt;=0){l=u.data[h];
if(n&amp;&amp;!u.data[h].value){l.value=n;}}else{h=f(q,n);l=u.data[h];l.isPrimary=p===0;}}s.areaDataXref.push(h);
l.areasXref.push(t);}o=e.attr(&quot;href&quot;);if(o&amp;&amp;o!==&quot;#&quot;&amp;&amp;!l.href){l.href=o;}if(!s.nohref){e.bind(&quot;mouseover.mapster&quot;,u.mouseover).bind(&quot;mouseout.mapster&quot;,u.mouseout).bind(&quot;click.mapster&quot;,u.click).bind(&quot;mousedown.mapster&quot;,u.mousedown);
}e.data(&quot;mapster&quot;,t+1);}u.setAreaOptions(v.areas);u.redrawSelections();};c.processCommandQueue=function(){var e,f=this;
while(!f.currentAction&amp;&amp;f.commands.length){e=f.commands[0];f.commands.splice(0,1);
b.impl[e.command].apply(e.that,e.args);}};c.clearEvents=function(){a(this.map).find(&quot;area&quot;).unbind(&quot;.mapster&quot;);
a(this.images).unbind(&quot;.mapster&quot;);};c._clearCanvases=function(e){if(!e){a(this.base_canvas).remove();
}a(this.overlay_canvas).remove();};c.clearMapData=function(f){var e=this;this._clearCanvases(f);
a.each(this.data,function(h,g){g.reset();});this.data=null;if(!f){this.image.style.cssText=this.imgCssText;
a(this.wrapper).before(this.image).remove();}a.each(this.images,function(h,g){if(e.images[h]!==g.image){e.images[h]=null;
}});e.images=[];this.image=null;d.ifFunction(this.clearTooltip,this);};c.removeSelectionFinish=function(){var e=this.graphics;
e.refreshSelections();e.clearHighlight();};}(jQuery));(function(a){var c,b=a.mapster,d=b.utils;
b.AreaData=function(f,e,g){a.extend(this,{owner:f,key:e||&quot;&quot;,isPrimary:true,areaId:-1,href:&quot;&quot;,value:g||&quot;&quot;,options:{},selected:null,areasXref:[],area:null,optsCache:null});
};c=b.AreaData.prototype;c.areas=function(){var e,f=[];for(e=0;e&lt;this.areasXref.length;
e++){f.push(this.owner.mapAreas[this.areasXref[e]]);}return f;};c.coords=function(f){var e=[];
a.each(this.areas(),function(h,g){e=e.concat(g.coords(f));});return e;};c.reset=function(){a.each(this.areas(),function(g,f){f.reset();
});this.areasXref=[];this.options=null;};c.isSelectedOrStatic=function(){var e=this.effectiveOptions();
return d.isBool(e.staticState)?e.staticState:this.isSelected();};c.isSelected=function(){return d.isBool(this.selected)?this.selected:d.isBool(this.owner.area_options.selected)?this.owner.area_options.selected:false;
};c.isSelectable=function(){return d.isBool(this.effectiveOptions().staticState)?false:(d.isBool(this.owner.options.staticState)?false:d.boolOrDefault(this.effectiveOptions().isSelectable,true));
};c.isDeselectable=function(){return d.isBool(this.effectiveOptions().staticState)?false:(d.isBool(this.owner.options.staticState)?false:d.boolOrDefault(this.effectiveOptions().isDeselectable,true));
};c.isNotRendered=function(){var e=a(this.area);return e.attr(&quot;nohref&quot;)||!e.attr(&quot;href&quot;)||this.effectiveOptions().isMask;
};c.effectiveOptions=function(f){var e=d.updateProps({},this.owner.area_options,this.options,f||{},{id:this.areaId});
e.selected=this.isSelected();return e;};c.effectiveRenderOptions=function(f,h){var e,g=this.optsCache;
if(!g||f===&quot;highlight&quot;){e=this.effectiveOptions(h);g=d.updateProps({},e,e[&quot;render_&quot;+f],{alt_image:this.owner.altImage(f)});
if(f!==&quot;highlight&quot;){this.optsCache=g;}}return a.extend({},g);};c.changeState=function(f,e){if(a.isFunction(this.owner.options.onStateChange)){this.owner.options.onStateChange.call(this.owner.image,{key:this.key,state:f,selected:e});
}};c.highlight=function(f){var e=this.owner;if(this.effectiveOptions().highlight){e.graphics.addShapeGroup(this,&quot;highlight&quot;,f);
}e.setHighlightId(this.areaId);this.changeState(&quot;highlight&quot;,true);};c.drawSelection=function(){this.owner.graphics.addShapeGroup(this,&quot;select&quot;);
};c.addSelection=function(f){var e=this.owner;if(e.options.singleSelect){e.clearSelections();
}if(!this.isSelected()){if(f){this.optsCache=a.extend(this.effectiveRenderOptions(&quot;select&quot;),f);
}this.drawSelection();if(f){this.optsCache=null;}this.selected=true;this.changeState(&quot;select&quot;,true);
}if(e.options.singleSelect){e.graphics.refreshSelections();}};c.removeSelection=function(e){this.selected=false;
this.changeState(&quot;select&quot;,false);this.optsCache=null;this.owner.graphics.removeSelections(this.areaId);
if(!e){this.owner.removeSelectionFinish();}};c.toggleSelection=function(e){if(!this.isSelected()){this.addSelection(e);
}else{this.removeSelection();}return this.isSelected();};b.MapArea=function(h,e,f){if(!h){return;
}var g=this;g.owner=h;g.area=e;g.areaDataXref=[];g.originalCoords=[];a.each(d.split(e.coords),function(k,j){g.originalCoords.push(parseFloat(j));
});g.length=g.originalCoords.length;g.shape=e.shape.toLowerCase();g.nohref=e.nohref||!e.href;
g.configure(f);};b.MapArea.prototype.configure=function(e){this.keys=d.split(e);};
b.MapArea.prototype.reset=function(){this.area=null;};b.MapArea.prototype.coords=function(e){return a.map(this.originalCoords,function(f){return e?f:f+e;
});};}(jQuery));(function(a){var b=a.mapster.utils;b.areaCorners=function(e,x,o){var n,t,u,r,s,h,f,i,g,l,m,v,q,p,w,c,d,k=[];
for(q=0;q&lt;e.length;q++){d=e[q];p=b.split(d.coords,parseInt);switch(d.shape){case&quot;circle&quot;:l=p[0];
m=p[1];w=p[2];k=[];for(q=0;q&lt;360;q+=20){c=q*Math.PI/180;k.push(l+w*Math.cos(c),m+w*Math.sin(c));
}break;case&quot;rect&quot;:k.push(p[0],p[1],p[2],p[1],p[2],p[3],p[0],p[3]);break;default:k=k.concat(p);
break;}}t=u=h=i=999999;r=s=f=g=-1;for(q=k.length-2;q&gt;=0;q-=2){l=parseInt(k[q],10);
m=parseInt(k[q+1],10);if(l&lt;t){t=l;g=m;}if(l&gt;r){r=l;i=m;}if(m<U>s){s=m;
h=l;}}if(x&amp;&amp;o){n=false;a.each([[f-x,u-o],[h,u-o],[t-x,g-o],[t-x,i],[r,g-o],[r,i],[f-x,s],[h,s]],function(y,j){if(!n&amp;&amp;(j[0]&gt;0&amp;&amp;j[1]&gt;0)){v=j;
n=true;return false;}});if(!n){v=[r,s];}}return{tl:[t,u],br:[r,s],tt:v};};}(jQuery));
(function(a){var e=a.mapster_when,b=a.mapster,d=b.utils,c=b.MapArea.prototype;b.utils.getScaleInfo=function(g,f){var h;
if(!f){h=1;f=g;}else{h=g.width/f.width||g.height/f.height;if(h&gt;0.98&amp;&amp;h&lt;1.02){h=1;
}}return{scale:(h!==1),scalePct:h,realWidth:f.width,realHeight:f.height,width:g.width,height:g.height,ratio:g.width/g.height};
};b.utils.scaleMap=function(f,g,i){var j=d.size(f),h=d.size(g);if(!h.complete){throw (&quot;Another script, such as an extension, appears to be interfering with image loading. Please let us know about this.&quot;);
}if(!j.complete){j=h;}return this.getScaleInfo(j,i?h:null);};b.MapData.prototype.resize=function(r,o,i,f){var t,u,m,v,y,l,h,s={callback:f||i},q,j,n=this;
function x(p,A,z){if(a.mapster.hasCanvas){p.width=A;p.height=z;}else{a(p).width(A);
a(p).height(z);}}function g(){n.currentAction=&quot;&quot;;if(a.isFunction(s.callback)){s.callback();
}n.processCommandQueue();}function k(){x(n.overlay_canvas,y,l);if(s.highlight&amp;&amp;m&gt;=0){var p=n.data[m];
p.tempOptions={fade:false};n.getDataForKey(p.key).highlight();p.tempOptions=null;
}x(n.base_canvas,y,l);n.redrawSelections();g();}function w(){a(n.image).css(q);n.scaleInfo=d.getScaleInfo({width:y,height:l},{width:n.scaleInfo.realWidth,height:n.scaleInfo.realHeight});
a.each(n.data,function(z,p){a.each(p.areas(),function(B,A){A.resize();});});}if(typeof r===&quot;object&quot;){s=r;
}else{s.width=r;s.height=o;s.duration=i||0;}y=s.width;l=s.height;h=s.duration;if(n.scaleInfo.width===y&amp;&amp;n.scaleInfo.height===l){return;
}m=n.highlightId;if(!y){v=l/n.scaleInfo.realHeight;y=Math.round(n.scaleInfo.realWidth*v);
}if(!l){v=y/n.scaleInfo.realWidth;l=Math.round(n.scaleInfo.realHeight*v);}q={width:String(y)+&quot;px&quot;,height:String(l)+&quot;px&quot;};
if(!a.mapster.hasCanvas){a(n.base_canvas).children().remove();}j=a(n.wrapper).find(&quot;.mapster_el&quot;).add(n.wrapper);
if(h){u=[];n.currentAction=&quot;resizing&quot;;j.each(function(z,p){t=e.defer();u.push(t);
a(p).animate(q,{duration:h,complete:t.resolve,easing:&quot;linear&quot;});});t=e.defer();u.push(t);
e.all(u).then(k);w();t.resolve();}else{j.css(q);w();k();}};b.MapArea=d.subclass(b.MapArea,function(){this.base.init();
if(this.owner.scaleInfo.scale){this.resize();}});c.coords=function(l,f){var g,h=[],k=l||this.owner.scaleInfo.scalePct,i=f||0;
if(k===1&amp;&amp;f===0){return this.originalCoords;}for(g=0;g&lt;this.length;g++){h.push(Math.round(this.originalCoords[g]*k)+i);
}return h;};c.resize=function(){this.area.coords=this.coords().join(&quot;,&quot;);};c.reset=function(){this.area.coords=this.coords(1).join(&quot;,&quot;);
};b.impl.resize=function(h,g,f){if(!h&amp;&amp;!g){return false;}var i=(new b.Method(this,function(){this.resize(h,g,f);
},null,{name:&quot;resize&quot;,args:arguments})).go();return i;};b.impl.zoom=function(f,h){var g=h||{};
function i(j){var x,k,n,B,u,l,m,v,w,r,s,q,p,z,A,t=g.padding||0,y=j?20:0,o=this,C=false;
if(j){if(!o.zoomed){o.zoomed=true;o.preZoomWidth=o.scaleInfo.width;o.preZoomHeight=o.scaleInfo.height;
o.zoomedArea=j;if(g.scroll){o.wrapper.css({overflow:&quot;auto&quot;});}}k=a.mapster.utils.areaCorners(j.coords(1,0));
B=o.wrapper.innerWidth()-y-t*2;n=o.wrapper.innerHeight()-y-t*2;l=k.maxX-k.minX;m=k.maxY-k.minY;
v=B/l;w=n/m;u=Math.min(v,w);r=(B-l*u)/2;s=(n-m*u)/2;q=o.scaleInfo.realWidth*u;p=o.scaleInfo.realHeight*u;
z=(k.minX)*u-t-r;A=(k.minY)*u-t-s;}else{if(!o.zoomed){return;}C=true;q=o.preZoomWidth;
p=o.preZoomHeight;z=null;A=null;}this.resize({width:q,height:p,duration:g.duration,scroll:x,scrollLeft:z,scrollTop:A,callback:(function(){var E=C,F=g.scroll,D=j;
return function(){if(E){o.preZoomWidth=null;o.preZoomHeight=null;o.zoomed=false;o.zoomedArea=false;
if(F){o.wrapper.css({overflow:&quot;inherit&quot;});}}else{o.zoomedArea=D;}};}())});}return(new b.Method(this,function(j){i.call(this);
},function(){i.call(this.owner,this);},{name:&quot;zoom&quot;,args:arguments,first:true,key:f})).go();
</U></I></P>
};}(jQuery));(function(a){var b=a.mapster,c=b.utils;a.extend(b.defaults,{toolTipContainer:'',showToolTip:false,toolTipFade:true,toolTipClose:[&quot;area-mouseout&quot;,&quot;image-mouseout&quot;],onShowToolTip:null,onCreateTooltip:null});
<P>a.extend(b.area_defaults,{toolTip:null});b.MapData.prototype.clearTooltip=function(){if(this.activeToolTip){this.activeToolTip.stop().remove();
this.activeToolTip=null;this.activeToolTipID=-1;}a.each(this._tooltip_events,function(f,d){d.object.unbind(d.event);
});};b.MapData.prototype.bindTooltipClose=function(i,e,h,d){var f=e+&quot;.mapster-tooltip&quot;,g=this;
if(a.inArray(i,this.options.toolTipClose)&gt;=0){h.unbind(f).bind(f,function(j){if(!d||d.call(this,j)){g.clearTooltip();
}});this._tooltip_events.push({object:h,event:f,callback:d});}};b.AreaData.prototype.showTooltip=function(){var i,l,m,g,d,f,j=this.effectiveOptions(),h=this.owner,e=h.options,k=h.options.toolTipContainer;
h.cancelClear=true;if(h.activeToolTipID===this.areaId){return;}if(typeof k===&quot;string&quot;){f=a(k);
}else{f=a(k).clone();}l=f.html(j.toolTip).hide();h.clearTooltip();a(&quot;body&quot;).append(l);
h.activeToolTip=l;h.activeToolTipID=this.areaId;c.setOpacity(l[0],0);l.show();d=this.area?[this.area]:a.map(this.areas(),function(n){return n.area;
});g=c.areaCorners(d,l.outerWidth(true),l.outerHeight(true));i=a(h.image).offset();
m={left:i.left+g.tt[0]+&quot;px&quot;,top:i.top+g.tt[1]+&quot;px&quot;};if(parseInt(l.css(&quot;z-index&quot;),10)===0||l.css(&quot;z-index&quot;)===&quot;auto&quot;){m[&quot;z-index&quot;]=9999;
}l.css(m).addClass(&quot;mapster_tooltip&quot;);h.bindTooltipClose(&quot;area-click&quot;,&quot;click&quot;,a(h.map));
h.bindTooltipClose(&quot;tooltip-click&quot;,&quot;click&quot;,l);h.bindTooltipClose(&quot;image-mouseout&quot;,&quot;mouseout&quot;,a(h.image),function(n){return(n.relatedTarget.nodeName!==&quot;AREA&quot;&amp;&amp;n.relatedTarget!==this);
});if(h.options.toolTipFade){c.fader(l[0],0,1,j.fadeDuration);}else{c.setOpacity(l[0],1);
}c.ifFunction(e.onShowToolTip,this.area||null,{toolTip:l,areaOptions:j,key:this.key,selected:this.isSelected()});
};b.impl.tooltip=function(d){return(new b.Method(this,function(){this.clearTooltip();
},function(){if(this.effectiveOptions().toolTip){this.showTooltip();}},{name:&quot;tooltip&quot;,args:arguments,key:d})).go();
};}(jQuery));</P><DIV class="printfooter">
Retrieved from &quot;<A href="http://2012.igem.org/Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js">http://2012.igem.org/Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js</A>&quot;</DIV></DIV></DIV><DIV id="footer-box" class="noprint"><DIV id="footer"><UL id="f-list"><LI id="t-recentchanges"><A href="/Special:RecentChanges" title="Recent changes">Recent changes</A></LI><LI id="t-whatlinkshere"><A href="/Special:WhatLinksHere/Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js" title="List of all wiki pages that link here [j]" accesskey="j">What links here</A></LI><LI id="t-recentchangeslinked"><A href="/Special:RecentChangesLinked/Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</A></LI><LI id="t-specialpages"><A href="/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</A></LI><LI><A href="/Special:Preferences">My preferences</A></LI></UL></DIV><DIV id="footer"><UL id="f-list"><LI id="t-print"><A href="/wiki/index.php?title=Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</A></LI><LI id="t-permalink"><A href="/wiki/index.php?title=Team:ETH_Zurich/JavaScript/jquery.imagemapster.min.js&amp;oldid=283002" title="Permanent link to this revision of the page">Permanent link</A></LI><LI id="privacy"><A href="/2012.igem.org:Privacy_policy" title="2012.igem.org:Privacy policy">Privacy policy</A></LI><LI id="disclaimer"><A href="/2012.igem.org:General_disclaimer" title="2012.igem.org:General disclaimer">Disclaimers</A></LI></UL></DIV></DIV></DIV></BODY></HTML>